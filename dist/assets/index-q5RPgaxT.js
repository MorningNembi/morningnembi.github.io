(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function e(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=e(i);fetch(i.href,a)}})();var wpe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function v7(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var v2={exports:{}},O0={};var P3;function p7(){if(P3)return O0;P3=1;var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function e(r,i,a){var s=null;if(a!==void 0&&(s=""+a),i.key!==void 0&&(s=""+i.key),"key"in i){a={};for(var o in i)o!=="key"&&(a[o]=i[o])}else a=i;return i=a.ref,{$$typeof:t,type:r,key:s,ref:i!==void 0?i:null,props:a}}return O0.Fragment=n,O0.jsx=e,O0.jsxs=e,O0}var F3;function m7(){return F3||(F3=1,v2.exports=p7()),v2.exports}var ue=m7(),p2={exports:{}},Wn={};var B3;function g7(){if(B3)return Wn;B3=1;var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),m=Symbol.iterator;function _(K){return K===null||typeof K!="object"?null:(K=m&&K[m]||K["@@iterator"],typeof K=="function"?K:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,N={};function S(K,ce,me){this.props=K,this.context=ce,this.refs=N,this.updater=me||b}S.prototype.isReactComponent={},S.prototype.setState=function(K,ce){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,ce,"setState")},S.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function M(){}M.prototype=S.prototype;function w(K,ce,me){this.props=K,this.context=ce,this.refs=N,this.updater=me||b}var U=w.prototype=new M;U.constructor=w,C(U,S.prototype),U.isPureReactComponent=!0;var L=Array.isArray;function P(){}var x={H:null,A:null,T:null,S:null},H=Object.prototype.hasOwnProperty;function F(K,ce,me){var Le=me.ref;return{$$typeof:t,type:K,key:ce,ref:Le!==void 0?Le:null,props:me}}function Q(K,ce){return F(K.type,ce,K.props)}function $(K){return typeof K=="object"&&K!==null&&K.$$typeof===t}function q(K){var ce={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(me){return ce[me]})}var X=/\/+/g;function V(K,ce){return typeof K=="object"&&K!==null&&K.key!=null?q(""+K.key):ce.toString(36)}function ee(K){switch(K.status){case"fulfilled":return K.value;case"rejected":throw K.reason;default:switch(typeof K.status=="string"?K.then(P,P):(K.status="pending",K.then(function(ce){K.status==="pending"&&(K.status="fulfilled",K.value=ce)},function(ce){K.status==="pending"&&(K.status="rejected",K.reason=ce)})),K.status){case"fulfilled":return K.value;case"rejected":throw K.reason}}throw K}function z(K,ce,me,Le,ge){var Ee=typeof K;(Ee==="undefined"||Ee==="boolean")&&(K=null);var Ye=!1;if(K===null)Ye=!0;else switch(Ee){case"bigint":case"string":case"number":Ye=!0;break;case"object":switch(K.$$typeof){case t:case n:Ye=!0;break;case h:return Ye=K._init,z(Ye(K._payload),ce,me,Le,ge)}}if(Ye)return ge=ge(K),Ye=Le===""?"."+V(K,0):Le,L(ge)?(me="",Ye!=null&&(me=Ye.replace(X,"$&/")+"/"),z(ge,ce,me,"",function(Ht){return Ht})):ge!=null&&($(ge)&&(ge=Q(ge,me+(ge.key==null||K&&K.key===ge.key?"":(""+ge.key).replace(X,"$&/")+"/")+Ye)),ce.push(ge)),1;Ye=0;var tt=Le===""?".":Le+":";if(L(K))for(var yt=0;yt<K.length;yt++)Le=K[yt],Ee=tt+V(Le,yt),Ye+=z(Le,ce,me,Ee,ge);else if(yt=_(K),typeof yt=="function")for(K=yt.call(K),yt=0;!(Le=K.next()).done;)Le=Le.value,Ee=tt+V(Le,yt++),Ye+=z(Le,ce,me,Ee,ge);else if(Ee==="object"){if(typeof K.then=="function")return z(ee(K),ce,me,Le,ge);throw ce=String(K),Error("Objects are not valid as a React child (found: "+(ce==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":ce)+"). If you meant to render a collection of children, use an array instead.")}return Ye}function ie(K,ce,me){if(K==null)return K;var Le=[],ge=0;return z(K,Le,"","",function(Ee){return ce.call(me,Ee,ge++)}),Le}function se(K){if(K._status===-1){var ce=K._result;ce=ce(),ce.then(function(me){(K._status===0||K._status===-1)&&(K._status=1,K._result=me)},function(me){(K._status===0||K._status===-1)&&(K._status=2,K._result=me)}),K._status===-1&&(K._status=0,K._result=ce)}if(K._status===1)return K._result.default;throw K._result}var he=typeof reportError=="function"?reportError:function(K){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ce=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof K=="object"&&K!==null&&typeof K.message=="string"?String(K.message):String(K),error:K});if(!window.dispatchEvent(ce))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",K);return}console.error(K)},pe={map:ie,forEach:function(K,ce,me){ie(K,function(){ce.apply(this,arguments)},me)},count:function(K){var ce=0;return ie(K,function(){ce++}),ce},toArray:function(K){return ie(K,function(ce){return ce})||[]},only:function(K){if(!$(K))throw Error("React.Children.only expected to receive a single React element child.");return K}};return Wn.Activity=p,Wn.Children=pe,Wn.Component=S,Wn.Fragment=e,Wn.Profiler=i,Wn.PureComponent=w,Wn.StrictMode=r,Wn.Suspense=u,Wn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=x,Wn.__COMPILER_RUNTIME={__proto__:null,c:function(K){return x.H.useMemoCache(K)}},Wn.cache=function(K){return function(){return K.apply(null,arguments)}},Wn.cacheSignal=function(){return null},Wn.cloneElement=function(K,ce,me){if(K==null)throw Error("The argument must be a React element, but you passed "+K+".");var Le=C({},K.props),ge=K.key;if(ce!=null)for(Ee in ce.key!==void 0&&(ge=""+ce.key),ce)!H.call(ce,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&ce.ref===void 0||(Le[Ee]=ce[Ee]);var Ee=arguments.length-2;if(Ee===1)Le.children=me;else if(1<Ee){for(var Ye=Array(Ee),tt=0;tt<Ee;tt++)Ye[tt]=arguments[tt+2];Le.children=Ye}return F(K.type,ge,Le)},Wn.createContext=function(K){return K={$$typeof:s,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null},K.Provider=K,K.Consumer={$$typeof:a,_context:K},K},Wn.createElement=function(K,ce,me){var Le,ge={},Ee=null;if(ce!=null)for(Le in ce.key!==void 0&&(Ee=""+ce.key),ce)H.call(ce,Le)&&Le!=="key"&&Le!=="__self"&&Le!=="__source"&&(ge[Le]=ce[Le]);var Ye=arguments.length-2;if(Ye===1)ge.children=me;else if(1<Ye){for(var tt=Array(Ye),yt=0;yt<Ye;yt++)tt[yt]=arguments[yt+2];ge.children=tt}if(K&&K.defaultProps)for(Le in Ye=K.defaultProps,Ye)ge[Le]===void 0&&(ge[Le]=Ye[Le]);return F(K,Ee,ge)},Wn.createRef=function(){return{current:null}},Wn.forwardRef=function(K){return{$$typeof:o,render:K}},Wn.isValidElement=$,Wn.lazy=function(K){return{$$typeof:h,_payload:{_status:-1,_result:K},_init:se}},Wn.memo=function(K,ce){return{$$typeof:c,type:K,compare:ce===void 0?null:ce}},Wn.startTransition=function(K){var ce=x.T,me={};x.T=me;try{var Le=K(),ge=x.S;ge!==null&&ge(me,Le),typeof Le=="object"&&Le!==null&&typeof Le.then=="function"&&Le.then(P,he)}catch(Ee){he(Ee)}finally{ce!==null&&me.types!==null&&(ce.types=me.types),x.T=ce}},Wn.unstable_useCacheRefresh=function(){return x.H.useCacheRefresh()},Wn.use=function(K){return x.H.use(K)},Wn.useActionState=function(K,ce,me){return x.H.useActionState(K,ce,me)},Wn.useCallback=function(K,ce){return x.H.useCallback(K,ce)},Wn.useContext=function(K){return x.H.useContext(K)},Wn.useDebugValue=function(){},Wn.useDeferredValue=function(K,ce){return x.H.useDeferredValue(K,ce)},Wn.useEffect=function(K,ce){return x.H.useEffect(K,ce)},Wn.useEffectEvent=function(K){return x.H.useEffectEvent(K)},Wn.useId=function(){return x.H.useId()},Wn.useImperativeHandle=function(K,ce,me){return x.H.useImperativeHandle(K,ce,me)},Wn.useInsertionEffect=function(K,ce){return x.H.useInsertionEffect(K,ce)},Wn.useLayoutEffect=function(K,ce){return x.H.useLayoutEffect(K,ce)},Wn.useMemo=function(K,ce){return x.H.useMemo(K,ce)},Wn.useOptimistic=function(K,ce){return x.H.useOptimistic(K,ce)},Wn.useReducer=function(K,ce,me){return x.H.useReducer(K,ce,me)},Wn.useRef=function(K){return x.H.useRef(K)},Wn.useState=function(K){return x.H.useState(K)},Wn.useSyncExternalStore=function(K,ce,me){return x.H.useSyncExternalStore(K,ce,me)},Wn.useTransition=function(){return x.H.useTransition()},Wn.version="19.2.0",Wn}var H3;function II(){return H3||(H3=1,p2.exports=g7()),p2.exports}var R=II();const E=v7(R);var m2={exports:{}},D0={},g2={exports:{}},_2={};var G3;function _7(){return G3||(G3=1,(function(t){function n(z,ie){var se=z.length;z.push(ie);e:for(;0<se;){var he=se-1>>>1,pe=z[he];if(0<i(pe,ie))z[he]=ie,z[se]=pe,se=he;else break e}}function e(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var ie=z[0],se=z.pop();if(se!==ie){z[0]=se;e:for(var he=0,pe=z.length,K=pe>>>1;he<K;){var ce=2*(he+1)-1,me=z[ce],Le=ce+1,ge=z[Le];if(0>i(me,se))Le<pe&&0>i(ge,me)?(z[he]=ge,z[Le]=se,he=Le):(z[he]=me,z[ce]=se,he=ce);else if(Le<pe&&0>i(ge,se))z[he]=ge,z[Le]=se,he=Le;else break e}}return ie}function i(z,ie){var se=z.sortIndex-ie.sortIndex;return se!==0?se:z.id-ie.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var u=[],c=[],h=1,p=null,m=3,_=!1,b=!1,C=!1,N=!1,S=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function U(z){for(var ie=e(c);ie!==null;){if(ie.callback===null)r(c);else if(ie.startTime<=z)r(c),ie.sortIndex=ie.expirationTime,n(u,ie);else break;ie=e(c)}}function L(z){if(C=!1,U(z),!b)if(e(u)!==null)b=!0,P||(P=!0,q());else{var ie=e(c);ie!==null&&ee(L,ie.startTime-z)}}var P=!1,x=-1,H=5,F=-1;function Q(){return N?!0:!(t.unstable_now()-F<H)}function $(){if(N=!1,P){var z=t.unstable_now();F=z;var ie=!0;try{e:{b=!1,C&&(C=!1,M(x),x=-1),_=!0;var se=m;try{t:{for(U(z),p=e(u);p!==null&&!(p.expirationTime>z&&Q());){var he=p.callback;if(typeof he=="function"){p.callback=null,m=p.priorityLevel;var pe=he(p.expirationTime<=z);if(z=t.unstable_now(),typeof pe=="function"){p.callback=pe,U(z),ie=!0;break t}p===e(u)&&r(u),U(z)}else r(u);p=e(u)}if(p!==null)ie=!0;else{var K=e(c);K!==null&&ee(L,K.startTime-z),ie=!1}}break e}finally{p=null,m=se,_=!1}ie=void 0}}finally{ie?q():P=!1}}}var q;if(typeof w=="function")q=function(){w($)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,V=X.port2;X.port1.onmessage=$,q=function(){V.postMessage(null)}}else q=function(){S($,0)};function ee(z,ie){x=S(function(){z(t.unstable_now())},ie)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(z){switch(m){case 1:case 2:case 3:var ie=3;break;default:ie=m}var se=m;m=ie;try{return z()}finally{m=se}},t.unstable_requestPaint=function(){N=!0},t.unstable_runWithPriority=function(z,ie){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var se=m;m=z;try{return ie()}finally{m=se}},t.unstable_scheduleCallback=function(z,ie,se){var he=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?he+se:he):se=he,z){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=se+pe,z={id:h++,callback:ie,priorityLevel:z,startTime:se,expirationTime:pe,sortIndex:-1},se>he?(z.sortIndex=se,n(c,z),e(u)===null&&z===e(c)&&(C?(M(x),x=-1):C=!0,ee(L,se-he))):(z.sortIndex=pe,n(u,z),b||_||(b=!0,P||(P=!0,q()))),z},t.unstable_shouldYield=Q,t.unstable_wrapCallback=function(z){var ie=m;return function(){var se=m;m=ie;try{return z.apply(this,arguments)}finally{m=se}}}})(_2)),_2}var V3;function y7(){return V3||(V3=1,g2.exports=_7()),g2.exports}var y2={exports:{}},cs={};var z3;function E7(){if(z3)return cs;z3=1;var t=II();function n(u){var c="https://react.dev/errors/"+u;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+u+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var r={d:{f:e,r:function(){throw Error(n(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(u,c,h){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:u,containerInfo:c,implementation:h}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(u,c){if(u==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return cs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,cs.createPortal=function(u,c){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(n(299));return a(u,c,null,h)},cs.flushSync=function(u){var c=s.T,h=r.p;try{if(s.T=null,r.p=2,u)return u()}finally{s.T=c,r.p=h,r.d.f()}},cs.preconnect=function(u,c){typeof u=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,r.d.C(u,c))},cs.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},cs.preinit=function(u,c){if(typeof u=="string"&&c&&typeof c.as=="string"){var h=c.as,p=o(h,c.crossOrigin),m=typeof c.integrity=="string"?c.integrity:void 0,_=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;h==="style"?r.d.S(u,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:p,integrity:m,fetchPriority:_}):h==="script"&&r.d.X(u,{crossOrigin:p,integrity:m,fetchPriority:_,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},cs.preinitModule=function(u,c){if(typeof u=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var h=o(c.as,c.crossOrigin);r.d.M(u,{crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&r.d.M(u)},cs.preload=function(u,c){if(typeof u=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var h=c.as,p=o(h,c.crossOrigin);r.d.L(u,h,{crossOrigin:p,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},cs.preloadModule=function(u,c){if(typeof u=="string")if(c){var h=o(c.as,c.crossOrigin);r.d.m(u,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else r.d.m(u)},cs.requestFormReset=function(u){r.d.r(u)},cs.unstable_batchedUpdates=function(u,c){return u(c)},cs.useFormState=function(u,c,h){return s.H.useFormState(u,c,h)},cs.useFormStatus=function(){return s.H.useHostTransitionStatus()},cs.version="19.2.0",cs}var j3;function R6(){if(j3)return y2.exports;j3=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(n){console.error(n)}}return t(),y2.exports=E7(),y2.exports}var q3;function b7(){if(q3)return D0;q3=1;var t=y7(),n=II(),e=R6();function r(l){var d="https://react.dev/errors/"+l;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)d+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+l+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function a(l){var d=l,f=l;if(l.alternate)for(;d.return;)d=d.return;else{l=d;do d=l,(d.flags&4098)!==0&&(f=d.return),l=d.return;while(l)}return d.tag===3?f:null}function s(l){if(l.tag===13){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function o(l){if(l.tag===31){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function u(l){if(a(l)!==l)throw Error(r(188))}function c(l){var d=l.alternate;if(!d){if(d=a(l),d===null)throw Error(r(188));return d!==l?null:l}for(var f=l,g=d;;){var T=f.return;if(T===null)break;var I=T.alternate;if(I===null){if(g=T.return,g!==null){f=g;continue}break}if(T.child===I.child){for(I=T.child;I;){if(I===f)return u(T),l;if(I===g)return u(T),d;I=I.sibling}throw Error(r(188))}if(f.return!==g.return)f=T,g=I;else{for(var B=!1,Y=T.child;Y;){if(Y===f){B=!0,f=T,g=I;break}if(Y===g){B=!0,g=T,f=I;break}Y=Y.sibling}if(!B){for(Y=I.child;Y;){if(Y===f){B=!0,f=I,g=T;break}if(Y===g){B=!0,g=I,f=T;break}Y=Y.sibling}if(!B)throw Error(r(189))}}if(f.alternate!==g)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?l:d}function h(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l;for(l=l.child;l!==null;){if(d=h(l),d!==null)return d;l=l.sibling}return null}var p=Object.assign,m=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),M=Symbol.for("react.consumer"),w=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),H=Symbol.for("react.lazy"),F=Symbol.for("react.activity"),Q=Symbol.for("react.memo_cache_sentinel"),$=Symbol.iterator;function q(l){return l===null||typeof l!="object"?null:(l=$&&l[$]||l["@@iterator"],typeof l=="function"?l:null)}var X=Symbol.for("react.client.reference");function V(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===X?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case C:return"Fragment";case S:return"Profiler";case N:return"StrictMode";case L:return"Suspense";case P:return"SuspenseList";case F:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case b:return"Portal";case w:return l.displayName||"Context";case M:return(l._context.displayName||"Context")+".Consumer";case U:var d=l.render;return l=l.displayName,l||(l=d.displayName||d.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case x:return d=l.displayName||null,d!==null?d:V(l.type)||"Memo";case H:d=l._payload,l=l._init;try{return V(l(d))}catch{}}return null}var ee=Array.isArray,z=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se={pending:!1,data:null,method:null,action:null},he=[],pe=-1;function K(l){return{current:l}}function ce(l){0>pe||(l.current=he[pe],he[pe]=null,pe--)}function me(l,d){pe++,he[pe]=l.current,l.current=d}var Le=K(null),ge=K(null),Ee=K(null),Ye=K(null);function tt(l,d){switch(me(Ee,d),me(ge,l),me(Le,null),d.nodeType){case 9:case 11:l=(l=d.documentElement)&&(l=l.namespaceURI)?Cv(l):0;break;default:if(l=d.tagName,d=d.namespaceURI)d=Cv(d),l=ls(d,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}ce(Le),me(Le,l)}function yt(){ce(Le),ce(ge),ce(Ee)}function Ht(l){l.memoizedState!==null&&me(Ye,l);var d=Le.current,f=ls(d,l.type);d!==f&&(me(ge,l),me(Le,f))}function zt(l){ge.current===l&&(ce(Le),ce(ge)),Ye.current===l&&(ce(Ye),wh._currentValue=se)}var Xt,Jt;function Mt(l){if(Xt===void 0)try{throw Error()}catch(f){var d=f.stack.trim().match(/\n( *(at )?)/);Xt=d&&d[1]||"",Jt=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Xt+l+Jt}var jt=!1;function en(l,d){if(!l||jt)return"";jt=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(d){var Ke=function(){throw Error()};if(Object.defineProperty(Ke.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ke,[])}catch(ke){var Me=ke}Reflect.construct(l,[],Ke)}else{try{Ke.call()}catch(ke){Me=ke}l.call(Ke.prototype)}}else{try{throw Error()}catch(ke){Me=ke}(Ke=l())&&typeof Ke.catch=="function"&&Ke.catch(function(){})}}catch(ke){if(ke&&Me&&typeof ke.stack=="string")return[ke.stack,Me.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var T=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");T&&T.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var I=g.DetermineComponentFrameRoot(),B=I[0],Y=I[1];if(B&&Y){var de=B.split(`
`),Ae=Y.split(`
`);for(T=g=0;g<de.length&&!de[g].includes("DetermineComponentFrameRoot");)g++;for(;T<Ae.length&&!Ae[T].includes("DetermineComponentFrameRoot");)T++;if(g===de.length||T===Ae.length)for(g=de.length-1,T=Ae.length-1;1<=g&&0<=T&&de[g]!==Ae[T];)T--;for(;1<=g&&0<=T;g--,T--)if(de[g]!==Ae[T]){if(g!==1||T!==1)do if(g--,T--,0>T||de[g]!==Ae[T]){var He=`
`+de[g].replace(" at new "," at ");return l.displayName&&He.includes("<anonymous>")&&(He=He.replace("<anonymous>",l.displayName)),He}while(1<=g&&0<=T);break}}}finally{jt=!1,Error.prepareStackTrace=f}return(f=l?l.displayName||l.name:"")?Mt(f):""}function Dt(l,d){switch(l.tag){case 26:case 27:case 5:return Mt(l.type);case 16:return Mt("Lazy");case 13:return l.child!==d&&d!==null?Mt("Suspense Fallback"):Mt("Suspense");case 19:return Mt("SuspenseList");case 0:case 15:return en(l.type,!1);case 11:return en(l.type.render,!1);case 1:return en(l.type,!0);case 31:return Mt("Activity");default:return""}}function ln(l){try{var d="",f=null;do d+=Dt(l,f),f=l,l=l.return;while(l);return d}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var Yt=Object.prototype.hasOwnProperty,st=t.unstable_scheduleCallback,ft=t.unstable_cancelCallback,un=t.unstable_shouldYield,vt=t.unstable_requestPaint,_t=t.unstable_now,Pt=t.unstable_getCurrentPriorityLevel,Et=t.unstable_ImmediatePriority,Ft=t.unstable_UserBlockingPriority,vn=t.unstable_NormalPriority,Je=t.unstable_LowPriority,Nn=t.unstable_IdlePriority,An=t.log,Mn=t.unstable_setDisableYieldValue,Zt=null,Gt=null;function xt(l){if(typeof An=="function"&&Mn(l),Gt&&typeof Gt.setStrictMode=="function")try{Gt.setStrictMode(Zt,l)}catch{}}var Lt=Math.clz32?Math.clz32:It,Cn=Math.log,ir=Math.LN2;function It(l){return l>>>=0,l===0?32:31-(Cn(l)/ir|0)|0}var Rt=256,Ct=262144,nt=4194304;function Te(l){var d=l&42;if(d!==0)return d;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function it(l,d,f){var g=l.pendingLanes;if(g===0)return 0;var T=0,I=l.suspendedLanes,B=l.pingedLanes;l=l.warmLanes;var Y=g&134217727;return Y!==0?(g=Y&~I,g!==0?T=Te(g):(B&=Y,B!==0?T=Te(B):f||(f=Y&~l,f!==0&&(T=Te(f))))):(Y=g&~I,Y!==0?T=Te(Y):B!==0?T=Te(B):f||(f=g&~l,f!==0&&(T=Te(f)))),T===0?0:d!==0&&d!==T&&(d&I)===0&&(I=T&-T,f=d&-d,I>=f||I===32&&(f&4194048)!==0)?d:T}function St(l,d){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&d)===0}function bt(l,d){switch(l){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gn(){var l=nt;return nt<<=1,(nt&62914560)===0&&(nt=4194304),l}function ct(l){for(var d=[],f=0;31>f;f++)d.push(l);return d}function En(l,d){l.pendingLanes|=d,d!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function ur(l,d,f,g,T,I){var B=l.pendingLanes;l.pendingLanes=f,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=f,l.entangledLanes&=f,l.errorRecoveryDisabledLanes&=f,l.shellSuspendCounter=0;var Y=l.entanglements,de=l.expirationTimes,Ae=l.hiddenUpdates;for(f=B&~f;0<f;){var He=31-Lt(f),Ke=1<<He;Y[He]=0,de[He]=-1;var Me=Ae[He];if(Me!==null)for(Ae[He]=null,He=0;He<Me.length;He++){var ke=Me[He];ke!==null&&(ke.lane&=-536870913)}f&=~Ke}g!==0&&Xn(l,g,0),I!==0&&T===0&&l.tag!==0&&(l.suspendedLanes|=I&~(B&~d))}function Xn(l,d,f){l.pendingLanes|=d,l.suspendedLanes&=~d;var g=31-Lt(d);l.entangledLanes|=d,l.entanglements[g]=l.entanglements[g]|1073741824|f&261930}function ar(l,d){var f=l.entangledLanes|=d;for(l=l.entanglements;f;){var g=31-Lt(f),T=1<<g;T&d|l[g]&d&&(l[g]|=d),f&=~T}}function xn(l,d){var f=d&-d;return f=(f&42)!==0?1:Pn(f),(f&(l.suspendedLanes|d))!==0?0:f}function Pn(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function cr(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function at(){var l=ie.p;return l!==0?l:(l=window.event,l===void 0?32:N1(l.type))}function Nt(l,d){var f=ie.p;try{return ie.p=l,d()}finally{ie.p=f}}var pt=Math.random().toString(36).slice(2),At="__reactFiber$"+pt,Tt="__reactProps$"+pt,We="__reactContainer$"+pt,tn="__reactEvents$"+pt,Vn="__reactListeners$"+pt,qn="__reactHandles$"+pt,In="__reactResources$"+pt,mt="__reactMarker$"+pt;function oe(l){delete l[At],delete l[Tt],delete l[tn],delete l[Vn],delete l[qn]}function Pe(l){var d=l[At];if(d)return d;for(var f=l.parentNode;f;){if(d=f[We]||f[At]){if(f=d.alternate,d.child!==null||f!==null&&f.child!==null)for(l=l1(l);l!==null;){if(f=l[At])return f;l=l1(l)}return d}l=f,f=l.parentNode}return null}function ut(l){if(l=l[At]||l[We]){var d=l.tag;if(d===5||d===6||d===13||d===31||d===26||d===27||d===3)return l}return null}function rn(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l.stateNode;throw Error(r(33))}function wn(l){var d=l[In];return d||(d=l[In]={hoistableStyles:new Map,hoistableScripts:new Map}),d}function an(l){l[mt]=!0}var _r=new Set,Cr={};function Ot(l,d){on(l,d),on(l+"Capture",d)}function on(l,d){for(Cr[l]=d,l=0;l<d.length;l++)_r.add(d[l])}var kt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),pn={},Xr={};function Oi(l){return Yt.call(Xr,l)?!0:Yt.call(pn,l)?!1:kt.test(l)?Xr[l]=!0:(pn[l]=!0,!1)}function Di(l,d,f){if(Oi(d))if(f===null)l.removeAttribute(d);else{switch(typeof f){case"undefined":case"function":case"symbol":l.removeAttribute(d);return;case"boolean":var g=d.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){l.removeAttribute(d);return}}l.setAttribute(d,""+f)}}function Zr(l,d,f){if(f===null)l.removeAttribute(d);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(d);return}l.setAttribute(d,""+f)}}function Wi(l,d,f,g){if(g===null)l.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(f);return}l.setAttributeNS(d,f,""+g)}}function di(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Xs(l){var d=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function Mc(l,d,f){var g=Object.getOwnPropertyDescriptor(l.constructor.prototype,d);if(!l.hasOwnProperty(d)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var T=g.get,I=g.set;return Object.defineProperty(l,d,{configurable:!0,get:function(){return T.call(this)},set:function(B){f=""+B,I.call(this,B)}}),Object.defineProperty(l,d,{enumerable:g.enumerable}),{getValue:function(){return f},setValue:function(B){f=""+B},stopTracking:function(){l._valueTracker=null,delete l[d]}}}}function Pl(l){if(!l._valueTracker){var d=Xs(l)?"checked":"value";l._valueTracker=Mc(l,d,""+l[d])}}function Mo(l){if(!l)return!1;var d=l._valueTracker;if(!d)return!0;var f=d.getValue(),g="";return l&&(g=Xs(l)?l.checked?"true":"false":l.value),l=g,l!==f?(d.setValue(l),!0):!1}function ol(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var wu=/[\n"\\]/g;function aa(l){return l.replace(wu,function(d){return"\\"+d.charCodeAt(0).toString(16)+" "})}function Zs(l,d,f,g,T,I,B,Y){l.name="",B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"?l.type=B:l.removeAttribute("type"),d!=null?B==="number"?(d===0&&l.value===""||l.value!=d)&&(l.value=""+di(d)):l.value!==""+di(d)&&(l.value=""+di(d)):B!=="submit"&&B!=="reset"||l.removeAttribute("value"),d!=null?Ic(l,B,di(d)):f!=null?Ic(l,B,di(f)):g!=null&&l.removeAttribute("value"),T==null&&I!=null&&(l.defaultChecked=!!I),T!=null&&(l.checked=T&&typeof T!="function"&&typeof T!="symbol"),Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"?l.name=""+di(Y):l.removeAttribute("name")}function Fl(l,d,f,g,T,I,B,Y){if(I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"&&(l.type=I),d!=null||f!=null){if(!(I!=="submit"&&I!=="reset"||d!=null)){Pl(l);return}f=f!=null?""+di(f):"",d=d!=null?""+di(d):f,Y||d===l.value||(l.value=d),l.defaultValue=d}g=g??T,g=typeof g!="function"&&typeof g!="symbol"&&!!g,l.checked=Y?l.checked:!!g,l.defaultChecked=!!g,B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"&&(l.name=B),Pl(l)}function Ic(l,d,f){d==="number"&&ol(l.ownerDocument)===l||l.defaultValue===""+f||(l.defaultValue=""+f)}function Io(l,d,f,g){if(l=l.options,d){d={};for(var T=0;T<f.length;T++)d["$"+f[T]]=!0;for(f=0;f<l.length;f++)T=d.hasOwnProperty("$"+l[f].value),l[f].selected!==T&&(l[f].selected=T),T&&g&&(l[f].defaultSelected=!0)}else{for(f=""+di(f),d=null,T=0;T<l.length;T++){if(l[T].value===f){l[T].selected=!0,g&&(l[T].defaultSelected=!0);return}d!==null||l[T].disabled||(d=l[T])}d!==null&&(d.selected=!0)}}function Ru(l,d,f){if(d!=null&&(d=""+di(d),d!==l.value&&(l.value=d),f==null)){l.defaultValue!==d&&(l.defaultValue=d);return}l.defaultValue=f!=null?""+di(f):""}function Bl(l,d,f,g){if(d==null){if(g!=null){if(f!=null)throw Error(r(92));if(ee(g)){if(1<g.length)throw Error(r(93));g=g[0]}f=g}f==null&&(f=""),d=f}f=di(d),l.defaultValue=f,g=l.textContent,g===f&&g!==""&&g!==null&&(l.value=g),Pl(l)}function Ua(l,d){if(d){var f=l.firstChild;if(f&&f===l.lastChild&&f.nodeType===3){f.nodeValue=d;return}}l.textContent=d}var Qa=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ou(l,d,f){var g=d.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?g?l.setProperty(d,""):d==="float"?l.cssFloat="":l[d]="":g?l.setProperty(d,f):typeof f!="number"||f===0||Qa.has(d)?d==="float"?l.cssFloat=f:l[d]=(""+f).trim():l[d]=f+"px"}function ll(l,d,f){if(d!=null&&typeof d!="object")throw Error(r(62));if(l=l.style,f!=null){for(var g in f)!f.hasOwnProperty(g)||d!=null&&d.hasOwnProperty(g)||(g.indexOf("--")===0?l.setProperty(g,""):g==="float"?l.cssFloat="":l[g]="");for(var T in d)g=d[T],d.hasOwnProperty(T)&&f[T]!==g&&Ou(l,T,g)}else for(var I in d)d.hasOwnProperty(I)&&Ou(l,I,d[I])}function Js(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ul=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),cl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function dl(l){return cl.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function xa(){}var Hl=null;function Gl(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var da=null,wo=null;function kd(l){var d=ut(l);if(d&&(l=d.stateNode)){var f=l[Tt]||null;e:switch(l=d.stateNode,d.type){case"input":if(Zs(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),d=f.name,f.type==="radio"&&d!=null){for(f=l;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+aa(""+d)+'"][type="radio"]'),d=0;d<f.length;d++){var g=f[d];if(g!==l&&g.form===l.form){var T=g[Tt]||null;if(!T)throw Error(r(90));Zs(g,T.value,T.defaultValue,T.defaultValue,T.checked,T.defaultChecked,T.type,T.name)}}for(d=0;d<f.length;d++)g=f[d],g.form===l.form&&Mo(g)}break e;case"textarea":Ru(l,f.value,f.defaultValue);break e;case"select":d=f.value,d!=null&&Io(l,!!f.multiple,d,!1)}}}var Pd=!1;function yf(l,d,f){if(Pd)return l(d,f);Pd=!0;try{var g=l(d);return g}finally{if(Pd=!1,(da!==null||wo!==null)&&(Am(),da&&(d=da,l=wo,wo=da=null,kd(d),l)))for(d=0;d<l.length;d++)kd(l[d])}}function Jr(l,d){var f=l.stateNode;if(f===null)return null;var g=f[Tt]||null;if(g===null)return null;f=g[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(l=l.type,g=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!g;break e;default:l=!1}if(l)return null;if(f&&typeof f!="function")throw Error(r(231,d,typeof f));return f}var _s=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wc=!1;if(_s)try{var Vl={};Object.defineProperty(Vl,"passive",{get:function(){wc=!0}}),window.addEventListener("test",Vl,Vl),window.removeEventListener("test",Vl,Vl)}catch{wc=!1}var ys=null,Du=null,Sr=null;function Ir(){if(Sr)return Sr;var l,d=Du,f=d.length,g,T="value"in ys?ys.value:ys.textContent,I=T.length;for(l=0;l<f&&d[l]===T[l];l++);var B=f-l;for(g=1;g<=B&&d[f-g]===T[I-g];g++);return Sr=T.slice(l,1<g?1-g:void 0)}function Rc(l){var d=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&d===13&&(l=13)):l=d,l===10&&(l=13),32<=l||l===13?l:0}function Uu(){return!0}function Ef(){return!1}function sa(l){function d(f,g,T,I,B){this._reactName=f,this._targetInst=T,this.type=g,this.nativeEvent=I,this.target=B,this.currentTarget=null;for(var Y in l)l.hasOwnProperty(Y)&&(f=l[Y],this[Y]=f?f(I):I[Y]);return this.isDefaultPrevented=(I.defaultPrevented!=null?I.defaultPrevented:I.returnValue===!1)?Uu:Ef,this.isPropagationStopped=Ef,this}return p(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Uu)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Uu)},persist:function(){},isPersistent:Uu}),d}var hl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xu=sa(hl),zl=p({},hl,{view:0,detail:0}),bf=sa(zl),_i,jl,Xa,ql=p({},zl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:er,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Xa&&(Xa&&l.type==="mousemove"?(_i=l.screenX-Xa.screenX,jl=l.screenY-Xa.screenY):jl=_i=0,Xa=l),_i)},movementY:function(l){return"movementY"in l?l.movementY:jl}}),Oc=sa(ql),ba=p({},ql,{dataTransfer:0}),Cf=sa(ba),Fd=p({},zl,{relatedTarget:0}),Dc=sa(Fd),Bd=p({},hl,{animationName:0,elapsedTime:0,pseudoElement:0}),Sf=sa(Bd),Jn=p({},hl,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),$t=sa(Jn),Re=p({},hl,{data:0}),_e=sa(Re),nn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Or(l){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(l):(l=Qt[l])?!!d[l]:!1}function er(){return Or}var ei=p({},zl,{key:function(l){if(l.key){var d=nn[l.key]||l.key;if(d!=="Unidentified")return d}return l.type==="keypress"?(l=Rc(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?Vt[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:er,charCode:function(l){return l.type==="keypress"?Rc(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Rc(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),Lu=sa(ei),qg=p({},ql,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),LE=sa(qg),$g=p({},zl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:er}),gT=sa($g),_T=p({},hl,{propertyName:0,elapsedTime:0,pseudoElement:0}),yT=sa(_T),kE=p({},ql,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),Rp=sa(kE),Hd=p({},hl,{newState:0,oldState:0}),ET=sa(Hd),PE=[9,13,27,32],Op=_s&&"CompositionEvent"in window,Uc=null;_s&&"documentMode"in document&&(Uc=document.documentMode);var Kg=_s&&"TextEvent"in window&&!Uc,Yg=_s&&(!Op||Uc&&8<Uc&&11>=Uc),FE=" ",Dp=!1;function Up(l,d){switch(l){case"keyup":return PE.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function BE(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var xc=!1;function Es(l,d){switch(l){case"compositionend":return BE(d);case"keypress":return d.which!==32?null:(Dp=!0,FE);case"textInput":return l=d.data,l===FE&&Dp?null:l;default:return null}}function Wg(l,d){if(xc)return l==="compositionend"||!Op&&Up(l,d)?(l=Ir(),Sr=Du=ys=null,xc=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return Yg&&d.locale!=="ko"?null:d.data;default:return null}}var Tf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qg(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d==="input"?!!Tf[l.type]:d==="textarea"}function Xg(l,d,f,g){da?wo?wo.push(g):wo=[g]:da=g,d=_v(d,"onChange"),0<d.length&&(f=new xu("onChange","change",null,f,g),l.push({event:f,listeners:d}))}var Nf=null,Af=null;function bT(l){Jb(l,0)}function xp(l){var d=rn(l);if(Mo(d))return l}function HE(l,d){if(l==="change")return d}var Lc=!1;if(_s){var Zg;if(_s){var Jg="oninput"in document;if(!Jg){var Lp=document.createElement("div");Lp.setAttribute("oninput","return;"),Jg=typeof Lp.oninput=="function"}Zg=Jg}else Zg=!1;Lc=Zg&&(!document.documentMode||9<document.documentMode)}function e_(){Nf&&(Nf.detachEvent("onpropertychange",$l),Af=Nf=null)}function $l(l){if(l.propertyName==="value"&&xp(Af)){var d=[];Xg(d,Af,l,Gl(l)),yf(bT,d)}}function kp(l,d,f){l==="focusin"?(e_(),Nf=d,Af=f,Nf.attachEvent("onpropertychange",$l)):l==="focusout"&&e_()}function CT(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return xp(Af)}function ST(l,d){if(l==="click")return xp(d)}function TT(l,d){if(l==="input"||l==="change")return xp(d)}function Gd(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var hi=typeof Object.is=="function"?Object.is:Gd;function Vd(l,d){if(hi(l,d))return!0;if(typeof l!="object"||l===null||typeof d!="object"||d===null)return!1;var f=Object.keys(l),g=Object.keys(d);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var T=f[g];if(!Yt.call(d,T)||!hi(l[T],d[T]))return!1}return!0}function GE(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function VE(l,d){var f=GE(l);l=0;for(var g;f;){if(f.nodeType===3){if(g=l+f.textContent.length,l<=d&&g>=d)return{node:f,offset:d-l};l=g}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=GE(f)}}function zE(l,d){return l&&d?l===d?!0:l&&l.nodeType===3?!1:d&&d.nodeType===3?zE(l,d.parentNode):"contains"in l?l.contains(d):l.compareDocumentPosition?!!(l.compareDocumentPosition(d)&16):!1:!1}function jE(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var d=ol(l.document);d instanceof l.HTMLIFrameElement;){try{var f=typeof d.contentWindow.location.href=="string"}catch{f=!1}if(f)l=d.contentWindow;else break;d=ol(l.document)}return d}function t_(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d&&(d==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||d==="textarea"||l.contentEditable==="true")}var zd=_s&&"documentMode"in document&&11>=document.documentMode,ye=null,Be=null,Oe=null,qt=!1;function Fn(l,d,f){var g=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;qt||ye==null||ye!==ol(g)||(g=ye,"selectionStart"in g&&t_(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Oe&&Vd(Oe,g)||(Oe=g,g=_v(Be,"onSelect"),0<g.length&&(d=new xu("onSelect","select",null,d,f),l.push({event:d,listeners:g}),d.target=ye)))}function sr(l,d){var f={};return f[l.toLowerCase()]=d.toLowerCase(),f["Webkit"+l]="webkit"+d,f["Moz"+l]="moz"+d,f}var li={animationend:sr("Animation","AnimationEnd"),animationiteration:sr("Animation","AnimationIteration"),animationstart:sr("Animation","AnimationStart"),transitionrun:sr("Transition","TransitionRun"),transitionstart:sr("Transition","TransitionStart"),transitioncancel:sr("Transition","TransitionCancel"),transitionend:sr("Transition","TransitionEnd")},Lr={},Pp={};_s&&(Pp=document.createElement("div").style,"AnimationEvent"in window||(delete li.animationend.animation,delete li.animationiteration.animation,delete li.animationstart.animation),"TransitionEvent"in window||delete li.transitionend.transition);function kc(l){if(Lr[l])return Lr[l];if(!li[l])return l;var d=li[l],f;for(f in d)if(d.hasOwnProperty(f)&&f in Pp)return Lr[l]=d[f];return l}var bs=kc("animationend"),Mf=kc("animationiteration"),qE=kc("animationstart"),jd=kc("transitionrun"),Fp=kc("transitionstart"),Bp=kc("transitioncancel"),Dr=kc("transitionend"),$E=new Map,Hp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Hp.push("scrollEnd");function Za(l,d){$E.set(l,d),Ot(d,[l])}var Gp=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},eo=[],qd=0,$d=0;function Ro(){for(var l=qd,d=$d=qd=0;d<l;){var f=eo[d];eo[d++]=null;var g=eo[d];eo[d++]=null;var T=eo[d];eo[d++]=null;var I=eo[d];if(eo[d++]=null,g!==null&&T!==null){var B=g.pending;B===null?T.next=T:(T.next=B.next,B.next=T),g.pending=T}I!==0&&n_(f,T,I)}}function Pc(l,d,f,g){eo[qd++]=l,eo[qd++]=d,eo[qd++]=f,eo[qd++]=g,$d|=g,l.lanes|=g,l=l.alternate,l!==null&&(l.lanes|=g)}function Vp(l,d,f,g){return Pc(l,d,f,g),If(l)}function fl(l,d){return Pc(l,null,null,d),If(l)}function n_(l,d,f){l.lanes|=f;var g=l.alternate;g!==null&&(g.lanes|=f);for(var T=!1,I=l.return;I!==null;)I.childLanes|=f,g=I.alternate,g!==null&&(g.childLanes|=f),I.tag===22&&(l=I.stateNode,l===null||l._visibility&1||(T=!0)),l=I,I=I.return;return l.tag===3?(I=l.stateNode,T&&d!==null&&(T=31-Lt(f),l=I.hiddenUpdates,g=l[T],g===null?l[T]=[d]:g.push(d),d.lane=f|536870912),I):null}function If(l){if(50<dv)throw dv=0,t0=null,Error(r(185));for(var d=l.return;d!==null;)l=d,d=l.return;return l.tag===3?l.stateNode:null}var Kl={};function KE(l,d,f,g){this.tag=l,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ha(l,d,f,g){return new KE(l,d,f,g)}function Yl(l){return l=l.prototype,!(!l||!l.isReactComponent)}function to(l,d){var f=l.alternate;return f===null?(f=ha(l.tag,d,l.key,l.mode),f.elementType=l.elementType,f.type=l.type,f.stateNode=l.stateNode,f.alternate=l,l.alternate=f):(f.pendingProps=d,f.type=l.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=l.flags&65011712,f.childLanes=l.childLanes,f.lanes=l.lanes,f.child=l.child,f.memoizedProps=l.memoizedProps,f.memoizedState=l.memoizedState,f.updateQueue=l.updateQueue,d=l.dependencies,f.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},f.sibling=l.sibling,f.index=l.index,f.ref=l.ref,f.refCleanup=l.refCleanup,f}function YE(l,d){l.flags&=65011714;var f=l.alternate;return f===null?(l.childLanes=0,l.lanes=d,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=f.childLanes,l.lanes=f.lanes,l.child=f.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=f.memoizedProps,l.memoizedState=f.memoizedState,l.updateQueue=f.updateQueue,l.type=f.type,d=f.dependencies,l.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),l}function zp(l,d,f,g,T,I){var B=0;if(g=l,typeof l=="function")Yl(l)&&(B=1);else if(typeof l=="string")B=a2(l,f,Le.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case F:return l=ha(31,f,d,T),l.elementType=F,l.lanes=I,l;case C:return Fc(f.children,T,I,d);case N:B=8,T|=24;break;case S:return l=ha(12,f,d,T|2),l.elementType=S,l.lanes=I,l;case L:return l=ha(13,f,d,T),l.elementType=L,l.lanes=I,l;case P:return l=ha(19,f,d,T),l.elementType=P,l.lanes=I,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case w:B=10;break e;case M:B=9;break e;case U:B=11;break e;case x:B=14;break e;case H:B=16,g=null;break e}B=29,f=Error(r(130,l===null?"null":typeof l,"")),g=null}return d=ha(B,f,d,T),d.elementType=l,d.type=g,d.lanes=I,d}function Fc(l,d,f,g){return l=ha(7,l,g,d),l.lanes=f,l}function Kd(l,d,f){return l=ha(6,l,null,d),l.lanes=f,l}function wf(l){var d=ha(18,null,null,0);return d.stateNode=l,d}function Rf(l,d,f){return d=ha(4,l.children!==null?l.children:[],l.key,d),d.lanes=f,d.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},d}var WE=new WeakMap;function Cs(l,d){if(typeof l=="object"&&l!==null){var f=WE.get(l);return f!==void 0?f:(d={value:l,source:d,stack:ln(d)},WE.set(l,d),d)}return{value:l,source:d,stack:ln(d)}}var Yd=[],Wd=0,yi=null,Hi=0,no=[],ro=0,Wl=null,vl=1,io="";function Ss(l,d){Yd[Wd++]=Hi,Yd[Wd++]=yi,yi=l,Hi=d}function jp(l,d,f){no[ro++]=vl,no[ro++]=io,no[ro++]=Wl,Wl=l;var g=vl;l=io;var T=32-Lt(g)-1;g&=~(1<<T),f+=1;var I=32-Lt(d)+T;if(30<I){var B=T-T%5;I=(g&(1<<B)-1).toString(32),g>>=B,T-=B,vl=1<<32-Lt(d)+T|f<<T|g,io=I+l}else vl=1<<I|f<<T|g,io=l}function ku(l){l.return!==null&&(Ss(l,1),jp(l,1,0))}function Bc(l){for(;l===yi;)yi=Yd[--Wd],Yd[Wd]=null,Hi=Yd[--Wd],Yd[Wd]=null;for(;l===Wl;)Wl=no[--ro],no[ro]=null,io=no[--ro],no[ro]=null,vl=no[--ro],no[ro]=null}function Qd(l,d){no[ro++]=vl,no[ro++]=io,no[ro++]=Wl,vl=d.id,io=d.overflow,Wl=l}var Gi=null,Ur=null,vr=!1,Pu=null,ao=!1,r_=Error(r(519));function Fu(l){var d=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Hu(Cs(d,l)),r_}function Of(l){var d=l.stateNode,f=l.type,g=l.memoizedProps;switch(d[At]=l,d[Tt]=g,f){case"dialog":lr("cancel",d),lr("close",d);break;case"iframe":case"object":case"embed":lr("load",d);break;case"video":case"audio":for(f=0;f<gv.length;f++)lr(gv[f],d);break;case"source":lr("error",d);break;case"img":case"image":case"link":lr("error",d),lr("load",d);break;case"details":lr("toggle",d);break;case"input":lr("invalid",d),Fl(d,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":lr("invalid",d);break;case"textarea":lr("invalid",d),Bl(d,g.value,g.defaultValue,g.children)}f=g.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||d.textContent===""+f||g.suppressHydrationWarning===!0||n1(d.textContent,f)?(g.popover!=null&&(lr("beforetoggle",d),lr("toggle",d)),g.onScroll!=null&&lr("scroll",d),g.onScrollEnd!=null&&lr("scrollend",d),g.onClick!=null&&(d.onclick=xa),d=!0):d=!1,d||Fu(l,!0)}function Xd(l){for(Gi=l.return;Gi;)switch(Gi.tag){case 5:case 31:case 13:ao=!1;return;case 27:case 3:ao=!0;return;default:Gi=Gi.return}}function Hc(l){if(l!==Gi)return!1;if(!vr)return Xd(l),vr=!0,!1;var d=l.tag,f;if((f=d!==3&&d!==27)&&((f=d===5)&&(f=l.type,f=!(f!=="form"&&f!=="button")||nc(l.type,l.memoizedProps)),f=!f),f&&Ur&&Fu(l),Xd(l),d===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));Ur=o1(l)}else if(d===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));Ur=o1(l)}else d===27?(d=Ur,Rn(l.type)?(l=b0,b0=null,Ur=l):Ur=d):Ur=Gi?fo(l.stateNode.nextSibling):null;return!0}function W(){Ur=Gi=null,vr=!1}function Bu(){var l=Pu;return l!==null&&(as===null?as=l:as.push.apply(as,l),Pu=null),l}function Hu(l){Pu===null?Pu=[l]:Pu.push(l)}var Ja=K(null),$n=null,Ql=null;function Gu(l,d,f){me(Ja,d._currentValue),d._currentValue=f}function Xl(l){l._currentValue=Ja.current,ce(Ja)}function Zl(l,d,f){for(;l!==null;){var g=l.alternate;if((l.childLanes&d)!==d?(l.childLanes|=d,g!==null&&(g.childLanes|=d)):g!==null&&(g.childLanes&d)!==d&&(g.childLanes|=d),l===f)break;l=l.return}}function i_(l,d,f,g){var T=l.child;for(T!==null&&(T.return=l);T!==null;){var I=T.dependencies;if(I!==null){var B=T.child;I=I.firstContext;e:for(;I!==null;){var Y=I;I=T;for(var de=0;de<d.length;de++)if(Y.context===d[de]){I.lanes|=f,Y=I.alternate,Y!==null&&(Y.lanes|=f),Zl(I.return,f,l),g||(B=null);break e}I=Y.next}}else if(T.tag===18){if(B=T.return,B===null)throw Error(r(341));B.lanes|=f,I=B.alternate,I!==null&&(I.lanes|=f),Zl(B,f,l),B=null}else B=T.child;if(B!==null)B.return=T;else for(B=T;B!==null;){if(B===l){B=null;break}if(T=B.sibling,T!==null){T.return=B.return,B=T;break}B=B.return}T=B}}function Zd(l,d,f,g){l=null;for(var T=d,I=!1;T!==null;){if(!I){if((T.flags&524288)!==0)I=!0;else if((T.flags&262144)!==0)break}if(T.tag===10){var B=T.alternate;if(B===null)throw Error(r(387));if(B=B.memoizedProps,B!==null){var Y=T.type;hi(T.pendingProps.value,B.value)||(l!==null?l.push(Y):l=[Y])}}else if(T===Ye.current){if(B=T.alternate,B===null)throw Error(r(387));B.memoizedState.memoizedState!==T.memoizedState.memoizedState&&(l!==null?l.push(wh):l=[wh])}T=T.return}l!==null&&i_(d,l,f,g),d.flags|=262144}function qp(l){for(l=l.firstContext;l!==null;){if(!hi(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function Gc(l){$n=l,Ql=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function fa(l){return QE($n,l)}function so(l,d){return $n===null&&Gc(l),QE(l,d)}function QE(l,d){var f=d._currentValue;if(d={context:d,memoizedValue:f,next:null},Ql===null){if(l===null)throw Error(r(308));Ql=d,l.dependencies={lanes:0,firstContext:d},l.flags|=524288}else Ql=Ql.next=d;return f}var NT=typeof AbortController<"u"?AbortController:function(){var l=[],d=this.signal={aborted:!1,addEventListener:function(f,g){l.push(g)}};this.abort=function(){d.aborted=!0,l.forEach(function(f){return f()})}},AT=t.unstable_scheduleCallback,MT=t.unstable_NormalPriority,Vi={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Oo(){return{controller:new NT,data:new Map,refCount:0}}function Df(l){l.refCount--,l.refCount===0&&AT(MT,function(){l.controller.abort()})}var Uf=null,a_=0,Jd=0,eh=null;function Vc(l,d){if(Uf===null){var f=Uf=[];a_=0,Jd=Ds(),eh={status:"pending",value:void 0,then:function(g){f.push(g)}}}return a_++,d.then(XE,XE),d}function XE(){if(--a_===0&&Uf!==null){eh!==null&&(eh.status="fulfilled");var l=Uf;Uf=null,Jd=0,eh=null;for(var d=0;d<l.length;d++)(0,l[d])()}}function IT(l,d){var f=[],g={status:"pending",value:null,reason:null,then:function(T){f.push(T)}};return l.then(function(){g.status="fulfilled",g.value=d;for(var T=0;T<f.length;T++)(0,f[T])(d)},function(T){for(g.status="rejected",g.reason=T,T=0;T<f.length;T++)(0,f[T])(void 0)}),g}var oo=z.S;z.S=function(l,d){Lb=_t(),typeof d=="object"&&d!==null&&typeof d.then=="function"&&Vc(l,d),oo!==null&&oo(l,d)};var zc=K(null);function s_(){var l=zc.current;return l!==null?l:Yr.pooledCache}function $p(l,d){d===null?me(zc,zc.current):me(zc,d.pool)}function ZE(){var l=s_();return l===null?null:{parent:Vi._currentValue,pool:l}}var th=Error(r(460)),Kp=Error(r(474)),xf=Error(r(542)),Yp={then:function(){}};function JE(l){return l=l.status,l==="fulfilled"||l==="rejected"}function Wp(l,d,f){switch(f=l[f],f===void 0?l.push(d):f!==d&&(d.then(xa,xa),d=f),d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,o_(l),l;default:if(typeof d.status=="string")d.then(xa,xa);else{if(l=Yr,l!==null&&100<l.shellSuspendCounter)throw Error(r(482));l=d,l.status="pending",l.then(function(g){if(d.status==="pending"){var T=d;T.status="fulfilled",T.value=g}},function(g){if(d.status==="pending"){var T=d;T.status="rejected",T.reason=g}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,o_(l),l}throw pl=d,th}}function Do(l){try{var d=l._init;return d(l._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(pl=f,th):f}}var pl=null;function eb(){if(pl===null)throw Error(r(459));var l=pl;return pl=null,l}function o_(l){if(l===th||l===xf)throw Error(r(483))}var nh=null,Ts=0;function rh(l){var d=Ts;return Ts+=1,nh===null&&(nh=[]),Wp(nh,l,d)}function Uo(l,d){d=d.props.ref,l.ref=d!==void 0?d:null}function La(l,d){throw d.$$typeof===m?Error(r(525)):(l=Object.prototype.toString.call(d),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":l)))}function tb(l){function d(be,ve){if(l){var Ne=be.deletions;Ne===null?(be.deletions=[ve],be.flags|=16):Ne.push(ve)}}function f(be,ve){if(!l)return null;for(;ve!==null;)d(be,ve),ve=ve.sibling;return null}function g(be){for(var ve=new Map;be!==null;)be.key!==null?ve.set(be.key,be):ve.set(be.index,be),be=be.sibling;return ve}function T(be,ve){return be=to(be,ve),be.index=0,be.sibling=null,be}function I(be,ve,Ne){return be.index=Ne,l?(Ne=be.alternate,Ne!==null?(Ne=Ne.index,Ne<ve?(be.flags|=67108866,ve):Ne):(be.flags|=67108866,ve)):(be.flags|=1048576,ve)}function B(be){return l&&be.alternate===null&&(be.flags|=67108866),be}function Y(be,ve,Ne,je){return ve===null||ve.tag!==6?(ve=Kd(Ne,be.mode,je),ve.return=be,ve):(ve=T(ve,Ne),ve.return=be,ve)}function de(be,ve,Ne,je){var _n=Ne.type;return _n===C?He(be,ve,Ne.props.children,je,Ne.key):ve!==null&&(ve.elementType===_n||typeof _n=="object"&&_n!==null&&_n.$$typeof===H&&Do(_n)===ve.type)?(ve=T(ve,Ne.props),Uo(ve,Ne),ve.return=be,ve):(ve=zp(Ne.type,Ne.key,Ne.props,null,be.mode,je),Uo(ve,Ne),ve.return=be,ve)}function Ae(be,ve,Ne,je){return ve===null||ve.tag!==4||ve.stateNode.containerInfo!==Ne.containerInfo||ve.stateNode.implementation!==Ne.implementation?(ve=Rf(Ne,be.mode,je),ve.return=be,ve):(ve=T(ve,Ne.children||[]),ve.return=be,ve)}function He(be,ve,Ne,je,_n){return ve===null||ve.tag!==7?(ve=Fc(Ne,be.mode,je,_n),ve.return=be,ve):(ve=T(ve,Ne),ve.return=be,ve)}function Ke(be,ve,Ne){if(typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint")return ve=Kd(""+ve,be.mode,Ne),ve.return=be,ve;if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case _:return Ne=zp(ve.type,ve.key,ve.props,null,be.mode,Ne),Uo(Ne,ve),Ne.return=be,Ne;case b:return ve=Rf(ve,be.mode,Ne),ve.return=be,ve;case H:return ve=Do(ve),Ke(be,ve,Ne)}if(ee(ve)||q(ve))return ve=Fc(ve,be.mode,Ne,null),ve.return=be,ve;if(typeof ve.then=="function")return Ke(be,rh(ve),Ne);if(ve.$$typeof===w)return Ke(be,so(be,ve),Ne);La(be,ve)}return null}function Me(be,ve,Ne,je){var _n=ve!==null?ve.key:null;if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number"||typeof Ne=="bigint")return _n!==null?null:Y(be,ve,""+Ne,je);if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case _:return Ne.key===_n?de(be,ve,Ne,je):null;case b:return Ne.key===_n?Ae(be,ve,Ne,je):null;case H:return Ne=Do(Ne),Me(be,ve,Ne,je)}if(ee(Ne)||q(Ne))return _n!==null?null:He(be,ve,Ne,je,null);if(typeof Ne.then=="function")return Me(be,ve,rh(Ne),je);if(Ne.$$typeof===w)return Me(be,ve,so(be,Ne),je);La(be,Ne)}return null}function ke(be,ve,Ne,je,_n){if(typeof je=="string"&&je!==""||typeof je=="number"||typeof je=="bigint")return be=be.get(Ne)||null,Y(ve,be,""+je,_n);if(typeof je=="object"&&je!==null){switch(je.$$typeof){case _:return be=be.get(je.key===null?Ne:je.key)||null,de(ve,be,je,_n);case b:return be=be.get(je.key===null?Ne:je.key)||null,Ae(ve,be,je,_n);case H:return je=Do(je),ke(be,ve,Ne,je,_n)}if(ee(je)||q(je))return be=be.get(Ne)||null,He(ve,be,je,_n,null);if(typeof je.then=="function")return ke(be,ve,Ne,rh(je),_n);if(je.$$typeof===w)return ke(be,ve,Ne,so(ve,je),_n);La(ve,je)}return null}function Wt(be,ve,Ne,je){for(var _n=null,Tr=null,sn=ve,Qn=ve=0,hr=null;sn!==null&&Qn<Ne.length;Qn++){sn.index>Qn?(hr=sn,sn=null):hr=sn.sibling;var Nr=Me(be,sn,Ne[Qn],je);if(Nr===null){sn===null&&(sn=hr);break}l&&sn&&Nr.alternate===null&&d(be,sn),ve=I(Nr,ve,Qn),Tr===null?_n=Nr:Tr.sibling=Nr,Tr=Nr,sn=hr}if(Qn===Ne.length)return f(be,sn),vr&&Ss(be,Qn),_n;if(sn===null){for(;Qn<Ne.length;Qn++)sn=Ke(be,Ne[Qn],je),sn!==null&&(ve=I(sn,ve,Qn),Tr===null?_n=sn:Tr.sibling=sn,Tr=sn);return vr&&Ss(be,Qn),_n}for(sn=g(sn);Qn<Ne.length;Qn++)hr=ke(sn,be,Qn,Ne[Qn],je),hr!==null&&(l&&hr.alternate!==null&&sn.delete(hr.key===null?Qn:hr.key),ve=I(hr,ve,Qn),Tr===null?_n=hr:Tr.sibling=hr,Tr=hr);return l&&sn.forEach(function(lc){return d(be,lc)}),vr&&Ss(be,Qn),_n}function Sn(be,ve,Ne,je){if(Ne==null)throw Error(r(151));for(var _n=null,Tr=null,sn=ve,Qn=ve=0,hr=null,Nr=Ne.next();sn!==null&&!Nr.done;Qn++,Nr=Ne.next()){sn.index>Qn?(hr=sn,sn=null):hr=sn.sibling;var lc=Me(be,sn,Nr.value,je);if(lc===null){sn===null&&(sn=hr);break}l&&sn&&lc.alternate===null&&d(be,sn),ve=I(lc,ve,Qn),Tr===null?_n=lc:Tr.sibling=lc,Tr=lc,sn=hr}if(Nr.done)return f(be,sn),vr&&Ss(be,Qn),_n;if(sn===null){for(;!Nr.done;Qn++,Nr=Ne.next())Nr=Ke(be,Nr.value,je),Nr!==null&&(ve=I(Nr,ve,Qn),Tr===null?_n=Nr:Tr.sibling=Nr,Tr=Nr);return vr&&Ss(be,Qn),_n}for(sn=g(sn);!Nr.done;Qn++,Nr=Ne.next())Nr=ke(sn,be,Qn,Nr.value,je),Nr!==null&&(l&&Nr.alternate!==null&&sn.delete(Nr.key===null?Qn:Nr.key),ve=I(Nr,ve,Qn),Tr===null?_n=Nr:Tr.sibling=Nr,Tr=Nr);return l&&sn.forEach(function(f2){return d(be,f2)}),vr&&Ss(be,Qn),_n}function zr(be,ve,Ne,je){if(typeof Ne=="object"&&Ne!==null&&Ne.type===C&&Ne.key===null&&(Ne=Ne.props.children),typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case _:e:{for(var _n=Ne.key;ve!==null;){if(ve.key===_n){if(_n=Ne.type,_n===C){if(ve.tag===7){f(be,ve.sibling),je=T(ve,Ne.props.children),je.return=be,be=je;break e}}else if(ve.elementType===_n||typeof _n=="object"&&_n!==null&&_n.$$typeof===H&&Do(_n)===ve.type){f(be,ve.sibling),je=T(ve,Ne.props),Uo(je,Ne),je.return=be,be=je;break e}f(be,ve);break}else d(be,ve);ve=ve.sibling}Ne.type===C?(je=Fc(Ne.props.children,be.mode,je,Ne.key),je.return=be,be=je):(je=zp(Ne.type,Ne.key,Ne.props,null,be.mode,je),Uo(je,Ne),je.return=be,be=je)}return B(be);case b:e:{for(_n=Ne.key;ve!==null;){if(ve.key===_n)if(ve.tag===4&&ve.stateNode.containerInfo===Ne.containerInfo&&ve.stateNode.implementation===Ne.implementation){f(be,ve.sibling),je=T(ve,Ne.children||[]),je.return=be,be=je;break e}else{f(be,ve);break}else d(be,ve);ve=ve.sibling}je=Rf(Ne,be.mode,je),je.return=be,be=je}return B(be);case H:return Ne=Do(Ne),zr(be,ve,Ne,je)}if(ee(Ne))return Wt(be,ve,Ne,je);if(q(Ne)){if(_n=q(Ne),typeof _n!="function")throw Error(r(150));return Ne=_n.call(Ne),Sn(be,ve,Ne,je)}if(typeof Ne.then=="function")return zr(be,ve,rh(Ne),je);if(Ne.$$typeof===w)return zr(be,ve,so(be,Ne),je);La(be,Ne)}return typeof Ne=="string"&&Ne!==""||typeof Ne=="number"||typeof Ne=="bigint"?(Ne=""+Ne,ve!==null&&ve.tag===6?(f(be,ve.sibling),je=T(ve,Ne),je.return=be,be=je):(f(be,ve),je=Kd(Ne,be.mode,je),je.return=be,be=je),B(be)):f(be,ve)}return function(be,ve,Ne,je){try{Ts=0;var _n=zr(be,ve,Ne,je);return nh=null,_n}catch(sn){if(sn===th||sn===xf)throw sn;var Tr=ha(29,sn,null,be.mode);return Tr.lanes=je,Tr.return=be,Tr}finally{}}}var Vu=tb(!0),l_=tb(!1),lo=!1;function ml(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qp(l,d){l=l.updateQueue,d.updateQueue===l&&(d.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function zu(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function xo(l,d,f){var g=l.updateQueue;if(g===null)return null;if(g=g.shared,(wr&2)!==0){var T=g.pending;return T===null?d.next=d:(d.next=T.next,T.next=d),g.pending=d,d=If(l),n_(l,null,f),d}return Pc(l,g,d,f),If(l)}function Lf(l,d,f){if(d=d.updateQueue,d!==null&&(d=d.shared,(f&4194048)!==0)){var g=d.lanes;g&=l.pendingLanes,f|=g,d.lanes=f,ar(l,f)}}function Xp(l,d){var f=l.updateQueue,g=l.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var T=null,I=null;if(f=f.firstBaseUpdate,f!==null){do{var B={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};I===null?T=I=B:I=I.next=B,f=f.next}while(f!==null);I===null?T=I=d:I=I.next=d}else T=I=d;f={baseState:g.baseState,firstBaseUpdate:T,lastBaseUpdate:I,shared:g.shared,callbacks:g.callbacks},l.updateQueue=f;return}l=f.lastBaseUpdate,l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=d}var Qi=!1;function jc(){if(Qi){var l=eh;if(l!==null)throw l}}function ih(l,d,f,g){Qi=!1;var T=l.updateQueue;lo=!1;var I=T.firstBaseUpdate,B=T.lastBaseUpdate,Y=T.shared.pending;if(Y!==null){T.shared.pending=null;var de=Y,Ae=de.next;de.next=null,B===null?I=Ae:B.next=Ae,B=de;var He=l.alternate;He!==null&&(He=He.updateQueue,Y=He.lastBaseUpdate,Y!==B&&(Y===null?He.firstBaseUpdate=Ae:Y.next=Ae,He.lastBaseUpdate=de))}if(I!==null){var Ke=T.baseState;B=0,He=Ae=de=null,Y=I;do{var Me=Y.lane&-536870913,ke=Me!==Y.lane;if(ke?(dr&Me)===Me:(g&Me)===Me){Me!==0&&Me===Jd&&(Qi=!0),He!==null&&(He=He.next={lane:0,tag:Y.tag,payload:Y.payload,callback:null,next:null});e:{var Wt=l,Sn=Y;Me=d;var zr=f;switch(Sn.tag){case 1:if(Wt=Sn.payload,typeof Wt=="function"){Ke=Wt.call(zr,Ke,Me);break e}Ke=Wt;break e;case 3:Wt.flags=Wt.flags&-65537|128;case 0:if(Wt=Sn.payload,Me=typeof Wt=="function"?Wt.call(zr,Ke,Me):Wt,Me==null)break e;Ke=p({},Ke,Me);break e;case 2:lo=!0}}Me=Y.callback,Me!==null&&(l.flags|=64,ke&&(l.flags|=8192),ke=T.callbacks,ke===null?T.callbacks=[Me]:ke.push(Me))}else ke={lane:Me,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null},He===null?(Ae=He=ke,de=Ke):He=He.next=ke,B|=Me;if(Y=Y.next,Y===null){if(Y=T.shared.pending,Y===null)break;ke=Y,Y=ke.next,ke.next=null,T.lastBaseUpdate=ke,T.shared.pending=null}}while(!0);He===null&&(de=Ke),T.baseState=de,T.firstBaseUpdate=Ae,T.lastBaseUpdate=He,I===null&&(T.shared.lanes=0),Xu|=B,l.lanes=B,l.memoizedState=Ke}}function Lo(l,d){if(typeof l!="function")throw Error(r(191,l));l.call(d)}function Zp(l,d){var f=l.callbacks;if(f!==null)for(l.callbacks=null,l=0;l<f.length;l++)Lo(f[l],d)}var Jl=K(null),gl=K(0);function u_(l,d){l=Go,me(gl,l),me(Jl,d),Go=l|d.baseLanes}function va(){me(gl,Go),me(Jl,Jl.current)}function kf(){Go=gl.current,ce(Jl),ce(gl)}var Ns=K(null),uo=null;function ju(l){var d=l.alternate;me(Ui,Ui.current&1),me(Ns,l),uo===null&&(d===null||Jl.current!==null||d.memoizedState!==null)&&(uo=l)}function Pf(l){me(Ui,Ui.current),me(Ns,l),uo===null&&(uo=l)}function nb(l){l.tag===22?(me(Ui,Ui.current),me(Ns,l),uo===null&&(uo=l)):co()}function co(){me(Ui,Ui.current),me(Ns,Ns.current)}function es(l){ce(Ns),uo===l&&(uo=null),ce(Ui)}var Ui=K(0);function Jp(l){for(var d=l;d!==null;){if(d.tag===13){var f=d.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||km(f)||Sh(f)))return d}else if(d.tag===19&&(d.memoizedProps.revealOrder==="forwards"||d.memoizedProps.revealOrder==="backwards"||d.memoizedProps.revealOrder==="unstable_legacy-backwards"||d.memoizedProps.revealOrder==="together")){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var As=0,Kn=null,Gr=null,Ei=null,Ff=!1,ah=!1,qc=!1,em=0,sh=0,qu=null,wT=0;function ui(){throw Error(r(321))}function tm(l,d){if(d===null)return!1;for(var f=0;f<d.length&&f<l.length;f++)if(!hi(l[f],d[f]))return!1;return!0}function nm(l,d,f,g,T,I){return As=I,Kn=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,z.H=l===null||l.memoizedState===null?fb:dm,qc=!1,I=f(g,T),qc=!1,ah&&(I=Bf(d,f,g,T)),c_(l),I}function c_(l){z.H=Ku;var d=Gr!==null&&Gr.next!==null;if(As=0,Ei=Gr=Kn=null,Ff=!1,sh=0,qu=null,d)throw Error(r(300));l===null||fi||(l=l.dependencies,l!==null&&qp(l)&&(fi=!0))}function Bf(l,d,f,g){Kn=l;var T=0;do{if(ah&&(qu=null),sh=0,ah=!1,25<=T)throw Error(r(301));if(T+=1,Ei=Gr=null,l.updateQueue!=null){var I=l.updateQueue;I.lastEffect=null,I.events=null,I.stores=null,I.memoCache!=null&&(I.memoCache.index=0)}z.H=Kf,I=d(f,g)}while(ah);return I}function RT(){var l=z.H,d=l.useState()[0];return d=typeof d.then=="function"?lh(d):d,l=l.useState()[0],(Gr!==null?Gr.memoizedState:null)!==l&&(Kn.flags|=1024),d}function rm(){var l=em!==0;return em=0,l}function im(l,d,f){d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~f}function d_(l){if(Ff){for(l=l.memoizedState;l!==null;){var d=l.queue;d!==null&&(d.pending=null),l=l.next}Ff=!1}As=0,Ei=Gr=Kn=null,ah=!1,sh=em=0,qu=null}function Ca(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ei===null?Kn.memoizedState=Ei=l:Ei=Ei.next=l,Ei}function xi(){if(Gr===null){var l=Kn.alternate;l=l!==null?l.memoizedState:null}else l=Gr.next;var d=Ei===null?Kn.memoizedState:Ei.next;if(d!==null)Ei=d,Gr=l;else{if(l===null)throw Kn.alternate===null?Error(r(467)):Error(r(310));Gr=l,l={memoizedState:Gr.memoizedState,baseState:Gr.baseState,baseQueue:Gr.baseQueue,queue:Gr.queue,next:null},Ei===null?Kn.memoizedState=Ei=l:Ei=Ei.next=l}return Ei}function oh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function lh(l){var d=sh;return sh+=1,qu===null&&(qu=[]),l=Wp(qu,l,d),d=Kn,(Ei===null?d.memoizedState:Ei.next)===null&&(d=d.alternate,z.H=d===null||d.memoizedState===null?fb:dm),l}function uh(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return lh(l);if(l.$$typeof===w)return fa(l)}throw Error(r(438,String(l)))}function h_(l){var d=null,f=Kn.updateQueue;if(f!==null&&(d=f.memoCache),d==null){var g=Kn.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(d={data:g.data.map(function(T){return T.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),f===null&&(f=oh(),Kn.updateQueue=f),f.memoCache=d,f=d.data[d.index],f===void 0)for(f=d.data[d.index]=Array(l),g=0;g<l;g++)f[g]=Q;return d.index++,f}function ko(l,d){return typeof d=="function"?d(l):d}function Yn(l){var d=xi();return f_(d,Gr,l)}function f_(l,d,f){var g=l.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=f;var T=l.baseQueue,I=g.pending;if(I!==null){if(T!==null){var B=T.next;T.next=I.next,I.next=B}d.baseQueue=T=I,g.pending=null}if(I=l.baseState,T===null)l.memoizedState=I;else{d=T.next;var Y=B=null,de=null,Ae=d,He=!1;do{var Ke=Ae.lane&-536870913;if(Ke!==Ae.lane?(dr&Ke)===Ke:(As&Ke)===Ke){var Me=Ae.revertLane;if(Me===0)de!==null&&(de=de.next={lane:0,revertLane:0,gesture:null,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null}),Ke===Jd&&(He=!0);else if((As&Me)===Me){Ae=Ae.next,Me===Jd&&(He=!0);continue}else Ke={lane:0,revertLane:Ae.revertLane,gesture:null,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null},de===null?(Y=de=Ke,B=I):de=de.next=Ke,Kn.lanes|=Me,Xu|=Me;Ke=Ae.action,qc&&f(I,Ke),I=Ae.hasEagerState?Ae.eagerState:f(I,Ke)}else Me={lane:Ke,revertLane:Ae.revertLane,gesture:Ae.gesture,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null},de===null?(Y=de=Me,B=I):de=de.next=Me,Kn.lanes|=Ke,Xu|=Ke;Ae=Ae.next}while(Ae!==null&&Ae!==d);if(de===null?B=I:de.next=Y,!hi(I,l.memoizedState)&&(fi=!0,He&&(f=eh,f!==null)))throw f;l.memoizedState=I,l.baseState=B,l.baseQueue=de,g.lastRenderedState=I}return T===null&&(g.lanes=0),[l.memoizedState,g.dispatch]}function v_(l){var d=xi(),f=d.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=l;var g=f.dispatch,T=f.pending,I=d.memoizedState;if(T!==null){f.pending=null;var B=T=T.next;do I=l(I,B.action),B=B.next;while(B!==T);hi(I,d.memoizedState)||(fi=!0),d.memoizedState=I,d.baseQueue===null&&(d.baseState=I),f.lastRenderedState=I}return[I,g]}function ch(l,d,f){var g=Kn,T=xi(),I=vr;if(I){if(f===void 0)throw Error(r(407));f=f()}else f=d();var B=!hi((Gr||T).memoizedState,f);if(B&&(T.memoizedState=f,fi=!0),T=T.queue,zf(ib.bind(null,g,T,l),[l]),T.getSnapshot!==d||B||Ei!==null&&Ei.memoizedState.tag&1){if(g.flags|=2048,Is(9,{destroy:void 0},rb.bind(null,g,T,f,d),null),Yr===null)throw Error(r(349));I||(As&127)!==0||p_(g,d,f)}return f}function p_(l,d,f){l.flags|=16384,l={getSnapshot:d,value:f},d=Kn.updateQueue,d===null?(d=oh(),Kn.updateQueue=d,d.stores=[l]):(f=d.stores,f===null?d.stores=[l]:f.push(l))}function rb(l,d,f,g){d.value=f,d.getSnapshot=g,Ms(d)&&ab(l)}function ib(l,d,f){return f(function(){Ms(d)&&ab(l)})}function Ms(l){var d=l.getSnapshot;l=l.value;try{var f=d();return!hi(l,f)}catch{return!0}}function ab(l){var d=fl(l,2);d!==null&&ss(d,l,2)}function dh(l){var d=Ca();if(typeof l=="function"){var f=l;if(l=f(),qc){xt(!0);try{f()}finally{xt(!1)}}}return d.memoizedState=d.baseState=l,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ko,lastRenderedState:l},d}function am(l,d,f,g){return l.baseState=f,f_(l,Gr,typeof g=="function"?g:ko)}function sb(l,d,f,g,T){if(qf(l))throw Error(r(485));if(l=d.action,l!==null){var I={payload:T,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(B){I.listeners.push(B)}};z.T!==null?f(!0):I.isTransition=!1,g(I),f=d.pending,f===null?(I.next=d.pending=I,m_(d,I)):(I.next=f.next,d.pending=f.next=I)}}function m_(l,d){var f=d.action,g=d.payload,T=l.state;if(d.isTransition){var I=z.T,B={};z.T=B;try{var Y=f(T,g),de=z.S;de!==null&&de(B,Y),ts(l,d,Y)}catch(Ae){Hf(l,d,Ae)}finally{I!==null&&B.types!==null&&(I.types=B.types),z.T=I}}else try{I=f(T,g),ts(l,d,I)}catch(Ae){Hf(l,d,Ae)}}function ts(l,d,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(g){eu(l,d,g)},function(g){return Hf(l,d,g)}):eu(l,d,f)}function eu(l,d,f){d.status="fulfilled",d.value=f,g_(d),l.state=f,d=l.pending,d!==null&&(f=d.next,f===d?l.pending=null:(f=f.next,d.next=f,m_(l,f)))}function Hf(l,d,f){var g=l.pending;if(l.pending=null,g!==null){g=g.next;do d.status="rejected",d.reason=f,g_(d),d=d.next;while(d!==g)}l.action=null}function g_(l){l=l.listeners;for(var d=0;d<l.length;d++)(0,l[d])()}function Gf(l,d){return d}function __(l,d){if(vr){var f=Yr.formState;if(f!==null){e:{var g=Kn;if(vr){if(Ur){t:{for(var T=Ur,I=ao;T.nodeType!==8;){if(!I){T=null;break t}if(T=fo(T.nextSibling),T===null){T=null;break t}}I=T.data,T=I==="F!"||I==="F"?T:null}if(T){Ur=fo(T.nextSibling),g=T.data==="F!";break e}}Fu(g)}g=!1}g&&(d=f[0])}}return f=Ca(),f.memoizedState=f.baseState=d,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gf,lastRenderedState:d},f.queue=g,f=w_.bind(null,Kn,g),g.dispatch=f,g=dh(!1),I=fh.bind(null,Kn,!1,g.queue),g=Ca(),T={state:d,dispatch:null,action:l,pending:null},g.queue=T,f=sb.bind(null,Kn,T,I,f),T.dispatch=f,g.memoizedState=l,[d,f,!1]}function sm(l){var d=xi();return y_(d,Gr,l)}function y_(l,d,f){if(d=f_(l,d,Gf)[0],l=Yn(ko)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var g=lh(d)}catch(B){throw B===th?xf:B}else g=d;d=xi();var T=d.queue,I=T.dispatch;return f!==d.memoizedState&&(Kn.flags|=2048,Is(9,{destroy:void 0},E_.bind(null,T,f),null)),[g,I,l]}function E_(l,d){l.action=d}function om(l){var d=xi(),f=Gr;if(f!==null)return y_(d,f,l);xi(),d=d.memoizedState,f=xi();var g=f.queue.dispatch;return f.memoizedState=l,[d,g,!1]}function Is(l,d,f,g){return l={tag:l,create:f,deps:g,inst:d,next:null},d=Kn.updateQueue,d===null&&(d=oh(),Kn.updateQueue=d),f=d.lastEffect,f===null?d.lastEffect=l.next=l:(g=f.next,f.next=l,l.next=g,d.lastEffect=l),l}function ob(){return xi().memoizedState}function Po(l,d,f,g){var T=Ca();Kn.flags|=l,T.memoizedState=Is(1|d,{destroy:void 0},f,g===void 0?null:g)}function Vf(l,d,f,g){var T=xi();g=g===void 0?null:g;var I=T.memoizedState.inst;Gr!==null&&g!==null&&tm(g,Gr.memoizedState.deps)?T.memoizedState=Is(d,I,f,g):(Kn.flags|=l,T.memoizedState=Is(1|d,I,f,g))}function b_(l,d){Po(8390656,8,l,d)}function zf(l,d){Vf(2048,8,l,d)}function OT(l){Kn.flags|=4;var d=Kn.updateQueue;if(d===null)d=oh(),Kn.updateQueue=d,d.events=[l];else{var f=d.events;f===null?d.events=[l]:f.push(l)}}function lb(l){var d=xi().memoizedState;return OT({ref:d,nextImpl:l}),function(){if((wr&2)!==0)throw Error(r(440));return d.impl.apply(void 0,arguments)}}function ub(l,d){return Vf(4,2,l,d)}function C_(l,d){return Vf(4,4,l,d)}function S_(l,d){if(typeof d=="function"){l=l();var f=d(l);return function(){typeof f=="function"?f():d(null)}}if(d!=null)return l=l(),d.current=l,function(){d.current=null}}function cb(l,d,f){f=f!=null?f.concat([l]):null,Vf(4,4,S_.bind(null,d,l),f)}function lm(){}function T_(l,d){var f=xi();d=d===void 0?null:d;var g=f.memoizedState;return d!==null&&tm(d,g[1])?g[0]:(f.memoizedState=[l,d],l)}function ka(l,d){var f=xi();d=d===void 0?null:d;var g=f.memoizedState;if(d!==null&&tm(d,g[1]))return g[0];if(g=l(),qc){xt(!0);try{l()}finally{xt(!1)}}return f.memoizedState=[g,d],g}function ho(l,d,f){return f===void 0||(As&1073741824)!==0&&(dr&261930)===0?l.memoizedState=d:(l.memoizedState=f,l=Pb(),Kn.lanes|=l,Xu|=l,f)}function db(l,d,f,g){return hi(f,d)?f:Jl.current!==null?(l=ho(l,f,g),hi(l,d)||(fi=!0),l):(As&42)===0||(As&1073741824)!==0&&(dr&261930)===0?(fi=!0,l.memoizedState=f):(l=Pb(),Kn.lanes|=l,Xu|=l,d)}function hb(l,d,f,g,T){var I=ie.p;ie.p=I!==0&&8>I?I:8;var B=z.T,Y={};z.T=Y,fh(l,!1,d,f);try{var de=T(),Ae=z.S;if(Ae!==null&&Ae(Y,de),de!==null&&typeof de=="object"&&typeof de.then=="function"){var He=IT(de,g);hh(l,d,He,Os(l))}else hh(l,d,g,Os(l))}catch(Ke){hh(l,d,{then:function(){},status:"rejected",reason:Ke},Os())}finally{ie.p=I,B!==null&&Y.types!==null&&(B.types=Y.types),z.T=B}}function um(){}function $u(l,d,f,g){if(l.tag!==5)throw Error(r(476));var T=N_(l).queue;hb(l,T,d,se,f===null?um:function(){return A_(l),f(g)})}function N_(l){var d=l.memoizedState;if(d!==null)return d;d={memoizedState:se,baseState:se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ko,lastRenderedState:se},next:null};var f={};return d.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ko,lastRenderedState:f},next:null},l.memoizedState=d,l=l.alternate,l!==null&&(l.memoizedState=d),d}function A_(l){var d=N_(l);d.next===null&&(d=l.alternate.memoizedState),hh(l,d.next.queue,{},Os())}function M_(){return fa(wh)}function I_(){return xi().memoizedState}function $c(){return xi().memoizedState}function jf(l){for(var d=l.return;d!==null;){switch(d.tag){case 24:case 3:var f=Os();l=zu(f);var g=xo(d,l,f);g!==null&&(ss(g,d,f),Lf(g,d,f)),d={cache:Oo()},l.payload=d;return}d=d.return}}function DT(l,d,f){var g=Os();f={lane:g,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},qf(l)?$f(d,f):(f=Vp(l,d,f,g),f!==null&&(ss(f,l,g),cm(f,d,g)))}function w_(l,d,f){var g=Os();hh(l,d,f,g)}function hh(l,d,f,g){var T={lane:g,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(qf(l))$f(d,T);else{var I=l.alternate;if(l.lanes===0&&(I===null||I.lanes===0)&&(I=d.lastRenderedReducer,I!==null))try{var B=d.lastRenderedState,Y=I(B,f);if(T.hasEagerState=!0,T.eagerState=Y,hi(Y,B))return Pc(l,d,T,0),Yr===null&&Ro(),!1}catch{}finally{}if(f=Vp(l,d,T,g),f!==null)return ss(f,l,g),cm(f,d,g),!0}return!1}function fh(l,d,f,g){if(g={lane:2,revertLane:Ds(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},qf(l)){if(d)throw Error(r(479))}else d=Vp(l,f,g,2),d!==null&&ss(d,l,2)}function qf(l){var d=l.alternate;return l===Kn||d!==null&&d===Kn}function $f(l,d){ah=Ff=!0;var f=l.pending;f===null?d.next=d:(d.next=f.next,f.next=d),l.pending=d}function cm(l,d,f){if((f&4194048)!==0){var g=d.lanes;g&=l.pendingLanes,f|=g,d.lanes=f,ar(l,f)}}var Ku={readContext:fa,use:uh,useCallback:ui,useContext:ui,useEffect:ui,useImperativeHandle:ui,useLayoutEffect:ui,useInsertionEffect:ui,useMemo:ui,useReducer:ui,useRef:ui,useState:ui,useDebugValue:ui,useDeferredValue:ui,useTransition:ui,useSyncExternalStore:ui,useId:ui,useHostTransitionStatus:ui,useFormState:ui,useActionState:ui,useOptimistic:ui,useMemoCache:ui,useCacheRefresh:ui};Ku.useEffectEvent=ui;var fb={readContext:fa,use:uh,useCallback:function(l,d){return Ca().memoizedState=[l,d===void 0?null:d],l},useContext:fa,useEffect:b_,useImperativeHandle:function(l,d,f){f=f!=null?f.concat([l]):null,Po(4194308,4,S_.bind(null,d,l),f)},useLayoutEffect:function(l,d){return Po(4194308,4,l,d)},useInsertionEffect:function(l,d){Po(4,2,l,d)},useMemo:function(l,d){var f=Ca();d=d===void 0?null:d;var g=l();if(qc){xt(!0);try{l()}finally{xt(!1)}}return f.memoizedState=[g,d],g},useReducer:function(l,d,f){var g=Ca();if(f!==void 0){var T=f(d);if(qc){xt(!0);try{f(d)}finally{xt(!1)}}}else T=d;return g.memoizedState=g.baseState=T,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:T},g.queue=l,l=l.dispatch=DT.bind(null,Kn,l),[g.memoizedState,l]},useRef:function(l){var d=Ca();return l={current:l},d.memoizedState=l},useState:function(l){l=dh(l);var d=l.queue,f=w_.bind(null,Kn,d);return d.dispatch=f,[l.memoizedState,f]},useDebugValue:lm,useDeferredValue:function(l,d){var f=Ca();return ho(f,l,d)},useTransition:function(){var l=dh(!1);return l=hb.bind(null,Kn,l.queue,!0,!1),Ca().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,d,f){var g=Kn,T=Ca();if(vr){if(f===void 0)throw Error(r(407));f=f()}else{if(f=d(),Yr===null)throw Error(r(349));(dr&127)!==0||p_(g,d,f)}T.memoizedState=f;var I={value:f,getSnapshot:d};return T.queue=I,b_(ib.bind(null,g,I,l),[l]),g.flags|=2048,Is(9,{destroy:void 0},rb.bind(null,g,I,f,d),null),f},useId:function(){var l=Ca(),d=Yr.identifierPrefix;if(vr){var f=io,g=vl;f=(g&~(1<<32-Lt(g)-1)).toString(32)+f,d="_"+d+"R_"+f,f=em++,0<f&&(d+="H"+f.toString(32)),d+="_"}else f=wT++,d="_"+d+"r_"+f.toString(32)+"_";return l.memoizedState=d},useHostTransitionStatus:M_,useFormState:__,useActionState:__,useOptimistic:function(l){var d=Ca();d.memoizedState=d.baseState=l;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=f,d=fh.bind(null,Kn,!0,f),f.dispatch=d,[l,d]},useMemoCache:h_,useCacheRefresh:function(){return Ca().memoizedState=jf.bind(null,Kn)},useEffectEvent:function(l){var d=Ca(),f={impl:l};return d.memoizedState=f,function(){if((wr&2)!==0)throw Error(r(440));return f.impl.apply(void 0,arguments)}}},dm={readContext:fa,use:uh,useCallback:T_,useContext:fa,useEffect:zf,useImperativeHandle:cb,useInsertionEffect:ub,useLayoutEffect:C_,useMemo:ka,useReducer:Yn,useRef:ob,useState:function(){return Yn(ko)},useDebugValue:lm,useDeferredValue:function(l,d){var f=xi();return db(f,Gr.memoizedState,l,d)},useTransition:function(){var l=Yn(ko)[0],d=xi().memoizedState;return[typeof l=="boolean"?l:lh(l),d]},useSyncExternalStore:ch,useId:I_,useHostTransitionStatus:M_,useFormState:sm,useActionState:sm,useOptimistic:function(l,d){var f=xi();return am(f,Gr,l,d)},useMemoCache:h_,useCacheRefresh:$c};dm.useEffectEvent=lb;var Kf={readContext:fa,use:uh,useCallback:T_,useContext:fa,useEffect:zf,useImperativeHandle:cb,useInsertionEffect:ub,useLayoutEffect:C_,useMemo:ka,useReducer:v_,useRef:ob,useState:function(){return v_(ko)},useDebugValue:lm,useDeferredValue:function(l,d){var f=xi();return Gr===null?ho(f,l,d):db(f,Gr.memoizedState,l,d)},useTransition:function(){var l=v_(ko)[0],d=xi().memoizedState;return[typeof l=="boolean"?l:lh(l),d]},useSyncExternalStore:ch,useId:I_,useHostTransitionStatus:M_,useFormState:om,useActionState:om,useOptimistic:function(l,d){var f=xi();return Gr!==null?am(f,Gr,l,d):(f.baseState=l,[l,f.queue.dispatch])},useMemoCache:h_,useCacheRefresh:$c};Kf.useEffectEvent=lb;function hm(l,d,f,g){d=l.memoizedState,f=f(g,d),f=f==null?d:p({},d,f),l.memoizedState=f,l.lanes===0&&(l.updateQueue.baseState=f)}var Yf={enqueueSetState:function(l,d,f){l=l._reactInternals;var g=Os(),T=zu(g);T.payload=d,f!=null&&(T.callback=f),d=xo(l,T,g),d!==null&&(ss(d,l,g),Lf(d,l,g))},enqueueReplaceState:function(l,d,f){l=l._reactInternals;var g=Os(),T=zu(g);T.tag=1,T.payload=d,f!=null&&(T.callback=f),d=xo(l,T,g),d!==null&&(ss(d,l,g),Lf(d,l,g))},enqueueForceUpdate:function(l,d){l=l._reactInternals;var f=Os(),g=zu(f);g.tag=2,d!=null&&(g.callback=d),d=xo(l,g,f),d!==null&&(ss(d,l,f),Lf(d,l,f))}};function vb(l,d,f,g,T,I,B){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(g,I,B):d.prototype&&d.prototype.isPureReactComponent?!Vd(f,g)||!Vd(T,I):!0}function R_(l,d,f,g){l=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(f,g),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(f,g),d.state!==l&&Yf.enqueueReplaceState(d,d.state,null)}function Pa(l,d){var f=d;if("ref"in d){f={};for(var g in d)g!=="ref"&&(f[g]=d[g])}if(l=l.defaultProps){f===d&&(f=p({},f));for(var T in l)f[T]===void 0&&(f[T]=l[T])}return f}function O_(l){Gp(l)}function D_(l){console.error(l)}function pb(l){Gp(l)}function Wf(l,d){try{var f=l.onUncaughtError;f(d.value,{componentStack:d.stack})}catch(g){setTimeout(function(){throw g})}}function mb(l,d,f){try{var g=l.onCaughtError;g(f.value,{componentStack:f.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(T){setTimeout(function(){throw T})}}function U_(l,d,f){return f=zu(f),f.tag=3,f.payload={element:null},f.callback=function(){Wf(l,d)},f}function _l(l){return l=zu(l),l.tag=3,l}function fm(l,d,f,g){var T=f.type.getDerivedStateFromError;if(typeof T=="function"){var I=g.value;l.payload=function(){return T(I)},l.callback=function(){mb(d,f,g)}}var B=f.stateNode;B!==null&&typeof B.componentDidCatch=="function"&&(l.callback=function(){mb(d,f,g),typeof T!="function"&&(Zu===null?Zu=new Set([this]):Zu.add(this));var Y=g.stack;this.componentDidCatch(g.value,{componentStack:Y!==null?Y:""})})}function x_(l,d,f,g,T){if(f.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(d=f.alternate,d!==null&&Zd(d,f,T,!0),f=Ns.current,f!==null){switch(f.tag){case 31:case 13:return uo===null?Mm():f.alternate===null&&vi===0&&(vi=3),f.flags&=-257,f.flags|=65536,f.lanes=T,g===Yp?f.flags|=16384:(d=f.updateQueue,d===null?f.updateQueue=new Set([g]):d.add(g),u0(l,g,T)),!1;case 22:return f.flags|=65536,g===Yp?f.flags|=16384:(d=f.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([g])},f.updateQueue=d):(f=d.retryQueue,f===null?d.retryQueue=new Set([g]):f.add(g)),u0(l,g,T)),!1}throw Error(r(435,f.tag))}return u0(l,g,T),Mm(),!1}if(vr)return d=Ns.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=T,g!==r_&&(l=Error(r(422),{cause:g}),Hu(Cs(l,f)))):(g!==r_&&(d=Error(r(423),{cause:g}),Hu(Cs(d,f))),l=l.current.alternate,l.flags|=65536,T&=-T,l.lanes|=T,g=Cs(g,f),T=U_(l.stateNode,g,T),Xp(l,T),vi!==4&&(vi=2)),!1;var I=Error(r(520),{cause:g});if(I=Cs(I,f),uv===null?uv=[I]:uv.push(I),vi!==4&&(vi=2),d===null)return!0;g=Cs(g,f),f=d;do{switch(f.tag){case 3:return f.flags|=65536,l=T&-T,f.lanes|=l,l=U_(f.stateNode,g,l),Xp(f,l),!1;case 1:if(d=f.type,I=f.stateNode,(f.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Zu===null||!Zu.has(I))))return f.flags|=65536,T&=-T,f.lanes|=T,T=_l(T),fm(T,l,f,g),Xp(f,T),!1}f=f.return}while(f!==null);return!1}var Qf=Error(r(461)),fi=!1;function bi(l,d,f,g){d.child=l===null?l_(d,null,f,g):Vu(d,l.child,f,g)}function bn(l,d,f,g,T){f=f.render;var I=d.ref;if("ref"in g){var B={};for(var Y in g)Y!=="ref"&&(B[Y]=g[Y])}else B=g;return Gc(d),g=nm(l,d,f,B,I,T),Y=rm(),l!==null&&!fi?(im(l,d,T),yl(l,d,T)):(vr&&Y&&ku(d),d.flags|=1,bi(l,d,g,T),d.child)}function Xf(l,d,f,g,T){if(l===null){var I=f.type;return typeof I=="function"&&!Yl(I)&&I.defaultProps===void 0&&f.compare===null?(d.tag=15,d.type=I,vm(l,d,I,g,T)):(l=zp(f.type,null,g,d,d.mode,T),l.ref=d.ref,l.return=d,d.child=l)}if(I=l.child,!ym(l,T)){var B=I.memoizedProps;if(f=f.compare,f=f!==null?f:Vd,f(B,g)&&l.ref===d.ref)return yl(l,d,T)}return d.flags|=1,l=to(I,g),l.ref=d.ref,l.return=d,d.child=l}function vm(l,d,f,g,T){if(l!==null){var I=l.memoizedProps;if(Vd(I,g)&&l.ref===d.ref)if(fi=!1,d.pendingProps=g=I,ym(l,T))(l.flags&131072)!==0&&(fi=!0);else return d.lanes=l.lanes,yl(l,d,T)}return gm(l,d,f,g,T)}function Yu(l,d,f,g){var T=g.children,I=l!==null?l.memoizedState:null;if(l===null&&d.stateNode===null&&(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((d.flags&128)!==0){if(I=I!==null?I.baseLanes|f:f,l!==null){for(g=d.child=l.child,T=0;g!==null;)T=T|g.lanes|g.childLanes,g=g.sibling;g=T&~I}else g=0,d.child=null;return pm(l,d,I,f,g)}if((f&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},l!==null&&$p(d,I!==null?I.cachePool:null),I!==null?u_(d,I):va(),nb(d);else return g=d.lanes=536870912,pm(l,d,I!==null?I.baseLanes|f:f,f,g)}else I!==null?($p(d,I.cachePool),u_(d,I),co(),d.memoizedState=null):(l!==null&&$p(d,null),va(),co());return bi(l,d,T,f),d.child}function Zf(l,d){return l!==null&&l.tag===22||d.stateNode!==null||(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.sibling}function pm(l,d,f,g,T){var I=s_();return I=I===null?null:{parent:Vi._currentValue,pool:I},d.memoizedState={baseLanes:f,cachePool:I},l!==null&&$p(d,null),va(),nb(d),l!==null&&Zd(l,d,g,!0),d.childLanes=T,null}function Jf(l,d){return d=_m({mode:d.mode,children:d.children},l.mode),d.ref=l.ref,l.child=d,d.return=l,d}function pa(l,d,f){return Vu(d,l.child,null,f),l=Jf(d,d.pendingProps),l.flags|=2,es(d),d.memoizedState=null,l}function UT(l,d,f){var g=d.pendingProps,T=(d.flags&128)!==0;if(d.flags&=-129,l===null){if(vr){if(g.mode==="hidden")return l=Jf(d,g),d.lanes=536870912,Zf(null,l);if(Pf(d),(l=Ur)?(l=s1(l,ao),l=l!==null&&l.data==="&"?l:null,l!==null&&(d.memoizedState={dehydrated:l,treeContext:Wl!==null?{id:vl,overflow:io}:null,retryLane:536870912,hydrationErrors:null},f=wf(l),f.return=d,d.child=f,Gi=d,Ur=null)):l=null,l===null)throw Fu(d);return d.lanes=536870912,null}return Jf(d,g)}var I=l.memoizedState;if(I!==null){var B=I.dehydrated;if(Pf(d),T)if(d.flags&256)d.flags&=-257,d=pa(l,d,f);else if(d.memoizedState!==null)d.child=l.child,d.flags|=128,d=null;else throw Error(r(558));else if(fi||Zd(l,d,f,!1),T=(f&l.childLanes)!==0,fi||T){if(g=Yr,g!==null&&(B=xn(g,f),B!==0&&B!==I.retryLane))throw I.retryLane=B,fl(l,B),ss(g,l,B),Qf;Mm(),d=pa(l,d,f)}else l=I.treeContext,Ur=fo(B.nextSibling),Gi=d,vr=!0,Pu=null,ao=!1,l!==null&&Qd(d,l),d=Jf(d,g),d.flags|=4096;return d}return l=to(l.child,{mode:g.mode,children:g.children}),l.ref=d.ref,d.child=l,l.return=d,l}function mm(l,d){var f=d.ref;if(f===null)l!==null&&l.ref!==null&&(d.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(l===null||l.ref!==f)&&(d.flags|=4194816)}}function gm(l,d,f,g,T){return Gc(d),f=nm(l,d,f,g,void 0,T),g=rm(),l!==null&&!fi?(im(l,d,T),yl(l,d,T)):(vr&&g&&ku(d),d.flags|=1,bi(l,d,f,T),d.child)}function gb(l,d,f,g,T,I){return Gc(d),d.updateQueue=null,f=Bf(d,g,f,T),c_(l),g=rm(),l!==null&&!fi?(im(l,d,I),yl(l,d,I)):(vr&&g&&ku(d),d.flags|=1,bi(l,d,f,I),d.child)}function L_(l,d,f,g,T){if(Gc(d),d.stateNode===null){var I=Kl,B=f.contextType;typeof B=="object"&&B!==null&&(I=fa(B)),I=new f(g,I),d.memoizedState=I.state!==null&&I.state!==void 0?I.state:null,I.updater=Yf,d.stateNode=I,I._reactInternals=d,I=d.stateNode,I.props=g,I.state=d.memoizedState,I.refs={},ml(d),B=f.contextType,I.context=typeof B=="object"&&B!==null?fa(B):Kl,I.state=d.memoizedState,B=f.getDerivedStateFromProps,typeof B=="function"&&(hm(d,f,B,g),I.state=d.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof I.getSnapshotBeforeUpdate=="function"||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(B=I.state,typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount(),B!==I.state&&Yf.enqueueReplaceState(I,I.state,null),ih(d,g,I,T),jc(),I.state=d.memoizedState),typeof I.componentDidMount=="function"&&(d.flags|=4194308),g=!0}else if(l===null){I=d.stateNode;var Y=d.memoizedProps,de=Pa(f,Y);I.props=de;var Ae=I.context,He=f.contextType;B=Kl,typeof He=="object"&&He!==null&&(B=fa(He));var Ke=f.getDerivedStateFromProps;He=typeof Ke=="function"||typeof I.getSnapshotBeforeUpdate=="function",Y=d.pendingProps!==Y,He||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(Y||Ae!==B)&&R_(d,I,g,B),lo=!1;var Me=d.memoizedState;I.state=Me,ih(d,g,I,T),jc(),Ae=d.memoizedState,Y||Me!==Ae||lo?(typeof Ke=="function"&&(hm(d,f,Ke,g),Ae=d.memoizedState),(de=lo||vb(d,f,de,g,Me,Ae,B))?(He||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(d.flags|=4194308)):(typeof I.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=g,d.memoizedState=Ae),I.props=g,I.state=Ae,I.context=B,g=de):(typeof I.componentDidMount=="function"&&(d.flags|=4194308),g=!1)}else{I=d.stateNode,Qp(l,d),B=d.memoizedProps,He=Pa(f,B),I.props=He,Ke=d.pendingProps,Me=I.context,Ae=f.contextType,de=Kl,typeof Ae=="object"&&Ae!==null&&(de=fa(Ae)),Y=f.getDerivedStateFromProps,(Ae=typeof Y=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(B!==Ke||Me!==de)&&R_(d,I,g,de),lo=!1,Me=d.memoizedState,I.state=Me,ih(d,g,I,T),jc();var ke=d.memoizedState;B!==Ke||Me!==ke||lo||l!==null&&l.dependencies!==null&&qp(l.dependencies)?(typeof Y=="function"&&(hm(d,f,Y,g),ke=d.memoizedState),(He=lo||vb(d,f,He,g,Me,ke,de)||l!==null&&l.dependencies!==null&&qp(l.dependencies))?(Ae||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(g,ke,de),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(g,ke,de)),typeof I.componentDidUpdate=="function"&&(d.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof I.componentDidUpdate!="function"||B===l.memoizedProps&&Me===l.memoizedState||(d.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||B===l.memoizedProps&&Me===l.memoizedState||(d.flags|=1024),d.memoizedProps=g,d.memoizedState=ke),I.props=g,I.state=ke,I.context=de,g=He):(typeof I.componentDidUpdate!="function"||B===l.memoizedProps&&Me===l.memoizedState||(d.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||B===l.memoizedProps&&Me===l.memoizedState||(d.flags|=1024),g=!1)}return I=g,mm(l,d),g=(d.flags&128)!==0,I||g?(I=d.stateNode,f=g&&typeof f.getDerivedStateFromError!="function"?null:I.render(),d.flags|=1,l!==null&&g?(d.child=Vu(d,l.child,null,T),d.child=Vu(d,null,f,T)):bi(l,d,f,T),d.memoizedState=I.state,l=d.child):l=yl(l,d,T),l}function _b(l,d,f,g){return W(),d.flags|=256,bi(l,d,f,g),d.child}var k_={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function P_(l){return{baseLanes:l,cachePool:ZE()}}function Fo(l,d,f){return l=l!==null?l.childLanes&~f:0,d&&(l|=Rs),l}function Sa(l,d,f){var g=d.pendingProps,T=!1,I=(d.flags&128)!==0,B;if((B=I)||(B=l!==null&&l.memoizedState===null?!1:(Ui.current&2)!==0),B&&(T=!0,d.flags&=-129),B=(d.flags&32)!==0,d.flags&=-33,l===null){if(vr){if(T?ju(d):co(),(l=Ur)?(l=s1(l,ao),l=l!==null&&l.data!=="&"?l:null,l!==null&&(d.memoizedState={dehydrated:l,treeContext:Wl!==null?{id:vl,overflow:io}:null,retryLane:536870912,hydrationErrors:null},f=wf(l),f.return=d,d.child=f,Gi=d,Ur=null)):l=null,l===null)throw Fu(d);return Sh(l)?d.lanes=32:d.lanes=536870912,null}var Y=g.children;return g=g.fallback,T?(co(),T=d.mode,Y=_m({mode:"hidden",children:Y},T),g=Fc(g,T,f,null),Y.return=d,g.return=d,Y.sibling=g,d.child=Y,g=d.child,g.memoizedState=P_(f),g.childLanes=Fo(l,B,f),d.memoizedState=k_,Zf(null,g)):(ju(d),ev(d,Y))}var de=l.memoizedState;if(de!==null&&(Y=de.dehydrated,Y!==null)){if(I)d.flags&256?(ju(d),d.flags&=-257,d=tv(l,d,f)):d.memoizedState!==null?(co(),d.child=l.child,d.flags|=128,d=null):(co(),Y=g.fallback,T=d.mode,g=_m({mode:"visible",children:g.children},T),Y=Fc(Y,T,f,null),Y.flags|=2,g.return=d,Y.return=d,g.sibling=Y,d.child=g,Vu(d,l.child,null,f),g=d.child,g.memoizedState=P_(f),g.childLanes=Fo(l,B,f),d.memoizedState=k_,d=Zf(null,g));else if(ju(d),Sh(Y)){if(B=Y.nextSibling&&Y.nextSibling.dataset,B)var Ae=B.dgst;B=Ae,g=Error(r(419)),g.stack="",g.digest=B,Hu({value:g,source:null,stack:null}),d=tv(l,d,f)}else if(fi||Zd(l,d,f,!1),B=(f&l.childLanes)!==0,fi||B){if(B=Yr,B!==null&&(g=xn(B,f),g!==0&&g!==de.retryLane))throw de.retryLane=g,fl(l,g),ss(B,l,g),Qf;km(Y)||Mm(),d=tv(l,d,f)}else km(Y)?(d.flags|=192,d.child=l.child,d=null):(l=de.treeContext,Ur=fo(Y.nextSibling),Gi=d,vr=!0,Pu=null,ao=!1,l!==null&&Qd(d,l),d=ev(d,g.children),d.flags|=4096);return d}return T?(co(),Y=g.fallback,T=d.mode,de=l.child,Ae=de.sibling,g=to(de,{mode:"hidden",children:g.children}),g.subtreeFlags=de.subtreeFlags&65011712,Ae!==null?Y=to(Ae,Y):(Y=Fc(Y,T,f,null),Y.flags|=2),Y.return=d,g.return=d,g.sibling=Y,d.child=g,Zf(null,g),g=d.child,Y=l.child.memoizedState,Y===null?Y=P_(f):(T=Y.cachePool,T!==null?(de=Vi._currentValue,T=T.parent!==de?{parent:de,pool:de}:T):T=ZE(),Y={baseLanes:Y.baseLanes|f,cachePool:T}),g.memoizedState=Y,g.childLanes=Fo(l,B,f),d.memoizedState=k_,Zf(l.child,g)):(ju(d),f=l.child,l=f.sibling,f=to(f,{mode:"visible",children:g.children}),f.return=d,f.sibling=null,l!==null&&(B=d.deletions,B===null?(d.deletions=[l],d.flags|=16):B.push(l)),d.child=f,d.memoizedState=null,f)}function ev(l,d){return d=_m({mode:"visible",children:d},l.mode),d.return=l,l.child=d}function _m(l,d){return l=ha(22,l,null,d),l.lanes=0,l}function tv(l,d,f){return Vu(d,l.child,null,f),l=ev(d,d.pendingProps.children),l.flags|=2,d.memoizedState=null,l}function yb(l,d,f){l.lanes|=d;var g=l.alternate;g!==null&&(g.lanes|=d),Zl(l.return,d,f)}function F_(l,d,f,g,T,I){var B=l.memoizedState;B===null?l.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:T,treeForkCount:I}:(B.isBackwards=d,B.rendering=null,B.renderingStartTime=0,B.last=g,B.tail=f,B.tailMode=T,B.treeForkCount=I)}function vh(l,d,f){var g=d.pendingProps,T=g.revealOrder,I=g.tail;g=g.children;var B=Ui.current,Y=(B&2)!==0;if(Y?(B=B&1|2,d.flags|=128):B&=1,me(Ui,B),bi(l,d,g,f),g=vr?Hi:0,!Y&&l!==null&&(l.flags&128)!==0)e:for(l=d.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&yb(l,f,d);else if(l.tag===19)yb(l,f,d);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===d)break e;for(;l.sibling===null;){if(l.return===null||l.return===d)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(T){case"forwards":for(f=d.child,T=null;f!==null;)l=f.alternate,l!==null&&Jp(l)===null&&(T=f),f=f.sibling;f=T,f===null?(T=d.child,d.child=null):(T=f.sibling,f.sibling=null),F_(d,!1,T,f,I,g);break;case"backwards":case"unstable_legacy-backwards":for(f=null,T=d.child,d.child=null;T!==null;){if(l=T.alternate,l!==null&&Jp(l)===null){d.child=T;break}l=T.sibling,T.sibling=f,f=T,T=l}F_(d,!0,f,null,I,g);break;case"together":F_(d,!1,null,null,void 0,g);break;default:d.memoizedState=null}return d.child}function yl(l,d,f){if(l!==null&&(d.dependencies=l.dependencies),Xu|=d.lanes,(f&d.childLanes)===0)if(l!==null){if(Zd(l,d,f,!1),(f&d.childLanes)===0)return null}else return null;if(l!==null&&d.child!==l.child)throw Error(r(153));if(d.child!==null){for(l=d.child,f=to(l,l.pendingProps),d.child=f,f.return=d;l.sibling!==null;)l=l.sibling,f=f.sibling=to(l,l.pendingProps),f.return=d;f.sibling=null}return d.child}function ym(l,d){return(l.lanes&d)!==0?!0:(l=l.dependencies,!!(l!==null&&qp(l)))}function xT(l,d,f){switch(d.tag){case 3:tt(d,d.stateNode.containerInfo),Gu(d,Vi,l.memoizedState.cache),W();break;case 27:case 5:Ht(d);break;case 4:tt(d,d.stateNode.containerInfo);break;case 10:Gu(d,d.type,d.memoizedProps.value);break;case 31:if(d.memoizedState!==null)return d.flags|=128,Pf(d),null;break;case 13:var g=d.memoizedState;if(g!==null)return g.dehydrated!==null?(ju(d),d.flags|=128,null):(f&d.child.childLanes)!==0?Sa(l,d,f):(ju(d),l=yl(l,d,f),l!==null?l.sibling:null);ju(d);break;case 19:var T=(l.flags&128)!==0;if(g=(f&d.childLanes)!==0,g||(Zd(l,d,f,!1),g=(f&d.childLanes)!==0),T){if(g)return vh(l,d,f);d.flags|=128}if(T=d.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),me(Ui,Ui.current),g)break;return null;case 22:return d.lanes=0,Yu(l,d,f,d.pendingProps);case 24:Gu(d,Vi,l.memoizedState.cache)}return yl(l,d,f)}function Eb(l,d,f){if(l!==null)if(l.memoizedProps!==d.pendingProps)fi=!0;else{if(!ym(l,f)&&(d.flags&128)===0)return fi=!1,xT(l,d,f);fi=(l.flags&131072)!==0}else fi=!1,vr&&(d.flags&1048576)!==0&&jp(d,Hi,d.index);switch(d.lanes=0,d.tag){case 16:e:{var g=d.pendingProps;if(l=Do(d.elementType),d.type=l,typeof l=="function")Yl(l)?(g=Pa(l,g),d.tag=1,d=L_(null,d,l,g,f)):(d.tag=0,d=gm(null,d,l,g,f));else{if(l!=null){var T=l.$$typeof;if(T===U){d.tag=11,d=bn(null,d,l,g,f);break e}else if(T===x){d.tag=14,d=Xf(null,d,l,g,f);break e}}throw d=V(l)||l,Error(r(306,d,""))}}return d;case 0:return gm(l,d,d.type,d.pendingProps,f);case 1:return g=d.type,T=Pa(g,d.pendingProps),L_(l,d,g,T,f);case 3:e:{if(tt(d,d.stateNode.containerInfo),l===null)throw Error(r(387));g=d.pendingProps;var I=d.memoizedState;T=I.element,Qp(l,d),ih(d,g,null,f);var B=d.memoizedState;if(g=B.cache,Gu(d,Vi,g),g!==I.cache&&i_(d,[Vi],f,!0),jc(),g=B.element,I.isDehydrated)if(I={element:g,isDehydrated:!1,cache:B.cache},d.updateQueue.baseState=I,d.memoizedState=I,d.flags&256){d=_b(l,d,g,f);break e}else if(g!==T){T=Cs(Error(r(424)),d),Hu(T),d=_b(l,d,g,f);break e}else{switch(l=d.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(Ur=fo(l.firstChild),Gi=d,vr=!0,Pu=null,ao=!0,f=l_(d,null,g,f),d.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(W(),g===T){d=yl(l,d,f);break e}bi(l,d,g,f)}d=d.child}return d;case 26:return mm(l,d),l===null?(f=h1(d.type,null,d.pendingProps,null))?d.memoizedState=f:vr||(f=d.type,l=d.pendingProps,g=bv(Ee.current).createElement(f),g[At]=d,g[Tt]=l,ma(g,f,l),an(g),d.stateNode=g):d.memoizedState=h1(d.type,l.memoizedProps,d.pendingProps,l.memoizedState),null;case 27:return Ht(d),l===null&&vr&&(g=d.stateNode=u1(d.type,d.pendingProps,Ee.current),Gi=d,ao=!0,T=Ur,Rn(d.type)?(b0=T,Ur=fo(g.firstChild)):Ur=T),bi(l,d,d.pendingProps.children,f),mm(l,d),l===null&&(d.flags|=4194304),d.child;case 5:return l===null&&vr&&((T=g=Ur)&&(g=QT(g,d.type,d.pendingProps,ao),g!==null?(d.stateNode=g,Gi=d,Ur=fo(g.firstChild),ao=!1,T=!0):T=!1),T||Fu(d)),Ht(d),T=d.type,I=d.pendingProps,B=l!==null?l.memoizedProps:null,g=I.children,nc(T,I)?g=null:B!==null&&nc(T,B)&&(d.flags|=32),d.memoizedState!==null&&(T=nm(l,d,RT,null,null,f),wh._currentValue=T),mm(l,d),bi(l,d,g,f),d.child;case 6:return l===null&&vr&&((l=f=Ur)&&(f=xr(f,d.pendingProps,ao),f!==null?(d.stateNode=f,Gi=d,Ur=null,l=!0):l=!1),l||Fu(d)),null;case 13:return Sa(l,d,f);case 4:return tt(d,d.stateNode.containerInfo),g=d.pendingProps,l===null?d.child=Vu(d,null,g,f):bi(l,d,g,f),d.child;case 11:return bn(l,d,d.type,d.pendingProps,f);case 7:return bi(l,d,d.pendingProps,f),d.child;case 8:return bi(l,d,d.pendingProps.children,f),d.child;case 12:return bi(l,d,d.pendingProps.children,f),d.child;case 10:return g=d.pendingProps,Gu(d,d.type,g.value),bi(l,d,g.children,f),d.child;case 9:return T=d.type._context,g=d.pendingProps.children,Gc(d),T=fa(T),g=g(T),d.flags|=1,bi(l,d,g,f),d.child;case 14:return Xf(l,d,d.type,d.pendingProps,f);case 15:return vm(l,d,d.type,d.pendingProps,f);case 19:return vh(l,d,f);case 31:return UT(l,d,f);case 22:return Yu(l,d,f,d.pendingProps);case 24:return Gc(d),g=fa(Vi),l===null?(T=s_(),T===null&&(T=Yr,I=Oo(),T.pooledCache=I,I.refCount++,I!==null&&(T.pooledCacheLanes|=f),T=I),d.memoizedState={parent:g,cache:T},ml(d),Gu(d,Vi,T)):((l.lanes&f)!==0&&(Qp(l,d),ih(d,null,null,f),jc()),T=l.memoizedState,I=d.memoizedState,T.parent!==g?(T={parent:g,cache:g},d.memoizedState=T,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=T),Gu(d,Vi,g)):(g=I.cache,Gu(d,Vi,g),g!==T.cache&&i_(d,[Vi],f,!0))),bi(l,d,d.pendingProps.children,f),d.child;case 29:throw d.pendingProps}throw Error(r(156,d.tag))}function tu(l){l.flags|=4}function B_(l,d,f,g,T){if((d=(l.mode&32)!==0)&&(d=!1),d){if(l.flags|=16777216,(T&335544128)===T)if(l.stateNode.complete)l.flags|=8192;else if(hv())l.flags|=8192;else throw pl=Yp,Kp}else l.flags&=-16777217}function H_(l,d){if(d.type!=="stylesheet"||(d.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!g1(d))if(hv())l.flags|=8192;else throw pl=Yp,Kp}function nv(l,d){d!==null&&(l.flags|=4),l.flags&16384&&(d=l.tag!==22?gn():536870912,l.lanes|=d,_h|=d)}function rv(l,d){if(!vr)switch(l.tailMode){case"hidden":d=l.tail;for(var f=null;d!==null;)d.alternate!==null&&(f=d),d=d.sibling;f===null?l.tail=null:f.sibling=null;break;case"collapsed":f=l.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?d||l.tail===null?l.tail=null:l.tail.sibling=null:g.sibling=null}}function Kr(l){var d=l.alternate!==null&&l.alternate.child===l.child,f=0,g=0;if(d)for(var T=l.child;T!==null;)f|=T.lanes|T.childLanes,g|=T.subtreeFlags&65011712,g|=T.flags&65011712,T.return=l,T=T.sibling;else for(T=l.child;T!==null;)f|=T.lanes|T.childLanes,g|=T.subtreeFlags,g|=T.flags,T.return=l,T=T.sibling;return l.subtreeFlags|=g,l.childLanes=f,d}function bb(l,d,f){var g=d.pendingProps;switch(Bc(d),d.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kr(d),null;case 1:return Kr(d),null;case 3:return f=d.stateNode,g=null,l!==null&&(g=l.memoizedState.cache),d.memoizedState.cache!==g&&(d.flags|=2048),Xl(Vi),yt(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(l===null||l.child===null)&&(Hc(d)?tu(d):l===null||l.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,Bu())),Kr(d),null;case 26:var T=d.type,I=d.memoizedState;return l===null?(tu(d),I!==null?(Kr(d),H_(d,I)):(Kr(d),B_(d,T,null,g,f))):I?I!==l.memoizedState?(tu(d),Kr(d),H_(d,I)):(Kr(d),d.flags&=-16777217):(l=l.memoizedProps,l!==g&&tu(d),Kr(d),B_(d,T,l,g,f)),null;case 27:if(zt(d),f=Ee.current,T=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==g&&tu(d);else{if(!g){if(d.stateNode===null)throw Error(r(166));return Kr(d),null}l=Le.current,Hc(d)?Of(d):(l=u1(T,g,f),d.stateNode=l,tu(d))}return Kr(d),null;case 5:if(zt(d),T=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==g&&tu(d);else{if(!g){if(d.stateNode===null)throw Error(r(166));return Kr(d),null}if(I=Le.current,Hc(d))Of(d);else{var B=bv(Ee.current);switch(I){case 1:I=B.createElementNS("http://www.w3.org/2000/svg",T);break;case 2:I=B.createElementNS("http://www.w3.org/1998/Math/MathML",T);break;default:switch(T){case"svg":I=B.createElementNS("http://www.w3.org/2000/svg",T);break;case"math":I=B.createElementNS("http://www.w3.org/1998/Math/MathML",T);break;case"script":I=B.createElement("div"),I.innerHTML="<script><\/script>",I=I.removeChild(I.firstChild);break;case"select":I=typeof g.is=="string"?B.createElement("select",{is:g.is}):B.createElement("select"),g.multiple?I.multiple=!0:g.size&&(I.size=g.size);break;default:I=typeof g.is=="string"?B.createElement(T,{is:g.is}):B.createElement(T)}}I[At]=d,I[Tt]=g;e:for(B=d.child;B!==null;){if(B.tag===5||B.tag===6)I.appendChild(B.stateNode);else if(B.tag!==4&&B.tag!==27&&B.child!==null){B.child.return=B,B=B.child;continue}if(B===d)break e;for(;B.sibling===null;){if(B.return===null||B.return===d)break e;B=B.return}B.sibling.return=B.return,B=B.sibling}d.stateNode=I;e:switch(ma(I,T,g),T){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&tu(d)}}return Kr(d),B_(d,d.type,l===null?null:l.memoizedProps,d.pendingProps,f),null;case 6:if(l&&d.stateNode!=null)l.memoizedProps!==g&&tu(d);else{if(typeof g!="string"&&d.stateNode===null)throw Error(r(166));if(l=Ee.current,Hc(d)){if(l=d.stateNode,f=d.memoizedProps,g=null,T=Gi,T!==null)switch(T.tag){case 27:case 5:g=T.memoizedProps}l[At]=d,l=!!(l.nodeValue===f||g!==null&&g.suppressHydrationWarning===!0||n1(l.nodeValue,f)),l||Fu(d,!0)}else l=bv(l).createTextNode(g),l[At]=d,d.stateNode=l}return Kr(d),null;case 31:if(f=d.memoizedState,l===null||l.memoizedState!==null){if(g=Hc(d),f!==null){if(l===null){if(!g)throw Error(r(318));if(l=d.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(557));l[At]=d}else W(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Kr(d),l=!1}else f=Bu(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=f),l=!0;if(!l)return d.flags&256?(es(d),d):(es(d),null);if((d.flags&128)!==0)throw Error(r(558))}return Kr(d),null;case 13:if(g=d.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(T=Hc(d),g!==null&&g.dehydrated!==null){if(l===null){if(!T)throw Error(r(318));if(T=d.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(r(317));T[At]=d}else W(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Kr(d),T=!1}else T=Bu(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=T),T=!0;if(!T)return d.flags&256?(es(d),d):(es(d),null)}return es(d),(d.flags&128)!==0?(d.lanes=f,d):(f=g!==null,l=l!==null&&l.memoizedState!==null,f&&(g=d.child,T=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(T=g.alternate.memoizedState.cachePool.pool),I=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(I=g.memoizedState.cachePool.pool),I!==T&&(g.flags|=2048)),f!==l&&f&&(d.child.flags|=8192),nv(d,d.updateQueue),Kr(d),null);case 4:return yt(),l===null&&v0(d.stateNode.containerInfo),Kr(d),null;case 10:return Xl(d.type),Kr(d),null;case 19:if(ce(Ui),g=d.memoizedState,g===null)return Kr(d),null;if(T=(d.flags&128)!==0,I=g.rendering,I===null)if(T)rv(g,!1);else{if(vi!==0||l!==null&&(l.flags&128)!==0)for(l=d.child;l!==null;){if(I=Jp(l),I!==null){for(d.flags|=128,rv(g,!1),l=I.updateQueue,d.updateQueue=l,nv(d,l),d.subtreeFlags=0,l=f,f=d.child;f!==null;)YE(f,l),f=f.sibling;return me(Ui,Ui.current&1|2),vr&&Ss(d,g.treeForkCount),d.child}l=l.sibling}g.tail!==null&&_t()>Wc&&(d.flags|=128,T=!0,rv(g,!1),d.lanes=4194304)}else{if(!T)if(l=Jp(I),l!==null){if(d.flags|=128,T=!0,l=l.updateQueue,d.updateQueue=l,nv(d,l),rv(g,!0),g.tail===null&&g.tailMode==="hidden"&&!I.alternate&&!vr)return Kr(d),null}else 2*_t()-g.renderingStartTime>Wc&&f!==536870912&&(d.flags|=128,T=!0,rv(g,!1),d.lanes=4194304);g.isBackwards?(I.sibling=d.child,d.child=I):(l=g.last,l!==null?l.sibling=I:d.child=I,g.last=I)}return g.tail!==null?(l=g.tail,g.rendering=l,g.tail=l.sibling,g.renderingStartTime=_t(),l.sibling=null,f=Ui.current,me(Ui,T?f&1|2:f&1),vr&&Ss(d,g.treeForkCount),l):(Kr(d),null);case 22:case 23:return es(d),kf(),g=d.memoizedState!==null,l!==null?l.memoizedState!==null!==g&&(d.flags|=8192):g&&(d.flags|=8192),g?(f&536870912)!==0&&(d.flags&128)===0&&(Kr(d),d.subtreeFlags&6&&(d.flags|=8192)):Kr(d),f=d.updateQueue,f!==null&&nv(d,f.retryQueue),f=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),g=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(g=d.memoizedState.cachePool.pool),g!==f&&(d.flags|=2048),l!==null&&ce(zc),null;case 24:return f=null,l!==null&&(f=l.memoizedState.cache),d.memoizedState.cache!==f&&(d.flags|=2048),Xl(Vi),Kr(d),null;case 25:return null;case 30:return null}throw Error(r(156,d.tag))}function iv(l,d){switch(Bc(d),d.tag){case 1:return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 3:return Xl(Vi),yt(),l=d.flags,(l&65536)!==0&&(l&128)===0?(d.flags=l&-65537|128,d):null;case 26:case 27:case 5:return zt(d),null;case 31:if(d.memoizedState!==null){if(es(d),d.alternate===null)throw Error(r(340));W()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 13:if(es(d),l=d.memoizedState,l!==null&&l.dehydrated!==null){if(d.alternate===null)throw Error(r(340));W()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 19:return ce(Ui),null;case 4:return yt(),null;case 10:return Xl(d.type),null;case 22:case 23:return es(d),kf(),l!==null&&ce(zc),l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 24:return Xl(Vi),null;case 25:return null;default:return null}}function Em(l,d){switch(Bc(d),d.tag){case 3:Xl(Vi),yt();break;case 26:case 27:case 5:zt(d);break;case 4:yt();break;case 31:d.memoizedState!==null&&es(d);break;case 13:es(d);break;case 19:ce(Ui);break;case 10:Xl(d.type);break;case 22:case 23:es(d),kf(),l!==null&&ce(zc);break;case 24:Xl(Vi)}}function ph(l,d){try{var f=d.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var T=g.next;f=T;do{if((f.tag&l)===l){g=void 0;var I=f.create,B=f.inst;g=I(),B.destroy=g}f=f.next}while(f!==T)}}catch(Y){Pr(d,d.return,Y)}}function nu(l,d,f){try{var g=d.updateQueue,T=g!==null?g.lastEffect:null;if(T!==null){var I=T.next;g=I;do{if((g.tag&l)===l){var B=g.inst,Y=B.destroy;if(Y!==void 0){B.destroy=void 0,T=d;var de=f,Ae=Y;try{Ae()}catch(He){Pr(T,de,He)}}}g=g.next}while(g!==I)}}catch(He){Pr(d,d.return,He)}}function av(l){var d=l.updateQueue;if(d!==null){var f=l.stateNode;try{Zp(d,f)}catch(g){Pr(l,l.return,g)}}}function G_(l,d,f){f.props=Pa(l.type,l.memoizedProps),f.state=l.memoizedState;try{f.componentWillUnmount()}catch(g){Pr(l,d,g)}}function ns(l,d){try{var f=l.ref;if(f!==null){switch(l.tag){case 26:case 27:case 5:var g=l.stateNode;break;case 30:g=l.stateNode;break;default:g=l.stateNode}typeof f=="function"?l.refCleanup=f(g):f.current=g}}catch(T){Pr(l,d,T)}}function Ta(l,d){var f=l.ref,g=l.refCleanup;if(f!==null)if(typeof g=="function")try{g()}catch(T){Pr(l,d,T)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(T){Pr(l,d,T)}else f.current=null}function Cb(l){var d=l.type,f=l.memoizedProps,g=l.stateNode;try{e:switch(d){case"button":case"input":case"select":case"textarea":f.autoFocus&&g.focus();break e;case"img":f.src?g.src=f.src:f.srcSet&&(g.srcset=f.srcSet)}}catch(T){Pr(l,l.return,T)}}function bm(l,d,f){try{var g=l.stateNode;KT(g,l.type,f,d),g[Tt]=d}catch(T){Pr(l,l.return,T)}}function Sb(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Rn(l.type)||l.tag===4}function V_(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||Sb(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Rn(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function z_(l,d,f){var g=l.tag;if(g===5||g===6)l=l.stateNode,d?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(l,d):(d=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,d.appendChild(l),f=f._reactRootContainer,f!=null||d.onclick!==null||(d.onclick=xa));else if(g!==4&&(g===27&&Rn(l.type)&&(f=l.stateNode,d=null),l=l.child,l!==null))for(z_(l,d,f),l=l.sibling;l!==null;)z_(l,d,f),l=l.sibling}function Cm(l,d,f){var g=l.tag;if(g===5||g===6)l=l.stateNode,d?f.insertBefore(l,d):f.appendChild(l);else if(g!==4&&(g===27&&Rn(l.type)&&(f=l.stateNode),l=l.child,l!==null))for(Cm(l,d,f),l=l.sibling;l!==null;)Cm(l,d,f),l=l.sibling}function Tb(l){var d=l.stateNode,f=l.memoizedProps;try{for(var g=l.type,T=d.attributes;T.length;)d.removeAttributeNode(T[0]);ma(d,g,f),d[At]=l,d[Tt]=f}catch(I){Pr(l,l.return,I)}}var ru=!1,zi=!1,j_=!1,Nb=typeof WeakSet=="function"?WeakSet:Set,oa=null;function LT(l,d){if(l=l.containerInfo,Ev=zm,l=jE(l),t_(l)){if("selectionStart"in l)var f={start:l.selectionStart,end:l.selectionEnd};else e:{f=(f=l.ownerDocument)&&f.defaultView||window;var g=f.getSelection&&f.getSelection();if(g&&g.rangeCount!==0){f=g.anchorNode;var T=g.anchorOffset,I=g.focusNode;g=g.focusOffset;try{f.nodeType,I.nodeType}catch{f=null;break e}var B=0,Y=-1,de=-1,Ae=0,He=0,Ke=l,Me=null;t:for(;;){for(var ke;Ke!==f||T!==0&&Ke.nodeType!==3||(Y=B+T),Ke!==I||g!==0&&Ke.nodeType!==3||(de=B+g),Ke.nodeType===3&&(B+=Ke.nodeValue.length),(ke=Ke.firstChild)!==null;)Me=Ke,Ke=ke;for(;;){if(Ke===l)break t;if(Me===f&&++Ae===T&&(Y=B),Me===I&&++He===g&&(de=B),(ke=Ke.nextSibling)!==null)break;Ke=Me,Me=Ke.parentNode}Ke=ke}f=Y===-1||de===-1?null:{start:Y,end:de}}else f=null}f=f||{start:0,end:0}}else f=null;for(_0={focusedElem:l,selectionRange:f},zm=!1,oa=d;oa!==null;)if(d=oa,l=d.child,(d.subtreeFlags&1028)!==0&&l!==null)l.return=d,oa=l;else for(;oa!==null;){switch(d=oa,I=d.alternate,l=d.flags,d.tag){case 0:if((l&4)!==0&&(l=d.updateQueue,l=l!==null?l.events:null,l!==null))for(f=0;f<l.length;f++)T=l[f],T.ref.impl=T.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&I!==null){l=void 0,f=d,T=I.memoizedProps,I=I.memoizedState,g=f.stateNode;try{var Wt=Pa(f.type,T);l=g.getSnapshotBeforeUpdate(Wt,I),g.__reactInternalSnapshotBeforeUpdate=l}catch(Sn){Pr(f,f.return,Sn)}}break;case 3:if((l&1024)!==0){if(l=d.stateNode.containerInfo,f=l.nodeType,f===9)Lm(l);else if(f===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":Lm(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(r(163))}if(l=d.sibling,l!==null){l.return=d.return,oa=l;break}oa=d.return}}function q_(l,d,f){var g=f.flags;switch(f.tag){case 0:case 11:case 15:au(l,f),g&4&&ph(5,f);break;case 1:if(au(l,f),g&4)if(l=f.stateNode,d===null)try{l.componentDidMount()}catch(B){Pr(f,f.return,B)}else{var T=Pa(f.type,d.memoizedProps);d=d.memoizedState;try{l.componentDidUpdate(T,d,l.__reactInternalSnapshotBeforeUpdate)}catch(B){Pr(f,f.return,B)}}g&64&&av(f),g&512&&ns(f,f.return);break;case 3:if(au(l,f),g&64&&(l=f.updateQueue,l!==null)){if(d=null,f.child!==null)switch(f.child.tag){case 27:case 5:d=f.child.stateNode;break;case 1:d=f.child.stateNode}try{Zp(l,d)}catch(B){Pr(f,f.return,B)}}break;case 27:d===null&&g&4&&Tb(f);case 26:case 5:au(l,f),d===null&&g&4&&Cb(f),g&512&&ns(f,f.return);break;case 12:au(l,f);break;case 31:au(l,f),g&4&&K_(l,f);break;case 13:au(l,f),g&4&&Mb(l,f),g&64&&(l=f.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(f=Rm.bind(null,f),XT(l,f))));break;case 22:if(g=f.memoizedState!==null||ru,!g){d=d!==null&&d.memoizedState!==null||zi,T=ru;var I=zi;ru=g,(zi=d)&&!I?El(l,f,(f.subtreeFlags&8772)!==0):au(l,f),ru=T,zi=I}break;case 30:break;default:au(l,f)}}function $_(l){var d=l.alternate;d!==null&&(l.alternate=null,$_(d)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(d=l.stateNode,d!==null&&oe(d)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var ni=null,rs=!1;function iu(l,d,f){for(f=f.child;f!==null;)Ab(l,d,f),f=f.sibling}function Ab(l,d,f){if(Gt&&typeof Gt.onCommitFiberUnmount=="function")try{Gt.onCommitFiberUnmount(Zt,f)}catch{}switch(f.tag){case 26:zi||Ta(f,d),iu(l,d,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:zi||Ta(f,d);var g=ni,T=rs;Rn(f.type)&&(ni=f.stateNode,rs=!1),iu(l,d,f),Sv(f.stateNode),ni=g,rs=T;break;case 5:zi||Ta(f,d);case 6:if(g=ni,T=rs,ni=null,iu(l,d,f),ni=g,rs=T,ni!==null)if(rs)try{(ni.nodeType===9?ni.body:ni.nodeName==="HTML"?ni.ownerDocument.body:ni).removeChild(f.stateNode)}catch(I){Pr(f,d,I)}else try{ni.removeChild(f.stateNode)}catch(I){Pr(f,d,I)}break;case 18:ni!==null&&(rs?(l=ni,E0(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,f.stateNode),Oh(l)):E0(ni,f.stateNode));break;case 4:g=ni,T=rs,ni=f.stateNode.containerInfo,rs=!0,iu(l,d,f),ni=g,rs=T;break;case 0:case 11:case 14:case 15:nu(2,f,d),zi||nu(4,f,d),iu(l,d,f);break;case 1:zi||(Ta(f,d),g=f.stateNode,typeof g.componentWillUnmount=="function"&&G_(f,d,g)),iu(l,d,f);break;case 21:iu(l,d,f);break;case 22:zi=(g=zi)||f.memoizedState!==null,iu(l,d,f),zi=g;break;default:iu(l,d,f)}}function K_(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{Oh(l)}catch(f){Pr(d,d.return,f)}}}function Mb(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{Oh(l)}catch(f){Pr(d,d.return,f)}}function kT(l){switch(l.tag){case 31:case 13:case 19:var d=l.stateNode;return d===null&&(d=l.stateNode=new Nb),d;case 22:return l=l.stateNode,d=l._retryCache,d===null&&(d=l._retryCache=new Nb),d;default:throw Error(r(435,l.tag))}}function Sm(l,d){var f=kT(l);d.forEach(function(g){if(!f.has(g)){f.add(g);var T=zT.bind(null,l,g);g.then(T,T)}})}function is(l,d){var f=d.deletions;if(f!==null)for(var g=0;g<f.length;g++){var T=f[g],I=l,B=d,Y=B;e:for(;Y!==null;){switch(Y.tag){case 27:if(Rn(Y.type)){ni=Y.stateNode,rs=!1;break e}break;case 5:ni=Y.stateNode,rs=!1;break e;case 3:case 4:ni=Y.stateNode.containerInfo,rs=!0;break e}Y=Y.return}if(ni===null)throw Error(r(160));Ab(I,B,T),ni=null,rs=!1,I=T.alternate,I!==null&&(I.return=null),T.return=null}if(d.subtreeFlags&13886)for(d=d.child;d!==null;)Ib(d,l),d=d.sibling}var Bo=null;function Ib(l,d){var f=l.alternate,g=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:is(d,l),ri(l),g&4&&(nu(3,l,l.return),ph(3,l),nu(5,l,l.return));break;case 1:is(d,l),ri(l),g&512&&(zi||f===null||Ta(f,f.return)),g&64&&ru&&(l=l.updateQueue,l!==null&&(g=l.callbacks,g!==null&&(f=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=f===null?g:f.concat(g))));break;case 26:var T=Bo;if(is(d,l),ri(l),g&512&&(zi||f===null||Ta(f,f.return)),g&4){var I=f!==null?f.memoizedState:null;if(g=l.memoizedState,f===null)if(g===null)if(l.stateNode===null){e:{g=l.type,f=l.memoizedProps,T=T.ownerDocument||T;t:switch(g){case"title":I=T.getElementsByTagName("title")[0],(!I||I[mt]||I[At]||I.namespaceURI==="http://www.w3.org/2000/svg"||I.hasAttribute("itemprop"))&&(I=T.createElement(g),T.head.insertBefore(I,T.querySelector("head > title"))),ma(I,g,f),I[At]=l,an(I),g=I;break e;case"link":var B=p1("link","href",T).get(g+(f.href||""));if(B){for(var Y=0;Y<B.length;Y++)if(I=B[Y],I.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&I.getAttribute("rel")===(f.rel==null?null:f.rel)&&I.getAttribute("title")===(f.title==null?null:f.title)&&I.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){B.splice(Y,1);break t}}I=T.createElement(g),ma(I,g,f),T.head.appendChild(I);break;case"meta":if(B=p1("meta","content",T).get(g+(f.content||""))){for(Y=0;Y<B.length;Y++)if(I=B[Y],I.getAttribute("content")===(f.content==null?null:""+f.content)&&I.getAttribute("name")===(f.name==null?null:f.name)&&I.getAttribute("property")===(f.property==null?null:f.property)&&I.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&I.getAttribute("charset")===(f.charSet==null?null:f.charSet)){B.splice(Y,1);break t}}I=T.createElement(g),ma(I,g,f),T.head.appendChild(I);break;default:throw Error(r(468,g))}I[At]=l,an(I),g=I}l.stateNode=g}else m1(T,l.type,l.stateNode);else l.stateNode=v1(T,g,l.memoizedProps);else I!==g?(I===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):I.count--,g===null?m1(T,l.type,l.stateNode):v1(T,g,l.memoizedProps)):g===null&&l.stateNode!==null&&bm(l,l.memoizedProps,f.memoizedProps)}break;case 27:is(d,l),ri(l),g&512&&(zi||f===null||Ta(f,f.return)),f!==null&&g&4&&bm(l,l.memoizedProps,f.memoizedProps);break;case 5:if(is(d,l),ri(l),g&512&&(zi||f===null||Ta(f,f.return)),l.flags&32){T=l.stateNode;try{Ua(T,"")}catch(Wt){Pr(l,l.return,Wt)}}g&4&&l.stateNode!=null&&(T=l.memoizedProps,bm(l,T,f!==null?f.memoizedProps:T)),g&1024&&(j_=!0);break;case 6:if(is(d,l),ri(l),g&4){if(l.stateNode===null)throw Error(r(162));g=l.memoizedProps,f=l.stateNode;try{f.nodeValue=g}catch(Wt){Pr(l,l.return,Wt)}}break;case 3:if(Tv=null,T=Bo,Bo=Pm(d.containerInfo),is(d,l),Bo=T,ri(l),g&4&&f!==null&&f.memoizedState.isDehydrated)try{Oh(d.containerInfo)}catch(Wt){Pr(l,l.return,Wt)}j_&&(j_=!1,wb(l));break;case 4:g=Bo,Bo=Pm(l.stateNode.containerInfo),is(d,l),ri(l),Bo=g;break;case 12:is(d,l),ri(l);break;case 31:is(d,l),ri(l),g&4&&(g=l.updateQueue,g!==null&&(l.updateQueue=null,Sm(l,g)));break;case 13:is(d,l),ri(l),l.child.flags&8192&&l.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(cv=_t()),g&4&&(g=l.updateQueue,g!==null&&(l.updateQueue=null,Sm(l,g)));break;case 22:T=l.memoizedState!==null;var de=f!==null&&f.memoizedState!==null,Ae=ru,He=zi;if(ru=Ae||T,zi=He||de,is(d,l),zi=He,ru=Ae,ri(l),g&8192)e:for(d=l.stateNode,d._visibility=T?d._visibility&-2:d._visibility|1,T&&(f===null||de||ru||zi||Kc(l)),f=null,d=l;;){if(d.tag===5||d.tag===26){if(f===null){de=f=d;try{if(I=de.stateNode,T)B=I.style,typeof B.setProperty=="function"?B.setProperty("display","none","important"):B.display="none";else{Y=de.stateNode;var Ke=de.memoizedProps.style,Me=Ke!=null&&Ke.hasOwnProperty("display")?Ke.display:null;Y.style.display=Me==null||typeof Me=="boolean"?"":(""+Me).trim()}}catch(Wt){Pr(de,de.return,Wt)}}}else if(d.tag===6){if(f===null){de=d;try{de.stateNode.nodeValue=T?"":de.memoizedProps}catch(Wt){Pr(de,de.return,Wt)}}}else if(d.tag===18){if(f===null){de=d;try{var ke=de.stateNode;T?xs(ke,!0):xs(de.stateNode,!1)}catch(Wt){Pr(de,de.return,Wt)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===l)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break e;for(;d.sibling===null;){if(d.return===null||d.return===l)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}g&4&&(g=l.updateQueue,g!==null&&(f=g.retryQueue,f!==null&&(g.retryQueue=null,Sm(l,f))));break;case 19:is(d,l),ri(l),g&4&&(g=l.updateQueue,g!==null&&(l.updateQueue=null,Sm(l,g)));break;case 30:break;case 21:break;default:is(d,l),ri(l)}}function ri(l){var d=l.flags;if(d&2){try{for(var f,g=l.return;g!==null;){if(Sb(g)){f=g;break}g=g.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var T=f.stateNode,I=V_(l);Cm(l,I,T);break;case 5:var B=f.stateNode;f.flags&32&&(Ua(B,""),f.flags&=-33);var Y=V_(l);Cm(l,Y,B);break;case 3:case 4:var de=f.stateNode.containerInfo,Ae=V_(l);z_(l,Ae,de);break;default:throw Error(r(161))}}catch(He){Pr(l,l.return,He)}l.flags&=-3}d&4096&&(l.flags&=-4097)}function wb(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var d=l;wb(d),d.tag===5&&d.flags&1024&&d.stateNode.reset(),l=l.sibling}}function au(l,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)q_(l,d.alternate,d),d=d.sibling}function Kc(l){for(l=l.child;l!==null;){var d=l;switch(d.tag){case 0:case 11:case 14:case 15:nu(4,d,d.return),Kc(d);break;case 1:Ta(d,d.return);var f=d.stateNode;typeof f.componentWillUnmount=="function"&&G_(d,d.return,f),Kc(d);break;case 27:Sv(d.stateNode);case 26:case 5:Ta(d,d.return),Kc(d);break;case 22:d.memoizedState===null&&Kc(d);break;case 30:Kc(d);break;default:Kc(d)}l=l.sibling}}function El(l,d,f){for(f=f&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var g=d.alternate,T=l,I=d,B=I.flags;switch(I.tag){case 0:case 11:case 15:El(T,I,f),ph(4,I);break;case 1:if(El(T,I,f),g=I,T=g.stateNode,typeof T.componentDidMount=="function")try{T.componentDidMount()}catch(Ae){Pr(g,g.return,Ae)}if(g=I,T=g.updateQueue,T!==null){var Y=g.stateNode;try{var de=T.shared.hiddenCallbacks;if(de!==null)for(T.shared.hiddenCallbacks=null,T=0;T<de.length;T++)Lo(de[T],Y)}catch(Ae){Pr(g,g.return,Ae)}}f&&B&64&&av(I),ns(I,I.return);break;case 27:Tb(I);case 26:case 5:El(T,I,f),f&&g===null&&B&4&&Cb(I),ns(I,I.return);break;case 12:El(T,I,f);break;case 31:El(T,I,f),f&&B&4&&K_(T,I);break;case 13:El(T,I,f),f&&B&4&&Mb(T,I);break;case 22:I.memoizedState===null&&El(T,I,f),ns(I,I.return);break;case 30:break;default:El(T,I,f)}d=d.sibling}}function Y_(l,d){var f=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),l=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(l=d.memoizedState.cachePool.pool),l!==f&&(l!=null&&l.refCount++,f!=null&&Df(f))}function W_(l,d){l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&Df(l))}function Ho(l,d,f,g){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)Rb(l,d,f,g),d=d.sibling}function Rb(l,d,f,g){var T=d.flags;switch(d.tag){case 0:case 11:case 15:Ho(l,d,f,g),T&2048&&ph(9,d);break;case 1:Ho(l,d,f,g);break;case 3:Ho(l,d,f,g),T&2048&&(l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&Df(l)));break;case 12:if(T&2048){Ho(l,d,f,g),l=d.stateNode;try{var I=d.memoizedProps,B=I.id,Y=I.onPostCommit;typeof Y=="function"&&Y(B,d.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(de){Pr(d,d.return,de)}}else Ho(l,d,f,g);break;case 31:Ho(l,d,f,g);break;case 13:Ho(l,d,f,g);break;case 23:break;case 22:I=d.stateNode,B=d.alternate,d.memoizedState!==null?I._visibility&2?Ho(l,d,f,g):sv(l,d):I._visibility&2?Ho(l,d,f,g):(I._visibility|=2,Wu(l,d,f,g,(d.subtreeFlags&10256)!==0||!1)),T&2048&&Y_(B,d);break;case 24:Ho(l,d,f,g),T&2048&&W_(d.alternate,d);break;default:Ho(l,d,f,g)}}function Wu(l,d,f,g,T){for(T=T&&((d.subtreeFlags&10256)!==0||!1),d=d.child;d!==null;){var I=l,B=d,Y=f,de=g,Ae=B.flags;switch(B.tag){case 0:case 11:case 15:Wu(I,B,Y,de,T),ph(8,B);break;case 23:break;case 22:var He=B.stateNode;B.memoizedState!==null?He._visibility&2?Wu(I,B,Y,de,T):sv(I,B):(He._visibility|=2,Wu(I,B,Y,de,T)),T&&Ae&2048&&Y_(B.alternate,B);break;case 24:Wu(I,B,Y,de,T),T&&Ae&2048&&W_(B.alternate,B);break;default:Wu(I,B,Y,de,T)}d=d.sibling}}function sv(l,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var f=l,g=d,T=g.flags;switch(g.tag){case 22:sv(f,g),T&2048&&Y_(g.alternate,g);break;case 24:sv(f,g),T&2048&&W_(g.alternate,g);break;default:sv(f,g)}d=d.sibling}}var ov=8192;function mh(l,d,f){if(l.subtreeFlags&ov)for(l=l.child;l!==null;)Ob(l,d,f),l=l.sibling}function Ob(l,d,f){switch(l.tag){case 26:mh(l,d,f),l.flags&ov&&l.memoizedState!==null&&Ih(f,Bo,l.memoizedState,l.memoizedProps);break;case 5:mh(l,d,f);break;case 3:case 4:var g=Bo;Bo=Pm(l.stateNode.containerInfo),mh(l,d,f),Bo=g;break;case 22:l.memoizedState===null&&(g=l.alternate,g!==null&&g.memoizedState!==null?(g=ov,ov=16777216,mh(l,d,f),ov=g):mh(l,d,f));break;default:mh(l,d,f)}}function Db(l){var d=l.alternate;if(d!==null&&(l=d.child,l!==null)){d.child=null;do d=l.sibling,l.sibling=null,l=d;while(l!==null)}}function lv(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var f=0;f<d.length;f++){var g=d[f];oa=g,xb(g,l)}Db(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Ub(l),l=l.sibling}function Ub(l){switch(l.tag){case 0:case 11:case 15:lv(l),l.flags&2048&&nu(9,l,l.return);break;case 3:lv(l);break;case 12:lv(l);break;case 22:var d=l.stateNode;l.memoizedState!==null&&d._visibility&2&&(l.return===null||l.return.tag!==13)?(d._visibility&=-3,Tm(l)):lv(l);break;default:lv(l)}}function Tm(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var f=0;f<d.length;f++){var g=d[f];oa=g,xb(g,l)}Db(l)}for(l=l.child;l!==null;){switch(d=l,d.tag){case 0:case 11:case 15:nu(8,d,d.return),Tm(d);break;case 22:f=d.stateNode,f._visibility&2&&(f._visibility&=-3,Tm(d));break;default:Tm(d)}l=l.sibling}}function xb(l,d){for(;oa!==null;){var f=oa;switch(f.tag){case 0:case 11:case 15:nu(8,f,d);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var g=f.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:Df(f.memoizedState.cache)}if(g=f.child,g!==null)g.return=f,oa=g;else e:for(f=l;oa!==null;){g=oa;var T=g.sibling,I=g.return;if($_(g),g===f){oa=null;break e}if(T!==null){T.return=I,oa=T;break e}oa=I}}}var PT={getCacheForType:function(l){var d=fa(Vi),f=d.data.get(l);return f===void 0&&(f=l(),d.data.set(l,f)),f},cacheSignal:function(){return fa(Vi).controller.signal}},FT=typeof WeakMap=="function"?WeakMap:Map,wr=0,Yr=null,or=null,dr=0,kr=0,ws=null,Qu=!1,gh=!1,Q_=!1,Go=0,vi=0,Xu=0,Yc=0,X_=0,Rs=0,_h=0,uv=null,as=null,Z_=!1,cv=0,Lb=0,Wc=1/0,Nm=null,Zu=null,Xi=0,Ju=null,yh=null,su=0,J_=0,e0=null,kb=null,dv=0,t0=null;function Os(){return(wr&2)!==0&&dr!==0?dr&-dr:z.T!==null?Ds():at()}function Pb(){if(Rs===0)if((dr&536870912)===0||vr){var l=Ct;Ct<<=1,(Ct&3932160)===0&&(Ct=262144),Rs=l}else Rs=536870912;return l=Ns.current,l!==null&&(l.flags|=32),Rs}function ss(l,d,f){(l===Yr&&(kr===2||kr===9)||l.cancelPendingCommit!==null)&&(Eh(l,0),ou(l,dr,Rs,!1)),En(l,f),((wr&2)===0||l!==Yr)&&(l===Yr&&((wr&2)===0&&(Yc|=f),vi===4&&ou(l,dr,Rs,!1)),bl(l))}function Fb(l,d,f){if((wr&6)!==0)throw Error(r(327));var g=!f&&(d&127)===0&&(d&l.expiredLanes)===0||St(l,d),T=g?HT(l,d):r0(l,d,!0),I=g;do{if(T===0){gh&&!g&&ou(l,d,0,!1);break}else{if(f=l.current.alternate,I&&!Hb(f)){T=r0(l,d,!1),I=!1;continue}if(T===2){if(I=d,l.errorRecoveryDisabledLanes&I)var B=0;else B=l.pendingLanes&-536870913,B=B!==0?B:B&536870912?536870912:0;if(B!==0){d=B;e:{var Y=l;T=uv;var de=Y.current.memoizedState.isDehydrated;if(de&&(Eh(Y,B).flags|=256),B=r0(Y,B,!1),B!==2){if(Q_&&!de){Y.errorRecoveryDisabledLanes|=I,Yc|=I,T=4;break e}I=as,as=T,I!==null&&(as===null?as=I:as.push.apply(as,I))}T=B}if(I=!1,T!==2)continue}}if(T===1){Eh(l,0),ou(l,d,0,!0);break}e:{switch(g=l,I=T,I){case 0:case 1:throw Error(r(345));case 4:if((d&4194048)!==d)break;case 6:ou(g,d,Rs,!Qu);break e;case 2:as=null;break;case 3:case 5:break;default:throw Error(r(329))}if((d&62914560)===d&&(T=cv+300-_t(),10<T)){if(ou(g,d,Rs,!Qu),it(g,0,!0)!==0)break e;su=d,g.timeoutHandle=r1(Bb.bind(null,g,f,as,Nm,Z_,d,Rs,Yc,_h,Qu,I,"Throttled",-0,0),T);break e}Bb(g,f,as,Nm,Z_,d,Rs,Yc,_h,Qu,I,null,-0,0)}}break}while(!0);bl(l)}function Bb(l,d,f,g,T,I,B,Y,de,Ae,He,Ke,Me,ke){if(l.timeoutHandle=-1,Ke=d.subtreeFlags,Ke&8192||(Ke&16785408)===16785408){Ke={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:xa},Ob(d,I,Ke);var Wt=(I&62914560)===I?cv-_t():(I&4194048)===I?Lb-_t():0;if(Wt=s2(Ke,Wt),Wt!==null){su=I,l.cancelPendingCommit=Wt($b.bind(null,l,d,I,f,g,T,B,Y,de,He,Ke,null,Me,ke)),ou(l,I,B,!Ae);return}}$b(l,d,I,f,g,T,B,Y,de)}function Hb(l){for(var d=l;;){var f=d.tag;if((f===0||f===11||f===15)&&d.flags&16384&&(f=d.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var g=0;g<f.length;g++){var T=f[g],I=T.getSnapshot;T=T.value;try{if(!hi(I(),T))return!1}catch{return!1}}if(f=d.child,d.subtreeFlags&16384&&f!==null)f.return=d,d=f;else{if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function ou(l,d,f,g){d&=~X_,d&=~Yc,l.suspendedLanes|=d,l.pingedLanes&=~d,g&&(l.warmLanes|=d),g=l.expirationTimes;for(var T=d;0<T;){var I=31-Lt(T),B=1<<I;g[I]=-1,T&=~B}f!==0&&Xn(l,f,d)}function Am(){return(wr&6)===0?(mv(0),!1):!0}function n0(){if(or!==null){if(kr===0)var l=or.return;else l=or,Ql=$n=null,d_(l),nh=null,Ts=0,l=or;for(;l!==null;)Em(l.alternate,l),l=l.return;or=null}}function Eh(l,d){var f=l.timeoutHandle;f!==-1&&(l.timeoutHandle=-1,WT(f)),f=l.cancelPendingCommit,f!==null&&(l.cancelPendingCommit=null,f()),su=0,n0(),Yr=l,or=f=to(l.current,null),dr=d,kr=0,ws=null,Qu=!1,gh=St(l,d),Q_=!1,_h=Rs=X_=Yc=Xu=vi=0,as=uv=null,Z_=!1,(d&8)!==0&&(d|=d&32);var g=l.entangledLanes;if(g!==0)for(l=l.entanglements,g&=d;0<g;){var T=31-Lt(g),I=1<<T;d|=l[T],g&=~I}return Go=d,Ro(),f}function Gb(l,d){Kn=null,z.H=Ku,d===th||d===xf?(d=eb(),kr=3):d===Kp?(d=eb(),kr=4):kr=d===Qf?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,ws=d,or===null&&(vi=1,Wf(l,Cs(d,l.current)))}function hv(){var l=Ns.current;return l===null?!0:(dr&4194048)===dr?uo===null:(dr&62914560)===dr||(dr&536870912)!==0?l===uo:!1}function Vb(){var l=z.H;return z.H=Ku,l===null?Ku:l}function zb(){var l=z.A;return z.A=PT,l}function Mm(){vi=4,Qu||(dr&4194048)!==dr&&Ns.current!==null||(gh=!0),(Xu&134217727)===0&&(Yc&134217727)===0||Yr===null||ou(Yr,dr,Rs,!1)}function r0(l,d,f){var g=wr;wr|=2;var T=Vb(),I=zb();(Yr!==l||dr!==d)&&(Nm=null,Eh(l,d)),d=!1;var B=vi;e:do try{if(kr!==0&&or!==null){var Y=or,de=ws;switch(kr){case 8:n0(),B=6;break e;case 3:case 2:case 9:case 6:Ns.current===null&&(d=!0);var Ae=kr;if(kr=0,ws=null,bh(l,Y,de,Ae),f&&gh){B=0;break e}break;default:Ae=kr,kr=0,ws=null,bh(l,Y,de,Ae)}}BT(),B=vi;break}catch(He){Gb(l,He)}while(!0);return d&&l.shellSuspendCounter++,Ql=$n=null,wr=g,z.H=T,z.A=I,or===null&&(Yr=null,dr=0,Ro()),B}function BT(){for(;or!==null;)jb(or)}function HT(l,d){var f=wr;wr|=2;var g=Vb(),T=zb();Yr!==l||dr!==d?(Nm=null,Wc=_t()+500,Eh(l,d)):gh=St(l,d);e:do try{if(kr!==0&&or!==null){d=or;var I=ws;t:switch(kr){case 1:kr=0,ws=null,bh(l,d,I,1);break;case 2:case 9:if(JE(I)){kr=0,ws=null,qb(d);break}d=function(){kr!==2&&kr!==9||Yr!==l||(kr=7),bl(l)},I.then(d,d);break e;case 3:kr=7;break e;case 4:kr=5;break e;case 7:JE(I)?(kr=0,ws=null,qb(d)):(kr=0,ws=null,bh(l,d,I,7));break;case 5:var B=null;switch(or.tag){case 26:B=or.memoizedState;case 5:case 27:var Y=or;if(B?g1(B):Y.stateNode.complete){kr=0,ws=null;var de=Y.sibling;if(de!==null)or=de;else{var Ae=Y.return;Ae!==null?(or=Ae,Im(Ae)):or=null}break t}}kr=0,ws=null,bh(l,d,I,5);break;case 6:kr=0,ws=null,bh(l,d,I,6);break;case 8:n0(),vi=6;break e;default:throw Error(r(462))}}GT();break}catch(He){Gb(l,He)}while(!0);return Ql=$n=null,z.H=g,z.A=T,wr=f,or!==null?0:(Yr=null,dr=0,Ro(),vi)}function GT(){for(;or!==null&&!un();)jb(or)}function jb(l){var d=Eb(l.alternate,l,Go);l.memoizedProps=l.pendingProps,d===null?Im(l):or=d}function qb(l){var d=l,f=d.alternate;switch(d.tag){case 15:case 0:d=gb(f,d,d.pendingProps,d.type,void 0,dr);break;case 11:d=gb(f,d,d.pendingProps,d.type.render,d.ref,dr);break;case 5:d_(d);default:Em(f,d),d=or=YE(d,Go),d=Eb(f,d,Go)}l.memoizedProps=l.pendingProps,d===null?Im(l):or=d}function bh(l,d,f,g){Ql=$n=null,d_(d),nh=null,Ts=0;var T=d.return;try{if(x_(l,T,d,f,dr)){vi=1,Wf(l,Cs(f,l.current)),or=null;return}}catch(I){if(T!==null)throw or=T,I;vi=1,Wf(l,Cs(f,l.current)),or=null;return}d.flags&32768?(vr||g===1?l=!0:gh||(dr&536870912)!==0?l=!1:(Qu=l=!0,(g===2||g===9||g===3||g===6)&&(g=Ns.current,g!==null&&g.tag===13&&(g.flags|=16384))),fv(d,l)):Im(d)}function Im(l){var d=l;do{if((d.flags&32768)!==0){fv(d,Qu);return}l=d.return;var f=bb(d.alternate,d,Go);if(f!==null){or=f;return}if(d=d.sibling,d!==null){or=d;return}or=d=l}while(d!==null);vi===0&&(vi=5)}function fv(l,d){do{var f=iv(l.alternate,l);if(f!==null){f.flags&=32767,or=f;return}if(f=l.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!d&&(l=l.sibling,l!==null)){or=l;return}or=l=f}while(l!==null);vi=6,or=null}function $b(l,d,f,g,T,I,B,Y,de){l.cancelPendingCommit=null;do vv();while(Xi!==0);if((wr&6)!==0)throw Error(r(327));if(d!==null){if(d===l.current)throw Error(r(177));if(I=d.lanes|d.childLanes,I|=$d,ur(l,f,I,B,Y,de),l===Yr&&(or=Yr=null,dr=0),yh=d,Ju=l,su=f,J_=I,e0=T,kb=g,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,jT(vn,function(){return o0(),null})):(l.callbackNode=null,l.callbackPriority=0),g=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||g){g=z.T,z.T=null,T=ie.p,ie.p=2,B=wr,wr|=4;try{LT(l,d,f)}finally{wr=B,ie.p=T,z.T=g}}Xi=1,i0(),a0(),wm()}}function i0(){if(Xi===1){Xi=0;var l=Ju,d=yh,f=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||f){f=z.T,z.T=null;var g=ie.p;ie.p=2;var T=wr;wr|=4;try{Ib(d,l);var I=_0,B=jE(l.containerInfo),Y=I.focusedElem,de=I.selectionRange;if(B!==Y&&Y&&Y.ownerDocument&&zE(Y.ownerDocument.documentElement,Y)){if(de!==null&&t_(Y)){var Ae=de.start,He=de.end;if(He===void 0&&(He=Ae),"selectionStart"in Y)Y.selectionStart=Ae,Y.selectionEnd=Math.min(He,Y.value.length);else{var Ke=Y.ownerDocument||document,Me=Ke&&Ke.defaultView||window;if(Me.getSelection){var ke=Me.getSelection(),Wt=Y.textContent.length,Sn=Math.min(de.start,Wt),zr=de.end===void 0?Sn:Math.min(de.end,Wt);!ke.extend&&Sn>zr&&(B=zr,zr=Sn,Sn=B);var be=VE(Y,Sn),ve=VE(Y,zr);if(be&&ve&&(ke.rangeCount!==1||ke.anchorNode!==be.node||ke.anchorOffset!==be.offset||ke.focusNode!==ve.node||ke.focusOffset!==ve.offset)){var Ne=Ke.createRange();Ne.setStart(be.node,be.offset),ke.removeAllRanges(),Sn>zr?(ke.addRange(Ne),ke.extend(ve.node,ve.offset)):(Ne.setEnd(ve.node,ve.offset),ke.addRange(Ne))}}}}for(Ke=[],ke=Y;ke=ke.parentNode;)ke.nodeType===1&&Ke.push({element:ke,left:ke.scrollLeft,top:ke.scrollTop});for(typeof Y.focus=="function"&&Y.focus(),Y=0;Y<Ke.length;Y++){var je=Ke[Y];je.element.scrollLeft=je.left,je.element.scrollTop=je.top}}zm=!!Ev,_0=Ev=null}finally{wr=T,ie.p=g,z.T=f}}l.current=d,Xi=2}}function a0(){if(Xi===2){Xi=0;var l=Ju,d=yh,f=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||f){f=z.T,z.T=null;var g=ie.p;ie.p=2;var T=wr;wr|=4;try{q_(l,d.alternate,d)}finally{wr=T,ie.p=g,z.T=f}}Xi=3}}function wm(){if(Xi===4||Xi===3){Xi=0,vt();var l=Ju,d=yh,f=su,g=kb;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?Xi=5:(Xi=0,yh=Ju=null,s0(l,l.pendingLanes));var T=l.pendingLanes;if(T===0&&(Zu=null),cr(f),d=d.stateNode,Gt&&typeof Gt.onCommitFiberRoot=="function")try{Gt.onCommitFiberRoot(Zt,d,void 0,(d.current.flags&128)===128)}catch{}if(g!==null){d=z.T,T=ie.p,ie.p=2,z.T=null;try{for(var I=l.onRecoverableError,B=0;B<g.length;B++){var Y=g[B];I(Y.value,{componentStack:Y.stack})}}finally{z.T=d,ie.p=T}}(su&3)!==0&&vv(),bl(l),T=l.pendingLanes,(f&261930)!==0&&(T&42)!==0?l===t0?dv++:(dv=0,t0=l):dv=0,mv(0)}}function s0(l,d){(l.pooledCacheLanes&=d)===0&&(d=l.pooledCache,d!=null&&(l.pooledCache=null,Df(d)))}function vv(){return i0(),a0(),wm(),o0()}function o0(){if(Xi!==5)return!1;var l=Ju,d=J_;J_=0;var f=cr(su),g=z.T,T=ie.p;try{ie.p=32>f?32:f,z.T=null,f=e0,e0=null;var I=Ju,B=su;if(Xi=0,yh=Ju=null,su=0,(wr&6)!==0)throw Error(r(331));var Y=wr;if(wr|=4,Ub(I.current),Rb(I,I.current,B,f),wr=Y,mv(0,!1),Gt&&typeof Gt.onPostCommitFiberRoot=="function")try{Gt.onPostCommitFiberRoot(Zt,I)}catch{}return!0}finally{ie.p=T,z.T=g,s0(l,d)}}function l0(l,d,f){d=Cs(f,d),d=U_(l.stateNode,d,2),l=xo(l,d,2),l!==null&&(En(l,2),bl(l))}function Pr(l,d,f){if(l.tag===3)l0(l,l,f);else for(;d!==null;){if(d.tag===3){l0(d,l,f);break}else if(d.tag===1){var g=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Zu===null||!Zu.has(g))){l=Cs(f,l),f=_l(2),g=xo(d,f,2),g!==null&&(fm(f,g,d,l),En(g,2),bl(g));break}}d=d.return}}function u0(l,d,f){var g=l.pingCache;if(g===null){g=l.pingCache=new FT;var T=new Set;g.set(d,T)}else T=g.get(d),T===void 0&&(T=new Set,g.set(d,T));T.has(f)||(Q_=!0,T.add(f),l=VT.bind(null,l,d,f),d.then(l,l))}function VT(l,d,f){var g=l.pingCache;g!==null&&g.delete(d),l.pingedLanes|=l.suspendedLanes&f,l.warmLanes&=~f,Yr===l&&(dr&f)===f&&(vi===4||vi===3&&(dr&62914560)===dr&&300>_t()-cv?(wr&2)===0&&Eh(l,0):X_|=f,_h===dr&&(_h=0)),bl(l)}function pv(l,d){d===0&&(d=gn()),l=fl(l,d),l!==null&&(En(l,d),bl(l))}function Rm(l){var d=l.memoizedState,f=0;d!==null&&(f=d.retryLane),pv(l,f)}function zT(l,d){var f=0;switch(l.tag){case 31:case 13:var g=l.stateNode,T=l.memoizedState;T!==null&&(f=T.retryLane);break;case 19:g=l.stateNode;break;case 22:g=l.stateNode._retryCache;break;default:throw Error(r(314))}g!==null&&g.delete(d),pv(l,f)}function jT(l,d){return st(l,d)}var Ch=null,Qc=null,c0=!1,Om=!1,d0=!1,ec=0;function bl(l){l!==Qc&&l.next===null&&(Qc===null?Ch=Qc=l:Qc=Qc.next=l),Om=!0,c0||(c0=!0,$T())}function mv(l,d){if(!d0&&Om){d0=!0;do for(var f=!1,g=Ch;g!==null;){if(l!==0){var T=g.pendingLanes;if(T===0)var I=0;else{var B=g.suspendedLanes,Y=g.pingedLanes;I=(1<<31-Lt(42|l)+1)-1,I&=T&~(B&~Y),I=I&201326741?I&201326741|1:I?I|2:0}I!==0&&(f=!0,Qb(g,I))}else I=dr,I=it(g,g===Yr?I:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(I&3)===0||St(g,I)||(f=!0,Qb(g,I));g=g.next}while(f);d0=!1}}function qT(){Kb()}function Kb(){Om=c0=!1;var l=0;ec!==0&&YT()&&(l=ec);for(var d=_t(),f=null,g=Ch;g!==null;){var T=g.next,I=Yb(g,d);I===0?(g.next=null,f===null?Ch=T:f.next=T,T===null&&(Qc=f)):(f=g,(l!==0||(I&3)!==0)&&(Om=!0)),g=T}Xi!==0&&Xi!==5||mv(l),ec!==0&&(ec=0)}function Yb(l,d){for(var f=l.suspendedLanes,g=l.pingedLanes,T=l.expirationTimes,I=l.pendingLanes&-62914561;0<I;){var B=31-Lt(I),Y=1<<B,de=T[B];de===-1?((Y&f)===0||(Y&g)!==0)&&(T[B]=bt(Y,d)):de<=d&&(l.expiredLanes|=Y),I&=~Y}if(d=Yr,f=dr,f=it(l,l===d?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),g=l.callbackNode,f===0||l===d&&(kr===2||kr===9)||l.cancelPendingCommit!==null)return g!==null&&g!==null&&ft(g),l.callbackNode=null,l.callbackPriority=0;if((f&3)===0||St(l,f)){if(d=f&-f,d===l.callbackPriority)return d;switch(g!==null&&ft(g),cr(f)){case 2:case 8:f=Ft;break;case 32:f=vn;break;case 268435456:f=Nn;break;default:f=vn}return g=Wb.bind(null,l),f=st(f,g),l.callbackPriority=d,l.callbackNode=f,d}return g!==null&&g!==null&&ft(g),l.callbackPriority=2,l.callbackNode=null,2}function Wb(l,d){if(Xi!==0&&Xi!==5)return l.callbackNode=null,l.callbackPriority=0,null;var f=l.callbackNode;if(vv()&&l.callbackNode!==f)return null;var g=dr;return g=it(l,l===Yr?g:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),g===0?null:(Fb(l,g,d),Yb(l,_t()),l.callbackNode!=null&&l.callbackNode===f?Wb.bind(null,l):null)}function Qb(l,d){if(vv())return null;Fb(l,d,!0)}function $T(){a1(function(){(wr&6)!==0?st(Et,qT):Kb()})}function Ds(){if(ec===0){var l=Jd;l===0&&(l=Rt,Rt<<=1,(Rt&261888)===0&&(Rt=256)),ec=l}return ec}function Xb(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:dl(""+l)}function Zb(l,d){var f=d.ownerDocument.createElement("input");return f.name=d.name,f.value=d.value,l.id&&f.setAttribute("form",l.id),d.parentNode.insertBefore(f,d),l=new FormData(l),f.parentNode.removeChild(f),l}function Xc(l,d,f,g,T){if(d==="submit"&&f&&f.stateNode===T){var I=Xb((T[Tt]||null).action),B=g.submitter;B&&(d=(d=B[Tt]||null)?Xb(d.formAction):B.getAttribute("formAction"),d!==null&&(I=d,B=null));var Y=new xu("action","action",null,g,T);l.push({event:Y,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(ec!==0){var de=B?Zb(T,B):new FormData(T);$u(f,{pending:!0,data:de,method:T.method,action:I},null,de)}}else typeof I=="function"&&(Y.preventDefault(),de=B?Zb(T,B):new FormData(T),$u(f,{pending:!0,data:de,method:T.method,action:I},I,de))},currentTarget:T}]})}}for(var Bn=0;Bn<Hp.length;Bn++){var h0=Hp[Bn],os=h0.toLowerCase(),Li=h0[0].toUpperCase()+h0.slice(1);Za(os,"on"+Li)}Za(bs,"onAnimationEnd"),Za(Mf,"onAnimationIteration"),Za(qE,"onAnimationStart"),Za("dblclick","onDoubleClick"),Za("focusin","onFocus"),Za("focusout","onBlur"),Za(jd,"onTransitionRun"),Za(Fp,"onTransitionStart"),Za(Bp,"onTransitionCancel"),Za(Dr,"onTransitionEnd"),on("onMouseEnter",["mouseout","mouseover"]),on("onMouseLeave",["mouseout","mouseover"]),on("onPointerEnter",["pointerout","pointerover"]),on("onPointerLeave",["pointerout","pointerover"]),Ot("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ot("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ot("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ot("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ot("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ot("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gv="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tc=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(gv));function Jb(l,d){d=(d&4)!==0;for(var f=0;f<l.length;f++){var g=l[f],T=g.event;g=g.listeners;e:{var I=void 0;if(d)for(var B=g.length-1;0<=B;B--){var Y=g[B],de=Y.instance,Ae=Y.currentTarget;if(Y=Y.listener,de!==I&&T.isPropagationStopped())break e;I=Y,T.currentTarget=Ae;try{I(T)}catch(He){Gp(He)}T.currentTarget=null,I=de}else for(B=0;B<g.length;B++){if(Y=g[B],de=Y.instance,Ae=Y.currentTarget,Y=Y.listener,de!==I&&T.isPropagationStopped())break e;I=Y,T.currentTarget=Ae;try{I(T)}catch(He){Gp(He)}T.currentTarget=null,I=de}}}}function lr(l,d){var f=d[tn];f===void 0&&(f=d[tn]=new Set);var g=l+"__bubble";f.has(g)||(Um(d,l,2,!1),f.add(g))}function f0(l,d,f){var g=0;d&&(g|=4),Um(f,l,g,d)}var Dm="_reactListening"+Math.random().toString(36).slice(2);function v0(l){if(!l[Dm]){l[Dm]=!0,_r.forEach(function(f){f!=="selectionchange"&&(tc.has(f)||f0(f,!1,l),f0(f,!0,l))});var d=l.nodeType===9?l:l.ownerDocument;d===null||d[Dm]||(d[Dm]=!0,f0("selectionchange",!1,d))}}function Um(l,d,f,g){switch(N1(d)){case 2:var T=l2;break;case 8:T=u2;break;default:T=A0}f=T.bind(null,d,f,l),T=void 0,!wc||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(T=!0),g?T!==void 0?l.addEventListener(d,f,{capture:!0,passive:T}):l.addEventListener(d,f,!0):T!==void 0?l.addEventListener(d,f,{passive:T}):l.addEventListener(d,f,!1)}function p0(l,d,f,g,T){var I=g;if((d&1)===0&&(d&2)===0&&g!==null)e:for(;;){if(g===null)return;var B=g.tag;if(B===3||B===4){var Y=g.stateNode.containerInfo;if(Y===T)break;if(B===4)for(B=g.return;B!==null;){var de=B.tag;if((de===3||de===4)&&B.stateNode.containerInfo===T)return;B=B.return}for(;Y!==null;){if(B=Pe(Y),B===null)return;if(de=B.tag,de===5||de===6||de===26||de===27){g=I=B;continue e}Y=Y.parentNode}}g=g.return}yf(function(){var Ae=I,He=Gl(f),Ke=[];e:{var Me=$E.get(l);if(Me!==void 0){var ke=xu,Wt=l;switch(l){case"keypress":if(Rc(f)===0)break e;case"keydown":case"keyup":ke=Lu;break;case"focusin":Wt="focus",ke=Dc;break;case"focusout":Wt="blur",ke=Dc;break;case"beforeblur":case"afterblur":ke=Dc;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ke=Oc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ke=Cf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ke=gT;break;case bs:case Mf:case qE:ke=Sf;break;case Dr:ke=yT;break;case"scroll":case"scrollend":ke=bf;break;case"wheel":ke=Rp;break;case"copy":case"cut":case"paste":ke=$t;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ke=LE;break;case"toggle":case"beforetoggle":ke=ET}var Sn=(d&4)!==0,zr=!Sn&&(l==="scroll"||l==="scrollend"),be=Sn?Me!==null?Me+"Capture":null:Me;Sn=[];for(var ve=Ae,Ne;ve!==null;){var je=ve;if(Ne=je.stateNode,je=je.tag,je!==5&&je!==26&&je!==27||Ne===null||be===null||(je=Jr(ve,be),je!=null&&Sn.push(Us(ve,je,Ne))),zr)break;ve=ve.return}0<Sn.length&&(Me=new ke(Me,Wt,null,f,He),Ke.push({event:Me,listeners:Sn}))}}if((d&7)===0){e:{if(Me=l==="mouseover"||l==="pointerover",ke=l==="mouseout"||l==="pointerout",Me&&f!==Hl&&(Wt=f.relatedTarget||f.fromElement)&&(Pe(Wt)||Wt[We]))break e;if((ke||Me)&&(Me=He.window===He?He:(Me=He.ownerDocument)?Me.defaultView||Me.parentWindow:window,ke?(Wt=f.relatedTarget||f.toElement,ke=Ae,Wt=Wt?Pe(Wt):null,Wt!==null&&(zr=a(Wt),Sn=Wt.tag,Wt!==zr||Sn!==5&&Sn!==27&&Sn!==6)&&(Wt=null)):(ke=null,Wt=Ae),ke!==Wt)){if(Sn=Oc,je="onMouseLeave",be="onMouseEnter",ve="mouse",(l==="pointerout"||l==="pointerover")&&(Sn=LE,je="onPointerLeave",be="onPointerEnter",ve="pointer"),zr=ke==null?Me:rn(ke),Ne=Wt==null?Me:rn(Wt),Me=new Sn(je,ve+"leave",ke,f,He),Me.target=zr,Me.relatedTarget=Ne,je=null,Pe(He)===Ae&&(Sn=new Sn(be,ve+"enter",Wt,f,He),Sn.target=Ne,Sn.relatedTarget=zr,je=Sn),zr=je,ke&&Wt)t:{for(Sn=xm,be=ke,ve=Wt,Ne=0,je=be;je;je=Sn(je))Ne++;je=0;for(var _n=ve;_n;_n=Sn(_n))je++;for(;0<Ne-je;)be=Sn(be),Ne--;for(;0<je-Ne;)ve=Sn(ve),je--;for(;Ne--;){if(be===ve||ve!==null&&be===ve.alternate){Sn=be;break t}be=Sn(be),ve=Sn(ve)}Sn=null}else Sn=null;ke!==null&&ci(Ke,Me,ke,Sn,!1),Wt!==null&&zr!==null&&ci(Ke,zr,Wt,Sn,!0)}}e:{if(Me=Ae?rn(Ae):window,ke=Me.nodeName&&Me.nodeName.toLowerCase(),ke==="select"||ke==="input"&&Me.type==="file")var Tr=HE;else if(Qg(Me))if(Lc)Tr=TT;else{Tr=CT;var sn=kp}else ke=Me.nodeName,!ke||ke.toLowerCase()!=="input"||Me.type!=="checkbox"&&Me.type!=="radio"?Ae&&Js(Ae.elementType)&&(Tr=HE):Tr=ST;if(Tr&&(Tr=Tr(l,Ae))){Xg(Ke,Tr,f,He);break e}sn&&sn(l,Me,Ae),l==="focusout"&&Ae&&Me.type==="number"&&Ae.memoizedProps.value!=null&&Ic(Me,"number",Me.value)}switch(sn=Ae?rn(Ae):window,l){case"focusin":(Qg(sn)||sn.contentEditable==="true")&&(ye=sn,Be=Ae,Oe=null);break;case"focusout":Oe=Be=ye=null;break;case"mousedown":qt=!0;break;case"contextmenu":case"mouseup":case"dragend":qt=!1,Fn(Ke,f,He);break;case"selectionchange":if(zd)break;case"keydown":case"keyup":Fn(Ke,f,He)}var Qn;if(Op)e:{switch(l){case"compositionstart":var hr="onCompositionStart";break e;case"compositionend":hr="onCompositionEnd";break e;case"compositionupdate":hr="onCompositionUpdate";break e}hr=void 0}else xc?Up(l,f)&&(hr="onCompositionEnd"):l==="keydown"&&f.keyCode===229&&(hr="onCompositionStart");hr&&(Yg&&f.locale!=="ko"&&(xc||hr!=="onCompositionStart"?hr==="onCompositionEnd"&&xc&&(Qn=Ir()):(ys=He,Du="value"in ys?ys.value:ys.textContent,xc=!0)),sn=_v(Ae,hr),0<sn.length&&(hr=new _e(hr,l,null,f,He),Ke.push({event:hr,listeners:sn}),Qn?hr.data=Qn:(Qn=BE(f),Qn!==null&&(hr.data=Qn)))),(Qn=Kg?Es(l,f):Wg(l,f))&&(hr=_v(Ae,"onBeforeInput"),0<hr.length&&(sn=new _e("onBeforeInput","beforeinput",null,f,He),Ke.push({event:sn,listeners:hr}),sn.data=Qn)),Xc(Ke,l,Ae,f,He)}Jb(Ke,d)})}function Us(l,d,f){return{instance:l,listener:d,currentTarget:f}}function _v(l,d){for(var f=d+"Capture",g=[];l!==null;){var T=l,I=T.stateNode;if(T=T.tag,T!==5&&T!==26&&T!==27||I===null||(T=Jr(l,f),T!=null&&g.unshift(Us(l,T,I)),T=Jr(l,d),T!=null&&g.push(Us(l,T,I))),l.tag===3)return g;l=l.return}return[]}function xm(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function ci(l,d,f,g,T){for(var I=d._reactName,B=[];f!==null&&f!==g;){var Y=f,de=Y.alternate,Ae=Y.stateNode;if(Y=Y.tag,de!==null&&de===g)break;Y!==5&&Y!==26&&Y!==27||Ae===null||(de=Ae,T?(Ae=Jr(f,I),Ae!=null&&B.unshift(Us(f,Ae,de))):T||(Ae=Jr(f,I),Ae!=null&&B.push(Us(f,Ae,de)))),f=f.return}B.length!==0&&l.push({event:d,listeners:B})}var Ci=/\r\n?/g,e1=/\u0000|\uFFFD/g;function t1(l){return(typeof l=="string"?l:""+l).replace(Ci,`
`).replace(e1,"")}function n1(l,d){return d=t1(d),t1(l)===d}function Vr(l,d,f,g,T,I){switch(f){case"children":typeof g=="string"?d==="body"||d==="textarea"&&g===""||Ua(l,g):(typeof g=="number"||typeof g=="bigint")&&d!=="body"&&Ua(l,""+g);break;case"className":Zr(l,"class",g);break;case"tabIndex":Zr(l,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":Zr(l,f,g);break;case"style":ll(l,g,I);break;case"data":if(d!=="object"){Zr(l,"data",g);break}case"src":case"href":if(g===""&&(d!=="a"||f!=="href")){l.removeAttribute(f);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){l.removeAttribute(f);break}g=dl(""+g),l.setAttribute(f,g);break;case"action":case"formAction":if(typeof g=="function"){l.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof I=="function"&&(f==="formAction"?(d!=="input"&&Vr(l,d,"name",T.name,T,null),Vr(l,d,"formEncType",T.formEncType,T,null),Vr(l,d,"formMethod",T.formMethod,T,null),Vr(l,d,"formTarget",T.formTarget,T,null)):(Vr(l,d,"encType",T.encType,T,null),Vr(l,d,"method",T.method,T,null),Vr(l,d,"target",T.target,T,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){l.removeAttribute(f);break}g=dl(""+g),l.setAttribute(f,g);break;case"onClick":g!=null&&(l.onclick=xa);break;case"onScroll":g!=null&&lr("scroll",l);break;case"onScrollEnd":g!=null&&lr("scrollend",l);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(f=g.__html,f!=null){if(T.children!=null)throw Error(r(60));l.innerHTML=f}}break;case"multiple":l.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":l.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){l.removeAttribute("xlink:href");break}f=dl(""+g),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(f,""+g):l.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(f,""):l.removeAttribute(f);break;case"capture":case"download":g===!0?l.setAttribute(f,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(f,g):l.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?l.setAttribute(f,g):l.removeAttribute(f);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?l.removeAttribute(f):l.setAttribute(f,g);break;case"popover":lr("beforetoggle",l),lr("toggle",l),Di(l,"popover",g);break;case"xlinkActuate":Wi(l,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":Wi(l,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":Wi(l,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":Wi(l,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":Wi(l,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":Wi(l,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":Wi(l,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":Wi(l,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":Wi(l,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":Di(l,"is",g);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=ul.get(f)||f,Di(l,f,g))}}function m0(l,d,f,g,T,I){switch(f){case"style":ll(l,g,I);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(f=g.__html,f!=null){if(T.children!=null)throw Error(r(60));l.innerHTML=f}}break;case"children":typeof g=="string"?Ua(l,g):(typeof g=="number"||typeof g=="bigint")&&Ua(l,""+g);break;case"onScroll":g!=null&&lr("scroll",l);break;case"onScrollEnd":g!=null&&lr("scrollend",l);break;case"onClick":g!=null&&(l.onclick=xa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Cr.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(T=f.endsWith("Capture"),d=f.slice(2,T?f.length-7:void 0),I=l[Tt]||null,I=I!=null?I[f]:null,typeof I=="function"&&l.removeEventListener(d,I,T),typeof g=="function")){typeof I!="function"&&I!==null&&(f in l?l[f]=null:l.hasAttribute(f)&&l.removeAttribute(f)),l.addEventListener(d,g,T);break e}f in l?l[f]=g:g===!0?l.setAttribute(f,""):Di(l,f,g)}}}function ma(l,d,f){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":lr("error",l),lr("load",l);var g=!1,T=!1,I;for(I in f)if(f.hasOwnProperty(I)){var B=f[I];if(B!=null)switch(I){case"src":g=!0;break;case"srcSet":T=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:Vr(l,d,I,B,f,null)}}T&&Vr(l,d,"srcSet",f.srcSet,f,null),g&&Vr(l,d,"src",f.src,f,null);return;case"input":lr("invalid",l);var Y=I=B=T=null,de=null,Ae=null;for(g in f)if(f.hasOwnProperty(g)){var He=f[g];if(He!=null)switch(g){case"name":T=He;break;case"type":B=He;break;case"checked":de=He;break;case"defaultChecked":Ae=He;break;case"value":I=He;break;case"defaultValue":Y=He;break;case"children":case"dangerouslySetInnerHTML":if(He!=null)throw Error(r(137,d));break;default:Vr(l,d,g,He,f,null)}}Fl(l,I,Y,de,Ae,B,T,!1);return;case"select":lr("invalid",l),g=B=I=null;for(T in f)if(f.hasOwnProperty(T)&&(Y=f[T],Y!=null))switch(T){case"value":I=Y;break;case"defaultValue":B=Y;break;case"multiple":g=Y;default:Vr(l,d,T,Y,f,null)}d=I,f=B,l.multiple=!!g,d!=null?Io(l,!!g,d,!1):f!=null&&Io(l,!!g,f,!0);return;case"textarea":lr("invalid",l),I=T=g=null;for(B in f)if(f.hasOwnProperty(B)&&(Y=f[B],Y!=null))switch(B){case"value":g=Y;break;case"defaultValue":T=Y;break;case"children":I=Y;break;case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(91));break;default:Vr(l,d,B,Y,f,null)}Bl(l,g,T,I);return;case"option":for(de in f)if(f.hasOwnProperty(de)&&(g=f[de],g!=null))switch(de){case"selected":l.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:Vr(l,d,de,g,f,null)}return;case"dialog":lr("beforetoggle",l),lr("toggle",l),lr("cancel",l),lr("close",l);break;case"iframe":case"object":lr("load",l);break;case"video":case"audio":for(g=0;g<gv.length;g++)lr(gv[g],l);break;case"image":lr("error",l),lr("load",l);break;case"details":lr("toggle",l);break;case"embed":case"source":case"link":lr("error",l),lr("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ae in f)if(f.hasOwnProperty(Ae)&&(g=f[Ae],g!=null))switch(Ae){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:Vr(l,d,Ae,g,f,null)}return;default:if(Js(d)){for(He in f)f.hasOwnProperty(He)&&(g=f[He],g!==void 0&&m0(l,d,He,g,f,void 0));return}}for(Y in f)f.hasOwnProperty(Y)&&(g=f[Y],g!=null&&Vr(l,d,Y,g,f,null))}function KT(l,d,f,g){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var T=null,I=null,B=null,Y=null,de=null,Ae=null,He=null;for(ke in f){var Ke=f[ke];if(f.hasOwnProperty(ke)&&Ke!=null)switch(ke){case"checked":break;case"value":break;case"defaultValue":de=Ke;default:g.hasOwnProperty(ke)||Vr(l,d,ke,null,g,Ke)}}for(var Me in g){var ke=g[Me];if(Ke=f[Me],g.hasOwnProperty(Me)&&(ke!=null||Ke!=null))switch(Me){case"type":I=ke;break;case"name":T=ke;break;case"checked":Ae=ke;break;case"defaultChecked":He=ke;break;case"value":B=ke;break;case"defaultValue":Y=ke;break;case"children":case"dangerouslySetInnerHTML":if(ke!=null)throw Error(r(137,d));break;default:ke!==Ke&&Vr(l,d,Me,ke,g,Ke)}}Zs(l,B,Y,de,Ae,He,I,T);return;case"select":ke=B=Y=Me=null;for(I in f)if(de=f[I],f.hasOwnProperty(I)&&de!=null)switch(I){case"value":break;case"multiple":ke=de;default:g.hasOwnProperty(I)||Vr(l,d,I,null,g,de)}for(T in g)if(I=g[T],de=f[T],g.hasOwnProperty(T)&&(I!=null||de!=null))switch(T){case"value":Me=I;break;case"defaultValue":Y=I;break;case"multiple":B=I;default:I!==de&&Vr(l,d,T,I,g,de)}d=Y,f=B,g=ke,Me!=null?Io(l,!!f,Me,!1):!!g!=!!f&&(d!=null?Io(l,!!f,d,!0):Io(l,!!f,f?[]:"",!1));return;case"textarea":ke=Me=null;for(Y in f)if(T=f[Y],f.hasOwnProperty(Y)&&T!=null&&!g.hasOwnProperty(Y))switch(Y){case"value":break;case"children":break;default:Vr(l,d,Y,null,g,T)}for(B in g)if(T=g[B],I=f[B],g.hasOwnProperty(B)&&(T!=null||I!=null))switch(B){case"value":Me=T;break;case"defaultValue":ke=T;break;case"children":break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:T!==I&&Vr(l,d,B,T,g,I)}Ru(l,Me,ke);return;case"option":for(var Wt in f)if(Me=f[Wt],f.hasOwnProperty(Wt)&&Me!=null&&!g.hasOwnProperty(Wt))switch(Wt){case"selected":l.selected=!1;break;default:Vr(l,d,Wt,null,g,Me)}for(de in g)if(Me=g[de],ke=f[de],g.hasOwnProperty(de)&&Me!==ke&&(Me!=null||ke!=null))switch(de){case"selected":l.selected=Me&&typeof Me!="function"&&typeof Me!="symbol";break;default:Vr(l,d,de,Me,g,ke)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Sn in f)Me=f[Sn],f.hasOwnProperty(Sn)&&Me!=null&&!g.hasOwnProperty(Sn)&&Vr(l,d,Sn,null,g,Me);for(Ae in g)if(Me=g[Ae],ke=f[Ae],g.hasOwnProperty(Ae)&&Me!==ke&&(Me!=null||ke!=null))switch(Ae){case"children":case"dangerouslySetInnerHTML":if(Me!=null)throw Error(r(137,d));break;default:Vr(l,d,Ae,Me,g,ke)}return;default:if(Js(d)){for(var zr in f)Me=f[zr],f.hasOwnProperty(zr)&&Me!==void 0&&!g.hasOwnProperty(zr)&&m0(l,d,zr,void 0,g,Me);for(He in g)Me=g[He],ke=f[He],!g.hasOwnProperty(He)||Me===ke||Me===void 0&&ke===void 0||m0(l,d,He,Me,g,ke);return}}for(var be in f)Me=f[be],f.hasOwnProperty(be)&&Me!=null&&!g.hasOwnProperty(be)&&Vr(l,d,be,null,g,Me);for(Ke in g)Me=g[Ke],ke=f[Ke],!g.hasOwnProperty(Ke)||Me===ke||Me==null&&ke==null||Vr(l,d,Ke,Me,g,ke)}function g0(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function yv(){if(typeof performance.getEntriesByType=="function"){for(var l=0,d=0,f=performance.getEntriesByType("resource"),g=0;g<f.length;g++){var T=f[g],I=T.transferSize,B=T.initiatorType,Y=T.duration;if(I&&Y&&g0(B)){for(B=0,Y=T.responseEnd,g+=1;g<f.length;g++){var de=f[g],Ae=de.startTime;if(Ae>Y)break;var He=de.transferSize,Ke=de.initiatorType;He&&g0(Ke)&&(de=de.responseEnd,B+=He*(de<Y?1:(Y-Ae)/(de-Ae)))}if(--g,d+=8*(I+B)/(T.duration/1e3),l++,10<l)break}}if(0<l)return d/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var Ev=null,_0=null;function bv(l){return l.nodeType===9?l:l.ownerDocument}function Cv(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ls(l,d){if(l===0)switch(d){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&d==="foreignObject"?0:l}function nc(l,d){return l==="textarea"||l==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.children=="bigint"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var y0=null;function YT(){var l=window.event;return l&&l.type==="popstate"?l===y0?!1:(y0=l,!0):(y0=null,!1)}var r1=typeof setTimeout=="function"?setTimeout:void 0,WT=typeof clearTimeout=="function"?clearTimeout:void 0,i1=typeof Promise=="function"?Promise:void 0,a1=typeof queueMicrotask=="function"?queueMicrotask:typeof i1<"u"?function(l){return i1.resolve(null).then(l).catch(lu)}:r1;function lu(l){setTimeout(function(){throw l})}function Rn(l){return l==="head"}function E0(l,d){var f=d,g=0;do{var T=f.nextSibling;if(l.removeChild(f),T&&T.nodeType===8)if(f=T.data,f==="/$"||f==="/&"){if(g===0){l.removeChild(T),Oh(d);return}g--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")g++;else if(f==="html")Sv(l.ownerDocument.documentElement);else if(f==="head"){f=l.ownerDocument.head,Sv(f);for(var I=f.firstChild;I;){var B=I.nextSibling,Y=I.nodeName;I[mt]||Y==="SCRIPT"||Y==="STYLE"||Y==="LINK"&&I.rel.toLowerCase()==="stylesheet"||f.removeChild(I),I=B}}else f==="body"&&Sv(l.ownerDocument.body);f=T}while(f);Oh(d)}function xs(l,d){var f=l;l=0;do{var g=f.nextSibling;if(f.nodeType===1?d?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(d?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),g&&g.nodeType===8)if(f=g.data,f==="/$"){if(l===0)break;l--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||l++;f=g}while(f)}function Lm(l){var d=l.firstChild;for(d&&d.nodeType===10&&(d=d.nextSibling);d;){var f=d;switch(d=d.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":Lm(f),oe(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}l.removeChild(f)}}function QT(l,d,f,g){for(;l.nodeType===1;){var T=f;if(l.nodeName.toLowerCase()!==d.toLowerCase()){if(!g&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(g){if(!l[mt])switch(d){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(I=l.getAttribute("rel"),I==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(I!==T.rel||l.getAttribute("href")!==(T.href==null||T.href===""?null:T.href)||l.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin)||l.getAttribute("title")!==(T.title==null?null:T.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(I=l.getAttribute("src"),(I!==(T.src==null?null:T.src)||l.getAttribute("type")!==(T.type==null?null:T.type)||l.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin))&&I&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(d==="input"&&l.type==="hidden"){var I=T.name==null?null:""+T.name;if(T.type==="hidden"&&l.getAttribute("name")===I)return l}else return l;if(l=fo(l.nextSibling),l===null)break}return null}function xr(l,d,f){if(d==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!f||(l=fo(l.nextSibling),l===null))return null;return l}function s1(l,d){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!d||(l=fo(l.nextSibling),l===null))return null;return l}function km(l){return l.data==="$?"||l.data==="$~"}function Sh(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function XT(l,d){var f=l.ownerDocument;if(l.data==="$~")l._reactRetry=d;else if(l.data!=="$?"||f.readyState!=="loading")d();else{var g=function(){d(),f.removeEventListener("DOMContentLoaded",g)};f.addEventListener("DOMContentLoaded",g),l._reactRetry=g}}function fo(l){for(;l!=null;l=l.nextSibling){var d=l.nodeType;if(d===1||d===3)break;if(d===8){if(d=l.data,d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"||d==="F!"||d==="F")break;if(d==="/$"||d==="/&")return null}}return l}var b0=null;function o1(l){l=l.nextSibling;for(var d=0;l;){if(l.nodeType===8){var f=l.data;if(f==="/$"||f==="/&"){if(d===0)return fo(l.nextSibling);d--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||d++}l=l.nextSibling}return null}function l1(l){l=l.previousSibling;for(var d=0;l;){if(l.nodeType===8){var f=l.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(d===0)return l;d--}else f!=="/$"&&f!=="/&"||d++}l=l.previousSibling}return null}function u1(l,d,f){switch(d=bv(f),l){case"html":if(l=d.documentElement,!l)throw Error(r(452));return l;case"head":if(l=d.head,!l)throw Error(r(453));return l;case"body":if(l=d.body,!l)throw Error(r(454));return l;default:throw Error(r(451))}}function Sv(l){for(var d=l.attributes;d.length;)l.removeAttributeNode(d[0]);oe(l)}var vo=new Map,c1=new Set;function Pm(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var uu=ie.d;ie.d={f:ZT,r:JT,D:C0,C:e2,L:t2,m:n2,X:us,S:la,M:r2};function ZT(){var l=uu.f(),d=Am();return l||d}function JT(l){var d=ut(l);d!==null&&d.tag===5&&d.type==="form"?A_(d):uu.r(l)}var rc=typeof document>"u"?null:document;function d1(l,d,f){var g=rc;if(g&&typeof d=="string"&&d){var T=aa(d);T='link[rel="'+l+'"][href="'+T+'"]',typeof f=="string"&&(T+='[crossorigin="'+f+'"]'),c1.has(T)||(c1.add(T),l={rel:l,crossOrigin:f,href:d},g.querySelector(T)===null&&(d=g.createElement("link"),ma(d,"link",l),an(d),g.head.appendChild(d)))}}function C0(l){uu.D(l),d1("dns-prefetch",l,null)}function e2(l,d){uu.C(l,d),d1("preconnect",l,d)}function t2(l,d,f){uu.L(l,d,f);var g=rc;if(g&&l&&d){var T='link[rel="preload"][as="'+aa(d)+'"]';d==="image"&&f&&f.imageSrcSet?(T+='[imagesrcset="'+aa(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(T+='[imagesizes="'+aa(f.imageSizes)+'"]')):T+='[href="'+aa(l)+'"]';var I=T;switch(d){case"style":I=Th(l);break;case"script":I=Ah(l)}vo.has(I)||(l=p({rel:"preload",href:d==="image"&&f&&f.imageSrcSet?void 0:l,as:d},f),vo.set(I,l),g.querySelector(T)!==null||d==="style"&&g.querySelector(Nh(I))||d==="script"&&g.querySelector(Mh(I))||(d=g.createElement("link"),ma(d,"link",l),an(d),g.head.appendChild(d)))}}function n2(l,d){uu.m(l,d);var f=rc;if(f&&l){var g=d&&typeof d.as=="string"?d.as:"script",T='link[rel="modulepreload"][as="'+aa(g)+'"][href="'+aa(l)+'"]',I=T;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":I=Ah(l)}if(!vo.has(I)&&(l=p({rel:"modulepreload",href:l},d),vo.set(I,l),f.querySelector(T)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(Mh(I)))return}g=f.createElement("link"),ma(g,"link",l),an(g),f.head.appendChild(g)}}}function la(l,d,f){uu.S(l,d,f);var g=rc;if(g&&l){var T=wn(g).hoistableStyles,I=Th(l);d=d||"default";var B=T.get(I);if(!B){var Y={loading:0,preload:null};if(B=g.querySelector(Nh(I)))Y.loading=5;else{l=p({rel:"stylesheet",href:l,"data-precedence":d},f),(f=vo.get(I))&&S0(l,f);var de=B=g.createElement("link");an(de),ma(de,"link",l),de._p=new Promise(function(Ae,He){de.onload=Ae,de.onerror=He}),de.addEventListener("load",function(){Y.loading|=1}),de.addEventListener("error",function(){Y.loading|=2}),Y.loading|=4,Fm(B,d,g)}B={type:"stylesheet",instance:B,count:1,state:Y},T.set(I,B)}}}function us(l,d){uu.X(l,d);var f=rc;if(f&&l){var g=wn(f).hoistableScripts,T=Ah(l),I=g.get(T);I||(I=f.querySelector(Mh(T)),I||(l=p({src:l,async:!0},d),(d=vo.get(T))&&Bm(l,d),I=f.createElement("script"),an(I),ma(I,"link",l),f.head.appendChild(I)),I={type:"script",instance:I,count:1,state:null},g.set(T,I))}}function r2(l,d){uu.M(l,d);var f=rc;if(f&&l){var g=wn(f).hoistableScripts,T=Ah(l),I=g.get(T);I||(I=f.querySelector(Mh(T)),I||(l=p({src:l,async:!0,type:"module"},d),(d=vo.get(T))&&Bm(l,d),I=f.createElement("script"),an(I),ma(I,"link",l),f.head.appendChild(I)),I={type:"script",instance:I,count:1,state:null},g.set(T,I))}}function h1(l,d,f,g){var T=(T=Ee.current)?Pm(T):null;if(!T)throw Error(r(446));switch(l){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(d=Th(f.href),f=wn(T).hoistableStyles,g=f.get(d),g||(g={type:"style",instance:null,count:0,state:null},f.set(d,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){l=Th(f.href);var I=wn(T).hoistableStyles,B=I.get(l);if(B||(T=T.ownerDocument||T,B={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},I.set(l,B),(I=T.querySelector(Nh(l)))&&!I._p&&(B.instance=I,B.state.loading=5),vo.has(l)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},vo.set(l,f),I||i2(T,l,f,B.state))),d&&g===null)throw Error(r(528,""));return B}if(d&&g!==null)throw Error(r(529,""));return null;case"script":return d=f.async,f=f.src,typeof f=="string"&&d&&typeof d!="function"&&typeof d!="symbol"?(d=Ah(f),f=wn(T).hoistableScripts,g=f.get(d),g||(g={type:"script",instance:null,count:0,state:null},f.set(d,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,l))}}function Th(l){return'href="'+aa(l)+'"'}function Nh(l){return'link[rel="stylesheet"]['+l+"]"}function f1(l){return p({},l,{"data-precedence":l.precedence,precedence:null})}function i2(l,d,f,g){l.querySelector('link[rel="preload"][as="style"]['+d+"]")?g.loading=1:(d=l.createElement("link"),g.preload=d,d.addEventListener("load",function(){return g.loading|=1}),d.addEventListener("error",function(){return g.loading|=2}),ma(d,"link",f),an(d),l.head.appendChild(d))}function Ah(l){return'[src="'+aa(l)+'"]'}function Mh(l){return"script[async]"+l}function v1(l,d,f){if(d.count++,d.instance===null)switch(d.type){case"style":var g=l.querySelector('style[data-href~="'+aa(f.href)+'"]');if(g)return d.instance=g,an(g),g;var T=p({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return g=(l.ownerDocument||l).createElement("style"),an(g),ma(g,"style",T),Fm(g,f.precedence,l),d.instance=g;case"stylesheet":T=Th(f.href);var I=l.querySelector(Nh(T));if(I)return d.state.loading|=4,d.instance=I,an(I),I;g=f1(f),(T=vo.get(T))&&S0(g,T),I=(l.ownerDocument||l).createElement("link"),an(I);var B=I;return B._p=new Promise(function(Y,de){B.onload=Y,B.onerror=de}),ma(I,"link",g),d.state.loading|=4,Fm(I,f.precedence,l),d.instance=I;case"script":return I=Ah(f.src),(T=l.querySelector(Mh(I)))?(d.instance=T,an(T),T):(g=f,(T=vo.get(I))&&(g=p({},f),Bm(g,T)),l=l.ownerDocument||l,T=l.createElement("script"),an(T),ma(T,"link",g),l.head.appendChild(T),d.instance=T);case"void":return null;default:throw Error(r(443,d.type))}else d.type==="stylesheet"&&(d.state.loading&4)===0&&(g=d.instance,d.state.loading|=4,Fm(g,f.precedence,l));return d.instance}function Fm(l,d,f){for(var g=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),T=g.length?g[g.length-1]:null,I=T,B=0;B<g.length;B++){var Y=g[B];if(Y.dataset.precedence===d)I=Y;else if(I!==T)break}I?I.parentNode.insertBefore(l,I.nextSibling):(d=f.nodeType===9?f.head:f,d.insertBefore(l,d.firstChild))}function S0(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.title==null&&(l.title=d.title)}function Bm(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.integrity==null&&(l.integrity=d.integrity)}var Tv=null;function p1(l,d,f){if(Tv===null){var g=new Map,T=Tv=new Map;T.set(f,g)}else T=Tv,g=T.get(f),g||(g=new Map,T.set(f,g));if(g.has(l))return g;for(g.set(l,null),f=f.getElementsByTagName(l),T=0;T<f.length;T++){var I=f[T];if(!(I[mt]||I[At]||l==="link"&&I.getAttribute("rel")==="stylesheet")&&I.namespaceURI!=="http://www.w3.org/2000/svg"){var B=I.getAttribute(d)||"";B=l+B;var Y=g.get(B);Y?Y.push(I):g.set(B,[I])}}return g}function m1(l,d,f){l=l.ownerDocument||l,l.head.insertBefore(f,d==="title"?l.querySelector("head > title"):null)}function a2(l,d,f){if(f===1||d.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof d.precedence!="string"||typeof d.href!="string"||d.href==="")break;return!0;case"link":if(typeof d.rel!="string"||typeof d.href!="string"||d.href===""||d.onLoad||d.onError)break;switch(d.rel){case"stylesheet":return l=d.disabled,typeof d.precedence=="string"&&l==null;default:return!0}case"script":if(d.async&&typeof d.async!="function"&&typeof d.async!="symbol"&&!d.onLoad&&!d.onError&&d.src&&typeof d.src=="string")return!0}return!1}function g1(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function Ih(l,d,f,g){if(f.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var T=Th(g.href),I=d.querySelector(Nh(T));if(I){d=I._p,d!==null&&typeof d=="object"&&typeof d.then=="function"&&(l.count++,l=Hm.bind(l),d.then(l,l)),f.state.loading|=4,f.instance=I,an(I);return}I=d.ownerDocument||d,g=f1(g),(T=vo.get(T))&&S0(g,T),I=I.createElement("link"),an(I);var B=I;B._p=new Promise(function(Y,de){B.onload=Y,B.onerror=de}),ma(I,"link",g),f.instance=I}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(f,d),(d=f.state.preload)&&(f.state.loading&3)===0&&(l.count++,f=Hm.bind(l),d.addEventListener("load",f),d.addEventListener("error",f))}}var T0=0;function s2(l,d){return l.stylesheets&&l.count===0&&Vm(l,l.stylesheets),0<l.count||0<l.imgCount?function(f){var g=setTimeout(function(){if(l.stylesheets&&Vm(l,l.stylesheets),l.unsuspend){var I=l.unsuspend;l.unsuspend=null,I()}},6e4+d);0<l.imgBytes&&T0===0&&(T0=62500*yv());var T=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&Vm(l,l.stylesheets),l.unsuspend)){var I=l.unsuspend;l.unsuspend=null,I()}},(l.imgBytes>T0?50:800)+d);return l.unsuspend=f,function(){l.unsuspend=null,clearTimeout(g),clearTimeout(T)}}:null}function Hm(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Vm(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var Gm=null;function Vm(l,d){l.stylesheets=null,l.unsuspend!==null&&(l.count++,Gm=new Map,d.forEach(_1,l),Gm=null,Hm.call(l))}function _1(l,d){if(!(d.state.loading&4)){var f=Gm.get(l);if(f)var g=f.get(null);else{f=new Map,Gm.set(l,f);for(var T=l.querySelectorAll("link[data-precedence],style[data-precedence]"),I=0;I<T.length;I++){var B=T[I];(B.nodeName==="LINK"||B.getAttribute("media")!=="not all")&&(f.set(B.dataset.precedence,B),g=B)}g&&f.set(null,g)}T=d.instance,B=T.getAttribute("data-precedence"),I=f.get(B)||g,I===g&&f.set(null,T),f.set(B,T),this.count++,g=Hm.bind(this),T.addEventListener("load",g),T.addEventListener("error",g),I?I.parentNode.insertBefore(T,I.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(T,l.firstChild)),d.state.loading|=4}}var wh={$$typeof:w,Provider:null,Consumer:null,_currentValue:se,_currentValue2:se,_threadCount:0};function o2(l,d,f,g,T,I,B,Y,de){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ct(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ct(0),this.hiddenUpdates=ct(null),this.identifierPrefix=g,this.onUncaughtError=T,this.onCaughtError=I,this.onRecoverableError=B,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=de,this.incompleteTransitions=new Map}function y1(l,d,f,g,T,I,B,Y,de,Ae,He,Ke){return l=new o2(l,d,f,B,de,Ae,He,Ke,Y),d=1,I===!0&&(d|=24),I=ha(3,null,null,d),l.current=I,I.stateNode=l,d=Oo(),d.refCount++,l.pooledCache=d,d.refCount++,I.memoizedState={element:g,isDehydrated:f,cache:d},ml(I),l}function E1(l){return l?(l=Kl,l):Kl}function b1(l,d,f,g,T,I){T=E1(T),g.context===null?g.context=T:g.pendingContext=T,g=zu(d),g.payload={element:f},I=I===void 0?null:I,I!==null&&(g.callback=I),f=xo(l,g,d),f!==null&&(ss(f,l,d),Lf(f,l,d))}function C1(l,d){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var f=l.retryLane;l.retryLane=f!==0&&f<d?f:d}}function N0(l,d){C1(l,d),(l=l.alternate)&&C1(l,d)}function S1(l){if(l.tag===13||l.tag===31){var d=fl(l,67108864);d!==null&&ss(d,l,67108864),N0(l,67108864)}}function T1(l){if(l.tag===13||l.tag===31){var d=Os();d=Pn(d);var f=fl(l,d);f!==null&&ss(f,l,d),N0(l,d)}}var zm=!0;function l2(l,d,f,g){var T=z.T;z.T=null;var I=ie.p;try{ie.p=2,A0(l,d,f,g)}finally{ie.p=I,z.T=T}}function u2(l,d,f,g){var T=z.T;z.T=null;var I=ie.p;try{ie.p=8,A0(l,d,f,g)}finally{ie.p=I,z.T=T}}function A0(l,d,f,g){if(zm){var T=M0(g);if(T===null)p0(l,d,g,jm,f),A1(l,g);else if(M1(T,l,d,f,g))g.stopPropagation();else if(A1(l,g),d&4&&-1<c2.indexOf(l)){for(;T!==null;){var I=ut(T);if(I!==null)switch(I.tag){case 3:if(I=I.stateNode,I.current.memoizedState.isDehydrated){var B=Te(I.pendingLanes);if(B!==0){var Y=I;for(Y.pendingLanes|=2,Y.entangledLanes|=2;B;){var de=1<<31-Lt(B);Y.entanglements[1]|=de,B&=~de}bl(I),(wr&6)===0&&(Wc=_t()+500,mv(0))}}break;case 31:case 13:Y=fl(I,2),Y!==null&&ss(Y,I,2),Am(),N0(I,2)}if(I=M0(g),I===null&&p0(l,d,g,jm,f),I===T)break;T=I}T!==null&&g.stopPropagation()}else p0(l,d,g,null,f)}}function M0(l){return l=Gl(l),I0(l)}var jm=null;function I0(l){if(jm=null,l=Pe(l),l!==null){var d=a(l);if(d===null)l=null;else{var f=d.tag;if(f===13){if(l=s(d),l!==null)return l;l=null}else if(f===31){if(l=o(d),l!==null)return l;l=null}else if(f===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;l=null}else d!==l&&(l=null)}}return jm=l,null}function N1(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Pt()){case Et:return 2;case Ft:return 8;case vn:case Je:return 32;case Nn:return 268435456;default:return 32}default:return 32}}var w0=!1,ic=null,ac=null,sc=null,Nv=new Map,Av=new Map,oc=[],c2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function A1(l,d){switch(l){case"focusin":case"focusout":ic=null;break;case"dragenter":case"dragleave":ac=null;break;case"mouseover":case"mouseout":sc=null;break;case"pointerover":case"pointerout":Nv.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":Av.delete(d.pointerId)}}function Zc(l,d,f,g,T,I){return l===null||l.nativeEvent!==I?(l={blockedOn:d,domEventName:f,eventSystemFlags:g,nativeEvent:I,targetContainers:[T]},d!==null&&(d=ut(d),d!==null&&S1(d)),l):(l.eventSystemFlags|=g,d=l.targetContainers,T!==null&&d.indexOf(T)===-1&&d.push(T),l)}function M1(l,d,f,g,T){switch(d){case"focusin":return ic=Zc(ic,l,d,f,g,T),!0;case"dragenter":return ac=Zc(ac,l,d,f,g,T),!0;case"mouseover":return sc=Zc(sc,l,d,f,g,T),!0;case"pointerover":var I=T.pointerId;return Nv.set(I,Zc(Nv.get(I)||null,l,d,f,g,T)),!0;case"gotpointercapture":return I=T.pointerId,Av.set(I,Zc(Av.get(I)||null,l,d,f,g,T)),!0}return!1}function R0(l){var d=Pe(l.target);if(d!==null){var f=a(d);if(f!==null){if(d=f.tag,d===13){if(d=s(f),d!==null){l.blockedOn=d,Nt(l.priority,function(){T1(f)});return}}else if(d===31){if(d=o(f),d!==null){l.blockedOn=d,Nt(l.priority,function(){T1(f)});return}}else if(d===3&&f.stateNode.current.memoizedState.isDehydrated){l.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}l.blockedOn=null}function qm(l){if(l.blockedOn!==null)return!1;for(var d=l.targetContainers;0<d.length;){var f=M0(l.nativeEvent);if(f===null){f=l.nativeEvent;var g=new f.constructor(f.type,f);Hl=g,f.target.dispatchEvent(g),Hl=null}else return d=ut(f),d!==null&&S1(d),l.blockedOn=f,!1;d.shift()}return!0}function I1(l,d,f){qm(l)&&f.delete(d)}function d2(){w0=!1,ic!==null&&qm(ic)&&(ic=null),ac!==null&&qm(ac)&&(ac=null),sc!==null&&qm(sc)&&(sc=null),Nv.forEach(I1),Av.forEach(I1)}function Rh(l,d){l.blockedOn===d&&(l.blockedOn=null,w0||(w0=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,d2)))}var $m=null;function w1(l){$m!==l&&($m=l,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){$m===l&&($m=null);for(var d=0;d<l.length;d+=3){var f=l[d],g=l[d+1],T=l[d+2];if(typeof g!="function"){if(I0(g||f)===null)continue;break}var I=ut(f);I!==null&&(l.splice(d,3),d-=3,$u(I,{pending:!0,data:T,method:f.method,action:g},g,T))}}))}function Oh(l){function d(de){return Rh(de,l)}ic!==null&&Rh(ic,l),ac!==null&&Rh(ac,l),sc!==null&&Rh(sc,l),Nv.forEach(d),Av.forEach(d);for(var f=0;f<oc.length;f++){var g=oc[f];g.blockedOn===l&&(g.blockedOn=null)}for(;0<oc.length&&(f=oc[0],f.blockedOn===null);)R0(f),f.blockedOn===null&&oc.shift();if(f=(l.ownerDocument||l).$$reactFormReplay,f!=null)for(g=0;g<f.length;g+=3){var T=f[g],I=f[g+1],B=T[Tt]||null;if(typeof I=="function")B||w1(f);else if(B){var Y=null;if(I&&I.hasAttribute("formAction")){if(T=I,B=I[Tt]||null)Y=B.formAction;else if(I0(T)!==null)continue}else Y=B.action;typeof Y=="function"?f[g+1]=Y:(f.splice(g,3),g-=3),w1(f)}}}function Fa(){function l(I){I.canIntercept&&I.info==="react-transition"&&I.intercept({handler:function(){return new Promise(function(B){return T=B})},focusReset:"manual",scroll:"manual"})}function d(){T!==null&&(T(),T=null),g||setTimeout(f,20)}function f(){if(!g&&!navigation.transition){var I=navigation.currentEntry;I&&I.url!=null&&navigation.navigate(I.url,{state:I.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,T=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",d),navigation.addEventListener("navigateerror",d),setTimeout(f,100),function(){g=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",d),navigation.removeEventListener("navigateerror",d),T!==null&&(T(),T=null)}}}function Mv(l){this._internalRoot=l}Km.prototype.render=Mv.prototype.render=function(l){var d=this._internalRoot;if(d===null)throw Error(r(409));var f=d.current,g=Os();b1(f,g,l,d,null,null)},Km.prototype.unmount=Mv.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var d=l.containerInfo;b1(l.current,2,null,l,null,null),Am(),d[We]=null}};function Km(l){this._internalRoot=l}Km.prototype.unstable_scheduleHydration=function(l){if(l){var d=at();l={blockedOn:null,target:l,priority:d};for(var f=0;f<oc.length&&d!==0&&d<oc[f].priority;f++);oc.splice(f,0,l),f===0&&R0(l)}};var R1=n.version;if(R1!=="19.2.0")throw Error(r(527,R1,"19.2.0"));ie.findDOMNode=function(l){var d=l._reactInternals;if(d===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=c(d),l=l!==null?h(l):null,l=l===null?null:l.stateNode,l};var h2={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ym=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ym.isDisabled&&Ym.supportsFiber)try{Zt=Ym.inject(h2),Gt=Ym}catch{}}return D0.createRoot=function(l,d){if(!i(l))throw Error(r(299));var f=!1,g="",T=O_,I=D_,B=pb;return d!=null&&(d.unstable_strictMode===!0&&(f=!0),d.identifierPrefix!==void 0&&(g=d.identifierPrefix),d.onUncaughtError!==void 0&&(T=d.onUncaughtError),d.onCaughtError!==void 0&&(I=d.onCaughtError),d.onRecoverableError!==void 0&&(B=d.onRecoverableError)),d=y1(l,1,!1,null,null,f,g,null,T,I,B,Fa),l[We]=d.current,v0(l),new Mv(d)},D0.hydrateRoot=function(l,d,f){if(!i(l))throw Error(r(299));var g=!1,T="",I=O_,B=D_,Y=pb,de=null;return f!=null&&(f.unstable_strictMode===!0&&(g=!0),f.identifierPrefix!==void 0&&(T=f.identifierPrefix),f.onUncaughtError!==void 0&&(I=f.onUncaughtError),f.onCaughtError!==void 0&&(B=f.onCaughtError),f.onRecoverableError!==void 0&&(Y=f.onRecoverableError),f.formState!==void 0&&(de=f.formState)),d=y1(l,1,!0,d,f??null,g,T,de,I,B,Y,Fa),d.context=E1(null),f=d.current,g=Os(),g=Pn(g),T=zu(g),T.callback=null,xo(f,T,g),f=g,d.current.lanes=f,En(d,f),bl(d),l[We]=d.current,v0(l),new Km(d)},D0.version="19.2.0",D0}var $3;function C7(){if($3)return m2.exports;$3=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(n){console.error(n)}}return t(),m2.exports=b7(),m2.exports}var S7=C7();const wI=R.createContext({});function RI(t){const n=R.useRef(null);return n.current===null&&(n.current=t()),n.current}const OI=typeof window<"u",O6=OI?R.useLayoutEffect:R.useEffect,OS=R.createContext(null);function DI(t,n){t.indexOf(n)===-1&&t.push(n)}function UI(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}const bd=(t,n,e)=>e>n?n:e<t?t:e;let xI=()=>{};const Cd={},D6=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function U6(t){return typeof t=="object"&&t!==null}const x6=t=>/^0[^.\s]+$/u.test(t);function LI(t){let n;return()=>(n===void 0&&(n=t()),n)}const Dl=t=>t,T7=(t,n)=>e=>n(t(e)),lE=(...t)=>t.reduce(T7),Ly=(t,n,e)=>{const r=n-t;return r===0?1:(e-t)/r};class kI{constructor(){this.subscriptions=[]}add(n){return DI(this.subscriptions,n),()=>UI(this.subscriptions,n)}notify(n,e,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](n,e,r);else for(let a=0;a<i;a++){const s=this.subscriptions[a];s&&s(n,e,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const gc=t=>t*1e3,Rl=t=>t/1e3;function L6(t,n){return n?t*(1e3/n):0}const k6=(t,n,e)=>(((1-3*e+3*n)*t+(3*e-6*n))*t+3*n)*t,N7=1e-7,A7=12;function M7(t,n,e,r,i){let a,s,o=0;do s=n+(e-n)/2,a=k6(s,r,i)-t,a>0?e=s:n=s;while(Math.abs(a)>N7&&++o<A7);return s}function uE(t,n,e,r){if(t===n&&e===r)return Dl;const i=a=>M7(a,0,1,t,e);return a=>a===0||a===1?a:k6(i(a),n,r)}const P6=t=>n=>n<=.5?t(2*n)/2:(2-t(2*(1-n)))/2,F6=t=>n=>1-t(1-n),B6=uE(.33,1.53,.69,.99),PI=F6(B6),H6=P6(PI),G6=t=>(t*=2)<1?.5*PI(t):.5*(2-Math.pow(2,-10*(t-1))),FI=t=>1-Math.sin(Math.acos(t)),V6=F6(FI),z6=P6(FI),I7=uE(.42,0,1,1),w7=uE(0,0,.58,1),j6=uE(.42,0,.58,1),R7=t=>Array.isArray(t)&&typeof t[0]!="number",q6=t=>Array.isArray(t)&&typeof t[0]=="number",O7={linear:Dl,easeIn:I7,easeInOut:j6,easeOut:w7,circIn:FI,circInOut:z6,circOut:V6,backIn:PI,backInOut:H6,backOut:B6,anticipate:G6},D7=t=>typeof t=="string",K3=t=>{if(q6(t)){xI(t.length===4);const[n,e,r,i]=t;return uE(n,e,r,i)}else if(D7(t))return O7[t];return t},O1=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function U7(t,n){let e=new Set,r=new Set,i=!1,a=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function u(h){s.has(h)&&(c.schedule(h),t()),h(o)}const c={schedule:(h,p=!1,m=!1)=>{const b=m&&i?e:r;return p&&s.add(h),b.has(h)||b.add(h),h},cancel:h=>{r.delete(h),s.delete(h)},process:h=>{if(o=h,i){a=!0;return}i=!0,[e,r]=[r,e],e.forEach(u),e.clear(),i=!1,a&&(a=!1,c.process(h))}};return c}const x7=40;function $6(t,n){let e=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>e=!0,s=O1.reduce((w,U)=>(w[U]=U7(a),w),{}),{setup:o,read:u,resolveKeyframes:c,preUpdate:h,update:p,preRender:m,render:_,postRender:b}=s,C=()=>{const w=Cd.useManualTiming?i.timestamp:performance.now();e=!1,Cd.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(w-i.timestamp,x7),1)),i.timestamp=w,i.isProcessing=!0,o.process(i),u.process(i),c.process(i),h.process(i),p.process(i),m.process(i),_.process(i),b.process(i),i.isProcessing=!1,e&&n&&(r=!1,t(C))},N=()=>{e=!0,r=!0,i.isProcessing||t(C)};return{schedule:O1.reduce((w,U)=>{const L=s[U];return w[U]=(P,x=!1,H=!1)=>(e||N(),L.schedule(P,x,H)),w},{}),cancel:w=>{for(let U=0;U<O1.length;U++)s[O1[U]].cancel(w)},state:i,steps:s}}const{schedule:Ii,cancel:nf,state:Va,steps:E2}=$6(typeof requestAnimationFrame<"u"?requestAnimationFrame:Dl,!0);let fC;function L7(){fC=void 0}const bo={now:()=>(fC===void 0&&bo.set(Va.isProcessing||Cd.useManualTiming?Va.timestamp:performance.now()),fC),set:t=>{fC=t,queueMicrotask(L7)}},K6=t=>n=>typeof n=="string"&&n.startsWith(t),BI=K6("--"),k7=K6("var(--"),HI=t=>k7(t)?P7.test(t.split("/*")[0].trim()):!1,P7=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Rg={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},ky={...Rg,transform:t=>bd(0,1,t)},D1={...Rg,default:1},oy=t=>Math.round(t*1e5)/1e5,GI=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function F7(t){return t==null}const B7=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,VI=(t,n)=>e=>!!(typeof e=="string"&&B7.test(e)&&e.startsWith(t)||n&&!F7(e)&&Object.prototype.hasOwnProperty.call(e,n)),Y6=(t,n,e)=>r=>{if(typeof r!="string")return r;const[i,a,s,o]=r.match(GI);return{[t]:parseFloat(i),[n]:parseFloat(a),[e]:parseFloat(s),alpha:o!==void 0?parseFloat(o):1}},H7=t=>bd(0,255,t),b2={...Rg,transform:t=>Math.round(H7(t))},Qv={test:VI("rgb","red"),parse:Y6("red","green","blue"),transform:({red:t,green:n,blue:e,alpha:r=1})=>"rgba("+b2.transform(t)+", "+b2.transform(n)+", "+b2.transform(e)+", "+oy(ky.transform(r))+")"};function G7(t){let n="",e="",r="",i="";return t.length>5?(n=t.substring(1,3),e=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(n=t.substring(1,2),e=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),n+=n,e+=e,r+=r,i+=i),{red:parseInt(n,16),green:parseInt(e,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const qN={test:VI("#"),parse:G7,transform:Qv.transform},cE=t=>({test:n=>typeof n=="string"&&n.endsWith(t)&&n.split(" ").length===1,parse:parseFloat,transform:n=>`${n}${t}`}),Hh=cE("deg"),_c=cE("%"),Ln=cE("px"),V7=cE("vh"),z7=cE("vw"),Y3={..._c,parse:t=>_c.parse(t)/100,transform:t=>_c.transform(t*100)},ag={test:VI("hsl","hue"),parse:Y6("hue","saturation","lightness"),transform:({hue:t,saturation:n,lightness:e,alpha:r=1})=>"hsla("+Math.round(t)+", "+_c.transform(oy(n))+", "+_c.transform(oy(e))+", "+oy(ky.transform(r))+")"},ca={test:t=>Qv.test(t)||qN.test(t)||ag.test(t),parse:t=>Qv.test(t)?Qv.parse(t):ag.test(t)?ag.parse(t):qN.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Qv.transform(t):ag.transform(t),getAnimatableNone:t=>{const n=ca.parse(t);return n.alpha=0,ca.transform(n)}},j7=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function q7(t){return isNaN(t)&&typeof t=="string"&&(t.match(GI)?.length||0)+(t.match(j7)?.length||0)>0}const W6="number",Q6="color",$7="var",K7="var(",W3="${}",Y7=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Py(t){const n=t.toString(),e=[],r={color:[],number:[],var:[]},i=[];let a=0;const o=n.replace(Y7,u=>(ca.test(u)?(r.color.push(a),i.push(Q6),e.push(ca.parse(u))):u.startsWith(K7)?(r.var.push(a),i.push($7),e.push(u)):(r.number.push(a),i.push(W6),e.push(parseFloat(u))),++a,W3)).split(W3);return{values:e,split:o,indexes:r,types:i}}function X6(t){return Py(t).values}function Z6(t){const{split:n,types:e}=Py(t),r=n.length;return i=>{let a="";for(let s=0;s<r;s++)if(a+=n[s],i[s]!==void 0){const o=e[s];o===W6?a+=oy(i[s]):o===Q6?a+=ca.transform(i[s]):a+=i[s]}return a}}const W7=t=>typeof t=="number"?0:ca.test(t)?ca.getAnimatableNone(t):t;function Q7(t){const n=X6(t);return Z6(t)(n.map(W7))}const rf={test:q7,parse:X6,createTransformer:Z6,getAnimatableNone:Q7};function C2(t,n,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?t+(n-t)*6*e:e<1/2?n:e<2/3?t+(n-t)*(2/3-e)*6:t}function X7({hue:t,saturation:n,lightness:e,alpha:r}){t/=360,n/=100,e/=100;let i=0,a=0,s=0;if(!n)i=a=s=e;else{const o=e<.5?e*(1+n):e+n-e*n,u=2*e-o;i=C2(u,o,t+1/3),a=C2(u,o,t),s=C2(u,o,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(s*255),alpha:r}}function kC(t,n){return e=>e>0?n:t}const ki=(t,n,e)=>t+(n-t)*e,S2=(t,n,e)=>{const r=t*t,i=e*(n*n-r)+r;return i<0?0:Math.sqrt(i)},Z7=[qN,Qv,ag],J7=t=>Z7.find(n=>n.test(t));function Q3(t){const n=J7(t);if(!n)return!1;let e=n.parse(t);return n===ag&&(e=X7(e)),e}const X3=(t,n)=>{const e=Q3(t),r=Q3(n);if(!e||!r)return kC(t,n);const i={...e};return a=>(i.red=S2(e.red,r.red,a),i.green=S2(e.green,r.green,a),i.blue=S2(e.blue,r.blue,a),i.alpha=ki(e.alpha,r.alpha,a),Qv.transform(i))},$N=new Set(["none","hidden"]);function eB(t,n){return $N.has(t)?e=>e<=0?t:n:e=>e>=1?n:t}function tB(t,n){return e=>ki(t,n,e)}function zI(t){return typeof t=="number"?tB:typeof t=="string"?HI(t)?kC:ca.test(t)?X3:iB:Array.isArray(t)?J6:typeof t=="object"?ca.test(t)?X3:nB:kC}function J6(t,n){const e=[...t],r=e.length,i=t.map((a,s)=>zI(a)(a,n[s]));return a=>{for(let s=0;s<r;s++)e[s]=i[s](a);return e}}function nB(t,n){const e={...t,...n},r={};for(const i in e)t[i]!==void 0&&n[i]!==void 0&&(r[i]=zI(t[i])(t[i],n[i]));return i=>{for(const a in r)e[a]=r[a](i);return e}}function rB(t,n){const e=[],r={color:0,var:0,number:0};for(let i=0;i<n.values.length;i++){const a=n.types[i],s=t.indexes[a][r[a]],o=t.values[s]??0;e[i]=o,r[a]++}return e}const iB=(t,n)=>{const e=rf.createTransformer(n),r=Py(t),i=Py(n);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?$N.has(t)&&!i.values.length||$N.has(n)&&!r.values.length?eB(t,n):lE(J6(rB(r,i),i.values),e):kC(t,n)};function e4(t,n,e){return typeof t=="number"&&typeof n=="number"&&typeof e=="number"?ki(t,n,e):zI(t)(t,n)}const aB=t=>{const n=({timestamp:e})=>t(e);return{start:(e=!0)=>Ii.update(n,e),stop:()=>nf(n),now:()=>Va.isProcessing?Va.timestamp:bo.now()}},t4=(t,n,e=10)=>{let r="";const i=Math.max(Math.round(n/e),2);for(let a=0;a<i;a++)r+=Math.round(t(a/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},PC=2e4;function jI(t){let n=0;const e=50;let r=t.next(n);for(;!r.done&&n<PC;)n+=e,r=t.next(n);return n>=PC?1/0:n}function sB(t,n=100,e){const r=e({...t,keyframes:[0,n]}),i=Math.min(jI(r),PC);return{type:"keyframes",ease:a=>r.next(i*a).value/n,duration:Rl(i)}}const oB=5;function n4(t,n,e){const r=Math.max(n-oB,0);return L6(e-t(r),n-r)}const $i={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},T2=.001;function lB({duration:t=$i.duration,bounce:n=$i.bounce,velocity:e=$i.velocity,mass:r=$i.mass}){let i,a,s=1-n;s=bd($i.minDamping,$i.maxDamping,s),t=bd($i.minDuration,$i.maxDuration,Rl(t)),s<1?(i=c=>{const h=c*s,p=h*t,m=h-e,_=KN(c,s),b=Math.exp(-p);return T2-m/_*b},a=c=>{const p=c*s*t,m=p*e+e,_=Math.pow(s,2)*Math.pow(c,2)*t,b=Math.exp(-p),C=KN(Math.pow(c,2),s);return(-i(c)+T2>0?-1:1)*((m-_)*b)/C}):(i=c=>{const h=Math.exp(-c*t),p=(c-e)*t+1;return-T2+h*p},a=c=>{const h=Math.exp(-c*t),p=(e-c)*(t*t);return h*p});const o=5/t,u=cB(i,a,o);if(t=gc(t),isNaN(u))return{stiffness:$i.stiffness,damping:$i.damping,duration:t};{const c=Math.pow(u,2)*r;return{stiffness:c,damping:s*2*Math.sqrt(r*c),duration:t}}}const uB=12;function cB(t,n,e){let r=e;for(let i=1;i<uB;i++)r=r-t(r)/n(r);return r}function KN(t,n){return t*Math.sqrt(1-n*n)}const dB=["duration","bounce"],hB=["stiffness","damping","mass"];function Z3(t,n){return n.some(e=>t[e]!==void 0)}function fB(t){let n={velocity:$i.velocity,stiffness:$i.stiffness,damping:$i.damping,mass:$i.mass,isResolvedFromDuration:!1,...t};if(!Z3(t,hB)&&Z3(t,dB))if(t.visualDuration){const e=t.visualDuration,r=2*Math.PI/(e*1.2),i=r*r,a=2*bd(.05,1,1-(t.bounce||0))*Math.sqrt(i);n={...n,mass:$i.mass,stiffness:i,damping:a}}else{const e=lB(t);n={...n,...e,mass:$i.mass},n.isResolvedFromDuration=!0}return n}function FC(t=$i.visualDuration,n=$i.bounce){const e=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:n}:t;let{restSpeed:r,restDelta:i}=e;const a=e.keyframes[0],s=e.keyframes[e.keyframes.length-1],o={done:!1,value:a},{stiffness:u,damping:c,mass:h,duration:p,velocity:m,isResolvedFromDuration:_}=fB({...e,velocity:-Rl(e.velocity||0)}),b=m||0,C=c/(2*Math.sqrt(u*h)),N=s-a,S=Rl(Math.sqrt(u/h)),M=Math.abs(N)<5;r||(r=M?$i.restSpeed.granular:$i.restSpeed.default),i||(i=M?$i.restDelta.granular:$i.restDelta.default);let w;if(C<1){const L=KN(S,C);w=P=>{const x=Math.exp(-C*S*P);return s-x*((b+C*S*N)/L*Math.sin(L*P)+N*Math.cos(L*P))}}else if(C===1)w=L=>s-Math.exp(-S*L)*(N+(b+S*N)*L);else{const L=S*Math.sqrt(C*C-1);w=P=>{const x=Math.exp(-C*S*P),H=Math.min(L*P,300);return s-x*((b+C*S*N)*Math.sinh(H)+L*N*Math.cosh(H))/L}}const U={calculatedDuration:_&&p||null,next:L=>{const P=w(L);if(_)o.done=L>=p;else{let x=L===0?b:0;C<1&&(x=L===0?gc(b):n4(w,L,P));const H=Math.abs(x)<=r,F=Math.abs(s-P)<=i;o.done=H&&F}return o.value=o.done?s:P,o},toString:()=>{const L=Math.min(jI(U),PC),P=t4(x=>U.next(L*x).value,L,30);return L+"ms "+P},toTransition:()=>{}};return U}FC.applyToOptions=t=>{const n=sB(t,100,FC);return t.ease=n.ease,t.duration=gc(n.duration),t.type="keyframes",t};function YN({keyframes:t,velocity:n=0,power:e=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:s,min:o,max:u,restDelta:c=.5,restSpeed:h}){const p=t[0],m={done:!1,value:p},_=H=>o!==void 0&&H<o||u!==void 0&&H>u,b=H=>o===void 0?u:u===void 0||Math.abs(o-H)<Math.abs(u-H)?o:u;let C=e*n;const N=p+C,S=s===void 0?N:s(N);S!==N&&(C=S-p);const M=H=>-C*Math.exp(-H/r),w=H=>S+M(H),U=H=>{const F=M(H),Q=w(H);m.done=Math.abs(F)<=c,m.value=m.done?S:Q};let L,P;const x=H=>{_(m.value)&&(L=H,P=FC({keyframes:[m.value,b(m.value)],velocity:n4(w,H,m.value),damping:i,stiffness:a,restDelta:c,restSpeed:h}))};return x(0),{calculatedDuration:null,next:H=>{let F=!1;return!P&&L===void 0&&(F=!0,U(H),x(H)),L!==void 0&&H>=L?P.next(H-L):(!F&&U(H),m)}}}function vB(t,n,e){const r=[],i=e||Cd.mix||e4,a=t.length-1;for(let s=0;s<a;s++){let o=i(t[s],t[s+1]);if(n){const u=Array.isArray(n)?n[s]||Dl:n;o=lE(u,o)}r.push(o)}return r}function pB(t,n,{clamp:e=!0,ease:r,mixer:i}={}){const a=t.length;if(xI(a===n.length),a===1)return()=>n[0];if(a===2&&n[0]===n[1])return()=>n[1];const s=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),n=[...n].reverse());const o=vB(n,r,i),u=o.length,c=h=>{if(s&&h<t[0])return n[0];let p=0;if(u>1)for(;p<t.length-2&&!(h<t[p+1]);p++);const m=Ly(t[p],t[p+1],h);return o[p](m)};return e?h=>c(bd(t[0],t[a-1],h)):c}function mB(t,n){const e=t[t.length-1];for(let r=1;r<=n;r++){const i=Ly(0,n,r);t.push(ki(e,1,i))}}function gB(t){const n=[0];return mB(n,t.length-1),n}function _B(t,n){return t.map(e=>e*n)}function yB(t,n){return t.map(()=>n||j6).splice(0,t.length-1)}function ly({duration:t=300,keyframes:n,times:e,ease:r="easeInOut"}){const i=R7(r)?r.map(K3):K3(r),a={done:!1,value:n[0]},s=_B(e&&e.length===n.length?e:gB(n),t),o=pB(s,n,{ease:Array.isArray(i)?i:yB(n,i)});return{calculatedDuration:t,next:u=>(a.value=o(u),a.done=u>=t,a)}}const EB=t=>t!==null;function qI(t,{repeat:n,repeatType:e="loop"},r,i=1){const a=t.filter(EB),o=i<0||n&&e!=="loop"&&n%2===1?0:a.length-1;return!o||r===void 0?a[o]:r}const bB={decay:YN,inertia:YN,tween:ly,keyframes:ly,spring:FC};function r4(t){typeof t.type=="string"&&(t.type=bB[t.type])}class $I{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(n=>{this.resolve=n})}notifyFinished(){this.resolve()}then(n,e){return this.finished.then(n,e)}}const CB=t=>t/100;class KI extends $I{constructor(n){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:e}=this.options;e&&e.updatedAt!==bo.now()&&this.tick(bo.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=n,this.initAnimation(),this.play(),n.autoplay===!1&&this.pause()}initAnimation(){const{options:n}=this;r4(n);const{type:e=ly,repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:s=0}=n;let{keyframes:o}=n;const u=e||ly;u!==ly&&typeof o[0]!="number"&&(this.mixKeyframes=lE(CB,e4(o[0],o[1])),o=[0,100]);const c=u({...n,keyframes:o});a==="mirror"&&(this.mirroredGenerator=u({...n,keyframes:[...o].reverse(),velocity:-s})),c.calculatedDuration===null&&(c.calculatedDuration=jI(c));const{calculatedDuration:h}=c;this.calculatedDuration=h,this.resolvedDuration=h+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=c}updateTime(n){const e=Math.round(n-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=e}tick(n,e=!1){const{generator:r,totalDuration:i,mixKeyframes:a,mirroredGenerator:s,resolvedDuration:o,calculatedDuration:u}=this;if(this.startTime===null)return r.next(0);const{delay:c=0,keyframes:h,repeat:p,repeatType:m,repeatDelay:_,type:b,onUpdate:C,finalKeyframe:N}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,n):this.speed<0&&(this.startTime=Math.min(n-i/this.speed,this.startTime)),e?this.currentTime=n:this.updateTime(n);const S=this.currentTime-c*(this.playbackSpeed>=0?1:-1),M=this.playbackSpeed>=0?S<0:S>i;this.currentTime=Math.max(S,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let w=this.currentTime,U=r;if(p){const H=Math.min(this.currentTime,i)/o;let F=Math.floor(H),Q=H%1;!Q&&H>=1&&(Q=1),Q===1&&F--,F=Math.min(F,p+1),!!(F%2)&&(m==="reverse"?(Q=1-Q,_&&(Q-=_/o)):m==="mirror"&&(U=s)),w=bd(0,1,Q)*o}const L=M?{done:!1,value:h[0]}:U.next(w);a&&(L.value=a(L.value));let{done:P}=L;!M&&u!==null&&(P=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const x=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&P);return x&&b!==YN&&(L.value=qI(h,this.options,N,this.speed)),C&&C(L.value),x&&this.finish(),L}then(n,e){return this.finished.then(n,e)}get duration(){return Rl(this.calculatedDuration)}get iterationDuration(){const{delay:n=0}=this.options||{};return this.duration+Rl(n)}get time(){return Rl(this.currentTime)}set time(n){n=gc(n),this.currentTime=n,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=n:this.driver&&(this.startTime=this.driver.now()-n/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(n){this.updateTime(bo.now());const e=this.playbackSpeed!==n;this.playbackSpeed=n,e&&(this.time=Rl(this.currentTime))}play(){if(this.isStopped)return;const{driver:n=aB,startTime:e}=this.options;this.driver||(this.driver=n(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=e??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(bo.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(n){return this.startTime=0,this.tick(n,!0)}attachTimeline(n){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),n.observe(this)}}function SB(t){for(let n=1;n<t.length;n++)t[n]??(t[n]=t[n-1])}const Xv=t=>t*180/Math.PI,WN=t=>{const n=Xv(Math.atan2(t[1],t[0]));return QN(n)},TB={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:WN,rotateZ:WN,skewX:t=>Xv(Math.atan(t[1])),skewY:t=>Xv(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},QN=t=>(t=t%360,t<0&&(t+=360),t),J3=WN,eR=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),tR=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),NB={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:eR,scaleY:tR,scale:t=>(eR(t)+tR(t))/2,rotateX:t=>QN(Xv(Math.atan2(t[6],t[5]))),rotateY:t=>QN(Xv(Math.atan2(-t[2],t[0]))),rotateZ:J3,rotate:J3,skewX:t=>Xv(Math.atan(t[4])),skewY:t=>Xv(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function XN(t){return t.includes("scale")?1:0}function ZN(t,n){if(!t||t==="none")return XN(n);const e=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(e)r=NB,i=e;else{const o=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=TB,i=o}if(!i)return XN(n);const a=r[n],s=i[1].split(",").map(MB);return typeof a=="function"?a(s):s[a]}const AB=(t,n)=>{const{transform:e="none"}=getComputedStyle(t);return ZN(e,n)};function MB(t){return parseFloat(t.trim())}const Og=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Dg=new Set(Og),nR=t=>t===Rg||t===Ln,IB=new Set(["x","y","z"]),wB=Og.filter(t=>!IB.has(t));function RB(t){const n=[];return wB.forEach(e=>{const r=t.getValue(e);r!==void 0&&(n.push([e,r.get()]),r.set(e.startsWith("scale")?1:0))}),n}const sp={width:({x:t},{paddingLeft:n="0",paddingRight:e="0"})=>t.max-t.min-parseFloat(n)-parseFloat(e),height:({y:t},{paddingTop:n="0",paddingBottom:e="0"})=>t.max-t.min-parseFloat(n)-parseFloat(e),top:(t,{top:n})=>parseFloat(n),left:(t,{left:n})=>parseFloat(n),bottom:({y:t},{top:n})=>parseFloat(n)+(t.max-t.min),right:({x:t},{left:n})=>parseFloat(n)+(t.max-t.min),x:(t,{transform:n})=>ZN(n,"x"),y:(t,{transform:n})=>ZN(n,"y")};sp.translateX=sp.x;sp.translateY=sp.y;const op=new Set;let JN=!1,eA=!1,tA=!1;function i4(){if(eA){const t=Array.from(op).filter(r=>r.needsMeasurement),n=new Set(t.map(r=>r.element)),e=new Map;n.forEach(r=>{const i=RB(r);i.length&&(e.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),n.forEach(r=>{r.render();const i=e.get(r);i&&i.forEach(([a,s])=>{r.getValue(a)?.set(s)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}eA=!1,JN=!1,op.forEach(t=>t.complete(tA)),op.clear()}function a4(){op.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(eA=!0)})}function OB(){tA=!0,a4(),i4(),tA=!1}class YI{constructor(n,e,r,i,a,s=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...n],this.onComplete=e,this.name=r,this.motionValue=i,this.element=a,this.isAsync=s}scheduleResolve(){this.state="scheduled",this.isAsync?(op.add(this),JN||(JN=!0,Ii.read(a4),Ii.resolveKeyframes(i4))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:n,name:e,element:r,motionValue:i}=this;if(n[0]===null){const a=i?.get(),s=n[n.length-1];if(a!==void 0)n[0]=a;else if(r&&e){const o=r.readValue(e,s);o!=null&&(n[0]=o)}n[0]===void 0&&(n[0]=s),i&&a===void 0&&i.set(n[0])}SB(n)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(n=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,n),op.delete(this)}cancel(){this.state==="scheduled"&&(op.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const DB=t=>t.startsWith("--");function UB(t,n,e){DB(n)?t.style.setProperty(n,e):t.style[n]=e}const xB=LI(()=>window.ScrollTimeline!==void 0),LB={};function kB(t,n){const e=LI(t);return()=>LB[n]??e()}const s4=kB(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Z0=([t,n,e,r])=>`cubic-bezier(${t}, ${n}, ${e}, ${r})`,rR={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Z0([0,.65,.55,1]),circOut:Z0([.55,0,1,.45]),backIn:Z0([.31,.01,.66,-.59]),backOut:Z0([.33,1.53,.69,.99])};function o4(t,n){if(t)return typeof t=="function"?s4()?t4(t,n):"ease-out":q6(t)?Z0(t):Array.isArray(t)?t.map(e=>o4(e,n)||rR.easeOut):rR[t]}function PB(t,n,e,{delay:r=0,duration:i=300,repeat:a=0,repeatType:s="loop",ease:o="easeOut",times:u}={},c=void 0){const h={[n]:e};u&&(h.offset=u);const p=o4(o,i);Array.isArray(p)&&(h.easing=p);const m={delay:r,duration:i,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:a+1,direction:s==="reverse"?"alternate":"normal"};return c&&(m.pseudoElement=c),t.animate(h,m)}function l4(t){return typeof t=="function"&&"applyToOptions"in t}function FB({type:t,...n}){return l4(t)&&s4()?t.applyToOptions(n):(n.duration??(n.duration=300),n.ease??(n.ease="easeOut"),n)}class BB extends $I{constructor(n){if(super(),this.finishedTime=null,this.isStopped=!1,!n)return;const{element:e,name:r,keyframes:i,pseudoElement:a,allowFlatten:s=!1,finalKeyframe:o,onComplete:u}=n;this.isPseudoElement=!!a,this.allowFlatten=s,this.options=n,xI(typeof n.type!="string");const c=FB(n);this.animation=PB(e,r,i,c,a),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const h=qI(i,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(h):UB(e,r,h),this.animation.cancel()}u?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:n}=this;n==="idle"||n==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const n=this.animation.effect?.getComputedTiming?.().duration||0;return Rl(Number(n))}get iterationDuration(){const{delay:n=0}=this.options||{};return this.duration+Rl(n)}get time(){return Rl(Number(this.animation.currentTime)||0)}set time(n){this.finishedTime=null,this.animation.currentTime=gc(n)}get speed(){return this.animation.playbackRate}set speed(n){n<0&&(this.finishedTime=null),this.animation.playbackRate=n}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(n){this.animation.startTime=n}attachTimeline({timeline:n,observe:e}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,n&&xB()?(this.animation.timeline=n,Dl):e(this)}}const u4={anticipate:G6,backInOut:H6,circInOut:z6};function HB(t){return t in u4}function GB(t){typeof t.ease=="string"&&HB(t.ease)&&(t.ease=u4[t.ease])}const iR=10;class VB extends BB{constructor(n){GB(n),r4(n),super(n),n.startTime&&(this.startTime=n.startTime),this.options=n}updateMotionValue(n){const{motionValue:e,onUpdate:r,onComplete:i,element:a,...s}=this.options;if(!e)return;if(n!==void 0){e.set(n);return}const o=new KI({...s,autoplay:!1}),u=gc(this.finishedTime??this.time);e.setWithVelocity(o.sample(u-iR).value,o.sample(u).value,iR),o.stop()}}const aR=(t,n)=>n==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(rf.test(t)||t==="0")&&!t.startsWith("url("));function zB(t){const n=t[0];if(t.length===1)return!0;for(let e=0;e<t.length;e++)if(t[e]!==n)return!0}function jB(t,n,e,r){const i=t[0];if(i===null)return!1;if(n==="display"||n==="visibility")return!0;const a=t[t.length-1],s=aR(i,n),o=aR(a,n);return!s||!o?!1:zB(t)||(e==="spring"||l4(e))&&r}function nA(t){t.duration=0,t.type="keyframes"}const qB=new Set(["opacity","clipPath","filter","transform"]),$B=LI(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function KB(t){const{motionValue:n,name:e,repeatDelay:r,repeatType:i,damping:a,type:s}=t;if(!(n?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:c}=n.owner.getProps();return $B()&&e&&qB.has(e)&&(e!=="transform"||!c)&&!u&&!r&&i!=="mirror"&&a!==0&&s!=="inertia"}const YB=40;class WB extends $I{constructor({autoplay:n=!0,delay:e=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:s="loop",keyframes:o,name:u,motionValue:c,element:h,...p}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=bo.now();const m={autoplay:n,delay:e,type:r,repeat:i,repeatDelay:a,repeatType:s,name:u,motionValue:c,element:h,...p},_=h?.KeyframeResolver||YI;this.keyframeResolver=new _(o,(b,C,N)=>this.onKeyframesResolved(b,C,m,!N),u,c,h),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(n,e,r,i){this.keyframeResolver=void 0;const{name:a,type:s,velocity:o,delay:u,isHandoff:c,onUpdate:h}=r;this.resolvedAt=bo.now(),jB(n,a,s,o)||((Cd.instantAnimations||!u)&&h?.(qI(n,r,e)),n[0]=n[n.length-1],nA(r),r.repeat=0);const m={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>YB?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:e,...r,keyframes:n},_=!c&&KB(m)?new VB({...m,element:m.motionValue.owner.current}):new KI(m);_.finished.then(()=>this.notifyFinished()).catch(Dl),this.pendingTimeline&&(this.stopTimeline=_.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=_}get finished(){return this._animation?this.animation.finished:this._finished}then(n,e){return this.finished.finally(n).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),OB()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(n){this.animation.time=n}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(n){this.animation.speed=n}get startTime(){return this.animation.startTime}attachTimeline(n){return this._animation?this.stopTimeline=this.animation.attachTimeline(n):this.pendingTimeline=n,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const QB=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function XB(t){const n=QB.exec(t);if(!n)return[,];const[,e,r,i]=n;return[`--${e??r}`,i]}function c4(t,n,e=1){const[r,i]=XB(t);if(!r)return;const a=window.getComputedStyle(n).getPropertyValue(r);if(a){const s=a.trim();return D6(s)?parseFloat(s):s}return HI(i)?c4(i,n,e+1):i}function WI(t,n){return t?.[n]??t?.default??t}const d4=new Set(["width","height","top","left","right","bottom",...Og]),ZB={test:t=>t==="auto",parse:t=>t},h4=t=>n=>n.test(t),f4=[Rg,Ln,_c,Hh,z7,V7,ZB],sR=t=>f4.find(h4(t));function JB(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||x6(t):!0}const eH=new Set(["brightness","contrast","saturate","opacity"]);function tH(t){const[n,e]=t.slice(0,-1).split("(");if(n==="drop-shadow")return t;const[r]=e.match(GI)||[];if(!r)return t;const i=e.replace(r,"");let a=eH.has(n)?1:0;return r!==e&&(a*=100),n+"("+a+i+")"}const nH=/\b([a-z-]*)\(.*?\)/gu,rA={...rf,getAnimatableNone:t=>{const n=t.match(nH);return n?n.map(tH).join(" "):t}},oR={...Rg,transform:Math.round},rH={rotate:Hh,rotateX:Hh,rotateY:Hh,rotateZ:Hh,scale:D1,scaleX:D1,scaleY:D1,scaleZ:D1,skew:Hh,skewX:Hh,skewY:Hh,distance:Ln,translateX:Ln,translateY:Ln,translateZ:Ln,x:Ln,y:Ln,z:Ln,perspective:Ln,transformPerspective:Ln,opacity:ky,originX:Y3,originY:Y3,originZ:Ln},QI={borderWidth:Ln,borderTopWidth:Ln,borderRightWidth:Ln,borderBottomWidth:Ln,borderLeftWidth:Ln,borderRadius:Ln,radius:Ln,borderTopLeftRadius:Ln,borderTopRightRadius:Ln,borderBottomRightRadius:Ln,borderBottomLeftRadius:Ln,width:Ln,maxWidth:Ln,height:Ln,maxHeight:Ln,top:Ln,right:Ln,bottom:Ln,left:Ln,padding:Ln,paddingTop:Ln,paddingRight:Ln,paddingBottom:Ln,paddingLeft:Ln,margin:Ln,marginTop:Ln,marginRight:Ln,marginBottom:Ln,marginLeft:Ln,backgroundPositionX:Ln,backgroundPositionY:Ln,...rH,zIndex:oR,fillOpacity:ky,strokeOpacity:ky,numOctaves:oR},iH={...QI,color:ca,backgroundColor:ca,outlineColor:ca,fill:ca,stroke:ca,borderColor:ca,borderTopColor:ca,borderRightColor:ca,borderBottomColor:ca,borderLeftColor:ca,filter:rA,WebkitFilter:rA},v4=t=>iH[t];function p4(t,n){let e=v4(t);return e!==rA&&(e=rf),e.getAnimatableNone?e.getAnimatableNone(n):void 0}const aH=new Set(["auto","none","0"]);function sH(t,n,e){let r=0,i;for(;r<t.length&&!i;){const a=t[r];typeof a=="string"&&!aH.has(a)&&Py(a).values.length&&(i=t[r]),r++}if(i&&e)for(const a of n)t[a]=p4(e,i)}class oH extends YI{constructor(n,e,r,i,a){super(n,e,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:n,element:e,name:r}=this;if(!e||!e.current)return;super.readKeyframes();for(let u=0;u<n.length;u++){let c=n[u];if(typeof c=="string"&&(c=c.trim(),HI(c))){const h=c4(c,e.current);h!==void 0&&(n[u]=h),u===n.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!d4.has(r)||n.length!==2)return;const[i,a]=n,s=sR(i),o=sR(a);if(s!==o)if(nR(s)&&nR(o))for(let u=0;u<n.length;u++){const c=n[u];typeof c=="string"&&(n[u]=parseFloat(c))}else sp[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:n,name:e}=this,r=[];for(let i=0;i<n.length;i++)(n[i]===null||JB(n[i]))&&r.push(i);r.length&&sH(n,r,e)}measureInitialState(){const{element:n,unresolvedKeyframes:e,name:r}=this;if(!n||!n.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=sp[r](n.measureViewportBox(),window.getComputedStyle(n.current)),e[0]=this.measuredOrigin;const i=e[e.length-1];i!==void 0&&n.getValue(r,i).jump(i,!1)}measureEndState(){const{element:n,name:e,unresolvedKeyframes:r}=this;if(!n||!n.current)return;const i=n.getValue(e);i&&i.jump(this.measuredOrigin,!1);const a=r.length-1,s=r[a];r[a]=sp[e](n.measureViewportBox(),window.getComputedStyle(n.current)),s!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=s),this.removedTransforms?.length&&this.removedTransforms.forEach(([o,u])=>{n.getValue(o).set(u)}),this.resolveNoneKeyframes()}}function lH(t,n,e){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=e?.[t]??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const m4=(t,n)=>n&&typeof t=="number"?n.transform(t):t;function g4(t){return U6(t)&&"offsetHeight"in t}const lR=30,uH=t=>!isNaN(parseFloat(t));class cH{constructor(n,e={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=bo.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(n),this.owner=e.owner}setCurrent(n){this.current=n,this.updatedAt=bo.now(),this.canTrackVelocity===null&&n!==void 0&&(this.canTrackVelocity=uH(this.current))}setPrevFrameValue(n=this.current){this.prevFrameValue=n,this.prevUpdatedAt=this.updatedAt}onChange(n){return this.on("change",n)}on(n,e){this.events[n]||(this.events[n]=new kI);const r=this.events[n].add(e);return n==="change"?()=>{r(),Ii.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const n in this.events)this.events[n].clear()}attach(n,e){this.passiveEffect=n,this.stopPassiveEffect=e}set(n){this.passiveEffect?this.passiveEffect(n,this.updateAndNotify):this.updateAndNotify(n)}setWithVelocity(n,e,r){this.set(e),this.prev=void 0,this.prevFrameValue=n,this.prevUpdatedAt=this.updatedAt-r}jump(n,e=!0){this.updateAndNotify(n),this.prev=n,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(n){this.dependents||(this.dependents=new Set),this.dependents.add(n)}removeDependent(n){this.dependents&&this.dependents.delete(n)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const n=bo.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||n-this.updatedAt>lR)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,lR);return L6(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(n){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=n(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function gg(t,n){return new cH(t,n)}const{schedule:XI}=$6(queueMicrotask,!1),fu={x:!1,y:!1};function _4(){return fu.x||fu.y}function dH(t){return t==="x"||t==="y"?fu[t]?null:(fu[t]=!0,()=>{fu[t]=!1}):fu.x||fu.y?null:(fu.x=fu.y=!0,()=>{fu.x=fu.y=!1})}function y4(t,n){const e=lH(t),r=new AbortController,i={passive:!0,...n,signal:r.signal};return[e,i,()=>r.abort()]}function uR(t){return!(t.pointerType==="touch"||_4())}function hH(t,n,e={}){const[r,i,a]=y4(t,e),s=o=>{if(!uR(o))return;const{target:u}=o,c=n(u,o);if(typeof c!="function"||!u)return;const h=p=>{uR(p)&&(c(p),u.removeEventListener("pointerleave",h))};u.addEventListener("pointerleave",h,i)};return r.forEach(o=>{o.addEventListener("pointerenter",s,i)}),a}const E4=(t,n)=>n?t===n?!0:E4(t,n.parentElement):!1,ZI=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,fH=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function vH(t){return fH.has(t.tagName)||t.tabIndex!==-1}const vC=new WeakSet;function cR(t){return n=>{n.key==="Enter"&&t(n)}}function N2(t,n){t.dispatchEvent(new PointerEvent("pointer"+n,{isPrimary:!0,bubbles:!0}))}const pH=(t,n)=>{const e=t.currentTarget;if(!e)return;const r=cR(()=>{if(vC.has(e))return;N2(e,"down");const i=cR(()=>{N2(e,"up")}),a=()=>N2(e,"cancel");e.addEventListener("keyup",i,n),e.addEventListener("blur",a,n)});e.addEventListener("keydown",r,n),e.addEventListener("blur",()=>e.removeEventListener("keydown",r),n)};function dR(t){return ZI(t)&&!_4()}function mH(t,n,e={}){const[r,i,a]=y4(t,e),s=o=>{const u=o.currentTarget;if(!dR(o))return;vC.add(u);const c=n(u,o),h=(_,b)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",m),vC.has(u)&&vC.delete(u),dR(_)&&typeof c=="function"&&c(_,{success:b})},p=_=>{h(_,u===window||u===document||e.useGlobalTarget||E4(u,_.target))},m=_=>{h(_,!1)};window.addEventListener("pointerup",p,i),window.addEventListener("pointercancel",m,i)};return r.forEach(o=>{(e.useGlobalTarget?window:o).addEventListener("pointerdown",s,i),g4(o)&&(o.addEventListener("focus",c=>pH(c,i)),!vH(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),a}function b4(t){return U6(t)&&"ownerSVGElement"in t}function gH(t){return b4(t)&&t.tagName==="svg"}const vs=t=>!!(t&&t.getVelocity),_H=[...f4,ca,rf],yH=t=>_H.find(h4(t)),JI=R.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function hR(t,n){if(typeof t=="function")return t(n);t!=null&&(t.current=n)}function EH(...t){return n=>{let e=!1;const r=t.map(i=>{const a=hR(i,n);return!e&&typeof a=="function"&&(e=!0),a});if(e)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():hR(t[i],null)}}}}function bH(...t){return R.useCallback(EH(...t),t)}class CH extends R.Component{getSnapshotBeforeUpdate(n){const e=this.props.childRef.current;if(e&&n.isPresent&&!this.props.isPresent){const r=e.offsetParent,i=g4(r)&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=e.offsetHeight||0,a.width=e.offsetWidth||0,a.top=e.offsetTop,a.left=e.offsetLeft,a.right=i-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function SH({children:t,isPresent:n,anchorX:e,root:r}){const i=R.useId(),a=R.useRef(null),s=R.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=R.useContext(JI),u=bH(a,t?.ref);return R.useInsertionEffect(()=>{const{width:c,height:h,top:p,left:m,right:_}=s.current;if(n||!a.current||!c||!h)return;const b=e==="left"?`left: ${m}`:`right: ${_}`;a.current.dataset.motionPopId=i;const C=document.createElement("style");o&&(C.nonce=o);const N=r??document.head;return N.appendChild(C),C.sheet&&C.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${h}px !important;
            ${b}px !important;
            top: ${p}px !important;
          }
        `),()=>{N.contains(C)&&N.removeChild(C)}},[n]),ue.jsx(CH,{isPresent:n,childRef:a,sizeRef:s,children:R.cloneElement(t,{ref:u})})}const TH=({children:t,initial:n,isPresent:e,onExitComplete:r,custom:i,presenceAffectsLayout:a,mode:s,anchorX:o,root:u})=>{const c=RI(NH),h=R.useId();let p=!0,m=R.useMemo(()=>(p=!1,{id:h,initial:n,isPresent:e,custom:i,onExitComplete:_=>{c.set(_,!0);for(const b of c.values())if(!b)return;r&&r()},register:_=>(c.set(_,!1),()=>c.delete(_))}),[e,c,r]);return a&&p&&(m={...m}),R.useMemo(()=>{c.forEach((_,b)=>c.set(b,!1))},[e]),R.useEffect(()=>{!e&&!c.size&&r&&r()},[e]),s==="popLayout"&&(t=ue.jsx(SH,{isPresent:e,anchorX:o,root:u,children:t})),ue.jsx(OS.Provider,{value:m,children:t})};function NH(){return new Map}function C4(t=!0){const n=R.useContext(OS);if(n===null)return[!0,null];const{isPresent:e,onExitComplete:r,register:i}=n,a=R.useId();R.useEffect(()=>{if(t)return i(a)},[t]);const s=R.useCallback(()=>t&&r&&r(a),[a,r,t]);return!e&&r?[!1,s]:[!0]}const U1=t=>t.key||"";function fR(t){const n=[];return R.Children.forEach(t,e=>{R.isValidElement(e)&&n.push(e)}),n}const iA=({children:t,custom:n,initial:e=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:a="sync",propagate:s=!1,anchorX:o="left",root:u})=>{const[c,h]=C4(s),p=R.useMemo(()=>fR(t),[t]),m=s&&!c?[]:p.map(U1),_=R.useRef(!0),b=R.useRef(p),C=RI(()=>new Map),[N,S]=R.useState(p),[M,w]=R.useState(p);O6(()=>{_.current=!1,b.current=p;for(let P=0;P<M.length;P++){const x=U1(M[P]);m.includes(x)?C.delete(x):C.get(x)!==!0&&C.set(x,!1)}},[M,m.length,m.join("-")]);const U=[];if(p!==N){let P=[...p];for(let x=0;x<M.length;x++){const H=M[x],F=U1(H);m.includes(F)||(P.splice(x,0,H),U.push(H))}return a==="wait"&&U.length&&(P=U),w(fR(P)),S(p),null}const{forceRender:L}=R.useContext(wI);return ue.jsx(ue.Fragment,{children:M.map(P=>{const x=U1(P),H=s&&!c?!1:p===M||m.includes(x),F=()=>{if(C.has(x))C.set(x,!0);else return;let Q=!0;C.forEach($=>{$||(Q=!1)}),Q&&(L?.(),w(b.current),s&&h?.(),r&&r())};return ue.jsx(TH,{isPresent:H,initial:!_.current||e?void 0:!1,custom:n,presenceAffectsLayout:i,mode:a,root:u,onExitComplete:H?void 0:F,anchorX:o,children:P},x)})})},S4=R.createContext({strict:!1}),vR={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},_g={};for(const t in vR)_g[t]={isEnabled:n=>vR[t].some(e=>!!n[e])};function AH(t){for(const n in t)_g[n]={..._g[n],...t[n]}}const MH=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function BC(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||MH.has(t)}let T4=t=>!BC(t);function IH(t){typeof t=="function"&&(T4=n=>n.startsWith("on")?!BC(n):t(n))}try{IH(require("@emotion/is-prop-valid").default)}catch{}function wH(t,n,e){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(T4(i)||e===!0&&BC(i)||!n&&!BC(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const DS=R.createContext({});function US(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Fy(t){return typeof t=="string"||Array.isArray(t)}const ew=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],tw=["initial",...ew];function xS(t){return US(t.animate)||tw.some(n=>Fy(t[n]))}function N4(t){return!!(xS(t)||t.variants)}function RH(t,n){if(xS(t)){const{initial:e,animate:r}=t;return{initial:e===!1||Fy(e)?e:void 0,animate:Fy(r)?r:void 0}}return t.inherit!==!1?n:{}}function OH(t){const{initial:n,animate:e}=RH(t,R.useContext(DS));return R.useMemo(()=>({initial:n,animate:e}),[pR(n),pR(e)])}function pR(t){return Array.isArray(t)?t.join(" "):t}const By={};function DH(t){for(const n in t)By[n]=t[n],BI(n)&&(By[n].isCSSVariable=!0)}function A4(t,{layout:n,layoutId:e}){return Dg.has(t)||t.startsWith("origin")||(n||e!==void 0)&&(!!By[t]||t==="opacity")}const UH={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},xH=Og.length;function LH(t,n,e){let r="",i=!0;for(let a=0;a<xH;a++){const s=Og[a],o=t[s];if(o===void 0)continue;let u=!0;if(typeof o=="number"?u=o===(s.startsWith("scale")?1:0):u=parseFloat(o)===0,!u||e){const c=m4(o,QI[s]);if(!u){i=!1;const h=UH[s]||s;r+=`${h}(${c}) `}e&&(n[s]=c)}}return r=r.trim(),e?r=e(n,i?"":r):i&&(r="none"),r}function nw(t,n,e){const{style:r,vars:i,transformOrigin:a}=t;let s=!1,o=!1;for(const u in n){const c=n[u];if(Dg.has(u)){s=!0;continue}else if(BI(u)){i[u]=c;continue}else{const h=m4(c,QI[u]);u.startsWith("origin")?(o=!0,a[u]=h):r[u]=h}}if(n.transform||(s||e?r.transform=LH(n,t.transform,e):r.transform&&(r.transform="none")),o){const{originX:u="50%",originY:c="50%",originZ:h=0}=a;r.transformOrigin=`${u} ${c} ${h}`}}const rw=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function M4(t,n,e){for(const r in n)!vs(n[r])&&!A4(r,e)&&(t[r]=n[r])}function kH({transformTemplate:t},n){return R.useMemo(()=>{const e=rw();return nw(e,n,t),Object.assign({},e.vars,e.style)},[n])}function PH(t,n){const e=t.style||{},r={};return M4(r,e,t),Object.assign(r,kH(t,n)),r}function FH(t,n){const e={},r=PH(t,n);return t.drag&&t.dragListener!==!1&&(e.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(e.tabIndex=0),e.style=r,e}const BH={offset:"stroke-dashoffset",array:"stroke-dasharray"},HH={offset:"strokeDashoffset",array:"strokeDasharray"};function GH(t,n,e=1,r=0,i=!0){t.pathLength=1;const a=i?BH:HH;t[a.offset]=Ln.transform(-r);const s=Ln.transform(n),o=Ln.transform(e);t[a.array]=`${s} ${o}`}function I4(t,{attrX:n,attrY:e,attrScale:r,pathLength:i,pathSpacing:a=1,pathOffset:s=0,...o},u,c,h){if(nw(t,o,c),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:m}=t;p.transform&&(m.transform=p.transform,delete p.transform),(m.transform||p.transformOrigin)&&(m.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),m.transform&&(m.transformBox=h?.transformBox??"fill-box",delete p.transformBox),n!==void 0&&(p.x=n),e!==void 0&&(p.y=e),r!==void 0&&(p.scale=r),i!==void 0&&GH(p,i,a,s,!1)}const w4=()=>({...rw(),attrs:{}}),R4=t=>typeof t=="string"&&t.toLowerCase()==="svg";function VH(t,n,e,r){const i=R.useMemo(()=>{const a=w4();return I4(a,n,R4(r),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[n]);if(t.style){const a={};M4(a,t.style,t),i.style={...a,...i.style}}return i}const zH=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function iw(t){return typeof t!="string"||t.includes("-")?!1:!!(zH.indexOf(t)>-1||/[A-Z]/u.test(t))}function jH(t,n,e,{latestValues:r},i,a=!1){const o=(iw(t)?VH:FH)(n,r,i,t),u=wH(n,typeof t=="string",a),c=t!==R.Fragment?{...u,...o,ref:e}:{},{children:h}=n,p=R.useMemo(()=>vs(h)?h.get():h,[h]);return R.createElement(t,{...c,children:p})}function mR(t){const n=[{},{}];return t?.values.forEach((e,r)=>{n[0][r]=e.get(),n[1][r]=e.getVelocity()}),n}function aw(t,n,e,r){if(typeof n=="function"){const[i,a]=mR(r);n=n(e!==void 0?e:t.custom,i,a)}if(typeof n=="string"&&(n=t.variants&&t.variants[n]),typeof n=="function"){const[i,a]=mR(r);n=n(e!==void 0?e:t.custom,i,a)}return n}function pC(t){return vs(t)?t.get():t}function qH({scrapeMotionValuesFromProps:t,createRenderState:n},e,r,i){return{latestValues:$H(e,r,i,t),renderState:n()}}function $H(t,n,e,r){const i={},a=r(t,{});for(const m in a)i[m]=pC(a[m]);let{initial:s,animate:o}=t;const u=xS(t),c=N4(t);n&&c&&!u&&t.inherit!==!1&&(s===void 0&&(s=n.initial),o===void 0&&(o=n.animate));let h=e?e.initial===!1:!1;h=h||s===!1;const p=h?o:s;if(p&&typeof p!="boolean"&&!US(p)){const m=Array.isArray(p)?p:[p];for(let _=0;_<m.length;_++){const b=aw(t,m[_]);if(b){const{transitionEnd:C,transition:N,...S}=b;for(const M in S){let w=S[M];if(Array.isArray(w)){const U=h?w.length-1:0;w=w[U]}w!==null&&(i[M]=w)}for(const M in C)i[M]=C[M]}}}return i}const O4=t=>(n,e)=>{const r=R.useContext(DS),i=R.useContext(OS),a=()=>qH(t,n,r,i);return e?a():RI(a)};function sw(t,n,e){const{style:r}=t,i={};for(const a in r)(vs(r[a])||n.style&&vs(n.style[a])||A4(a,t)||e?.getValue(a)?.liveStyle!==void 0)&&(i[a]=r[a]);return i}const KH=O4({scrapeMotionValuesFromProps:sw,createRenderState:rw});function D4(t,n,e){const r=sw(t,n,e);for(const i in t)if(vs(t[i])||vs(n[i])){const a=Og.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=t[i]}return r}const YH=O4({scrapeMotionValuesFromProps:D4,createRenderState:w4}),WH=Symbol.for("motionComponentSymbol");function sg(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function QH(t,n,e){return R.useCallback(r=>{r&&t.onMount&&t.onMount(r),n&&(r?n.mount(r):n.unmount()),e&&(typeof e=="function"?e(r):sg(e)&&(e.current=r))},[n])}const ow=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),XH="framerAppearId",U4="data-"+ow(XH),x4=R.createContext({});function ZH(t,n,e,r,i){const{visualElement:a}=R.useContext(DS),s=R.useContext(S4),o=R.useContext(OS),u=R.useContext(JI).reducedMotion,c=R.useRef(null);r=r||s.renderer,!c.current&&r&&(c.current=r(t,{visualState:n,parent:a,props:e,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:u}));const h=c.current,p=R.useContext(x4);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&JH(c.current,e,i,p);const m=R.useRef(!1);R.useInsertionEffect(()=>{h&&m.current&&h.update(e,o)});const _=e[U4],b=R.useRef(!!_&&!window.MotionHandoffIsComplete?.(_)&&window.MotionHasOptimisedAnimation?.(_));return O6(()=>{h&&(m.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),b.current&&h.animationState&&h.animationState.animateChanges())}),R.useEffect(()=>{h&&(!b.current&&h.animationState&&h.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(_)}),b.current=!1),h.enteringChildren=void 0)}),h}function JH(t,n,e,r){const{layoutId:i,layout:a,drag:s,dragConstraints:o,layoutScroll:u,layoutRoot:c,layoutCrossfade:h}=n;t.projection=new e(t.latestValues,n["data-framer-portal-id"]?void 0:L4(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!s||o&&sg(o),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:h,layoutScroll:u,layoutRoot:c})}function L4(t){if(t)return t.options.allowProjection!==!1?t.projection:L4(t.parent)}function A2(t,{forwardMotionProps:n=!1}={},e,r){e&&AH(e);const i=iw(t)?YH:KH;function a(o,u){let c;const h={...R.useContext(JI),...o,layoutId:eG(o)},{isStatic:p}=h,m=OH(o),_=i(o,p);if(!p&&OI){tG();const b=nG(h);c=b.MeasureLayout,m.visualElement=ZH(t,_,h,r,b.ProjectionNode)}return ue.jsxs(DS.Provider,{value:m,children:[c&&m.visualElement?ue.jsx(c,{visualElement:m.visualElement,...h}):null,jH(t,o,QH(_,m.visualElement,u),_,p,n)]})}a.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const s=R.forwardRef(a);return s[WH]=t,s}function eG({layoutId:t}){const n=R.useContext(wI).id;return n&&t!==void 0?n+"-"+t:t}function tG(t,n){R.useContext(S4).strict}function nG(t){const{drag:n,layout:e}=_g;if(!n&&!e)return{};const r={...n,...e};return{MeasureLayout:n?.isEnabled(t)||e?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function rG(t,n){if(typeof Proxy>"u")return A2;const e=new Map,r=(a,s)=>A2(a,s,t,n),i=(a,s)=>r(a,s);return new Proxy(i,{get:(a,s)=>s==="create"?r:(e.has(s)||e.set(s,A2(s,void 0,t,n)),e.get(s))})}function k4({top:t,left:n,right:e,bottom:r}){return{x:{min:n,max:e},y:{min:t,max:r}}}function iG({x:t,y:n}){return{top:n.min,right:t.max,bottom:n.max,left:t.min}}function aG(t,n){if(!n)return t;const e=n({x:t.left,y:t.top}),r=n({x:t.right,y:t.bottom});return{top:e.y,left:e.x,bottom:r.y,right:r.x}}function M2(t){return t===void 0||t===1}function aA({scale:t,scaleX:n,scaleY:e}){return!M2(t)||!M2(n)||!M2(e)}function kv(t){return aA(t)||P4(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function P4(t){return gR(t.x)||gR(t.y)}function gR(t){return t&&t!=="0%"}function HC(t,n,e){const r=t-e,i=n*r;return e+i}function _R(t,n,e,r,i){return i!==void 0&&(t=HC(t,i,r)),HC(t,e,r)+n}function sA(t,n=0,e=1,r,i){t.min=_R(t.min,n,e,r,i),t.max=_R(t.max,n,e,r,i)}function F4(t,{x:n,y:e}){sA(t.x,n.translate,n.scale,n.originPoint),sA(t.y,e.translate,e.scale,e.originPoint)}const yR=.999999999999,ER=1.0000000000001;function sG(t,n,e,r=!1){const i=e.length;if(!i)return;n.x=n.y=1;let a,s;for(let o=0;o<i;o++){a=e[o],s=a.projectionDelta;const{visualElement:u}=a.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&lg(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),s&&(n.x*=s.x.scale,n.y*=s.y.scale,F4(t,s)),r&&kv(a.latestValues)&&lg(t,a.latestValues))}n.x<ER&&n.x>yR&&(n.x=1),n.y<ER&&n.y>yR&&(n.y=1)}function og(t,n){t.min=t.min+n,t.max=t.max+n}function bR(t,n,e,r,i=.5){const a=ki(t.min,t.max,i);sA(t,n,e,a,r)}function lg(t,n){bR(t.x,n.x,n.scaleX,n.scale,n.originX),bR(t.y,n.y,n.scaleY,n.scale,n.originY)}function B4(t,n){return k4(aG(t.getBoundingClientRect(),n))}function oG(t,n,e){const r=B4(t,e),{scroll:i}=n;return i&&(og(r.x,i.offset.x),og(r.y,i.offset.y)),r}const CR=()=>({translate:0,scale:1,origin:0,originPoint:0}),ug=()=>({x:CR(),y:CR()}),SR=()=>({min:0,max:0}),ta=()=>({x:SR(),y:SR()}),oA={current:null},H4={current:!1};function lG(){if(H4.current=!0,!!OI)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),n=()=>oA.current=t.matches;t.addEventListener("change",n),n()}else oA.current=!1}const uG=new WeakMap;function cG(t,n,e){for(const r in n){const i=n[r],a=e[r];if(vs(i))t.addValue(r,i);else if(vs(a))t.addValue(r,gg(i,{owner:t}));else if(a!==i)if(t.hasValue(r)){const s=t.getValue(r);s.liveStyle===!0?s.jump(i):s.hasAnimated||s.set(i)}else{const s=t.getStaticValue(r);t.addValue(r,gg(s!==void 0?s:i,{owner:t}))}}for(const r in e)n[r]===void 0&&t.removeValue(r);return n}const TR=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class dG{scrapeMotionValuesFromProps(n,e,r){return{}}constructor({parent:n,props:e,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=YI,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=bo.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,Ii.render(this.render,!1,!0))};const{latestValues:u,renderState:c}=s;this.latestValues=u,this.baseTarget={...u},this.initialValues=e.initial?{...u}:{},this.renderState=c,this.parent=n,this.props=e,this.presenceContext=r,this.depth=n?n.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!a,this.isControllingVariants=xS(e),this.isVariantNode=N4(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(n&&n.current);const{willChange:h,...p}=this.scrapeMotionValuesFromProps(e,{},this);for(const m in p){const _=p[m];u[m]!==void 0&&vs(_)&&_.set(u[m])}}mount(n){this.current=n,uG.set(n,this),this.projection&&!this.projection.instance&&this.projection.mount(n),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,r)=>this.bindToMotionValue(r,e)),H4.current||lG(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:oA.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),nf(this.notifyUpdate),nf(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const e=this.features[n];e&&(e.unmount(),e.isMounted=!1)}this.current=null}addChild(n){this.children.add(n),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(n)}removeChild(n){this.children.delete(n),this.enteringChildren&&this.enteringChildren.delete(n)}bindToMotionValue(n,e){this.valueSubscriptions.has(n)&&this.valueSubscriptions.get(n)();const r=Dg.has(n);r&&this.onBindTransform&&this.onBindTransform();const i=e.on("change",s=>{this.latestValues[n]=s,this.props.onUpdate&&Ii.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,n,e)),this.valueSubscriptions.set(n,()=>{i(),a&&a(),e.owner&&e.stop()})}sortNodePosition(n){return!this.current||!this.sortInstanceNodePosition||this.type!==n.type?0:this.sortInstanceNodePosition(this.current,n.current)}updateFeatures(){let n="animation";for(n in _g){const e=_g[n];if(!e)continue;const{isEnabled:r,Feature:i}=e;if(!this.features[n]&&i&&r(this.props)&&(this.features[n]=new i(this)),this.features[n]){const a=this.features[n];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ta()}getStaticValue(n){return this.latestValues[n]}setStaticValue(n,e){this.latestValues[n]=e}update(n,e){(n.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=n,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let r=0;r<TR.length;r++){const i=TR[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,s=n[a];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=cG(this,this.scrapeMotionValuesFromProps(n,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(n){return this.props.variants?this.props.variants[n]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(n){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(n),()=>e.variantChildren.delete(n)}addValue(n,e){const r=this.values.get(n);e!==r&&(r&&this.removeValue(n),this.bindToMotionValue(n,e),this.values.set(n,e),this.latestValues[n]=e.get())}removeValue(n){this.values.delete(n);const e=this.valueSubscriptions.get(n);e&&(e(),this.valueSubscriptions.delete(n)),delete this.latestValues[n],this.removeValueFromRenderState(n,this.renderState)}hasValue(n){return this.values.has(n)}getValue(n,e){if(this.props.values&&this.props.values[n])return this.props.values[n];let r=this.values.get(n);return r===void 0&&e!==void 0&&(r=gg(e===null?void 0:e,{owner:this}),this.addValue(n,r)),r}readValue(n,e){let r=this.latestValues[n]!==void 0||!this.current?this.latestValues[n]:this.getBaseTargetFromProps(this.props,n)??this.readValueFromInstance(this.current,n,this.options);return r!=null&&(typeof r=="string"&&(D6(r)||x6(r))?r=parseFloat(r):!yH(r)&&rf.test(e)&&(r=p4(n,e)),this.setBaseTarget(n,vs(r)?r.get():r)),vs(r)?r.get():r}setBaseTarget(n,e){this.baseTarget[n]=e}getBaseTarget(n){const{initial:e}=this.props;let r;if(typeof e=="string"||typeof e=="object"){const a=aw(this.props,e,this.presenceContext?.custom);a&&(r=a[n])}if(e&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,n);return i!==void 0&&!vs(i)?i:this.initialValues[n]!==void 0&&r===void 0?void 0:this.baseTarget[n]}on(n,e){return this.events[n]||(this.events[n]=new kI),this.events[n].add(e)}notify(n,...e){this.events[n]&&this.events[n].notify(...e)}scheduleRenderMicrotask(){XI.render(this.render)}}class G4 extends dG{constructor(){super(...arguments),this.KeyframeResolver=oH}sortInstanceNodePosition(n,e){return n.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(n,e){return n.style?n.style[e]:void 0}removeValueFromRenderState(n,{vars:e,style:r}){delete e[n],delete r[n]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:n}=this.props;vs(n)&&(this.childSubscription=n.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function V4(t,{style:n,vars:e},r,i){const a=t.style;let s;for(s in n)a[s]=n[s];i?.applyProjectionStyles(a,r);for(s in e)a.setProperty(s,e[s])}function hG(t){return window.getComputedStyle(t)}class fG extends G4{constructor(){super(...arguments),this.type="html",this.renderInstance=V4}readValueFromInstance(n,e){if(Dg.has(e))return this.projection?.isProjecting?XN(e):AB(n,e);{const r=hG(n),i=(BI(e)?r.getPropertyValue(e):r[e])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(n,{transformPagePoint:e}){return B4(n,e)}build(n,e,r){nw(n,e,r.transformTemplate)}scrapeMotionValuesFromProps(n,e,r){return sw(n,e,r)}}const z4=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function vG(t,n,e,r){V4(t,n,void 0,r);for(const i in n.attrs)t.setAttribute(z4.has(i)?i:ow(i),n.attrs[i])}class pG extends G4{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ta}getBaseTargetFromProps(n,e){return n[e]}readValueFromInstance(n,e){if(Dg.has(e)){const r=v4(e);return r&&r.default||0}return e=z4.has(e)?e:ow(e),n.getAttribute(e)}scrapeMotionValuesFromProps(n,e,r){return D4(n,e,r)}build(n,e,r){I4(n,e,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(n,e,r,i){vG(n,e,r,i)}mount(n){this.isSVGTag=R4(n.tagName),super.mount(n)}}const mG=(t,n)=>iw(t)?new pG(n):new fG(n,{allowProjection:t!==R.Fragment});function hg(t,n,e){const r=t.getProps();return aw(r,n,e!==void 0?e:r.custom,t)}const lA=t=>Array.isArray(t);function gG(t,n,e){t.hasValue(n)?t.getValue(n).set(e):t.addValue(n,gg(e))}function _G(t){return lA(t)?t[t.length-1]||0:t}function yG(t,n){const e=hg(t,n);let{transitionEnd:r={},transition:i={},...a}=e||{};a={...a,...r};for(const s in a){const o=_G(a[s]);gG(t,s,o)}}function EG(t){return!!(vs(t)&&t.add)}function uA(t,n){const e=t.getValue("willChange");if(EG(e))return e.add(n);if(!e&&Cd.WillChange){const r=new Cd.WillChange("auto");t.addValue("willChange",r),r.add(n)}}function j4(t){return t.props[U4]}const bG=t=>t!==null;function CG(t,{repeat:n,repeatType:e="loop"},r){const i=t.filter(bG),a=n&&e!=="loop"&&n%2===1?0:i.length-1;return i[a]}const SG={type:"spring",stiffness:500,damping:25,restSpeed:10},TG=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),NG={type:"keyframes",duration:.8},AG={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},MG=(t,{keyframes:n})=>n.length>2?NG:Dg.has(t)?t.startsWith("scale")?TG(n[1]):SG:AG;function IG({when:t,delay:n,delayChildren:e,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:s,repeatDelay:o,from:u,elapsed:c,...h}){return!!Object.keys(h).length}const lw=(t,n,e,r={},i,a)=>s=>{const o=WI(r,t)||{},u=o.delay||r.delay||0;let{elapsed:c=0}=r;c=c-gc(u);const h={keyframes:Array.isArray(e)?e:[null,e],ease:"easeOut",velocity:n.getVelocity(),...o,delay:-c,onUpdate:m=>{n.set(m),o.onUpdate&&o.onUpdate(m)},onComplete:()=>{s(),o.onComplete&&o.onComplete()},name:t,motionValue:n,element:a?void 0:i};IG(o)||Object.assign(h,MG(t,h)),h.duration&&(h.duration=gc(h.duration)),h.repeatDelay&&(h.repeatDelay=gc(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let p=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(nA(h),h.delay===0&&(p=!0)),(Cd.instantAnimations||Cd.skipAnimations)&&(p=!0,nA(h),h.delay=0),h.allowFlatten=!o.type&&!o.ease,p&&!a&&n.get()!==void 0){const m=CG(h.keyframes,o);if(m!==void 0){Ii.update(()=>{h.onUpdate(m),h.onComplete()});return}}return o.isSync?new KI(h):new WB(h)};function wG({protectedKeys:t,needsAnimating:n},e){const r=t.hasOwnProperty(e)&&n[e]!==!0;return n[e]=!1,r}function q4(t,n,{delay:e=0,transitionOverride:r,type:i}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:s,...o}=n;r&&(a=r);const u=[],c=i&&t.animationState&&t.animationState.getState()[i];for(const h in o){const p=t.getValue(h,t.latestValues[h]??null),m=o[h];if(m===void 0||c&&wG(c,h))continue;const _={delay:e,...WI(a||{},h)},b=p.get();if(b!==void 0&&!p.isAnimating&&!Array.isArray(m)&&m===b&&!_.velocity)continue;let C=!1;if(window.MotionHandoffAnimation){const S=j4(t);if(S){const M=window.MotionHandoffAnimation(S,h,Ii);M!==null&&(_.startTime=M,C=!0)}}uA(t,h),p.start(lw(h,p,m,t.shouldReduceMotion&&d4.has(h)?{type:!1}:_,t,C));const N=p.animation;N&&u.push(N)}return s&&Promise.all(u).then(()=>{Ii.update(()=>{s&&yG(t,s)})}),u}function $4(t,n,e,r=0,i=1){const a=Array.from(t).sort((c,h)=>c.sortNodePosition(h)).indexOf(n),s=t.size,o=(s-1)*r;return typeof e=="function"?e(a,s):i===1?a*r:o-a*r}function cA(t,n,e={}){const r=hg(t,n,e.type==="exit"?t.presenceContext?.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};e.transitionOverride&&(i=e.transitionOverride);const a=r?()=>Promise.all(q4(t,r,e)):()=>Promise.resolve(),s=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:h,staggerDirection:p}=i;return RG(t,n,u,c,h,p,e)}:()=>Promise.resolve(),{when:o}=i;if(o){const[u,c]=o==="beforeChildren"?[a,s]:[s,a];return u().then(()=>c())}else return Promise.all([a(),s(e.delay)])}function RG(t,n,e=0,r=0,i=0,a=1,s){const o=[];for(const u of t.variantChildren)u.notify("AnimationStart",n),o.push(cA(u,n,{...s,delay:e+(typeof r=="function"?0:r)+$4(t.variantChildren,u,r,i,a)}).then(()=>u.notify("AnimationComplete",n)));return Promise.all(o)}function OG(t,n,e={}){t.notify("AnimationStart",n);let r;if(Array.isArray(n)){const i=n.map(a=>cA(t,a,e));r=Promise.all(i)}else if(typeof n=="string")r=cA(t,n,e);else{const i=typeof n=="function"?hg(t,n,e.custom):n;r=Promise.all(q4(t,i,e))}return r.then(()=>{t.notify("AnimationComplete",n)})}function K4(t,n){if(!Array.isArray(n))return!1;const e=n.length;if(e!==t.length)return!1;for(let r=0;r<e;r++)if(n[r]!==t[r])return!1;return!0}const DG=tw.length;function Y4(t){if(!t)return;if(!t.isControllingVariants){const e=t.parent?Y4(t.parent)||{}:{};return t.props.initial!==void 0&&(e.initial=t.props.initial),e}const n={};for(let e=0;e<DG;e++){const r=tw[e],i=t.props[r];(Fy(i)||i===!1)&&(n[r]=i)}return n}const UG=[...ew].reverse(),xG=ew.length;function LG(t){return n=>Promise.all(n.map(({animation:e,options:r})=>OG(t,e,r)))}function kG(t){let n=LG(t),e=NR(),r=!0;const i=u=>(c,h)=>{const p=hg(t,h,u==="exit"?t.presenceContext?.custom:void 0);if(p){const{transition:m,transitionEnd:_,...b}=p;c={...c,...b,..._}}return c};function a(u){n=u(t)}function s(u){const{props:c}=t,h=Y4(t.parent)||{},p=[],m=new Set;let _={},b=1/0;for(let N=0;N<xG;N++){const S=UG[N],M=e[S],w=c[S]!==void 0?c[S]:h[S],U=Fy(w),L=S===u?M.isActive:null;L===!1&&(b=N);let P=w===h[S]&&w!==c[S]&&U;if(P&&r&&t.manuallyAnimateOnMount&&(P=!1),M.protectedKeys={..._},!M.isActive&&L===null||!w&&!M.prevProp||US(w)||typeof w=="boolean")continue;const x=PG(M.prevProp,w);let H=x||S===u&&M.isActive&&!P&&U||N>b&&U,F=!1;const Q=Array.isArray(w)?w:[w];let $=Q.reduce(i(S),{});L===!1&&($={});const{prevResolvedValues:q={}}=M,X={...q,...$},V=ie=>{H=!0,m.has(ie)&&(F=!0,m.delete(ie)),M.needsAnimating[ie]=!0;const se=t.getValue(ie);se&&(se.liveStyle=!1)};for(const ie in X){const se=$[ie],he=q[ie];if(_.hasOwnProperty(ie))continue;let pe=!1;lA(se)&&lA(he)?pe=!K4(se,he):pe=se!==he,pe?se!=null?V(ie):m.add(ie):se!==void 0&&m.has(ie)?V(ie):M.protectedKeys[ie]=!0}M.prevProp=w,M.prevResolvedValues=$,M.isActive&&(_={..._,...$}),r&&t.blockInitialAnimation&&(H=!1);const ee=P&&x;H&&(!ee||F)&&p.push(...Q.map(ie=>{const se={type:S};if(typeof ie=="string"&&r&&!ee&&t.manuallyAnimateOnMount&&t.parent){const{parent:he}=t,pe=hg(he,ie);if(he.enteringChildren&&pe){const{delayChildren:K}=pe.transition||{};se.delay=$4(he.enteringChildren,t,K)}}return{animation:ie,options:se}}))}if(m.size){const N={};if(typeof c.initial!="boolean"){const S=hg(t,Array.isArray(c.initial)?c.initial[0]:c.initial);S&&S.transition&&(N.transition=S.transition)}m.forEach(S=>{const M=t.getBaseTarget(S),w=t.getValue(S);w&&(w.liveStyle=!0),N[S]=M??null}),p.push({animation:N})}let C=!!p.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(C=!1),r=!1,C?n(p):Promise.resolve()}function o(u,c){if(e[u].isActive===c)return Promise.resolve();t.variantChildren?.forEach(p=>p.animationState?.setActive(u,c)),e[u].isActive=c;const h=s(u);for(const p in e)e[p].protectedKeys={};return h}return{animateChanges:s,setActive:o,setAnimateFunction:a,getState:()=>e,reset:()=>{e=NR()}}}function PG(t,n){return typeof n=="string"?n!==t:Array.isArray(n)?!K4(n,t):!1}function Iv(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function NR(){return{animate:Iv(!0),whileInView:Iv(),whileHover:Iv(),whileTap:Iv(),whileDrag:Iv(),whileFocus:Iv(),exit:Iv()}}class hf{constructor(n){this.isMounted=!1,this.node=n}update(){}}class FG extends hf{constructor(n){super(n),n.animationState||(n.animationState=kG(n))}updateAnimationControlsSubscription(){const{animate:n}=this.node.getProps();US(n)&&(this.unmountControls=n.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:n}=this.node.getProps(),{animate:e}=this.node.prevProps||{};n!==e&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let BG=0;class HG extends hf{constructor(){super(...arguments),this.id=BG++}update(){if(!this.node.presenceContext)return;const{isPresent:n,onExitComplete:e}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||n===r)return;const i=this.node.animationState.setActive("exit",!n);e&&!n&&i.then(()=>{e(this.id)})}mount(){const{register:n,onExitComplete:e}=this.node.presenceContext||{};e&&e(this.id),n&&(this.unmount=n(this.id))}unmount(){}}const GG={animation:{Feature:FG},exit:{Feature:HG}};function Hy(t,n,e,r={passive:!0}){return t.addEventListener(n,e,r),()=>t.removeEventListener(n,e)}function dE(t){return{point:{x:t.pageX,y:t.pageY}}}const VG=t=>n=>ZI(n)&&t(n,dE(n));function uy(t,n,e,r){return Hy(t,n,VG(e),r)}const W4=1e-4,zG=1-W4,jG=1+W4,Q4=.01,qG=0-Q4,$G=0+Q4;function Vs(t){return t.max-t.min}function KG(t,n,e){return Math.abs(t-n)<=e}function AR(t,n,e,r=.5){t.origin=r,t.originPoint=ki(n.min,n.max,t.origin),t.scale=Vs(e)/Vs(n),t.translate=ki(e.min,e.max,t.origin)-t.originPoint,(t.scale>=zG&&t.scale<=jG||isNaN(t.scale))&&(t.scale=1),(t.translate>=qG&&t.translate<=$G||isNaN(t.translate))&&(t.translate=0)}function cy(t,n,e,r){AR(t.x,n.x,e.x,r?r.originX:void 0),AR(t.y,n.y,e.y,r?r.originY:void 0)}function MR(t,n,e){t.min=e.min+n.min,t.max=t.min+Vs(n)}function YG(t,n,e){MR(t.x,n.x,e.x),MR(t.y,n.y,e.y)}function IR(t,n,e){t.min=n.min-e.min,t.max=t.min+Vs(n)}function dy(t,n,e){IR(t.x,n.x,e.x),IR(t.y,n.y,e.y)}function Sl(t){return[t("x"),t("y")]}const X4=({current:t})=>t?t.ownerDocument.defaultView:null,wR=(t,n)=>Math.abs(t-n);function WG(t,n){const e=wR(t.x,n.x),r=wR(t.y,n.y);return Math.sqrt(e**2+r**2)}class Z4{constructor(n,e,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:s=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=w2(this.lastMoveEventInfo,this.history),_=this.startEvent!==null,b=WG(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!_&&!b)return;const{point:C}=m,{timestamp:N}=Va;this.history.push({...C,timestamp:N});const{onStart:S,onMove:M}=this.handlers;_||(S&&S(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),M&&M(this.lastMoveEvent,m)},this.handlePointerMove=(m,_)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=I2(_,this.transformPagePoint),Ii.update(this.updatePoint,!0)},this.handlePointerUp=(m,_)=>{this.end();const{onEnd:b,onSessionEnd:C,resumeAnimation:N}=this.handlers;if(this.dragSnapToOrigin&&N&&N(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=w2(m.type==="pointercancel"?this.lastMoveEventInfo:I2(_,this.transformPagePoint),this.history);this.startEvent&&b&&b(m,S),C&&C(m,S)},!ZI(n))return;this.dragSnapToOrigin=a,this.handlers=e,this.transformPagePoint=r,this.distanceThreshold=s,this.contextWindow=i||window;const o=dE(n),u=I2(o,this.transformPagePoint),{point:c}=u,{timestamp:h}=Va;this.history=[{...c,timestamp:h}];const{onSessionStart:p}=e;p&&p(n,w2(u,this.history)),this.removeListeners=lE(uy(this.contextWindow,"pointermove",this.handlePointerMove),uy(this.contextWindow,"pointerup",this.handlePointerUp),uy(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(n){this.handlers=n}end(){this.removeListeners&&this.removeListeners(),nf(this.updatePoint)}}function I2(t,n){return n?{point:n(t.point)}:t}function RR(t,n){return{x:t.x-n.x,y:t.y-n.y}}function w2({point:t},n){return{point:t,delta:RR(t,J4(n)),offset:RR(t,QG(n)),velocity:XG(n,.1)}}function QG(t){return t[0]}function J4(t){return t[t.length-1]}function XG(t,n){if(t.length<2)return{x:0,y:0};let e=t.length-1,r=null;const i=J4(t);for(;e>=0&&(r=t[e],!(i.timestamp-r.timestamp>gc(n)));)e--;if(!r)return{x:0,y:0};const a=Rl(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const s={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function ZG(t,{min:n,max:e},r){return n!==void 0&&t<n?t=r?ki(n,t,r.min):Math.max(t,n):e!==void 0&&t>e&&(t=r?ki(e,t,r.max):Math.min(t,e)),t}function OR(t,n,e){return{min:n!==void 0?t.min+n:void 0,max:e!==void 0?t.max+e-(t.max-t.min):void 0}}function JG(t,{top:n,left:e,bottom:r,right:i}){return{x:OR(t.x,e,i),y:OR(t.y,n,r)}}function DR(t,n){let e=n.min-t.min,r=n.max-t.max;return n.max-n.min<t.max-t.min&&([e,r]=[r,e]),{min:e,max:r}}function e9(t,n){return{x:DR(t.x,n.x),y:DR(t.y,n.y)}}function t9(t,n){let e=.5;const r=Vs(t),i=Vs(n);return i>r?e=Ly(n.min,n.max-r,t.min):r>i&&(e=Ly(t.min,t.max-i,n.min)),bd(0,1,e)}function n9(t,n){const e={};return n.min!==void 0&&(e.min=n.min-t.min),n.max!==void 0&&(e.max=n.max-t.min),e}const dA=.35;function r9(t=dA){return t===!1?t=0:t===!0&&(t=dA),{x:UR(t,"left","right"),y:UR(t,"top","bottom")}}function UR(t,n,e){return{min:xR(t,n),max:xR(t,e)}}function xR(t,n){return typeof t=="number"?t:t[n]||0}const i9=new WeakMap;class a9{constructor(n){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ta(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=n}start(n,{snapToCursor:e=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=p=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(dE(p).point)},s=(p,m)=>{const{drag:_,dragPropagation:b,onDragStart:C}=this.getProps();if(_&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=dH(_),!this.openDragLock))return;this.latestPointerEvent=p,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Sl(S=>{let M=this.getAxisMotionValue(S).get()||0;if(_c.test(M)){const{projection:w}=this.visualElement;if(w&&w.layout){const U=w.layout.layoutBox[S];U&&(M=Vs(U)*(parseFloat(M)/100))}}this.originPoint[S]=M}),C&&Ii.postRender(()=>C(p,m)),uA(this.visualElement,"transform");const{animationState:N}=this.visualElement;N&&N.setActive("whileDrag",!0)},o=(p,m)=>{this.latestPointerEvent=p,this.latestPanInfo=m;const{dragPropagation:_,dragDirectionLock:b,onDirectionLock:C,onDrag:N}=this.getProps();if(!_&&!this.openDragLock)return;const{offset:S}=m;if(b&&this.currentDirection===null){this.currentDirection=s9(S),this.currentDirection!==null&&C&&C(this.currentDirection);return}this.updateAxis("x",m.point,S),this.updateAxis("y",m.point,S),this.visualElement.render(),N&&N(p,m)},u=(p,m)=>{this.latestPointerEvent=p,this.latestPanInfo=m,this.stop(p,m),this.latestPointerEvent=null,this.latestPanInfo=null},c=()=>Sl(p=>this.getAnimationState(p)==="paused"&&this.getAxisMotionValue(p).animation?.play()),{dragSnapToOrigin:h}=this.getProps();this.panSession=new Z4(n,{onSessionStart:a,onStart:s,onMove:o,onSessionEnd:u,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:r,contextWindow:X4(this.visualElement)})}stop(n,e){const r=n||this.latestPointerEvent,i=e||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!r)return;const{velocity:s}=i;this.startAnimation(s);const{onDragEnd:o}=this.getProps();o&&Ii.postRender(()=>o(r,i))}cancel(){this.isDragging=!1;const{projection:n,animationState:e}=this.visualElement;n&&(n.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(n,e,r){const{drag:i}=this.getProps();if(!r||!x1(n,i,this.currentDirection))return;const a=this.getAxisMotionValue(n);let s=this.originPoint[n]+r[n];this.constraints&&this.constraints[n]&&(s=ZG(s,this.constraints[n],this.elastic[n])),a.set(s)}resolveConstraints(){const{dragConstraints:n,dragElastic:e}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;n&&sg(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=JG(r.layoutBox,n):this.constraints=!1,this.elastic=r9(e),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Sl(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=n9(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:n,onMeasureDragConstraints:e}=this.getProps();if(!n||!sg(n))return!1;const r=n.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=oG(r,i.root,this.visualElement.getTransformPagePoint());let s=e9(i.layout.layoutBox,a);if(e){const o=e(iG(s));this.hasMutatedConstraints=!!o,o&&(s=k4(o))}return s}startAnimation(n){const{drag:e,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:s,onDragTransitionEnd:o}=this.getProps(),u=this.constraints||{},c=Sl(h=>{if(!x1(h,e,this.currentDirection))return;let p=u&&u[h]||{};s&&(p={min:0,max:0});const m=i?200:1e6,_=i?40:1e7,b={type:"inertia",velocity:r?n[h]:0,bounceStiffness:m,bounceDamping:_,timeConstant:750,restDelta:1,restSpeed:10,...a,...p};return this.startAxisValueAnimation(h,b)});return Promise.all(c).then(o)}startAxisValueAnimation(n,e){const r=this.getAxisMotionValue(n);return uA(this.visualElement,n),r.start(lw(n,r,0,e,this.visualElement,!1))}stopAnimation(){Sl(n=>this.getAxisMotionValue(n).stop())}pauseAnimation(){Sl(n=>this.getAxisMotionValue(n).animation?.pause())}getAnimationState(n){return this.getAxisMotionValue(n).animation?.state}getAxisMotionValue(n){const e=`_drag${n.toUpperCase()}`,r=this.visualElement.getProps(),i=r[e];return i||this.visualElement.getValue(n,(r.initial?r.initial[n]:void 0)||0)}snapToCursor(n){Sl(e=>{const{drag:r}=this.getProps();if(!x1(e,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(e);if(i&&i.layout){const{min:s,max:o}=i.layout.layoutBox[e];a.set(n[e]-ki(s,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:n,dragConstraints:e}=this.getProps(),{projection:r}=this.visualElement;if(!sg(e)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Sl(s=>{const o=this.getAxisMotionValue(s);if(o&&this.constraints!==!1){const u=o.get();i[s]=t9({min:u,max:u},this.constraints[s])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Sl(s=>{if(!x1(s,n,null))return;const o=this.getAxisMotionValue(s),{min:u,max:c}=this.constraints[s];o.set(ki(u,c,i[s]))})}addListeners(){if(!this.visualElement.current)return;i9.set(this.visualElement,this);const n=this.visualElement.current,e=uy(n,"pointerdown",u=>{const{drag:c,dragListener:h=!0}=this.getProps();c&&h&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();sg(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Ii.read(r);const s=Hy(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:c})=>{this.isDragging&&c&&(Sl(h=>{const p=this.getAxisMotionValue(h);p&&(this.originPoint[h]+=u[h].translate,p.set(p.get()+u[h].translate))}),this.visualElement.render())}));return()=>{s(),e(),a(),o&&o()}}getProps(){const n=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:s=dA,dragMomentum:o=!0}=n;return{...n,drag:e,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:s,dragMomentum:o}}}function x1(t,n,e){return(n===!0||n===t)&&(e===null||e===t)}function s9(t,n=10){let e=null;return Math.abs(t.y)>n?e="y":Math.abs(t.x)>n&&(e="x"),e}class o9 extends hf{constructor(n){super(n),this.removeGroupControls=Dl,this.removeListeners=Dl,this.controls=new a9(n)}mount(){const{dragControls:n}=this.node.getProps();n&&(this.removeGroupControls=n.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Dl}unmount(){this.removeGroupControls(),this.removeListeners()}}const LR=t=>(n,e)=>{t&&Ii.postRender(()=>t(n,e))};class l9 extends hf{constructor(){super(...arguments),this.removePointerDownListener=Dl}onPointerDown(n){this.session=new Z4(n,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:X4(this.node)})}createPanHandlers(){const{onPanSessionStart:n,onPanStart:e,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:LR(n),onStart:LR(e),onMove:r,onEnd:(a,s)=>{delete this.session,i&&Ii.postRender(()=>i(a,s))}}}mount(){this.removePointerDownListener=uy(this.node.current,"pointerdown",n=>this.onPointerDown(n))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const mC={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function kR(t,n){return n.max===n.min?0:t/(n.max-n.min)*100}const U0={correct:(t,n)=>{if(!n.target)return t;if(typeof t=="string")if(Ln.test(t))t=parseFloat(t);else return t;const e=kR(t,n.target.x),r=kR(t,n.target.y);return`${e}% ${r}%`}},u9={correct:(t,{treeScale:n,projectionDelta:e})=>{const r=t,i=rf.parse(t);if(i.length>5)return r;const a=rf.createTransformer(t),s=typeof i[0]!="number"?1:0,o=e.x.scale*n.x,u=e.y.scale*n.y;i[0+s]/=o,i[1+s]/=u;const c=ki(o,u,.5);return typeof i[2+s]=="number"&&(i[2+s]/=c),typeof i[3+s]=="number"&&(i[3+s]/=c),a(i)}};let R2=!1;class c9 extends R.Component{componentDidMount(){const{visualElement:n,layoutGroup:e,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=n;DH(d9),a&&(e.group&&e.group.add(a),r&&r.register&&i&&r.register(a),R2&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),mC.hasEverUpdated=!0}getSnapshotBeforeUpdate(n){const{layoutDependency:e,visualElement:r,drag:i,isPresent:a}=this.props,{projection:s}=r;return s&&(s.isPresent=a,R2=!0,i||n.layoutDependency!==e||e===void 0||n.isPresent!==a?s.willUpdate():this.safeToRemove(),n.isPresent!==a&&(a?s.promote():s.relegate()||Ii.postRender(()=>{const o=s.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:n}=this.props.visualElement;n&&(n.root.didUpdate(),XI.postRender(()=>{!n.currentAnimation&&n.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:n,layoutGroup:e,switchLayoutGroup:r}=this.props,{projection:i}=n;R2=!0,i&&(i.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:n}=this.props;n&&n()}render(){return null}}function ek(t){const[n,e]=C4(),r=R.useContext(wI);return ue.jsx(c9,{...t,layoutGroup:r,switchLayoutGroup:R.useContext(x4),isPresent:n,safeToRemove:e})}const d9={borderRadius:{...U0,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:U0,borderTopRightRadius:U0,borderBottomLeftRadius:U0,borderBottomRightRadius:U0,boxShadow:u9};function h9(t,n,e){const r=vs(t)?t:gg(t);return r.start(lw("",r,n,e)),r.animation}const f9=(t,n)=>t.depth-n.depth;class v9{constructor(){this.children=[],this.isDirty=!1}add(n){DI(this.children,n),this.isDirty=!0}remove(n){UI(this.children,n),this.isDirty=!0}forEach(n){this.isDirty&&this.children.sort(f9),this.isDirty=!1,this.children.forEach(n)}}function p9(t,n){const e=bo.now(),r=({timestamp:i})=>{const a=i-e;a>=n&&(nf(r),t(a-n))};return Ii.setup(r,!0),()=>nf(r)}const tk=["TopLeft","TopRight","BottomLeft","BottomRight"],m9=tk.length,PR=t=>typeof t=="string"?parseFloat(t):t,FR=t=>typeof t=="number"||Ln.test(t);function g9(t,n,e,r,i,a){i?(t.opacity=ki(0,e.opacity??1,_9(r)),t.opacityExit=ki(n.opacity??1,0,y9(r))):a&&(t.opacity=ki(n.opacity??1,e.opacity??1,r));for(let s=0;s<m9;s++){const o=`border${tk[s]}Radius`;let u=BR(n,o),c=BR(e,o);if(u===void 0&&c===void 0)continue;u||(u=0),c||(c=0),u===0||c===0||FR(u)===FR(c)?(t[o]=Math.max(ki(PR(u),PR(c),r),0),(_c.test(c)||_c.test(u))&&(t[o]+="%")):t[o]=c}(n.rotate||e.rotate)&&(t.rotate=ki(n.rotate||0,e.rotate||0,r))}function BR(t,n){return t[n]!==void 0?t[n]:t.borderRadius}const _9=nk(0,.5,V6),y9=nk(.5,.95,Dl);function nk(t,n,e){return r=>r<t?0:r>n?1:e(Ly(t,n,r))}function HR(t,n){t.min=n.min,t.max=n.max}function Cl(t,n){HR(t.x,n.x),HR(t.y,n.y)}function GR(t,n){t.translate=n.translate,t.scale=n.scale,t.originPoint=n.originPoint,t.origin=n.origin}function VR(t,n,e,r,i){return t-=n,t=HC(t,1/e,r),i!==void 0&&(t=HC(t,1/i,r)),t}function E9(t,n=0,e=1,r=.5,i,a=t,s=t){if(_c.test(n)&&(n=parseFloat(n),n=ki(s.min,s.max,n/100)-s.min),typeof n!="number")return;let o=ki(a.min,a.max,r);t===a&&(o-=n),t.min=VR(t.min,n,e,o,i),t.max=VR(t.max,n,e,o,i)}function zR(t,n,[e,r,i],a,s){E9(t,n[e],n[r],n[i],n.scale,a,s)}const b9=["x","scaleX","originX"],C9=["y","scaleY","originY"];function jR(t,n,e,r){zR(t.x,n,b9,e?e.x:void 0,r?r.x:void 0),zR(t.y,n,C9,e?e.y:void 0,r?r.y:void 0)}function qR(t){return t.translate===0&&t.scale===1}function rk(t){return qR(t.x)&&qR(t.y)}function $R(t,n){return t.min===n.min&&t.max===n.max}function S9(t,n){return $R(t.x,n.x)&&$R(t.y,n.y)}function KR(t,n){return Math.round(t.min)===Math.round(n.min)&&Math.round(t.max)===Math.round(n.max)}function ik(t,n){return KR(t.x,n.x)&&KR(t.y,n.y)}function YR(t){return Vs(t.x)/Vs(t.y)}function WR(t,n){return t.translate===n.translate&&t.scale===n.scale&&t.originPoint===n.originPoint}class T9{constructor(){this.members=[]}add(n){DI(this.members,n),n.scheduleRender()}remove(n){if(UI(this.members,n),n===this.prevLead&&(this.prevLead=void 0),n===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(n){const e=this.members.findIndex(i=>n===i);if(e===0)return!1;let r;for(let i=e;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(n,e){const r=this.lead;if(n!==r&&(this.prevLead=r,this.lead=n,n.show(),r)){r.instance&&r.scheduleRender(),n.scheduleRender(),n.resumeFrom=r,e&&(n.resumeFrom.preserveOpacity=!0),r.snapshot&&(n.snapshot=r.snapshot,n.snapshot.latestValues=r.animationValues||r.latestValues),n.root&&n.root.isUpdating&&(n.isLayoutDirty=!0);const{crossfade:i}=n.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(n=>{const{options:e,resumingFrom:r}=n;e.onExitComplete&&e.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(n=>{n.instance&&n.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function N9(t,n,e){let r="";const i=t.x.translate/n.x,a=t.y.translate/n.y,s=e?.z||0;if((i||a||s)&&(r=`translate3d(${i}px, ${a}px, ${s}px) `),(n.x!==1||n.y!==1)&&(r+=`scale(${1/n.x}, ${1/n.y}) `),e){const{transformPerspective:c,rotate:h,rotateX:p,rotateY:m,skewX:_,skewY:b}=e;c&&(r=`perspective(${c}px) ${r}`),h&&(r+=`rotate(${h}deg) `),p&&(r+=`rotateX(${p}deg) `),m&&(r+=`rotateY(${m}deg) `),_&&(r+=`skewX(${_}deg) `),b&&(r+=`skewY(${b}deg) `)}const o=t.x.scale*n.x,u=t.y.scale*n.y;return(o!==1||u!==1)&&(r+=`scale(${o}, ${u})`),r||"none"}const O2=["","X","Y","Z"],A9=1e3;let M9=0;function D2(t,n,e,r){const{latestValues:i}=n;i[t]&&(e[t]=i[t],n.setStaticValue(t,0),r&&(r[t]=0))}function ak(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:n}=t.options;if(!n)return;const e=j4(n);if(window.MotionHasOptimisedAnimation(e,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(e,"transform",Ii,!(i||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&ak(r)}function sk({attachResizeListener:t,defaultParent:n,measureScroll:e,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(s={},o=n?.()){this.id=M9++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(R9),this.nodes.forEach(x9),this.nodes.forEach(L9),this.nodes.forEach(O9)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new v9)}addEventListener(s,o){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new kI),this.eventHandlers.get(s).add(o)}notifyListeners(s,...o){const u=this.eventHandlers.get(s);u&&u.notify(...o)}hasListeners(s){return this.eventHandlers.has(s)}mount(s){if(this.instance)return;this.isSVG=b4(s)&&!gH(s),this.instance=s;const{layoutId:o,layout:u,visualElement:c}=this.options;if(c&&!c.current&&c.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||o)&&(this.isLayoutDirty=!0),t){let h,p=0;const m=()=>this.root.updateBlockedByResize=!1;Ii.read(()=>{p=window.innerWidth}),t(s,()=>{const _=window.innerWidth;_!==p&&(p=_,this.root.updateBlockedByResize=!0,h&&h(),h=p9(m,250),mC.hasAnimatedSinceResize&&(mC.hasAnimatedSinceResize=!1,this.nodes.forEach(ZR)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&c&&(o||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:p,hasRelativeLayoutChanged:m,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||c.getDefaultTransition()||H9,{onLayoutAnimationStart:C,onLayoutAnimationComplete:N}=c.getProps(),S=!this.targetLayout||!ik(this.targetLayout,_),M=!p&&m;if(this.options.layoutRoot||this.resumeFrom||M||p&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const w={...WI(b,"layout"),onPlay:C,onComplete:N};(c.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w),this.setAnimationOrigin(h,M)}else p||ZR(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),nf(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(k9),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&ak(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const p=this.path[h];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:o,layout:u}=this.options;if(o===void 0&&!u)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(QR);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(XR);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(U9),this.nodes.forEach(I9),this.nodes.forEach(w9)):this.nodes.forEach(XR),this.clearAllSnapshots();const o=bo.now();Va.delta=bd(0,1e3/60,o-Va.timestamp),Va.timestamp=o,Va.isProcessing=!0,E2.update.process(Va),E2.preRender.process(Va),E2.render.process(Va),Va.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,XI.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(D9),this.sharedNodes.forEach(P9)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ii.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ii.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Vs(this.snapshot.measuredBox.x)&&!Vs(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ta(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(o=!1),o&&this.instance){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:u,offset:e(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!rk(this.projectionDelta),u=this.getTransformTemplate(),c=u?u(this.latestValues,""):void 0,h=c!==this.prevTransformTemplateValue;s&&this.instance&&(o||kv(this.latestValues)||h)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const o=this.measurePageBox();let u=this.removeElementScroll(o);return s&&(u=this.removeTransform(u)),G9(u),{animationId:this.root.animationId,measuredBox:o,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:s}=this.options;if(!s)return ta();const o=s.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(V9))){const{scroll:c}=this.root;c&&(og(o.x,c.offset.x),og(o.y,c.offset.y))}return o}removeElementScroll(s){const o=ta();if(Cl(o,s),this.scroll?.wasRoot)return o;for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:h,options:p}=c;c!==this.root&&h&&p.layoutScroll&&(h.wasRoot&&Cl(o,s),og(o.x,h.offset.x),og(o.y,h.offset.y))}return o}applyTransform(s,o=!1){const u=ta();Cl(u,s);for(let c=0;c<this.path.length;c++){const h=this.path[c];!o&&h.options.layoutScroll&&h.scroll&&h!==h.root&&lg(u,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),kv(h.latestValues)&&lg(u,h.latestValues)}return kv(this.latestValues)&&lg(u,this.latestValues),u}removeTransform(s){const o=ta();Cl(o,s);for(let u=0;u<this.path.length;u++){const c=this.path[u];if(!c.instance||!kv(c.latestValues))continue;aA(c.latestValues)&&c.updateSnapshot();const h=ta(),p=c.measurePageBox();Cl(h,p),jR(o,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,h)}return kv(this.latestValues)&&jR(o,this.latestValues),o}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Va.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==o;if(!(s||u&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:p}=this.options;if(!(!this.layout||!(h||p))){if(this.resolvedRelativeTargetAt=Va.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ta(),this.relativeTargetOrigin=ta(),dy(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Cl(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ta(),this.targetWithTransforms=ta()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),YG(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Cl(this.target,this.layout.layoutBox),F4(this.target,this.targetDelta)):Cl(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ta(),this.relativeTargetOrigin=ta(),dy(this.relativeTargetOrigin,this.target,m.target),Cl(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||aA(this.parent.latestValues)||P4(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const s=this.getLead(),o=!!this.resumingFrom||this!==s;let u=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(u=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Va.timestamp&&(u=!1),u)return;const{layout:c,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||h))return;Cl(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;sG(this.layoutCorrected,this.treeScale,this.path,o),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox,s.targetWithTransforms=ta());const{target:_}=s;if(!_){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(GR(this.prevProjectionDelta.x,this.projectionDelta.x),GR(this.prevProjectionDelta.y,this.projectionDelta.y)),cy(this.projectionDelta,this.layoutCorrected,_,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==m||!WR(this.projectionDelta.x,this.prevProjectionDelta.x)||!WR(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){if(this.options.visualElement?.scheduleRender(),s){const o=this.getStack();o&&o.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ug(),this.projectionDelta=ug(),this.projectionDeltaWithTransform=ug()}setAnimationOrigin(s,o=!1){const u=this.snapshot,c=u?u.latestValues:{},h={...this.latestValues},p=ug();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const m=ta(),_=u?u.source:void 0,b=this.layout?this.layout.source:void 0,C=_!==b,N=this.getStack(),S=!N||N.members.length<=1,M=!!(C&&!S&&this.options.crossfade===!0&&!this.path.some(B9));this.animationProgress=0;let w;this.mixTargetDelta=U=>{const L=U/1e3;JR(p.x,s.x,L),JR(p.y,s.y,L),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(dy(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),F9(this.relativeTarget,this.relativeTargetOrigin,m,L),w&&S9(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=ta()),Cl(w,this.relativeTarget)),C&&(this.animationValues=h,g9(h,c,this.latestValues,L,M,S)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=L},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(nf(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ii.update(()=>{mC.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=gg(0)),this.currentAnimation=h9(this.motionValue,[0,1e3],{...s,velocity:0,isSync:!0,onUpdate:o=>{this.mixTargetDelta(o),s.onUpdate&&s.onUpdate(o)},onStop:()=>{},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(A9),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:o,target:u,layout:c,latestValues:h}=s;if(!(!o||!u||!c)){if(this!==s&&this.layout&&c&&ok(this.options.animationType,this.layout.layoutBox,c.layoutBox)){u=this.target||ta();const p=Vs(this.layout.layoutBox.x);u.x.min=s.target.x.min,u.x.max=u.x.min+p;const m=Vs(this.layout.layoutBox.y);u.y.min=s.target.y.min,u.y.max=u.y.min+m}Cl(o,u),lg(o,h),cy(this.projectionDeltaWithTransform,this.layoutCorrected,o,h)}}registerSharedNode(s,o){this.sharedNodes.has(s)||this.sharedNodes.set(s,new T9),this.sharedNodes.get(s).add(o);const c=o.options.initialPromotionConfig;o.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(o):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){const{layoutId:s}=this.options;return s?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:s}=this.options;return s?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:o,preserveFollowOpacity:u}={}){const c=this.getStack();c&&c.promote(this,u),s&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let o=!1;const{latestValues:u}=s;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(o=!0),!o)return;const c={};u.z&&D2("z",s,c,this.animationValues);for(let h=0;h<O2.length;h++)D2(`rotate${O2[h]}`,s,c,this.animationValues),D2(`skew${O2[h]}`,s,c,this.animationValues);s.render();for(const h in c)s.setStaticValue(h,c[h]),this.animationValues&&(this.animationValues[h]=c[h]);s.scheduleRender()}applyProjectionStyles(s,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){s.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,s.visibility="",s.opacity="",s.pointerEvents=pC(o?.pointerEvents)||"",s.transform=u?u(this.latestValues,""):"none";return}const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){this.options.layoutId&&(s.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,s.pointerEvents=pC(o?.pointerEvents)||""),this.hasProjected&&!kv(this.latestValues)&&(s.transform=u?u({},""):"none",this.hasProjected=!1);return}s.visibility="";const h=c.animationValues||c.latestValues;this.applyTransformsToTarget();let p=N9(this.projectionDeltaWithTransform,this.treeScale,h);u&&(p=u(h,p)),s.transform=p;const{x:m,y:_}=this.projectionDelta;s.transformOrigin=`${m.origin*100}% ${_.origin*100}% 0`,c.animationValues?s.opacity=c===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:s.opacity=c===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const b in By){if(h[b]===void 0)continue;const{correct:C,applyTo:N,isCSSVariable:S}=By[b],M=p==="none"?h[b]:C(h[b],c);if(N){const w=N.length;for(let U=0;U<w;U++)s[N[U]]=M}else S?this.options.visualElement.renderState.vars[b]=M:s[b]=M}this.options.layoutId&&(s.pointerEvents=c===this?pC(o?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>s.currentAnimation?.stop()),this.root.nodes.forEach(QR),this.root.sharedNodes.clear()}}}function I9(t){t.updateLayout()}function w9(t){const n=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:e,measuredBox:r}=t.layout,{animationType:i}=t.options,a=n.source!==t.layout.source;i==="size"?Sl(h=>{const p=a?n.measuredBox[h]:n.layoutBox[h],m=Vs(p);p.min=e[h].min,p.max=p.min+m}):ok(i,n.layoutBox,e)&&Sl(h=>{const p=a?n.measuredBox[h]:n.layoutBox[h],m=Vs(e[h]);p.max=p.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+m)});const s=ug();cy(s,e,n.layoutBox);const o=ug();a?cy(o,t.applyTransform(r,!0),n.measuredBox):cy(o,e,n.layoutBox);const u=!rk(s);let c=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:p,layout:m}=h;if(p&&m){const _=ta();dy(_,n.layoutBox,p.layoutBox);const b=ta();dy(b,e,m.layoutBox),ik(_,b)||(c=!0),h.options.layoutRoot&&(t.relativeTarget=b,t.relativeTargetOrigin=_,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:e,snapshot:n,delta:o,layoutDelta:s,hasLayoutChanged:u,hasRelativeLayoutChanged:c})}else if(t.isLead()){const{onExitComplete:e}=t.options;e&&e()}t.options.transition=void 0}function R9(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function O9(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function D9(t){t.clearSnapshot()}function QR(t){t.clearMeasurements()}function XR(t){t.isLayoutDirty=!1}function U9(t){const{visualElement:n}=t.options;n&&n.getProps().onBeforeLayoutMeasure&&n.notify("BeforeLayoutMeasure"),t.resetTransform()}function ZR(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function x9(t){t.resolveTargetDelta()}function L9(t){t.calcProjection()}function k9(t){t.resetSkewAndRotation()}function P9(t){t.removeLeadSnapshot()}function JR(t,n,e){t.translate=ki(n.translate,0,e),t.scale=ki(n.scale,1,e),t.origin=n.origin,t.originPoint=n.originPoint}function eO(t,n,e,r){t.min=ki(n.min,e.min,r),t.max=ki(n.max,e.max,r)}function F9(t,n,e,r){eO(t.x,n.x,e.x,r),eO(t.y,n.y,e.y,r)}function B9(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const H9={duration:.45,ease:[.4,0,.1,1]},tO=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),nO=tO("applewebkit/")&&!tO("chrome/")?Math.round:Dl;function rO(t){t.min=nO(t.min),t.max=nO(t.max)}function G9(t){rO(t.x),rO(t.y)}function ok(t,n,e){return t==="position"||t==="preserve-aspect"&&!KG(YR(n),YR(e),.2)}function V9(t){return t!==t.root&&t.scroll?.wasRoot}const z9=sk({attachResizeListener:(t,n)=>Hy(t,"resize",n),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),U2={current:void 0},lk=sk({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!U2.current){const t=new z9({});t.mount(window),t.setOptions({layoutScroll:!0}),U2.current=t}return U2.current},resetTransform:(t,n)=>{t.style.transform=n!==void 0?n:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),j9={pan:{Feature:l9},drag:{Feature:o9,ProjectionNode:lk,MeasureLayout:ek}};function iO(t,n,e){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",e==="Start");const i="onHover"+e,a=r[i];a&&Ii.postRender(()=>a(n,dE(n)))}class q9 extends hf{mount(){const{current:n}=this.node;n&&(this.unmount=hH(n,(e,r)=>(iO(this.node,r,"Start"),i=>iO(this.node,i,"End"))))}unmount(){}}class $9 extends hf{constructor(){super(...arguments),this.isActive=!1}onFocus(){let n=!1;try{n=this.node.current.matches(":focus-visible")}catch{n=!0}!n||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=lE(Hy(this.node.current,"focus",()=>this.onFocus()),Hy(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function aO(t,n,e){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",e==="Start");const i="onTap"+(e==="End"?"":e),a=r[i];a&&Ii.postRender(()=>a(n,dE(n)))}class K9 extends hf{mount(){const{current:n}=this.node;n&&(this.unmount=mH(n,(e,r)=>(aO(this.node,r,"Start"),(i,{success:a})=>aO(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const hA=new WeakMap,x2=new WeakMap,Y9=t=>{const n=hA.get(t.target);n&&n(t)},W9=t=>{t.forEach(Y9)};function Q9({root:t,...n}){const e=t||document;x2.has(e)||x2.set(e,{});const r=x2.get(e),i=JSON.stringify(n);return r[i]||(r[i]=new IntersectionObserver(W9,{root:t,...n})),r[i]}function X9(t,n,e){const r=Q9(n);return hA.set(t,e),r.observe(t),()=>{hA.delete(t),r.unobserve(t)}}const Z9={some:0,all:1};class J9 extends hf{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:n={}}=this.node.getProps(),{root:e,margin:r,amount:i="some",once:a}=n,s={root:e?e.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:Z9[i]},o=u=>{const{isIntersecting:c}=u;if(this.isInView===c||(this.isInView=c,a&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:h,onViewportLeave:p}=this.node.getProps(),m=c?h:p;m&&m(u)};return X9(this.node.current,s,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:n,prevProps:e}=this.node;["amount","margin","root"].some(eV(n,e))&&this.startObserver()}unmount(){}}function eV({viewport:t={}},{viewport:n={}}={}){return e=>t[e]!==n[e]}const tV={inView:{Feature:J9},tap:{Feature:K9},focus:{Feature:$9},hover:{Feature:q9}},nV={layout:{ProjectionNode:lk,MeasureLayout:ek}},rV={...GG,...tV,...j9,...nV},Cu=rG(rV,mG);var sO="popstate";function iV(t={}){function n(r,i){let{pathname:a,search:s,hash:o}=r.location;return fA("",{pathname:a,search:s,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function e(r,i){return typeof i=="string"?i:Gy(i)}return sV(n,e,null,t)}function Pi(t,n){if(t===!1||t===null||typeof t>"u")throw new Error(n)}function Nu(t,n){if(!t){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function aV(){return Math.random().toString(36).substring(2,10)}function oO(t,n){return{usr:t.state,key:t.key,idx:n}}function fA(t,n,e=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof n=="string"?Ug(n):n,state:e,key:n&&n.key||r||aV()}}function Gy({pathname:t="/",search:n="",hash:e=""}){return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),e&&e!=="#"&&(t+=e.charAt(0)==="#"?e:"#"+e),t}function Ug(t){let n={};if(t){let e=t.indexOf("#");e>=0&&(n.hash=t.substring(e),t=t.substring(0,e));let r=t.indexOf("?");r>=0&&(n.search=t.substring(r),t=t.substring(0,r)),t&&(n.pathname=t)}return n}function sV(t,n,e,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,s=i.history,o="POP",u=null,c=h();c==null&&(c=0,s.replaceState({...s.state,idx:c},""));function h(){return(s.state||{idx:null}).idx}function p(){o="POP";let N=h(),S=N==null?null:N-c;c=N,u&&u({action:o,location:C.location,delta:S})}function m(N,S){o="PUSH";let M=fA(C.location,N,S);c=h()+1;let w=oO(M,c),U=C.createHref(M);try{s.pushState(w,"",U)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;i.location.assign(U)}a&&u&&u({action:o,location:C.location,delta:1})}function _(N,S){o="REPLACE";let M=fA(C.location,N,S);c=h();let w=oO(M,c),U=C.createHref(M);s.replaceState(w,"",U),a&&u&&u({action:o,location:C.location,delta:0})}function b(N){return oV(N)}let C={get action(){return o},get location(){return t(i,s)},listen(N){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(sO,p),u=N,()=>{i.removeEventListener(sO,p),u=null}},createHref(N){return n(i,N)},createURL:b,encodeLocation(N){let S=b(N);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:m,replace:_,go(N){return s.go(N)}};return C}function oV(t,n=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),Pi(e,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Gy(t);return r=r.replace(/ $/,"%20"),!n&&r.startsWith("//")&&(r=e+r),new URL(r,e)}function uk(t,n,e="/"){return lV(t,n,e,!1)}function lV(t,n,e,r){let i=typeof n=="string"?Ug(n):n,a=Sd(i.pathname||"/",e);if(a==null)return null;let s=ck(t);uV(s);let o=null;for(let u=0;o==null&&u<s.length;++u){let c=EV(a);o=_V(s[u],c,r)}return o}function ck(t,n=[],e=[],r="",i=!1){let a=(s,o,u=i,c)=>{let h={relativePath:c===void 0?s.path||"":c,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(r)&&u)return;Pi(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length)}let p=md([r,h.relativePath]),m=e.concat(h);s.children&&s.children.length>0&&(Pi(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),ck(s.children,n,m,p,u)),!(s.path==null&&!s.index)&&n.push({path:p,score:mV(p,s.index),routesMeta:m})};return t.forEach((s,o)=>{if(s.path===""||!s.path?.includes("?"))a(s,o);else for(let u of dk(s.path))a(s,o,!0,u)}),n}function dk(t){let n=t.split("/");if(n.length===0)return[];let[e,...r]=n,i=e.endsWith("?"),a=e.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let s=dk(r.join("/")),o=[];return o.push(...s.map(u=>u===""?a:[a,u].join("/"))),i&&o.push(...s),o.map(u=>t.startsWith("/")&&u===""?"/":u)}function uV(t){t.sort((n,e)=>n.score!==e.score?e.score-n.score:gV(n.routesMeta.map(r=>r.childrenIndex),e.routesMeta.map(r=>r.childrenIndex)))}var cV=/^:[\w-]+$/,dV=3,hV=2,fV=1,vV=10,pV=-2,lO=t=>t==="*";function mV(t,n){let e=t.split("/"),r=e.length;return e.some(lO)&&(r+=pV),n&&(r+=hV),e.filter(i=>!lO(i)).reduce((i,a)=>i+(cV.test(a)?dV:a===""?fV:vV),r)}function gV(t,n){return t.length===n.length&&t.slice(0,-1).every((r,i)=>r===n[i])?t[t.length-1]-n[n.length-1]:0}function _V(t,n,e=!1){let{routesMeta:r}=t,i={},a="/",s=[];for(let o=0;o<r.length;++o){let u=r[o],c=o===r.length-1,h=a==="/"?n:n.slice(a.length)||"/",p=GC({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},h),m=u.route;if(!p&&c&&e&&!r[r.length-1].route.index&&(p=GC({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!p)return null;Object.assign(i,p.params),s.push({params:i,pathname:md([a,p.pathname]),pathnameBase:NV(md([a,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(a=md([a,p.pathnameBase]))}return s}function GC(t,n){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[e,r]=yV(t.path,t.caseSensitive,t.end),i=n.match(e);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((c,{paramName:h,isOptional:p},m)=>{if(h==="*"){let b=o[m]||"";s=a.slice(0,a.length-b.length).replace(/(.)\/+$/,"$1")}const _=o[m];return p&&!_?c[h]=void 0:c[h]=(_||"").replace(/%2F/g,"/"),c},{}),pathname:a,pathnameBase:s,pattern:t}}function yV(t,n=!1,e=!0){Nu(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,u)=>(r.push({paramName:o,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,n?void 0:"i"),r]}function EV(t){try{return t.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return Nu(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${n}).`),t}}function Sd(t,n){if(n==="/")return t;if(!t.toLowerCase().startsWith(n.toLowerCase()))return null;let e=n.endsWith("/")?n.length-1:n.length,r=t.charAt(e);return r&&r!=="/"?null:t.slice(e)||"/"}var bV=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,CV=t=>bV.test(t);function SV(t,n="/"){let{pathname:e,search:r="",hash:i=""}=typeof t=="string"?Ug(t):t,a;if(e)if(CV(e))a=e;else{if(e.includes("//")){let s=e;e=e.replace(/\/\/+/g,"/"),Nu(!1,`Pathnames cannot have embedded double slashes - normalizing ${s} -> ${e}`)}e.startsWith("/")?a=uO(e.substring(1),"/"):a=uO(e,n)}else a=n;return{pathname:a,search:AV(r),hash:MV(i)}}function uO(t,n){let e=n.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?e.length>1&&e.pop():i!=="."&&e.push(i)}),e.length>1?e.join("/"):"/"}function L2(t,n,e,r){return`Cannot include a '${t}' character in a manually specified \`to.${n}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function TV(t){return t.filter((n,e)=>e===0||n.route.path&&n.route.path.length>0)}function hk(t){let n=TV(t);return n.map((e,r)=>r===n.length-1?e.pathname:e.pathnameBase)}function fk(t,n,e,r=!1){let i;typeof t=="string"?i=Ug(t):(i={...t},Pi(!i.pathname||!i.pathname.includes("?"),L2("?","pathname","search",i)),Pi(!i.pathname||!i.pathname.includes("#"),L2("#","pathname","hash",i)),Pi(!i.search||!i.search.includes("#"),L2("#","search","hash",i)));let a=t===""||i.pathname==="",s=a?"/":i.pathname,o;if(s==null)o=e;else{let p=n.length-1;if(!r&&s.startsWith("..")){let m=s.split("/");for(;m[0]==="..";)m.shift(),p-=1;i.pathname=m.join("/")}o=p>=0?n[p]:"/"}let u=SV(i,o),c=s&&s!=="/"&&s.endsWith("/"),h=(a||s===".")&&e.endsWith("/");return!u.pathname.endsWith("/")&&(c||h)&&(u.pathname+="/"),u}var md=t=>t.join("/").replace(/\/\/+/g,"/"),NV=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),AV=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,MV=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function IV(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var vk=["POST","PUT","PATCH","DELETE"];new Set(vk);var wV=["GET",...vk];new Set(wV);var xg=R.createContext(null);xg.displayName="DataRouter";var LS=R.createContext(null);LS.displayName="DataRouterState";R.createContext(!1);var pk=R.createContext({isTransitioning:!1});pk.displayName="ViewTransition";var RV=R.createContext(new Map);RV.displayName="Fetchers";var OV=R.createContext(null);OV.displayName="Await";var Nc=R.createContext(null);Nc.displayName="Navigation";var hE=R.createContext(null);hE.displayName="Location";var Md=R.createContext({outlet:null,matches:[],isDataRoute:!1});Md.displayName="Route";var uw=R.createContext(null);uw.displayName="RouteError";function DV(t,{relative:n}={}){Pi(fE(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:r}=R.useContext(Nc),{hash:i,pathname:a,search:s}=vE(t,{relative:n}),o=a;return e!=="/"&&(o=a==="/"?e:md([e,a])),r.createHref({pathname:o,search:s,hash:i})}function fE(){return R.useContext(hE)!=null}function Id(){return Pi(fE(),"useLocation() may be used only in the context of a <Router> component."),R.useContext(hE).location}var mk="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function gk(t){R.useContext(Nc).static||R.useLayoutEffect(t)}function UV(){let{isDataRoute:t}=R.useContext(Md);return t?$V():xV()}function xV(){Pi(fE(),"useNavigate() may be used only in the context of a <Router> component.");let t=R.useContext(xg),{basename:n,navigator:e}=R.useContext(Nc),{matches:r}=R.useContext(Md),{pathname:i}=Id(),a=JSON.stringify(hk(r)),s=R.useRef(!1);return gk(()=>{s.current=!0}),R.useCallback((u,c={})=>{if(Nu(s.current,mk),!s.current)return;if(typeof u=="number"){e.go(u);return}let h=fk(u,JSON.parse(a),i,c.relative==="path");t==null&&n!=="/"&&(h.pathname=h.pathname==="/"?n:md([n,h.pathname])),(c.replace?e.replace:e.push)(h,c.state,c)},[n,e,a,i,t])}R.createContext(null);function vE(t,{relative:n}={}){let{matches:e}=R.useContext(Md),{pathname:r}=Id(),i=JSON.stringify(hk(e));return R.useMemo(()=>fk(t,JSON.parse(i),r,n==="path"),[t,i,r,n])}function LV(t,n){return _k(t,n)}function _k(t,n,e,r,i){Pi(fE(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=R.useContext(Nc),{matches:s}=R.useContext(Md),o=s[s.length-1],u=o?o.params:{},c=o?o.pathname:"/",h=o?o.pathnameBase:"/",p=o&&o.route;{let M=p&&p.path||"";yk(c,!p||M.endsWith("*")||M.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${M}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${M}"> to <Route path="${M==="/"?"*":`${M}/*`}">.`)}let m=Id(),_;if(n){let M=typeof n=="string"?Ug(n):n;Pi(h==="/"||M.pathname?.startsWith(h),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${M.pathname}" was given in the \`location\` prop.`),_=M}else _=m;let b=_.pathname||"/",C=b;if(h!=="/"){let M=h.replace(/^\//,"").split("/");C="/"+b.replace(/^\//,"").split("/").slice(M.length).join("/")}let N=uk(t,{pathname:C});Nu(p||N!=null,`No routes matched location "${_.pathname}${_.search}${_.hash}" `),Nu(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${_.pathname}${_.search}${_.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=HV(N&&N.map(M=>Object.assign({},M,{params:Object.assign({},u,M.params),pathname:md([h,a.encodeLocation?a.encodeLocation(M.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?h:md([h,a.encodeLocation?a.encodeLocation(M.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:M.pathnameBase])})),s,e,r,i);return n&&S?R.createElement(hE.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",..._},navigationType:"POP"}},S):S}function kV(){let t=qV(),n=IV(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),e=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",t),s=R.createElement(R.Fragment,null,R.createElement("p",null," Hey developer "),R.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",R.createElement("code",{style:a},"ErrorBoundary")," or"," ",R.createElement("code",{style:a},"errorElement")," prop on your route.")),R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},n),e?R.createElement("pre",{style:i},e):null,s)}var PV=R.createElement(kV,null),FV=class extends R.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){this.props.onError?this.props.onError(t,n):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?R.createElement(Md.Provider,{value:this.props.routeContext},R.createElement(uw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function BV({routeContext:t,match:n,children:e}){let r=R.useContext(xg);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),R.createElement(Md.Provider,{value:t},e)}function HV(t,n=[],e=null,r=null,i=null){if(t==null){if(!e)return null;if(e.errors)t=e.matches;else if(n.length===0&&!e.initialized&&e.matches.length>0)t=e.matches;else return null}let a=t,s=e?.errors;if(s!=null){let h=a.findIndex(p=>p.route.id&&s?.[p.route.id]!==void 0);Pi(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),a=a.slice(0,Math.min(a.length,h+1))}let o=!1,u=-1;if(e)for(let h=0;h<a.length;h++){let p=a[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=h),p.route.id){let{loaderData:m,errors:_}=e,b=p.route.loader&&!m.hasOwnProperty(p.route.id)&&(!_||_[p.route.id]===void 0);if(p.route.lazy||b){o=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}let c=e&&r?(h,p)=>{r(h,{location:e.location,params:e.matches?.[0]?.params??{},errorInfo:p})}:void 0;return a.reduceRight((h,p,m)=>{let _,b=!1,C=null,N=null;e&&(_=s&&p.route.id?s[p.route.id]:void 0,C=p.route.errorElement||PV,o&&(u<0&&m===0?(yk("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,N=null):u===m&&(b=!0,N=p.route.hydrateFallbackElement||null)));let S=n.concat(a.slice(0,m+1)),M=()=>{let w;return _?w=C:b?w=N:p.route.Component?w=R.createElement(p.route.Component,null):p.route.element?w=p.route.element:w=h,R.createElement(BV,{match:p,routeContext:{outlet:h,matches:S,isDataRoute:e!=null},children:w})};return e&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?R.createElement(FV,{location:e.location,revalidation:e.revalidation,component:C,error:_,children:M(),routeContext:{outlet:null,matches:S,isDataRoute:!0},onError:c}):M()},null)}function cw(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function GV(t){let n=R.useContext(xg);return Pi(n,cw(t)),n}function VV(t){let n=R.useContext(LS);return Pi(n,cw(t)),n}function zV(t){let n=R.useContext(Md);return Pi(n,cw(t)),n}function dw(t){let n=zV(t),e=n.matches[n.matches.length-1];return Pi(e.route.id,`${t} can only be used on routes that contain a unique "id"`),e.route.id}function jV(){return dw("useRouteId")}function qV(){let t=R.useContext(uw),n=VV("useRouteError"),e=dw("useRouteError");return t!==void 0?t:n.errors?.[e]}function $V(){let{router:t}=GV("useNavigate"),n=dw("useNavigate"),e=R.useRef(!1);return gk(()=>{e.current=!0}),R.useCallback(async(i,a={})=>{Nu(e.current,mk),e.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:n,...a}))},[t,n])}var cO={};function yk(t,n,e){!n&&!cO[t]&&(cO[t]=!0,Nu(!1,e))}R.memo(KV);function KV({routes:t,future:n,state:e,unstable_onError:r}){return _k(t,void 0,e,r,n)}function Ek(t){Pi(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function YV({basename:t="/",children:n=null,location:e,navigationType:r="POP",navigator:i,static:a=!1}){Pi(!fE(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=t.replace(/^\/*/,"/"),o=R.useMemo(()=>({basename:s,navigator:i,static:a,future:{}}),[s,i,a]);typeof e=="string"&&(e=Ug(e));let{pathname:u="/",search:c="",hash:h="",state:p=null,key:m="default"}=e,_=R.useMemo(()=>{let b=Sd(u,s);return b==null?null:{location:{pathname:b,search:c,hash:h,state:p,key:m},navigationType:r}},[s,u,c,h,p,m,r]);return Nu(_!=null,`<Router basename="${s}"> is not able to match the URL "${u}${c}${h}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:R.createElement(Nc.Provider,{value:o},R.createElement(hE.Provider,{children:n,value:_}))}function WV({children:t,location:n}){return LV(vA(t),n)}function vA(t,n=[]){let e=[];return R.Children.forEach(t,(r,i)=>{if(!R.isValidElement(r))return;let a=[...n,i];if(r.type===R.Fragment){e.push.apply(e,vA(r.props.children,a));return}Pi(r.type===Ek,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Pi(!r.props.index||!r.props.children,"An index route cannot have child routes.");let s={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=vA(r.props.children,a)),e.push(s)}),e}var gC="get",_C="application/x-www-form-urlencoded";function kS(t){return t!=null&&typeof t.tagName=="string"}function QV(t){return kS(t)&&t.tagName.toLowerCase()==="button"}function XV(t){return kS(t)&&t.tagName.toLowerCase()==="form"}function ZV(t){return kS(t)&&t.tagName.toLowerCase()==="input"}function JV(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function ez(t,n){return t.button===0&&(!n||n==="_self")&&!JV(t)}var L1=null;function tz(){if(L1===null)try{new FormData(document.createElement("form"),0),L1=!1}catch{L1=!0}return L1}var nz=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function k2(t){return t!=null&&!nz.has(t)?(Nu(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${_C}"`),null):t}function rz(t,n){let e,r,i,a,s;if(XV(t)){let o=t.getAttribute("action");r=o?Sd(o,n):null,e=t.getAttribute("method")||gC,i=k2(t.getAttribute("enctype"))||_C,a=new FormData(t)}else if(QV(t)||ZV(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||o.getAttribute("action");if(r=u?Sd(u,n):null,e=t.getAttribute("formmethod")||o.getAttribute("method")||gC,i=k2(t.getAttribute("formenctype"))||k2(o.getAttribute("enctype"))||_C,a=new FormData(o,t),!tz()){let{name:c,type:h,value:p}=t;if(h==="image"){let m=c?`${c}.`:"";a.append(`${m}x`,"0"),a.append(`${m}y`,"0")}else c&&a.append(c,p)}}else{if(kS(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=gC,r=null,i=_C,s=t}return a&&i==="text/plain"&&(s=a,a=void 0),{action:r,method:e.toLowerCase(),encType:i,formData:a,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function hw(t,n){if(t===!1||t===null||typeof t>"u")throw new Error(n)}function iz(t,n,e){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${e}`:n&&Sd(r.pathname,n)==="/"?r.pathname=`${n.replace(/\/$/,"")}/_root.${e}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${e}`,r}async function az(t,n){if(t.id in n)return n[t.id];try{let e=await import(t.module);return n[t.id]=e,e}catch(e){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function sz(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function oz(t,n,e){let r=await Promise.all(t.map(async i=>{let a=n.routes[i.route.id];if(a){let s=await az(a,e);return s.links?s.links():[]}return[]}));return dz(r.flat(1).filter(sz).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function dO(t,n,e,r,i,a){let s=(u,c)=>e[c]?u.route.id!==e[c].route.id:!0,o=(u,c)=>e[c].pathname!==u.pathname||e[c].route.path?.endsWith("*")&&e[c].params["*"]!==u.params["*"];return a==="assets"?n.filter((u,c)=>s(u,c)||o(u,c)):a==="data"?n.filter((u,c)=>{let h=r.routes[u.route.id];if(!h||!h.hasLoader)return!1;if(s(u,c)||o(u,c))return!0;if(u.route.shouldRevalidate){let p=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:e[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function lz(t,n,{includeHydrateFallback:e}={}){return uz(t.map(r=>{let i=n.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),e&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function uz(t){return[...new Set(t)]}function cz(t){let n={},e=Object.keys(t).sort();for(let r of e)n[r]=t[r];return n}function dz(t,n){let e=new Set;return new Set(n),t.reduce((r,i)=>{let a=JSON.stringify(cz(i));return e.has(a)||(e.add(a),r.push({key:a,link:i})),r},[])}function bk(){let t=R.useContext(xg);return hw(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function hz(){let t=R.useContext(LS);return hw(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var fw=R.createContext(void 0);fw.displayName="FrameworkContext";function Ck(){let t=R.useContext(fw);return hw(t,"You must render this element inside a <HydratedRouter> element"),t}function fz(t,n){let e=R.useContext(fw),[r,i]=R.useState(!1),[a,s]=R.useState(!1),{onFocus:o,onBlur:u,onMouseEnter:c,onMouseLeave:h,onTouchStart:p}=n,m=R.useRef(null);R.useEffect(()=>{if(t==="render"&&s(!0),t==="viewport"){let C=S=>{S.forEach(M=>{s(M.isIntersecting)})},N=new IntersectionObserver(C,{threshold:.5});return m.current&&N.observe(m.current),()=>{N.disconnect()}}},[t]),R.useEffect(()=>{if(r){let C=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(C)}}},[r]);let _=()=>{i(!0)},b=()=>{i(!1),s(!1)};return e?t!=="intent"?[a,m,{}]:[a,m,{onFocus:x0(o,_),onBlur:x0(u,b),onMouseEnter:x0(c,_),onMouseLeave:x0(h,b),onTouchStart:x0(p,_)}]:[!1,m,{}]}function x0(t,n){return e=>{t&&t(e),e.defaultPrevented||n(e)}}function vz({page:t,...n}){let{router:e}=bk(),r=R.useMemo(()=>uk(e.routes,t,e.basename),[e.routes,t,e.basename]);return r?R.createElement(mz,{page:t,matches:r,...n}):null}function pz(t){let{manifest:n,routeModules:e}=Ck(),[r,i]=R.useState([]);return R.useEffect(()=>{let a=!1;return oz(t,n,e).then(s=>{a||i(s)}),()=>{a=!0}},[t,n,e]),r}function mz({page:t,matches:n,...e}){let r=Id(),{manifest:i,routeModules:a}=Ck(),{basename:s}=bk(),{loaderData:o,matches:u}=hz(),c=R.useMemo(()=>dO(t,n,u,i,r,"data"),[t,n,u,i,r]),h=R.useMemo(()=>dO(t,n,u,i,r,"assets"),[t,n,u,i,r]),p=R.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let b=new Set,C=!1;if(n.forEach(S=>{let M=i.routes[S.route.id];!M||!M.hasLoader||(!c.some(w=>w.route.id===S.route.id)&&S.route.id in o&&a[S.route.id]?.shouldRevalidate||M.hasClientLoader?C=!0:b.add(S.route.id))}),b.size===0)return[];let N=iz(t,s,"data");return C&&b.size>0&&N.searchParams.set("_routes",n.filter(S=>b.has(S.route.id)).map(S=>S.route.id).join(",")),[N.pathname+N.search]},[s,o,r,i,c,n,t,a]),m=R.useMemo(()=>lz(h,i),[h,i]),_=pz(h);return R.createElement(R.Fragment,null,p.map(b=>R.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...e})),m.map(b=>R.createElement("link",{key:b,rel:"modulepreload",href:b,...e})),_.map(({key:b,link:C})=>R.createElement("link",{key:b,nonce:e.nonce,...C})))}function gz(...t){return n=>{t.forEach(e=>{typeof e=="function"?e(n):e!=null&&(e.current=n)})}}var Sk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Sk&&(window.__reactRouterVersion="7.9.6")}catch{}function _z({basename:t,children:n,window:e}){let r=R.useRef();r.current==null&&(r.current=iV({window:e,v5Compat:!0}));let i=r.current,[a,s]=R.useState({action:i.action,location:i.location}),o=R.useCallback(u=>{R.startTransition(()=>s(u))},[s]);return R.useLayoutEffect(()=>i.listen(o),[i,o]),R.createElement(YV,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:i})}var Tk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Nk=R.forwardRef(function({onClick:n,discover:e="render",prefetch:r="none",relative:i,reloadDocument:a,replace:s,state:o,target:u,to:c,preventScrollReset:h,viewTransition:p,...m},_){let{basename:b}=R.useContext(Nc),C=typeof c=="string"&&Tk.test(c),N,S=!1;if(typeof c=="string"&&C&&(N=c,Sk))try{let F=new URL(window.location.href),Q=c.startsWith("//")?new URL(F.protocol+c):new URL(c),$=Sd(Q.pathname,b);Q.origin===F.origin&&$!=null?c=$+Q.search+Q.hash:S=!0}catch{Nu(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let M=DV(c,{relative:i}),[w,U,L]=fz(r,m),P=Cz(c,{replace:s,state:o,target:u,preventScrollReset:h,relative:i,viewTransition:p});function x(F){n&&n(F),F.defaultPrevented||P(F)}let H=R.createElement("a",{...m,...L,href:N||M,onClick:S||a?n:x,ref:gz(_,U),target:u,"data-discover":!C&&e==="render"?"true":void 0});return w&&!C?R.createElement(R.Fragment,null,H,R.createElement(vz,{page:M})):H});Nk.displayName="Link";var yz=R.forwardRef(function({"aria-current":n="page",caseSensitive:e=!1,className:r="",end:i=!1,style:a,to:s,viewTransition:o,children:u,...c},h){let p=vE(s,{relative:c.relative}),m=Id(),_=R.useContext(LS),{navigator:b,basename:C}=R.useContext(Nc),N=_!=null&&Mz(p)&&o===!0,S=b.encodeLocation?b.encodeLocation(p).pathname:p.pathname,M=m.pathname,w=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;e||(M=M.toLowerCase(),w=w?w.toLowerCase():null,S=S.toLowerCase()),w&&C&&(w=Sd(w,C)||w);const U=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let L=M===S||!i&&M.startsWith(S)&&M.charAt(U)==="/",P=w!=null&&(w===S||!i&&w.startsWith(S)&&w.charAt(S.length)==="/"),x={isActive:L,isPending:P,isTransitioning:N},H=L?n:void 0,F;typeof r=="function"?F=r(x):F=[r,L?"active":null,P?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let Q=typeof a=="function"?a(x):a;return R.createElement(Nk,{...c,"aria-current":H,className:F,ref:h,style:Q,to:s,viewTransition:o},typeof u=="function"?u(x):u)});yz.displayName="NavLink";var Ez=R.forwardRef(({discover:t="render",fetcherKey:n,navigate:e,reloadDocument:r,replace:i,state:a,method:s=gC,action:o,onSubmit:u,relative:c,preventScrollReset:h,viewTransition:p,...m},_)=>{let b=Nz(),C=Az(o,{relative:c}),N=s.toLowerCase()==="get"?"get":"post",S=typeof o=="string"&&Tk.test(o),M=w=>{if(u&&u(w),w.defaultPrevented)return;w.preventDefault();let U=w.nativeEvent.submitter,L=U?.getAttribute("formmethod")||s;b(U||w.currentTarget,{fetcherKey:n,method:L,navigate:e,replace:i,state:a,relative:c,preventScrollReset:h,viewTransition:p})};return R.createElement("form",{ref:_,method:N,action:C,onSubmit:r?u:M,...m,"data-discover":!S&&t==="render"?"true":void 0})});Ez.displayName="Form";function bz(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ak(t){let n=R.useContext(xg);return Pi(n,bz(t)),n}function Cz(t,{target:n,replace:e,state:r,preventScrollReset:i,relative:a,viewTransition:s}={}){let o=UV(),u=Id(),c=vE(t,{relative:a});return R.useCallback(h=>{if(ez(h,n)){h.preventDefault();let p=e!==void 0?e:Gy(u)===Gy(c);o(t,{replace:p,state:r,preventScrollReset:i,relative:a,viewTransition:s})}},[u,o,c,e,r,n,t,i,a,s])}var Sz=0,Tz=()=>`__${String(++Sz)}__`;function Nz(){let{router:t}=Ak("useSubmit"),{basename:n}=R.useContext(Nc),e=jV();return R.useCallback(async(r,i={})=>{let{action:a,method:s,encType:o,formData:u,body:c}=rz(r,n);if(i.navigate===!1){let h=i.fetcherKey||Tz();await t.fetch(h,e,i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:c,formMethod:i.method||s,formEncType:i.encType||o,flushSync:i.flushSync})}else await t.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:c,formMethod:i.method||s,formEncType:i.encType||o,replace:i.replace,state:i.state,fromRouteId:e,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,n,e])}function Az(t,{relative:n}={}){let{basename:e}=R.useContext(Nc),r=R.useContext(Md);Pi(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...vE(t||".",{relative:n})},s=Id();if(t==null){a.search=s.search;let o=new URLSearchParams(a.search),u=o.getAll("index");if(u.some(h=>h==="")){o.delete("index"),u.filter(p=>p).forEach(p=>o.append("index",p));let h=o.toString();a.search=h?`?${h}`:""}}return(!t||t===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(a.pathname=a.pathname==="/"?e:md([e,a.pathname])),Gy(a)}function Mz(t,{relative:n}={}){let e=R.useContext(pk);Pi(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Ak("useViewTransitionState"),i=vE(t,{relative:n});if(!e.isTransitioning)return!1;let a=Sd(e.currentLocation.pathname,r)||e.currentLocation.pathname,s=Sd(e.nextLocation.pathname,r)||e.nextLocation.pathname;return GC(i.pathname,s)!=null||GC(i.pathname,a)!=null}var Lg=R6();const Mk=R.createContext(),Iz=({children:t})=>{const[n,e]=R.useState("kr"),r=()=>{e(i=>i==="kr"?"en":"kr")};return ue.jsx(Mk.Provider,{value:{language:n,toggleLanguage:r},children:t})},pE=()=>R.useContext(Mk),wz=()=>{const[t,n]=R.useState(!1),[e,r]=R.useState(!1),{language:i,toggleLanguage:a}=pE();R.useEffect(()=>{const o=()=>{window.scrollY>50?n(!0):n(!1)};return window.addEventListener("scroll",o),()=>window.removeEventListener("scroll",o)},[]);const s=()=>{r(!e)};return ue.jsx("nav",{className:`navbar ${t?"scrolled":""}`,children:ue.jsxs("div",{className:"container navbar-container",children:[ue.jsxs("div",{className:"menu-icon",onClick:s,children:[ue.jsx("div",{className:`bar ${e?"open":""}`}),ue.jsx("div",{className:`bar ${e?"open":""}`}),ue.jsx("div",{className:`bar ${e?"open":""}`})]}),ue.jsxs("ul",{className:`nav-links ${e?"active":""}`,children:[ue.jsx("li",{children:ue.jsxs("a",{href:"https://github.com/MorningNembi",target:"_blank",rel:"noopener noreferrer",className:"github-link",children:[ue.jsx("svg",{width:"20",height:"20",viewBox:"0 0 16 16",fill:"currentColor",children:ue.jsx("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"})}),"GitHub"]})}),ue.jsx("li",{children:ue.jsxs("a",{href:"https://www.linkedin.com/in/%EC%A0%95%ED%83%9D-%EC%9D%B4-11b812360/",target:"_blank",rel:"noopener noreferrer",className:"linkedin-link",children:[ue.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:ue.jsx("path",{d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"})}),"LinkedIn"]})}),ue.jsx("li",{children:ue.jsx("button",{className:"lang-toggle",onClick:a,children:i==="kr"?"EN":"KR"})})]})]})})};var Ik={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},hO=E.createContext&&E.createContext(Ik),Rz=["attr","size","title"];function Oz(t,n){if(t==null)return{};var e=Dz(t,n),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(n.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(e[r]=t[r])}return e}function Dz(t,n){if(t==null)return{};var e={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(n.indexOf(r)>=0)continue;e[r]=t[r]}return e}function VC(){return VC=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},VC.apply(this,arguments)}function fO(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,r)}return e}function zC(t){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};n%2?fO(Object(e),!0).forEach(function(r){Uz(t,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):fO(Object(e)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))})}return t}function Uz(t,n,e){return n=xz(n),n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function xz(t){var n=Lz(t,"string");return typeof n=="symbol"?n:n+""}function Lz(t,n){if(typeof t!="object"||!t)return t;var e=t[Symbol.toPrimitive];if(e!==void 0){var r=e.call(t,n);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}function wk(t){return t&&t.map((n,e)=>E.createElement(n.tag,zC({key:e},n.attr),wk(n.child)))}function ff(t){return n=>E.createElement(kz,VC({attr:zC({},t.attr)},n),wk(t.child))}function kz(t){var n=e=>{var{attr:r,size:i,title:a}=t,s=Oz(t,Rz),o=i||e.size||"1em",u;return e.className&&(u=e.className),t.className&&(u=(u?u+" ":"")+t.className),E.createElement("svg",VC({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},e.attr,r,s,{className:u,style:zC(zC({color:t.color||e.color},e.style),t.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),a&&E.createElement("title",null,a),t.children)};return hO!==void 0?E.createElement(hO.Consumer,null,e=>n(e)):n(Ik)}function Rk(t){return ff({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"},child:[]}]})(t)}function Pz(t){return ff({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"},child:[]}]})(t)}function Fz(t){return ff({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M416 192c0-88.4-93.1-160-208-160S0 103.6 0 192c0 34.3 14.1 65.9 38 92-13.4 30.2-35.5 54.2-35.8 54.5-2.2 2.3-2.8 5.7-1.5 8.7S4.8 352 8 352c36.6 0 66.9-12.3 88.7-25 32.2 15.7 70.3 25 111.3 25 114.9 0 208-71.6 208-160zm122 220c23.9-26 38-57.7 38-92 0-66.9-53.5-124.2-129.3-148.1.9 6.6 1.3 13.3 1.3 20.1 0 105.9-107.7 192-240 192-10.8 0-21.3-.8-31.7-1.9C207.8 439.6 281.8 480 368 480c41 0 79.1-9.2 111.3-25 21.8 12.7 52.1 25 88.7 25 3.2 0 6.1-1.9 7.3-4.8 1.3-2.9.7-6.3-1.5-8.7-.3-.3-22.4-24.2-35.8-54.5z"},child:[]}]})(t)}function Bz(t){return ff({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(t)}function Hz(t){return ff({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M432,320H400a16,16,0,0,0-16,16V448H64V128H208a16,16,0,0,0,16-16V80a16,16,0,0,0-16-16H48A48,48,0,0,0,0,112V464a48,48,0,0,0,48,48H400a48,48,0,0,0,48-48V336A16,16,0,0,0,432,320ZM488,0h-128c-21.37,0-32.05,25.91-17,41l35.73,35.73L135,320.37a24,24,0,0,0,0,34L157.67,377a24,24,0,0,0,34,0L435.28,133.32,471,169c15,15,41,4.5,41-17V24A24,24,0,0,0,488,0Z"},child:[]}]})(t)}function Gz(t){return ff({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm64 236c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-64c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-72v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm96-114.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"},child:[]}]})(t)}function Vz(t){return ff({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M500.33 0h-47.41a12 12 0 0 0-12 12.57l4 82.76A247.42 247.42 0 0 0 256 8C119.34 8 7.9 119.53 8 256.19 8.1 393.07 119.1 504 256 504a247.1 247.1 0 0 0 166.18-63.91 12 12 0 0 0 .48-17.43l-34-34a12 12 0 0 0-16.38-.55A176 176 0 1 1 402.1 157.8l-101.53-4.87a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12h200.33a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12z"},child:[]}]})(t)}function Ok(t){return ff({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(t)}const zz=()=>ue.jsxs("footer",{className:"footer",children:[ue.jsxs("div",{className:"social-links",children:[ue.jsx("a",{href:"https://github.com/MorningNembi",target:"_blank",rel:"noopener noreferrer",children:ue.jsx(Rk,{})}),ue.jsx("a",{href:"https://www.linkedin.com/in/%EC%A0%95%ED%83%9D-%EC%9D%B4-11b812360/",target:"_blank",rel:"noopener noreferrer",children:ue.jsx(Pz,{})}),ue.jsx("a",{href:"mailto:cvb1060@naver.com",target:"_blank",rel:"noopener noreferrer",children:ue.jsx(Bz,{})})]}),ue.jsx("p",{className:"copyright",children:"Designed & Built by Jeong-Taek Lee"})]}),jz=({setLoading:t})=>{const[n,e]=R.useState(0);return R.useEffect(()=>{const r=setInterval(()=>{e(i=>i>=100?(clearInterval(r),setTimeout(()=>t(!1),500),100):i+2)},20);return()=>clearInterval(r)},[t]),ue.jsx(Cu.div,{className:"preloader",initial:{opacity:1},exit:{opacity:0,y:-50,transition:{duration:.8,ease:"easeInOut"}},children:ue.jsxs("div",{className:"preloader-content",children:[ue.jsxs("div",{className:"loading-text",children:[ue.jsxs("span",{className:"loading-percentage",children:[n,"%"]}),ue.jsx("h2",{children:"Loading..."})]}),ue.jsx("div",{className:"loader-container",children:ue.jsx("div",{className:"progress-bar",children:ue.jsx(Cu.div,{className:"progress-fill",style:{width:`${n}%`}})})})]})})},qz=()=>{const{pathname:t}=Id();return R.useEffect(()=>{window.scrollTo(0,0)},[t]),null},mE={kr:{hero:{greeting:", ",name:"",ending:".",subtitle:"AI Engineer & Tech Lover",description:`    .
    AI  .`,cta:" "},about:{title:"About Me",intro:["**AI    **","    .","    ,   AI  .","**My Values**","    ","    ","     "],tabs:{experience:"Experience",education:"Education",activities:"Activities",certs:"Certifications",awards:"Awards"},experience:[{title:"AI Synergy Planning Intern",company:"NAVER Cloud",period:"2025.09 ~ ",description:["**HyperClova X  AI    **","MCP OAuth      Naver Remote MCP ","**Clova Studio      **","MCP   (3: OAuth   MCP    ,   )","LangChain v1.0  :    AI( , 12   )"],tags:["AI Research","MCP","Agent","HyperClova X","Planning"]},{title:" AI 2",company:"Kakao Tech Bootcamp",period:"2025.02 ~ 2025.08",description:["**     ( )**","URL       ","   (, ) Multi-Agent ","**      (TestPrep AI)**","     (Top 6 / 26)"," RAG      "],tags:["Agent","RAG","LangChain","FastAPI","Python"]}],education:[{title:"",degree:" ",period:"2019.03 - 2025.08",description:[" 3.50/4.5"]}],activities:[{title:" ",role:"",period:"2022.07 ~ 2024.06",description:["    "]},{title:" ",role:"",period:"2022.01 ~ 2022.12"}],certs:[{title:"",issuer:"",date:"2024.07.12"},{title:"SQLD",issuer:"",date:"2023.12.15"},{title:"ADsP",issuer:"",date:"2023.06.16"}],awards:[{title:"Kakaotech Bootcamp Hackathon Finalist",issuer:"Kakaotech bootcamp",date:"2025",description:["TestPrep AI ","26    6  "]},{title:"",issuer:"",date:"2024",description:[" "]}]},portfolio:{title:"Projects",filters:{all:"",web:" ",ai:"AI/ML",research:""},modal:{overview:"",role:"",techStack:" ",keyFeatures:" ",achievement:"",links:{github:"GitHub",demo:"Live",paper:"Paper"}},projects:[{id:1,title:"Clova Studio  ",category:"Technical Writing",image:"/src/assets/clova-cookbook.png",description:"Clova Studio         ",details:{problem:"Clova Studio       ",solution:"LangChain, MCP, Agent            .",role:"Technical Writer & Developer",tech:["Clova Studio","MCP","LangChain","OAuth 2.0","FastMCP"],features:["MCP    3: OAuth   MCP   ( )","LangChain v1.0  :    AI ( , 12   )","LangChain DeepAgent  , Agentic RAG    ","       ","      "],achievement:"    MCP  LangChain  ,        ."},links:{demo:"https://www.ncloud-forums.com/forum/6/",github:null}},{id:2,title:"  (Moongsan)",category:"AI & Data Science",image:"src/assets/moongsan.png",description:"     & AI ",details:{problem:"  ( ,  )   ",solution:" AI  URL            .",role:"AI Engineer & Architecture Design",tech:["LangChain","LangGraph","FastAPI","MySQL","Vector DB"],features:["URL     (LangGraph  )","    (Multi-Agent Supervisor)","   ","Docker   "],achievement:"   1  100+  ,    80%  ",troubleshooting:"Vector DB      ( + )     35% ."},links:{demo:"https://moongsan.com/",github:"https://github.com/100-hours-a-week/14-YG-AI/tree/dev"}},{id:3,title:"TestPrep AI",category:"AI & Data Science",image:"src/assets/testprep.png",description:"      ",details:{problem:"       ",solution:"RAG      LLM       .",role:"AI Pipeline Architect & Backend Dev",tech:["Python","LangChain","OpenAI","Chroma","FastAPI"],features:["    (RAG)","PDF/    ","   / ","FastAPI  LLM   "],achievement:"     (Top 6 / 26),    85% ",troubleshooting:"PDF         PyMuPDF OCR     ."},links:{demo:null,github:"https://github.com/Test-Prep-AI/Model/tree/main"}},{id:4,title:"Remote MCP (Naver & Kakao)",category:"Research",image:"https://github.com/user-attachments/assets/5e38b6ae-78a9-4556-8678-9c2086912f7d",description:"OAuth   MCP  ( /,  )",details:{problem:"MCP        ",solution:"FastMCP OAuth 2.0       MCP  .",role:"Sole Developer",tech:["FastMCP","Python","OAuth 2.0","OIDC","CLOVA Studio API"],features:[": OAuth 2.0  (PKCE ),  ,   ",": OAuth 2.0 & OIDC ,  ,   ","   ","     "],achievement:"MCP  OAuth      50+  ",troubleshooting:"PKCE    state          ."},links:{demo:null,github:null}}]},resume:{title:"Skills",skillsTitle:"Technical Skills"}},en:{hero:{greeting:"Hi, I am",name:"JeongTaek Lee.",ending:"",subtitle:"AI Developer & Tech Lover",description:`I am an AI Developer focusing on user-centric AI services.
I strive to create intuitive and useful AI solutions.`,cta:"Check out my work"},about:{title:"About Me",intro:["**AI Developer Who Puts People First**","No matter how sophisticated AI technology is, if it fails to properly understand user intent and respond accordingly, it cannot be considered good technology.","I want to create intuitive and useful AI services by viewing problems from the user's perspective!","**My Values**"," Everything should be fun"," I pursue speed with safety"," I try to speak simply and listen deeply"],tabs:{experience:"Experience",education:"Education",activities:"Activities",certs:"Certifications",awards:"Awards"},experience:[{title:"AI Research & Planning Intern",company:"NAVER Cloud",period:"2025.09 ~ Present",description:["**AI Experience Research & Planning using HyperClova X**","Researched OAuth in MCP and developed Naver Remote MCP with Naver Login integration","AI industry research and feature planning","Created cookbooks for Clova Studio and Naver Cloud blog"],tags:["AI Research","MCP","OAuth","HyperClova X","Planning"]},{title:"Generative AI Track 2nd Cohort",company:"Kakao Tech Bootcamp",period:"2025.02 ~ 2025.08",description:["**Moongsan - Location-based Group Buying Service Development**","Developed automatic group buying post generation feature based on URLs","Developed AI assistant for service usage (search, participation) using natural language","**TestPrep AI - Document-based Question Generation Service Development**","Advanced to finals (Top 6 out of 26 teams) in Kakao Tech Hackathon","Built core RAG pipeline and conducted prompt engineering"],tags:["Generative AI","RAG","LangChain","FastAPI","Python"]}],education:[{title:"University of Seoul",degree:"Bachelor of Geoinformatics",period:"2019.03 - 2025.08",description:["GPA 3.50/4.5"]}],activities:[{title:"Spatial Database Lab",role:"Undergraduate Researcher",period:"2022.07 ~ 2024.06",description:["Spatial data analysis and visualization"]},{title:"Department of Geoinformatics Student Council",role:"Staff Member",period:"2022.01 ~ 2022.12"}],certs:[{title:"Big Data Analysis Engineer",issuer:"K-Data",date:""},{title:"SQLD",issuer:"K-Data",date:""},{title:"ADsP",issuer:"K-Data",date:""}],awards:[{title:"Kakaotech Bootcamp Hackathon Finalist",issuer:"Kakaotech bootcamp",date:"2025",description:["TestPrep AI Project","Selected as Top 6 out of 26 teams"]},{title:"Korea Spatial Information Industry Promotion Agency Award",issuer:"Korea Spatial Information Industry Promotion Agency",date:"2024",description:["Spatial Information Competition Award"]}]},portfolio:{title:"Projects",filters:{all:"All",web:"Web Dev",ai:"AI/ML",research:"Research"},modal:{overview:"Overview",role:"Role",techStack:"Tech Stack",keyFeatures:"Key Features",links:{github:"GitHub",demo:"Live",paper:"Paper"}},projects:[{id:1,title:"Clova Studio Cookbook Writing",category:"Technical Writing",image:"/src/assets/clova-cookbook.png",description:"Technical documentation for Clova Studio and Naver Cloud Platform",details:{problem:"Creating cookbooks for Clova Studio and Naver Cloud blog",solution:"Authored a series of practical cookbooks on various topics including LangChain, MCP, and Agent to lower the learning curve for developers.",role:"Technical Writer & Developer",tech:["Clova Studio","MCP","LangChain","OAuth 2.0","FastMCP"],features:["MCP Practical Cookbook Series Part 3: Building MCP Server with OAuth Integration (Main Author)","Building Multi-Agent with LangChain v1.0: Report AI with Middleware (Completed, scheduled for mid-December)","Upcoming cookbooks on LangChain DeepAgent and Agentic RAG","Practical code examples and detailed explanations","Continuous updates based on developer community feedback"],achievement:"The cookbook series helped developers learn MCP and LangChain usage, published on Naver Cloud official blog with high view counts."},links:{demo:"https://www.ncloud-forums.com/forum/6/",github:null}},{id:2,title:"Moongsan",category:"AI & Data Science",image:"src/assets/moongsan.png",description:"Location-based Group Buying Service & AI Automation",details:{problem:"Cumbersome procedures for group buying (post creation, participation management) and difficulty in finding information",solution:"Maximized convenience by using Generative AI to automatically create posts from URLs and a natural language chatbot for service interaction.",role:"AI Engineer & Architecture Design",tech:["LangChain","LangGraph","FastAPI","MySQL","Vector DB"],features:["Auto Post Generation from URL (LangGraph crawling pipeline)","Natural Language Service Control (Multi-Agent Supervisor)","Hybrid Search System Design","Docker-based Container Deployment"],achievement:"Acquired 100+ users within 1 month of service launch, achieved 80% reduction in post creation time",troubleshooting:"Improved search accuracy by 35% by introducing hybrid search (keyword + vector) method to enhance Vector DB search accuracy."},links:{demo:"https://moongsan.com/",github:"https://github.com/100-hours-a-week/14-YG-AI/tree/dev"}},{id:3,title:"TestPrep AI",category:"AI & Data Science",image:"src/assets/testprep.png",description:"Document-based Question Generation Service",details:{problem:"Difficulty in creating self-study questions from learning materials",solution:"Built a service that analyzes uploaded documents via RAG pipeline and automatically generates multiple-choice questions using LLM.",role:"AI Pipeline Architect & Backend Dev",tech:["Python","LangChain","OpenAI","Chroma","FastAPI"],features:["Document-based Question Generation (RAG)","PDF/Text Document Upload & Visualization","Quiz Solving & Answer/Explanation","FastAPI-based LLM Inference Server"],achievement:"Advanced to Kakao Tech Hackathon finals (Top 6 / 26 teams), achieved 85% question generation accuracy",troubleshooting:"Applied hybrid parsing method combining PyMuPDF and OCR to solve table and image processing issues during PDF parsing."},links:{demo:null,github:"https://github.com/Test-Prep-AI/Model/tree/main"}},{id:4,title:"Remote MCP (Naver & Kakao)",category:"Research",image:"https://github.com/user-attachments/assets/5e38b6ae-78a9-4556-8678-9c2086912f7d",description:"MCP Server with OAuth Integration (Naver Search/Calendar, KakaoTalk Messaging)",details:{problem:"Need for integrating external services requiring user authentication in MCP server",solution:"Implemented MCP servers integrating Naver and Kakao services by connecting FastMCP with OAuth 2.0.",role:"Sole Developer",tech:["FastMCP","Python","OAuth 2.0","OIDC","CLOVA Studio API"],features:["Naver: OAuth 2.0 Integration (PKCE support), Web Search, Calendar Schedule Addition","Kakao: OAuth 2.0 & OIDC Integration, Message Sending, Friend List Retrieval","Responsive Message Viewer","Auto Consent Processing & Token Management"],achievement:"Presented OAuth authentication integration case to MCP ecosystem, gained 50+ stars in community",troubleshooting:"Introduced session-based state management to resolve state parameter validation errors during PKCE flow implementation."},links:{demo:null,github:null}}]},resume:{title:"Resume & Skills",skillsTitle:"Technical Skills",download:"Download PDF"}}},$z=()=>{const{language:t}=pE(),n=mE[t].hero,e=r=>{r.preventDefault();const i=document.querySelector("#projects");if(i){const a=i.offsetTop-80;window.scrollTo({top:a,behavior:"smooth"})}};return ue.jsx("section",{id:"home",className:"hero-section",children:ue.jsxs("div",{className:"container hero-container",children:[ue.jsx(Cu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:ue.jsxs("h1",{className:"hero-title-combined",children:[ue.jsxs("span",{className:"hero-greeting-text",children:[n.greeting," "]}),ue.jsx("span",{className:"hero-name",children:n.name}),ue.jsx("span",{className:"hero-greeting-text",children:n.ending})]})}),ue.jsx(Cu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:ue.jsx("h3",{className:"hero-subtitle",children:n.subtitle})}),ue.jsx(Cu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:ue.jsx("p",{className:"hero-description",children:n.description.split(`
`).map((r,i)=>ue.jsxs(E.Fragment,{children:[r,i<n.description.split(`
`).length-1&&ue.jsx("br",{className:"desktop-break"})]},i))})}),ue.jsx(Cu.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.5},children:ue.jsx("a",{href:"#projects",className:"btn-primary",onClick:e,children:n.cta})})]})})},Kz="/assets/profile-BKU4iKrf.jpeg",Yz=()=>{const[t,n]=R.useState("experience"),{language:e}=pE(),r=mE[e].about,i=[{id:"experience",label:r.tabs.experience},{id:"education",label:r.tabs.education},{id:"activities",label:r.tabs.activities},{id:"certs",label:r.tabs.certs},{id:"awards",label:r.tabs.awards}],a=s=>s.split(/(\*\*.*?\*\*)/g).map((u,c)=>u.startsWith("**")&&u.endsWith("**")?ue.jsx("strong",{children:u.slice(2,-2)},c):u);return ue.jsx("section",{id:"about",className:"section about-section",children:ue.jsxs("div",{className:"container",children:[ue.jsx("h2",{className:"section-title",children:r.title}),ue.jsxs("div",{className:"about-content",children:[ue.jsxs("div",{className:"about-profile",children:[ue.jsx("div",{className:"profile-image-wrapper",children:ue.jsx("div",{className:"image-container",children:ue.jsx(Cu.img,{src:Kz,alt:"Profile",className:"profile-image",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3}})})}),ue.jsx("div",{className:"profile-text",children:r.intro.map((s,o)=>ue.jsx("p",{children:a(s)},o))})]}),ue.jsxs("div",{className:"about-tabs-container",children:[ue.jsx("div",{className:"tabs-list",children:i.map(s=>ue.jsx("button",{className:`tab-btn ${t===s.id?"active":""}`,onClick:()=>n(s.id),children:s.label},s.id))}),ue.jsx("div",{className:"tab-content",children:ue.jsx(Cu.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3},children:r[t].map((s,o)=>ue.jsxs("div",{className:"resume-item",children:[ue.jsxs("div",{className:"resume-header",children:[ue.jsx("h4",{children:s.title}),ue.jsx("span",{className:"resume-period",children:s.period||s.date})]}),s.company&&ue.jsx("p",{className:"resume-company",children:s.company}),s.degree&&ue.jsx("p",{className:"resume-degree",children:s.degree}),s.role&&ue.jsx("p",{className:"resume-role",children:s.role}),s.issuer&&ue.jsx("p",{className:"resume-issuer",children:s.issuer}),s.description&&ue.jsx("ul",{className:"resume-description",children:s.description.map((u,c)=>ue.jsx("li",{children:a(u)},c))}),s.tags&&ue.jsx("div",{className:"resume-tags",children:s.tags.map(u=>ue.jsx("span",{className:"tag",children:u},u))})]},o))},t)})]})]})]})})},Wz=()=>{const[t,n]=R.useState(null),{language:e}=pE(),r=mE[e].portfolio,i=r.projects.find(a=>a.id===t);return ue.jsx("section",{id:"projects",className:"section portfolio-section",children:ue.jsxs("div",{className:"container",children:[ue.jsx("h2",{className:"section-title",children:r.title}),ue.jsx("div",{className:"portfolio-grid",children:ue.jsx(iA,{mode:"popLayout",children:r.projects.map(a=>ue.jsx(Cu.div,{layoutId:`card-${a.id}`,className:"portfolio-card",onClick:()=>n(a.id),whileHover:{y:-5},initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.15},children:ue.jsxs("div",{className:"card-content",children:[ue.jsx("span",{className:"card-category",children:a.category}),ue.jsx("h3",{className:"card-title",children:a.title}),ue.jsx("p",{className:"card-description",children:a.description}),ue.jsx("div",{className:"card-footer",children:ue.jsx("span",{className:"read-more",children:"Read More "})})]})},a.id))})}),ue.jsx(iA,{children:t&&ue.jsx("div",{className:"modal-overlay",onClick:()=>n(null),children:ue.jsxs(Cu.div,{layoutId:`card-${t}`,className:"modal-content",onClick:a=>a.stopPropagation(),children:[ue.jsx("button",{className:"modal-close",onClick:()=>n(null),children:ue.jsx(Ok,{})}),ue.jsxs("div",{className:"modal-header",children:[ue.jsx("img",{src:i.image,alt:i.title,className:"modal-image"}),ue.jsxs("div",{className:"modal-title-row",children:[ue.jsxs("div",{children:[ue.jsx("span",{className:"modal-category",children:i.category}),ue.jsx("h2",{children:i.title})]}),ue.jsxs("div",{className:"modal-links",children:[i.links.github&&ue.jsxs("a",{href:i.links.github,target:"_blank",rel:"noopener noreferrer",className:"icon-link",children:[ue.jsx(Rk,{})," ",r.modal.links.github]}),i.links.demo&&ue.jsxs("a",{href:i.links.demo,target:"_blank",rel:"noopener noreferrer",className:"icon-link",children:[ue.jsx(Hz,{})," ",r.modal.links.demo]}),i.links.paper&&ue.jsxs("a",{href:i.links.paper,target:"_blank",rel:"noopener noreferrer",className:"icon-link",children:[ue.jsx(Gz,{})," ",r.modal.links.paper]})]})]})]}),ue.jsxs("div",{className:"modal-body",children:[ue.jsxs("div",{className:"modal-section",children:[ue.jsx("h3",{children:r.modal.overview}),ue.jsx("p",{children:i.details.problem}),ue.jsx("p",{children:i.details.solution})]}),ue.jsxs("div",{className:"modal-row",children:[ue.jsxs("div",{className:"modal-col",children:[ue.jsx("h3",{children:r.modal.role}),ue.jsx("p",{children:i.details.role})]}),ue.jsxs("div",{className:"modal-col",children:[ue.jsx("h3",{children:r.modal.techStack}),ue.jsx("div",{className:"tech-tags",children:i.details.tech.map(a=>ue.jsx("span",{className:"tech-tag",children:a},a))})]})]}),ue.jsxs("div",{className:"modal-section",children:[ue.jsx("h3",{children:r.modal.keyFeatures}),ue.jsx("ul",{className:"feature-list",children:i.details.features.map((a,s)=>ue.jsx("li",{children:a},s))})]}),i.details.achievement&&ue.jsxs("div",{className:"modal-section",children:[ue.jsx("h3",{children:r.modal.achievement}),ue.jsx("p",{children:i.details.achievement})]}),i.details.troubleshooting&&ue.jsxs("div",{className:"modal-section",children:[ue.jsx("h3",{children:""}),ue.jsx("p",{children:i.details.troubleshooting})]})]})]})})})]})})},Qz=()=>{const{language:t}=pE(),n=mE[t].resume;return ue.jsx("section",{id:"resume",className:"section resume-section",children:ue.jsxs("div",{className:"container",children:[ue.jsx("h2",{className:"section-title",children:n.title}),ue.jsxs("div",{className:"skills-content",children:[ue.jsxs("div",{className:"skills-section",children:[ue.jsx("h3",{children:"I use it often"}),ue.jsxs("div",{className:"skills-category",children:[ue.jsx("h4",{children:"AI/ML & Data"}),ue.jsxs("div",{className:"skills-badges",children:[ue.jsx("img",{src:"https://img.shields.io/badge/LangChain-1C3C3C?style=for-the-badge&logo=langchain&logoColor=white",alt:"LangChain"}),ue.jsx("img",{src:"https://img.shields.io/badge/vLLM-8A2BE2?style=for-the-badge&logoColor=white",alt:"vLLM"}),ue.jsx("img",{src:"https://img.shields.io/badge/RAG-FF6B6B?style=for-the-badge&logoColor=white",alt:"RAG"}),ue.jsx("img",{src:"https://img.shields.io/badge/MCP-2ECC71?style=for-the-badge&logoColor=white",alt:"MCP"}),ue.jsx("img",{src:"https://img.shields.io/badge/PyTorch-EE4C2C?style=for-the-badge&logo=pytorch&logoColor=white",alt:"PyTorch"}),ue.jsx("img",{src:"https://img.shields.io/badge/Scikit--learn-F7931E?style=for-the-badge&logo=scikit-learn&logoColor=white",alt:"Scikit-learn"}),ue.jsx("img",{src:"https://img.shields.io/badge/Pandas-150458?style=for-the-badge&logo=pandas&logoColor=white",alt:"Pandas"})]})]}),ue.jsxs("div",{className:"skills-category",children:[ue.jsx("h4",{children:"Backend & Programming"}),ue.jsxs("div",{className:"skills-badges",children:[ue.jsx("img",{src:"https://img.shields.io/badge/Python-3776AB?style=for-the-badge&logo=python&logoColor=white",alt:"Python"}),ue.jsx("img",{src:"https://img.shields.io/badge/PostgreSQL-336791?style=for-the-badge&logo=postgresql&logoColor=white",alt:"PostgreSQL"}),ue.jsx("img",{src:"https://img.shields.io/badge/FastAPI-009688?style=for-the-badge&logo=fastapi&logoColor=white",alt:"FastAPI"}),ue.jsx("img",{src:"https://img.shields.io/badge/Git-F05032?style=for-the-badge&logo=git&logoColor=white",alt:"Git"}),ue.jsx("img",{src:"https://img.shields.io/badge/Docker-2496ED?style=for-the-badge&logo=docker&logoColor=white",alt:"Docker"})]})]}),ue.jsxs("div",{className:"skills-category",children:[ue.jsx("h4",{children:"Tools & Others"}),ue.jsxs("div",{className:"skills-badges",children:[ue.jsx("img",{src:"https://img.shields.io/badge/GCP-4285F4?style=for-the-badge&logo=google-cloud&logoColor=white",alt:"GCP"}),ue.jsx("img",{src:"https://img.shields.io/badge/QGIS-589632?style=for-the-badge&logo=qgis&logoColor=white",alt:"QGIS"})]})]})]}),ue.jsxs("div",{className:"skills-section",children:[ue.jsx("h3",{children:"I've used it before"}),ue.jsxs("div",{className:"skills-badges",children:[ue.jsx("img",{src:"https://img.shields.io/badge/MySQL-4479A1?style=for-the-badge&logo=mysql&logoColor=white",alt:"MySQL"}),ue.jsx("img",{src:"https://img.shields.io/badge/AWS-FF9900?style=for-the-badge&logo=amazon-ec2&logoColor=white",alt:"AWS"})]})]})]})]})})},Xz=()=>ue.jsxs(ue.Fragment,{children:[ue.jsx($z,{}),ue.jsx(Yz,{}),ue.jsx(Wz,{}),ue.jsx(Qz,{})]}),Zz=({onClick:t,isOpen:n})=>ue.jsxs("button",{className:`chatbot-button ${n?"open":""}`,onClick:t,"aria-label":"Open chatbot",children:[ue.jsx(Fz,{className:"chatbot-icon"}),ue.jsx("span",{className:"pulse-indicator"})]});var pA=function(t,n){return pA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},pA(t,n)};function Dk(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");pA(t,n);function e(){this.constructor=t}t.prototype=n===null?Object.create(n):(e.prototype=n.prototype,new e)}var J=function(){return J=Object.assign||function(n){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a])}return n},J.apply(this,arguments)};function si(t,n,e,r){function i(a){return a instanceof e?a:new e(function(s){s(a)})}return new(e||(e=Promise))(function(a,s){function o(h){try{c(r.next(h))}catch(p){s(p)}}function u(h){try{c(r.throw(h))}catch(p){s(p)}}function c(h){h.done?a(h.value):i(h.value).then(o,u)}c((r=r.apply(t,n||[])).next())})}function oi(t,n){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=o(0),s.throw=o(1),s.return=o(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(h){return u([c,h])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(e=0)),e;)try{if(r=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){e.label=c[1];break}if(c[0]===6&&e.label<a[1]){e.label=a[1],a=c;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(c);break}a[2]&&e.ops.pop(),e.trys.pop();continue}c=n.call(t,e)}catch(h){c=[6,h],i=0}finally{r=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Xe(t,n,e){if(e||arguments.length===2)for(var r=0,i=n.length,a;r<i;r++)(a||!(r in n))&&(a||(a=Array.prototype.slice.call(n,0,r)),a[r]=n[r]);return t.concat(a||Array.prototype.slice.call(n))}const L0={reactions:"reactions",message_search_v3:"message_search_v3",enable_og_tag:"enable_og_tag"},Jz="modulepreload",ej=function(t){return"/"+t},vO={},hy=function(n,e,r){let i=Promise.resolve();if(e&&e.length>0){let u=function(c){return Promise.all(c.map(h=>Promise.resolve(h).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=s?.nonce||s?.getAttribute("nonce");i=u(e.map(c=>{if(c=ej(c),c in vO)return;vO[c]=!0;const h=c.endsWith(".css"),p=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${p}`))return;const m=document.createElement("link");if(m.rel=h?"stylesheet":Jz,h||(m.as="script"),m.crossOrigin="",m.href=c,o&&m.setAttribute("nonce",o),document.head.appendChild(m),h)return new Promise((_,b)=>{m.addEventListener("load",_),m.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return i.then(s=>{for(const o of s||[])o.status==="rejected"&&a(o.reason);return n().catch(a)})};var mA=function(t,n){return mA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},mA(t,n)};function G(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function e(){this.constructor=t}mA(t,n),t.prototype=n===null?Object.create(n):(e.prototype=n.prototype,new e)}var Z=function(){return Z=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t},Z.apply(this,arguments)};function tj(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]])}return e}function D(t,n,e,r){return new(e||(e=Promise))((function(i,a){function s(c){try{u(r.next(c))}catch(h){a(h)}}function o(c){try{u(r.throw(c))}catch(h){a(h)}}function u(c){var h;c.done?i(c.value):(h=c.value,h instanceof e?h:new e((function(p){p(h)}))).then(s,o)}u((r=r.apply(t,[])).next())}))}function O(t,n){var e,r,i,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=o(0),s.throw=o(1),s.return=o(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(u){return function(c){return(function(h){if(e)throw new TypeError("Generator is already executing.");for(;s&&(s=0,h[0]&&(a=0)),a;)try{if(e=1,r&&(i=2&h[0]?r.return:h[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,h[1])).done)return i;switch(r=0,i&&(h=[2&h[0],i.value]),h[0]){case 0:case 1:i=h;break;case 4:return a.label++,{value:h[1],done:!1};case 5:a.label++,r=h[1],h=[0];continue;case 7:h=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||h[0]!==6&&h[0]!==2)){a=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){a.label=h[1];break}if(h[0]===6&&a.label<i[1]){a.label=i[1],i=h;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(h);break}i[2]&&a.ops.pop(),a.trys.pop();continue}h=n.call(t,a)}catch(p){h=[6,p],r=0}finally{e=i=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}})([u,c])}}}function Fe(t){var n=typeof Symbol=="function"&&Symbol.iterator,e=n&&t[n],r=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function dt(t,n){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var r,i,a=e.call(t),s=[];try{for(;(n===void 0||n-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(o){i={error:o}}finally{try{r&&!r.done&&(e=a.return)&&e.call(a)}finally{if(i)throw i.error}}return s}function wt(t,n,e){if(arguments.length===2)for(var r,i=0,a=n.length;i<a;i++)!r&&i in n||(r||(r=Array.prototype.slice.call(n,0,i)),r[i]=n[i]);return t.concat(r||Array.prototype.slice.call(n))}var et,Uk="4.20.2",Qh=(function(){function t(){}return Object.defineProperty(t,"OS_VERSION",{get:function(){return typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.replace(/,/g,"."):"noAgent"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"SDK_VERSION",{get:function(){return Uk},enumerable:!1,configurable:!0}),Object.defineProperty(t,"SDK_MAJOR_VERSION",{get:function(){return t.SDK_VERSION.split(".")[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t,"DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL",{get:function(){return 100},enumerable:!1,configurable:!0}),Object.defineProperty(t,"INTERNAL_CALL",{get:function(){return"ic"},enumerable:!1,configurable:!0}),t})();(function(t){t[t.NON_AUTHORIZED=400108]="NON_AUTHORIZED",t[t.INVALID_TOKEN=400111]="INVALID_TOKEN",t[t.NOT_FOUND_IN_DATABASE=400201]="NOT_FOUND_IN_DATABASE",t[t.USER_AUTH_DEACTIVATED=400300]="USER_AUTH_DEACTIVATED",t[t.USER_AUTH_DELETED_OR_NOT_FOUND=400301]="USER_AUTH_DELETED_OR_NOT_FOUND",t[t.SESSION_TOKEN_EXPIRED=400302]="SESSION_TOKEN_EXPIRED",t[t.APPLICATION_NOT_FOUND=400304]="APPLICATION_NOT_FOUND",t[t.SESSION_KEY_EXPIRED=400309]="SESSION_KEY_EXPIRED",t[t.SESSION_REVOKED=400310]="SESSION_REVOKED",t[t.INVALID_SESSION_TYPE=400312]="INVALID_SESSION_TYPE",t[t.INVALID_AUTH_FOR_SERVICE=400313]="INVALID_AUTH_FOR_SERVICE",t[t.STAT_UPLOAD_NOT_ALLOWED=403200]="STAT_UPLOAD_NOT_ALLOWED",t[t.NOT_SUPPORTED_PINNED_MESSAGE_IN_REVIEW_MESSAGE=400940]="NOT_SUPPORTED_PINNED_MESSAGE_IN_REVIEW_MESSAGE",t[t.INTERNAL_SERVER_ERROR=500901]="INTERNAL_SERVER_ERROR",t[t.RATE_LIMIT_EXCEEDED=500910]="RATE_LIMIT_EXCEEDED",t[t.INVALID_REQUIRED_FORM_VALUE=400105]="INVALID_REQUIRED_FORM_VALUE",t[t.UNKNOWN_SERVER_ERROR=900200]="UNKNOWN_SERVER_ERROR",t[t.NOT_SUPPORTED_FEATURE_IN_IN_REVIEW_MESSAGE=901500]="NOT_SUPPORTED_FEATURE_IN_IN_REVIEW_MESSAGE",t[t.ERR_DUPLICATED_DATA=400202]="ERR_DUPLICATED_DATA",t[t.DEBUG_MODE_REQUIRED=7e5]="DEBUG_MODE_REQUIRED",t[t.LOST_INSTANCE=700100]="LOST_INSTANCE",t[t.CONNECTION_RENEW=700102]="CONNECTION_RENEW",t[t.INVALID_CONNECTION_STATE_TRANSITION=700200]="INVALID_CONNECTION_STATE_TRANSITION",t[t.INVALID_COMMAND=700700]="INVALID_COMMAND",t[t.XMLHTTPREQUEST_NOT_SUPPORTED=700800]="XMLHTTPREQUEST_NOT_SUPPORTED",t[t.UNKNOWN_ERROR=77e4]="UNKNOWN_ERROR",t[t.INVALID_INITIALIZATION=800100]="INVALID_INITIALIZATION",t[t.CONNECTION_REQUIRED=800101]="CONNECTION_REQUIRED",t[t.CONNECTION_CANCELED=800102]="CONNECTION_CANCELED",t[t.INVALID_PARAMETER=800110]="INVALID_PARAMETER",t[t.NOT_SUPPORTED_ERROR=800111]="NOT_SUPPORTED_ERROR",t[t.NETWORK_ERROR=800120]="NETWORK_ERROR",t[t.NETWORK_ROUTING_ERROR=800121]="NETWORK_ROUTING_ERROR",t[t.MALFORMED_DATA=800130]="MALFORMED_DATA",t[t.MALFORMED_ERROR_DATA=800140]="MALFORMED_ERROR_DATA",t[t.WRONG_CHANNEL_TYPE=800150]="WRONG_CHANNEL_TYPE",t[t.MARK_AS_READ_RATE_LIMIT_EXCEEDED=800160]="MARK_AS_READ_RATE_LIMIT_EXCEEDED",t[t.QUERY_IN_PROGRESS=800170]="QUERY_IN_PROGRESS",t[t.ACK_TIMEOUT=800180]="ACK_TIMEOUT",t[t.LOGIN_TIMEOUT=800190]="LOGIN_TIMEOUT",t[t.WEBSOCKET_CONNECTION_CLOSED=800200]="WEBSOCKET_CONNECTION_CLOSED",t[t.WEBSOCKET_CONNECTION_FAILED=800210]="WEBSOCKET_CONNECTION_FAILED",t[t.REQUEST_FAILED=800220]="REQUEST_FAILED",t[t.DELAYED_CONNECTING=800221]="DELAYED_CONNECTING",t[t.FILE_UPLOAD_CANCEL_FAILED=800230]="FILE_UPLOAD_CANCEL_FAILED",t[t.REQUEST_CANCELED=800240]="REQUEST_CANCELED",t[t.REQUEST_DUPLICATED=800250]="REQUEST_DUPLICATED",t[t.FILE_SIZE_LIMIT_EXCEEDED=800260]="FILE_SIZE_LIMIT_EXCEEDED",t[t.ERR_UPLOAD_STAT_RETRY_COUNT_EXCEEDED=800270]="ERR_UPLOAD_STAT_RETRY_COUNT_EXCEEDED",t[t.SESSION_TOKEN_REQUEST_FAILED=800500]="SESSION_TOKEN_REQUEST_FAILED",t[t.SESSION_TOKEN_REFRESHED=800501]="SESSION_TOKEN_REFRESHED",t[t.SESSION_TOKEN_REFRESH_FAILED=800502]="SESSION_TOKEN_REFRESH_FAILED",t[t.COLLECTION_DISPOSED=800600]="COLLECTION_DISPOSED",t[t.DATABASE_ERROR=800700]="DATABASE_ERROR",t[t.USER_DEACTIVATED=900021]="USER_DEACTIVATED",t[t.CHANNEL_IS_FROZEN=900050]="CHANNEL_IS_FROZEN",t[t.RECEIVER_USER_DEACTIVATED=900081]="RECEIVER_USER_DEACTIVATED"})(et||(et={}));var ds,Zv,na,jC,gA,fy,$a=function(t){return!(t instanceof ae&&!t.shouldThrowOutside)},ae=(function(t){function n(e){var r=e.code,i=r===void 0?0:r,a=e.message,s=a===void 0?"":a,o=t.call(this,s)||this;return o.shouldThrowOutside=!1,o._detail="",o.name="SendbirdError",o.code=i,Object.setPrototypeOf(o,n.prototype),o}return G(n,t),Object.defineProperty(n.prototype,"detail",{get:function(){return this._detail},enumerable:!1,configurable:!0}),n.prototype.setDetail=function(e){this._detail=e},Object.defineProperty(n.prototype,"isInvalidTokenError",{get:function(){return this.code===et.INVALID_TOKEN},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isSessionExpiredError",{get:function(){return this.isSessionTokenExpiredError||this.isSessionKeyExpiredError},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isSessionTokenExpiredError",{get:function(){return this.code===et.SESSION_TOKEN_EXPIRED},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isSessionKeyExpiredError",{get:function(){return this.code===et.SESSION_KEY_EXPIRED},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isSessionInvalidatedError",{get:function(){return this.isSessionRevokedError||this.isUserAuthDeactivedError||this.isUserAuthDeletedOrNotFoundError},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isSessionRevokedError",{get:function(){return this.code===et.SESSION_REVOKED},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isUserAuthDeactivedError",{get:function(){return this.code===et.USER_AUTH_DEACTIVATED},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isUserAuthDeletedOrNotFoundError",{get:function(){return this.code===et.USER_AUTH_DELETED_OR_NOT_FOUND},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isNetworkError",{get:function(){return this.code===et.NETWORK_ERROR||this.code===et.NETWORK_ROUTING_ERROR},enumerable:!1,configurable:!0}),Object.defineProperty(n,"debugModeRequired",{get:function(){return new n({code:et.DEBUG_MODE_REQUIRED,message:"Cannot run this operation in production mode."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"lostInstance",{get:function(){return new n({code:et.LOST_INSTANCE,message:"Instance ID is missing. It should belong to an instance."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"invalidCommand",{get:function(){return new n({code:et.INVALID_COMMAND,message:"Cannot send invalid command."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"unknown",{get:function(){return new n({code:et.UNKNOWN_ERROR,message:"Unknown error occurred."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"connectionRenew",{get:function(){return new n({code:et.CONNECTION_RENEW,message:"Connection restarts."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"invalidConnectionStateTransition",{get:function(){return new n({code:et.INVALID_CONNECTION_STATE_TRANSITION,message:"Invalid connection state transition."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"xmlHttpRequestNotSupported",{get:function(){return new n({code:et.XMLHTTPREQUEST_NOT_SUPPORTED,message:"Cannot upload file. XMLHttpRequest is not defined in this environment."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"connectionRequired",{get:function(){return new n({code:et.CONNECTION_REQUIRED,message:"Connection is required."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"connectionCanceled",{get:function(){return new n({code:et.CONNECTION_CANCELED,message:"Connection is canceled."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"invalidParameters",{get:function(){return new n({code:et.INVALID_PARAMETER,message:"Invalid parameters."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"notSupportedError",{get:function(){return new n({code:et.NOT_SUPPORTED_ERROR,message:"Given parameters are not supported."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"channelTypeNotSupportedError",{get:function(){return new n({code:et.NOT_SUPPORTED_ERROR,message:"Called method is not supported in the current channel's channel type."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"networkError",{get:function(){return new n({code:et.NETWORK_ERROR,message:"There was a network error."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"markAsReadAllRateLimitExceeded",{get:function(){return new n({code:et.MARK_AS_READ_RATE_LIMIT_EXCEEDED,message:"markAsRead rate limit exceeded."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"queryInProgress",{get:function(){return new n({code:et.QUERY_IN_PROGRESS,message:"Query in progress."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"noAckTimeout",{get:function(){return new n({code:et.ACK_TIMEOUT,message:"Command received no ack."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"loginTimeout",{get:function(){return new n({code:et.LOGIN_TIMEOUT,message:"Connection timeout."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"connectionClosed",{get:function(){return new n({code:et.WEBSOCKET_CONNECTION_CLOSED,message:"Connection is closed. Please reconnect."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"requestFailed",{get:function(){return new n({code:et.REQUEST_FAILED,message:"Request failed."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"tooManyRequests",{get:function(){return new n({code:et.REQUEST_DUPLICATED,message:"Too many requests."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"alreadyConnectedAsAnotherUser",{get:function(){return new n({code:et.REQUEST_FAILED,message:"Already logged in as a different user. Call disconnect() first."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"fileUploadCanceled",{get:function(){return new n({code:et.FILE_UPLOAD_CANCEL_FAILED,message:"File upload has been canceled."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"requestCanceled",{get:function(){return new n({code:et.REQUEST_CANCELED,message:"Request has been canceled."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"sessionTokenRefreshFailed",{get:function(){return new n({code:et.SESSION_TOKEN_REFRESH_FAILED,message:"Failed to refresh the session key."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"sessionTokenRequestFailed",{get:function(){return new n({code:et.SESSION_TOKEN_REQUEST_FAILED,message:"Failed to get the session token."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"databaseError",{get:function(){return new n({code:et.DATABASE_ERROR,message:"Database error."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"fileSizeLimitExceededError",{get:function(){return new n({code:et.FILE_SIZE_LIMIT_EXCEEDED,message:"File size exceeds the file size limit."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"statLogUploadLimitExceededError",{get:function(){return new n({code:et.ERR_UPLOAD_STAT_RETRY_COUNT_EXCEEDED,message:"The upload request failed due to the retry count being exceeded."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"malformedDataError",{get:function(){return new n({code:et.MALFORMED_DATA,message:"Malformed data."})},enumerable:!1,configurable:!0}),n.prototype.throwOutside=function(){throw this.shouldThrowOutside=!0,this},n})(Error),nj=[et.CONNECTION_REQUIRED,et.NETWORK_ERROR,et.ACK_TIMEOUT,et.WEBSOCKET_CONNECTION_CLOSED,et.WEBSOCKET_CONNECTION_FAILED,et.FILE_UPLOAD_CANCEL_FAILED,et.REQUEST_CANCELED,et.INTERNAL_SERVER_ERROR,et.RATE_LIMIT_EXCEEDED,et.UNKNOWN_SERVER_ERROR,et.USER_DEACTIVATED,et.CHANNEL_IS_FROZEN,et.RECEIVER_USER_DEACTIVATED],rj=[et.WEBSOCKET_CONNECTION_CLOSED,et.WEBSOCKET_CONNECTION_FAILED,et.CONNECTION_REQUIRED,et.CHANNEL_IS_FROZEN],xk=function(t,n){if(t!==n){var e=Z({},t),r=Z({},n);return(!e.hasOwnProperty("messageId")||!r.hasOwnProperty("messageId")||e.messageId===r.messageId)&&(!e.hasOwnProperty("reqId")||!r.hasOwnProperty("reqId")||e.reqId===r.reqId)&&(e.hasOwnProperty("messageId")&&delete e.messageId,e.hasOwnProperty("reqId")&&delete e.reqId,r.hasOwnProperty("messageId")&&delete r.messageId,r.hasOwnProperty("reqId")&&delete r.reqId,JSON.stringify(e)===JSON.stringify(r))}return!0},re=function(t,n,e){return e===void 0&&(e=!1),!(!e||!gE(n))||(typeof t!="string"?typeof t=="object"?dn(t,n):ij(t,n):typeof n===t)},dn=function(t,n,e){return e===void 0&&(e=!1),!(!e||!gE(n))||Object.values(t).includes(n)},ij=function(t,n){return n instanceof t},hn=function(t,n,e){return e===void 0&&(e=!1),!(!e||!gE(n))||Array.isArray(n)&&n.every((function(r){return re(t,r)}))},pO=function(t,n){return!!gE(t)||typeof t=="number"&&t.toString().length===13},aj=function(t){return t>0&&nj.indexOf(t)>=0},qC=function(t){return t>0&&rj.indexOf(t)>=0},ra=function(t,n){if(n===void 0&&(n=!1),n&&gE(t))return!0;var e=typeof t=="object"&&t!==null&&t.hasOwnProperty("name")&&typeof t.name=="string"&&t.hasOwnProperty("uri")&&typeof t.uri=="string"&&t.hasOwnProperty("type")&&typeof t.type=="string";if(!e){if(typeof Blob<"u")return t instanceof Blob;if(typeof File<"u")return t instanceof File}return e},sj=function(t,n){if(t===n)return!0;if(t==null||n==null||t.length!==n.length)return!1;for(var e=wt([],dt(t),!1).sort(),r=wt([],dt(n),!1).sort(),i=0;i<e.length;++i)if(e[i]!==r[i])return!1;return!0},gE=function(t){return t==null},Lk=(function(){function t(n){var e=n===void 0?{}:n,r=e.useMemberInfoInMessage,i=r===void 0||r,a=e.typingIndicatorInvalidateTime,s=a===void 0?1e4:a,o=e.typingIndicatorThrottle,u=o===void 0?1e3:o,c=e.websocketResponseTimeout,h=c===void 0?1e4:c,p=e.websocketPayloadDecompression,m=p===void 0||p,_=e.sessionTokenRefreshTimeout,b=_===void 0?60:_;this._useMemberInfoInMessage=!0,this._typingIndicatorInvalidateTime=1e4,this._typingIndicatorThrottle=1e3,this._websocketResponseTimeout=1e4,this._sessionTokenRefreshTimeout=60,this._useMemberInfoInMessage=i,this._typingIndicatorInvalidateTime=s,this._typingIndicatorThrottle=u,this._websocketResponseTimeout=h,this._sessionTokenRefreshTimeout=b,this.websocketPayloadDecompression=m}return Object.defineProperty(t.prototype,"useMemberInfoInMessage",{get:function(){return this._useMemberInfoInMessage},set:function(n){re("boolean",n)&&(this._useMemberInfoInMessage=n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"typingIndicatorInvalidateTime",{get:function(){return this._typingIndicatorInvalidateTime},set:function(n){re("number",n)&&(this._typingIndicatorInvalidateTime=n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"typingIndicatorThrottle",{get:function(){return this._typingIndicatorThrottle},set:function(n){re("number",n)&&n>=1e3&&n<=9e3&&(this._typingIndicatorThrottle=n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"websocketResponseTimeout",{get:function(){return this._websocketResponseTimeout},set:function(n){re("number",n)&&n>=5e3&&n<=3e4&&(this._websocketResponseTimeout=n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sessionTokenRefreshTimeout",{get:function(){return this._sessionTokenRefreshTimeout},set:function(n){re("number",n)&&(n<60?n=60:n>1800&&(n=1800),this._sessionTokenRefreshTimeout=n)},enumerable:!1,configurable:!0}),t})(),kk={encrypt:function(t){return t},decrypt:function(t){return t}},mO=(function(){function t(n){var e=n.store;this._preference=new Map,this._store=e}return t.prototype._savePreferenceKeys=function(){return D(this,void 0,void 0,(function(){return O(this,(function(n){switch(n.label){case 0:return[4,this._store.set({key:this._keysAddress,value:wt([],dt(this._preference.keys()),!1)})];case 1:return n.sent(),[2]}}))}))},t.prototype.init=function(n,e){var r;return e===void 0&&(e=1),D(this,void 0,void 0,(function(){var i,a,s,o,u,c,h,p,m,_,b;return O(this,(function(C){switch(C.label){case 0:return this._version=e,this._keysAddress=n,i="".concat(n,".metadata.version"),[4,this._store.get(i)];case 1:return a=C.sent(),[4,this._store.get(n)];case 2:return s=(r=C.sent())!==null&&r!==void 0?r:[],!a||a.version<this._version?this._version===9?[3,3]:[3,6]:[3,10];case 3:return o=s.find((function(N){return N.includes("groupchannel/sync.meta")})),o?[4,this._store.remove(o)]:[3,5];case 4:C.sent(),C.label=5;case 5:return[3,8];case 6:return[4,this._resetPreferenceData(s)];case 7:C.sent(),C.label=8;case 8:return[4,this._updatePreferenceVersionInfo(i)];case 9:return C.sent(),[3,17];case 10:C.trys.push([10,15,16,17]),u=Fe(s),c=u.next(),C.label=11;case 11:return c.done?[3,14]:(h=c.value,[4,this._store.get(h)]);case 12:(p=C.sent())&&this._preference.set(h,p),C.label=13;case 13:return c=u.next(),[3,11];case 14:return[3,17];case 15:return m=C.sent(),_={error:m},[3,17];case 16:try{c&&!c.done&&(b=u.return)&&b.call(u)}finally{if(_)throw _.error}return[7];case 17:return[2]}}))}))},t.prototype._updatePreferenceVersionInfo=function(n){return D(this,void 0,void 0,(function(){return O(this,(function(e){switch(e.label){case 0:return[4,this._store.set({key:n,value:{version:this._version}})];case 1:return e.sent(),[2]}}))}))},t.prototype._resetPreferenceData=function(n){return D(this,void 0,void 0,(function(){return O(this,(function(e){switch(e.label){case 0:return this._preference=new Map,[4,this._store.removeMany(n)];case 1:return e.sent(),[2]}}))}))},t.prototype.get=function(n){return D(this,void 0,void 0,(function(){return O(this,(function(e){return[2,this._preference.get(n)]}))}))},t.prototype.set=function(n,e){return D(this,void 0,void 0,(function(){var r;return O(this,(function(i){switch(i.label){case 0:return r=!this._preference.has(n),[4,this._store.set({key:n,value:e})];case 1:return i.sent(),this._preference.set(n,e),r?[4,this._savePreferenceKeys()]:[3,3];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))},t.prototype.remove=function(n){return D(this,void 0,void 0,(function(){return O(this,(function(e){switch(e.label){case 0:return[4,this._store.remove(n)];case 1:return e.sent(),this._preference.delete(n),[4,this._savePreferenceKeys()];case 2:return e.sent(),[2]}}))}))},t.prototype.clear=function(){return D(this,void 0,void 0,(function(){return O(this,(function(n){switch(n.label){case 0:return[4,this._store.removeMany(wt([],dt(this._preference.keys()),!1))];case 1:return n.sent(),this._preference.clear(),[4,this._savePreferenceKeys()];case 2:return n.sent(),[2]}}))}))},t})(),oj=(function(){function t(n){var e=n.encryption,r=n.store,i=n.localCacheEnabled,a=n.localCacheConfig;this.store=r,this.preference=new mO({store:r}),this.encryption=e??kk,this.localCacheEnabled=i,this.localCacheConfig=a}return t.prototype.replaceStore=function(n){this.store=n,this.preference=new mO({store:n})},t})();(function(t){t.SUCCESS="success",t.PENDING="pending",t.ERROR="error"})(ds||(ds={})),(function(t){t.DEFAULT="default",t.ALL="all",t.MENTION_ONLY="mention_only",t.OFF="off"})(Zv||(Zv={})),(function(t){t.FCM="gcm",t.APNS="apns",t.UNKNOWN="unknown"})(na||(na={})),(function(t){t.SESSION_TOKEN="session_token",t.ACCESS_TOKEN="access_token"})(jC||(jC={})),(function(t){t.ALTERNATIVE="alternative",t.DEFAULT="default"})(gA||(gA={})),(function(t){t.CUSTOM="custom",t.MESSAGE_COLLECTION_ACCESSED_AT="messagecollection_accessed_at"})(fy||(fy={}));var $C,lj=(function(){function t(n){var e=n.channel,r=n.cachedMessageCount;this._cachedMessageCount=0,this._channel=e,this._cachedMessageCount=r}return Object.defineProperty(t.prototype,"channel",{get:function(){return this._channel},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cachedMessageCount",{get:function(){return this._cachedMessageCount},enumerable:!1,configurable:!0}),t})(),Pk=(function(){function t(n){var e=n===void 0?{}:n,r=e.maxSize,i=r===void 0?256:r,a=e.clearOrder,s=a===void 0?fy.MESSAGE_COLLECTION_ACCESSED_AT:a,o=e.customClearOrderComparator,u=e.enableAutoResend,c=u===void 0||u;this._clearOrderComparatorUseMessageCollectionAccessedAt=function(h,p){return h.channel.messageCollectionLastAccessedAt===p.channel.messageCollectionLastAccessedAt?h.channel.lastMessage&&!p.channel.lastMessage?1:!h.channel.lastMessage&&p.channel.lastMessage?-1:h.channel.lastMessage||p.channel.lastMessage?h.channel.lastMessage.createdAt-p.channel.lastMessage.createdAt:0:h.channel.messageCollectionLastAccessedAt>p.channel.messageCollectionLastAccessedAt?1:-1},this._maxSize=Math.max(i,64),o?(this._clearOrder=s,this._customClearOrderComparator=o):this._clearOrder=fy.MESSAGE_COLLECTION_ACCESSED_AT,this._enableAutoResend=c}return Object.defineProperty(t.prototype,"maxSize",{get:function(){return this._maxSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clearOrder",{get:function(){return this._clearOrder},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clearOrderComparator",{get:function(){var n;return this._clearOrder===fy.MESSAGE_COLLECTION_ACCESSED_AT?this._clearOrderComparatorUseMessageCollectionAccessedAt:(n=this._customClearOrderComparator)!==null&&n!==void 0?n:this._clearOrderComparatorUseMessageCollectionAccessedAt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"enableAutoResend",{get:function(){return this._enableAutoResend},enumerable:!1,configurable:!0}),t})();(function(t){t.FEED="feed",t.CHAT="chat",t.CHAT_API="chat_api"})($C||($C={}));var yn,nl,Ml,br,Ia,yg,Oa,Yi,Au,Tn,gO,_A,yA,uj=(function(){function t(){this.isRefreshing=!1}return Object.defineProperty(t.prototype,"hasSession",{get:function(){return!!this.sessionKey},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasChatServicePermission",{get:function(){var n;return!!(!((n=this.services)===null||n===void 0)&&n.includes($C.CHAT))},enumerable:!1,configurable:!0}),t.prototype.clear=function(){this.authToken=void 0,this.sessionKey=void 0,this.services=[]},t})(),il=function(){var t=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(n){var e=(t+16*Math.random())%16|0;return t=Math.floor(t/16),(n==="x"?e:3&e|8).toString(16)}))},_O=(function(){function t(n){var e=n.container;this._container={},this._container=e,this.key=il()}return t.prototype._register=function(n,e,r){var i;return n in this._container||(this._container[n]=new Map),(i=this._container[n])===null||i===void 0||i.set(this.key,{occurence:e,handler:r}),this},t.prototype.on=function(n,e){return this._register(n,-1,e)},t.prototype.once=function(n,e){return this._register(n,1,e)},t.prototype.close=function(){var n=this;Object.keys(this._container).forEach((function(e){var r;(r=n._container[e])===null||r===void 0||r.delete(n.key)}))},t})(),Tp=(function(){function t(){this._container={}}return t.prototype.on=function(n,e){return new _O({container:this._container}).on(n,e)},t.prototype.once=function(n,e){return new _O({container:this._container}).once(n,e)},t.prototype.dispatch=function(n,e){var r,i,a=this._container[n];if(a){var s=[];try{for(var o=Fe(a.keys()),u=o.next();!u.done;u=o.next()){var c=u.value,h=a.get(c);h.handler(e),h.occurence>0&&(h.occurence--,h.occurence===0&&s.push(c))}}catch(p){r={error:p}}finally{try{u&&!u.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}s.forEach((function(p){return a.delete(p)}))}},t})(),cj=(function(){function t(){this._dispatcher=new Tp}return t.prototype.on=function(n){return this._dispatcher.on("event",n)},t.prototype.once=function(n){return this._dispatcher.once("event",n)},t.prototype.dispatch=function(n){this._dispatcher.dispatch("event",n)},t})(),gr=function(){},ze=function(t){var n={};return t&&Object.keys(t).forEach((function(e){t[e]===void 0||Number.isNaN(t[e])||t[e]===null||(n[e]=t[e])})),n},ht=function(t){if(t!=null){if(typeof t=="object"){if(Array.isArray(t)){for(var n=wt([],dt(t),!1),e=0;e<n.length;e++)n[e]=ht(n[e]);return n}return Object.keys(t).forEach((function(r){t[r]===null&&delete t[r]})),t}return t}};(function(t){t.BASE="base",t.GROUP="group",t.OPEN="open",t.FEED="feed"})(yn||(yn={})),(function(t){t.OPERATOR="operator",t.NONE="none"})(nl||(nl={})),(function(t){t.MUTED="muted",t.UNMUTED="unmuted"})(Ml||(Ml={})),(function(t){t.BASE="base",t.USER="user",t.FILE="file",t.ADMIN="admin"})(br||(br={})),(function(t){t.ALL="",t.USER="MESG",t.FILE="FILE",t.ADMIN="ADMM"})(Ia||(Ia={})),(function(t){t.USER="MESG",t.FILE="FILE",t.ADMIN="ADMM"})(yg||(yg={})),(function(t){t.USERS="users",t.CHANNEL="channel"})(Oa||(Oa={})),(function(t){t.ALL="all",t.NONE="none",t.ONLY_REPLY_TO_CHANNEL="only_reply_to_channel"})(Yi||(Yi={})),(function(t){t.DEFAULT="default",t.SUPPRESS="suppress"})(Au||(Au={})),(function(t){t.PENDING="pending",t.SCHEDULED="scheduled",t.SUCCEEDED="succeeded",t.FAILED="failed",t.CANCELED="canceled"})(Tn||(Tn={})),(function(t){t.INREVIEW="InReview",t.APPROVED="Approved"})(gO||(gO={})),(function(t){t.HIGH="high",t.NORMAL="normal",t.LOW="low"})(_A||(_A={})),(function(t){t.CREATED_AT="created_at",t.UPDATED_AT="updated_at"})(yA||(yA={}));var Ie,Fi="v3",jn="/".concat(Fi,"/users"),dj="/".concat(Fi,"/sdk/users"),hj="/".concat(Fi,"/storage/file"),Ya="/".concat(Fi,"/group_channels"),fj="/".concat(Fi,"/sdk/group_channels"),Np="/".concat(Fi,"/open_channels"),vj="/".concat(Fi,"/sdk/open_channels"),pj="/".concat(Fi,"/search"),EA="/".concat(Fi,"/report"),mj="/".concat(Fi,"/emojis"),Fk="/".concat(Fi,"/emoji_categories"),Iu="/".concat(Fi,"/polls"),Bk="/".concat(Fi,"/scheduled_messages"),gj="/".concat(Fi,"/sdk/ui_kit/configuration"),_j="/".concat(Fi,"/sdk/statistics"),yj="/".concat(Fi,"/sdk/notification_statistics"),Hk="/".concat(Fi,"/message_templates"),Ej="/".concat(Fi,"/sdk/push_delivery"),bj="/".concat(Fi,"/forms"),Cj="/".concat(Fi,"/report_category"),Sj="/".concat(Fi,"/sdk/applications/settings"),vw="/".concat(Fi,"/ai_agent"),pw="/".concat(Fi,"/ai_agent/group_channels"),Gn=function(t){switch(t){case yn.FEED:case yn.GROUP:return Ya;case yn.OPEN:return Np;default:return null}},Gk=function(t){switch(t){case yn.GROUP:return"".concat(EA,"/group_channels");case yn.OPEN:return"".concat(EA,"/open_channels");default:return null}},Eg=function(t,n,e){var r,i;switch(t){case Oa.CHANNEL:return!0;case Oa.USERS:if(n)try{for(var a=Fe(n),s=a.next();!s.done;s=a.next())if(s.value===e)return!0}catch(o){r={error:o}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}}return!1},mw=function(t,n,e){var r,i,a,s,o=Eg((r=t.mentionType)!==null&&r!==void 0?r:null,(i=t.mentionedUserIds)!==null&&i!==void 0?i:[],e),u=Eg((a=n.mentionType)!==null&&a!==void 0?a:null,(s=n.mentionedUserIds)!==null&&s!==void 0?s:[],e);return!o&&u?1:o&&!u?-1:0},Vk=function(t,n,e){var r,i=n||new FormData;for(var a in t)if(t.hasOwnProperty(a)){var s=t[a],o=e?"".concat(e,"[").concat(a,"]"):a;ra(s)?i.append(o,s,(r=s.name)!==null&&r!==void 0?r:"filename"):typeof s!="object"||s===null||Array.isArray(s)||s instanceof Blob?i.append(o,String(s)):i=Vk(s,i,o)}return i};(function(t){t.GET="GET",t.POST="POST",t.PUT="PUT",t.DELETE="DELETE",t.PATCH="PATCH"})(Ie||(Ie={}));var fr,we=(function(t){function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.params={},e.requireAuth=!0,e.headers={},e.requestId=il(),e}return G(n,t),n.prototype.encodeParams=function(e){var r=this;return e==null||e===""?encodeURIComponent(""):Array.isArray(e)?e.map((function(i){return r.encodeParams(i)})).join(","):encodeURIComponent(typeof e=="object"?JSON.stringify(e):String(e))},Object.defineProperty(n.prototype,"query",{get:function(){var e=this,r=ze(this.params);return"?".concat(Object.keys(r).map((function(i){return"".concat(encodeURIComponent(i),"=").concat(e.encodeParams(r[i]))})).join("&"))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"payload",{get:function(){var e=ze(this.params);return Object.keys(e).some((function(r){return ra(e[r])}))?Vk(e):JSON.stringify(e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hasSessionKey",{get:function(){return this.headers["Session-Key"]!==void 0},enumerable:!1,configurable:!0}),n})(gr),xe=(function(t){function n(e,r){var i=t.call(this)||this;return i._iid=e,i._payload=r,i}return G(n,t),Object.defineProperty(n.prototype,"payload",{get:function(){return Z({},this._payload)},enumerable:!1,configurable:!0}),n.prototype.as=function(e){return new e(this._iid,this.payload)},n})(gr),Tj=(function(t){function n(e){var r=t.call(this)||this;return r.requestId=e,r}return G(n,t),n})(gr),bg=(function(t){function n(e){var r=e.expires_in,i=e.reason,a=i===void 0?et.SESSION_KEY_EXPIRED:i,s=e.message,o=s===void 0?"":s,u=t.call(this)||this;switch(u.expiresIn=r??0,a){case et.SESSION_KEY_EXPIRED:case et.SESSION_TOKEN_EXPIRED:case et.SESSION_REVOKED:case et.USER_AUTH_DEACTIVATED:case et.USER_AUTH_DELETED_OR_NOT_FOUND:u.error=new ae({code:a,message:o})}return u}return G(n,t),Object.defineProperty(n.prototype,"invalidateSessionToken",{get:function(){var e;return!!(!((e=this.error)===null||e===void 0)&&e.isSessionTokenExpiredError)},enumerable:!1,configurable:!0}),n})(gr),Rr=(function(t){function n(e,r,i,a){a===void 0&&(a="");var s,o=this;return(o=t.call(this)||this)._iid=e,o.code=r,o.payload=i,o.requestId=(s=i.req_id)!==null&&s!==void 0?s:a,o}return G(n,t),n.createFromRawMessage=function(e,r){var i=r.substring(0,4),a={};try{a=JSON.parse(r.substring(4))}catch{i="NOOP"}finally{return new n(e,i,a)}},n.prototype.convertToMessage=function(){return"".concat(this.code).concat(JSON.stringify(this.payload),`
`)},n.prototype.as=function(e){return new e(this._iid,this.code,this.payload)},n})(gr),Ra=(function(t){function n(e){var r,i=e.code,a=e.ackRequired,s=e.payload,o=s===void 0?{}:s,u=this;return(u=t.call(this)||this).code=i,u.payload=o,u.requestId=(r=u.payload.req_id)!==null&&r!==void 0?r:il(),u.ackRequired=a,u.payload.req_id=u.requestId,u}return G(n,t),n.prototype.convertToMessage=function(){return"".concat(this.code).concat(JSON.stringify(this.payload),`
`)},n})(gr),gw=(function(t){function n(e){var r=e.userId,i=e.authToken,a=e.services,s=e.expiringSession,o=s===void 0||s,u=t.call(this)||this;return u.path="".concat(jn,"/").concat(encodeURIComponent(r),"/session_key"),u.method=Ie.POST,u.params=ze({token:i,services:a,expiring_session:!!o}),u.requireAuth=!1,u}return G(n,t),n})(we),Nj=(function(t){function n(e){var r=e.authToken,i=e.expiringSession,a=i===void 0||i,s=e.requestId,o=s===void 0?void 0:s;return t.call(this,{code:"LOGI",payload:ze({token:r,expiring_session:a?1:0,req_id:o}),ackRequired:!0})||this}return G(n,t),n})(Ra),Aj=(function(t){function n(e,r){var i=t.call(this,e,r)||this,a=r.key,s=r.expires_at,o=r.services;return i.key=a,i.expiresAt=s,i.services=o,i}return G(n,t),n})(xe),Mj=(function(t){function n(e,r,i){var a,s=this;return(s=t.call(this,e,"LOGI",i)||this).error=null,s.newKey=null,s.newKey=(a=i.new_key)!==null&&a!==void 0?a:null,s.error=i.error?new ae(i):null,s}return G(n,t),n})(Rr),vd=(function(t){function n(e){var r=t.call(this)||this;return r.statLog=e,r}return G(n,t),n})(gr),zk=(function(t){function n(e){var r=e.request,i=e.deferred,a=e.error,s=a===void 0?ae.requestFailed:a,o=t.call(this)||this;return o.request=r,o.deferred=i,o.error=s,o}return G(n,t),n})(gr);(function(t){t.FEATURE_LOCALCACHE="feature:local_cache",t.FEATURE_LOCALCACHE_EVENT="feature:local_cache_event",t.NOTIFICATION="noti:stats",t.WEBSOCKET_CONNECT="ws:connect",t.WEBSOCKET_DISCONNECT="ws:disconnect",t.API_RESULT="api:result"})(fr||(fr={}));var bA,lp,$h,Ar=(function(){function t(n){var e=n.type,r=n.data,i=n.ts,a=i===void 0?Date.now():i;this.type=e,this.createdAt=a,this.data=r}return t.payloadify=function(n){return ze({stat_type:n.type,ts:n.createdAt,data:ze(n.data)})},t})(),CA=function(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product=="ReactNative"},yO=function(){return!(typeof navigator>"u"||!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Windows Phone/i.test(navigator.userAgent))};(function(t){t.CHAT="chat",t.CALLS="calls",t.DESK="desk",t.LIVE="live",t.UIKIT_CHAT="uikit-chat",t.UIKIT_LIVE="uikit-live",t.AI_AGENT="ai-agent"})(bA||(bA={})),(function(t){t.ANDROID="android",t.IOS="ios",t.JS="js",t.UNREAL="unreal",t.UNITY="unity",t.REACT_NATIVE="react-native",t.FLUTTER="flutter"})(lp||(lp={})),(function(t){t.ANDROID="android",t.IOS="ios",t.WEB="web",t.MOBILE_WEB="mobile_web",t.WINDOWS="windows"})($h||($h={}));var Ij="^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)(?:-((?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\\.(?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\\+([0-9a-zA-Z-]+(?:\\.[0-9a-zA-Z-]+)*))?$",KC=(function(){function t(){}var n;return n=t,t._getFrameWork=function(){if(typeof window<"u"){if(window.__REACT__)return"react";if(window.__VUE__)return"vue";var e=window.__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e&&e.getFiberRoots&&e.getFiberRoots(1).size>0)return"react";if(window.__NUXT__)return"vue(SSR)";if(window.__NEXT_DATA__||window.__NEXT_P||window.__NEXT_F)return"nextjs"}return""},t.sendbirdSdkUserAgentWithExtension=function(e){var r=CA()?lp.REACT_NATIVE:lp.JS,i={main_sdk_info:"chat/".concat(r,"/").concat(Qh.SDK_VERSION),device_os_platform:yO()?"mobile-web":"web",os_version:Qh.OS_VERSION};if(e){var a=e.sendbirdExtensions,s=e.deviceOS,o=e.customData,u=o===void 0?{}:o;s.version&&(i.os_version=s.version),s.platform&&(i.device_os_platform=s.platform),a.length>0&&(i.extension_sdk_info=a.map((function(h){var p=h.product,m=h.platform,_=h.version;return"".concat(p,"/").concat(m,"/").concat(_)})).join(",")),Object.keys(i).forEach((function(h){return delete u[h]})),Object.keys(u).length>0&&(i=Z(Z({},i),u))}var c=n._getFrameWork();return c&&(i.javascript_framework=c),Object.entries(i).map((function(h){var p=dt(h,2),m=p[0],_=p[1];return"".concat(m,"=").concat(_)})).join("&")},t.userAgentWithExtension=function(e){var r=CA()?"reactnative":"JS",i=e.sb_syncmanager?"s".concat(e.sb_syncmanager):"",a=e.sb_uikit?"u".concat(e.sb_uikit):"",s=e["device-os-platform"]?"o".concat(e["device-os-platform"]):yO()?"omobile-web":"oweb";return"".concat(r,"/c").concat(Qh.SDK_VERSION,"/").concat(i,"/").concat(a,"/").concat(s)},t})(),ps=function(){var t=this;this.promise=new Promise((function(n,e){t.resolve=n,t.reject=function(r){e(r)}}))},YC=(function(t){function n(e){var r=t.call(this)||this;return r.requestId=e.requestId,r}return G(n,t),n})(gr),jk=(function(t){function n(e){var r=t.call(this)||this;return r.method=Ie.DELETE,r.path="".concat(Gn(e.channelType),"/").concat(e.channelUrl,"/messages/").concat(e.messageId),e.messageToken&&(r.params=ze({mesg_token:e.messageToken})),r}return G(n,t),n})(we);(function(t){function n(){return t!==null&&t.apply(this,arguments)||this}G(n,t)})(xe);var qk=(function(t){function n(e,r,i){var a,s=this;return(s=t.call(this,e,"DELM",i)||this).channelUrl=i.channel_url,s.channelType=i.channel_type,s.messageId=Number(i.msg_id),s.silent=i.silent,s.messageCreatedAt=i.message_created_at?Number(i.message_created_at):-1,s.senderId=(a=i.sender_id)!==null&&a!==void 0?a:void 0,s}return G(n,t),n})(Rr),wj=(function(){function t(n,e){var r=e.session,i=e.sdkState,a=e.dispatcher,s=e.logger,o=e.useFetchCompat,u=o!==void 0&&o,c=this;this._abortControl=new Map,this._shouldImportFetchCompat=!1,this._iid=n,this._session=r,this._sdkState=i,this._dispatcher=a,this._dispatcher.on((function(h){h instanceof Tj&&c.cancel(h.requestId)})),this._logger=s,this._shouldImportFetchCompat=u}return t.prototype._createHeader=function(n,e){var r=this._sdkState,i=r.appId,a=r.appVersion,s=r.sendbirdRuntimeEnvironment,o=Z(Z({},n.headers),{SendBird:"JS,".concat(Qh.OS_VERSION,",").concat(Qh.SDK_VERSION,",").concat(i).concat(a?",".concat(a):""),"SB-User-Agent":KC.userAgentWithExtension(this._sdkState.extensions),"Request-Sent-Timestamp":Date.now().toString(),"SB-SDK-User-Agent":KC.sendbirdSdkUserAgentWithExtension(s)});return e||(o["Content-Type"]="application/json; charset=utf-8"),o["App-Id"]=i,n.requireAuth?!n.hasSessionKey&&this._session.hasSession&&(o["Session-key"]=this._session.sessionKey):this._session.authToken&&(o["Access-token"]=this._session.authToken),o},t.prototype._statLogApiResult=function(n,e,r){n.path.includes("/sdk/statistics")||this._dispatcher.dispatch(new vd(new Ar({type:fr.API_RESULT,data:{endpoint:n.path,method:n.method,success:!r,latency:Date.now()-e,error_code:r?.code,error_description:r?.message}})))},t.prototype._isBodyRequired=function(n){var e=n.method;return e!==Ie.GET&&(e!==Ie.DELETE||n instanceof jk)},t.prototype.send=function(n){return D(this,void 0,void 0,(function(){var e,r,i,a,s,o,u,c,h,p,m,_,b,C,N,S,M,w,U;return O(this,(function(L){switch(L.label){case 0:e=n.path,r=n.method,i=n.uploadProgressHandler,a=this._isBodyRequired(n),s=this._sdkState.api,o="".concat(s.host).concat(e).concat(a?"":n.query),u=a?n.payload:null,c=this._createHeader(n,u instanceof FormData?u:void 0),h=new AbortController,p=h.signal,this._abortControl.set(n.requestId,h),m=Date.now(),L.label=1;case 1:return L.trys.push([1,13,,14]),i?[4,hy(()=>import("./__bundle-9e5797c2-B6KWO6RL.js"),[])]:[3,6];case 2:_=L.sent().xmlHttpRequest,L.label=3;case 3:return L.trys.push([3,5,,6]),[4,_(this._iid,{requestId:n.requestId,method:n.method,url:o,headers:c,data:u??void 0,uploadProgressHandler:i})];case 4:return b=L.sent(),this._logger.debug("receive api response",n.requestId),this._statLogApiResult(n,m),[2,b];case 5:if(!((C=L.sent())instanceof ae&&C.code===et.XMLHTTPREQUEST_NOT_SUPPORTED))throw C;return this._logger.debug("XMLHttpRequest is not available in this environment. progressHandler is ignored."),[3,6];case 6:return this._shouldImportFetchCompat&&(this._shouldImportFetchCompat=!1,(typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof global<"u"&&global||{fetch:null}).fetch=null),typeof AbortController<"u"?[3,8]:[4,hy(()=>Promise.resolve().then(()=>Ipe),void 0)];case 7:L.sent(),L.label=8;case 8:return typeof fetch=="function"?[3,10]:[4,hy(()=>import("./__bundle-46d64517-CETxVoCv.js").then(P=>P._),[])];case 9:L.sent(),L.label=10;case 10:return[4,fetch(o,{method:r,body:u,headers:c,signal:p})];case 11:return[4,(N=L.sent()).json()];case 12:if(S=L.sent(),N.ok||N.redirected)return this._logger.debug("receive api response",n.requestId),this._statLogApiResult(n,m),[2,new xe(this._iid,S)];if(S){if((M=new ae(S)).isSessionExpiredError){if(this._dispatcher.dispatch(new bg({reason:M.code,message:M.message})),!(n instanceof gw))return w=new ps,this._dispatcher.dispatch(new zk({request:n,deferred:w,error:M})),[2,w.promise];throw M}throw M.isSessionInvalidatedError&&this._dispatcher.dispatch(new bg({reason:M.code,message:M.message})),M}throw ae.requestFailed;case 13:throw U=L.sent(),this._statLogApiResult(n,m,U),U instanceof ae?(this._logger.debug("fail api request",U),U):U?.name==="AbortError"?ae.requestCanceled:(this._logger.debug("fail api request",U),ae.networkError);case 14:return[2]}}))}))},t.prototype.cancel=function(n){this._abortControl.has(n)&&(this._abortControl.get(n).abort(),this._abortControl.delete(n)),this._dispatcher.dispatch(new YC({requestId:n}))},t.prototype.cancelAll=function(){var n,e;try{for(var r=Fe(this._abortControl.values()),i=r.next();!i.done;i=r.next())i.value.abort()}catch(a){n={error:a}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(n)throw n.error}}this._abortControl.clear(),this._dispatcher.dispatch(new YC({}))},t})(),Bt=function(){};function kg(t){let n=t.length;for(;--n>=0;)t[n]=0}const _w=256,$k=286,vy=30,py=15,SA=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),yC=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Rj=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),EO=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),id=new Array(576);kg(id);const my=new Array(60);kg(my);const Vy=new Array(512);kg(Vy);const gy=new Array(256);kg(gy);const yw=new Array(29);kg(yw);const WC=new Array(vy);function P2(t,n,e,r,i){this.static_tree=t,this.extra_bits=n,this.extra_base=e,this.elems=r,this.max_length=i,this.has_stree=t&&t.length}let bO,CO,SO;function F2(t,n){this.dyn_tree=t,this.max_code=0,this.stat_desc=n}kg(WC);const Kk=t=>t<256?Vy[t]:Vy[256+(t>>>7)],zy=(t,n)=>{t.pending_buf[t.pending++]=255&n,t.pending_buf[t.pending++]=n>>>8&255},_o=(t,n,e)=>{t.bi_valid>16-e?(t.bi_buf|=n<<t.bi_valid&65535,zy(t,t.bi_buf),t.bi_buf=n>>16-t.bi_valid,t.bi_valid+=e-16):(t.bi_buf|=n<<t.bi_valid&65535,t.bi_valid+=e)},vc=(t,n,e)=>{_o(t,e[2*n],e[2*n+1])},Yk=(t,n)=>{let e=0;do e|=1&t,t>>>=1,e<<=1;while(--n>0);return e>>>1},Wk=(t,n,e)=>{const r=new Array(16);let i,a,s=0;for(i=1;i<=py;i++)s=s+e[i-1]<<1,r[i]=s;for(a=0;a<=n;a++){let o=t[2*a+1];o!==0&&(t[2*a]=Yk(r[o]++,o))}},Qk=t=>{let n;for(n=0;n<$k;n++)t.dyn_ltree[2*n]=0;for(n=0;n<vy;n++)t.dyn_dtree[2*n]=0;for(n=0;n<19;n++)t.bl_tree[2*n]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},Xk=t=>{t.bi_valid>8?zy(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},TO=(t,n,e,r)=>{const i=2*n,a=2*e;return t[i]<t[a]||t[i]===t[a]&&r[n]<=r[e]},B2=(t,n,e)=>{const r=t.heap[e];let i=e<<1;for(;i<=t.heap_len&&(i<t.heap_len&&TO(n,t.heap[i+1],t.heap[i],t.depth)&&i++,!TO(n,r,t.heap[i],t.depth));)t.heap[e]=t.heap[i],e=i,i<<=1;t.heap[e]=r},NO=(t,n,e)=>{let r,i,a,s,o=0;if(t.sym_next!==0)do r=255&t.pending_buf[t.sym_buf+o++],r+=(255&t.pending_buf[t.sym_buf+o++])<<8,i=t.pending_buf[t.sym_buf+o++],r===0?vc(t,i,n):(a=gy[i],vc(t,a+_w+1,n),s=SA[a],s!==0&&(i-=yw[a],_o(t,i,s)),r--,a=Kk(r),vc(t,a,e),s=yC[a],s!==0&&(r-=WC[a],_o(t,r,s)));while(o<t.sym_next);vc(t,256,n)},H2=(t,n)=>{const e=n.dyn_tree,r=n.stat_desc.static_tree,i=n.stat_desc.has_stree,a=n.stat_desc.elems;let s,o,u,c=-1;for(t.heap_len=0,t.heap_max=573,s=0;s<a;s++)e[2*s]!==0?(t.heap[++t.heap_len]=c=s,t.depth[s]=0):e[2*s+1]=0;for(;t.heap_len<2;)u=t.heap[++t.heap_len]=c<2?++c:0,e[2*u]=1,t.depth[u]=0,t.opt_len--,i&&(t.static_len-=r[2*u+1]);for(n.max_code=c,s=t.heap_len>>1;s>=1;s--)B2(t,e,s);u=a;do s=t.heap[1],t.heap[1]=t.heap[t.heap_len--],B2(t,e,1),o=t.heap[1],t.heap[--t.heap_max]=s,t.heap[--t.heap_max]=o,e[2*u]=e[2*s]+e[2*o],t.depth[u]=(t.depth[s]>=t.depth[o]?t.depth[s]:t.depth[o])+1,e[2*s+1]=e[2*o+1]=u,t.heap[1]=u++,B2(t,e,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],((h,p)=>{const m=p.dyn_tree,_=p.max_code,b=p.stat_desc.static_tree,C=p.stat_desc.has_stree,N=p.stat_desc.extra_bits,S=p.stat_desc.extra_base,M=p.stat_desc.max_length;let w,U,L,P,x,H,F=0;for(P=0;P<=py;P++)h.bl_count[P]=0;for(m[2*h.heap[h.heap_max]+1]=0,w=h.heap_max+1;w<573;w++)U=h.heap[w],P=m[2*m[2*U+1]+1]+1,P>M&&(P=M,F++),m[2*U+1]=P,U>_||(h.bl_count[P]++,x=0,U>=S&&(x=N[U-S]),H=m[2*U],h.opt_len+=H*(P+x),C&&(h.static_len+=H*(b[2*U+1]+x)));if(F!==0){do{for(P=M-1;h.bl_count[P]===0;)P--;h.bl_count[P]--,h.bl_count[P+1]+=2,h.bl_count[M]--,F-=2}while(F>0);for(P=M;P!==0;P--)for(U=h.bl_count[P];U!==0;)L=h.heap[--w],L>_||(m[2*L+1]!==P&&(h.opt_len+=(P-m[2*L+1])*m[2*L],m[2*L+1]=P),U--)}})(t,n),Wk(e,c,t.bl_count)},AO=(t,n,e)=>{let r,i,a=-1,s=n[1],o=0,u=7,c=4;for(s===0&&(u=138,c=3),n[2*(e+1)+1]=65535,r=0;r<=e;r++)i=s,s=n[2*(r+1)+1],++o<u&&i===s||(o<c?t.bl_tree[2*i]+=o:i!==0?(i!==a&&t.bl_tree[2*i]++,t.bl_tree[32]++):o<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=0,a=i,s===0?(u=138,c=3):i===s?(u=6,c=3):(u=7,c=4))},MO=(t,n,e)=>{let r,i,a=-1,s=n[1],o=0,u=7,c=4;for(s===0&&(u=138,c=3),r=0;r<=e;r++)if(i=s,s=n[2*(r+1)+1],!(++o<u&&i===s)){if(o<c)do vc(t,i,t.bl_tree);while(--o!=0);else i!==0?(i!==a&&(vc(t,i,t.bl_tree),o--),vc(t,16,t.bl_tree),_o(t,o-3,2)):o<=10?(vc(t,17,t.bl_tree),_o(t,o-3,3)):(vc(t,18,t.bl_tree),_o(t,o-11,7));o=0,a=i,s===0?(u=138,c=3):i===s?(u=6,c=3):(u=7,c=4)}};let IO=!1;const Zk=(t,n,e,r)=>{_o(t,0+(r?1:0),3),Xk(t),zy(t,e),zy(t,~e),e&&t.pending_buf.set(t.window.subarray(n,n+e),t.pending),t.pending+=e};var Oj=(t,n,e,r)=>{let i,a,s=0;t.level>0?(t.strm.data_type===2&&(t.strm.data_type=(o=>{let u,c=4093624447;for(u=0;u<=31;u++,c>>>=1)if(1&c&&o.dyn_ltree[2*u]!==0)return 0;if(o.dyn_ltree[18]!==0||o.dyn_ltree[20]!==0||o.dyn_ltree[26]!==0)return 1;for(u=32;u<_w;u++)if(o.dyn_ltree[2*u]!==0)return 1;return 0})(t)),H2(t,t.l_desc),H2(t,t.d_desc),s=(o=>{let u;for(AO(o,o.dyn_ltree,o.l_desc.max_code),AO(o,o.dyn_dtree,o.d_desc.max_code),H2(o,o.bl_desc),u=18;u>=3&&o.bl_tree[2*EO[u]+1]===0;u--);return o.opt_len+=3*(u+1)+5+5+4,u})(t),i=t.opt_len+3+7>>>3,a=t.static_len+3+7>>>3,a<=i&&(i=a)):i=a=e+5,e+4<=i&&n!==-1?Zk(t,n,e,r):t.strategy===4||a===i?(_o(t,2+(r?1:0),3),NO(t,id,my)):(_o(t,4+(r?1:0),3),((o,u,c,h)=>{let p;for(_o(o,u-257,5),_o(o,c-1,5),_o(o,h-4,4),p=0;p<h;p++)_o(o,o.bl_tree[2*EO[p]+1],3);MO(o,o.dyn_ltree,u-1),MO(o,o.dyn_dtree,c-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),NO(t,t.dyn_ltree,t.dyn_dtree)),Qk(t),r&&Xk(t)},Dj={_tr_init:t=>{IO||((()=>{let n,e,r,i,a;const s=new Array(16);for(r=0,i=0;i<28;i++)for(yw[i]=r,n=0;n<1<<SA[i];n++)gy[r++]=i;for(gy[r-1]=i,a=0,i=0;i<16;i++)for(WC[i]=a,n=0;n<1<<yC[i];n++)Vy[a++]=i;for(a>>=7;i<vy;i++)for(WC[i]=a<<7,n=0;n<1<<yC[i]-7;n++)Vy[256+a++]=i;for(e=0;e<=py;e++)s[e]=0;for(n=0;n<=143;)id[2*n+1]=8,n++,s[8]++;for(;n<=255;)id[2*n+1]=9,n++,s[9]++;for(;n<=279;)id[2*n+1]=7,n++,s[7]++;for(;n<=287;)id[2*n+1]=8,n++,s[8]++;for(Wk(id,287,s),n=0;n<vy;n++)my[2*n+1]=5,my[2*n]=Yk(n,5);bO=new P2(id,SA,257,$k,py),CO=new P2(my,yC,0,vy,py),SO=new P2(new Array(0),Rj,0,19,7)})(),IO=!0),t.l_desc=new F2(t.dyn_ltree,bO),t.d_desc=new F2(t.dyn_dtree,CO),t.bl_desc=new F2(t.bl_tree,SO),t.bi_buf=0,t.bi_valid=0,Qk(t)},_tr_stored_block:Zk,_tr_flush_block:Oj,_tr_tally:(t,n,e)=>(t.pending_buf[t.sym_buf+t.sym_next++]=n,t.pending_buf[t.sym_buf+t.sym_next++]=n>>8,t.pending_buf[t.sym_buf+t.sym_next++]=e,n===0?t.dyn_ltree[2*e]++:(t.matches++,n--,t.dyn_ltree[2*(gy[e]+_w+1)]++,t.dyn_dtree[2*Kk(n)]++),t.sym_next===t.sym_end),_tr_align:t=>{_o(t,2,3),vc(t,256,id),(n=>{n.bi_valid===16?(zy(n,n.bi_buf),n.bi_buf=0,n.bi_valid=0):n.bi_valid>=8&&(n.pending_buf[n.pending++]=255&n.bi_buf,n.bi_buf>>=8,n.bi_valid-=8)})(t)}},_y=(t,n,e,r)=>{let i=65535&t,a=t>>>16&65535,s=0;for(;e!==0;){s=e>2e3?2e3:e,e-=s;do i=i+n[r++]|0,a=a+i|0;while(--s);i%=65521,a%=65521}return i|a<<16};const Uj=new Uint32Array((()=>{let t,n=[];for(var e=0;e<256;e++){t=e;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;n[e]=t}return n})());var Aa=(t,n,e,r)=>{const i=Uj,a=r+e;t^=-1;for(let s=r;s<a;s++)t=t>>>8^i[255&(t^n[s])];return~t},fp={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},_E={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:xj,_tr_stored_block:TA,_tr_flush_block:Lj,_tr_tally:Xh,_tr_align:kj}=Dj,{Z_NO_FLUSH:Zh,Z_PARTIAL_FLUSH:Pj,Z_FULL_FLUSH:Fj,Z_FINISH:Il,Z_BLOCK:wO,Z_OK:Ba,Z_STREAM_END:RO,Z_STREAM_ERROR:cc,Z_DATA_ERROR:Bj,Z_BUF_ERROR:G2,Z_DEFAULT_COMPRESSION:Hj,Z_FILTERED:Gj,Z_HUFFMAN_ONLY:k1,Z_RLE:Vj,Z_FIXED:zj,Z_DEFAULT_STRATEGY:jj,Z_UNKNOWN:qj,Z_DEFLATED:QC}=_E,Jv=258,yc=262,fg=42,Hv=113,J0=666,Gv=(t,n)=>(t.msg=fp[n],n),OO=t=>2*t-(t>4?9:0),jh=t=>{let n=t.length;for(;--n>=0;)t[n]=0},$j=t=>{let n,e,r,i=t.w_size;n=t.hash_size,r=n;do e=t.head[--r],t.head[r]=e>=i?e-i:0;while(--n);n=i,r=n;do e=t.prev[--r],t.prev[r]=e>=i?e-i:0;while(--n)};let Jh=(t,n,e)=>(n<<t.hash_shift^e)&t.hash_mask;const Yo=t=>{const n=t.state;let e=n.pending;e>t.avail_out&&(e=t.avail_out),e!==0&&(t.output.set(n.pending_buf.subarray(n.pending_out,n.pending_out+e),t.next_out),t.next_out+=e,n.pending_out+=e,t.total_out+=e,t.avail_out-=e,n.pending-=e,n.pending===0&&(n.pending_out=0))},Zo=(t,n)=>{Lj(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,n),t.block_start=t.strstart,Yo(t.strm)},Fr=(t,n)=>{t.pending_buf[t.pending++]=n},k0=(t,n)=>{t.pending_buf[t.pending++]=n>>>8&255,t.pending_buf[t.pending++]=255&n},NA=(t,n,e,r)=>{let i=t.avail_in;return i>r&&(i=r),i===0?0:(t.avail_in-=i,n.set(t.input.subarray(t.next_in,t.next_in+i),e),t.state.wrap===1?t.adler=_y(t.adler,n,i,e):t.state.wrap===2&&(t.adler=Aa(t.adler,n,i,e)),t.next_in+=i,t.total_in+=i,i)},Jk=(t,n)=>{let e,r,i=t.max_chain_length,a=t.strstart,s=t.prev_length,o=t.nice_match;const u=t.strstart>t.w_size-yc?t.strstart-(t.w_size-yc):0,c=t.window,h=t.w_mask,p=t.prev,m=t.strstart+Jv;let _=c[a+s-1],b=c[a+s];t.prev_length>=t.good_match&&(i>>=2),o>t.lookahead&&(o=t.lookahead);do if(e=n,c[e+s]===b&&c[e+s-1]===_&&c[e]===c[a]&&c[++e]===c[a+1]){a+=2,e++;do;while(c[++a]===c[++e]&&c[++a]===c[++e]&&c[++a]===c[++e]&&c[++a]===c[++e]&&c[++a]===c[++e]&&c[++a]===c[++e]&&c[++a]===c[++e]&&c[++a]===c[++e]&&a<m);if(r=Jv-(m-a),a=m-Jv,r>s){if(t.match_start=n,s=r,r>=o)break;_=c[a+s-1],b=c[a+s]}}while((n=p[n&h])>u&&--i!=0);return s<=t.lookahead?s:t.lookahead},cg=t=>{const n=t.w_size;let e,r,i;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=n+(n-yc)&&(t.window.set(t.window.subarray(n,n+n-r),0),t.match_start-=n,t.strstart-=n,t.block_start-=n,t.insert>t.strstart&&(t.insert=t.strstart),$j(t),r+=n),t.strm.avail_in===0)break;if(e=NA(t.strm,t.window,t.strstart+t.lookahead,r),t.lookahead+=e,t.lookahead+t.insert>=3)for(i=t.strstart-t.insert,t.ins_h=t.window[i],t.ins_h=Jh(t,t.ins_h,t.window[i+1]);t.insert&&(t.ins_h=Jh(t,t.ins_h,t.window[i+3-1]),t.prev[i&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=i,i++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<yc&&t.strm.avail_in!==0)},eP=(t,n)=>{let e,r,i,a=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,s=0,o=t.strm.avail_in;do{if(e=65535,i=t.bi_valid+42>>3,t.strm.avail_out<i||(i=t.strm.avail_out-i,r=t.strstart-t.block_start,e>r+t.strm.avail_in&&(e=r+t.strm.avail_in),e>i&&(e=i),e<a&&(e===0&&n!==Il||n===Zh||e!==r+t.strm.avail_in)))break;s=n===Il&&e===r+t.strm.avail_in?1:0,TA(t,0,0,s),t.pending_buf[t.pending-4]=e,t.pending_buf[t.pending-3]=e>>8,t.pending_buf[t.pending-2]=~e,t.pending_buf[t.pending-1]=~e>>8,Yo(t.strm),r&&(r>e&&(r=e),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+r),t.strm.next_out),t.strm.next_out+=r,t.strm.avail_out-=r,t.strm.total_out+=r,t.block_start+=r,e-=r),e&&(NA(t.strm,t.strm.output,t.strm.next_out,e),t.strm.next_out+=e,t.strm.avail_out-=e,t.strm.total_out+=e)}while(s===0);return o-=t.strm.avail_in,o&&(o>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=o&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-o,t.strm.next_in),t.strstart),t.strstart+=o,t.insert+=o>t.w_size-t.insert?t.w_size-t.insert:o),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),s?4:n!==Zh&&n!==Il&&t.strm.avail_in===0&&t.strstart===t.block_start?2:(i=t.window_size-t.strstart,t.strm.avail_in>i&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,i+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),i>t.strm.avail_in&&(i=t.strm.avail_in),i&&(NA(t.strm,t.window,t.strstart,i),t.strstart+=i,t.insert+=i>t.w_size-t.insert?t.w_size-t.insert:i),t.high_water<t.strstart&&(t.high_water=t.strstart),i=t.bi_valid+42>>3,i=t.pending_buf_size-i>65535?65535:t.pending_buf_size-i,a=i>t.w_size?t.w_size:i,r=t.strstart-t.block_start,(r>=a||(r||n===Il)&&n!==Zh&&t.strm.avail_in===0&&r<=i)&&(e=r>i?i:r,s=n===Il&&t.strm.avail_in===0&&e===r?1:0,TA(t,t.block_start,e,s),t.block_start+=e,Yo(t.strm)),s?3:1)},V2=(t,n)=>{let e,r;for(;;){if(t.lookahead<yc){if(cg(t),t.lookahead<yc&&n===Zh)return 1;if(t.lookahead===0)break}if(e=0,t.lookahead>=3&&(t.ins_h=Jh(t,t.ins_h,t.window[t.strstart+3-1]),e=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),e!==0&&t.strstart-e<=t.w_size-yc&&(t.match_length=Jk(t,e)),t.match_length>=3)if(r=Xh(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do t.strstart++,t.ins_h=Jh(t,t.ins_h,t.window[t.strstart+3-1]),e=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(--t.match_length!=0);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=Jh(t,t.ins_h,t.window[t.strstart+1]);else r=Xh(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(Zo(t,!1),t.strm.avail_out===0))return 1}return t.insert=t.strstart<2?t.strstart:2,n===Il?(Zo(t,!0),t.strm.avail_out===0?3:4):t.sym_next&&(Zo(t,!1),t.strm.avail_out===0)?1:2},Wm=(t,n)=>{let e,r,i;for(;;){if(t.lookahead<yc){if(cg(t),t.lookahead<yc&&n===Zh)return 1;if(t.lookahead===0)break}if(e=0,t.lookahead>=3&&(t.ins_h=Jh(t,t.ins_h,t.window[t.strstart+3-1]),e=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,e!==0&&t.prev_length<t.max_lazy_match&&t.strstart-e<=t.w_size-yc&&(t.match_length=Jk(t,e),t.match_length<=5&&(t.strategy===Gj||t.match_length===3&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-3,r=Xh(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=i&&(t.ins_h=Jh(t,t.ins_h,t.window[t.strstart+3-1]),e=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(--t.prev_length!=0);if(t.match_available=0,t.match_length=2,t.strstart++,r&&(Zo(t,!1),t.strm.avail_out===0))return 1}else if(t.match_available){if(r=Xh(t,0,t.window[t.strstart-1]),r&&Zo(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=Xh(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,n===Il?(Zo(t,!0),t.strm.avail_out===0?3:4):t.sym_next&&(Zo(t,!1),t.strm.avail_out===0)?1:2};function uc(t,n,e,r,i){this.good_length=t,this.max_lazy=n,this.nice_length=e,this.max_chain=r,this.func=i}const ey=[new uc(0,0,0,0,eP),new uc(4,4,8,4,V2),new uc(4,5,16,8,V2),new uc(4,6,32,32,V2),new uc(4,4,16,16,Wm),new uc(8,16,32,32,Wm),new uc(8,16,128,128,Wm),new uc(8,32,128,256,Wm),new uc(32,128,258,1024,Wm),new uc(32,258,258,4096,Wm)];function Kj(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=QC,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),jh(this.dyn_ltree),jh(this.dyn_dtree),jh(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),jh(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),jh(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const ty=t=>{if(!t)return 1;const n=t.state;return!n||n.strm!==t||n.status!==fg&&n.status!==57&&n.status!==69&&n.status!==73&&n.status!==91&&n.status!==103&&n.status!==Hv&&n.status!==J0?1:0},tP=t=>{if(ty(t))return Gv(t,cc);t.total_in=t.total_out=0,t.data_type=qj;const n=t.state;return n.pending=0,n.pending_out=0,n.wrap<0&&(n.wrap=-n.wrap),n.status=n.wrap===2?57:n.wrap?fg:Hv,t.adler=n.wrap===2?0:1,n.last_flush=-2,xj(n),Ba},nP=t=>{const n=tP(t);var e;return n===Ba&&((e=t.state).window_size=2*e.w_size,jh(e.head),e.max_lazy_match=ey[e.level].max_lazy,e.good_match=ey[e.level].good_length,e.nice_match=ey[e.level].nice_length,e.max_chain_length=ey[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),n},DO=(t,n,e,r,i,a)=>{if(!t)return cc;let s=1;if(n===Hj&&(n=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),i<1||i>9||e!==QC||r<8||r>15||n<0||n>9||a<0||a>zj||r===8&&s!==1)return Gv(t,cc);r===8&&(r=9);const o=new Kj;return t.state=o,o.strm=t,o.status=fg,o.wrap=s,o.gzhead=null,o.w_bits=r,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=i+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<i+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=3*(o.lit_bufsize-1),o.level=n,o.strategy=a,o.method=e,nP(t)};var yy={deflateInit:(t,n)=>DO(t,n,QC,15,8,jj),deflateInit2:DO,deflateReset:nP,deflateResetKeep:tP,deflateSetHeader:(t,n)=>ty(t)||t.state.wrap!==2?cc:(t.state.gzhead=n,Ba),deflate:(t,n)=>{if(ty(t)||n>wO||n<0)return t?Gv(t,cc):cc;const e=t.state;if(!t.output||t.avail_in!==0&&!t.input||e.status===J0&&n!==Il)return Gv(t,t.avail_out===0?G2:cc);const r=e.last_flush;if(e.last_flush=n,e.pending!==0){if(Yo(t),t.avail_out===0)return e.last_flush=-1,Ba}else if(t.avail_in===0&&OO(n)<=OO(r)&&n!==Il)return Gv(t,G2);if(e.status===J0&&t.avail_in!==0)return Gv(t,G2);if(e.status===fg&&e.wrap===0&&(e.status=Hv),e.status===fg){let i=QC+(e.w_bits-8<<4)<<8,a=-1;if(a=e.strategy>=k1||e.level<2?0:e.level<6?1:e.level===6?2:3,i|=a<<6,e.strstart!==0&&(i|=32),i+=31-i%31,k0(e,i),e.strstart!==0&&(k0(e,t.adler>>>16),k0(e,65535&t.adler)),t.adler=1,e.status=Hv,Yo(t),e.pending!==0)return e.last_flush=-1,Ba}if(e.status===57){if(t.adler=0,Fr(e,31),Fr(e,139),Fr(e,8),e.gzhead)Fr(e,(e.gzhead.text?1:0)+(e.gzhead.hcrc?2:0)+(e.gzhead.extra?4:0)+(e.gzhead.name?8:0)+(e.gzhead.comment?16:0)),Fr(e,255&e.gzhead.time),Fr(e,e.gzhead.time>>8&255),Fr(e,e.gzhead.time>>16&255),Fr(e,e.gzhead.time>>24&255),Fr(e,e.level===9?2:e.strategy>=k1||e.level<2?4:0),Fr(e,255&e.gzhead.os),e.gzhead.extra&&e.gzhead.extra.length&&(Fr(e,255&e.gzhead.extra.length),Fr(e,e.gzhead.extra.length>>8&255)),e.gzhead.hcrc&&(t.adler=Aa(t.adler,e.pending_buf,e.pending,0)),e.gzindex=0,e.status=69;else if(Fr(e,0),Fr(e,0),Fr(e,0),Fr(e,0),Fr(e,0),Fr(e,e.level===9?2:e.strategy>=k1||e.level<2?4:0),Fr(e,3),e.status=Hv,Yo(t),e.pending!==0)return e.last_flush=-1,Ba}if(e.status===69){if(e.gzhead.extra){let i=e.pending,a=(65535&e.gzhead.extra.length)-e.gzindex;for(;e.pending+a>e.pending_buf_size;){let o=e.pending_buf_size-e.pending;if(e.pending_buf.set(e.gzhead.extra.subarray(e.gzindex,e.gzindex+o),e.pending),e.pending=e.pending_buf_size,e.gzhead.hcrc&&e.pending>i&&(t.adler=Aa(t.adler,e.pending_buf,e.pending-i,i)),e.gzindex+=o,Yo(t),e.pending!==0)return e.last_flush=-1,Ba;i=0,a-=o}let s=new Uint8Array(e.gzhead.extra);e.pending_buf.set(s.subarray(e.gzindex,e.gzindex+a),e.pending),e.pending+=a,e.gzhead.hcrc&&e.pending>i&&(t.adler=Aa(t.adler,e.pending_buf,e.pending-i,i)),e.gzindex=0}e.status=73}if(e.status===73){if(e.gzhead.name){let i,a=e.pending;do{if(e.pending===e.pending_buf_size){if(e.gzhead.hcrc&&e.pending>a&&(t.adler=Aa(t.adler,e.pending_buf,e.pending-a,a)),Yo(t),e.pending!==0)return e.last_flush=-1,Ba;a=0}i=e.gzindex<e.gzhead.name.length?255&e.gzhead.name.charCodeAt(e.gzindex++):0,Fr(e,i)}while(i!==0);e.gzhead.hcrc&&e.pending>a&&(t.adler=Aa(t.adler,e.pending_buf,e.pending-a,a)),e.gzindex=0}e.status=91}if(e.status===91){if(e.gzhead.comment){let i,a=e.pending;do{if(e.pending===e.pending_buf_size){if(e.gzhead.hcrc&&e.pending>a&&(t.adler=Aa(t.adler,e.pending_buf,e.pending-a,a)),Yo(t),e.pending!==0)return e.last_flush=-1,Ba;a=0}i=e.gzindex<e.gzhead.comment.length?255&e.gzhead.comment.charCodeAt(e.gzindex++):0,Fr(e,i)}while(i!==0);e.gzhead.hcrc&&e.pending>a&&(t.adler=Aa(t.adler,e.pending_buf,e.pending-a,a))}e.status=103}if(e.status===103){if(e.gzhead.hcrc){if(e.pending+2>e.pending_buf_size&&(Yo(t),e.pending!==0))return e.last_flush=-1,Ba;Fr(e,255&t.adler),Fr(e,t.adler>>8&255),t.adler=0}if(e.status=Hv,Yo(t),e.pending!==0)return e.last_flush=-1,Ba}if(t.avail_in!==0||e.lookahead!==0||n!==Zh&&e.status!==J0){let i=e.level===0?eP(e,n):e.strategy===k1?((a,s)=>{let o;for(;;){if(a.lookahead===0&&(cg(a),a.lookahead===0)){if(s===Zh)return 1;break}if(a.match_length=0,o=Xh(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++,o&&(Zo(a,!1),a.strm.avail_out===0))return 1}return a.insert=0,s===Il?(Zo(a,!0),a.strm.avail_out===0?3:4):a.sym_next&&(Zo(a,!1),a.strm.avail_out===0)?1:2})(e,n):e.strategy===Vj?((a,s)=>{let o,u,c,h;const p=a.window;for(;;){if(a.lookahead<=Jv){if(cg(a),a.lookahead<=Jv&&s===Zh)return 1;if(a.lookahead===0)break}if(a.match_length=0,a.lookahead>=3&&a.strstart>0&&(c=a.strstart-1,u=p[c],u===p[++c]&&u===p[++c]&&u===p[++c])){h=a.strstart+Jv;do;while(u===p[++c]&&u===p[++c]&&u===p[++c]&&u===p[++c]&&u===p[++c]&&u===p[++c]&&u===p[++c]&&u===p[++c]&&c<h);a.match_length=Jv-(h-c),a.match_length>a.lookahead&&(a.match_length=a.lookahead)}if(a.match_length>=3?(o=Xh(a,1,a.match_length-3),a.lookahead-=a.match_length,a.strstart+=a.match_length,a.match_length=0):(o=Xh(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++),o&&(Zo(a,!1),a.strm.avail_out===0))return 1}return a.insert=0,s===Il?(Zo(a,!0),a.strm.avail_out===0?3:4):a.sym_next&&(Zo(a,!1),a.strm.avail_out===0)?1:2})(e,n):ey[e.level].func(e,n);if(i!==3&&i!==4||(e.status=J0),i===1||i===3)return t.avail_out===0&&(e.last_flush=-1),Ba;if(i===2&&(n===Pj?kj(e):n!==wO&&(TA(e,0,0,!1),n===Fj&&(jh(e.head),e.lookahead===0&&(e.strstart=0,e.block_start=0,e.insert=0))),Yo(t),t.avail_out===0))return e.last_flush=-1,Ba}return n!==Il?Ba:e.wrap<=0?RO:(e.wrap===2?(Fr(e,255&t.adler),Fr(e,t.adler>>8&255),Fr(e,t.adler>>16&255),Fr(e,t.adler>>24&255),Fr(e,255&t.total_in),Fr(e,t.total_in>>8&255),Fr(e,t.total_in>>16&255),Fr(e,t.total_in>>24&255)):(k0(e,t.adler>>>16),k0(e,65535&t.adler)),Yo(t),e.wrap>0&&(e.wrap=-e.wrap),e.pending!==0?Ba:RO)},deflateEnd:t=>{if(ty(t))return cc;const n=t.state.status;return t.state=null,n===Hv?Gv(t,Bj):Ba},deflateSetDictionary:(t,n)=>{let e=n.length;if(ty(t))return cc;const r=t.state,i=r.wrap;if(i===2||i===1&&r.status!==fg||r.lookahead)return cc;if(i===1&&(t.adler=_y(t.adler,n,e,0)),r.wrap=0,e>=r.w_size){i===0&&(jh(r.head),r.strstart=0,r.block_start=0,r.insert=0);let u=new Uint8Array(r.w_size);u.set(n.subarray(e-r.w_size,e),0),n=u,e=r.w_size}const a=t.avail_in,s=t.next_in,o=t.input;for(t.avail_in=e,t.next_in=0,t.input=n,cg(r);r.lookahead>=3;){let u=r.strstart,c=r.lookahead-2;do r.ins_h=Jh(r,r.ins_h,r.window[u+3-1]),r.prev[u&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=u,u++;while(--c);r.strstart=u,r.lookahead=2,cg(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,t.next_in=s,t.input=o,t.avail_in=a,r.wrap=i,Ba},deflateInfo:"pako deflate (from Nodeca project)"};const Yj=(t,n)=>Object.prototype.hasOwnProperty.call(t,n);var rP=function(t){const n=Array.prototype.slice.call(arguments,1);for(;n.length;){const e=n.shift();if(e){if(typeof e!="object")throw new TypeError(e+"must be non-object");for(const r in e)Yj(e,r)&&(t[r]=e[r])}}return t},iP=t=>{let n=0;for(let r=0,i=t.length;r<i;r++)n+=t[r].length;const e=new Uint8Array(n);for(let r=0,i=0,a=t.length;r<a;r++){let s=t[r];e.set(s,i),i+=s.length}return e};let aP=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{aP=!1}const jy=new Uint8Array(256);for(let t=0;t<256;t++)jy[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;jy[254]=jy[254]=1;var Ew=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let n,e,r,i,a,s=t.length,o=0;for(i=0;i<s;i++)e=t.charCodeAt(i),(64512&e)==55296&&i+1<s&&(r=t.charCodeAt(i+1),(64512&r)==56320&&(e=65536+(e-55296<<10)+(r-56320),i++)),o+=e<128?1:e<2048?2:e<65536?3:4;for(n=new Uint8Array(o),a=0,i=0;a<o;i++)e=t.charCodeAt(i),(64512&e)==55296&&i+1<s&&(r=t.charCodeAt(i+1),(64512&r)==56320&&(e=65536+(e-55296<<10)+(r-56320),i++)),e<128?n[a++]=e:e<2048?(n[a++]=192|e>>>6,n[a++]=128|63&e):e<65536?(n[a++]=224|e>>>12,n[a++]=128|e>>>6&63,n[a++]=128|63&e):(n[a++]=240|e>>>18,n[a++]=128|e>>>12&63,n[a++]=128|e>>>6&63,n[a++]=128|63&e);return n},Wj=(t,n)=>{const e=n||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,n));let r,i;const a=new Array(2*e);for(i=0,r=0;r<e;){let s=t[r++];if(s<128){a[i++]=s;continue}let o=jy[s];if(o>4)a[i++]=65533,r+=o-1;else{for(s&=o===2?31:o===3?15:7;o>1&&r<e;)s=s<<6|63&t[r++],o--;o>1?a[i++]=65533:s<65536?a[i++]=s:(s-=65536,a[i++]=55296|s>>10&1023,a[i++]=56320|1023&s)}}return((s,o)=>{if(o<65534&&s.subarray&&aP)return String.fromCharCode.apply(null,s.length===o?s:s.subarray(0,o));let u="";for(let c=0;c<o;c++)u+=String.fromCharCode(s[c]);return u})(a,i)},Qj=(t,n)=>{(n=n||t.length)>t.length&&(n=t.length);let e=n-1;for(;e>=0&&(192&t[e])==128;)e--;return e<0||e===0?n:e+jy[t[e]]>n?e:n},sP=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const oP=Object.prototype.toString,{Z_NO_FLUSH:Xj,Z_SYNC_FLUSH:Zj,Z_FULL_FLUSH:Jj,Z_FINISH:eq,Z_OK:XC,Z_STREAM_END:tq,Z_DEFAULT_COMPRESSION:nq,Z_DEFAULT_STRATEGY:rq,Z_DEFLATED:iq}=_E;function Ey(t){this.options=rP({level:nq,method:iq,chunkSize:16384,windowBits:15,memLevel:8,strategy:rq},t||{});let n=this.options;n.raw&&n.windowBits>0?n.windowBits=-n.windowBits:n.gzip&&n.windowBits>0&&n.windowBits<16&&(n.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new sP,this.strm.avail_out=0;let e=yy.deflateInit2(this.strm,n.level,n.method,n.windowBits,n.memLevel,n.strategy);if(e!==XC)throw new Error(fp[e]);if(n.header&&yy.deflateSetHeader(this.strm,n.header),n.dictionary){let r;if(r=typeof n.dictionary=="string"?Ew(n.dictionary):oP.call(n.dictionary)==="[object ArrayBuffer]"?new Uint8Array(n.dictionary):n.dictionary,e=yy.deflateSetDictionary(this.strm,r),e!==XC)throw new Error(fp[e]);this._dict_set=!0}}function z2(t,n){const e=new Ey(n);if(e.push(t,!0),e.err)throw e.msg||fp[e.err];return e.result}Ey.prototype.push=function(t,n){const e=this.strm,r=this.options.chunkSize;let i,a;if(this.ended)return!1;for(a=n===~~n?n:n===!0?eq:Xj,typeof t=="string"?e.input=Ew(t):oP.call(t)==="[object ArrayBuffer]"?e.input=new Uint8Array(t):e.input=t,e.next_in=0,e.avail_in=e.input.length;;)if(e.avail_out===0&&(e.output=new Uint8Array(r),e.next_out=0,e.avail_out=r),(a===Zj||a===Jj)&&e.avail_out<=6)this.onData(e.output.subarray(0,e.next_out)),e.avail_out=0;else{if(i=yy.deflate(e,a),i===tq)return e.next_out>0&&this.onData(e.output.subarray(0,e.next_out)),i=yy.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===XC;if(e.avail_out!==0){if(a>0&&e.next_out>0)this.onData(e.output.subarray(0,e.next_out)),e.avail_out=0;else if(e.avail_in===0)break}else this.onData(e.output)}return!0},Ey.prototype.onData=function(t){this.chunks.push(t)},Ey.prototype.onEnd=function(t){t===XC&&(this.result=iP(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var aq={Deflate:Ey,deflate:z2,deflateRaw:function(t,n){return(n=n||{}).raw=!0,z2(t,n)},gzip:function(t,n){return(n=n||{}).gzip=!0,z2(t,n)}};const P1=16209;var sq=function(t,n){let e,r,i,a,s,o,u,c,h,p,m,_,b,C,N,S,M,w,U,L,P,x,H,F;const Q=t.state;e=t.next_in,H=t.input,r=e+(t.avail_in-5),i=t.next_out,F=t.output,a=i-(n-t.avail_out),s=i+(t.avail_out-257),o=Q.dmax,u=Q.wsize,c=Q.whave,h=Q.wnext,p=Q.window,m=Q.hold,_=Q.bits,b=Q.lencode,C=Q.distcode,N=(1<<Q.lenbits)-1,S=(1<<Q.distbits)-1;e:do{_<15&&(m+=H[e++]<<_,_+=8,m+=H[e++]<<_,_+=8),M=b[m&N];t:for(;;){if(w=M>>>24,m>>>=w,_-=w,w=M>>>16&255,w===0)F[i++]=65535&M;else{if(!(16&w)){if(64&w){if(32&w){Q.mode=16191;break e}t.msg="invalid literal/length code",Q.mode=P1;break e}M=b[(65535&M)+(m&(1<<w)-1)];continue t}for(U=65535&M,w&=15,w&&(_<w&&(m+=H[e++]<<_,_+=8),U+=m&(1<<w)-1,m>>>=w,_-=w),_<15&&(m+=H[e++]<<_,_+=8,m+=H[e++]<<_,_+=8),M=C[m&S];;){if(w=M>>>24,m>>>=w,_-=w,w=M>>>16&255,16&w){if(L=65535&M,w&=15,_<w&&(m+=H[e++]<<_,_+=8,_<w&&(m+=H[e++]<<_,_+=8)),L+=m&(1<<w)-1,L>o){t.msg="invalid distance too far back",Q.mode=P1;break e}if(m>>>=w,_-=w,w=i-a,L>w){if(w=L-w,w>c&&Q.sane){t.msg="invalid distance too far back",Q.mode=P1;break e}if(P=0,x=p,h===0){if(P+=u-w,w<U){U-=w;do F[i++]=p[P++];while(--w);P=i-L,x=F}}else if(h<w){if(P+=u+h-w,w-=h,w<U){U-=w;do F[i++]=p[P++];while(--w);if(P=0,h<U){w=h,U-=w;do F[i++]=p[P++];while(--w);P=i-L,x=F}}}else if(P+=h-w,w<U){U-=w;do F[i++]=p[P++];while(--w);P=i-L,x=F}for(;U>2;)F[i++]=x[P++],F[i++]=x[P++],F[i++]=x[P++],U-=3;U&&(F[i++]=x[P++],U>1&&(F[i++]=x[P++]))}else{P=i-L;do F[i++]=F[P++],F[i++]=F[P++],F[i++]=F[P++],U-=3;while(U>2);U&&(F[i++]=F[P++],U>1&&(F[i++]=F[P++]))}break}if(64&w){t.msg="invalid distance code",Q.mode=P1;break e}M=C[(65535&M)+(m&(1<<w)-1)]}}break}}while(e<r&&i<s);U=_>>3,e-=U,_-=U<<3,m&=(1<<_)-1,t.next_in=e,t.next_out=i,t.avail_in=e<r?r-e+5:5-(e-r),t.avail_out=i<s?s-i+257:257-(i-s),Q.hold=m,Q.bits=_};const F1=15,oq=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),lq=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),uq=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),cq=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var by=(t,n,e,r,i,a,s,o)=>{const u=o.bits;let c,h,p,m,_,b,C=0,N=0,S=0,M=0,w=0,U=0,L=0,P=0,x=0,H=0,F=null;const Q=new Uint16Array(16),$=new Uint16Array(16);let q,X,V,ee=null;for(C=0;C<=F1;C++)Q[C]=0;for(N=0;N<r;N++)Q[n[e+N]]++;for(w=u,M=F1;M>=1&&Q[M]===0;M--);if(w>M&&(w=M),M===0)return i[a++]=20971520,i[a++]=20971520,o.bits=1,0;for(S=1;S<M&&Q[S]===0;S++);for(w<S&&(w=S),P=1,C=1;C<=F1;C++)if(P<<=1,P-=Q[C],P<0)return-1;if(P>0&&(t===0||M!==1))return-1;for($[1]=0,C=1;C<F1;C++)$[C+1]=$[C]+Q[C];for(N=0;N<r;N++)n[e+N]!==0&&(s[$[n[e+N]]++]=N);if(t===0?(F=ee=s,b=20):t===1?(F=oq,ee=lq,b=257):(F=uq,ee=cq,b=0),H=0,N=0,C=S,_=a,U=w,L=0,p=-1,x=1<<w,m=x-1,t===1&&x>852||t===2&&x>592)return 1;for(;;){q=C-L,s[N]+1<b?(X=0,V=s[N]):s[N]>=b?(X=ee[s[N]-b],V=F[s[N]-b]):(X=96,V=0),c=1<<C-L,h=1<<U,S=h;do h-=c,i[_+(H>>L)+h]=q<<24|X<<16|V;while(h!==0);for(c=1<<C-1;H&c;)c>>=1;if(c!==0?(H&=c-1,H+=c):H=0,N++,--Q[C]==0){if(C===M)break;C=n[e+s[N]]}if(C>w&&(H&m)!==p){for(L===0&&(L=w),_+=S,U=C-L,P=1<<U;U+L<M&&(P-=Q[U+L],!(P<=0));)U++,P<<=1;if(x+=1<<U,t===1&&x>852||t===2&&x>592)return 1;p=H&m,i[p]=w<<24|U<<16|_-a}}return H!==0&&(i[_+H]=C-L<<24|64<<16),o.bits=w,0};const{Z_FINISH:UO,Z_BLOCK:dq,Z_TREES:B1,Z_OK:Vv,Z_STREAM_END:hq,Z_NEED_DICT:fq,Z_STREAM_ERROR:Tl,Z_DATA_ERROR:xO,Z_MEM_ERROR:LO,Z_BUF_ERROR:vq,Z_DEFLATED:kO}=_E,PS=16180,H1=16190,ed=16191,j2=16192,q2=16194,G1=16199,V1=16200,$2=16206,Si=16209,PO=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function pq(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const ep=t=>{if(!t)return 1;const n=t.state;return!n||n.strm!==t||n.mode<PS||n.mode>16211?1:0},lP=t=>{if(ep(t))return Tl;const n=t.state;return t.total_in=t.total_out=n.total=0,t.msg="",n.wrap&&(t.adler=1&n.wrap),n.mode=PS,n.last=0,n.havedict=0,n.flags=-1,n.dmax=32768,n.head=null,n.hold=0,n.bits=0,n.lencode=n.lendyn=new Int32Array(852),n.distcode=n.distdyn=new Int32Array(592),n.sane=1,n.back=-1,Vv},uP=t=>{if(ep(t))return Tl;const n=t.state;return n.wsize=0,n.whave=0,n.wnext=0,lP(t)},cP=(t,n)=>{let e;if(ep(t))return Tl;const r=t.state;return n<0?(e=0,n=-n):(e=5+(n>>4),n<48&&(n&=15)),n&&(n<8||n>15)?Tl:(r.window!==null&&r.wbits!==n&&(r.window=null),r.wrap=e,r.wbits=n,uP(t))},FO=(t,n)=>{if(!t)return Tl;const e=new pq;t.state=e,e.strm=t,e.window=null,e.mode=PS;const r=cP(t,n);return r!==Vv&&(t.state=null),r};let K2,Y2,BO=!0;const mq=t=>{if(BO){K2=new Int32Array(512),Y2=new Int32Array(32);let n=0;for(;n<144;)t.lens[n++]=8;for(;n<256;)t.lens[n++]=9;for(;n<280;)t.lens[n++]=7;for(;n<288;)t.lens[n++]=8;for(by(1,t.lens,0,288,K2,0,t.work,{bits:9}),n=0;n<32;)t.lens[n++]=5;by(2,t.lens,0,32,Y2,0,t.work,{bits:5}),BO=!1}t.lencode=K2,t.lenbits=9,t.distcode=Y2,t.distbits=5},HO=(t,n,e,r)=>{let i;const a=t.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),r>=a.wsize?(a.window.set(n.subarray(e-a.wsize,e),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>r&&(i=r),a.window.set(n.subarray(e-r,e-r+i),a.wnext),(r-=i)?(a.window.set(n.subarray(e-r,e),0),a.wnext=r,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0};var ld={inflateReset:uP,inflateReset2:cP,inflateResetKeep:lP,inflateInit:t=>FO(t,15),inflateInit2:FO,inflate:(t,n)=>{let e,r,i,a,s,o,u,c,h,p,m,_,b,C,N,S,M,w,U,L,P,x,H=0;const F=new Uint8Array(4);let Q,$;const q=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(ep(t)||!t.output||!t.input&&t.avail_in!==0)return Tl;e=t.state,e.mode===ed&&(e.mode=j2),s=t.next_out,i=t.output,u=t.avail_out,a=t.next_in,r=t.input,o=t.avail_in,c=e.hold,h=e.bits,p=o,m=u,x=Vv;e:for(;;)switch(e.mode){case PS:if(e.wrap===0){e.mode=j2;break}for(;h<16;){if(o===0)break e;o--,c+=r[a++]<<h,h+=8}if(2&e.wrap&&c===35615){e.wbits===0&&(e.wbits=15),e.check=0,F[0]=255&c,F[1]=c>>>8&255,e.check=Aa(e.check,F,2,0),c=0,h=0,e.mode=16181;break}if(e.head&&(e.head.done=!1),!(1&e.wrap)||(((255&c)<<8)+(c>>8))%31){t.msg="incorrect header check",e.mode=Si;break}if((15&c)!==kO){t.msg="unknown compression method",e.mode=Si;break}if(c>>>=4,h-=4,P=8+(15&c),e.wbits===0&&(e.wbits=P),P>15||P>e.wbits){t.msg="invalid window size",e.mode=Si;break}e.dmax=1<<e.wbits,e.flags=0,t.adler=e.check=1,e.mode=512&c?16189:ed,c=0,h=0;break;case 16181:for(;h<16;){if(o===0)break e;o--,c+=r[a++]<<h,h+=8}if(e.flags=c,(255&e.flags)!==kO){t.msg="unknown compression method",e.mode=Si;break}if(57344&e.flags){t.msg="unknown header flags set",e.mode=Si;break}e.head&&(e.head.text=c>>8&1),512&e.flags&&4&e.wrap&&(F[0]=255&c,F[1]=c>>>8&255,e.check=Aa(e.check,F,2,0)),c=0,h=0,e.mode=16182;case 16182:for(;h<32;){if(o===0)break e;o--,c+=r[a++]<<h,h+=8}e.head&&(e.head.time=c),512&e.flags&&4&e.wrap&&(F[0]=255&c,F[1]=c>>>8&255,F[2]=c>>>16&255,F[3]=c>>>24&255,e.check=Aa(e.check,F,4,0)),c=0,h=0,e.mode=16183;case 16183:for(;h<16;){if(o===0)break e;o--,c+=r[a++]<<h,h+=8}e.head&&(e.head.xflags=255&c,e.head.os=c>>8),512&e.flags&&4&e.wrap&&(F[0]=255&c,F[1]=c>>>8&255,e.check=Aa(e.check,F,2,0)),c=0,h=0,e.mode=16184;case 16184:if(1024&e.flags){for(;h<16;){if(o===0)break e;o--,c+=r[a++]<<h,h+=8}e.length=c,e.head&&(e.head.extra_len=c),512&e.flags&&4&e.wrap&&(F[0]=255&c,F[1]=c>>>8&255,e.check=Aa(e.check,F,2,0)),c=0,h=0}else e.head&&(e.head.extra=null);e.mode=16185;case 16185:if(1024&e.flags&&(_=e.length,_>o&&(_=o),_&&(e.head&&(P=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Uint8Array(e.head.extra_len)),e.head.extra.set(r.subarray(a,a+_),P)),512&e.flags&&4&e.wrap&&(e.check=Aa(e.check,r,_,a)),o-=_,a+=_,e.length-=_),e.length))break e;e.length=0,e.mode=16186;case 16186:if(2048&e.flags){if(o===0)break e;_=0;do P=r[a+_++],e.head&&P&&e.length<65536&&(e.head.name+=String.fromCharCode(P));while(P&&_<o);if(512&e.flags&&4&e.wrap&&(e.check=Aa(e.check,r,_,a)),o-=_,a+=_,P)break e}else e.head&&(e.head.name=null);e.length=0,e.mode=16187;case 16187:if(4096&e.flags){if(o===0)break e;_=0;do P=r[a+_++],e.head&&P&&e.length<65536&&(e.head.comment+=String.fromCharCode(P));while(P&&_<o);if(512&e.flags&&4&e.wrap&&(e.check=Aa(e.check,r,_,a)),o-=_,a+=_,P)break e}else e.head&&(e.head.comment=null);e.mode=16188;case 16188:if(512&e.flags){for(;h<16;){if(o===0)break e;o--,c+=r[a++]<<h,h+=8}if(4&e.wrap&&c!==(65535&e.check)){t.msg="header crc mismatch",e.mode=Si;break}c=0,h=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),t.adler=e.check=0,e.mode=ed;break;case 16189:for(;h<32;){if(o===0)break e;o--,c+=r[a++]<<h,h+=8}t.adler=e.check=PO(c),c=0,h=0,e.mode=H1;case H1:if(e.havedict===0)return t.next_out=s,t.avail_out=u,t.next_in=a,t.avail_in=o,e.hold=c,e.bits=h,fq;t.adler=e.check=1,e.mode=ed;case ed:if(n===dq||n===B1)break e;case j2:if(e.last){c>>>=7&h,h-=7&h,e.mode=$2;break}for(;h<3;){if(o===0)break e;o--,c+=r[a++]<<h,h+=8}switch(e.last=1&c,c>>>=1,h-=1,3&c){case 0:e.mode=16193;break;case 1:if(mq(e),e.mode=G1,n===B1){c>>>=2,h-=2;break e}break;case 2:e.mode=16196;break;case 3:t.msg="invalid block type",e.mode=Si}c>>>=2,h-=2;break;case 16193:for(c>>>=7&h,h-=7&h;h<32;){if(o===0)break e;o--,c+=r[a++]<<h,h+=8}if((65535&c)!=(c>>>16^65535)){t.msg="invalid stored block lengths",e.mode=Si;break}if(e.length=65535&c,c=0,h=0,e.mode=q2,n===B1)break e;case q2:e.mode=16195;case 16195:if(_=e.length,_){if(_>o&&(_=o),_>u&&(_=u),_===0)break e;i.set(r.subarray(a,a+_),s),o-=_,a+=_,u-=_,s+=_,e.length-=_;break}e.mode=ed;break;case 16196:for(;h<14;){if(o===0)break e;o--,c+=r[a++]<<h,h+=8}if(e.nlen=257+(31&c),c>>>=5,h-=5,e.ndist=1+(31&c),c>>>=5,h-=5,e.ncode=4+(15&c),c>>>=4,h-=4,e.nlen>286||e.ndist>30){t.msg="too many length or distance symbols",e.mode=Si;break}e.have=0,e.mode=16197;case 16197:for(;e.have<e.ncode;){for(;h<3;){if(o===0)break e;o--,c+=r[a++]<<h,h+=8}e.lens[q[e.have++]]=7&c,c>>>=3,h-=3}for(;e.have<19;)e.lens[q[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,Q={bits:e.lenbits},x=by(0,e.lens,0,19,e.lencode,0,e.work,Q),e.lenbits=Q.bits,x){t.msg="invalid code lengths set",e.mode=Si;break}e.have=0,e.mode=16198;case 16198:for(;e.have<e.nlen+e.ndist;){for(;H=e.lencode[c&(1<<e.lenbits)-1],N=H>>>24,S=H>>>16&255,M=65535&H,!(N<=h);){if(o===0)break e;o--,c+=r[a++]<<h,h+=8}if(M<16)c>>>=N,h-=N,e.lens[e.have++]=M;else{if(M===16){for($=N+2;h<$;){if(o===0)break e;o--,c+=r[a++]<<h,h+=8}if(c>>>=N,h-=N,e.have===0){t.msg="invalid bit length repeat",e.mode=Si;break}P=e.lens[e.have-1],_=3+(3&c),c>>>=2,h-=2}else if(M===17){for($=N+3;h<$;){if(o===0)break e;o--,c+=r[a++]<<h,h+=8}c>>>=N,h-=N,P=0,_=3+(7&c),c>>>=3,h-=3}else{for($=N+7;h<$;){if(o===0)break e;o--,c+=r[a++]<<h,h+=8}c>>>=N,h-=N,P=0,_=11+(127&c),c>>>=7,h-=7}if(e.have+_>e.nlen+e.ndist){t.msg="invalid bit length repeat",e.mode=Si;break}for(;_--;)e.lens[e.have++]=P}}if(e.mode===Si)break;if(e.lens[256]===0){t.msg="invalid code -- missing end-of-block",e.mode=Si;break}if(e.lenbits=9,Q={bits:e.lenbits},x=by(1,e.lens,0,e.nlen,e.lencode,0,e.work,Q),e.lenbits=Q.bits,x){t.msg="invalid literal/lengths set",e.mode=Si;break}if(e.distbits=6,e.distcode=e.distdyn,Q={bits:e.distbits},x=by(2,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,Q),e.distbits=Q.bits,x){t.msg="invalid distances set",e.mode=Si;break}if(e.mode=G1,n===B1)break e;case G1:e.mode=V1;case V1:if(o>=6&&u>=258){t.next_out=s,t.avail_out=u,t.next_in=a,t.avail_in=o,e.hold=c,e.bits=h,sq(t,m),s=t.next_out,i=t.output,u=t.avail_out,a=t.next_in,r=t.input,o=t.avail_in,c=e.hold,h=e.bits,e.mode===ed&&(e.back=-1);break}for(e.back=0;H=e.lencode[c&(1<<e.lenbits)-1],N=H>>>24,S=H>>>16&255,M=65535&H,!(N<=h);){if(o===0)break e;o--,c+=r[a++]<<h,h+=8}if(S&&!(240&S)){for(w=N,U=S,L=M;H=e.lencode[L+((c&(1<<w+U)-1)>>w)],N=H>>>24,S=H>>>16&255,M=65535&H,!(w+N<=h);){if(o===0)break e;o--,c+=r[a++]<<h,h+=8}c>>>=w,h-=w,e.back+=w}if(c>>>=N,h-=N,e.back+=N,e.length=M,S===0){e.mode=16205;break}if(32&S){e.back=-1,e.mode=ed;break}if(64&S){t.msg="invalid literal/length code",e.mode=Si;break}e.extra=15&S,e.mode=16201;case 16201:if(e.extra){for($=e.extra;h<$;){if(o===0)break e;o--,c+=r[a++]<<h,h+=8}e.length+=c&(1<<e.extra)-1,c>>>=e.extra,h-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=16202;case 16202:for(;H=e.distcode[c&(1<<e.distbits)-1],N=H>>>24,S=H>>>16&255,M=65535&H,!(N<=h);){if(o===0)break e;o--,c+=r[a++]<<h,h+=8}if(!(240&S)){for(w=N,U=S,L=M;H=e.distcode[L+((c&(1<<w+U)-1)>>w)],N=H>>>24,S=H>>>16&255,M=65535&H,!(w+N<=h);){if(o===0)break e;o--,c+=r[a++]<<h,h+=8}c>>>=w,h-=w,e.back+=w}if(c>>>=N,h-=N,e.back+=N,64&S){t.msg="invalid distance code",e.mode=Si;break}e.offset=M,e.extra=15&S,e.mode=16203;case 16203:if(e.extra){for($=e.extra;h<$;){if(o===0)break e;o--,c+=r[a++]<<h,h+=8}e.offset+=c&(1<<e.extra)-1,c>>>=e.extra,h-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){t.msg="invalid distance too far back",e.mode=Si;break}e.mode=16204;case 16204:if(u===0)break e;if(_=m-u,e.offset>_){if(_=e.offset-_,_>e.whave&&e.sane){t.msg="invalid distance too far back",e.mode=Si;break}_>e.wnext?(_-=e.wnext,b=e.wsize-_):b=e.wnext-_,_>e.length&&(_=e.length),C=e.window}else C=i,b=s-e.offset,_=e.length;_>u&&(_=u),u-=_,e.length-=_;do i[s++]=C[b++];while(--_);e.length===0&&(e.mode=V1);break;case 16205:if(u===0)break e;i[s++]=e.length,u--,e.mode=V1;break;case $2:if(e.wrap){for(;h<32;){if(o===0)break e;o--,c|=r[a++]<<h,h+=8}if(m-=u,t.total_out+=m,e.total+=m,4&e.wrap&&m&&(t.adler=e.check=e.flags?Aa(e.check,i,m,s-m):_y(e.check,i,m,s-m)),m=u,4&e.wrap&&(e.flags?c:PO(c))!==e.check){t.msg="incorrect data check",e.mode=Si;break}c=0,h=0}e.mode=16207;case 16207:if(e.wrap&&e.flags){for(;h<32;){if(o===0)break e;o--,c+=r[a++]<<h,h+=8}if(4&e.wrap&&c!==(4294967295&e.total)){t.msg="incorrect length check",e.mode=Si;break}c=0,h=0}e.mode=16208;case 16208:x=hq;break e;case Si:x=xO;break e;case 16210:return LO;default:return Tl}return t.next_out=s,t.avail_out=u,t.next_in=a,t.avail_in=o,e.hold=c,e.bits=h,(e.wsize||m!==t.avail_out&&e.mode<Si&&(e.mode<$2||n!==UO))&&HO(t,t.output,t.next_out,m-t.avail_out),p-=t.avail_in,m-=t.avail_out,t.total_in+=p,t.total_out+=m,e.total+=m,4&e.wrap&&m&&(t.adler=e.check=e.flags?Aa(e.check,i,m,t.next_out-m):_y(e.check,i,m,t.next_out-m)),t.data_type=e.bits+(e.last?64:0)+(e.mode===ed?128:0)+(e.mode===G1||e.mode===q2?256:0),(p===0&&m===0||n===UO)&&x===Vv&&(x=vq),x},inflateEnd:t=>{if(ep(t))return Tl;let n=t.state;return n.window&&(n.window=null),t.state=null,Vv},inflateGetHeader:(t,n)=>{if(ep(t))return Tl;const e=t.state;return 2&e.wrap?(e.head=n,n.done=!1,Vv):Tl},inflateSetDictionary:(t,n)=>{const e=n.length;let r,i,a;return ep(t)?Tl:(r=t.state,r.wrap!==0&&r.mode!==H1?Tl:r.mode===H1&&(i=1,i=_y(i,n,e,0),i!==r.check)?xO:(a=HO(t,n,e,e),a?(r.mode=16210,LO):(r.havedict=1,Vv)))},inflateInfo:"pako inflate (from Nodeca project)"},gq=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const dP=Object.prototype.toString,{Z_NO_FLUSH:_q,Z_FINISH:yq,Z_OK:Cy,Z_STREAM_END:W2,Z_NEED_DICT:Q2,Z_STREAM_ERROR:Eq,Z_DATA_ERROR:GO,Z_MEM_ERROR:bq}=_E;function Sy(t){this.options=rP({chunkSize:65536,windowBits:15,to:""},t||{});const n=this.options;n.raw&&n.windowBits>=0&&n.windowBits<16&&(n.windowBits=-n.windowBits,n.windowBits===0&&(n.windowBits=-15)),!(n.windowBits>=0&&n.windowBits<16)||t&&t.windowBits||(n.windowBits+=32),n.windowBits>15&&n.windowBits<48&&(15&n.windowBits||(n.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new sP,this.strm.avail_out=0;let e=ld.inflateInit2(this.strm,n.windowBits);if(e!==Cy)throw new Error(fp[e]);if(this.header=new gq,ld.inflateGetHeader(this.strm,this.header),n.dictionary&&(typeof n.dictionary=="string"?n.dictionary=Ew(n.dictionary):dP.call(n.dictionary)==="[object ArrayBuffer]"&&(n.dictionary=new Uint8Array(n.dictionary)),n.raw&&(e=ld.inflateSetDictionary(this.strm,n.dictionary),e!==Cy)))throw new Error(fp[e])}function X2(t,n){const e=new Sy(n);if(e.push(t),e.err)throw e.msg||fp[e.err];return e.result}Sy.prototype.push=function(t,n){const e=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let a,s,o;if(this.ended)return!1;for(s=n===~~n?n:n===!0?yq:_q,dP.call(t)==="[object ArrayBuffer]"?e.input=new Uint8Array(t):e.input=t,e.next_in=0,e.avail_in=e.input.length;;){for(e.avail_out===0&&(e.output=new Uint8Array(r),e.next_out=0,e.avail_out=r),a=ld.inflate(e,s),a===Q2&&i&&(a=ld.inflateSetDictionary(e,i),a===Cy?a=ld.inflate(e,s):a===GO&&(a=Q2));e.avail_in>0&&a===W2&&e.state.wrap>0&&t[e.next_in]!==0;)ld.inflateReset(e),a=ld.inflate(e,s);switch(a){case Eq:case GO:case Q2:case bq:return this.onEnd(a),this.ended=!0,!1}if(o=e.avail_out,e.next_out&&(e.avail_out===0||a===W2))if(this.options.to==="string"){let u=Qj(e.output,e.next_out),c=e.next_out-u,h=Wj(e.output,u);e.next_out=c,e.avail_out=r-c,c&&e.output.set(e.output.subarray(u,u+c),0),this.onData(h)}else this.onData(e.output.length===e.next_out?e.output:e.output.subarray(0,e.next_out));if(a!==Cy||o!==0){if(a===W2)return a=ld.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(e.avail_in===0)break}}return!0},Sy.prototype.onData=function(t){this.chunks.push(t)},Sy.prototype.onEnd=function(t){t===Cy&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=iP(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var Cq={Inflate:Sy,inflate:X2,inflateRaw:function(t,n){return(n=n||{}).raw=!0,X2(t,n)},ungzip:X2};const{Deflate:Sq,deflate:Tq,deflateRaw:Nq,gzip:Aq}=aq,{Inflate:Mq,inflate:Iq,inflateRaw:wq,ungzip:Rq}=Cq;var _u,Oq={Deflate:Sq,deflate:Tq,deflateRaw:Nq,gzip:Aq,Inflate:Mq,inflate:Iq,inflateRaw:wq,ungzip:Rq,constants:_E},Z2=function(t){return D(void 0,void 0,void 0,(function(){var n,e;return O(this,(function(r){if(n=Oq.ungzip(t),typeof TextDecoder<"u")try{return[2,new TextDecoder("utf-8").decode(new Uint8Array(n))]}catch{}return e=8192,[2,Array.from({length:Math.ceil(n.length/e)},(function(i,a){var s=a*e,o=n.slice(s,s+e);return String.fromCharCode.apply(null,o)})).join("")]}))}))},gt=function(t){return D(void 0,void 0,void 0,(function(){var n;return O(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,t()];case 1:return e.sent(),[3,3];case 2:if(!((n=e.sent())instanceof ae))throw n;return n.throwOutside(),[3,3];case 3:return[2]}}))}))},$r=function(t){return D(void 0,void 0,void 0,(function(){return O(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,t()];case 1:case 2:return n.sent(),[3,3];case 3:return[2]}}))}))},bw=(function(t){function n(e){var r=t.call(this)||this;return r.retryAfterTime=1e3*e.retry_after,r.reasonCode=e.reason_code,r.message=e.message,r}return G(n,t),n})(gr);(function(t){t.CONNECTING="CONNECTING",t.OPEN="OPEN",t.CLOSED="CLOSED"})(_u||(_u={}));var zn,Dq=(function(t){function n(e,r){var i=r.sdkState,a=r.dispatcher,s=r.logger,o=t.call(this)||this;return o.lastActive=0,o._iid=e,o._sdkState=i,o._dispatcher=a,o._logger=s,o}return G(n,t),Object.defineProperty(n.prototype,"isOpen",{get:function(){return this.connectionState===_u.OPEN},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"connectionState",{get:function(){if(this._ws)switch(this._ws.readyState){case 0:return _u.CONNECTING;case 1:return _u.OPEN}return _u.CLOSED},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"ws",{get:function(){var e;return(e=this._ws)!==null&&e!==void 0?e:null},enumerable:!1,configurable:!0}),n.prototype._handleMessage=function(e){var r=this;e.split(`
`).forEach((function(i){if(i){var a=Rr.createFromRawMessage(r._iid,i);if(r._logger.debug("receive websocket event",a),a.code==="LOGI")r.dispatch("message",a);else if(a.code==="PONG")r.dispatch("pong");else if(a.code==="EXPR"){if(a.payload){var s=new bg(a.payload);s.expiresIn>=0&&r._dispatcher.dispatch(s)}}else if(a.code==="BUSY"){if(a.payload){var o=new bw(a.payload);r._dispatcher.dispatch(o)}}else a.code==="NOOP"||r.dispatch("message",a)}}))},n.prototype.connect=function(e,r){return r===void 0&&(r=""),D(this,void 0,void 0,(function(){var i=this;return O(this,(function(a){switch(a.label){case 0:return typeof fetch=="function"?[3,2]:[4,hy(()=>import("./__bundle-46d64517-CETxVoCv.js").then(s=>s._),[])];case 1:a.sent(),a.label=2;case 2:return $r((function(){return D(i,void 0,void 0,(function(){return O(this,(function(s){return fetch(this._sdkState.api.host),[2]}))}))})),this._ws=new WebSocket(e,encodeURIComponent(r)),this._ws.onopen=function(){i._logger.debug("websocket open"),i.dispatch("open")},this._ws.onmessage=function(s){return D(i,void 0,void 0,(function(){var o,u,c,h,p,m,_,b=this;return O(this,(function(C){switch(C.label){case 0:return!((_=this._sdkState.websocket)===null||_===void 0)&&_.compression?s.data instanceof Blob?((o=new FileReader).readAsArrayBuffer(s.data),o.onloadend=function(){return D(b,void 0,void 0,(function(){var N,S;return O(this,(function(M){switch(M.label){case 0:return M.trys.push([0,2,,3]),[4,Z2(o.result)];case 1:return N=M.sent(),this._handleMessage(N),[3,3];case 2:return S=M.sent(),this.error(S),[3,3];case 3:return[2]}}))}))},[3,12]):[3,1]:[3,13];case 1:if(!(s.data instanceof ArrayBuffer))return[3,6];C.label=2;case 2:return C.trys.push([2,4,,5]),[4,Z2(new Uint8Array(s.data))];case 3:return p=C.sent(),this._handleMessage(p),[3,5];case 4:return u=C.sent(),this.error(u),[3,5];case 5:return[3,12];case 6:if(!(typeof Buffer<"u"&&s.data instanceof Buffer))return[3,11];C.label=7;case 7:return C.trys.push([7,9,,10]),c=s.data,h=c.buffer.slice(c.byteOffset,c.byteOffset+c.byteLength),[4,Z2(h)];case 8:return p=C.sent(),this._handleMessage(p),[3,10];case 9:return m=C.sent(),this.error(m),[3,10];case 10:return[3,12];case 11:typeof s.data=="string"&&this._handleMessage(s.data),C.label=12;case 12:return[3,14];case 13:this._handleMessage(s.data),C.label=14;case 14:return[2]}}))}))},this._ws.onerror=function(){i._logger.debug("websocket error"),i.dispatch("error",ae.networkError)},this._ws.onclose=function(s){i._logger.debug("websocket close",s.code,s.reason),i.cleanUpWebSocket(),i.dispatch("close")},this.lastActive=Date.now(),[2]}}))}))},n.prototype.cleanUpWebSocket=function(){this._ws&&(this._ws.onopen=Bt,this._ws.onmessage=Bt,this._ws.onerror=Bt,this._ws.onclose=Bt,this.connectionState===_u.OPEN&&this._ws.close(1e3,"Normal Closure"),this._ws=void 0)},n.prototype.disconnect=function(){var e=this;return new Promise((function(r){if(e._ws){if(e.connectionState===_u.CLOSED)return e.cleanUpWebSocket(),void r();e._ws.onclose=null,e._ws.onclose=function(){e.cleanUpWebSocket(),e.dispatch("close"),r()},e._ws.close()}else r()}))},n.prototype.send=function(e){if(!this._ws)throw ae.connectionClosed;e.code!=="PING"?this.dispatch("ping-refresh"):this._logger.debug("send ping",e),this._ws.send(e.convertToMessage())},n.prototype.error=function(e){this._logger.debug("websocket error",e),this.dispatch("error",e)},n})(Tp),Cw=(function(t){function n(e){var r=e.all,i=e.feed,a=e.custom_types,s=e.ts,o=t.call(this)||this;return o.all=r,o.feed=i,o.customTypes=a,o.ts=s,o}return G(n,t),n})(gr),hP=(function(t){function n(e){var r=e.previousMessageId,i=e.messageCreatedAt,a=e.channelUrl,s=t.call(this)||this;return s.previousMessageId=r,s.messageCreatedAt=i,s.channelUrl=a,s}return G(n,t),n})(gr),Uq=(function(){function t(n,e){var r=e.session,i=e.sdkState,a=e.dispatcher,s=e.logger,o=e.useFetchCompat,u=o!==void 0&&o,c=this;this._ackStateMap=new Map,this._batchableCommandAckStateMap=new Map,this._redundantActionCommands=new Map,this._sdkState=i,this._dispatcher=a,this._logger=s,this.apiClient=new wj(n,{session:r,sdkState:i,dispatcher:a,logger:s,useFetchCompat:u}),this.websocketClient=new Dq(n,{sdkState:i,dispatcher:a,logger:s}),this.websocketClient.on("message",(function(h){var p,m;if(h.payload.unread_cnt&&c._dispatcher.dispatch(new Cw(h.payload.unread_cnt)),h.code!=="MESG"&&h.code!=="FILE"&&h.code!=="ADMM"&&h.code!=="BRDM"||h.payload.channel_type!==yn.GROUP||!h.payload.previous_message_id||c._dispatcher.dispatch(new hP({previousMessageId:h.payload.previous_message_id,messageCreatedAt:h.payload.ts,channelUrl:h.payload.channel_url})),h.requestId){if(c._ackStateMap.has(h.requestId)){var _=c._ackStateMap.get(h.requestId);h.code!=="EROR"?_.resolve(h):_.reject(new ae({code:h.payload.code,message:h.payload.message}))}else if(c._batchableCommandAckStateMap.has(h.requestId)){var b=Date.now();try{for(var C=Fe(c._batchableCommandAckStateMap.entries()),N=C.next();!N.done;N=C.next()){var S=dt(N.value,2),M=(S[0],S[1]);M.channelUrl===h.payload.channel_url&&M.requestTime<b&&(_=M.ackState,h.code!=="EROR"?_.resolve(h):_.reject(new ae({code:h.payload.code,message:h.payload.message})))}}catch(L){p={error:L}}finally{try{N&&!N.done&&(m=C.return)&&m.call(C)}finally{if(p)throw p.error}}}}else if(c._redundantActionCommands.has(h.payload.unique_id)){var w=c._redundantActionCommands.get(h.payload.unique_id),U=w?.indexOf(h.code);U!==-1&&w?.splice(U,1),w.length===0&&c._redundantActionCommands.delete(h.payload.unique_id)}else c._dispatcher.dispatch(h)})).on("close",(function(){c._ackStateMap.forEach((function(h){h.reject(ae.connectionClosed)})),c._ackStateMap.clear(),c._batchableCommandAckStateMap.clear(),c._redundantActionCommands.clear()}))}return t.prototype._sendApiRequest=function(n){return D(this,void 0,void 0,(function(){return O(this,(function(e){switch(e.label){case 0:return n.params.unique_id&&this._redundantActionCommands.set(n.params.unique_id,["SYEV","READ"]),[4,this.apiClient.send(n)];case 1:return[2,e.sent()]}}))}))},t.prototype._sendWebsocketRequest=function(n){return D(this,void 0,void 0,(function(){var e,r,i,a=this;return O(this,(function(s){if(!this._sdkState.websocket)throw ae.connectionRequired;if(e=new ps,n.ackRequired){i=function(o,u){var c=n.code==="READ"?a._batchableCommandAckStateMap:a._ackStateMap;c.has(n.requestId)&&(c.delete(n.requestId),r&&(clearTimeout(r),r=null),o?(a._logger.debug("fail websocket request",n.requestId,o),e.reject(o)):(a._logger.debug("receive websocket ack",n.requestId,n),a._logger.debug("receive websocket ack",u),e.resolve(u)))};try{r=setTimeout((function(){return i(ae.noAckTimeout)}),this._sdkState.websocket.responseTimeout),n.code==="READ"?this._batchableCommandAckStateMap.set(n.requestId,{ackState:{resolve:function(o){return i(void 0,o)},reject:function(o){return i(o)}},channelUrl:n.payload.channel_url,requestTime:Date.now()}):this._ackStateMap.set(n.requestId,{resolve:function(o){return i(void 0,o)},reject:function(o){return i(o)}}),this.websocketClient.send(n)}catch(o){i(o)}}else try{this.websocketClient.send(n),e.resolve()}catch(o){e.reject(o)}return[2,e.promise]}))}))},t.prototype.send=function(n){return D(this,void 0,void 0,(function(){return O(this,(function(e){switch(e.label){case 0:return n instanceof we?[4,this._sendApiRequest(n)]:[3,2];case 1:case 3:return[2,e.sent()];case 2:return n instanceof Ra?[4,this._sendWebsocketRequest(n)]:[3,4];case 4:throw ae.invalidParameters}}))}))},t.prototype.cancel=function(n){this.apiClient.cancel(n)},t.prototype.cancelAll=function(){this.apiClient.cancelAll()},t})();(function(t){t[t.NONE=0]="NONE",t[t.INITIALIZED=1]="INITIALIZED",t[t.CONNECTING=2]="CONNECTING",t[t.CONNECTED=3]="CONNECTED",t[t.RECONNECTING=4]="RECONNECTING",t[t.INTERNAL_DISCONNECTED=5]="INTERNAL_DISCONNECTED",t[t.EXTERNAL_DISCONNECTED=6]="EXTERNAL_DISCONNECTED",t[t.LOGOUT=7]="LOGOUT",t[t.DELAYED_CONNECTING=8]="DELAYED_CONNECTING"})(zn||(zn={}));var tp,np,Ao=(function(t){function n(e){var r=e.stateType,i=t.call(this)||this;return i.stateType=r,i}return G(n,t),n})(gr),fP=(function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return G(n,t),n})(gr),AA=(function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return G(n,t),n})(gr),vP=(function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return G(n,t),n})(gr),VO=(function(){function t(n){var e,r,i,a;this.isEnabled=(e=n.enabled)!==null&&e!==void 0&&e,this.feedChannels=(r=n.feed_channels)!==null&&r!==void 0?r:{},this.templateListToken=(i=n.template_list_token)!==null&&i!==void 0?i:null,this.settingsUpdatedAt=(a=n.settings_updated_at)!==null&&a!==void 0?a:0}return t.payloadify=function(n){return ze(ht({enabled:n.isEnabled,feed_channels:n.feedChannels,template_list_token:n.templateListToken,settings_updated_at:n.settingsUpdatedAt}))},t})(),Sw=function(t){return"sendbird@".concat(t,"/changelog_include_chat_notifications")},zO=(function(){function t(n){var e;this.lastUpdatedAt=(e=n.last_updated_at)!==null&&e!==void 0?e:0}return t.payloadify=function(n){return ze(ht({last_updated_at:n.lastUpdatedAt}))},t})(),jO=(function(){function t(n){var e;this.token=(e=n.template_list_token)!==null&&e!==void 0?e:""}return t.payloadify=function(n){return ze(ht({template_list_token:n.token}))},t})(),z1=(function(){function t(n){n===void 0&&(n={min_stat_count:100,min_interval:10800,max_stat_count_per_request:1e3,lower_threshold:10,request_delay_range:180}),this.minStatCount=n.min_stat_count,this.minInterval=1e3*n.min_interval,this.maxStatCountPerRequest=n.max_stat_count_per_request,this.lowerThreshold=n.lower_threshold,this.requestDelayRange=1e3*n.request_delay_range}return t.payloadify=function(n){return ze(ht({min_stat_count:n.minStatCount,min_interval:n.minInterval/1e3,max_stat_count_per_request:n.maxStatCountPerRequest,lower_threshold:n.lowerThreshold,request_delay_range:n.requestDelayRange/1e3}))},t})(),J2=(function(){function t(n){n===void 0&&(n={default:{min_stat_count:100,min_interval:10800,max_stat_count_per_request:1e3,lower_threshold:10,request_delay_range:180}}),this.default=new z1(n.default),this.realTime=new z1(n.realtime)}return t.payloadify=function(n){return ze(ht({default:z1.payloadify(n.default),realtime:z1.payloadify(n.realTime)}))},t})(),xq=(function(){function t(n){var e;this.templateListToken=(e=n.template_list_token)!==null&&e!==void 0?e:null}return t.payloadify=function(n){return ze(ht({template_list_token:n.templateListToken}))},t})(),qO=(function(){function t(n){this.enabled=n.enabled,this.orderBy=n.order_by.type,this.excludeRecentHours=n.order_by.exclude_recent_hours,this.bufferRatio=n.buffer_ratio}return t.payloadify=function(n){return ze(ht({enabled:n.enabled,order_by:{type:n.orderBy,exclude_recent_hours:n.excludeRecentHours},buffer_ratio:n.bufferRatio}))},t})(),$O=1048576,Lq=5;(function(t){t[t.NONE=0]="NONE",t[t.INCLUDE_REPLY=1]="INCLUDE_REPLY",t[t.EXCLUDE_REPLY=2]="EXCLUDE_REPLY",t[t.INCLUDE_REPLY_TO_CHANNEL=3]="INCLUDE_REPLY_TO_CHANNEL"})(tp||(tp={})),(function(t){t[t.NONE=0]="NONE",t[t.INCLUDE_REPLY=1]="INCLUDE_REPLY",t[t.EXCLUDE_REPLY=2]="EXCLUDE_REPLY",t[t.INCLUDE_REPLY_TO_CHANNEL=3]="INCLUDE_REPLY_TO_CHANNEL"})(np||(np={}));var KO=(function(){function t(n){var e,r,i,a,s,o,u,c,h,p;n===void 0&&(n={}),this.emojiHash=n.emoji_hash||"",this.uploadSizeLimit=n.file_upload_size_limit?n.file_upload_size_limit*$O:Number.MAX_SAFE_INTEGER,this.useReaction=!!n.use_reaction,this.applicationAttributes=(e=n.application_attributes)!==null&&e!==void 0?e:[],this.premiumFeatureList=(r=n.premium_feature_list)!==null&&r!==void 0?r:[],this.deviceTokenCache=this.applicationAttributes.includes("sdk_device_token_cache"),this.enabledChannelMemberShipHistory=this.applicationAttributes.includes("channel_membership_history"),this.multipleFilesMessageFileCountLimit=(i=n.multiple_file_send_max_size)!==null&&i!==void 0?i:5,this.allowSdkStatsUpload=(a=n.allow_sdk_log_ingestion)===null||a===void 0||a,this.unreadCountThreadingPolicy=(s=n.unread_cnt_threading_policy)!==null&&s!==void 0?s:tp.NONE,this.lastMessageThreadingPolicy=(o=n.last_msg_threading_policy)!==null&&o!==void 0?o:np.NONE,this.channelRotationInfo=n.channel_rotation?new qO(n.channel_rotation):null,this.uikitConfigInfo=new zO((u=n.uikit_config)!==null&&u!==void 0?u:{}),this.notificationInfo=n.notifications?new VO(n.notifications):null,this.messageTemplateInfo=n.message_template?new jO(n.message_template):null,this.aiAgentInfo=n.ai_agent?new xq(n.ai_agent):null,this.statConfigInfo=n.log_publish_config?new J2(n.log_publish_config):new J2,this.disableSuperGroupMack=(c=n.disable_supergroup_mack)!==null&&c!==void 0&&c,this.configSyncNeeded=(h=n.config_sync_needed)!==null&&h!==void 0&&h,this.requestDedupIntervalMs=(p=n.request_dedup_interval_ms)!==null&&p!==void 0?p:500}return t.payloadify=function(n){return ze(ht({emoji_hash:n.emojiHash,file_upload_size_limit:n.uploadSizeLimit/$O,application_attributes:n.applicationAttributes,premium_feature_list:n.premiumFeatureList,use_reaction:n.useReaction,allow_sdk_log_ingestion:n.allowSdkStatsUpload,unread_cnt_threading_policy:n.unreadCountThreadingPolicy,last_msg_threading_policy:n.lastMessageThreadingPolicy,channel_rotation:n.channelRotationInfo?qO.payloadify(n.channelRotationInfo):null,uikit_config:n.uikitConfigInfo?zO.payloadify(n.uikitConfigInfo):null,notifications:n.notificationInfo?VO.payloadify(n.notificationInfo):null,message_template:n.messageTemplateInfo?jO.payloadify(n.messageTemplateInfo):null,log_publish_config:n.statConfigInfo?J2.payloadify(n.statConfigInfo):null,disable_supergroup_mack:n.disableSuperGroupMack,config_sync_needed:n.configSyncNeeded,request_dedup_interval_ms:n.requestDedupIntervalMs}))},t})(),ZC=function(t){return"sendbird@".concat(t,"/app_configs_info")},wi=(function(){function t(n){this._iid="",this._iid=n}return t.payloadify=function(n){return{}},t})(),kq=(function(t){function n(e){var r=e.userId,i=e.metadata,a=t.call(this)||this;return a.method=Ie.POST,a.path="".concat(jn,"/").concat(encodeURIComponent(r),"/metadata"),a.params={metadata:i},a}return G(n,t),n})(we),Pq=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.metaData=r,i}return G(n,t),n})(xe),Fq=(function(t){function n(e){var r=e.userId,i=e.metadata,a=e.upsert,s=t.call(this)||this;return s.method=Ie.PUT,s.path="".concat(jn,"/").concat(encodeURIComponent(r),"/metadata"),s.params={metadata:i,upsert:a},s}return G(n,t),n})(we),Bq=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.metadata=r,i}return G(n,t),n})(xe),Hq=(function(t){function n(e){var r=e.userId,i=e.metadataKey,a=t.call(this)||this;return a.method=Ie.DELETE,a.path="".concat(jn,"/").concat(encodeURIComponent(r),"/metadata/").concat(i),a}return G(n,t),n})(we);(function(t){function n(){return t!==null&&t.apply(this,arguments)||this}G(n,t)})(xe);var Gq=(function(t){function n(e){var r=e.userId,i=t.call(this)||this;return i.method=Ie.DELETE,i.path="".concat(jn,"/").concat(encodeURIComponent(r),"/metadata"),i}return G(n,t),n})(we);(function(t){function n(){return t!==null&&t.apply(this,arguments)||this}G(n,t)})(xe);var dg,Pg=function(t,n){var e=JSON.parse(JSON.stringify(t));return e._iid&&delete e._iid,n&&n(e),e},gd=function(t,n){var e=JSON.parse(JSON.stringify(t));return e},Ue=function(t){return{do:function(n){t||n()},throw:function(n){if(!t)throw n}}};(function(t){t.ONLINE="online",t.OFFLINE="offline",t.NON_AVAILABLE="nonavailable"})(dg||(dg={}));var vp,fn=(function(t){function n(e,r){var i,a,s,o,u,c,h,p,m,_,b,C,N,S=this;return(S=t.call(this,e)||this).userId=(a=(i=r.guest_id)!==null&&i!==void 0?i:r.user_id)!==null&&a!==void 0?a:"",S.nickname=(o=(s=r.nickname)!==null&&s!==void 0?s:r.name)!==null&&o!==void 0?o:"",S.plainProfileUrl=(c=(u=r.profile_url)!==null&&u!==void 0?u:r.image)!==null&&c!==void 0?c:"",S.requireAuth=(h=r.require_auth_for_profile_image)!==null&&h!==void 0&&h,S.metaData=(p=r.metadata)!==null&&p!==void 0?p:{},S.connectionStatus=dg.NON_AVAILABLE,dn(dg,r.is_online)?S.connectionStatus=r.is_online:re("boolean",r.is_online)&&(S.connectionStatus=r.is_online?dg.ONLINE:dg.OFFLINE),S.isActive=(m=r.is_active)===null||m===void 0||m,S.lastSeenAt=(_=r.last_seen_at)!==null&&_!==void 0?_:null,S.preferredLanguages=r.preferred_languages?wt([],dt(r.preferred_languages),!1):null,S.friendDiscoveryKey=(b=r.friend_discovery_key)!==null&&b!==void 0?b:null,S.friendName=(C=r.friend_name)!==null&&C!==void 0?C:null,S._hashValue=S._generateHashValue(),S._updatedAt=(N=r.updatedat)!==null&&N!==void 0?N:0,S}return G(n,t),n.payloadify=function(e){return ze(ht(Z(Z({},t.payloadify.call(this,e)),{user_id:e.userId,nickname:e.nickname,profile_url:e.plainProfileUrl,require_auth_for_profile_image:e.requireAuth,metadata:e.metaData,is_online:e.connectionStatus,is_active:e.isActive,last_seen_at:e.lastSeenAt,preferred_languages:e.preferredLanguages,friend_discovery_key:e.friendDiscoveryKey,friend_name:e.friendName})))},n._buildUserFromSerializedData=function(e){var r=gd(e);return new n(r._iid,n.payloadify(r))},n.prototype._generateHashValue=function(){for(var e,r=JSON.stringify({userId:this.userId,nickname:this.nickname,plainProfileUrl:this.plainProfileUrl,friendDiscoveryKey:this.friendDiscoveryKey,friendName:this.friendName,metaData:JSON.stringify(this.metaData),performanceLanguages:(e=this.preferredLanguages)===null||e===void 0?void 0:e.toString(),requireAuth:this.requireAuth}),i=0,a=0;a<r.length;a++)i=(i<<5)-i+r.charCodeAt(a),i|=0;return i},Object.defineProperty(n.prototype,"profileUrl",{get:function(){var e=te.of(this._iid).sessionManager;return this.requireAuth&&e.ekey?"".concat(this.plainProfileUrl,"?auth=").concat(e.ekey):this.plainProfileUrl},enumerable:!1,configurable:!0}),n.prototype.serialize=function(){return Pg(this)},n.prototype._isValidMetaData=function(e){return!Array.isArray(e)&&Object.keys(e).length>0&&Object.keys(e).map((function(r){return e[r]})).every((function(r){return re("string",r)}))},n.prototype._applyMetaData=function(e,r){var i=this;r===void 0&&(r=!1),Object.keys(e).forEach((function(a){r?delete i.metaData[a]:i.metaData[a]=e[a]}))},n.prototype.createMetaData=function(e){return D(this,void 0,void 0,(function(){var r,i,a,s,o,u;return O(this,(function(c){switch(c.label){case 0:return Ue(this._isValidMetaData(e)).throw(ae.invalidParameters),r=te.of(this._iid),i=r.sdkState,a=r.requestQueue,s=new kq({userId:i.userId,metadata:e}),[4,a.send(s)];case 1:return o=c.sent(),u=o.as(Pq).metaData,this._applyMetaData(u),[2,this.metaData]}}))}))},n.prototype.updateMetaData=function(e,r){return r===void 0&&(r=!1),D(this,void 0,void 0,(function(){var i,a,s,o,u,c;return O(this,(function(h){switch(h.label){case 0:return Ue(this._isValidMetaData(e)).throw(ae.invalidParameters),i=te.of(this._iid),a=i.sdkState,s=i.requestQueue,o=new Fq({userId:a.userId,metadata:e,upsert:r}),[4,s.send(o)];case 1:return u=h.sent(),c=u.as(Bq).metadata,this._applyMetaData(c),[2,this.metaData]}}))}))},n.prototype.deleteMetaData=function(e){return D(this,void 0,void 0,(function(){var r,i,a,s,o;return O(this,(function(u){switch(u.label){case 0:return Ue(re("string",e)).throw(ae.invalidParameters),r=te.of(this._iid),i=r.sdkState,a=r.requestQueue,s=new Hq({userId:i.userId,metadataKey:e}),[4,a.send(s)];case 1:return u.sent(),this._applyMetaData(((o={})[e]=!0,o),!0),[2,this.metaData]}}))}))},n.prototype.deleteAllMetaData=function(){return D(this,void 0,void 0,(function(){var e,r,i,a;return O(this,(function(s){switch(s.label){case 0:return e=te.of(this._iid),r=e.sdkState,i=e.requestQueue,a=new Gq({userId:r.userId}),[4,i.send(a)];case 1:return s.sent(),this.metaData={},[2]}}))}))},n})(wi),pP=(function(t){function n(e){var r=e.userProfile,i=t.call(this)||this;return i.userProfile=r,i}return G(n,t),n})(gr),MA=(function(){function t(n,e){var r,i,a,s,o,u,c,h,p,m,_,b,C,N;this._iid=n,this.appInfo=new KO(e),this.user=new fn(n,e),this.connectedAt=(r=e.login_ts)!==null&&r!==void 0?r:0,this.firstConnectedAt=0,this.pingInterval=(i=e.ping_interval)!==null&&i!==void 0?i:15,this.pongTimeout=(a=e.pong_timeout)!==null&&a!==void 0?a:5,this.reconnectInterval=(o=(s=e.reconnect)===null||s===void 0?void 0:s.interval)!==null&&o!==void 0?o:3e3,this.reconnectMaxInterval=(c=(u=e.reconnect)===null||u===void 0?void 0:u.max_interval)!==null&&c!==void 0?c:6e4,this.reconnectRetryCount=(p=(h=e.reconnect)===null||h===void 0?void 0:h.retry_cnt)!==null&&p!==void 0?p:5,this.reconnectIntervalMultiple=(_=(m=e.reconnect)===null||m===void 0?void 0:m.mul)!==null&&_!==void 0?_:2,this.maxUnreadCountOnSuperGroup=(b=e.max_unread_cnt_on_super_group)!==null&&b!==void 0?b:100,this.profileImageEncryption=!!e.profile_image_encryption,this.concurrentCallLimit=(C=e.concurrent_call_limit)!==null&&C!==void 0?C:5,this.backOffDelay=(N=e.back_off_delay)!==null&&N!==void 0?N:100}return t.payloadify=function(n){return ze(ht(Z(Z(Z({},fn.payloadify(n.user)),KO.payloadify(n.appInfo)),{login_ts:n.connectedAt,ping_interval:n.pingInterval,pong_timeout:n.pongTimeout,reconnect:{interval:n.reconnectInterval,max_interval:n.reconnectMaxInterval,retry_cnt:n.reconnectRetryCount,mul:n.reconnectIntervalMultiple},max_unread_cnt_on_super_group:n.maxUnreadCountOnSuperGroup,profile_image_encryption:n.profileImageEncryption,concurrent_call_limit:n.concurrentCallLimit,back_off_delay:n.backOffDelay})))},t.prototype.apply=function(){var n=this.reconnectInterval,e=this.reconnectMaxInterval,r=this.reconnectIntervalMultiple,i=te.of(this._iid);i.sdkState.websocket&&(i.sdkState.websocket.pingInterval=1e3*this.pingInterval,i.sdkState.websocket.pongTimeout=1e3*this.pongTimeout,i.sdkState.websocket.reconnectMaxRetry=this.reconnectRetryCount,i.sdkState.websocket.reconnectRetryStrategy={calcTimeout:function(a){return a>0?1e3*Math.min(n*Math.pow(r,a-1),e):10}}),i.appInfo=this.appInfo,i.sessionManager.currentUser=this.user,i.connectedAt=this.connectedAt,this.firstConnectedAt||(i.firstConnectedAt=this.connectedAt),i.maxSuperGroupChannelUnreadCount=this.maxUnreadCountOnSuperGroup,i.concurrentCallLimit=this.concurrentCallLimit,i.backOffDelay=this.backOffDelay,i.requestDeduplicator.requestDedupInterval=this.appInfo.requestDedupIntervalMs,i.dispatcher.dispatch(new pP({userProfile:this}))},t})(),mP=(function(t){function n(e){var r=e.request,i=r===void 0||r,a=e.features,s=a===void 0?{}:a,o=e.options,u=o===void 0?{}:o,c=e.statConfigInfo,h=t.call(this)||this;return h.request=i,h.features=Z({localCache:!0,notification:!0},s),h.options=Z({ingestion:!0},u),h.statConfigInfo=c,h}return G(n,t),n})(gr),gP=(function(t){function n(e){var r=t.call(this)||this;return r.configSyncNeeded=!1,r.configSyncNeeded=e,r}return G(n,t),n})(gr),EC=(function(t){function n(e,r,i){var a,s,o,u,c=this;return(c=t.call(this,e,r,i)||this).error=null,c.services=[],c.userProfile=new MA(e,i),c.deviceTokenLastDeletedAt=(a=i.device_token_last_deleted_at)!==null&&a!==void 0?a:0,c.key=(s=i.key)!==null&&s!==void 0?s:"",c.ekey=(o=i.ekey)!==null&&o!==void 0?o:"",c.error=i.error?new ae(i):null,c.services=(u=i.services)!==null&&u!==void 0?u:[],c.isSessionRefresh="new_key"in i,c}return G(n,t),n.asError=function(e){return new n("","LOGI",Z({user_id:"",error:!0},e))},n.prototype.applyTo=function(e){return D(this,void 0,void 0,(function(){var r,i,a;return O(this,(function(s){switch(s.label){case 0:return this.isSessionRefresh?[2]:this.error?[3,4]:(r=te.of(e))?(i=r.sessionManager,a=r.dispatcher,[4,i.login(this)]):[3,2];case 1:return s.sent(),this.userProfile.apply(),a.dispatch(new gP(this.userProfile.appInfo.configSyncNeeded)),a.dispatch(new mP({request:this.userProfile.appInfo.applicationAttributes.includes("allow_sdk_request_log_publish"),features:{localCache:this.userProfile.appInfo.applicationAttributes.includes("allow_sdk_feature_local_cache_log_publish"),notification:this.userProfile.appInfo.applicationAttributes.includes("allow_sdk_noti_stats_log_publish")},options:{ingestion:this.userProfile.appInfo.allowSdkStatsUpload},statConfigInfo:this.userProfile.appInfo.statConfigInfo})),[3,3];case 2:throw ae.lostInstance;case 3:return[3,5];case 4:throw this.error;case 5:return[2]}}))}))},n})(Rr),vf=(function(){function t(){this.type=zn.NONE,this.name="none"}return t.prototype.run=function(n){return D(this,void 0,void 0,(function(){return O(this,(function(e){return[2]}))}))},t.prototype.onConnect=function(n,e){return D(this,void 0,void 0,(function(){return O(this,(function(r){return[2]}))}))},t.prototype.onReconnect=function(n,e){return e.resetReconnectCount,D(this,void 0,void 0,(function(){return O(this,(function(r){return[2]}))}))},t.prototype.onDisconnect=function(n,e){return e.error,e.autoReconnect,e.cause,D(this,void 0,void 0,(function(){return O(this,(function(r){return[2]}))}))},t.prototype.onDisconnectWebSocket=function(n,e){return D(this,void 0,void 0,(function(){return O(this,(function(r){return[2]}))}))},t.prototype.onLogout=function(n,e){return D(this,void 0,void 0,(function(){return O(this,(function(r){return[2]}))}))},t.prototype.onDelayedConnecting=function(n,e){return e.retryAfterTime,e.reasonCode,e.message,D(this,void 0,void 0,(function(){return O(this,(function(r){return[2]}))}))},t})(),Ec=(function(t){function n(e){e===void 0&&(e={});var r,i=this;return(i=t.call(this)||this).type=zn.LOGOUT,i.name="logout",i._wasPreviouslyConnected=(r=e.wasPreviouslyConnected)===null||r===void 0||r,i}return G(n,t),n.prototype.run=function(e){return D(this,void 0,void 0,(function(){var r,i,a=this;return O(this,(function(s){switch(s.label){case 0:return r=Date.now(),i=e.sdkState.userId,[4,e.logout()];case 1:return s.sent(),[4,e.changeState(new Tw,r)];case 2:return s.sent(),this._wasPreviouslyConnected&&gt((function(){return D(a,void 0,void 0,(function(){return O(this,(function(o){return e.connectionHandlers.forEach((function(u){u.onDisconnected&&u.onDisconnected(i)})),[2]}))}))})),[2]}}))}))},n})(vf),yE=(function(t){function n(){var e=t.call(this)||this;return e.type=zn.EXTERNAL_DISCONNECTED,e.name="externaldisconnected",e}return G(n,t),n.prototype.run=function(e){return D(this,void 0,void 0,(function(){return O(this,(function(r){switch(r.label){case 0:return[4,e.disconnect()];case 1:return r.sent(),[2]}}))}))},n.prototype.onConnect=function(e,r){return D(this,void 0,void 0,(function(){var i;return O(this,(function(a){switch(a.label){case 0:return i=Date.now(),[4,e.disconnect()];case 1:return a.sent(),[4,e.changeState(new BS({authToken:r}),i)];case 2:return a.sent(),[2]}}))}))},n.prototype.onReconnect=function(e){return D(this,void 0,void 0,(function(){var r;return O(this,(function(i){switch(i.label){case 0:return r=Date.now(),[4,e.changeState(new qy,r)];case 1:return i.sent(),[2]}}))}))},n.prototype.onLogout=function(e){return D(this,void 0,void 0,(function(){var r;return O(this,(function(i){switch(i.label){case 0:return r=Date.now(),[4,e.changeState(new Ec,r)];case 1:return i.sent(),[2]}}))}))},n})(vf);(function(t){t.ExternalSetBackground="ExternalSetBackground",t.ExternalDisconnectWebSocket="ExternalDisconnectWebSocket",t.MaxReconnectRetry="MaxReconnectRetry"})(vp||(vp={}));var Vq=(function(){function t(n,e){var r=e.sdkState,i=e.cacheContext,a=e.connectionHandlers,s=e.sessionManager,o=e.websocketClient,u=e.dispatcher,c=e.logger,h=e.disableWebSocketCloseEventHandling,p=h!==void 0&&h,m=this;this._disableWebSocketCloseEventHandling=!1,this._webSocketClosedCause=null,this._logger=c,this._disableWebSocketCloseEventHandling=p,this._context=new qq(n,{sdkState:r,cacheContext:i,connectionHandlers:a,sessionManager:s,websocketClient:o,dispatcher:u,logger:c}),this._sdkState=r,this._sessionManager=s,this._websocketClient=o,this._commandDispatcher=u,this._commandDispatcher.on((function(_){var b=m._context.currentState;if(_ instanceof bw&&b.type===zn.CONNECTED){var C=_.retryAfterTime,N=_.reasonCode,S=_.message;b.onDelayedConnecting(m._context,{retryAfterTime:C,reasonCode:N,message:S})}}))}return t.prototype._registerEventDispatcher=function(){var n=this;this._disableWebSocketCloseEventHandling||(this._clearEventDispatcher(),this._sessionEventDispatcherContext=this._sessionManager.on("refresh",(function(){n.isConnecting||n.isConnected||(n._logger.debug("try reconnect by session key refresh"),$r((function(){return D(n,void 0,void 0,(function(){return O(this,(function(e){switch(e.label){case 0:return[4,this.reconnect()];case 1:return e.sent(),[2]}}))}))})))})),this._websocketEventDispatcherContext=this._websocketClient.on("close",(function(){n._sdkState.appState!=="foreground"||n._webSocketClosedCause||$r((function(){return D(n,void 0,void 0,(function(){return O(this,(function(e){switch(e.label){case 0:return this._sessionManager.isSessionKeyRefreshing?[3,2]:(this._logger.debug("try reconnect by websocket connection closed"),[4,this.reconnect()]);case 1:return e.sent(),[3,4];case 2:return[4,this.disconnectWebSocket()];case 3:e.sent(),e.label=4;case 4:return[2]}}))}))}))})))},t.prototype._clearEventDispatcher=function(){this._sessionEventDispatcherContext&&(this._sessionEventDispatcherContext.close(),this._sessionEventDispatcherContext=void 0),this._websocketEventDispatcherContext&&(this._websocketEventDispatcherContext.close(),this._websocketEventDispatcherContext=void 0)},Object.defineProperty(t.prototype,"isConnected",{get:function(){return this._context.currentState.type===zn.CONNECTED},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isConnecting",{get:function(){var n=this._context.currentState;return n.type===zn.CONNECTING||n.type===zn.RECONNECTING},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"websocketClient",{get:function(){return this._websocketClient},enumerable:!1,configurable:!0}),t.prototype.connect=function(n){return D(this,void 0,void 0,(function(){var e;return O(this,(function(r){switch(r.label){case 0:return e=this._context.currentState,this._webSocketClosedCause=null,[4,e.onConnect(this._context,n)];case 1:return r.sent(),this._registerEventDispatcher(),[2]}}))}))},t.prototype.reconnect=function(){return D(this,void 0,void 0,(function(){var n;return O(this,(function(e){switch(e.label){case 0:return n=this._context.currentState,this._webSocketClosedCause=null,[4,n.onReconnect(this._context,{})];case 1:return e.sent(),[2]}}))}))},t.prototype.resetAndReconnect=function(){return D(this,void 0,void 0,(function(){var n;return O(this,(function(e){switch(e.label){case 0:return n=this._context.currentState,this._webSocketClosedCause=null,[4,n.onReconnect(this._context,{resetReconnectCount:!0})];case 1:return e.sent(),[2]}}))}))},t.prototype.background=function(){return D(this,void 0,void 0,(function(){var n;return O(this,(function(e){switch(e.label){case 0:return n=this._context.currentState,this._webSocketClosedCause=vp.ExternalSetBackground,[4,n.onDisconnect(this._context,{autoReconnect:!1,cause:this._webSocketClosedCause})];case 1:return e.sent(),[2]}}))}))},t.prototype.disconnect=function(n){return D(this,void 0,void 0,(function(){return O(this,(function(e){switch(e.label){case 0:return[4,this._context.currentState.onDisconnect(this._context,{error:n,autoReconnect:!0,cause:this._webSocketClosedCause})];case 1:return e.sent(),[2]}}))}))},t.prototype.disconnectWebSocket=function(n){return n===void 0&&(n=!1),D(this,void 0,void 0,(function(){var e;return O(this,(function(r){switch(r.label){case 0:return e=this._context.currentState,n&&(this._webSocketClosedCause=vp.ExternalDisconnectWebSocket),[4,e.onDisconnectWebSocket(this._context,{cause:this._webSocketClosedCause})];case 1:return r.sent(),[2]}}))}))},t.prototype.logout=function(n){return D(this,void 0,void 0,(function(){var e;return O(this,(function(r){switch(r.label){case 0:return e=this._context.currentState,this._clearEventDispatcher(),[4,e.onLogout(this._context,n)];case 1:return r.sent(),[2]}}))}))},t})(),Cg=(function(t){function n(e){var r=e.retryAfterTime,i=e.reasonCode,a=e.message,s=e.authToken,o=t.call(this)||this;return o.type=zn.DELAYED_CONNECTING,o.name="delayedconnecting",o._timerStartTime=0,o._retryAfterTime=r,o._reasonCode=i,o._message=a,o._authToken=s,o}return G(n,t),n.prototype._clearDelayConnectTimer=function(){this._delayConnectTimer&&(clearTimeout(this._delayConnectTimer),this._delayConnectTimer=void 0),this._timerStartTime=0},n.prototype._startDelayedConnectTimer=function(e){var r=this;this._clearDelayConnectTimer(),this._timerStartTime=Date.now(),this._delayConnectTimer=setTimeout((function(){return D(r,void 0,void 0,(function(){var i;return O(this,(function(a){switch(a.label){case 0:return i=Date.now(),clearTimeout(this._delayConnectTimer),this._delayConnectTimer=void 0,this._timerStartTime=0,[4,e.changeState(new qy({authToken:this._authToken,isSoftRateLimited:!0}),i)];case 1:return a.sent(),[2]}}))}))}),this._retryAfterTime),e.connectionHandlers.forEach((function(i){i.onConnectionDelayed&&i.onConnectionDelayed(Math.ceil(r._retryAfterTime/1e3))}))},n.prototype._calculateRemainDelayConnectTime=function(){this._delayConnectTimer&&(this._retryAfterTime=this._retryAfterTime-(Date.now()-this._timerStartTime))},n.prototype._throwDelayedConnectingError=function(){var e=new ae({code:et.DELAYED_CONNECTING,message:this._message});throw e.setDetail(JSON.stringify({retry_after:Math.ceil(this._retryAfterTime/1e3),reason_code:this._reasonCode,message:this._message})),e},n.prototype.run=function(e){return D(this,void 0,void 0,(function(){return O(this,(function(r){return this._startDelayedConnectTimer(e),[2]}))}))},n.prototype.onConnect=function(e,r){return D(this,void 0,void 0,(function(){return O(this,(function(i){return this._delayConnectTimer&&(this._calculateRemainDelayConnectTime(),this._startDelayedConnectTimer(e),this._throwDelayedConnectingError()),[2]}))}))},n.prototype.onReconnect=function(e){return D(this,void 0,void 0,(function(){return O(this,(function(r){return this._delayConnectTimer&&(this._calculateRemainDelayConnectTime(),this._startDelayedConnectTimer(e),this._throwDelayedConnectingError()),[2]}))}))},n.prototype.onDelayedConnecting=function(e,r){var i=r.retryAfterTime,a=r.reasonCode,s=r.message;return D(this,void 0,void 0,(function(){return O(this,(function(o){return this._retryAfterTime=i,this._reasonCode=a,this._message=s,this._startDelayedConnectTimer(e),[2]}))}))},n.prototype.onDisconnect=function(e,r){var i=r.autoReconnect,a=i!==void 0&&i,s=r.cause,o=s===void 0?null:s;return D(this,void 0,void 0,(function(){var u;return O(this,(function(c){switch(c.label){case 0:return u=Date.now(),this._clearDelayConnectTimer(),o!==vp.ExternalSetBackground?[3,2]:[4,e.changeState(new Sg({autoReconnect:a,retryAfterTime:this._retryAfterTime,disconnectedTime:u,reasonCode:this._reasonCode,message:this._message}),u)];case 1:return c.sent(),[3,6];case 2:return e.hasSession?[4,e.changeState(new Sg({autoReconnect:a}),u)]:[3,4];case 3:return c.sent(),[3,6];case 4:return[4,e.changeState(new Ec,u)];case 5:c.sent(),c.label=6;case 6:return[2]}}))}))},n.prototype.onDisconnectWebSocket=function(e){return D(this,void 0,void 0,(function(){var r;return O(this,(function(i){switch(i.label){case 0:return r=Date.now(),this._clearDelayConnectTimer(),[4,e.changeState(new yE,r)];case 1:return i.sent(),[2]}}))}))},n.prototype.onLogout=function(e){return D(this,void 0,void 0,(function(){var r;return O(this,(function(i){switch(i.label){case 0:return r=Date.now(),this._clearDelayConnectTimer(),[4,e.changeState(new Ec,r)];case 1:return i.sent(),[2]}}))}))},n})(vf),Sg=(function(t){function n(e){var r=t.call(this)||this;return r.type=zn.INTERNAL_DISCONNECTED,r.name="internaldisconnected",r._autoReconnect=!1,r._autoReconnect=e.autoReconnect,r._retryAfter=e.retryAfterTime,r._disconnectedTime=e.disconnectedTime,r._reasonCode=e.reasonCode,r._message=e.message,r}return G(n,t),n.prototype._getDelayedConnectTime=function(e){return this._retryAfter&&this._disconnectedTime?Math.ceil((this._retryAfter-(e-this._disconnectedTime))/1e3):-1},n.prototype.run=function(e){return D(this,void 0,void 0,(function(){var r;return O(this,(function(i){switch(i.label){case 0:return r=Date.now(),[4,e.disconnect()];case 1:return i.sent(),this._autoReconnect?[4,e.changeState(new qy,r)]:[3,3];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))},n.prototype.onConnect=function(e,r){return D(this,void 0,void 0,(function(){var i;return O(this,(function(a){switch(a.label){case 0:return i=Date.now(),[4,e.disconnect()];case 1:return a.sent(),[4,e.changeState(new BS({authToken:r}),i)];case 2:return a.sent(),[2]}}))}))},n.prototype.onReconnect=function(e){return D(this,void 0,void 0,(function(){var r,i;return O(this,(function(a){switch(a.label){case 0:return r=Date.now(),(i=this._getDelayedConnectTime(r))>0?[4,e.changeState(new Cg({retryAfterTime:i,reasonCode:this._reasonCode,message:this._message}),r)]:[3,2];case 1:return a.sent(),[3,4];case 2:return[4,e.changeState(new qy,r)];case 3:a.sent(),a.label=4;case 4:return[2]}}))}))},n.prototype.onDisconnectWebSocket=function(e){return D(this,void 0,void 0,(function(){var r;return O(this,(function(i){switch(i.label){case 0:return r=Date.now(),[4,e.changeState(new yE,r)];case 1:return i.sent(),[2]}}))}))},n.prototype.onLogout=function(e){return D(this,void 0,void 0,(function(){var r;return O(this,(function(i){switch(i.label){case 0:return r=Date.now(),[4,e.changeState(new Ec,r)];case 1:return i.sent(),[2]}}))}))},n})(vf),za=function(t){return D(void 0,void 0,void 0,(function(){return O(this,(function(n){return[2,new Promise((function(e){return setTimeout(e,t)}))]}))}))},_P=(function(){function t(){}return t.prototype.calcTimeout=function(){return 0},t})(),FS=function(t,n,e){return e===void 0&&(e=new _P),D(void 0,void 0,void 0,(function(){var r,i,a,s,o,u;return O(this,(function(c){switch(c.label){case 0:r=0,i=null,a=function(h){return i=h??new Error("Halted")},s=function(){r=0},c.label=1;case 1:if(!(n===-1||r<n))return[3,9];c.label=2;case 2:return c.trys.push([2,4,,8]),[4,t(a,s)];case 3:if(o=c.sent(),i)throw i;return[2,o];case 4:if(u=c.sent(),i)return[3,6];if(++r===n)throw u;return[4,za(e.calcTimeout(r))];case 5:return c.sent(),[3,7];case 6:throw i;case 7:return[3,8];case 8:return[3,1];case 9:throw"It should not happen."}}))}))},qy=(function(t){function n(e){var r=e===void 0?{}:e,i=r.authToken,a=r.isSoftRateLimited,s=t.call(this)||this;return s.type=zn.RECONNECTING,s.name="reconnecting",s._callbacks=[],s._authToken=i,s._isSoftRateLimited=a??void 0,s}return G(n,t),n.prototype._halt=function(e){this._haltConnect&&(this._haltConnect(e),this._haltConnect=void 0)},n.prototype._flushCallbacks=function(e){this._haltConnect=void 0,this._resetConnect=void 0,this._callbacks.forEach((function(r){return r(e)}))},n.prototype.run=function(e){return D(this,void 0,void 0,(function(){var r,i,a,s,o,u,c,h,p,m=this;return O(this,(function(_){switch(_.label){case 0:r=Date.now(),i=new ps,this._callbacks.push((function(b){return b?i.reject(b):i.resolve()})),gt((function(){return D(m,void 0,void 0,(function(){return O(this,(function(b){return e.connectionHandlers.forEach((function(C){C.onReconnectStarted&&C.onReconnectStarted()})),[2]}))}))})),_.label=1;case 1:return _.trys.push([1,4,,12]),a=il(),s=0,o=e.sdkState.websocket,u=o.reconnectMaxRetry,c=o.reconnectRetryStrategy,[4,FS((function(b,C){return D(m,void 0,void 0,(function(){var N;return O(this,(function(S){switch(S.label){case 0:this._haltConnect=b,this._resetConnect=C,S.label=1;case 1:return S.trys.push([1,3,,4]),s++,[4,e.connect({authToken:this._authToken,connectionKey:a,connectionRetryCount:s,isSoftRateLimited:this._isSoftRateLimited})];case 2:return S.sent(),[3,4];case 3:if(N=S.sent(),e.clearLoginTimer(),N instanceof ae){switch(N.code){case et.CONNECTION_CANCELED:case et.DELAYED_CONNECTING:return b(N),[2]}if(N.isSessionExpiredError||N.isSessionInvalidatedError)return b(N),[2]}throw N;case 4:return[2]}}))}))}),u,c)];case 2:return _.sent(),[4,e.changeState(new yP,r)];case 3:return _.sent(),this._flushCallbacks(),gt((function(){return D(m,void 0,void 0,(function(){return O(this,(function(b){return e.connectionHandlers.forEach((function(C){C.onReconnectSucceeded&&C.onReconnectSucceeded()})),[2]}))}))})),[3,12];case 4:return h=_.sent(),$a(h)?[3,10]:[4,e.disconnect()];case 5:return _.sent(),h instanceof ae?h.code!==et.DELAYED_CONNECTING?[3,7]:(p=JSON.parse(h.detail),[4,e.changeState(new Cg({retryAfterTime:1e3*p.retry_after,reasonCode:p.reason_code,message:p.message,authToken:this._authToken}),r)]):[3,9];case 6:return _.sent(),[3,9];case 7:return h.code===et.CONNECTION_CANCELED?[3,9]:[4,e.changeState(new Sg({autoReconnect:!1}),r)];case 8:_.sent(),_.label=9;case 9:return this._flushCallbacks(h),gt((function(){return D(m,void 0,void 0,(function(){return O(this,(function(b){return e.connectionHandlers.forEach((function(C){C.onReconnectFailed&&C.onReconnectFailed()})),[2]}))}))})),[3,11];case 10:throw h;case 11:return[3,12];case 12:return[2,i.promise]}}))}))},n.prototype.onConnect=function(e,r){return D(this,void 0,void 0,(function(){var i;return O(this,(function(a){return i=new ps,this._halt(ae.connectionCanceled),e.cancelConnectForRetry(),this._callbacks.push((function(){var s=Date.now();e.changeState(new BS({authToken:r}),s).then((function(){i.resolve()})).catch((function(o){i.reject(o)}))})),[2,i.promise]}))}))},n.prototype.onReconnect=function(e,r){var i=r.resetReconnectCount,a=i!==void 0&&i;return D(this,void 0,void 0,(function(){var s;return O(this,(function(o){return s=new ps,this._resetConnect&&a&&this._resetConnect(),this._callbacks.push((function(u){return u?s.reject(u):s.resolve()})),[2,s.promise]}))}))},n.prototype.onDisconnect=function(e,r){r._error;var i=r.autoReconnect,a=i===void 0||i;return D(this,void 0,void 0,(function(){var s;return O(this,(function(o){switch(o.label){case 0:return s=Date.now(),this._halt(ae.connectionCanceled),[4,e.changeState(new Sg({autoReconnect:a}),s)];case 1:return o.sent(),[2]}}))}))},n.prototype.onDisconnectWebSocket=function(e){return D(this,void 0,void 0,(function(){var r;return O(this,(function(i){switch(i.label){case 0:return r=Date.now(),this._halt(ae.connectionCanceled),[4,e.changeState(new yE,r)];case 1:return i.sent(),[2]}}))}))},n.prototype.onLogout=function(e){return D(this,void 0,void 0,(function(){var r;return O(this,(function(i){switch(i.label){case 0:return r=Date.now(),this._halt(ae.connectionCanceled),[4,e.changeState(new Ec,r)];case 1:return i.sent(),[2]}}))}))},n.prototype.onDelayedConnecting=function(e,r){var i=r.retryAfterTime,a=r.reasonCode,s=r.message;return D(this,void 0,void 0,(function(){var o,u;return O(this,(function(c){switch(c.label){case 0:return o=Date.now(),(u=new ae({code:et.DELAYED_CONNECTING,message:s})).setDetail(JSON.stringify({retry_after:i/1e3,reason_code:a,message:s})),this._halt(u),[4,e.changeState(new Cg({retryAfterTime:i,reasonCode:a,message:s,authToken:this._authToken}),o)];case 1:return c.sent(),[2]}}))}))},n})(vf),yP=(function(t){function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=zn.CONNECTED,e.name="connected",e}return G(n,t),n.prototype.onReconnect=function(e){return D(this,void 0,void 0,(function(){var r;return O(this,(function(i){switch(i.label){case 0:return r=Date.now(),[4,e.disconnect()];case 1:return i.sent(),[4,e.changeState(new qy,r)];case 2:return i.sent(),[2]}}))}))},n.prototype.onDisconnect=function(e,r){var i=r.autoReconnect;return D(this,void 0,void 0,(function(){var a;return O(this,(function(s){switch(s.label){case 0:return a=Date.now(),[4,e.changeState(new Sg({autoReconnect:i}),a)];case 1:return s.sent(),[2]}}))}))},n.prototype.onDisconnectWebSocket=function(e){return D(this,void 0,void 0,(function(){var r;return O(this,(function(i){switch(i.label){case 0:return r=Date.now(),[4,e.changeState(new yE,r)];case 1:return i.sent(),[2]}}))}))},n.prototype.onLogout=function(e){return D(this,void 0,void 0,(function(){var r;return O(this,(function(i){switch(i.label){case 0:return r=Date.now(),[4,e.changeState(new Ec,r)];case 1:return i.sent(),[2]}}))}))},n.prototype.onDelayedConnecting=function(e,r){var i=r.retryAfterTime,a=r.reasonCode,s=r.message;return D(this,void 0,void 0,(function(){var o;return O(this,(function(u){switch(u.label){case 0:return o=Date.now(),[4,e.changeState(new Cg({retryAfterTime:i,reasonCode:a,message:s}),o)];case 1:return u.sent(),[2]}}))}))},n})(vf),BS=(function(t){function n(e){var r=e.authToken,i=t.call(this)||this;return i.type=zn.CONNECTING,i.name="connecting",i._authToken="",i._callbacks=[],i._authToken=r,i}return G(n,t),n.prototype._halt=function(e){this._haltConnect&&(this._haltConnect(e),this._haltConnect=void 0)},n.prototype._flushCallbacks=function(e){this._haltConnect=void 0,this._callbacks.forEach((function(r){return r(e)}))},n.prototype.run=function(e){return D(this,void 0,void 0,(function(){var r,i,a,s,o,u,c=this;return O(this,(function(h){switch(h.label){case 0:r=Date.now(),i=new ps,this._callbacks.push((function(p){return p?i.reject(p):i.resolve()})),h.label=1;case 1:return h.trys.push([1,4,,12]),a=il(),s=0,[4,FS((function(p){return D(c,void 0,void 0,(function(){var m;return O(this,(function(_){switch(_.label){case 0:this._haltConnect=p,_.label=1;case 1:return _.trys.push([1,3,,4]),s++,[4,e.connect({authToken:this._authToken,connectionKey:a,connectionRetryCount:s})];case 2:return _.sent(),[3,4];case 3:if(m=_.sent(),e.clearLoginTimer(),m instanceof ae)switch(m.code){case et.CONNECTION_CANCELED:case et.SESSION_KEY_EXPIRED:case et.SESSION_TOKEN_EXPIRED:case et.SESSION_REVOKED:case et.USER_AUTH_DEACTIVATED:case et.USER_AUTH_DELETED_OR_NOT_FOUND:case et.USER_DEACTIVATED:case et.DELAYED_CONNECTING:return p(m),[2]}throw m;case 4:return[2]}}))}))}),e.sdkState.websocket.connectMaxRetry)];case 2:return h.sent(),[4,e.changeState(new yP,r)];case 3:return h.sent(),gt((function(){return D(c,void 0,void 0,(function(){return O(this,(function(p){return this._flushCallbacks(),e.connectionHandlers.forEach((function(m){m.onConnected&&m.onConnected(e.sdkState.userId)})),[2]}))}))})),[3,12];case 4:return o=h.sent(),$a(o)?[3,10]:[4,e.disconnect()];case 5:return h.sent(),o instanceof ae?o.code!==et.DELAYED_CONNECTING?[3,7]:(u=JSON.parse(o.detail),[4,e.changeState(new Cg({retryAfterTime:1e3*u.retry_after,reasonCode:u.reason_code,message:u.message,authToken:this._authToken}),r)]):[3,9];case 6:return h.sent(),[3,9];case 7:return o.code===et.CONNECTION_CANCELED?[3,9]:[4,e.changeState(new Tw,r)];case 8:h.sent(),h.label=9;case 9:return gt((function(){return D(c,void 0,void 0,(function(){return O(this,(function(p){return this._flushCallbacks(o),[2]}))}))})),[3,11];case 10:throw o;case 11:return[3,12];case 12:return[2,i.promise]}}))}))},n.prototype.onConnect=function(e){return D(this,void 0,void 0,(function(){var r;return O(this,(function(i){return r=new ps,this._callbacks.push((function(a){return a?r.reject(a):r.resolve()})),[2,r.promise]}))}))},n.prototype.onDisconnect=function(e,r){var i=r.error,a=i===void 0?null:i,s=r.autoReconnect,o=s!==void 0&&s,u=r.cause,c=u===void 0?null:u;return D(this,void 0,void 0,(function(){var h;return O(this,(function(p){switch(p.label){case 0:return h=Date.now(),this._halt(a??YO(c)),e.hasSession?[4,e.changeState(new Sg({autoReconnect:o}),h)]:[3,2];case 1:return p.sent(),[3,4];case 2:return[4,e.changeState(new Ec,h)];case 3:p.sent(),p.label=4;case 4:return[2]}}))}))},n.prototype.onDisconnectWebSocket=function(e,r){return D(this,void 0,void 0,(function(){var i;return O(this,(function(a){switch(a.label){case 0:return this._halt(YO(r?.cause||null)),i=Date.now(),e.hasSession?[4,e.changeState(new yE,i)]:[3,2];case 1:return a.sent(),[3,4];case 2:return[4,e.changeState(new Ec,i)];case 3:a.sent(),a.label=4;case 4:return[2]}}))}))},n.prototype.onLogout=function(e,r){return D(this,void 0,void 0,(function(){var i;return O(this,(function(a){switch(a.label){case 0:return i=Date.now(),this._halt(r??ae.connectionCanceled),[4,e.changeState(new Ec,i)];case 1:return a.sent(),[2]}}))}))},n.prototype.onDelayedConnecting=function(e,r){var i=r.retryAfterTime,a=r.reasonCode,s=r.message;return D(this,void 0,void 0,(function(){var o;return O(this,(function(u){switch(u.label){case 0:return o=Date.now(),[4,e.changeState(new Cg({retryAfterTime:i,reasonCode:a,message:s,authToken:this._authToken}),o)];case 1:return u.sent(),[2]}}))}))},n})(vf);function YO(t){var n=ae.connectionCanceled;if(t){var e=null;switch(t){case vp.ExternalSetBackground:e="Connection has been canceled due to the application having externally moved to background while in ConnectingState.";break;case vp.ExternalDisconnectWebSocket:e="Connection has been canceled because sb.disconnectWebSocket() was called while in ConnectingState."}e&&n.setDetail(e)}return n}var Gh,Tw=(function(t){function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=zn.INITIALIZED,e.name="initialized",e}return G(n,t),n.prototype.onConnect=function(e,r){return D(this,void 0,void 0,(function(){var i;return O(this,(function(a){switch(a.label){case 0:return i=Date.now(),[4,e.changeState(new BS({authToken:r}),i)];case 1:return a.sent(),[2]}}))}))},n.prototype.onLogout=function(e){return D(this,void 0,void 0,(function(){var r;return O(this,(function(i){switch(i.label){case 0:return r=Date.now(),[4,e.changeState(new Ec({wasPreviouslyConnected:!1}),r)];case 1:return i.sent(),[2]}}))}))},n})(vf),zq=(function(t){function n(){return t.call(this,{code:"PING",payload:{id:Date.now(),active:1},ackRequired:!1})||this}return G(n,t),n})(Ra),jq=(function(){function t(n){var e=n.pingDelegate,r=n.sdkState,i=n.logger;this.pingDelegate=e,this.sdkState=r,this._logger=i}return Object.defineProperty(t.prototype,"isWaiting",{get:function(){return!!this._pingTimeoutTimer},enumerable:!1,configurable:!0}),t.prototype.ping=function(){var n,e=this;if(!this.sdkState.websocket)throw ae.connectionRequired;var r=new zq;try{var i=(n=this.sdkState.websocket.pongTimeout)!==null&&n!==void 0?n:5e3;this._pingTimeoutTimer=setTimeout((function(){e._logger.debug("pinger.ping() timeout"),e.pingDelegate.error()}),i),this.pingDelegate.send(r),this._logger.debug("pinger.ping()")}catch(a){this._logger.debug("pinger.ping() error",a),this._pingTimeoutTimer&&(clearTimeout(this._pingTimeoutTimer),this._pingTimeoutTimer=void 0),this.pingDelegate.error()}return r},t.prototype.pong=function(){this._logger.debug("pinger.pong()"),this._pingTimeoutTimer&&(clearTimeout(this._pingTimeoutTimer),this._pingTimeoutTimer=void 0)},t.prototype.refreshTimer=function(){var n,e=this;if(!this.sdkState.websocket)throw ae.connectionRequired;this._logger.debug("pinger.refreshTimer()");var r=(n=this.sdkState.websocket.pingInterval)!==null&&n!==void 0?n:15e3;this.stop(),this._pingTimer=setInterval((function(){e.ping()}),r)},t.prototype.start=function(){this._logger.debug("pinger.start()"),this.refreshTimer(),this.ping()},t.prototype.stop=function(){this._logger.debug("pinger.stop()"),this._pingTimer&&(clearInterval(this._pingTimer),this._pingTimer=void 0),this._pingTimeoutTimer&&(clearTimeout(this._pingTimeoutTimer),this._pingTimeoutTimer=void 0)},t})(),EP=["premium_feature_list","file_upload_size_limit","application_attributes","emoji_hash","multiple_file_send_max_size","notifications","message_template","ai_agent"],qq=(function(t){function n(e,r){var i,a=r.sdkState,s=r.cacheContext,o=r.connectionHandlers,u=r.sessionManager,c=r.websocketClient,h=r.dispatcher,p=r.logger,m=r.entryState,_=m===void 0?new Tw:m,b=this;return(b=t.call(this)||this)._currentConnectionRetryCount=0,b._stateUpdatedAt=0,b._connectingAt=0,b._connectedAt=0,b._logiReceivedAt=0,b._connectionRequestQueue=[],b._iid=e,b.sdkState=a,b.cacheContext=s,b.connectionHandlers=o,b._sessionManager=u,b._websocketClient=c,b._dispatcher=h,b._logger=p,b._currentState=_,!((i=b.sdkState.websocket)===null||i===void 0)&&i.pingerDisabled||(b._pinger=new jq({pingDelegate:{send:function(C){return b._websocketClient.send(C)},error:function(C){h.dispatch(new vd(new Ar({type:fr.WEBSOCKET_DISCONNECT,data:{success:!0,error_code:et.NETWORK_ERROR,error_description:"cause=ping_pong_timedout"}}))),b._websocketClient.error(C)}},sdkState:b.sdkState,logger:p})),b._websocketClient.on("open",(function(){b._connectedAt=Date.now(),b._tryResolveConnectionRequest()})).on("message",(function(C){C.code==="LOGI"&&(b.clearLoginTimer(),b._dispatcher.dispatch(C.as(EC)))})).on("ping-refresh",(function(){var C;return(C=b._pinger)===null||C===void 0?void 0:C.refreshTimer()})).on("pong",(function(){var C;return(C=b._pinger)===null||C===void 0?void 0:C.pong()})).on("error",(function(){var C;return(C=b._pinger)===null||C===void 0?void 0:C.stop()})).on("close",(function(){b._logiProcessingTimer=setTimeout((function(){b._logiProcessingTimer=void 0,b._unresolvedLogi||b._rejectConnectionRequest(ae.networkError)}),500)})),b._dispatcher.on((function(C){if(C instanceof EC)b._unresolvedLogi=C,b._tryResolveConnectionRequest();else if(C instanceof bw){var N=C.retryAfterTime,S=C.reasonCode,M=C.message,w=new ae({code:et.DELAYED_CONNECTING,message:M});w.setDetail(JSON.stringify({retry_after:N/1e3,reason_code:S,message:M})),b._rejectConnectionRequest(w)}})),b}return G(n,t),Object.defineProperty(n.prototype,"currentState",{get:function(){return this._currentState},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hasSession",{get:function(){return this._sessionManager.session.hasSession},enumerable:!1,configurable:!0}),n.prototype.changeState=function(e,r){return D(this,void 0,void 0,(function(){return O(this,(function(i){switch(i.label){case 0:return r>=this._stateUpdatedAt?(this._currentState=e,this._stateUpdatedAt=r,this._dispatcher.dispatch(new Ao({stateType:e.type})),this._logger.debug("connection state changes to ".concat(e.name)),[4,this._currentState.run(this)]):[3,2];case 1:return i.sent(),[2,!0];case 2:return[2,!1]}}))}))},n.prototype._tryResolveConnectionRequest=function(){var e;return D(this,void 0,void 0,(function(){var r;return O(this,(function(i){switch(i.label){case 0:return r=this._unresolvedLogi,this._websocketClient.isOpen&&r?(this._unresolvedLogi=void 0,this._logiReceivedAt=Date.now(),r.error?[3,2]:[4,r.applyTo(this._iid)]):[3,3];case 1:return i.sent(),this._statLogConnection(),(e=this._pinger)===null||e===void 0||e.start(),this._connectionRequestQueue.forEach((function(a){return a.resolve()})),this._connectionRequestQueue=[],this.sdkState.appState="foreground",[3,3];case 2:r.error.isSessionExpiredError||r.error.isSessionInvalidatedError?this._dispatcher.dispatch(new bg({reason:r.error.code,message:r.error.message})):this._logger.warn("login failed: ".concat(r.error)),this._rejectConnectionRequest(r.error),i.label=3;case 3:return[2]}}))}))},n.prototype._rejectConnectionRequest=function(e){var r;if((r=this._pinger)===null||r===void 0||r.stop(),this.clearLoginTimer(),this._connectionRequestQueue.length>0){var i=this._connectionRequestQueue;this._connectionRequestQueue=[],i.forEach((function(a){return a.reject(e)})),this._statLogConnection(e)}},n.prototype._url=function(e){var r,i=e.configTs,a=this.sdkState,s=a.appId,o=a.appVersion,u=a.userId,c=a.extensions,h=a.sendbirdRuntimeEnvironment,p=this.cacheContext.localCacheEnabled,m=this._sessionManager.session,_=(r=this.sdkState.websocket)===null||r===void 0?void 0:r.compression,b=!!(c??{}).sb_uikit,C=KC.userAgentWithExtension(c);return"".concat(this.sdkState.websocket.host,"/?p=JS&pv=").concat(encodeURIComponent(Qh.OS_VERSION),"&sv=").concat(encodeURIComponent(Qh.SDK_VERSION),"&ai=").concat(s).concat(o?"&av=".concat(o):"").concat(m.hasSession?"":"&user_id=".concat(encodeURIComponent(u)),"&pmce=").concat(_?1:0,"&active=1&device_token_types=").concat(encodeURIComponent(["gcm","huawei","apns"].join(",")),"&SB-User-Agent=").concat(C,"&SB-SDK-User-Agent=").concat(encodeURIComponent(KC.sendbirdSdkUserAgentWithExtension(h)),"&Request-Sent-Timestamp=").concat(Date.now().toString(),"&include_extra_data=").concat(encodeURIComponent(String(EP))).concat(this._sessionManager.handler?"&expiring_session=1":"","&use_local_cache=").concat(p?1:0,"&include_poll_details=1").concat(b?"&uikit_config=1":"","&config_ts=").concat(i)},n.prototype._statLogConnection=function(e){var r,i;this._dispatcher.dispatch(new vd(new Ar({type:fr.WEBSOCKET_CONNECT,data:{host_url:(r=this.sdkState.websocket)===null||r===void 0?void 0:r.host,success:!e,latency:this._connectedAt>0?this._connectedAt-this._connectingAt:Date.now()-this._connectingAt,logi_latency:this._logiReceivedAt>0?this._logiReceivedAt-this._connectingAt:void 0,connection_id:this._currentConnectionKey,accum_trial:this._currentConnectionRetryCount,is_soft_rate_limited:(i=this._isSoftRateLimited)!==null&&i!==void 0?i:void 0,error_code:e?.code,error_description:e?.code===et.DELAYED_CONNECTING?e?.detail:e?.message}})))},n.prototype.connect=function(e){var r;return e===void 0&&(e={}),D(this,void 0,void 0,(function(){var i,a,s,o,u,c,h,p,m,_,b,C,N=this;return O(this,(function(S){switch(S.label){case 0:return this._logiProcessingTimer&&(clearTimeout(this._logiProcessingTimer),this._logiProcessingTimer=void 0,this._rejectConnectionRequest(ae.connectionCanceled)),i=new ps,a=e.authToken,s=a===void 0?"":a,o=e.connectionKey,u=o===void 0?il():o,c=e.connectionRetryCount,h=c===void 0?1:c,p=e.isSoftRateLimited,this._connectionRequestQueue.push(i),this._connectionRequestQueue.length!==1?[3,2]:(this._currentConnectionKey=u,this._currentConnectionRetryCount=h,this._isSoftRateLimited=p,this._connectingAt=Date.now(),this._connectedAt=0,this._logiReceivedAt=0,this._loginTimer=setTimeout((function(){N._loginTimer=void 0,N._rejectConnectionRequest(ae.loginTimeout)}),(r=this.sdkState.websocket)===null||r===void 0?void 0:r.responseTimeout),m=this._sessionManager.session,s&&(m.authToken=s,m.sessionKey=void 0),_=0,[4,this.cacheContext.preference.get(ZC(this.sdkState.appId))]);case 1:(b=S.sent())&&(_=b.configTs),C=this._url({configTs:_}),m.sessionKey||m.authToken?this._websocketClient.connect(C,JSON.stringify(m.hasSession?{auth:m.sessionKey}:{token:m.authToken})):this._websocketClient.connect(C,JSON.stringify({})),S.label=2;case 2:return[2,i.promise]}}))}))},n.prototype.cancelConnectForRetry=function(){this._dispatcher.dispatch(EC.asError(ae.connectionRenew))},n.prototype.disconnect=function(){return D(this,void 0,void 0,(function(){return O(this,(function(e){switch(e.label){case 0:return[4,this._websocketClient.disconnect()];case 1:return e.sent(),[2]}}))}))},n.prototype.logout=function(){return D(this,void 0,void 0,(function(){return O(this,(function(e){switch(e.label){case 0:return this.sdkState.userId=void 0,this._unresolvedLogi=void 0,[4,this.disconnect()];case 1:return e.sent(),[4,this._sessionManager.clear()];case 2:return e.sent(),[2]}}))}))},n.prototype.clearLoginTimer=function(){this._loginTimer&&(clearTimeout(this._loginTimer),this._loginTimer=void 0)},n})(Tp),bP=(function(t){function n(e){var r=e.appId,i=e.userId,a=e.includeUIKitConfig,s=a!==void 0&&a,o=e.localCacheEnabled,u=o===void 0||o,c=e.expiringSession,h=c===void 0||c,p=e.configTs,m=p===void 0?0:p,_=t.call(this)||this;return _.path="".concat(dj,"/").concat(encodeURIComponent(i),"/authentication"),_.method=Ie.POST,_.params=ze({expiring_session:!!h,include_logi:!0,include_extra_data:String(EP),uikit_config:s,use_local_cache:u,app_id:r,config_ts:m}),_.requireAuth=!1,_}return G(n,t),n})(we),$q=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.logi=new EC(e,"LOGI",r),i}return G(n,t),n})(xe);(function(t){t[t.ALL=0]="ALL",t[t.WEBSOCKET=1]="WEBSOCKET",t[t.API=2]="API"})(Gh||(Gh={}));var Hr,WO,Kq=[gw,bP],Yq=(function(){function t(n,e){var r=e.session,i=e.sdkState,a=e.dispatcher,s=e.logger,o=e.useFetchCompat,u=o!==void 0&&o,c=this;this._currentConnectionStateType=zn.INITIALIZED,this._lazyCallQueue=[],this.commandRouter=new Uq(n,{session:r,sdkState:i,dispatcher:a,logger:s,useFetchCompat:u}),this._session=r,this._logger=s,this._dispatcher=a,this._dispatcher.on((function(h){var p,m,_;if(h instanceof Ao){var b=h.stateType;switch(c._currentConnectionStateType=b,b){case zn.CONNECTED:c._resolveLazyCallQueue();break;case zn.INITIALIZED:case zn.INTERNAL_DISCONNECTED:case zn.EXTERNAL_DISCONNECTED:case zn.LOGOUT:c._session.isRefreshing||c._rejectLazyCallQueue(!((_=c._session)===null||_===void 0)&&_.hasSession?ae.connectionClosed:ae.connectionRequired)}}else if(h instanceof fP)c._session.hasChatServicePermission||c._resolveLazyCallQueue(Gh.API);else if(h instanceof AA||h instanceof vP)c._rejectLazyCallQueue(ae.connectionClosed);else if(h instanceof zk){var C=h.request,N=h.deferred,S=h.error;try{for(var M=Fe(Kq),w=M.next();!w.done;w=M.next())if(C instanceof w.value)return void N.reject(S)}catch(U){p={error:U}}finally{try{w&&!w.done&&(m=M.return)&&m.call(M)}finally{if(p)throw p.error}}c._lazyCallQueue.push({command:C,deferred:N})}}))}return Object.defineProperty(t.prototype,"isReady",{get:function(){return this._currentConnectionStateType===zn.CONNECTED},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLazyCallActivated",{get:function(){return this._currentConnectionStateType===zn.CONNECTING||this._currentConnectionStateType===zn.RECONNECTING||this._session.isRefreshing},enumerable:!1,configurable:!0}),t.prototype._classifyLazyCallQueueByScope=function(n){var e,r=[],i=[];switch(n){case Gh.ALL:e=null;break;case Gh.WEBSOCKET:e=Ra;break;case Gh.API:e=we}var a=!1;return this._lazyCallQueue.forEach((function(s){!e||s.command instanceof e||(a=!0),a?i.push(s):r.push(s)})),[r,i]},t.prototype._resolveLazyCallQueue=function(n){var e=this;n===void 0&&(n=Gh.ALL);var r=dt(this._classifyLazyCallQueueByScope(n),2),i=r[0],a=r[1];this._lazyCallQueue=a,i.forEach((function(s){return D(e,void 0,void 0,(function(){var o,u,c,h,p;return O(this,(function(m){switch(m.label){case 0:o=s.command,u=s.deferred,(c=s.timeout)&&clearTimeout(c),m.label=1;case 1:return m.trys.push([1,3,,4]),[4,this.send(o)];case 2:return h=m.sent(),u.resolve(h),[3,4];case 3:return p=m.sent(),u.reject(p),[3,4];case 4:return[2]}}))}))}))},t.prototype._rejectLazyCallQueue=function(n,e){var r=this;e===void 0&&(e=Gh.ALL);var i=dt(this._classifyLazyCallQueueByScope(e),2),a=i[0],s=i[1];this._lazyCallQueue=s,a.forEach((function(o){return D(r,void 0,void 0,(function(){var u,c;return O(this,(function(h){return u=o.deferred,c=o.timeout,clearTimeout(c),u.reject(n),[2]}))}))}))},t.prototype.send=function(n){return D(this,void 0,void 0,(function(){var e,r,i=this;return O(this,(function(a){switch(a.label){case 0:return n instanceof Ra?this.isReady?(this._logger.debug("send websocket request",n),[4,this.commandRouter.send(n)]):[3,2]:[3,4];case 1:case 5:case 7:return[2,a.sent()];case 2:if(this.isLazyCallActivated)return this._logger.debug("wait websocket request",n),e=new ps,this._lazyCallQueue.push({command:n,deferred:e,timeout:setTimeout((function(){return i.timeout(n.requestId)}),1e4)}),[2,e.promise];throw this._logger.debug("fail websocket request"),ae.connectionRequired;case 3:case 9:return[3,11];case 4:return n instanceof we?this._session.hasSession?(this._logger.debug("send api request",n),[4,this.commandRouter.send(n)]):[3,6]:[3,10];case 6:return n.hasSessionKey?(this._logger.debug("send api request with tmp session key",n),[4,this.commandRouter.send(n)]):[3,8];case 8:if(this.isLazyCallActivated)return this._logger.debug("wait api request",n),e=new ps,this._lazyCallQueue.push({command:n,deferred:e,timeout:setTimeout((function(){return i.timeout(n.requestId)}),1e4)}),[2,e.promise];throw r=ae.connectionRequired,this._logger.debug("fail api request",r),r;case 10:throw ae.invalidCommand;case 11:return[2]}}))}))},t.prototype.forceSend=function(n){return D(this,void 0,void 0,(function(){return O(this,(function(e){switch(e.label){case 0:return this._logger.debug("send forced request",n),n instanceof Ra||n instanceof we?[4,this.commandRouter.send(n)]:[3,2];case 1:return[2,e.sent()];case 2:throw ae.invalidCommand}}))}))},t.prototype.timeout=function(n){this._logger.debug("timeout request",n);var e=this._lazyCallQueue.findIndex((function(r){return r.command.requestId===n}));e>-1&&(this._lazyCallQueue[e].deferred.reject(ae.connectionRequired),this._lazyCallQueue.splice(e,1))},t.prototype.cancel=function(n){this._logger.debug("cancel api request",n),this.commandRouter.cancel(n)},t.prototype.cancelAll=function(){this._logger.debug("cancel all api requests"),this.commandRouter.cancelAll()},t})(),eN="sendbird@devicetokens",tN=(function(){function t(n){var e=n.type,r=n.token,i=n.device_os,a=n.device_manufacturer,s=n.system_push_enabled;this.type=e,this.token=r,this.deviceOS=i,this.deviceManufacturer=a,this.systemPushEnabled=s}return t.payloadify=function(n){return ze(ht({type:n.type,token:n.token,device_os:n.deviceOS,device_manufacturer:n.deviceManufacturer,system_push_enabled:n.systemPushEnabled}))},t})(),nN=new WeakMap,Wq=(function(t){function n(e){var r=e._iid,i=e.session,a=e.cacheContext,s=e.sdkState,o=e.dispatcher,u=e.requestQueue,c=e.logger,h=e.pushNotificationAckManager,p=t.call(this)||this;return p._currentConnectionStateType=zn.INITIALIZED,p._isRefreshingAuthToken=!1,p.currentUser=null,p.session=i,p._iid=r,p._cacheContext=a,p._sdkState=s,p._dispatcher=o,p._requestQueue=u,p._logger=c,p._pushNotificationAckManager=h,p._deviceTokens=[],p._dispatcher.on((function(m){var _,b,C;if(m instanceof Ao){var N=m.stateType;p._currentConnectionStateType=N}else if(m instanceof bg&&p.handler&&!p.isSessionKeyRefreshing){if(p._currentConnectionStateType===zn.CONNECTING)return;!((_=m.error)===null||_===void 0)&&_.isSessionInvalidatedError?p.clear():(!((b=m.error)===null||b===void 0)&&b.isSessionTokenExpiredError&&p.refreshAuthToken().catch((function(S){if($a(S)&&p._sdkState.appState==="foreground")throw S})),!((C=m.error)===null||C===void 0)&&C.isSessionKeyExpiredError&&(p._logger.debug("session expired"),p.handler.onSessionExpired&&p.handler.onSessionExpired(),p._currentConnectionStateType===zn.CONNECTED&&p._dispatcher.dispatch(new vd(new Ar({type:fr.WEBSOCKET_DISCONNECT,data:{success:!0,error_code:et.SESSION_KEY_EXPIRED,error_description:"cause=session_expired"}}))),p.refreshSessionKey().catch((function(S){if($a(S)&&p._sdkState.appState==="foreground")throw S}))))}})),p}return G(n,t),Object.defineProperty(n.prototype,"ekey",{get:function(){return nN.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"deviceTokens",{get:function(){return this._deviceTokens},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"deviceTokenLastDeletedAt",{get:function(){return this._deviceTokenLastDeletedAt},enumerable:!1,configurable:!0}),n.prototype.indexOfDeviceToken=function(e,r){return this._deviceTokens.findIndex((function(i){return i.type===e&&i.token===r}))},n.prototype.hasDeviceToken=function(e,r){return this.indexOfDeviceToken(e,r)>=0},n.prototype.createRefreshWebsocketCommand=function(e,r){return new Nj({authToken:e,expiringSession:!0,requestId:r})},n.prototype._refreshSessionKeyByWebSocket=function(e){return D(this,void 0,void 0,(function(){var r,i,a,s,o;return O(this,(function(u){switch(u.label){case 0:return r=this.createRefreshWebsocketCommand(e),[4,this._requestQueue.forceSend(r)];case 1:if(i=u.sent(),a=i.as(Mj),s=a.newKey,o=a.error)throw o;return this.session.sessionKey=s??this.session.sessionKey,[2]}}))}))},n.prototype._refreshSessionKeyByApi=function(e){return D(this,void 0,void 0,(function(){var r,i=this;return O(this,(function(a){switch(a.label){case 0:return r=new gw({userId:this._sdkState.userId,authToken:e,services:this.session.services&&this.session.services.length>0?this.session.services:void 0,expiringSession:!0}),[4,FS((function(s){return D(i,void 0,void 0,(function(){var o,u,c,h,p;return O(this,(function(m){switch(m.label){case 0:return m.trys.push([0,2,,3]),[4,this._requestQueue.forceSend(r)];case 1:return o=m.sent(),u=o.as(Aj),c=u.key,h=u.services,this.session.sessionKey=c,this.session.services=h,[3,3];case 2:if(p=m.sent(),!this._isSessionRelatedError(p))throw p;return s(p),[3,3];case 3:return[2]}}))}))}),3)];case 1:return a.sent(),[2]}}))}))},n.prototype._refreshSessionKey=function(e,r){return r===void 0&&(r=!0),D(this,void 0,void 0,(function(){var i,a;return O(this,(function(s){switch(s.label){case 0:if(this._currentConnectionStateType!==zn.CONNECTED)return[3,8];s.label=1;case 1:return s.trys.push([1,3,,8]),[4,this._refreshSessionKeyByWebSocket(e)];case 2:return s.sent(),this.complete(),[2];case 3:i=s.sent(),s.label=4;case 4:return s.trys.push([4,6,,7]),[4,this._handleSessionRefreshError(i,r)];case 5:return s.sent(),[2];case 6:return s.sent(),[3,7];case 7:return[3,8];case 8:return s.trys.push([8,10,,12]),[4,this._refreshSessionKeyByApi(e)];case 9:return s.sent(),this.complete(),[3,12];case 10:return a=s.sent(),[4,this._handleSessionRefreshError(a,r)];case 11:return s.sent(),[3,12];case 12:return[2]}}))}))},n.prototype._receiveNewAuthToken=function(){var e,r=this,i=new ps;if(this._isRefreshingAuthToken=!0,this.session.sessionKey=void 0,this.session.authToken=void 0,(e=this.handler)===null||e===void 0?void 0:e.onSessionTokenRequired){var a=null,s=function(){a&&(clearTimeout(a),a=null)},o=function(c){s(),r._isRefreshingAuthToken&&(r._isRefreshingAuthToken=!1,i.resolve(c))},u=function(c){s(),r._isRefreshingAuthToken&&(r._isRefreshingAuthToken=!1,i.reject(c))};a=setTimeout((function(){return u()}),1e3*this._sdkState.sessionTokenRefreshTimeout),gt((function(){return D(r,void 0,void 0,(function(){var c;return O(this,(function(h){return!((c=this.handler)===null||c===void 0)&&c.onSessionTokenRequired&&this.handler.onSessionTokenRequired(o,u),[2]}))}))}))}else i.resolve(null);return i.promise},n.prototype._handleSessionRefreshError=function(e,r){return r===void 0&&(r=!1),D(this,void 0,void 0,(function(){var i;return O(this,(function(a){switch(a.label){case 0:return e instanceof ae&&(e.isSessionTokenExpiredError||e.code===et.APPLICATION_NOT_FOUND)?(this.session.authToken=void 0,r?[4,this._receiveNewAuthToken()]:[3,6]):[3,6];case 1:return(i=a.sent())?(this.session.authToken=i,[4,this._refreshSessionKey(this.session.authToken,!1)]):[3,3];case 2:return a.sent(),[3,5];case 3:return[4,this.clear()];case 4:a.sent(),a.label=5;case 5:return[2];case 6:throw e}}))}))},n.prototype._isSessionRelatedError=function(e){return e instanceof ae&&(e.isSessionExpiredError||e.isSessionInvalidatedError)},Object.defineProperty(n.prototype,"isSessionKeyRefreshing",{get:function(){return this.session.isRefreshing},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isRefreshingAuthToken",{get:function(){return this._isRefreshingAuthToken},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isSessionExpiring",{get:function(){return!!this.handler},enumerable:!1,configurable:!0}),n.prototype.authenticate=function(e,r){var i;return D(this,void 0,void 0,(function(){var a,s,o,u,c;return O(this,(function(h){switch(h.label){case 0:return this.session.authToken=r,a=0,[4,this._cacheContext.preference.get(ZC(this._sdkState.appId))];case 1:return(s=h.sent())&&(a=s.configTs),o=new bP({appId:this._sdkState.appId,userId:e,includeUIKitConfig:!!((i=this._sdkState.extensions)!==null&&i!==void 0?i:{}).sb_uikit,localCacheEnabled:this._cacheContext.localCacheEnabled,expiringSession:this.isSessionExpiring,configTs:a}),[4,this._requestQueue.commandRouter.send(o)];case 2:return u=h.sent(),(c=u.as($q).logi).error?[3,5]:this.session.hasChatServicePermission?[3,4]:[4,c.applyTo(this._iid)];case 3:h.sent(),h.label=4;case 4:return[3,6];case 5:throw c.error;case 6:return[2]}}))}))},n.prototype.login=function(e){var r;return D(this,void 0,void 0,(function(){var i,a,s,o,u,c,h,p;return O(this,(function(m){switch(m.label){case 0:return i=e.key,a=e.ekey,s=e.services,o=e.userProfile,u=e.deviceTokenLastDeletedAt,c=u===void 0?0:u,this.session.sessionKey=i,this.session.services=s,nN.set(this,a),this._deviceTokenCacheEnabled=(r=o?.appInfo)===null||r===void 0?void 0:r.deviceTokenCache,h=this._cacheContext.preference,this._deviceTokenCacheEnabled?[4,h.get(eN)]:[3,5];case 1:return!(p=m.sent())||p.lastDeletedAt<c?(this._deviceTokens=[],this._deviceTokenLastDeletedAt=c,[4,this.saveDeviceToken()]):[3,3];case 2:return m.sent(),[3,4];case 3:this._deviceTokens=p.tokens.map((function(_){return new tN(tN.payloadify(_))})),this._deviceTokenLastDeletedAt=p.lastDeletedAt,m.label=4;case 4:return[3,7];case 5:return[4,h.remove(eN)];case 6:m.sent(),m.label=7;case 7:return[2]}}))}))},n.prototype.complete=function(){var e=this;this.dispatch("refresh"),this._dispatcher.dispatch(new fP),gt((function(){return D(e,void 0,void 0,(function(){var r;return O(this,(function(i){return this._logger.debug("session refreshed"),!((r=this.handler)===null||r===void 0)&&r.onSessionRefreshed&&this.handler.onSessionRefreshed(),[2]}))}))}))},n.prototype.error=function(e){var r=this;gt((function(){return D(r,void 0,void 0,(function(){var i;return O(this,(function(a){return!((i=this.handler)===null||i===void 0)&&i.onSessionError&&this.handler.onSessionError(e),[2]}))}))}))},n.prototype.close=function(){var e=this;this.dispatch("close"),this._dispatcher.dispatch(new vP),gt((function(){return D(e,void 0,void 0,(function(){var r;return O(this,(function(i){return this._logger.debug("session closed"),!((r=this.handler)===null||r===void 0)&&r.onSessionClosed&&this.handler.onSessionClosed(),[2]}))}))}))},n.prototype.refreshAuthToken=function(){return D(this,void 0,void 0,(function(){var e,r;return O(this,(function(i){switch(i.label){case 0:if(e=null,!this.isSessionExpiring||this.session.isRefreshing)return[3,9];this.session.isRefreshing=!0,i.label=1;case 1:return i.trys.push([1,7,8,9]),[4,this._receiveNewAuthToken()];case 2:return(e=i.sent())?(this._logger.debug("session refreshing.."),this.session.authToken=e,[4,this._refreshSessionKey(this.session.authToken)]):[3,4];case 3:return i.sent(),[3,6];case 4:return[4,this.clear()];case 5:i.sent(),i.label=6;case 6:return[3,9];case 7:throw i.sent(),r=e?ae.sessionTokenRefreshFailed:ae.sessionTokenRequestFailed,this._dispatcher.dispatch(new AA),this.error(r),this._logger.debug("refresh auth token error = ",r),r;case 8:return this.session.isRefreshing=!1,[7];case 9:return[2]}}))}))},n.prototype.refreshSessionKey=function(){return D(this,void 0,void 0,(function(){var e;return O(this,(function(r){switch(r.label){case 0:if(!this.isSessionExpiring||this.session.isRefreshing)return[3,5];this.session.isRefreshing=!0,r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,this._refreshSessionKey(this.session.authToken)];case 2:return r.sent(),[3,5];case 3:throw r.sent(),e=ae.sessionTokenRefreshFailed,this._dispatcher.dispatch(new AA),this.error(e),e;case 4:return this.session.isRefreshing=!1,[7];case 5:return[2]}}))}))},n.prototype.setDeviceToken=function(e,r,i){if(this._deviceTokenCacheEnabled&&this.indexOfDeviceToken(e,r)<0){var a=new tN({type:e,token:r,device_os:i?.deviceOS,device_manufacturer:i?.deviceManufacturer,system_push_enabled:i?.systemPushEnabled});return this._deviceTokens.push(a),!0}return!1},n.prototype.unsetDeviceToken=function(e,r){if(this._deviceTokenCacheEnabled){var i=this.indexOfDeviceToken(e,r);i>=0&&this._deviceTokens.splice(i,1)}},n.prototype.unsetDeviceTokens=function(e){this._deviceTokenCacheEnabled&&(this._deviceTokens=e?this._deviceTokens.filter((function(r){return r.type!==e})):[])},n.prototype.setDeviceTokenDeletedAt=function(e){e>0&&(this._deviceTokenLastDeletedAt=e)},n.prototype.saveDeviceToken=function(){return D(this,void 0,void 0,(function(){return O(this,(function(e){switch(e.label){case 0:return this._deviceTokenCacheEnabled?[4,this._cacheContext.preference.set(eN,{tokens:this._deviceTokens,lastDeletedAt:this._deviceTokenLastDeletedAt})]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},n.prototype.clear=function(){return D(this,void 0,void 0,(function(){return O(this,(function(e){switch(e.label){case 0:return this.currentUser=null,this.session.clear(),this.close(),nN.delete(this),this._deviceTokens=[],this._deviceTokenLastDeletedAt=0,[4,this.saveDeviceToken()];case 1:return e.sent(),this._pushNotificationAckManager.clear(),[2]}}))}))},n})(Tp),CP=function(t,n){var e,r;if(t!==null&&n!==null){var i=Object.keys(t),a=Object.keys(n),s=wt([],dt(new Set(wt(wt([],dt(i),!1),dt(a),!1))),!1),o={};try{for(var u=Fe(s),c=u.next();!c.done;c=u.next()){var h=c.value,p=typeof t[h],m=typeof n[h];p==="undefined"?o[h]=n[h]:m==="undefined"?o[h]=t[h]:p!==m?o[h]=n[h]:p==="object"&&t[h]&&n[h]?o[h]=CP(t[h],n[h]):o[h]=n[h]}}catch(_){e={error:_}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(e)throw e.error}}return o}return n};(function(t){t[t.PENDING=0]="PENDING",t[t.COLLECT_ONLY=1]="COLLECT_ONLY",t[t.ENABLED=2]="ENABLED",t[t.DISABLED=3]="DISABLED"})(Hr||(Hr={})),(function(t){t.DAILY="daily",t.DEFAULT="default",t.REALTIME="realtime"})(WO||(WO={}));var JC,HS=100,Nw=(function(){function t(n){var e=n.deviceId,r=n.cacheContext,i=n.requestQueue;this.queue=[],this.flushWaitQueue=[],this.enabledState=Hr.PENDING,this.isFlushing=!1,this._sentLogStats=[],this.deviceId=e,this.cacheContext=r,this.requestQueue=i,this.logInfo={deviceId:e,statLogs:[],generation:1,lastFlushedAt:0},this.limit=HS}return Object.defineProperty(t.prototype,"isEnabled",{get:function(){return this.enabledState===Hr.ENABLED},enumerable:!1,configurable:!0}),t.prototype.init=function(n){return D(this,void 0,void 0,(function(){var e;return O(this,(function(r){switch(r.label){case 0:return this.key=n,[4,this.cacheContext.preference.get(this.key)];case 1:return(e=r.sent())&&(this.logInfo=e),[2]}}))}))},t.prototype._mergeQueue=function(){this.flushWaitQueue.length>0&&(this.queue=this.queue.concat(this.flushWaitQueue),this.flushWaitQueue=[])},t.prototype._isDuplicateStat=function(n){var e=this._sentLogStats.find((function(r){var i;return r.channelUrl===n.data.channel_url&&r.messageId===((i=n.data.notificationId)!==null&&i!==void 0?i:n.data.message_id)&&r.action===n.data.action}));return e||this._sentLogStats.push({channelUrl:n.data.channel_url,messageId:n.data.message_id,action:n.data.action}),!!e},t.prototype._save=function(){return D(this,void 0,void 0,(function(){var n;return O(this,(function(e){switch(e.label){case 0:return n=wt(wt([],dt(this.queue),!1),dt(this.flushWaitQueue),!1),[4,this.cacheContext.preference.set(this.key,{deviceId:this.logInfo.deviceId,statLogs:n.map((function(r){return Ar.payloadify(r)})),generation:this.logInfo.generation++,lastFlushedAt:this.logInfo.lastFlushedAt})];case 1:return e.sent(),[2]}}))}))},t.prototype.clear=function(){return D(this,void 0,void 0,(function(){return O(this,(function(n){return this.queue=[],this.flushWaitQueue=[],this.logInfo.generation=1,this._save(),[2]}))}))},t})(),$y=(function(t){function n(e){var r,i,a,s,o=e.type,u=e.data,c=e.ts,h=c===void 0?Date.now():c,p=t.call(this,{type:o,data:u,ts:h})||this;return p.date=new Date(h),p.key="".concat((r=p.date,i=r.getFullYear(),a=String(r.getMonth()+1).padStart(2,"0"),s=String(r.getDate()).padStart(2,"0"),"".concat(i).concat(a).concat(s)),"_").concat(o),p}return G(n,t),n})(Ar),SP=(function(t){function n(e){var r=e.deviceId,i=e.statLogs,a=t.call(this)||this;return a.method=Ie.POST,a.path="".concat(_j),a.params={device_id:r,log_entries:i.map((function(s){return Ar.payloadify(s)}))},a}return G(n,t),n})(we),Qq=(function(t){function n(e){var r=e.deviceId,i=e.cacheContext,a=e.requestQueue;return t.call(this,{deviceId:r,cacheContext:i,requestQueue:a})||this}return G(n,t),Object.defineProperty(n.prototype,"_isSendable",{get:function(){return this.queue.length!==0&&Date.now()-this.logInfo.lastFlushedAt>=this.statConfig.minInterval},enumerable:!1,configurable:!0}),n.prototype.init=function(e){return D(this,void 0,void 0,(function(){return O(this,(function(r){switch(r.label){case 0:return[4,t.prototype.init.call(this,e+".daily")];case 1:return r.sent(),this.queue=this.logInfo.statLogs.map((function(i){return new Ar({type:i.stat_type,ts:i.ts,data:i.data})})),[2]}}))}))},n.prototype.setConfig=function(e,r){return D(this,void 0,void 0,(function(){var i,a,s,o;return O(this,(function(u){switch(u.label){case 0:return this.statConfig=e,this.statConfig.minInterval=864e5,this._mergeQueue(),r.localCacheStat?(this.enabledState=r.enabledStat?Hr.ENABLED:Hr.COLLECT_ONLY,[3,3]):[3,1];case 1:return this.enabledState=Hr.DISABLED,[4,this.clear()];case 2:u.sent(),u.label=3;case 3:return this.isEnabled&&this._isSendable?[4,this._getUploadStats()]:[3,9];case 4:i=u.sent(),a=Math.max(Math.floor(Math.random()*this.statConfig.requestDelayRange),100),s=0,u.label=5;case 5:return s<i.length?(o=i.slice(s,1+this.statConfig.maxStatCountPerRequest),[4,za(a)]):[3,9];case 6:return u.sent(),[4,this._flush(o)];case 7:u.sent(),u.label=8;case 8:return s+=this.statConfig.maxStatCountPerRequest,[3,5];case 9:return[2]}}))}))},n.prototype.put=function(e){return D(this,void 0,void 0,(function(){var r,i,a,s;return O(this,(function(o){switch(o.label){case 0:return this.enabledState===Hr.DISABLED?[2,!0]:(r=this.enabledState===Hr.PENDING||this.isFlushing?this.flushWaitQueue:this.queue,i=dt(r.filter((function(u){return u instanceof $y&&u.key===e.key})),1),(a=i[0])?a.data=CP(a.data,e.data):r.push(e),this.enabledState===Hr.PENDING?[3,2]:[4,this._save()]);case 1:o.sent(),o.label=2;case 2:return this.isEnabled?(this._mergeQueue(),this._isSendable?[4,this._getUploadStats()]:[3,5]):[3,5];case 3:return s=o.sent(),[4,this._flush(s)];case 4:return[2,o.sent()];case 5:return[2,!0]}}))}))},n.prototype._getUploadStats=function(){return D(this,void 0,void 0,(function(){var e;return O(this,(function(r){return e=this.queue.filter((function(i){if(i instanceof $y){var a=new Date,s=dt([i.date.getFullYear(),a.getFullYear()],2),o=s[0],u=s[1];if(o<u)return!0;if(o===u){var c=dt([i.date.getMonth(),a.getMonth()],2),h=c[0],p=c[1];if(h<p)return!0;if(h===p){var m=dt([i.date.getDate(),a.getDate()],2);return m[0]<m[1]}}}return!1})),[2,e]}))}))},n.prototype._flush=function(e){return D(this,void 0,void 0,(function(){var r,i,a,s;return O(this,(function(o){switch(o.label){case 0:if(r=!0,!(e.length>0))return[3,10];if(this.isFlushing)return[3,9];this.isFlushing=!0,o.label=1;case 1:return o.trys.push([1,4,8,9]),i=wt([],dt(e),!1).slice(0,Math.min(this.limit,this.statConfig.maxStatCountPerRequest)),a=new SP({deviceId:this.deviceId,statLogs:i}),[4,this.requestQueue.send(a)];case 2:return o.sent(),this.queue=wt([],dt(e),!1).slice(i.length).concat(this.flushWaitQueue),this.flushWaitQueue=[],this.limit=HS,this.logInfo.lastFlushedAt=Date.now(),[4,this._save()];case 3:return o.sent(),[3,9];case 4:return(s=o.sent())instanceof ae?s.code!==et.NON_AUTHORIZED?[3,6]:[4,this.clear()]:[3,7];case 5:return o.sent(),this.enabledState=Hr.DISABLED,[3,7];case 6:s.code===et.STAT_UPLOAD_NOT_ALLOWED&&(this.enabledState=Hr.COLLECT_ONLY),o.label=7;case 7:return this.limit=this.limit+20,r=!1,[3,9];case 8:return this.isFlushing=!1,[7];case 9:return[3,11];case 10:this.isFlushing=!1,o.label=11;case 11:return[2,r]}}))}))},n})(Nw),Xq=(function(t){function n(e){var r=e.deviceId,i=e.cacheContext,a=e.requestQueue;return t.call(this,{deviceId:r,cacheContext:i,requestQueue:a})||this}return G(n,t),n.prototype._isSendable=function(e){if(e===void 0&&(e=!1),this.queue.length<this.statConfig.lowerThreshold)return!1;if(e){if(Date.now()-this.logInfo.lastFlushedAt<this.statConfig.minInterval)return!1}else if(this.queue.length<this.statConfig.minStatCount)return!1;return!0},n.prototype._filterQueueByType=function(e,r){return D(this,void 0,void 0,(function(){return O(this,(function(i){return[2,r?e.filter((function(a){return a.type!==fr.FEATURE_LOCALCACHE_EVENT})):e.filter((function(a){return a.type===fr.FEATURE_LOCALCACHE_EVENT}))]}))}))},n.prototype.init=function(e){return D(this,void 0,void 0,(function(){return O(this,(function(r){switch(r.label){case 0:return[4,t.prototype.init.call(this,e+".default")];case 1:return r.sent(),this.queue=this.logInfo.statLogs.map((function(i){return i.data=Z({message_init_policy:"",starting_point:0},i.data),new Ar({type:i.stat_type,ts:i.ts,data:i.data})})),[2]}}))}))},n.prototype.setConfig=function(e,r){return D(this,void 0,void 0,(function(){var i,a,s,o;return O(this,(function(u){switch(u.label){case 0:return this.statConfig=e,this._mergeQueue(),r.requestStat||r.localCacheStat?(this.enabledState=r.enabledStat?Hr.ENABLED:Hr.COLLECT_ONLY,i=void 0,r.requestStat||(i=!1),r.localCacheStat||(i=!0),i===void 0?[3,3]:(a=this,[4,this._filterQueueByType(this.queue,i)])):[3,4];case 1:return a.queue=u.sent(),s=this,[4,this._filterQueueByType(this.flushWaitQueue,i)];case 2:s.flushWaitQueue=u.sent(),this._save(),u.label=3;case 3:return[3,6];case 4:return this.enabledState=Hr.DISABLED,[4,this.clear()];case 5:u.sent(),u.label=6;case 6:return this.isEnabled&&this._isSendable(!0)?(o=Math.max(Math.floor(Math.random()*this.statConfig.requestDelayRange),100),[4,za(o)]):[3,9];case 7:return u.sent(),[4,this._flush(this.queue)];case 8:u.sent(),u.label=9;case 9:return[2]}}))}))},n.prototype.put=function(e){return D(this,void 0,void 0,(function(){var r;return O(this,(function(i){switch(i.label){case 0:return this.enabledState===Hr.DISABLED?[2,!0]:((r=this.enabledState===Hr.PENDING||this.isFlushing?this.flushWaitQueue:this.queue).push(e),this.enabledState===Hr.PENDING?[3,2]:[4,this._save()]);case 1:i.sent(),i.label=2;case 2:return this.isEnabled?(this._mergeQueue(),this._isSendable()?[4,this._flush(r)]:[3,4]):[3,4];case 3:return[2,i.sent()];case 4:return[2,!0]}}))}))},n.prototype._flush=function(e){return D(this,void 0,void 0,(function(){var r,i,a,s;return O(this,(function(o){switch(o.label){case 0:if(r=!0,!(e.length>0))return[3,10];if(this.isFlushing)return[3,9];this.isFlushing=!0,o.label=1;case 1:return o.trys.push([1,4,8,9]),i=wt([],dt(e),!1).slice(0,Math.min(this.limit,this.statConfig.maxStatCountPerRequest)),a=new SP({deviceId:this.deviceId,statLogs:i}),[4,this.requestQueue.send(a)];case 2:return o.sent(),this.queue=wt([],dt(e),!1).slice(i.length).concat(this.flushWaitQueue),this.flushWaitQueue=[],this.limit=HS,this.logInfo.lastFlushedAt=Date.now(),[4,this._save()];case 3:return o.sent(),[3,9];case 4:return(s=o.sent())instanceof ae?s.code!==et.NON_AUTHORIZED?[3,6]:[4,this.clear()]:[3,7];case 5:return o.sent(),this.enabledState=Hr.DISABLED,[3,7];case 6:s.code===et.STAT_UPLOAD_NOT_ALLOWED&&(this.enabledState=Hr.COLLECT_ONLY),o.label=7;case 7:return this.limit=this.limit+20,r=!1,[3,9];case 8:return this.isFlushing=!1,[7];case 9:return[3,11];case 10:this.isFlushing=!1,o.label=11;case 11:return[2,r]}}))}))},n})(Nw),Zq=(function(t){function n(e){var r=e.deviceId,i=e.statLogs,a=t.call(this)||this;return a.method=Ie.POST,a.path="".concat(yj),a.params={device_id:r,log_entries:i.map((function(s){return Ar.payloadify(s)}))},a}return G(n,t),n})(we),Jq=(function(t){function n(e){var r=e.deviceId,i=e.cacheContext,a=e.requestQueue;return t.call(this,{deviceId:r,cacheContext:i,requestQueue:a})||this}return G(n,t),Object.defineProperty(n.prototype,"_isSendable",{get:function(){return this.queue.length>=this.statConfig.minStatCount&&this.queue.length>this.statConfig.lowerThreshold||this.logInfo.lastFlushedAt>0&&Date.now()-this.logInfo.lastFlushedAt>=this.statConfig.minInterval},enumerable:!1,configurable:!0}),n.prototype.init=function(e){return D(this,void 0,void 0,(function(){return O(this,(function(r){switch(r.label){case 0:return[4,t.prototype.init.call(this,e+".realtime")];case 1:return r.sent(),this.queue=this.logInfo.statLogs.map((function(i){var a;return i.data=ze(Z(Z({},i.data),{message_id:(a=i.data.notificationId)!==null&&a!==void 0?a:i.data.message_id,notificationId:void 0})),new Ar({type:i.stat_type,ts:i.ts,data:i.data})})),this._sentLogStats=this.queue.map((function(i){var a;return{channelUrl:i.data.channelUrl,messageId:(a=i.data.notificationId)!==null&&a!==void 0?a:i.data.message_id,action:i.data.action}})),[2]}}))}))},n.prototype.setConfig=function(e,r){return D(this,void 0,void 0,(function(){var i;return O(this,(function(a){switch(a.label){case 0:return this.statConfig=e,this._mergeQueue(),r.notificationStat?(this.enabledState=r.enabledStat?Hr.ENABLED:Hr.COLLECT_ONLY,[3,3]):[3,1];case 1:return this.enabledState=Hr.DISABLED,[4,this.clear()];case 2:a.sent(),a.label=3;case 3:return this.isEnabled&&this._isSendable?(i=Math.max(Math.floor(Math.random()*this.statConfig.requestDelayRange),100),[4,za(i)]):[3,6];case 4:return a.sent(),[4,this._flush(this.queue)];case 5:a.sent(),a.label=6;case 6:return[2]}}))}))},n.prototype.put=function(e){return D(this,void 0,void 0,(function(){var r;return O(this,(function(i){switch(i.label){case 0:return this.enabledState===Hr.DISABLED?[2,!0]:(r=this.enabledState===Hr.PENDING||this.isFlushing?this.flushWaitQueue:this.queue,this._isDuplicateStat(e)?[2,!0]:(r.push(e),this.enabledState===Hr.PENDING?[3,2]:[4,this._save()]));case 1:i.sent(),i.label=2;case 2:return this.isEnabled?(this._mergeQueue(),this.isEnabled&&this._isSendable?[4,this._flush(r)]:[3,4]):[3,4];case 3:return[2,i.sent()];case 4:return[2,!0]}}))}))},n.prototype._flush=function(e){return D(this,void 0,void 0,(function(){var r,i,a,s;return O(this,(function(o){switch(o.label){case 0:if(r=!0,!(e.length>0))return[3,10];if(this.isFlushing)return[3,9];this.isFlushing=!0,o.label=1;case 1:return o.trys.push([1,4,8,9]),i=wt([],dt(e),!1).slice(0,Math.min(this.limit,this.statConfig.maxStatCountPerRequest)),a=new Zq({deviceId:this.deviceId,statLogs:i}),[4,this.requestQueue.send(a)];case 2:return o.sent(),this.queue=wt([],dt(e),!1).slice(i.length).concat(this.flushWaitQueue),this.flushWaitQueue=[],this.limit=HS,this.logInfo.lastFlushedAt=Date.now(),[4,this._save()];case 3:return o.sent(),[3,9];case 4:return(s=o.sent())instanceof ae?s.code!==et.NON_AUTHORIZED?[3,6]:[4,this.clear()]:[3,7];case 5:return o.sent(),this.enabledState=Hr.DISABLED,[3,7];case 6:s.code===et.STAT_UPLOAD_NOT_ALLOWED&&(this.enabledState=Hr.COLLECT_ONLY),o.label=7;case 7:return this.limit=this.limit+20,r=!1,[3,9];case 8:return this.isFlushing=!1,[7];case 9:return[3,11];case 10:this.isFlushing=!1,o.label=11;case 11:return[2,r]}}))}))},n})(Nw),e$=(function(){function t(n){var e=n.cacheContext,r=n.requestQueue,i=n.dispatcher,a=n.logger;this._collectRequestStat=!0,this._collectFeatureLocalCacheStat=!0,this._collectionNotificationStat=!0,this._retryCount=0,this.deviceId=il(),this.cacheContext=e,this.requestQueue=r,this.dispatcher=i,this.logger=a,this._dailyStatCollector=new Qq({deviceId:this.deviceId,cacheContext:this.cacheContext,requestQueue:this.requestQueue}),this._defaultStatCollector=new Xq({deviceId:this.deviceId,cacheContext:this.cacheContext,requestQueue:this.requestQueue}),this._notificationStatCollector=new Jq({deviceId:this.deviceId,cacheContext:this.cacheContext,requestQueue:this.requestQueue})}return t.prototype._migration=function(){return D(this,void 0,void 0,(function(){var n,e,r,i;return O(this,(function(a){switch(a.label){case 0:return[4,this.cacheContext.preference.get(this.key)];case 1:return(n=a.sent())?(e=[],n.statLogs.forEach((function(s){s.stat_type===fr.FEATURE_LOCALCACHE&&e.push(new Ar({type:s.stat_type,ts:s.ts,data:s.data}))})),[4,this.cacheContext.preference.set(this.key+".daily",{deviceId:n.deviceId,statLogs:e.map((function(s){return Ar.payloadify(s)})),generation:n.generation,lastFlushedAt:n.lastFlushedAt})]):[3,6];case 2:return a.sent(),r=[],n.statLogs.forEach((function(s){s.stat_type!==fr.FEATURE_LOCALCACHE&&s.stat_type!==fr.NOTIFICATION&&(s.stat_type===fr.FEATURE_LOCALCACHE_EVENT&&(s.data=Z({message_init_policy:"",starting_point:0},s.data)),r.push(new Ar({type:s.stat_type,ts:s.ts,data:s.data})))})),[4,this.cacheContext.preference.set(this.key+".default",{deviceId:n.deviceId,statLogs:r.map((function(s){return Ar.payloadify(s)})),generation:n.generation,lastFlushedAt:n.lastFlushedAt})];case 3:return a.sent(),i=[],n.statLogs.forEach((function(s){var o;s.stat_type===fr.NOTIFICATION&&(s.data=ze(Z(Z({},s.data),{message_id:(o=s.data.notificationId)!==null&&o!==void 0?o:s.data.message_id,notificationId:void 0})),i.push(new Ar({type:s.stat_type,ts:s.ts,data:s.data})))})),[4,this.cacheContext.preference.set(this.key+".realtime",{deviceId:n.deviceId,statLogs:i.map((function(s){return Ar.payloadify(s)})),generation:n.generation,lastFlushedAt:n.lastFlushedAt})];case 4:return a.sent(),[4,this.cacheContext.preference.remove(this.key)];case 5:a.sent(),a.label=6;case 6:return[2]}}))}))},t.prototype.init=function(n){return D(this,void 0,void 0,(function(){var e=this;return O(this,(function(r){switch(r.label){case 0:return this.key=n,[4,this._migration()];case 1:return r.sent(),[4,this._dailyStatCollector.init(this.key)];case 2:return r.sent(),[4,this._defaultStatCollector.init(this.key)];case 3:return r.sent(),[4,this._notificationStatCollector.init(this.key)];case 4:return r.sent(),this.commandEventContext||(this.commandEventContext=this.dispatcher.on((function(i){return D(e,void 0,void 0,(function(){var a,s,o,u,c,h;return O(this,(function(p){return i instanceof vd?(a=i.statLog,this.put(a)):i instanceof mP&&(s=i.request,o=i.features,u=i.options,c=i.statConfigInfo,this._retryCount=0,this._collectRequestStat=s,this._collectFeatureLocalCacheStat=o?.localCache,this._collectionNotificationStat=o?.notification,this._statConfig=c,this._dailyStatCollector.setConfig(this._statConfig.default,{localCacheStat:this._collectFeatureLocalCacheStat,enabledStat:u.ingestion}),this._defaultStatCollector.setConfig(this._statConfig.default,{requestStat:this._collectRequestStat,localCacheStat:this._collectFeatureLocalCacheStat,enabledStat:u.ingestion}),this._notificationStatCollector.setConfig((h=this._statConfig.realTime)!==null&&h!==void 0?h:this._statConfig.default,{notificationStat:this._collectionNotificationStat,enabledStat:u.ingestion})),[2]}))}))}))),[2]}}))}))},t.prototype.put=function(n){return D(this,void 0,void 0,(function(){var e;return O(this,(function(r){switch(r.label){case 0:return e=!0,n instanceof $y?this._collectFeatureLocalCacheStat?[4,this._dailyStatCollector.put(n)]:[3,2]:[3,3];case 1:e=r.sent(),r.label=2;case 2:return[3,13];case 3:switch(n.type){case fr.API_RESULT:case fr.WEBSOCKET_CONNECT:case fr.WEBSOCKET_DISCONNECT:return[3,4];case fr.FEATURE_LOCALCACHE:case fr.FEATURE_LOCALCACHE_EVENT:return[3,7];case fr.NOTIFICATION:return[3,10]}return[3,13];case 4:return this._collectRequestStat?[4,this._defaultStatCollector.put(n)]:[3,6];case 5:e=r.sent(),r.label=6;case 6:return[3,13];case 7:return this._collectFeatureLocalCacheStat?[4,this._defaultStatCollector.put(n)]:[3,9];case 8:e=r.sent(),r.label=9;case 9:return[3,13];case 10:return this._collectionNotificationStat?[4,this._notificationStatCollector.put(n)]:[3,12];case 11:e=r.sent(),r.label=12;case 12:return[3,13];case 13:return e?this._retryCount=0:(this._retryCount++,this._retryCount>20&&(this._dailyStatCollector.enabledState=Hr.COLLECT_ONLY,this._defaultStatCollector.enabledState=Hr.COLLECT_ONLY,this._notificationStatCollector.enabledState=Hr.COLLECT_ONLY,this.logger.debug(ae.statLogUploadLimitExceededError))),[2]}}))}))},t.prototype.close=function(){this.commandEventContext&&(this.commandEventContext.close(),this.commandEventContext=void 0)},t})(),t$=(function(){function t(n){var e=n.limit,r=e===void 0?5:e;this.workersByKey={},this.limit=r}return t.prototype.run=function(n,e){return D(this,void 0,void 0,(function(){var r;return O(this,(function(i){switch(i.label){case 0:return this.workersByKey[n]||(this.workersByKey[n]=[]),this.workersByKey[n].length<this.limit?(this.workersByKey[n].push(e),[4,e()]):[3,2];case 1:return r=i.sent(),this.workersByKey[n].pop(),[2,r];case 2:throw ae.tooManyRequests}}))}))},t.prototype.clear=function(n){this.workersByKey[n]=[]},t})();(function(t){t.DELIVERY_RECEIPT="delivery_receipt",t.PUSH_ACKNOWLEDGEMENT="push_acknowledgement"})(JC||(JC={}));var Se,n$=(function(t){function n(){var e=t!==null&&t.apply(this,arguments)||this;return e._pushAckedCache={},e}return G(n,t),n.prototype.isAcked=function(e,r){var i,a="".concat(e,"_").concat(r);return(i=this._pushAckedCache[a])!==null&&i!==void 0&&i},n.prototype.markAsAcked=function(e,r){var i="".concat(e,"_").concat(r);this._pushAckedCache[i]=!0},n.prototype.clear=function(){te.of(this._iid).logger.debug("clear push acked cache"),this._pushAckedCache={}},n.prototype.parseData=function(e){var r,i,a,s,o=te.of(this._iid).logger,u=e.sendbird;if(typeof u=="string")try{u=JSON.parse(u)}catch{throw o.info("push notification payload does not contain sendbird payload in JSON format."),ae.malformedDataError}if(!u||typeof u!="object")throw o.info("push notification payload does not contain sendbird payload in JSON format."),ae.malformedDataError;var c=(r=u.push_tracking_id)!==null&&r!==void 0?r:"",h=u.notification_message_id,p=u.notification_channel_key,m=u.notification_template_key,_=u.notification_event_deadline,b=(i=u.session_key)!==null&&i!==void 0?i:{},C=(a=b?.key)!==null&&a!==void 0?a:"",N=(s=b?.topics)!==null&&s!==void 0?s:[];if(typeof c!="string"||c.length===0)throw o.info("push tracking id is not available"),ae.malformedDataError;if(typeof h!="string"||h.length===0)throw o.info("message id is not available"),ae.malformedDataError;return{pushTrackingId:c,sessionKey:C,sessionTopics:N,messageId:h,channelKey:p,templateKey:m,notificationEventDeadline:_}},n})(wi),vg=function(t){this.name=t.name,this._custom=t.custom,this._usedByModerationEngine=t.used_by_moderation_engine},r$=(function(t){function n(){var e=t.call(this)||this;return e.method=Ie.GET,e.path=Cj,e}return G(n,t),n})(we),i$=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.reportCategories=r.categories,i}return G(n,t),n})(xe),a$=(function(t){function n(e){var r=t.call(this,e)||this;return r._categories=[],r}return G(n,t),n.prototype.categories=function(){return D(this,void 0,void 0,(function(){return O(this,(function(e){switch(e.label){case 0:return this._categories.length!==0?[3,2]:[4,this._fetchCategories()];case 1:e.sent(),e.label=2;case 2:return[2,this._categories]}}))}))},n.prototype._fetchCategories=function(){return D(this,void 0,void 0,(function(){var e,r,i,a,s;return O(this,(function(o){switch(o.label){case 0:return e=te.of(this._iid).requestQueue,r=new r$,[4,e.send(r)];case 1:return i=o.sent(),(a=i.as(i$).reportCategories)&&(s=this._categories).push.apply(s,wt([],dt(a.map((function(u){return new vg(u)}))),!1)),[2]}}))}))},n})(wi),s$=(function(){function t(){this._enabledRequestDedup=!0,this._requestCache=new Map,this._requestDedupInterval=500}return Object.defineProperty(t.prototype,"requestDedupInterval",{set:function(n){this._requestDedupInterval=n,this._requestDedupInterval<=0?this._enabledRequestDedup=!1:n<50&&(this._requestDedupInterval=50)},enumerable:!1,configurable:!0}),t.prototype.normalizePath=function(n){return n.replace("/v3/sdk/","/v3/")},t.prototype._generateCacheKey=function(n){var e=n.path,r=n.time,i=n.params,a=this.normalizePath(e),s=i?Object.entries(i).sort((function(u,c){var h=dt(u,1)[0],p=dt(c,1)[0];return h.localeCompare(p)})).map((function(u){var c=dt(u,2),h=c[0],p=c[1];return"".concat(h,"=").concat(JSON.stringify(p))})).join("&"):"",o=r?"_".concat(r):"";return"".concat(a,"?").concat(s).concat(o)},t.prototype.requestGetChannel=function(n,e,r,i){var a,s,o=this;if(i===void 0&&(i=!0),!this._enabledRequestDedup)return e();var u=Date.now(),c=this._generateCacheKey({path:n,params:r});if(i)try{for(var h=Fe(this._requestCache.entries()),p=h.next();!p.done;p=h.next()){var m=dt(p.value,2),_=m[0],b=m[1];if(_.startsWith(c)&&u-b.requestTime<=this._requestDedupInterval)return b.pendingResponse?Promise.resolve(b.pendingResponse):b.promise}}catch(M){a={error:M}}finally{try{p&&!p.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}var C=i?this._generateCacheKey({path:n,time:u,params:r}):c,N=e().then((function(M){var w=o._requestCache.get(C);return w&&(w.pendingResponse=M,w.responseTime=Date.now()),Promise.resolve(M)})).catch((function(M){return Promise.reject(M)})).finally((function(){setTimeout((function(){o._requestCache.delete(C)}),o._requestDedupInterval)})),S={requestTime:u,responseTime:null,promise:N,pendingResponse:null};return this._requestCache.set(C,S),N},t.prototype.updatePendingResponse=function(n,e){var r,i;try{for(var a=Fe(this._requestCache.entries()),s=a.next();!s.done;s=a.next()){var o=dt(s.value,2),u=o[0],c=o[1];if(u.includes(n.url)&&c.pendingResponse&&c.responseTime<e){var h=c.pendingResponse.payload,p=n.constructor.payloadify(n,!0),m=Z(Z({},h),p);c.pendingResponse=new xe(n._iid,m);break}}}catch(_){r={error:_}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}},t})(),wv={},te=(function(){function t(n,e){var r,i,a,s,o,u,c,h,p;if(this.connectedAt=0,this.firstConnectedAt=0,this.connectionHandlers=new Map,this.userEventHandlers=new Map,!wv[n]){wv[n]=this;var m=(r=e.options)!==null&&r!==void 0?r:new Lk,_=this.sdkState={appId:e.appId,appVersion:(i=e.appVersion)!==null&&i!==void 0?i:"",appState:"foreground",userId:void 0,extensions:{},api:{host:(a=e.apiHost)!==null&&a!==void 0?a:"https://api-".concat(e.appId,".sendbird.com")},websocket:{host:(s=e.websocketHost)!==null&&s!==void 0?s:"wss://ws-".concat(e.appId,".sendbird.com"),pingerDisabled:!!e.noPingpong,pingInterval:void 0,pongTimeout:void 0,connectMaxRetry:2,compression:!0,reconnectMaxRetry:-1,reconnectRetryStrategy:new _P,responseTimeout:m.websocketResponseTimeout},sessionTokenRefreshTimeout:m.sessionTokenRefreshTimeout};this.appInfo=void 0,this.subscribedUnreadMessageCount={all:0,feed:0,customTypes:{},ts:0};var b=this.logger=e.logger;this.connectedAt=0,this.firstConnectedAt=0,this.connectionHandlers=new Map,this.userEventHandlers=new Map,typeof e.localCacheEnabled=="string"&&(e.localCacheEnabled=e.localCacheEnabled==="true");var C=this.cacheContext=new oj({encryption:e.encryption,store:e.store,localCacheEnabled:(o=e.localCacheEnabled)!==null&&o!==void 0&&o,localCacheConfig:(u=e.localCacheConfig)!==null&&u!==void 0?u:new Pk});this.debugMode=(c=e.debugMode)!==null&&c!==void 0&&c,this.maxSuperGroupChannelUnreadCount=Qh.DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL,this.useMemberInfoInMessage=m.useMemberInfoInMessage,this.typingIndicatorInvalidateTime=m.typingIndicatorInvalidateTime,this.typingIndicatorThrottle=m.typingIndicatorThrottle,this.concurrentCallLimit=void 0,this.backOffDelay=void 0;var N=this.dispatcher=new cj,S=new uj;this.requestQueue=new Yq(n,{session:S,sdkState:_,dispatcher:N,logger:b,useFetchCompat:e.useFetchCompat}),this.pushNotificationAckManager=new n$(n),this.sessionManager=new Wq({_iid:n,session:S,cacheContext:C,sdkState:_,dispatcher:N,requestQueue:this.requestQueue,logger:b,pushNotificationAckManager:this.pushNotificationAckManager}),this.connectionManager=new Vq(n,{sdkState:_,cacheContext:this.cacheContext,connectionHandlers:this.connectionHandlers,dispatcher:N,sessionManager:this.sessionManager,websocketClient:this.requestQueue.commandRouter.websocketClient,disableWebSocketCloseEventHandling:(h=e.disableWebSocketCloseEventHandling)!==null&&h!==void 0&&h,logger:b}),this.statManager=new e$({cacheContext:this.cacheContext,requestQueue:this.requestQueue,dispatcher:this.dispatcher,logger:b}),this.appStateToggleEnabled=(p=e.appStateToggleEnabled)===null||p===void 0||p,this.messageBackgroundSyncThrottleController=new t$({limit:5}),this.reportCategoryManager=new a$(n),this.requestDeduplicator=new s$}return wv[n]}return t.of=function(n){if(wv[n])return wv[n];throw ae.lostInstance},t.clear=function(n){wv[n]&&delete wv[n]},t.prototype.hasExtension=function(n){return this.sdkState.extensions&&this.sdkState.extensions[n]},t})(),GS=(function(){function t(){}return t.prototype.init=function(n,e){var r=e.sdkState,i=e.dispatcher,a=e.sessionManager,s=e.requestQueue,o=e.logger;e.onlineDetector;var u=e.cacheContext;this._iid=n,this._cacheContext=u,this._sdkState=r,this._dispatcher=i,this._sessionManager=a,this._requestQueue=s,this._logger=o},t})();(function(t){t.UNKNOWN="UNKNOWN",t.EVENT_CHANNEL_CREATED="EVENT_CHANNEL_CREATED",t.EVENT_CHANNEL_UPDATED="EVENT_CHANNEL_UPDATED",t.EVENT_CHANNEL_DELETED="EVENT_CHANNEL_DELETED",t.EVENT_CHANNEL_READ="EVENT_CHANNEL_READ",t.EVENT_CHANNEL_UNREAD="EVENT_CHANNEL_UNREAD",t.EVENT_CHANNEL_DELIVERED="EVENT_CHANNEL_DELIVERED",t.EVENT_CHANNEL_INVITED="EVENT_CHANNEL_INVITED",t.EVENT_CHANNEL_JOINED="EVENT_CHANNEL_JOINED",t.EVENT_CHANNEL_LEFT="EVENT_CHANNEL_LEFT",t.EVENT_CHANNEL_ACCEPTED_INVITE="EVENT_CHANNEL_ACCEPTED_INVITE",t.EVENT_CHANNEL_DECLINED_INVITE="EVENT_CHANNEL_DECLINED_INVITE",t.EVENT_CHANNEL_OPERATOR_UPDATED="EVENT_CHANNEL_OPERATOR_UPDATED",t.EVENT_CHANNEL_BANNED="EVENT_CHANNEL_BANNED",t.EVENT_CHANNEL_UNBANNED="EVENT_CHANNEL_UNBANNED",t.EVENT_CHANNEL_MUTED="EVENT_CHANNEL_MUTED",t.EVENT_CHANNEL_UNMUTED="EVENT_CHANNEL_UNMUTED",t.EVENT_CHANNEL_FROZEN="EVENT_CHANNEL_FROZEN",t.EVENT_CHANNEL_UNFROZEN="EVENT_CHANNEL_UNFROZEN",t.EVENT_CHANNEL_HIDDEN="EVENT_CHANNEL_HIDDEN",t.EVENT_CHANNEL_UNHIDDEN="EVENT_CHANNEL_UNHIDDEN",t.EVENT_CHANNEL_RESET_HISTORY="EVENT_CHANNEL_RESET_HISTORY",t.EVENT_CHANNEL_TYPING_STATUS_UPDATE="EVENT_CHANNEL_TYPING_STATUS_UPDATE",t.EVENT_CHANNEL_MEMBER_COUNT_UPDATED="EVENT_CHANNEL_MEMBER_COUNT_UPDATED",t.EVENT_CHANNEL_METADATA_CREATED="EVENT_CHANNEL_METADATA_CREATED",t.EVENT_CHANNEL_METADATA_UPDATED="EVENT_CHANNEL_METADATA_UPDATED",t.EVENT_CHANNEL_METADATA_DELETED="EVENT_CHANNEL_METADATA_DELETED",t.EVENT_CHANNEL_METACOUNTER_CREATED="EVENT_CHANNEL_METACOUNTER_CREATED",t.EVENT_CHANNEL_METACOUNTER_UPDATED="EVENT_CHANNEL_METACOUNTER_UPDATED",t.EVENT_CHANNEL_METACOUNTER_DELETED="EVENT_CHANNEL_METACOUNTER_DELETED",t.EVENT_MESSAGE_SENT="EVENT_MESSAGE_SENT",t.EVENT_MESSAGE_RECEIVED="EVENT_MESSAGE_RECEIVED",t.EVENT_MESSAGE_UPDATED="EVENT_MESSAGE_UPDATED",t.EVENT_PINNED_MESSAGE_UPDATED="EVENT_PINNED_MESSAGE_UPDATED",t.REQUEST_CHANNEL="REQUEST_CHANNEL",t.REQUEST_CHANNEL_CHANGELOGS="REQUEST_CHANNEL_CHANGELOGS",t.REFRESH_CHANNEL="REFRESH_CHANNEL",t.CHANNEL_LASTACCESSEDAT_UPDATED="CHANNEL_LASTACCESSEDAT_UPDATED",t.SYNC_CHANNEL_BACKGROUND="SYNC_CHANNEL_BACKGROUND",t.SYNC_CHANNEL_CHANGELOGS="SYNC_CHANNEL_CHANGELOGS",t.EVENT_MESSAGE_SENT_SUCCESS="EVENT_MESSAGE_SENT_SUCCESS",t.EVENT_MESSAGE_SENT_FAILED="EVENT_MESSAGE_SENT_FAILED",t.EVENT_MESSAGE_SENT_PENDING="EVENT_MESSAGE_SENT_PENDING",t.EVENT_MESSAGE_DELETED="EVENT_MESSAGE_DELETED",t.EVENT_MESSAGE_FEEDBACK_ADDED="EVENT_MESSAGE_FEEDBACK_ADDED",t.EVENT_MESSAGE_FEEDBACK_UPDATED="EVENT_MESSAGE_FEEDBACK_UPDATED",t.EVENT_MESSAGE_FEEDBACK_DELETED="EVENT_MESSAGE_FEEDBACK_DELETED",t.EVENT_MESSAGE_READ="EVENT_MESSAGE_READ",t.EVENT_MESSAGE_DELIVERED="EVENT_MESSAGE_DELIVERED",t.EVENT_MESSAGE_REACTION_UPDATED="EVENT_MESSAGE_REACTION_UPDATED",t.EVENT_MESSAGE_THREADINFO_UPDATED="EVENT_MESSAGE_THREADINFO_UPDATED",t.EVENT_MESSAGE_OFFSET_UPDATED="EVENT_MESSAGE_OFFSET_UPDATED",t.REQUEST_MESSAGE="REQUEST_MESSAGE",t.EVENT_THREAD_INFO_UPDATED="EVENT_THREADINFO_UPDATED",t.EVENT_POLL_UPDATED="EVENT_POLL_UPDATED",t.EVENT_POLL_VOTED="EVENT_POLL_VOTED",t.SYNC_POLL_CHANGELOGS="SYNC_POLL_CHANGELOGS",t.EVENT_CHANNEL_CSAT_SUBMITTED="EVENT_CHANNEL_CSAT_SUBMITTED",t.EVENT_CHANNEL_CONVERSATION_HANDEDOFF="EVENT_CHANNEL_CONVERSATION_HANDEDOFF",t.REQUEST_RESEND_MESSAGE="REQUEST_RESEND_MESSAGE",t.REQUEST_THREADED_MESSAGE="REQUEST_THREADED_MESSAGE",t.REQUEST_MESSAGE_CHANGELOGS="REQUEST_MESSAGE_CHANGELOGS",t.SYNC_MESSAGE_FILL="SYNC_MESSAGE_FILL",t.SYNC_MESSAGE_BACKGROUND="SYNC_MESSAGE_BACKGROUND",t.SYNC_MESSAGE_CHANGELOGS="SYNC_MESSAGE_CHANGELOGS",t.LOCAL_MESSAGE_PENDING_CREATED="LOCAL_MESSAGE_PENDING_CREATED",t.LOCAL_MESSAGE_FAILED="LOCAL_MESSAGE_FAILED",t.LOCAL_MESSAGE_CANCELED="LOCAL_MESSAGE_CANCELED",t.LOCAL_MESSAGE_RESEND_STARTED="LOCAL_MESSAGE_RESEND_STARTED"})(Se||(Se={}));var Tg;Z({},Se);var ad=function(t){return t.startsWith("EVENT_")||t.startsWith("LOCAL_MESSAGE_")||t===Se.SYNC_MESSAGE_FILL||t===Se.SYNC_MESSAGE_CHANGELOGS||t===Se.SYNC_POLL_CHANGELOGS},Br=(function(t){function n(e){var r=e.messages,i=e.source,a=e.isWebSocketEventComing,s=a!==void 0&&a,o=t.call(this)||this;return o.messages=r,o.source=i,o.isWebSocketEventComing=s,o}return G(n,t),n})(gr),Aw=(function(t){function n(e){var r=e.messageIds,i=e.source,a=e.isWebSocketEventComing,s=a!==void 0&&a,o=t.call(this)||this;return o.messageIds=r,o.source=i,o.isWebSocketEventComing=s,o}return G(n,t),n})(gr),TP=(function(t){function n(e){var r=e.messageDeletionTimestamp,i=e.channelUrl,a=e.source,s=t.call(this)||this;return s.messageDeletionTimestamp=r,s.channelUrl=i,s.source=a,s}return G(n,t),n})(gr),NP=(function(t){function n(e){var r=e.event,i=e.source,a=e.isWebSocketEventComing,s=a!==void 0&&a,o=t.call(this)||this;return o.event=r,o.source=i,o.isWebSocketEventComing=s,o}return G(n,t),n})(gr),AP=(function(t){function n(e){var r=e.event,i=e.source,a=e.isWebSocketEventComing,s=a!==void 0&&a,o=t.call(this)||this;return o.event=r,o.source=i,o.isWebSocketEventComing=s,o}return G(n,t),n})(gr),MP=(function(t){function n(e){var r=e.reqId,i=e.source,a=t.call(this)||this;return a.reqId=r,a.source=i,a}return G(n,t),n})(gr),IP=(function(t){function n(e){var r=e.polls,i=e.source,a=t.call(this)||this;return a.polls=r,a.source=i,a}return G(n,t),n})(gr),Mw=(function(t){function n(e){var r=e.event,i=e.source,a=t.call(this)||this;return a.event=r,a.source=i,a}return G(n,t),n})(gr),VS=(function(t){function n(e){var r=e.event,i=e.source,a=t.call(this)||this;return a.event=r,a.source=i,a}return G(n,t),n})(gr);(function(t){t.OPEN="open",t.CLOSED="closed"})(Tg||(Tg={}));var wP="removed",IA=function(t){switch(t){case"open":return Tg.OPEN;case"closed":return Tg.CLOSED;default:return null}},RP=function(t){return!t||!!t.text&&re("string",t.text)},bC=(function(t){function n(e,r){var i,a,s,o,u,c,h,p=this;return(p=t.call(this,e)||this).pollId=0,p.id=0,p.text=null,p.voteCount=0,p.createdBy=null,p.createdAt=0,p.updatedAt=0,p._lastVotedAt=0,p.pollId=(i=r.poll_id)!==null&&i!==void 0?i:0,p.id=(a=r.id)!==null&&a!==void 0?a:0,p.text=(s=r.text)!==null&&s!==void 0?s:null,p.voteCount=(o=r.vote_count)!==null&&o!==void 0?o:0,p.createdBy=(u=r.created_by)!==null&&u!==void 0?u:null,p.createdAt=(c=r.created_at)!==null&&c!==void 0?c:0,p.updatedAt=(h=r.updated_at)!==null&&h!==void 0?h:0,p}return G(n,t),n.payloadify=function(e){return ze(ht(Z(Z({},t.payloadify.call(this,e)),{vote_count:e.voteCount,poll_id:e.pollId,text:e.text,created_at:e.createdAt,id:e.id,created_by:e.createdBy,updated_at:e.updatedAt})))},n})(wi),Ul=(function(t){function n(e,r){var i,a,s,o,u,c,h,p,m,_,b,C,N,S=this;return(S=t.call(this,e)||this).id=0,S.title=null,S.createdAt=0,S.updatedAt=0,S.closeAt=-1,S.status=Tg.CLOSED,S.messageId=0,S.data=null,S.voterCount=-1,S.options=[],S.createdBy=null,S.allowUserSuggestion=!1,S.allowMultipleVotes=!1,S.votedPollOptionIds=[],S.id=(i=r.id)!==null&&i!==void 0?i:0,S.title=(a=r.title)!==null&&a!==void 0?a:null,S.createdAt=(s=r.created_at)!==null&&s!==void 0?s:0,S.updatedAt=(o=r.updated_at)!==null&&o!==void 0?o:0,S.closeAt=(u=r.close_at)!==null&&u!==void 0?u:-1,S.status=(c=IA(r.status))!==null&&c!==void 0?c:Tg.CLOSED,S.messageId=(h=r.message_id)!==null&&h!==void 0?h:0,S.data=(p=r.data)!==null&&p!==void 0?p:null,S.voterCount=(m=r.voter_count)!==null&&m!==void 0?m:-1,S.options=r.options?r.options.map((function(M){return new bC(S._iid,M)})):[],S.createdBy=(_=r.created_by)!==null&&_!==void 0?_:null,S.allowUserSuggestion=(b=r.allow_user_suggestion)!==null&&b!==void 0&&b,S.allowMultipleVotes=(C=r.allow_multiple_votes)!==null&&C!==void 0&&C,S.votedPollOptionIds=(N=r.voted_option_ids)!==null&&N!==void 0?N:[],S}return G(n,t),n.prototype._applyPollUpdatePayload=function(e){var r,i,a,s,o,u,c,h,p=this;this.title=(r=e.title)!==null&&r!==void 0?r:this.title,this.updatedAt=(i=e.updated_at)!==null&&i!==void 0?i:this.updatedAt,this.closeAt=(a=e.close_at)!==null&&a!==void 0?a:this.closeAt,this.status=(s=IA(e.status))!==null&&s!==void 0?s:this.status,this.data=(o=e.data)!==null&&o!==void 0?o:this.data,this.voterCount=(u=e.voter_count)!==null&&u!==void 0?u:this.voterCount,e.options&&(this.options=e.options.map((function(m){return new bC(p._iid,m)})),this.votedPollOptionIds=e.options.filter((function(m){return m.vote_count>0})).map((function(m){return m.id}))),this.allowUserSuggestion=(c=e.allow_user_suggestion)!==null&&c!==void 0?c:this.allowUserSuggestion,this.allowMultipleVotes=(h=e.allow_multiple_votes)!==null&&h!==void 0?h:this.allowMultipleVotes},n.payloadify=function(e){return ze(ht(Z(Z({},t.payloadify.call(this,e)),{id:e.id,title:e.title,created_at:e.createdAt,updated_at:e.updatedAt,close_at:e.closeAt,status:e.status,message_id:e.messageId,data:e.data,voter_count:e.voterCount,options:e.options.map((function(r){return bC.payloadify(r)})),created_by:e.createdBy,allow_user_suggestion:e.allowUserSuggestion,allow_multiple_votes:e.allowMultipleVotes,voted_option_ids:e.votedPollOptionIds})))},n.prototype.applyPollUpdateEvent=function(e){var r=e._payload.poll;return!(!r||this.id!==r.id||r.updated_at<this.updatedAt)&&(this._applyPollUpdatePayload(r),!0)},n.prototype.applyPollVoteEvent=function(e){if(this.id!==e.pollId)return!1;var r=this.options,i=r.map((function(o){return o.id})),a=e._payload,s=Math.floor(a.ts/1e3);return a.updated_vote_counts.forEach((function(o){var u=i.indexOf(o.option_id);if(u>-1){var c=r[u];s>=c._lastVotedAt&&(c.voteCount=o.vote_count,c._lastVotedAt=s)}})),a.req_id&&a.voted_option_ids&&(this.votedPollOptionIds=a.voted_option_ids),typeof a.voter_count=="number"&&(this.voterCount=a.voter_count),!0},n.prototype.serialize=function(){return Pg(this)},n})(wi),wd=(function(){function t(n,e){var r;this.limit=20,this._isLoading=!1,this._hasNext=!0,this._token="",this._iid=n,this.limit=(r=e.limit)!==null&&r!==void 0?r:20}return Object.defineProperty(t.prototype,"hasNext",{get:function(){return this._hasNext},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLoading",{get:function(){return this._isLoading},enumerable:!1,configurable:!0}),t.prototype._validate=function(){return re("number",this.limit)&&this.limit>0},t})(),Ac=(function(t){function n(e,r,i,a){var s=t.call(this,e,a)||this;return s.channelUrl=r,s.channelType=i,s}return G(n,t),n.prototype._validate=function(){return t.prototype._validate.call(this)&&re("string",this.channelUrl)&&dn(yn,this.channelType)},n})(wd),o$=function(t){this.pollId=0,this.messageId=0,this.pollId=t.poll_id,this.messageId=t.message_id,this._payload=t},l$=(function(t){function n(e){var r=e.title,i=e.optionTexts,a=e.data,s=e.allowUserSuggestion,o=e.allowMultipleVotes,u=e.closeAt,c=t.call(this)||this;return c.method=Ie.POST,c.path=Iu,c.params={title:r,options:i,data:a,allow_user_suggestion:s,allow_multiple_votes:o,close_at:u},c}return G(n,t),n})(we),u$=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.poll=new Ul(e,r),i}return G(n,t),n})(xe),c$=(function(t){function n(e){var r=e.channelUrl,i=e.channelType,a=e.pollId,s=t.call(this)||this;return s.method=Ie.GET,s.path="".concat(Iu,"/").concat(encodeURIComponent(a)),s.params={channel_url:r,channel_type:i},s}return G(n,t),n})(we),d$=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.poll=new Ul(e,r),i}return G(n,t),n})(xe),h$=(function(t){function n(e){var r=e.channelUrl,i=e.channelType,a=e.pollId,s=e.pollOptionId,o=t.call(this)||this;return o.method=Ie.GET,o.path="".concat(Iu,"/").concat(encodeURIComponent(a),"/options/").concat(encodeURIComponent(s)),o.params={channel_url:r,channel_type:i},o}return G(n,t),n})(we),f$=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.pollOption=new bC(e,r),i}return G(n,t),n})(xe),v$=(function(t){function n(e){var r=e.channelType,i=e.channelUrl,a=e.timestamp,s=e.token,o=t.call(this)||this;return o.method=Ie.GET,o.path="".concat(Gn(r),"/").concat(encodeURIComponent(i),"/polls/changelogs"),o.params=ze({change_ts:a,token:s}),o}return G(n,t),n})(we),p$=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.updatedPolls=r.updated.map((function(a){return(function(s,o){return new Ul(s,o)})(e,a)})),i.deletedPollIds=r.deleted.map((function(a){return a})),i.hasMore=r.has_more,i.nextToken=r.next,i}return G(n,t),n})(xe),m$={title:"",optionTexts:[],data:void 0,allowUserSuggestion:void 0,allowMultipleVotes:void 0,closeAt:-1},OP=function(t){return re("string",t.title)&&(n=t.optionTexts,hn("string",n)&&n.every((function(e){return e.trim()!==""})))&&RP(t.data)&&re("boolean",t.allowUserSuggestion,!0)&&re("boolean",t.allowMultipleVotes,!0)&&re("number",t.closeAt,!0);var n},g$={channelUrl:"",channelType:yn.BASE,pollId:0,pollOptionId:0},DP=function(t){return re("string",t.channelUrl)&&t.channelUrl!==""&&dn(yn,t.channelType)&&re("number",t.pollId)&&t.pollId>0&&re("number",t.pollOptionId)&&t.pollOptionId>0},_$={channelUrl:"",channelType:yn.BASE,pollId:0},UP=function(t){return re("string",t.channelUrl)&&t.channelUrl!==""&&dn(yn,t.channelType)&&re("number",t.pollId)},QO={},eS=(function(){function t(n,e){var r=e.sdkState,i=e.dispatcher,a=e.sessionManager,s=e.requestQueue,o=e.logger;this._iid=n,this._sdkState=r,this._sessionManager=a,this._requestQueue=s,this._dispatcher=i,this._logger=o,QO[n]=this}return t.of=function(n){return QO[n]},t.prototype.buildPollFromSerializedData=function(n){var e=gd(n);return new Ul(this._iid,Ul.payloadify(e))},t.prototype.get=function(n){return D(this,void 0,void 0,(function(){var e,r;return O(this,(function(i){switch(i.label){case 0:return Ue(UP(n)).throw(ae.invalidParameters),e=new c$(Z({},n)),[4,this._requestQueue.send(e)];case 1:return r=i.sent(),[2,r.as(d$).poll]}}))}))},t.prototype.create=function(n){return D(this,void 0,void 0,(function(){var e,r;return O(this,(function(i){switch(i.label){case 0:return Ue(OP(n)).throw(ae.invalidParameters),e=new l$(Z({},n)),[4,this._requestQueue.send(e)];case 1:return r=i.sent(),[2,r.as(u$).poll]}}))}))},t.prototype.getOption=function(n){return D(this,void 0,void 0,(function(){var e,r;return O(this,(function(i){switch(i.label){case 0:return Ue(DP(n)).throw(ae.invalidParameters),e=new h$(Z({},n)),[4,this._requestQueue.send(e)];case 1:return r=i.sent(),[2,r.as(f$).pollOption]}}))}))},t.prototype.getPollChangeLogs=function(n,e,r,i){return i===void 0&&(i=Se.SYNC_POLL_CHANGELOGS),D(this,void 0,void 0,(function(){var a,s,o,u,c,h,p;return O(this,(function(m){switch(m.label){case 0:return a=new v$(ht({channelType:e,channelUrl:n,timestamp:typeof r=="number"?r:null,token:typeof r=="string"?r:null})),[4,this._requestQueue.send(a)];case 1:return s=m.sent(),o=s.as(p$),u=o.updatedPolls,c=o.deletedPollIds,h=o.hasMore,p=o.nextToken,u.length>0&&this._dispatcher.dispatch(new IP({polls:u,source:i})),[2,{updatedPolls:u,deletedPollIds:c,hasMore:h,token:p}]}}))}))},t})(),y$=(function(t){function n(e){var r=e.channelUrl,i=e.channelType,a=e.token,s=e.limit,o=t.call(this)||this;return o.method=Ie.GET,o.path=Iu,o.params={channel_url:r,channel_type:i,token:a,limit:s},o}return G(n,t),n})(we),E$=(function(t){function n(e,r){var i,a=this;return(a=t.call(this,e,r)||this).polls=((i=r.polls)!==null&&i!==void 0?i:[]).map((function(s){return new Ul(e,s)})),a.token=r.next,a}return G(n,t),n})(xe),xP=(function(t){function n(e,r){return t.call(this,e,r.channelUrl,r.channelType,r)||this}return G(n,t),n.prototype.next=function(){return D(this,void 0,void 0,(function(){var e,r,i,a,s,o;return O(this,(function(u){switch(u.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=te.of(this._iid).requestQueue,r=new y$(Z(Z({},this),{token:this._token})),[4,e.send(r)]):[3,2]:[3,5];case 1:return i=u.sent(),a=i.as(E$),s=a.polls,o=a.token,this._token=o,this._hasNext=!!o,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw ae.queryInProgress;case 4:return[3,6];case 5:throw ae.invalidParameters;case 6:return[2]}}))}))},n})(Ac),b$=(function(t){function n(e){var r=e.channelUrl,i=e.channelType,a=e.pollId,s=e.pollOptionId,o=e.token,u=e.limit,c=t.call(this)||this;return c.method=Ie.GET,c.path="".concat(Iu,"/").concat(encodeURIComponent(a),"/options/").concat(encodeURIComponent(s),"/voters"),c.params={channel_url:r,channel_type:i,token:o,limit:u},c}return G(n,t),n})(we),C$=(function(t){function n(e,r){var i,a=this;return(a=t.call(this,e,r)||this).voters=((i=r.voters)!==null&&i!==void 0?i:[]).map((function(s){return new fn(e,s)})),a.token=r.next,a}return G(n,t),n})(xe),LP=(function(t){function n(e,r){var i=t.call(this,e,r.channelUrl,r.channelType,r)||this;return i.pollId=r.pollId,i.pollOptionId=r.pollOptionId,i}return G(n,t),n.prototype._validate=function(){return t.prototype._validate.call(this)&&re("number",this.pollId)&&re("number",this.pollOptionId)},n.prototype.next=function(){return D(this,void 0,void 0,(function(){var e,r,i,a,s,o;return O(this,(function(u){switch(u.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=te.of(this._iid).requestQueue,r=new b$(Z(Z({},this),{pollId:this.pollId,pollOptionId:this.pollOptionId,token:this._token})),[4,e.send(r)]):[3,2]:[3,5];case 1:return i=u.sent(),a=i.as(C$),s=a.voters,o=a.token,this._token=o,this._hasNext=!!o,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw ae.queryInProgress;case 4:return[3,6];case 5:throw ae.invalidParameters;case 6:return[2]}}))}))},n})(Ac),pp,Rd=(function(){function t(n,e,r){var i,a;this.width=0,this.height=0,this.realWidth=0,this.realHeight=0,this._requireAuth=!1,this._iid=n,this.plainUrl=e.url,this.width=e.width,this.height=e.height,this.realWidth=(i=e.real_width)!==null&&i!==void 0?i:e.width,this.realHeight=(a=e.real_height)!==null&&a!==void 0?a:e.height,this._requireAuth=r}return t.payloadify=function(n){return ze(ht(n instanceof t?{url:n.plainUrl,width:n.width,height:n.height,real_width:n.realWidth,real_height:n.realHeight}:{url:"",width:n.maxWidth,height:n.maxHeight,real_width:0,real_height:0}))},Object.defineProperty(t.prototype,"url",{get:function(){var n=te.of(this._iid).sessionManager;return this._requireAuth&&n.ekey?"".concat(this.plainUrl,"?auth=").concat(n.ekey):this.plainUrl},enumerable:!1,configurable:!0}),t})(),tS=(function(t){function n(e){var r=t.call(this)||this;if(r.method=Ie.POST,r.path="".concat(hj),r.params=ze({file:e.file,channel_url:e.channelUrl}),e.thumbnailSizes)for(var i=0;i<e.thumbnailSizes.length;i++){var a=e.thumbnailSizes[i],s=a.maxWidth,o=a.maxHeight;r.params["thumbnail".concat(i+1)]="".concat(s,",").concat(o)}return r.requestId=e.requestId,r}return G(n,t),n})(we),nS=(function(t){function n(e,r){var i,a,s,o,u=this;return(u=t.call(this,e,r)||this).url=r.url,u.fileSize=(i=r.file_size)!==null&&i!==void 0?i:0,u.thumbnails=(s=(a=r.thumbnails)===null||a===void 0?void 0:a.map((function(c){return new Rd(e,c,!1)})))!==null&&s!==void 0?s:[],u.requireAuth=(o=r.require_auth)!==null&&o!==void 0&&o,u}return G(n,t),n})(xe),rS=(function(t){function n(e,r){var i,a,s,o,u,c=this;return(c=t.call(this,e)||this).replyCount=0,c.memberCount=0,c.lastRepliedAt=0,c.updatedAt=0,c.replyCount=(i=r.reply_count)!==null&&i!==void 0?i:0,c.memberCount=(a=r.member_count)!==null&&a!==void 0?a:0,c.mostRepliedUsers=r.most_replies&&hn("object",r.most_replies)?r.most_replies.map((function(h){return new fn(c._iid,h)})):[],c.unreadReplyCount=(s=r.unread_message_count)!==null&&s!==void 0?s:0,c.isPushNotificationEnabled=typeof r.push_enabled=="number"?r.push_enabled>0:void 0,c.lastRepliedAt=(o=r.last_replied_at)!==null&&o!==void 0?o:0,c.updatedAt=(u=r.updated_at)!==null&&u!==void 0?u:0,c}return G(n,t),n.payloadify=function(e){return ze(ht(Z(Z({},t.payloadify.call(this,e)),{reply_count:e.replyCount,unread_message_count:e.unreadReplyCount,member_count:e.memberCount,most_replies:Array.isArray(e.mostRepliedUsers)?e.mostRepliedUsers.map((function(r){return fn.payloadify(r)})):[],push_enabled:typeof e.isPushNotificationEnabled=="boolean"?e.isPushNotificationEnabled?1:0:void 0,last_replied_at:e.lastRepliedAt,updated_at:e.updatedAt})))},Object.defineProperty(n.prototype,"_isUpdateRequired",{get:function(){return this.unreadReplyCount===void 0||this.isPushNotificationEnabled===void 0},enumerable:!1,configurable:!0}),n.prototype._updateFrom=function(e){var r,i;this.unreadReplyCount=(r=e.unreadReplyCount)!==null&&r!==void 0?r:this.unreadReplyCount,this.isPushNotificationEnabled=(i=e.isPushNotificationEnabled)!==null&&i!==void 0?i:this.isPushNotificationEnabled},n})(wi);(function(t){t.ADD="add",t.DELETE="delete"})(pp||(pp={}));var Vh,Iw=function(t){var n;this.messageId=0,this.operation=null,this.updatedAt=0;var e=re("string",t.msg_id)?parseInt(t.msg_id):t.msg_id,r=t.user_id,i=t.operation?t.operation.toLowerCase():null,a=t.reaction,s=t.updated_at,o=t.count,u=t.sampled_user_ids,c=(n=t.sampled_user_info)!==null&&n!==void 0?n:{};e&&re("string",r)&&re("string",i)&&dn(pp,i)&&re("string",a)&&a&&re("number",s)&&(this.messageId=e,this.userId=r,this.key=a,this.operation=i,this.updatedAt=s,this._count=o,this._sampledUserIds=u,this._sampledUserInfoList=c)},rN=(function(t){function n(e,r,i){var a,s=this;return(s=t.call(this,e)||this).userId=r,s.nickname=i.nickname,s.plainProfileUrl=i.profile_url,s.requireAuth=(a=i.require_auth_for_profile_image)!==null&&a!==void 0&&a,s}return G(n,t),Object.defineProperty(n.prototype,"profileUrl",{get:function(){var e=te.of(this._iid).sessionManager;return this.requireAuth&&e.ekey?"".concat(this.plainProfileUrl,"?auth=").concat(e.ekey):this.plainProfileUrl},enumerable:!1,configurable:!0}),n.payloadify=function(e){return{nickname:e.nickname,profile_url:e.plainProfileUrl,require_auth_for_profile_image:e.requireAuth}},n})(wi),P0=(function(t){function n(e,r){var i,a,s,o,u,c,h,p,m,_=this;(_=t.call(this,e)||this)._sampledUserInfoList=[],_._count=0,_._hasCurrentUserReacted=!1;var b=r.key,C=wt([],dt((o=(s=r.sampled_user_ids)!==null&&s!==void 0?s:r.user_ids)!==null&&o!==void 0?o:[]),!1),N=(c=(u=r.last_ts)!==null&&u!==void 0?u:r.updated_at)!==null&&c!==void 0?c:0,S=(h=r.is_self_included)!==null&&h!==void 0?h:C.includes(te.of(e).sdkState.userId),M=(p=r.sampled_user_info)!==null&&p!==void 0?p:{};re("string",b)&&b&&hn("string",C)&&C.length>0&&re("number",N)&&(_.key=b,_._sampledUserIds=C,_._updatedAt=N,_._count=(m=r.count)!==null&&m!==void 0?m:C.length,_._hasCurrentUserReacted=S,Object.keys(M).forEach((function(P){_._sampledUserInfoList.push(new rN(e,P,M[P]))})));var w={};try{for(var U=Fe(_.sampledUserIds),L=U.next();!L.done;L=U.next())w[L.value]=_.updatedAt}catch(P){i={error:P}}finally{try{L&&!L.done&&(a=U.return)&&a.call(U)}finally{if(i)throw i.error}}return _._version=w,_}return G(n,t),Object.defineProperty(n.prototype,"isEmpty",{get:function(){return this._count===0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"userIds",{get:function(){return this._sampledUserIds},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"sampledUserIds",{get:function(){return this._sampledUserIds},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"sampledUserInfoList",{get:function(){return this._sampledUserInfoList},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"count",{get:function(){return this._count},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"updatedAt",{get:function(){return this._updatedAt},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hasCurrentUserReacted",{get:function(){return this._hasCurrentUserReacted},enumerable:!1,configurable:!0}),n.payloadify=function(e){var r={};return e._sampledUserInfoList.forEach((function(i){r[i.userId]=rN.payloadify(i)})),ze(ht({key:e.key,sampled_user_ids:e._sampledUserIds,sampled_user_info:r,count:e._count,is_self_included:e._hasCurrentUserReacted,last_ts:e._updatedAt}))},n.prototype.applyEvent=function(e){var r=this;if(e.key===this.key&&this.updatedAt<=e.updatedAt)if(e._sampledUserIds)this._sampledUserIds=e._sampledUserIds,this._sampledUserInfoList=[],Object.keys(e._sampledUserInfoList).forEach((function(a){r._sampledUserInfoList.push(new rN(r._iid,a,e._sampledUserInfoList[a]))})),this._count=e._count,e._hasCurrentUserReacted!==void 0&&(this._hasCurrentUserReacted=e._hasCurrentUserReacted),this._updatedAt=e.updatedAt;else{if(!this._version[e.userId]||this._version[e.userId]<=e.updatedAt){var i=this._sampledUserIds.indexOf(e.userId);switch(e.operation){case pp.ADD:i<0&&this._sampledUserIds.push(e.userId);break;case pp.DELETE:i>=0&&this._sampledUserIds.splice(i,1)}this._count=this._sampledUserIds.length,this._version[e.userId]=e.updatedAt}this._updatedAt=Math.max(this.updatedAt,e.updatedAt)}},n})(wi),XO=(function(){function t(n){this.secureUrl=null,this.type=null,this.width=0,this.height=0,this.alt=null,this.url=n.url,n.secure_url&&(this.secureUrl=n.secure_url),n.type&&(this.type=n.type),n.width&&(this.width=n.width),n.height&&(this.height=n.height),n.alt&&(this.alt=n.alt)}return t.payloadify=function(n){var e,r;return ze(ht({url:n.url,secure_url:n.secureUrl,type:n.type,width:(e=n.width)!==null&&e!==void 0?e:0,height:(r=n.height)!==null&&r!==void 0?r:0,alt:n.alt}))},t})(),ZO=(function(){function t(n){this.title=null,this.url=null,this.description=null,this.defaultImage=null,n["og:title"]&&(this.title=n["og:title"]),n["og:url"]&&(this.url=n["og:url"]),n["og:description"]&&(this.description=n["og:description"]),n["og:image"]&&(this.defaultImage=new XO(n["og:image"]))}return t.payloadify=function(n){return ze(ht({"og:title":n.title,"og:url":n.url,"og:description":n.description,"og:image":n.defaultImage?XO.payloadify(n.defaultImage):null}))},t})(),xl=(function(){function t(n){var e,r;this.volume=0,this.name=(e=n.name)!==null&&e!==void 0?e:"default",this.volume=(r=n.volume)!==null&&r!==void 0?r:1}return t.prototype.serialize=function(){return{name:this.name,volume:this.volume}},t.payloadify=function(n){return ze(ht({name:n.name,volume:n.volume}))},t})();(function(t){t.GOOD="good",t.BAD="bad"})(Vh||(Vh={}));var cd=(function(){function t(n){this.id=n.id,this.rating=n.rating,this.comment=n.comment}return t._getStatus=function(n){return n?"id"in n?"SUBMITTED":"NO_FEEDBACK":"NOT_APPLICABLE"},t._isSubmitted=function(n){return t._getStatus(n)==="SUBMITTED"},t._getPayloadByStatus=function(n){return n==="NO_FEEDBACK"?{}:null},t.payloadify=function(n){return ze(ht({id:n.id,rating:n.rating,comment:n.comment}))},t})(),Ng=(function(t){function n(e,r){var i,a=this;return(a=t.call(this,e,r)||this).isBlockedByMe=!1,a.role=dn(nl,r.role)?r.role:nl.NONE,a.isBlockedByMe=(i=r.is_blocked_by_me)!==null&&i!==void 0&&i,a}return G(n,t),n.payloadify=function(e){return ze(ht(Z(Z({},t.payloadify.call(this,e)),{role:e.role,is_blocked_by_me:e.isBlockedByMe})))},n})(fn),_a=(function(){function t(n){this.key=n.key,this.value=hn("string",n.value)?wt([],dt(n.value),!1):[]}return t.payloadify=function(n){var e;return ze(ht({key:n.key,value:(e=n.value)!==null&&e!==void 0?e:[]}))},t})(),kP=function(t){switch(t){case br.BASE:return"";case br.USER:return"MESG";case br.FILE:return"FILE";case br.ADMIN:return"ADMM"}},PP=(function(t){function n(e,r){var i,a,s,o,u,c,h,p,m,_=this;(_=t.call(this,e)||this).channelType=yn.BASE,_.messageType=br.BASE,_.mentionType=null,_.mentionedUsers=null,_.mentionedUserIds=null,_.metaArrays=[],_.extendedMessage={},_.createdAt=0,_.updatedAt=0,_.channelUrl=r.channel_url,_.channelType=dn(yn,r.channel_type)?r.channel_type:yn.GROUP,r.channel&&(r.channel.channel_url&&(_.channelUrl=r.channel.channel_url),r.channel.channel_type&&(_.channelType=r.channel.channel_type)),_.data=(i=r.data)!==null&&i!==void 0?i:"",_.customType=(a=r.custom_type)!==null&&a!==void 0?a:"",_.mentionType=dn(Oa,r.mention_type)?r.mention_type:null,_.mentionedUsers=r.mentioned_users?r.mentioned_users.map((function(M){return new fn(_._iid,M)})):null,_.mentionedUserIds=(s=r.mentioned_user_ids)!==null&&s!==void 0?s:null,_.mentionedUsers&&!_.mentionedUserIds&&(_.mentionedUserIds=_.mentionedUsers.map((function(M){return M.userId})));var b=(o=r.metaarray)!==null&&o!==void 0?o:{},C=(u=r.metaarray_key_order)!==null&&u!==void 0?u:Object.keys(b).sort((function(M,w){return M.localeCompare(w)}));_.metaArrays=[];for(var N=0;N<C.length;N++){var S=C[N];_.metaArrays.push(new _a({key:S,value:b[S]||[]}))}return r.sorted_metaarray&&(_.metaArrays=r.sorted_metaarray.map((function(M){return new _a(M)}))),_.extendedMessage=(c=r.extended_message)!==null&&c!==void 0?c:{},_.extendedMessagePayload=r.extended_message_payload,_.createdAt=(p=(h=r.created_at)!==null&&h!==void 0?h:r.ts)!==null&&p!==void 0?p:0,_.updatedAt=(m=r.updated_at)!==null&&m!==void 0?m:0,_}return G(n,t),n.payloadify=function(e){var r,i;return ze(ht(Z(Z({},t.payloadify.call(this,e)),{channel_url:e.channelUrl,channel_type:e.channelType,type:kP(e.messageType),data:e.data,custom_type:e.customType,mention_type:e.mentionType,mentioned_user_ids:e.mentionedUserIds,mentioned_users:(r=e.mentionedUsers)===null||r===void 0?void 0:r.map((function(a){return fn.payloadify(a)})),sorted_metaarray:(i=e.metaArrays)===null||i===void 0?void 0:i.map((function(a){return _a.payloadify(a)})),extended_message:e.extendedMessage,extended_message_payload:e.extendedMessagePayload,created_at:e.createdAt,updated_at:e.updatedAt})))},n.prototype.isIdentical=function(e){return!0},n.prototype.isEqual=function(e){return xk(this,e)},n.prototype.isUserMessage=function(){return this.messageType===br.USER},n.prototype.isFileMessage=function(){return this.messageType===br.FILE&&!Object.prototype.hasOwnProperty.call(this,"fileInfoList")},n.prototype.isMultipleFilesMessage=function(){return this.messageType===br.FILE&&Object.prototype.hasOwnProperty.call(this,"fileInfoList")},n.prototype.isAdminMessage=function(){return this.messageType===br.ADMIN},n.prototype.serialize=function(){return Pg(this)},n.prototype.getMetaArraysByKeys=function(e){return this.metaArrays.filter((function(r){return e.includes(r.key)}))},n})(wi),FP=(function(t){function n(e,r){var i,a,s,o=this;return(o=t.call(this,e)||this).channelUrl=(i=r.channel_url)!==null&&i!==void 0?i:"",o.channelType=(a=r.channel_type)!==null&&a!==void 0?a:yn.GROUP,o.reader=new fn(o._iid,r.user),o.readAt=r.ts,o.isExcluded=(s=r.is_excluded)!==null&&s!==void 0&&s,o}return G(n,t),n})(wi),S$=(function(t){function n(e){var r=e.channelUrl;return t.call(this,{code:"READ",ackRequired:!0,payload:{channel_url:r}})||this}return G(n,t),n})(Ra),T$=(function(t){function n(e){var r=t.call(this)||this,i=e.channelUrl,a=e.channelType,s=e.userId,o=e.notificationIds,u=e.messageId,c=e.isExcluded,h=e.uniqueId;return r.method=Ie.PUT,r.path="".concat(Gn(a),"/").concat(encodeURIComponent(i),"/messages/mark_as_read"),r.params=ze(ht({user_id:s,message_ids:o,message_id:u,is_excluded:c,unique_id:h})),r}return G(n,t),n})(we),BP=(function(t){function n(e,r,i){var a=t.call(this,e,"READ",i)||this;return a.readStatus=new FP(e,i),a}return G(n,t),n})(Rr),N$=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.readAt=r.ts,i.unreadMessageCount=r.unread_message_count,i.totalUnreadCount=r.total_unread_count,i.channelUrl=r.channel_url,i.userId=r.user_id,i.isExcluded=r.is_excluded,i.uniqueId=r.unique_id,i}return G(n,t),n})(xe),A$=(function(t){function n(e){var r=e.channelUrl,i=e.messageId;return t.call(this,{code:"READ",ackRequired:!0,payload:{channel_url:r,parent_message_id:i}})||this}return G(n,t),n})(Ra),M$=(function(t){function n(e){var r=e.channelType,i=e.channelUrl,a=e.messageId,s=e.pushEnabled,o=t.call(this)||this;return o.method=Ie.PUT,o.path="".concat(Gn(r),"/").concat(encodeURIComponent(i),"/messages/").concat(a,"/thread_push"),o.params={push_enabled:s},o}return G(n,t),n})(we);(function(t){function n(e,r){return t.call(this,e,r)||this}G(n,t)})(xe);var I$=(function(t){function n(e){var r=e.channelType,i=e.channelUrl,a=e.messageId,s=e.rating,o=e.comment,u=t.call(this)||this;return u.method=Ie.POST,u.path="".concat(Gn(r),"/").concat(encodeURIComponent(i),"/messages/").concat(a,"/feedbacks"),u.params={rating:s,comment:o},u}return G(n,t),n})(we),w$=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.feedback=new cd(r),i}return G(n,t),n})(xe),R$=(function(t){function n(e){var r=e.channelType,i=e.channelUrl,a=e.messageId,s=e.feedbackId,o=e.rating,u=e.comment,c=t.call(this)||this;return c.method=Ie.PUT,c.path="".concat(Gn(r),"/").concat(encodeURIComponent(i),"/messages/").concat(a,"/feedbacks/").concat(s),c.params={rating:o,comment:u},c}return G(n,t),n})(we),O$=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.feedback=new cd(r),i}return G(n,t),n})(xe),D$=(function(t){function n(e){var r=e.channelType,i=e.channelUrl,a=e.messageId,s=e.feedbackId,o=t.call(this)||this;return o.method=Ie.DELETE,o.path="".concat(Gn(r),"/").concat(encodeURIComponent(i),"/messages/").concat(a,"/feedbacks/").concat(s),o}return G(n,t),n})(we);(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.feedback=new cd(r),i}G(n,t)})(xe);var zv,JO,wA=(function(t){function n(e,r){var i,a,s,o,u,c=this;return(c=t.call(this,e)||this).plainUrl="",c.fileName=null,c.mimeType=null,c.fileSize=0,c.thumbnails=[],c._requireAuth=!1,c.plainUrl=(i=r.url)!==null&&i!==void 0?i:"",c.fileName=(a=r.file_name)!==null&&a!==void 0?a:null,c.mimeType=(s=r.file_type)!==null&&s!==void 0?s:null,c.fileSize=(o=r.file_size)!==null&&o!==void 0?o:0,c._requireAuth=(u=r.require_auth)!==null&&u!==void 0&&u,c.thumbnails=r.thumbnails?r.thumbnails.map((function(h){var p;return new Rd(c._iid,typeof h=="string"?{url:h,width:0,height:0}:Z(Z({},h),{url:((p=h.url)!==null&&p!==void 0?p:"").split("auth=")[0]}),c._requireAuth)})):[],c}return G(n,t),n.payloadify=function(e){var r;return ze(ht({url:e.plainUrl,file_name:e.fileName,file_type:e.mimeType,file_size:e.fileSize,thumbnails:(r=e.thumbnails)===null||r===void 0?void 0:r.map((function(i){var a;return{url:((a=i.plainUrl)!==null&&a!==void 0?a:"").split("auth=")[0],width:i.width,height:i.height,real_width:i.realWidth,real_height:i.realHeight}})),require_auth:e._requireAuth}))},Object.defineProperty(n.prototype,"url",{get:function(){var e=te.of(this._iid).sessionManager;return this._requireAuth&&e.ekey?"".concat(this.plainUrl,"?auth=").concat(e.ekey):this.plainUrl},enumerable:!1,configurable:!0}),n})(wi),HP=function(t){var n=t.channelUrl,e=t.channelType,r=t.parentMessage;this.channelUrl=n,this.channelType=e,this.parentMessage=r};(function(t){t.NUMBER="number",t.ENUM="enum",t.TEXT="text",t.REGEX="regex",t.DECIMAL_PLACE="decimal_place"})(zv||(zv={})),(function(t){t.TEXT="text",t.TEXTAREA="textarea",t.NUMBER="number",t.PHONE="phone",t.EMAIL="email",t.CHIP="chip"})(JO||(JO={}));var Kh,Jo,eD=(function(){function t(n,e){var r=e.id,i=e.name,a=e.items,s=e.version,o=e.is_submitted;this.messageId=n,this.id=r,this.name=i,this.items=a.map((function(u){return new tD(u)})).sort((function(u,c){return u.sortOrder-c.sortOrder})),this.version=s??1,this._isSubmitted=o}return Object.defineProperty(t.prototype,"isSubmitted",{get:function(){var n;return(n=this._isSubmitted)!==null&&n!==void 0?n:this.items.some((function(e){return Array.isArray(e.submittedValues)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSubmittable",{get:function(){return this.items.every((function(n){return n.required?!!(Array.isArray(n.draftValues)&&n.draftValues.length>0)&&n.isValid(n.draftValues):!(Array.isArray(n.draftValues)&&n.draftValues.length>0)||n.isValid(n.draftValues)}))},enumerable:!1,configurable:!0}),t.payloadify=function(n){return ze(ht({id:n.id,name:n.name,items:n.items.map((function(e){return tD.payloadify(e)})),version:n.version,is_submitted:n._isSubmitted}))},t.isMessageFormPayload=function(n){return!!n?.message_form},t})(),tD=(function(){function t(n){var e=n.id,r=n.name,i=n.required,a=n.sort_order,s=n.placeholder,o=n.style,u=n.item_type,c=n.validators,h=n.value,p=n.values;this.id=e,this.name=r,this.required=i,this.sortOrder=a,this.placeholder=s,Object.keys(o).length===0?this.style={layout:u}:this.style=ze({layout:o.layout,options:o.options,defaultOptions:o.default_options,resultCount:o.result_count}),p?this.submittedValues=p:h&&(this.submittedValues=[h]),this._validators=c}return t.prototype.isValid=function(n){var e=this;return n.every((function(r){var i=(function(a,s){return s.every((function(o){switch(o.key){case zv.NUMBER:var u=Number(a);return!(isNaN(u)||o.min&&typeof o.min!="number"||o.max&&typeof o.max!="number"||typeof o.min=="number"&&u<o.min||typeof o.max=="number"&&u>o.max);case zv.ENUM:return typeof a=="string"&&(!(o.enums&&Array.isArray(o.enums)&&o.enums.length>0&&!o.enums.includes(a))||o.allow_other);case zv.TEXT:return!(typeof a!="string"||typeof o.min_length=="number"&&a.length<o.min_length||typeof o.max_length=="number"&&a.length>o.max_length);case zv.REGEX:return!(typeof a!="string"||o.regex&&(typeof o.regex!="string"||!new RegExp(o.regex).test(a)));case zv.DECIMAL_PLACE:return a.length!==0&&(u=Number(a),!(isNaN(u)||(!o.max_decimal_place||typeof o.max_decimal_place=="number")&&o.max_decimal_place&&!(function(c,h){var p=c.toString(),m=p.indexOf(".");return m===-1||p.slice(m+1).length<=h})(u,o.max_decimal_place)));default:return!0}}))})(r,e._validators);return i}))},t.payloadify=function(n){return ze(ht({id:n.id,name:n.name,required:n.required,sort_order:n.sortOrder,placeholder:n.placeholder,style:ze({layout:n.style.layout,options:n.style.options,default_options:n.style.defaultOptions,result_count:n.style.resultCount}),item_type:n.style.layout,validators:n._validators,values:n.submittedValues}))},t})(),U$=(function(t){function n(e){var r=t.call(this)||this;return r.method=Ie.POST,r.path="".concat(bj,"/").concat(e.formId,"/submit"),r.params=ze({message_id:e.messageId,items:e.items}),r}return G(n,t),n})(we);(function(t){t.PENDING="pending",t.SENT="sent",t.FAILED="failed",t.CANCELED="canceled"})(Kh||(Kh={})),(function(t){t.PENDING="pending",t.IN_QUEUE="in_queue",t.SENT="sent",t.FAILED="failed",t.CANCELED="canceled",t.REMOVED="removed"})(Jo||(Jo={}));var rp,ja=(function(t){function n(e,r){var i,a,s,o,u,c,h,p,m,_=this;return(_=t.call(this,e,r)||this).parentMessage=null,_.silent=!1,_.isOperatorMessage=!1,_.threadInfo=null,_.reactions=[],_.appleCriticalAlertOptions=null,_.scheduledInfo=null,_.suggestedReplies=null,_.myFeedback=null,_.myFeedbackStatus="NOT_APPLICABLE",_.messageForm=null,_._isContinuousMessages=!1,_._scheduledStatus=null,_._poll=null,_.messageId=(a=(i=r.msg_id)!==null&&i!==void 0?i:r.message_id)!==null&&a!==void 0?a:0,_.parentMessageId=(s=typeof r.parent_message_id=="string"?parseInt(r.parent_message_id):r.parent_message_id)!==null&&s!==void 0?s:0,_.threadInfo=r.thread_info?new rS(_._iid,r.thread_info):null,r.reactions_summary?_.reactions=r.reactions_summary.map((function(b){return new P0(e,b)})):r.reactions?_.reactions=r.reactions.map((function(b){return new P0(e,b)})):_.reactions=[],_.ogMetaData=r.og_tag?new ZO(r.og_tag):null,_.silent=(o=r.silent)!==null&&o!==void 0&&o,_.isOperatorMessage=(u=r.is_op_msg)!==null&&u!==void 0&&u,_.appleCriticalAlertOptions=r.apple_critical_alert_options?new xl(r.apple_critical_alert_options):null,typeof r.scheduled_message_id=="number"&&typeof r.scheduled_at=="number"&&r.scheduled_status&&(_.scheduledInfo={scheduledMessageId:r.scheduled_message_id,scheduledAt:r.scheduled_at},_._scheduledStatus=r.scheduled_status),_._isContinuousMessages=(c=r.is_continuous_messages)!==null&&c!==void 0&&c,_.myFeedback=cd._isSubmitted(r.feedback)?new cd(r.feedback):null,_.myFeedbackStatus=cd._getStatus(r.feedback),_.suggestedReplies=(p=(h=r.extended_message_payload)===null||h===void 0?void 0:h.suggested_replies)!==null&&p!==void 0?p:null,_.messageForm=eD.isMessageFormPayload(r.extended_message_payload)?new eD(_.messageId,r.extended_message_payload.message_form):null,_.message=(m=r.message)!==null&&m!==void 0?m:"",_._poll=r.poll?new Ul(_._iid,r.poll):null,_}return G(n,t),n.payloadify=function(e){var r,i;return ze(ht(Z(Z({},t.payloadify.call(this,e)),{message_id:e.messageId,parent_message_id:e.parentMessageId,thread_info:e.threadInfo?rS.payloadify(e.threadInfo):null,reactions_summary:e.reactions.map((function(a){return P0.payloadify(a)})),og_tag:e.ogMetaData?ZO.payloadify(e.ogMetaData):null,silent:e.silent,is_op_msg:e.isOperatorMessage,apple_critical_alert_options:e.appleCriticalAlertOptions?xl.payloadify(e.appleCriticalAlertOptions):null,scheduled_message_id:(r=e.scheduledInfo)===null||r===void 0?void 0:r.scheduledMessageId,scheduled_at:(i=e.scheduledInfo)===null||i===void 0?void 0:i.scheduledAt,scheduled_status:e._scheduledStatus,feedback:e.myFeedback?cd.payloadify(e.myFeedback):cd._getPayloadByStatus(e.myFeedbackStatus),message:e.message,poll:e._poll?Ul.payloadify(e._poll):null})))},n._getParentMessageInfoPayload=function(e){var r={type:kP(e.messageType),ts:e.createdAt,user:e.sender?Ng.payloadify(e.sender):null,message:e.message,data:e.data,custom_type:e.customType};switch(e.messageType){case br.USER:return ze(ht(Z(Z({},r),{translations:e.translations})));case br.FILE:return ze(ht(Z(Z({},r),{file:{url:e.plainUrl,name:e.name,type:e.type,require_auth:e.requireAuth},files:Array.isArray(e.fileInfoList)?e.fileInfoList.map((function(i){return wA.payloadify(i)})):null})));case br.ADMIN:return ze(ht(Z(Z({},r),{translations:e.translations})));default:return ze(ht(Z({},r)))}},n.prototype.isIdentical=function(e){return this.messageId===e.messageId},n.prototype.applyThreadInfoUpdateEvent=function(e){return this.messageId===e.targetMessageId&&(e.threadInfo._isUpdateRequired&&this.threadInfo&&e.threadInfo._updateFrom(this.threadInfo),this.threadInfo=e.threadInfo,!0)},n.prototype._findReactionIndex=function(e){for(var r=0;r<this.reactions.length;r++)if(this.reactions[r].key===e)return r;return-1},n.prototype.applyReactionEvent=function(e){var r=te.of(this._iid).sdkState;if(this.messageId===e.messageId)switch(e.operation){case pp.ADD:e.userId===r.userId&&(e._hasCurrentUserReacted=!0),(i=this._findReactionIndex(e.key))!==-1?this.reactions[i].applyEvent(e):e._sampledUserIds?this.reactions.push(new P0(this._iid,{key:e.key,sampled_user_ids:e._sampledUserIds,sampled_user_info:e._sampledUserInfoList,count:e._count,is_self_included:e._hasCurrentUserReacted,last_ts:e.updatedAt})):this.reactions.push(new P0(this._iid,{key:e.key,user_ids:[e.userId],updated_at:e.updatedAt}));break;case pp.DELETE:var i;(i=this._findReactionIndex(e.key))!==-1&&(e._sampledUserIds?e._count===0?this.reactions.splice(i,1):(e.userId===r.userId&&(e._hasCurrentUserReacted=!1),this.reactions[i].applyEvent(e)):(this.reactions[i].applyEvent(e),this.reactions[i].isEmpty&&this.reactions.splice(i,1)))}},n.prototype.applyParentMessage=function(e){if(!this.parentMessage)return this.parentMessage=e,!0;if(this.parentMessageId===e.messageId){var r=this.parentMessage.updatedAt;if(e.updatedAt>=r)return this.parentMessage=e,!0}return!1},n.prototype.applyPoll=function(e){return!(this._poll&&this._poll.id===e.id&&this._poll.updatedAt>e.updatedAt)&&(this._poll=e,!0)},Object.defineProperty(n.prototype,"poll",{get:function(){return this._poll},enumerable:!1,configurable:!0}),n.prototype._triggerThreadInfoUpdatedEvent=function(){return D(this,void 0,void 0,(function(){var e;return O(this,(function(r){return(e=te.of(this._iid).dispatcher).dispatch(new HP({channelType:yn.GROUP,channelUrl:this.channelUrl,parentMessage:this})),e.dispatch(new Br({messages:[this],source:Se.EVENT_MESSAGE_THREADINFO_UPDATED})),[2]}))}))},n.prototype.markThreadAsRead=function(){return D(this,void 0,void 0,(function(){var e,r;return O(this,(function(i){switch(i.label){case 0:return e=te.of(this._iid).requestQueue,r=new A$({channelUrl:this.channelUrl,messageId:this.messageId}),[4,e.send(r)];case 1:return i.sent(),this.threadInfo&&this.threadInfo.unreadReplyCount!==0?(this.threadInfo.unreadReplyCount=0,[4,this._triggerThreadInfoUpdatedEvent()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))},n.prototype.setPushNotificationEnabled=function(e){return D(this,void 0,void 0,(function(){var r,i;return O(this,(function(a){switch(a.label){case 0:return r=te.of(this._iid).requestQueue,i=new M$({channelUrl:this.channelUrl,channelType:this.channelType,messageId:this.messageId,pushEnabled:e}),[4,r.send(i)];case 1:return a.sent(),this.threadInfo&&this.threadInfo.isPushNotificationEnabled!==e&&(this.threadInfo.isPushNotificationEnabled=e),[2]}}))}))},n.prototype.submitMessageForm=function(e){return D(this,void 0,void 0,(function(){var r,i,a,s,o;return O(this,(function(u){switch(u.label){case 0:if(r=te.of(this._iid).requestQueue,i=null,a=null,s=this.messageForm,!e&&s){if(!s.isSubmittable)throw new ae({code:et.INVALID_PARAMETER,message:"The form is not submittable. Please check all form items are valid before submitting."});if(s.isSubmitted)throw new ae({code:et.INVALID_PARAMETER,message:"The form has already been submitted."});i=s.id,a=s.items.reduce((function(c,h){return c.push({form_item_id:h.id,values:Array.isArray(h.draftValues)?h.draftValues:[]}),c}),[])}else e&&(i=e.formId,a=Object.entries(e.answers).reduce((function(c,h){var p=dt(h,2),m=p[0],_=p[1],b=Number(m);if(Number.isNaN(b))throw new ae({code:et.INVALID_PARAMETER,message:"Keys in answers must be numeric string."});return c.push({form_item_id:b,value:_}),c}),[]));if(!i||!a)throw new ae({code:et.INVALID_PARAMETER,message:"Missing one or more required inputs: formId, answers."});return o=new U$({messageId:this.messageId,formId:i,items:a}),[4,r.send(o)];case 1:return u.sent(),[2]}}))}))},n.prototype.submitFeedback=function(e){return D(this,void 0,void 0,(function(){var r,i,a,s,o,u;return O(this,(function(c){switch(c.label){case 0:return r=te.of(this._iid),i=r.requestQueue,a=r.dispatcher,s=new I$({channelUrl:this.channelUrl,channelType:this.channelType,messageId:this.messageId,rating:e.rating,comment:e.comment}),[4,i.send(s)];case 1:return o=c.sent(),u=o.as(w$),this.myFeedback=u.feedback,this.myFeedbackStatus="SUBMITTED",a.dispatch(new Br({messages:[this],source:Se.EVENT_MESSAGE_FEEDBACK_ADDED})),[2]}}))}))},n.prototype.updateFeedback=function(e){return D(this,void 0,void 0,(function(){var r,i,a,s,o,u;return O(this,(function(c){switch(c.label){case 0:return r=te.of(this._iid),i=r.requestQueue,a=r.dispatcher,s=new R$({channelUrl:this.channelUrl,channelType:this.channelType,messageId:this.messageId,feedbackId:e.id,rating:e.rating,comment:e.comment}),[4,i.send(s)];case 1:return o=c.sent(),u=o.as(O$),this.myFeedback=u.feedback,this.myFeedbackStatus="SUBMITTED",a.dispatch(new Br({messages:[this],source:Se.EVENT_MESSAGE_FEEDBACK_UPDATED})),[2]}}))}))},n.prototype.deleteFeedback=function(e){return D(this,void 0,void 0,(function(){var r,i,a,s;return O(this,(function(o){switch(o.label){case 0:return r=te.of(this._iid),i=r.requestQueue,a=r.dispatcher,s=new D$({channelUrl:this.channelUrl,channelType:this.channelType,messageId:this.messageId,feedbackId:e}),[4,i.send(s)];case 1:return o.sent(),this.myFeedback=null,this.myFeedbackStatus="NO_FEEDBACK",a.dispatch(new Br({messages:[this],source:Se.EVENT_MESSAGE_FEEDBACK_DELETED})),[2]}}))}))},n})(PP),ai=(function(t){function n(e,r){var i,a,s,o,u=this;if((u=t.call(this,e,r)||this).reqId="",u.replyToChannel=!1,u.errorCode=0,u.sender=r.user?new Ng(u._iid,r.user):r.sender_id,u.reqId=(a=(i=r.req_id)!==null&&i!==void 0?i:r.request_id)!==null&&a!==void 0?a:"",u.replyToChannel=(s=r.is_reply_to_channel)!==null&&s!==void 0&&s,r.request_state&&dn(Tn,r.request_state)&&(u.sendingStatus=r.request_state),!u.sendingStatus)if(u.messageId>0)u.sendingStatus=Tn.SUCCEEDED;else if(u.scheduledInfo)switch(r.scheduled_status&&(u._scheduledStatus=r.scheduled_status),r.scheduled_status){case Jo.SENT:case Jo.IN_QUEUE:u.sendingStatus=Tn.SUCCEEDED;break;case Jo.PENDING:u.sendingStatus=Tn.SCHEDULED;break;case Jo.FAILED:case Jo.REMOVED:u.sendingStatus=Tn.FAILED;break;case Jo.CANCELED:u.sendingStatus=Tn.CANCELED}else u.sendingStatus=Tn.PENDING;return u.errorCode=(o=r.error_code)!==null&&o!==void 0?o:0,u._messageToken=r.mesg_token,u}return G(n,t),n.payloadify=function(e){return ze(ht(Z(Z({},t.payloadify.call(this,e)),{user:Ng.payloadify(e.sender),req_id:e.reqId,is_reply_to_channel:e.replyToChannel,request_state:e.sendingStatus,error_code:e.errorCode,mesg_token:e._messageToken})))},Object.defineProperty(n.prototype,"isResendable",{get:function(){return(this.sendingStatus===Tn.FAILED||this.sendingStatus===Tn.CANCELED)&&aj(this.errorCode)},enumerable:!1,configurable:!0}),n.prototype.isIdentical=function(e){return this.messageId>0&&e.messageId>0?this.messageId===e.messageId:this.reqId===e.reqId},n})(ja),EE={prevResultSize:0,nextResultSize:0,isInclusive:!1,reverse:!1,messageTypeFilter:Ia.ALL,customTypesFilter:void 0,senderUserIdsFilter:void 0,includeReactions:!1,includeMetaArray:!1,includeParentMessageInfo:!1},zS=function(t){return re("number",t.prevResultSize)&&re("number",t.nextResultSize)&&re("boolean",t.isInclusive)&&re("boolean",t.reverse)&&re("string",t.messageTypeFilter)&&dn(Ia,t.messageTypeFilter)&&hn("string",t.customTypesFilter,!0)&&hn("string",t.senderUserIdsFilter,!0)&&re("boolean",t.includeMetaArray)&&re("boolean",t.includeReactions)&&re("boolean",t.includeParentMessageInfo)},mp=(function(t){function n(e,r){var i,a,s,o=this;if((o=t.call(this,e,r)||this).translations={},o.messageType=br.ADMIN,o.translations=(i=r.translations)!==null&&i!==void 0?i:{},r.parent_message_info){var u=r.parent_message_info;o.parentMessage=Da(e,ze(ht(Z(Z({},u),{message_id:o.parentMessageId,channel_url:o.channelUrl,channel_type:o.channelType,file:u.file,url:(a=u.file)===null||a===void 0?void 0:a.url,require_auth:(s=u.file)===null||s===void 0?void 0:s.require_auth}))))}return o}return G(n,t),n.payloadify=function(e){return ze(ht(Z(Z({},t.payloadify.call(this,e)),{translations:e.translations,parent_message_info:e.parentMessage?t._getParentMessageInfoPayload.call(this,e.parentMessage):null})))},n.prototype.getThreadedMessagesByTimestamp=function(e,r){return D(this,void 0,void 0,(function(){var i;return O(this,(function(a){switch(a.label){case 0:return i=Z(Z({},EE),r),Ue(this.messageId>0&&re("number",e)&&zS(i)).throw(ae.invalidParameters),[4,Ki.of(this._iid).getThreadedMessagesByTimestamp(this,e,i)];case 1:return[2,a.sent()]}}))}))},n})(ja),nD=(function(){function t(n){var e,r;this.detail={},this.type=(e=n.type)!==null&&e!==void 0?e:"",this.vendor=(r=n.vendor)!==null&&r!==void 0?r:"",n.detail&&re("object",n.detail)&&!Array.isArray(n.detail)&&(this.detail=n.detail)}return t.payloadify=function(n){return ze(ht({type:n.type,vendor:n.vendor,detail:n.detail}))},t})(),rD=(function(){function t(n){this.status=n.status,n.original_message_info&&(this.originalMessageInfo={createdAt:n.original_message_info.ts,messageId:n.original_message_info.id})}return t.payloadify=function(n){return ze({status:n.status,original_message_info:n.originalMessageInfo?{id:n.originalMessageInfo.messageId,ts:n.originalMessageInfo.createdAt}:void 0})},t})(),Ma=(function(t){function n(e,r){var i,a,s,o,u,c,h,p=this;if((p=t.call(this,e,r)||this).messageParams=null,p.mentionedMessageTemplate=void 0,p.translations={},p.translationTargetLanguages=[],p.messageSurvivalSeconds=-1,p.plugins=[],p.messageType=br.USER,p.translations=(s=r.translations)!==null&&s!==void 0?s:{},p.translationTargetLanguages=(o=r.target_langs)!==null&&o!==void 0?o:[],Object.keys(p.translations).length===0&&p.translationTargetLanguages.length>0)try{for(var m=Fe(p.translationTargetLanguages),_=m.next();!_.done;_=m.next()){var b=_.value;p.translations[b]=""}}catch(N){i={error:N}}finally{try{_&&!_.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}if(p.mentionedMessageTemplate=r.mentioned_message_template,p.messageSurvivalSeconds=(u=r.message_survival_seconds)!==null&&u!==void 0?u:-1,p.plugins=r.plugins?r.plugins.map((function(N){return new nD(N)})):[],r.parent_message_info){var C=r.parent_message_info;p.parentMessage=Da(e,ze(ht(Z(Z({},C),{created_at:C.ts,message_id:p.parentMessageId,channel_url:p.channelUrl,channel_type:p.channelType,file:C.file,url:(c=C.file)===null||c===void 0?void 0:c.url,require_auth:(h=C.file)===null||h===void 0?void 0:h.require_auth}))))}return r.review_info&&(p.messageReviewInfo=new rD(r.review_info)),p}return G(n,t),n.payloadify=function(e){return ze(ht(Z(Z({},t.payloadify.call(this,e)),{translations:e.translations,message_survival_seconds:e.messageSurvivalSeconds,mentioned_message_template:e.mentionedMessageTemplate,plugins:e.plugins.map((function(r){return nD.payloadify(r)})),parent_message_info:e.parentMessage?t._getParentMessageInfoPayload.call(this,e.parentMessage):null,review_info:e.messageReviewInfo?rD.payloadify(e.messageReviewInfo):void 0})))},n.prototype.getThreadedMessagesByTimestamp=function(e,r){return D(this,void 0,void 0,(function(){var i;return O(this,(function(a){switch(a.label){case 0:return i=Z(Z({},EE),r),Ue(this.messageId>0&&re("number",e)&&zS(i)).throw(ae.invalidParameters),[4,Ki.of(this._iid).getThreadedMessagesByTimestamp(this,e,i)];case 1:return[2,a.sent()]}}))}))},n})(ai),rl=(function(t){function n(e,r){var i,a,s,o,u,c,h,p,m=this;if((m=t.call(this,e,r)||this).messageParams=null,m.fileInfoList=[],m.messageSurvivalSeconds=-1,m.messageType=br.FILE,m.data=(s=(a=(i=r.file)===null||i===void 0?void 0:i.data)!==null&&a!==void 0?a:r.custom)!==null&&s!==void 0?s:"",m.fileInfoList=(u=(o=r.files)===null||o===void 0?void 0:o.map((function(b){return new wA(e,b)})))!==null&&u!==void 0?u:[],m.messageSurvivalSeconds=(c=r.message_survival_seconds)!==null&&c!==void 0?c:-1,r.parent_message_info){var _=r.parent_message_info;m.parentMessage=Da(e,ze(ht(Z(Z({},_),{created_at:_.ts,message_id:m.parentMessageId,channel_url:m.channelUrl,channel_type:m.channelType,file:_.file,url:(h=_.file)===null||h===void 0?void 0:h.url,require_auth:(p=_.file)===null||p===void 0?void 0:p.require_auth}))))}return m}return G(n,t),n.prototype.getThreadedMessagesByTimestamp=function(e,r){return D(this,void 0,void 0,(function(){var i;return O(this,(function(a){switch(a.label){case 0:return i=Z(Z({},EE),r),Ue(this.messageId>0&&re("number",e)&&zS(i)).throw(ae.invalidParameters),[4,Ki.of(this._iid).getThreadedMessagesByTimestamp(this,e,i)];case 1:return[2,a.sent()]}}))}))},n.payloadify=function(e){var r,i,a,s,o,u;return ze(ht(Z(Z({},t.payloadify.call(this,e)),{file:{name:(i=(r=e.fileInfoList[0])===null||r===void 0?void 0:r.fileName)!==null&&i!==void 0?i:"",size:(s=(a=e.fileInfoList[0])===null||a===void 0?void 0:a.fileSize)!==null&&s!==void 0?s:0,type:(u=(o=e.fileInfoList[0])===null||o===void 0?void 0:o.mimeType)!==null&&u!==void 0?u:"",data:e.data},files:Array.isArray(e.fileInfoList)?e.fileInfoList.map((function(c){return wA.payloadify(c)})):null,message_survival_seconds:e.messageSurvivalSeconds,parent_message_info:e.parentMessage?t._getParentMessageInfoPayload.call(this,e.parentMessage):null})))},n._isMultipleFilesMessagePayload=function(e){var r=e.files;return Array.isArray(r)&&r.length>=2},n._isMultipleFilesMessageSerializedData=function(e){var r=e.fileInfoList;return Array.isArray(r)},n})(ai);(function(t){t.SENT="SENT",t.READ="READ"})(rp||(rp={}));var gp=(function(t){function n(e,r){var i,a,s=this;if((s=t.call(this,e,r)||this).notificationData=null,s.notificationId=r.notification_message_id,s.messageType=br.ADMIN,s.messageStatus=(i=r.message_status)!==null&&i!==void 0?i:rp.SENT,s.priority=(a=r.priority)!==null&&a!==void 0?a:_A.NORMAL,s.notificationEventDeadline=r.notification_event_deadline,s.extendedMessage.sub_type===0)try{var o=JSON.parse(s.extendedMessage.sub_data),u=o.label,c=o.tags,h=c===void 0?[]:c,p=o.template_key,m=o.template_variables;s.notificationData={label:u,tags:h,templateKey:p,templateVariables:m}}catch{}return s}return G(n,t),n.payloadify=function(e){return ze(ht(Z(Z({},t.payloadify.call(this,e)),{notification_message_id:e.notificationId,message_status:e.messageStatus,priority:e.priority,notification_event_deadline:e.notificationEventDeadline})))},n.prototype.isIdentical=function(e){return this.notificationId===e.notificationId},n})(PP),RA=function(t){if(t.notificationId)return gp.payloadify(t);switch(t.messageType){case br.USER:return Ma.payloadify(t);case br.FILE:return t.fileInfoList?rl.payloadify(t):Ai.payloadify(t);case br.ADMIN:return mp.payloadify(t);default:throw ae.unknown}},Da=function(t,n){if(n.notification_message_id)return new gp(t,n);switch(n.type){case"MESG":return new Ma(t,n);case"FILE":return rl._isMultipleFilesMessagePayload(n)?new rl(t,n):new Ai(t,n);case"ADMM":case"BRDM":return new mp(t,n);default:return null}},Ai=(function(t){function n(e,r){var i,a,s,o,u,c,h,p,m,_,b,C,N,S,M,w=this;(w=t.call(this,e,r)||this).messageParams=null,w.plainUrl="",w.requireAuth=!1,w.thumbnails=[],w.messageSurvivalSeconds=-1,w.messageType=br.FILE;var U=r.file;if(w.plainUrl=((a=(i=U?.url)!==null&&i!==void 0?i:r.url)!==null&&a!==void 0?a:"").split("?auth=")[0],w.name=(o=(s=U?.name)!==null&&s!==void 0?s:r.name)!==null&&o!==void 0?o:"File",w.size=(c=(u=U?.size)!==null&&u!==void 0?u:r.size)!==null&&c!==void 0?c:0,w.data=(m=(p=(h=U?.data)!==null&&h!==void 0?h:r.custom)!==null&&p!==void 0?p:w.data)!==null&&m!==void 0?m:"",w.type=U?(_=U.type)!==null&&_!==void 0?_:"":(b=r.type)!==null&&b!==void 0?b:"",w.requireAuth=(C=r.require_auth)!==null&&C!==void 0&&C,w.thumbnails=r.thumbnails?r.thumbnails.map((function(P){var x;return new Rd(w._iid,typeof P=="string"?{url:P,width:0,height:0}:Z(Z({},P),{url:((x=P.url)!==null&&x!==void 0?x:"").split("auth=")[0]}),w.requireAuth)})):[],w.messageSurvivalSeconds=(N=r.message_survival_seconds)!==null&&N!==void 0?N:-1,r.parent_message_info){var L=r.parent_message_info;w.parentMessage=Da(e,ze(ht(Z(Z({},L),{created_at:L.ts,message_id:w.parentMessageId,channel_url:w.channelUrl,channel_type:w.channelType,file:L.file,url:(S=L.file)===null||S===void 0?void 0:S.url,require_auth:(M=L.file)===null||M===void 0?void 0:M.require_auth}))))}return w}return G(n,t),n.payloadify=function(e){var r;return ze(ht(Z(Z({},t.payloadify.call(this,e)),{url:e.plainUrl,require_auth:e.requireAuth,file:{name:e.name,size:e.size,type:e.type,data:e.data},thumbnails:(r=e.thumbnails)===null||r===void 0?void 0:r.map((function(i){return{url:i.plainUrl,width:i.width,height:i.height,real_width:i.realWidth,real_height:i.realHeight}})),message_survival_seconds:e.messageSurvivalSeconds,parent_message_info:e.parentMessage?t._getParentMessageInfoPayload.call(this,e.parentMessage):null})))},Object.defineProperty(n.prototype,"url",{get:function(){var e=te.of(this._iid).sessionManager;return this.requireAuth&&e.ekey?"".concat(this.plainUrl,"?auth=").concat(e.ekey):this.plainUrl},enumerable:!1,configurable:!0}),n.prototype.getThreadedMessagesByTimestamp=function(e,r){return D(this,void 0,void 0,(function(){var i;return O(this,(function(a){switch(a.label){case 0:return i=Z(Z({},EE),r),Ue(this.messageId>0&&re("number",e)&&zS(i)).throw(ae.invalidParameters),[4,Ki.of(this._iid).getThreadedMessagesByTimestamp(this,e,i)];case 1:return[2,a.sent()]}}))}))},n})(ai),Ky=(function(t){function n(e,r){var i=r.file,a=r.fileUrl,s=r.fileName,o=r.fileSize,u=r.mimeType,c=r.thumbnailSizes,h=r._uploadedMetaData,p=r._thumbnails,m=t.call(this,e)||this;return m._plainUrl=a,m.file=i,m.fileName=s,m.fileSize=o,m.mimeType=u,m.thumbnailSizes=c,m._uploadedMetaData=h,m._thumbnails=p,m}return G(n,t),n.getPlainUrl=function(e){return e instanceof n?e._plainUrl:e.fileUrl},Object.defineProperty(n.prototype,"fileUrl",{get:function(){var e,r=te.of(this._iid).sessionManager;return this._plainUrl&&(!((e=this._uploadedMetaData)===null||e===void 0)&&e.requireAuth)&&r.ekey?"".concat(this._plainUrl,"?auth=").concat(r.ekey):this._plainUrl},set:function(e){this._plainUrl=e},enumerable:!1,configurable:!0}),n.prototype.toJSON=function(){return{file:this.file,fileUrl:this._plainUrl,fileName:this.fileName,fileSize:this.fileSize,mimeType:this.mimeType,thumbnailSizes:this.thumbnailSizes,_thumbnails:this._thumbnails,_uploadedMetaData:this._uploadedMetaData}},n})(wi),x$=(function(t){function n(e){var r,i,a,s,o=[];return e.mentionType===Oa.USERS&&(e.mentionedUserIds?o=e.mentionedUserIds:e.mentionedUsers&&(o=e.mentionedUsers.map((function(u){return u.userId})))),t.call(this,{code:"FILE",ackRequired:!0,payload:ze(ht({channel_url:e.channelUrl,files:e.files?GP(e.files):null,url:e.url,name:(r=e.fileName)!==null&&r!==void 0?r:"",type:(i=e.mimeType)!==null&&i!==void 0?i:"",size:(a=e.fileSize)!==null&&a!==void 0?a:0,custom:e.data,custom_type:e.customType,thumbnails:(s=e._thumbnails)===null||s===void 0?void 0:s.map((function(u){return Rd.payloadify(u)})),require_auth:e.requireAuth,metaarray:e.metaArrays,mention_type:e.mentionType,mentioned_user_ids:o,push_option:e.pushNotificationDeliveryOption&&e.pushNotificationDeliveryOption!==Au.DEFAULT?e.pushNotificationDeliveryOption:void 0,apple_critical_alert_options:e.appleCriticalAlertOptions?xl.payloadify(e.appleCriticalAlertOptions):null,silent:e.silent,reply_to_channel:e.isReplyToChannel,parent_message_id:e.parentMessageId?e.parentMessageId:null,req_id:e.reqId,poll_id:e.pollId,pin_message:e.isPinnedMessage,message:e.message}))})||this}return G(n,t),n})(Ra),L$=(function(t){function n(e){var r,i,a=this;a=t.call(this)||this;var s=[];return e.mentionType===Oa.USERS&&(e.mentionedUserIds?s=e.mentionedUserIds:e.mentionedUsers&&(s=e.mentionedUsers.map((function(o){return o.userId})))),a.method=Ie.POST,a.path="".concat(Gn(e.channelType),"/").concat(encodeURIComponent(e.channelUrl),"/messages"),a.params=ze(ht({message_type:br.FILE,user_id:e.userId,files:e.files?GP(e.files):null,url:e.fileUrl,mention_type:e.mentionType,mentioned_user_ids:s,file_name:e.fileName,file_size:e.fileSize,file_type:e.mimeType,data:e.data,custom_type:e.customType,thumbnails:(r=e._thumbnails)===null||r===void 0?void 0:r.map((function(o){return Rd.payloadify(o)})),require_auth:e.requireAuth,sorted_metaarray:(i=e.metaArrays)===null||i===void 0?void 0:i.map((function(o){return _a.payloadify(o)})),push_option:e.pushNotificationDeliveryOption,parent_message_id:e.parentMessageId?e.parentMessageId:null,apple_critical_alert_options:e.appleCriticalAlertOptions?xl.payloadify(e.appleCriticalAlertOptions):null,reply_to_channel:e.isReplyToChannel,req_id:e.reqId,poll_id:e.pollId,pin_message:e.isPinnedMessage})),a}return G(n,t),n})(we),ww=(function(t){function n(e,r,i){var a,s,o,u,c=this;(c=t.call(this,e,"FILE",i)||this).message=i.files&&i.files.length>=2?new rl(e,i):new Ai(e,i);var h=te.of(e).sdkState;return c.isMentioned=Eg(c.message.mentionType,(o=(a=c.message.mentionedUserIds)!==null&&a!==void 0?a:(s=c.message.mentionedUsers)===null||s===void 0?void 0:s.map((function(p){return p.userId})))!==null&&o!==void 0?o:[],h.userId),c.forceUpdateLastMessage=(u=i.force_update_last_message)!==null&&u!==void 0&&u,c}return G(n,t),n})(Rr),k$=(function(t){function n(e,r){var i,a,s,o,u=this;(u=t.call(this,e,r)||this).message=r.files&&r.files.length>=2?new rl(e,r):new Ai(e,r);var c=te.of(e).sdkState;return u.isMentioned=Eg(u.message.mentionType,(s=(i=u.message.mentionedUserIds)!==null&&i!==void 0?i:(a=u.message.mentionedUsers)===null||a===void 0?void 0:a.map((function(h){return h.userId})))!==null&&s!==void 0?s:[],c.userId),u.forceUpdateLastMessage=(o=r.force_update_last_message)!==null&&o!==void 0&&o,u}return G(n,t),n})(xe);function GP(t){return t.map((function(n){var e,r;return ze(ht({url:Ky.getPlainUrl(n),file_name:n.fileName,file_type:n.mimeType,file_size:n.fileSize,thumbnails:(e=n._thumbnails)===null||e===void 0?void 0:e.map((function(i){return Rd.payloadify(i)})),require_auth:(r=n._uploadedMetaData)===null||r===void 0?void 0:r.requireAuth}))}))}var Ji;(function(t){t[t.PENDING=0]="PENDING",t[t.UPLOADING=1]="UPLOADING",t[t.UPLOADED=2]="UPLOADED",t[t.SENDING=3]="SENDING",t[t.FAILED=4]="FAILED"})(Ji||(Ji={}));var P$=(function(){function t(n,e){var r=e.sdkState,i=e.dispatcher,a=e.requestQueue,s=e.onlineDetector,o=e.cacheContext,u=this;this._queueMap=new Map,this._iid=n,this._sdkState=r,this._requestQueue=a,this._cacheContext=o,this._dispatcher=i,this._dispatcher.on((function(c){c instanceof Ao&&(u._connectionState=c.stateType)})),this._onlineDetector=s}return Object.defineProperty(t.prototype,"_shouldSendThroughWebSocket",{get:function(){return this._connectionState===zn.CONNECTED||this._connectionState===zn.CONNECTING||this._connectionState===zn.RECONNECTING},enumerable:!1,configurable:!0}),t.prototype._sendFileMessage=function(n,e){return D(this,void 0,void 0,(function(){var r,i,a;return O(this,(function(s){switch(s.label){case 0:return r=this._createSendFileMessageRequestParams(n,e),this._shouldSendThroughWebSocket?(i=new x$(r),[4,this._requestQueue.send(i)]):[3,2];case 1:return a=s.sent(),[2,a.as(ww).message];case 2:return i=new L$(Z(Z({},r),{userId:this._sdkState.userId})),[4,this._requestQueue.send(i)];case 3:return a=s.sent(),[2,a.as(k$).message]}}))}))},t.prototype._createSendFileMessageRequestParams=function(n,e){var r=Z(Z({},e.params),{channelUrl:n.url,channelType:n.channelType,reqId:e.requestId,url:""});if(e.multipleFileUploadInfo){var i=e.params;r.files=i.fileInfoList}else i=e.params,r.url=i.fileUrl,r.requireAuth=i.requireAuth;return r},t.prototype._resolveMessageQueue=function(n){var e;return D(this,void 0,void 0,(function(){var r,i,a,s,o,u,c,h,p,m,_,b,C;return O(this,(function(N){switch(N.label){case 0:if(!(r=this._queueMap.get(n.url)))return[3,21];if(r.isResolving)return[3,20];r.isResolving=!0,i=[],a=!0,N.label=1;case 1:N.trys.push([1,15,16,17]),s=Fe(r.messageQueue),o=s.next(),N.label=2;case 2:if(o.done)return[3,14];switch(u=o.value,u.state){case Ji.PENDING:case Ji.UPLOADING:return[3,3];case Ji.UPLOADED:return[3,4];case Ji.FAILED:return[3,12]}return[3,13];case 3:return a=!1,i.push(u),[3,13];case 4:if(!a)return[3,10];N.label=5;case 5:return N.trys.push([5,8,,9]),u.state=Ji.SENDING,[4,this._sendFileMessage(n,u)];case 6:return c=N.sent(),u.deferred.resolve(c),[4,za(100)];case 7:return N.sent(),[3,9];case 8:return h=N.sent(),u.deferred.reject(h),[3,9];case 9:return[3,11];case 10:i.push(u),N.label=11;case 11:return[3,13];case 12:return p=(e=u.error)!==null&&e!==void 0?e:ae.unknown,u.deferred.reject(p.code===et.REQUEST_CANCELED?ae.fileUploadCanceled:p),[3,13];case 13:return o=s.next(),[3,2];case 14:return[3,17];case 15:return m=N.sent(),b={error:m},[3,17];case 16:try{o&&!o.done&&(C=s.return)&&C.call(s)}finally{if(b)throw b.error}return[7];case 17:return _=r.isResolveRequestPending,r.messageQueue=i,r.isResolving=!1,r.isResolveRequestPending=!1,_?[4,this._resolveMessageQueue(n)]:[3,19];case 18:N.sent(),N.label=19;case 19:return[3,21];case 20:r.isResolveRequestPending=!0,N.label=21;case 21:return[2]}}))}))},t.prototype._uploadNextPendingItem=function(n){var e;return D(this,void 0,void 0,(function(){var r,i,a,s,o,u,c,h,p,m;return O(this,(function(_){switch(_.label){case 0:return(r=this._queueMap.get(n.url))&&(i=r.messageQueue.find((function(b){return b.state===Ji.PENDING})))?i.multipleFileUploadInfo?(a=i.multipleFileUploadInfo,s=a.uploadIndex,o=a.uploadCount,u=a.requestHandler,m=i.params,c=m.fileInfoList[s],!ra(c.file)||!((e=c._uploadedMetaData)===null||e===void 0)&&e.isUploaded?[3,2]:[4,this._tryUploadNextItemAndUpdateItemState(n,r,i)]):[3,4]:[3,9];case 1:return _.sent(),[3,3];case 2:i.state=s<o-1?Ji.PENDING:Ji.UPLOADED,_.label=3;case 3:return h=m.fileInfoList[s],p=i.multipleFileUploadInfo.uploadIndex++,i.multipleFileUploadInfo.isCopy||u==null||u._triggerOnFileUploaded(i.requestId,p,h,i.error),[3,7];case 4:return m=i.params,ra(m.file)?[4,this._tryUploadNextItemAndUpdateItemState(n,r,i)]:[3,6];case 5:return _.sent(),[3,7];case 6:m.thumbnailSizes=[],i.state=Ji.UPLOADED,_.label=7;case 7:return this._uploadNextPendingItem(n),[4,this._resolveMessageQueue(n)];case 8:_.sent(),_.label=9;case 9:return[2]}}))}))},t.prototype._tryUploadNextItemAndUpdateItemState=function(n,e,r){return D(this,void 0,void 0,(function(){var i,a,s,o,u,c;return O(this,(function(h){switch(h.label){case 0:return[4,this._onlineDetector.isOnline()];case 1:if(i=h.sent(),!te.of(this._iid).sessionManager.currentUser||!i)return r.error=ae.connectionRequired,r.state=Ji.FAILED,[2];if(!(e.uploadQueue.length<6))return[3,9];r.state=Ji.UPLOADING,e.uploadQueue.push(r),h.label=2;case 2:return h.trys.push([2,7,,8]),r.multipleFileUploadInfo?(a=r.multipleFileUploadInfo,s=a.uploadIndex,o=a.uploadCount,u=r.params,[4,this._uploadNextFileForMultipleFilesItemAndUpdateParams(n,r,u)]):[3,4];case 3:return h.sent(),r.state=s<o-1?Ji.PENDING:Ji.UPLOADED,[3,6];case 4:return u=r.params,[4,this._uploadNextFileForSingleFileItemAndUpdateParams(n,r,u)];case 5:h.sent(),r.state=Ji.UPLOADED,h.label=6;case 6:return[3,8];case 7:switch((c=h.sent()).code){case et.REQUEST_FAILED:r.error=new ae({code:et.NETWORK_ERROR,message:"Failed to upload a file."});break;case et.REQUEST_CANCELED:r.error=ae.fileUploadCanceled;break;default:r.error=c}return r.state=Ji.FAILED,[3,8];case 8:this._dequeueUploadItem(e,r),h.label=9;case 9:return[2]}}))}))},t.prototype._dequeueUploadItem=function(n,e){var r=n.uploadQueue.findIndex((function(i){return i.requestId===e.requestId}));r>=0&&n.uploadQueue.splice(r,1)},t.prototype._uploadNextFileForSingleFileItemAndUpdateParams=function(n,e,r){var i,a,s;return D(this,void 0,void 0,(function(){var o,u,c,h,p,m,_,b,C,N;return O(this,(function(S){switch(S.label){case 0:return o=new tS({file:r.file,channelUrl:n.url,thumbnailSizes:r.thumbnailSizes,requestId:e.requestId}),[4,this._requestQueue.send(o)];case 1:return u=S.sent(),c=u.as(nS),h=c.url,p=c.fileSize,m=p===void 0?r.fileSize:p,_=c.thumbnails,b=_===void 0?[]:_,C=c.requireAuth,N=C!==void 0&&C,r.fileName=(i=r.fileName)!==null&&i!==void 0?i:r.file.name,r.mimeType=(a=r.mimeType)!==null&&a!==void 0?a:r.file.type,r.fileSize=(s=r.fileSize)!==null&&s!==void 0?s:r.file.size,r.fileUrl=h,r.fileSize=m,r.requireAuth=N,r._thumbnails=b,[2]}}))}))},t.prototype._uploadNextFileForMultipleFilesItemAndUpdateParams=function(n,e,r){var i,a,s;return D(this,void 0,void 0,(function(){var o,u,c,h,p,m,_,b,C,N,S;return O(this,(function(M){switch(M.label){case 0:return o=e.multipleFileUploadInfo.uploadIndex,u=r.fileInfoList[o],c=new tS({file:u.file,channelUrl:n.url,thumbnailSizes:u.thumbnailSizes,requestId:e.requestId}),[4,this._requestQueue.send(c)];case 1:return h=M.sent(),p=h.as(nS),m=p.url,_=p.fileSize,b=_===void 0?u.fileSize:_,C=p.thumbnails,N=p.requireAuth,S=N!==void 0&&N,u.fileName=(i=u.fileName)!==null&&i!==void 0?i:u.file.name,u.mimeType=(a=u.mimeType)!==null&&a!==void 0?a:u.file.type,u.fileSize=(s=u.fileSize)!==null&&s!==void 0?s:u.file.size,u.file=void 0,u.fileUrl=m,u.fileSize=b,u._thumbnails=C,u._uploadedMetaData=Z(Z({},u._uploadedMetaData),{requireAuth:S,isUploaded:!0}),u instanceof Ky||(r.fileInfoList[o]=new Ky(this._iid,u)),[2]}}))}))},t.prototype.request=function(n,e,r,i){return i===void 0&&(i={}),D(this,void 0,void 0,(function(){var a,s,o,u,c;return O(this,(function(h){return this._queueMap.has(n.url)||(a={messageQueue:[],uploadQueue:[],isResolving:!1,isResolveRequestPending:!1},this._queueMap.set(n.url,a)),s=this._queueMap.get(n.url),o=new ps,u={requestId:e,params:r,state:Ji.PENDING,deferred:o},(function(p){return"fileInfoList"in p})(r)&&(c=Z({uploadIndex:0,uploadCount:r.fileInfoList.length},i),u.multipleFileUploadInfo=c),s.messageQueue.push(u),this._uploadNextPendingItem(n),[2,o.promise]}))}))},t.prototype.cancel=function(n,e){var r,i,a=this._queueMap.get(n.url);if(a){var s=e?[a.messageQueue.find((function(b){return b.requestId===e}))]:wt([],dt(a.messageQueue),!1);try{for(var o=Fe(s),u=o.next();!u.done;u=o.next()){var c=u.value;if(c)switch(c.state){case Ji.PENDING:if(c.state=Ji.FAILED,c.error=ae.requestCanceled,c.multipleFileUploadInfo&&!c.multipleFileUploadInfo.isCopy){var h=c.multipleFileUploadInfo,p=h.uploadIndex,m=h.requestHandler,_=c.params.fileInfoList[p];m?._triggerOnFileUploaded(c.requestId,p,_,ae.fileUploadCanceled)}this._resolveMessageQueue(n);break;case Ji.UPLOADING:this._requestQueue.cancel(c.requestId),this._dispatcher.dispatch(new YC({requestId:c.requestId}))}}}catch(b){r={error:b}}finally{try{u&&!u.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}}else e&&(this._requestQueue.cancel(e),this._dispatcher.dispatch(new YC({requestId:e})))},t})(),iD,Nl,Ty={prevResultSize:0,nextResultSize:0,isInclusive:!1,reverse:!1,messageTypeFilter:Ia.ALL,customTypesFilter:void 0,senderUserIdsFilter:void 0,replyType:Yi.NONE,includeReactions:!1,includeMetaArray:!1,includeParentMessageInfo:!1,includeThreadInfo:!1,showSubchannelMessagesOnly:!1},aD=function(t){return re("number",t.prevResultSize)&&re("number",t.nextResultSize)&&re("boolean",t.isInclusive)&&re("boolean",t.reverse)&&re("string",t.messageTypeFilter)&&dn(Ia,t.messageTypeFilter)&&hn("string",t.customTypesFilter,!0)&&hn("string",t.senderUserIdsFilter,!0)&&dn(Yi,t.replyType)&&re("boolean",t.includeMetaArray)&&re("boolean",t.includeReactions)&&re("boolean",t.includeParentMessageInfo)&&re("boolean",t.includeThreadInfo)&&re("boolean",t.showSubchannelMessagesOnly)},OA={replyType:Yi.NONE,includeReactions:!1,includeThreadInfo:!1,includeMetaArray:!1,includeParentMessageInfo:!1},sD=function(t){return dn(Yi,t.replyType)&&re("boolean",t.includeReactions)&&re("boolean",t.includeMetaArray)&&re("boolean",t.includeParentMessageInfo)&&re("boolean",t.includeThreadInfo)};(function(t){t.MESSAGE="message"})(iD||(iD={})),(function(t){t.INTERNAL_BACKSYNC="internal_backsync",t.INTERNAL_FILL_GAP="internal_fill_gap",t.EXTERNAL_LEGACY="external_legacy",t.EXTERNAL_COLLECTION="external_collection"})(Nl||(Nl={}));var DA,F$=(function(t){function n(e){var r=e.channelType,i=e.channelUrl,a=e.messageId,s=e.includeMetaArray,o=e.includeReactions,u=e.includeThreadInfo,c=e.includeParentMessageInfo,h=t.call(this)||this;return h.method=Ie.GET,h.path="".concat(Gn(r),"/").concat(encodeURIComponent(i),"/messages/").concat(encodeURIComponent(a)),h.params={is_sdk:!0,with_sorted_meta_array:s,include_reactions_summary:o!=null&&o,include_thread_info:u,include_parent_message_info:c,include_poll_details:!0},h}return G(n,t),n})(we),B$=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.message=r?Da(e,Z({},r)):null,i}return G(n,t),n})(xe),j1=(function(t){function n(e){var r=e.channelType,i=e.channelUrl,a=e.timestamp,s=e.token,o=e.prevResultSize,u=e.nextResultSize,c=e.isInclusive,h=e.reverse,p=e.messageTypeFilter,m=e.customTypesFilter,_=e.senderUserIdsFilter,b=e.replyType,C=e.includeMetaArray,N=e.includeReactions,S=e.parentMessageId,M=e.includeThreadInfo,w=e.includeParentMessageInfo,U=e.showSubchannelMessagesOnly,L=e.checkingHasNext,P=e.checkingContinuousMessages,x=e.sdkSource,H=t.call(this)||this;return H.method=Ie.GET,H.path="".concat(Gn(r),"/").concat(encodeURIComponent(i),"/messages"),H.params=ze(ht({is_sdk:!0,prev_limit:o,next_limit:u,include:c,reverse:h,message_ts:a,message_id:s,message_type:p??null,custom_types:m,sender_ids:_,include_reply_type:b,with_sorted_meta_array:C,include_reactions_summary:N,parent_message_id:S,include_thread_info:M,include_parent_message_info:w,show_subchannel_message_only:U,include_poll_details:!0,checking_has_next:L,checking_continuous_messages:P,sdk_source:x})),H}return G(n,t),n})(we),q1=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return r.is_continuous_messages!==void 0&&(i.isContinuousMessages=r.is_continuous_messages),r.has_next!==void 0&&(i.hasNext=r.has_next),i.messages=r.messages.map((function(a){return Da(e,a)})),i}return G(n,t),n})(xe),H$=(function(t){function n(e){var r=e.channelType,i=e.channelUrl,a=e.timestamp,s=e.token,o=e.replyType,u=e.includeMetaArray,c=e.includeReactions,h=e.includeThreadInfo,p=e.includeParentMessageInfo,m=t.call(this)||this;return m.method=Ie.GET,m.path="".concat(Gn(r),"/").concat(encodeURIComponent(i),"/messages/changelogs"),m.params={change_ts:a,token:s,with_sorted_meta_array:u,include_reactions_summary:c,include_thread_info:h,include_reply_type:o,include_parent_message_info:p,include_poll_details:!0},m}return G(n,t),n})(we),G$=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.updatedMessages=r.updated.map((function(a){return Da(e,a)})),i.deletedMessagesInfo=r.deleted.map((function(a){return{messageId:a.message_id,deletedAt:a.deleted_at}})),i.hasMore=r.has_more,i.nextToken=r.next,i.forceUseNextToken=r.force_use_next_token||!1,i}return G(n,t),n})(xe),V$=(function(t){function n(e){var r=e.channelUrl,i=e.scheduledMessageId,a=t.call(this)||this;return a.method=Ie.GET,a.path="".concat(Ya,"/").concat(encodeURIComponent(r),"/scheduled_messages/").concat(encodeURIComponent(i)),a.params={},a}return G(n,t),n})(we),z$=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.message=r?Da(e,Z({},r)):null,i}return G(n,t),n})(xe);(function(t){t.MUTED="muted",t.BANNED="banned"})(DA||(DA={}));var oD=(function(){function t(n){var e,r,i,a;this.restrictionType=null,dn(DA,n.restriction_type)&&(this.restrictionType=n.restriction_type),this.description=(e=n.description)!==null&&e!==void 0?e:null,this.endAt=(i=(r=n.end_at)!==null&&r!==void 0?r:n.muted_end_at)!==null&&i!==void 0?i:-1,this.remainingDuration=(a=n.remaining_duration)!==null&&a!==void 0?a:-1}return t.payloadify=function(n){return ze(ht({restriction_type:n.restrictionType,description:n.description,end_at:n.endAt,remaining_duration:n.remainingDuration}))},t})(),Ap=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.restrictionInfo=new oD(r),i}return G(n,t),n.payloadify=function(e){return ze(ht(Z(Z({},t.payloadify.call(this,e)),oD.payloadify(e.restrictionInfo))))},n})(fn),j$=(function(t){function n(e,r){var i,a=this;return(a=t.call(this,e,r)||this).isMuted=!1,a.isMuted=(i=r.is_muted)!==null&&i!==void 0&&i,a}return G(n,t),n})(fn),po=(function(){function t(){this._onPending=Bt,this._onFailed=Bt,this._onSucceeded=Bt}return t.prototype._trigger=function(n){switch(n?.sendingStatus){case Tn.PENDING:n.errorCode===0&&this._onPending(n);break;case Tn.SCHEDULED:case Tn.SUCCEEDED:this._onSucceeded(n)}},t.prototype._triggerFailed=function(n,e){switch(e?.sendingStatus){case Tn.FAILED:case Tn.CANCELED:this._onFailed(n,e.scheduledInfo?null:e)}},t.prototype.onPending=function(n){return this._onPending=n,this},t.prototype.onFailed=function(n){return this._onFailed=n,this},t.prototype.onSucceeded=function(n){return this._onSucceeded=n,this},t})(),jS={data:void 0,customType:void 0,mentionType:Oa.USERS,mentionedUserIds:void 0,mentionedUsers:void 0,metaArrays:void 0,parentMessageId:void 0,isReplyToChannel:!1,pushNotificationDeliveryOption:void 0,appleCriticalAlertOptions:void 0,isPinnedMessage:!1,pollId:void 0},qS=function(t){return re("string",t.data,!0)&&re("string",t.customType,!0)&&dn(Oa,t.mentionType)&&hn("string",t.mentionedUserIds,!0)&&hn(fn,t.mentionedUsers,!0)&&hn(_a,t.metaArrays,!0)&&re("number",t.parentMessageId,!0)&&re("boolean",t.isReplyToChannel)&&dn(Au,t.pushNotificationDeliveryOption,!0)&&re(xl,t.appleCriticalAlertOptions,!0)&&re("boolean",t.isPinnedMessage,!0)&&re("number",t.pollId,!0)},lD=function(t){return{isReplyToChannel:t.isReplyToChannel,pushNotificationDeliveryOption:t.pushNotificationDeliveryOption,pollId:t.pollId}},VP=Z(Z({},jS),{message:"",mentionedMessageTemplate:void 0,translationTargetLanguages:void 0,extendedMessagePayload:void 0});function zP(t){var n,e,r;return(n=t.messageParams)!==null&&n!==void 0?n:ht(Z(Z({},t),{mentionType:t.mentionType,mentionedUserIds:(e=t.mentionedUserIds)!==null&&e!==void 0?e:(r=t.mentionedUsers)===null||r===void 0?void 0:r.map((function(i){return i.userId})),mentionedMessageTemplate:t.mentionedMessageTemplate,translationTargetLanguages:Object.keys(t.translations),pushNotificationDeliveryOption:Au.DEFAULT,parentMessageId:null,isReplyToChannel:!1,isPinnedMessage:!1}))}var up,UA=function(t){var n;return ze(ht({data:t.data,customType:t.customType,mentionType:t.mentionType,mentionedUsers:t.mentionedUsers,mentionedUserIds:t.mentionedUserIds,mentionedMessageTemplate:t.mentionedMessageTemplate,metaArrays:t.metaArrays,pollId:(n=t.poll)===null||n===void 0?void 0:n.id,parentMessageId:t.parentMessageId,appleCriticalAlertOptions:t.appleCriticalAlertOptions,message:t.message,translationTargetLanguages:Object.keys(t.translations),extendedMessagePayload:t.extendedMessagePayload}))},jP=function(t){return qS(t)&&re("string",t.message)&&re("string",t.mentionedMessageTemplate,!0)&&hn("string",t.translationTargetLanguages,!0)&&re("object",t.extendedMessagePayload,!0)};(function(t){t.FILE="file",t.BLOB="blob",t.BLOB_LIKE_OBJECT="blobLikeObject",t.URL="url"})(up||(up={}));var CC=function(t){return typeof window<"u"&&"Blob"in window&&typeof Blob<"u"&&t instanceof Blob},iN=function(t){return t===up.BLOB||t===up.FILE},uD=function(t){return{file:t.file,fileKey:t.fileKey,fileType:t.fileType,isReplyToChannel:t.isReplyToChannel,pushNotificationDeliveryOption:t.pushNotificationDeliveryOption}},cD=Z(Z({},jS),{file:void 0,fileKey:void 0,fileUrl:void 0,fileName:void 0,fileType:void 0,fileSize:void 0,mimeType:void 0,thumbnailSizes:void 0,requireAuth:!1,message:void 0});function qP(t){var n,e,r,i;return(n=t.messageParams)!==null&&n!==void 0?n:ht(Z(Z({},t),{fileUrl:t.plainUrl,fileName:t.name,fileSize:t.size,mimeType:t.type,mentionType:t.mentionType,mentionedUserIds:(e=t.mentionedUserIds)!==null&&e!==void 0?e:(r=t.mentionedUsers)===null||r===void 0?void 0:r.map((function(a){return a.userId})),pushNotificationDeliveryOption:Au.DEFAULT,parentMessageId:null,isReplyToChannel:!1,thumbnailSizes:(i=t.thumbnails)===null||i===void 0?void 0:i.map((function(a){return{maxWidth:a.width,maxHeight:a.height}})),requireAuth:t.requireAuth,isPinnedMessage:!1,_thumbnails:t.thumbnails,message:t.message}))}var Ny,xA=function(t,n){var e,r;return t.messageParams?(!t.url&&ra(n)&&(t.messageParams.file=n),t.messageParams):ze(ht({data:t.data,customType:t.customType,mentionType:t.mentionType,mentionedUsers:t.mentionedUsers,mentionedUserIds:t.mentionedUserIds,metaArrays:t.metaArrays,parentMessageId:t.parentMessageId,appleCriticalAlertOptions:t.appleCriticalAlertOptions,file:n,fileUrl:t.url,fileName:t.name,fileSize:t.size,mimeType:t.type,thumbnailSizes:(e=t.thumbnails)===null||e===void 0?void 0:e.map((function(i){return{maxWidth:i.width,maxHeight:i.height}})),message:t.message,pollId:(r=t.poll)===null||r===void 0?void 0:r.id}))},dD=function(t){return qS(t)&&(ra(t.file)||re("string",t.fileUrl))&&re("string",t.fileName,!0)&&re("string",t.mimeType,!0)&&re("number",t.fileSize,!0)&&re("string",t.message,!0)&&(t.thumbnailSizes===null||t.thumbnailSizes===void 0||Array.isArray(t.thumbnailSizes)&&t.thumbnailSizes.every((function(n){return re("object",n)&&n.maxWidth>0&&n.maxHeight>0})))},Rw={data:void 0,customType:void 0,mentionType:Oa.USERS,mentionedUserIds:void 0,mentionedUsers:void 0,metaArrays:void 0,pushNotificationDeliveryOption:void 0,appleCriticalAlertOptions:void 0},Ow=function(t){return re("string",t.data,!0)&&re("string",t.customType,!0)&&dn(Oa,t.mentionType)&&hn("string",t.mentionedUserIds,!0)&&hn(fn,t.mentionedUsers,!0)&&hn(_a,t.metaArrays,!0)&&dn(Au,t.pushNotificationDeliveryOption,!0)&&re(xl,t.appleCriticalAlertOptions,!0)},$P=Z(Z({},Rw),{message:void 0,mentionedMessageTemplate:void 0,translationTargetLanguages:void 0,pollId:void 0}),KP=function(t){return Ow(t)&&re("string",t.mentionedMessageTemplate,!0)&&re("string",t.message,!0)&&hn("string",t.translationTargetLanguages,!0)&&re("number",t.pollId,!0)},q$=Z({},Rw),$$=(function(t){function n(e){var r=e.channelUrl,i=e.channelType,a=e.token,s=e.limit,o=t.call(this)||this;return o.method=Ie.GET,o.path="".concat(Gn(i),"/").concat(encodeURIComponent(r),"/operators"),o.params={token:a,limit:s},o}return G(n,t),n})(we),K$=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.operators=r.operators.map((function(a){return new fn(e,a)})),i.token=r.next,i}return G(n,t),n})(xe),Y$=(function(t){function n(e,r,i,a){return t.call(this,e,r,i,a)||this}return G(n,t),n.prototype._validate=function(){return t.prototype._validate.call(this)},n.prototype.next=function(){return D(this,void 0,void 0,(function(){var e,r,i,a,s,o,u;return O(this,(function(c){switch(c.label){case 0:return this._validate()?this._isLoading?[3,3]:(e=[],this._hasNext?(this._isLoading=!0,r=te.of(this._iid).requestQueue,i=new $$(Z(Z({},this),{channelUrl:this.channelUrl,token:this._token})),[4,r.send(i)]):[3,2]):[3,5];case 1:return a=c.sent(),s=a.as(K$),o=s.operators,u=s.token,this._token=u,this._hasNext=!!u,this._isLoading=!1,[2,o];case 2:return[2,e];case 3:throw ae.queryInProgress;case 4:return[3,6];case 5:throw ae.invalidParameters;case 6:return[2]}}))}))},n})(Ac),W$=(function(t){function n(e,r,i,a){var s,o,u,c,h,p,m,_,b,C,N=this;return(N=t.call(this,e,r,i,a)||this).reverse=!1,N.messageTypeFilter=Ia.ALL,N.customTypesFilter=null,N.senderUserIdsFilter=null,N.replyType=Yi.NONE,N.includeMetaArray=!1,N.includeReactions=!1,N.includeParentMessageInfo=!1,N.includeThreadInfo=!1,N.showSubchannelMessagesOnly=!1,N._edge=Number.MAX_SAFE_INTEGER,N.reverse=(s=a.reverse)!==null&&s!==void 0&&s,N.messageTypeFilter=(o=a.messageTypeFilter)!==null&&o!==void 0?o:Ia.ALL,N.customTypesFilter=(u=a.customTypesFilter)!==null&&u!==void 0?u:null,N.senderUserIdsFilter=(c=a.senderUserIdsFilter)!==null&&c!==void 0?c:null,N.replyType=(h=a.replyType)!==null&&h!==void 0?h:Yi.NONE,N.includeMetaArray=(p=a.includeMetaArray)!==null&&p!==void 0&&p,N.includeReactions=(m=a.includeReactions)!==null&&m!==void 0&&m,N.includeParentMessageInfo=(_=a.includeParentMessageInfo)!==null&&_!==void 0&&_,N.includeThreadInfo=(b=a.includeThreadInfo)!==null&&b!==void 0&&b,N.showSubchannelMessagesOnly=(C=a.showSubchannelMessagesOnly)!==null&&C!==void 0&&C,N}return G(n,t),n.prototype._validate=function(){return t.prototype._validate.call(this)&&re("boolean",this.reverse)&&dn(Ia,this.messageTypeFilter)&&dn(Yi,this.replyType)&&hn("string",this.customTypesFilter,!0)&&hn("string",this.senderUserIdsFilter,!0)&&re("boolean",this.includeMetaArray)&&re("boolean",this.includeReactions)&&re("boolean",this.includeParentMessageInfo)&&re("boolean",this.includeThreadInfo)&&re("boolean",this.showSubchannelMessagesOnly)},n.prototype.load=function(){return D(this,void 0,void 0,(function(){var e;return O(this,(function(r){switch(r.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,[4,Ki.of(this._iid).getMessagesByTimestamp(this.channelUrl,this.channelType,this._edge,ht({prevResultSize:this.limit,nextResultSize:0,isInclusive:!1,reverse:this.reverse,messageTypeFilter:this.messageTypeFilter,customTypesFilter:this.customTypesFilter,replyType:this.replyType,senderUserIdsFilter:this.senderUserIdsFilter,includeReactions:this.includeReactions,includeMetaArray:this.includeMetaArray,includeParentMessageInfo:this.includeParentMessageInfo,includeThreadInfo:this.includeThreadInfo,showSubchannelMessagesOnly:this.showSubchannelMessagesOnly}))]):[3,2]:[3,5];case 1:return e=r.sent(),this._edge=Math.min.apply(Math,wt([Number.MAX_SAFE_INTEGER],dt(e.map((function(i){return i.createdAt}))),!1)),this._hasNext=e.length>=this.limit,this._isLoading=!1,[2,e];case 2:return[2,[]];case 3:throw ae.queryInProgress;case 4:return[3,6];case 5:throw ae.invalidParameters;case 6:return[2]}}))}))},n})(Ac),Q$=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.channelType,s=e.limit,o=e.token;return(r=t.call(this)||this).method=Ie.GET,r.path="".concat(Gn(a),"/").concat(encodeURIComponent(i),"/mute"),r.params={limit:s,token:o},r}return G(n,t),n})(we),X$=(function(t){function n(e,r){var i=t.call(this,e,r)||this;i.mutedUsers=[];var a=r.next,s=r.muted_list;return i.token=a,s&&s.length>0&&(i.mutedUsers=s.map((function(o){return new Ap(e,o)}))),i}return G(n,t),n})(xe),Z$=(function(t){function n(e,r,i,a){return t.call(this,e,r,i,a)||this}return G(n,t),n.prototype.next=function(){return D(this,void 0,void 0,(function(){var e,r,i,a,s,o;return O(this,(function(u){switch(u.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=te.of(this._iid).requestQueue,r=new Q$(Z(Z({},this),{token:this._token})),[4,e.send(r)]):[3,2]:[3,5];case 1:return i=u.sent(),a=i.as(X$),s=a.mutedUsers,o=a.token,this._token=o,this._hasNext=!!o,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw ae.queryInProgress;case 4:return[3,6];case 5:throw ae.invalidParameters;case 6:return[2]}}))}))},n})(Ac),J$=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.channelType,s=e.limit,o=e.token;return(r=t.call(this)||this).method=Ie.GET,r.path="".concat(Gn(a),"/").concat(encodeURIComponent(i),"/ban"),r.params=ze({limit:s,token:o}),r}return G(n,t),n})(we),eK=(function(t){function n(e,r){var i=t.call(this,e,r)||this;i.bannedUsers=[];var a=r.next,s=r.banned_list;return i.token=a,s&&s.length>0&&(i.bannedUsers=s.map((function(o){return new Ap(e,o.user)}))),i}return G(n,t),n})(xe),tK=(function(t){function n(e,r,i,a){return t.call(this,e,r,i,a)||this}return G(n,t),n.prototype._validate=function(){return t.prototype._validate.call(this)},n.prototype.next=function(){return D(this,void 0,void 0,(function(){var e,r,i,a,s,o;return O(this,(function(u){switch(u.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=te.of(this._iid).requestQueue,r=new J$(Z(Z({},this),{token:this._token})),[4,e.send(r)]):[3,2]:[3,5];case 1:return i=u.sent(),a=i.as(eK),s=a.bannedUsers,o=a.token,this._token=o,this._hasNext=!!o,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw ae.queryInProgress;case 4:return[3,6];case 5:throw ae.invalidParameters;case 6:return[2]}}))}))},n})(Ac);(function(t){t.SPAM="spam",t.HARASSING="harassing",t.SUSPICIOUS="suspicious",t.INAPPROPRIATE="inappropriate"})(Ny||(Ny={}));var nK=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.channelType,s=e.operatorUserIds;return(r=t.call(this)||this).method=Ie.POST,r.path="".concat(Gn(a),"/").concat(encodeURIComponent(i),"/operators"),r.params={operator_ids:s},r}return G(n,t),n})(we);(function(t){function n(){return t!==null&&t.apply(this,arguments)||this}G(n,t)})(xe);var rK=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.channelType,s=e.operatorUserIds;return(r=t.call(this)||this).method=Ie.DELETE,r.path="".concat(Gn(a),"/").concat(encodeURIComponent(i),"/operators"),r.params={operator_ids:s},r}return G(n,t),n})(we);(function(t){function n(e,r){return t.call(this,e,r)||this}G(n,t)})(xe);var iK=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.channelType,s=e.userId;return(r=t.call(this)||this).method=Ie.GET,r.path="".concat(Gn(a),"/").concat(encodeURIComponent(i),"/mute/").concat(encodeURIComponent(s)),r}return G(n,t),n})(we),aK=(function(t){function n(e,r){var i=t.call(this,e,r)||this;i.isMuted=!1,i.startAt=0,i.endAt=0;var a=r.is_muted,s=r.start_at,o=r.end_at,u=r.remaining_duration,c=r.description;return i.isMuted=a,i.startAt=s,i.endAt=o,i.remainingDuration=u,i.description=c,i}return G(n,t),n})(xe),hD=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.channelType,s=e.keys;return(r=t.call(this)||this).method=Ie.GET,r.path="".concat(Gn(a),"/").concat(encodeURIComponent(i),"/metadata"),r.params={keys:s,include_ts:!0},r}return G(n,t),n})(we),fD=(function(t){function n(e,r){var i=t.call(this,e,r)||this,a=r.metadata,s=r.ts;return i.metadata=a,i.ts=s,i}return G(n,t),n})(xe),sK=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.channelType,s=e.metadata;return(r=t.call(this)||this).method=Ie.POST,r.path="".concat(Gn(a),"/").concat(encodeURIComponent(i),"/metadata"),r.params={metadata:s,include_ts:!0},r}return G(n,t),n})(we),oK=(function(t){function n(e,r){var i,a,s=this;return(s=t.call(this,e,r)||this).metaData=(i=r.metadata)!==null&&i!==void 0?i:{},s.ts=(a=r.ts)!==null&&a!==void 0?a:null,s}return G(n,t),n})(xe),lK=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.channelType,s=e.metadata,o=e.upsert;return(r=t.call(this)||this).method=Ie.PUT,r.path="".concat(Gn(a),"/").concat(encodeURIComponent(i),"/metadata"),r.params={metadata:s,include_ts:!0,upsert:o!=null&&o},r}return G(n,t),n})(we),uK=(function(t){function n(e,r){var i=t.call(this,e,r)||this,a=r.metadata,s=r.ts;return i.metadata=a,i.ts=s,i}return G(n,t),n})(xe),YP=(function(t){function n(e,r,i){var a=t.call(this,e,"SYEV",i)||this;return i.data&&(a.created=i.data.created,a.updated=i.data.updated,a.deleted=i.data.deleted),a}return G(n,t),n})(Rr),cK=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.channelType,s=e.key;return(r=t.call(this)||this).method=Ie.DELETE,r.path="".concat(Gn(a),"/").concat(encodeURIComponent(i),"/metadata/").concat(s),r.params={include_ts:!0},r}return G(n,t),n})(we),dK=(function(t){function n(e,r){var i=t.call(this,e,r)||this,a=r.ts;return i.ts=a,i}return G(n,t),n})(xe),hK=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.channelType;return(r=t.call(this)||this).method=Ie.DELETE,r.path="".concat(Gn(a),"/").concat(encodeURIComponent(i),"/metadata"),r.params={include_ts:!0},r}return G(n,t),n})(we),fK=(function(t){function n(e,r){var i=t.call(this,e,r)||this,a=r.ts;return i.ts=a,i}return G(n,t),n})(xe),vD=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.channelType,s=e.keys;return(r=t.call(this)||this).method=Ie.GET,r.path="".concat(Gn(a),"/").concat(encodeURIComponent(i),"/metacounter"),r.params={keys:s},r}return G(n,t),n})(we),pD=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.metaCounter=r,i}return G(n,t),n})(xe),vK=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.channelType,s=e.metaCounter;return(r=t.call(this)||this).method=Ie.POST,r.path="".concat(Gn(a),"/").concat(encodeURIComponent(i),"/metacounter"),r.params={metacounter:s},r}return G(n,t),n})(we),pK=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.metaCounter=r,i}return G(n,t),n})(xe),aN=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.channelType,s=e.metaCounter,o=e.upsert,u=o!==void 0&&o,c=e.mode,h=c===void 0?"set":c;return(r=t.call(this)||this).method=Ie.PUT,r.path="".concat(Gn(a),"/").concat(encodeURIComponent(i),"/metacounter"),r.params={metacounter:s,upsert:u,mode:h},r}return G(n,t),n})(we),sN=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.metaCounter=r,i}return G(n,t),n})(xe),WP=(function(t){function n(e,r,i){var a=t.call(this,e,"SYEV",i)||this;return i.data&&(a.created=i.data.created,a.updated=i.data.updated,a.deleted=i.data.deleted),a}return G(n,t),n})(Rr),mK=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.channelType,s=e.key;return(r=t.call(this)||this).method=Ie.DELETE,r.path="".concat(Gn(a),"/").concat(encodeURIComponent(i),"/metacounter/").concat(s),r.params={},r}return G(n,t),n})(we);(function(t){function n(e,r){return t.call(this,e,r)||this}G(n,t)})(xe);var gK=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.channelType;return(r=t.call(this)||this).method=Ie.DELETE,r.path="".concat(Gn(a),"/").concat(encodeURIComponent(i),"/metacounter"),r.params={},r}return G(n,t),n})(we);(function(t){function n(){return t!==null&&t.apply(this,arguments)||this}G(n,t)})(xe);var _K=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.channelType,s=e.userId,o=e.seconds,u=e.description;return(r=t.call(this)||this).method=Ie.POST,r.path="".concat(Gn(a),"/").concat(encodeURIComponent(i),"/mute"),r.params={user_id:s,seconds:o,description:u},r}return G(n,t),n})(we);(function(t){function n(e,r){return t.call(this,e,r)||this}G(n,t)})(xe);var QP=(function(t){function n(e,r,i){var a=t.call(this,e,"SYEV",i)||this;return a.user=new Ap(e,i.data),a}return G(n,t),n})(Rr),yK=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.channelType,s=e.userId;return(r=t.call(this)||this).method=Ie.DELETE,r.path="".concat(Gn(a),"/").concat(encodeURIComponent(i),"/mute/").concat(encodeURIComponent(s)),r}return G(n,t),n})(we);(function(t){function n(){return t!==null&&t.apply(this,arguments)||this}G(n,t)})(xe);var XP=(function(t){function n(e,r,i){var a=t.call(this,e,"SYEV",i)||this;return a.user=new Ap(e,i.data),a}return G(n,t),n})(Rr),EK=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.channelType,s=e.userId,o=e.seconds,u=e.description;return(r=t.call(this)||this).method=Ie.POST,r.path="".concat(Gn(a),"/").concat(encodeURIComponent(i),"/ban"),r.params=ze({user_id:s,seconds:o,description:u}),r}return G(n,t),n})(we);(function(t){function n(){return t!==null&&t.apply(this,arguments)||this}G(n,t)})(xe);var ZP=(function(t){function n(e,r,i){var a=t.call(this,e,"SYEV",i)||this;return a.user=new Ap(e,i.data),i.data.member_count&&(a.memberCount=i.data.member_count),i.data.joined_member_count&&(a.joinedMemberCount=i.data.joined_member_count),a}return G(n,t),n})(Rr),bK=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.channelType,s=e.userId;return(r=t.call(this)||this).method=Ie.DELETE,r.path="".concat(Gn(a),"/").concat(encodeURIComponent(i),"/ban/").concat(encodeURIComponent(s)),r}return G(n,t),n})(we);(function(t){function n(){return t!==null&&t.apply(this,arguments)||this}G(n,t)})(xe);var JP=(function(t){function n(e,r,i){var a=t.call(this,e,"SYEV",i)||this;return a.user=new Ap(e,i.data),a}return G(n,t),n})(Rr),mD=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.channelType,s=e.freezing;return(r=t.call(this)||this).method=Ie.PUT,r.path="".concat(Gn(a),"/").concat(encodeURIComponent(i),"/freeze"),r.params={freeze:s},r}return G(n,t),n})(we);(function(t){function n(){return t!==null&&t.apply(this,arguments)||this}G(n,t)})(xe);var e5=(function(t){function n(e,r,i){var a=t.call(this,e,"SYEV",i)||this;return a.freeze=i.data.freeze,a}return G(n,t),n})(Rr),Dw=function(t){return t instanceof vg?t._custom?"custom":t.name:t},Uw=function(t){if(t instanceof vg&&t._custom)return t.name},CK=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.channelType,s=e.category,o=e.userId,u=e.description;return(r=t.call(this)||this).method=Ie.POST,r.path="".concat(Gk(a),"/").concat(encodeURIComponent(i)),r.params=ze({report_category:Dw(s),reporting_user_id:o,report_description:u,custom_report_category_name:Uw(s)}),r}return G(n,t),n})(we),SK=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.channelType,s=e.category,o=e.userId,u=e.offendingUserId,c=e.description;return(r=t.call(this)||this).method=Ie.POST,r.path="".concat(EA,"/users/").concat(u),r.params=ze({channel_url:i,channel_type:a===yn.OPEN?"open_channels":"group_channels",report_category:Dw(s),reporting_user_id:o,report_description:c,custom_report_category_name:Uw(s)}),r}return G(n,t),n})(we),TK=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.channelType,s=e.category,o=e.userId,u=e.offendingUserId,c=e.messageId,h=e.description;return(r=t.call(this)||this).method=Ie.POST,r.path="".concat(Gk(a),"/").concat(encodeURIComponent(i),"/messages/").concat(c),r.params=ze({report_category:Dw(s),reporting_user_id:o,report_description:h,offending_user_id:u,custom_report_category_name:Uw(s)}),r}return G(n,t),n})(we),NK=(function(t){function n(e){var r=[];return e.mentionType===Oa.USERS&&(e.mentionedUserIds?r=e.mentionedUserIds:e.mentionedUsers&&(r=e.mentionedUsers.map((function(i){return i.userId})))),t.call(this,{code:"MESG",ackRequired:!0,payload:ze(ht({channel_url:e.channelUrl,message:e.message,data:e.data,custom_type:e.customType,metaarray:e.metaArrays,mention_type:e.mentionType,mentioned_user_ids:r,mentioned_message_template:e.mentionedMessageTemplate,target_langs:e.translationTargetLanguages,push_option:e.pushNotificationDeliveryOption&&e.pushNotificationDeliveryOption!==Au.DEFAULT?e.pushNotificationDeliveryOption:void 0,apple_critical_alert_options:e.appleCriticalAlertOptions,silent:e.silent,reply_to_channel:e.isReplyToChannel,parent_message_id:e.parentMessageId?e.parentMessageId:null,req_id:e.reqId,poll_id:e.pollId,pin_message:e.isPinnedMessage,extended_message_payload:e.extendedMessagePayload}))})||this}return G(n,t),n})(Ra),xw=(function(t){function n(e,r,i){var a,s,o,u,c=this;(c=t.call(this,e,"MESG",i)||this).message=new Ma(e,i);var h=te.of(e).sdkState;return c.isMentioned=Eg(c.message.mentionType,(o=(a=c.message.mentionedUserIds)!==null&&a!==void 0?a:(s=c.message.mentionedUsers)===null||s===void 0?void 0:s.map((function(p){return p.userId})))!==null&&o!==void 0?o:[],h.userId),c.forceUpdateLastMessage=(u=i.force_update_last_message)!==null&&u!==void 0&&u,c}return G(n,t),n})(Rr),gD=(function(t){function n(e){var r=null;return e.mentionType===Oa.USERS&&(e.mentionedUserIds?r=e.mentionedUserIds:e.mentionedUsers&&(r=e.mentionedUsers.map((function(i){return i.userId})))),t.call(this,{code:"MEDI",ackRequired:!0,payload:ze(ht({channel_url:e.channelUrl,msg_id:e.messageId,message:e.message,data:e.data,custom_type:e.customType,metaarray:e.metaArrayParams,mention_type:e.mentionType,mentioned_user_ids:r,mentioned_message_template:e.mentionedMessageTemplate,apple_critical_alert_options:e.appleCriticalAlertOptions?xl.payloadify(e.appleCriticalAlertOptions):null,poll_id:e.pollId}))})||this}return G(n,t),n})(Ra),iS=(function(t){function n(e,r,i){var a,s,o,u,c,h=this;(h=t.call(this,e,"MEDI",i)||this).message=new Ma(e,i);var p=te.of(e).sdkState;return h.mentionCountChange=mw({mentionType:(a=i.old_values)===null||a===void 0?void 0:a.mention_type,mentionedUserIds:(o=(s=i.old_values)===null||s===void 0?void 0:s.mentioned_user_ids)!==null&&o!==void 0?o:[]},ht({mentionType:h.message.mentionType,mentionedUserIds:(u=h.message.mentionedUserIds)!==null&&u!==void 0?u:(c=h.message.mentionedUsers)===null||c===void 0?void 0:c.map((function(m){return m.userId}))}),p.userId),h}return G(n,t),n})(Rr),_D=(function(t){function n(e){var r=null;return e.mentionType===Oa.USERS&&(e.mentionedUserIds?r=e.mentionedUserIds:e.mentionedUsers&&(r=e.mentionedUsers.map((function(i){return i.userId})))),t.call(this,{code:"FEDI",ackRequired:!0,payload:ze(ht({channel_url:e.channelUrl,msg_id:e.messageId,data:e.data,custom_type:e.customType,metaarray:e.metaArrayParams,mention_type:e.mentionType,mentioned_user_ids:r,apple_critical_alert_options:e.appleCriticalAlertOptions}))})||this}return G(n,t),n})(Ra),aS=(function(t){function n(e,r,i){var a,s,o,u,c,h=this;(h=t.call(this,e,"FEDI",i)||this).message=new Ai(e,i);var p=te.of(e).sdkState;return h.mentionCountChange=mw({mentionType:(a=i.old_values)===null||a===void 0?void 0:a.mention_type,mentionedUserIds:(o=(s=i.old_values)===null||s===void 0?void 0:s.mentioned_user_ids)!==null&&o!==void 0?o:[]},ht({mentionType:h.message.mentionType,mentionedUserIds:(u=h.message.mentionedUserIds)!==null&&u!==void 0?u:(c=h.message.mentionedUsers)===null||c===void 0?void 0:c.map((function(m){return m.userId}))}),p.userId),h}return G(n,t),n})(Rr),AK=(function(t){function n(e){var r=e.channelType,i=e.channelUrl,a=e.messageId,s=e.reactionKey,o=t.call(this)||this;return o.method=Ie.POST,o.path="".concat(Gn(r),"/").concat(encodeURIComponent(i),"/messages/").concat(a,"/reactions"),o.params={reaction:s},o}return G(n,t),n})(we),MK=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.reactionEvent=new Iw(r),i}return G(n,t),n})(xe),IK=(function(t){function n(e){var r=e.channelType,i=e.channelUrl,a=e.messageId,s=e.reactionKey,o=t.call(this)||this;return o.method=Ie.DELETE,o.path="".concat(Gn(r),"/").concat(encodeURIComponent(i),"/messages/").concat(a,"/reactions"),o.params={reaction:s},o}return G(n,t),n})(we),wK=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.reactionEvent=new Iw(Z({},r)),i}return G(n,t),n})(xe),RK=(function(t){function n(e){var r=e.channelType,i=e.channelUrl,a=e.messageId,s=e.translationTargetLanguages,o=t.call(this)||this;return o.method=Ie.POST,o.path="".concat(Gn(r),"/").concat(encodeURIComponent(i),"/messages/").concat(encodeURIComponent(a),"/translation"),o.params={target_langs:s},o}return G(n,t),n})(we),OK=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.message=new Ma(e,r),i}return G(n,t),n})(xe),DK=(function(t){function n(e){var r,i=this;i=t.call(this)||this;var a=[];e.mentionType===Oa.USERS&&(e.mentionedUserIds?a=e.mentionedUserIds:e.mentionedUsers&&(a=e.mentionedUsers.map((function(u){return u.userId}))));var s=e.channelType,o=e.channelUrl;return i.method=Ie.POST,i.path="".concat(Gn(s),"/").concat(encodeURIComponent(o),"/scheduled_messages"),i.params=ze(ht({req_id:e.reqId,scheduled_at:e.scheduledAt,message_type:yg.USER,message:e.message,custom_type:e.customType,data:e.data,mention_type:e.mentionType,mentioned_user_ids:a,sorted_metaarray:(r=e.metaArrays)===null||r===void 0?void 0:r.map((function(u){return _a.payloadify(u)})),apple_critical_alert_options:e.appleCriticalAlertOptions?xl.payloadify(e.appleCriticalAlertOptions):null,target_langs:e.translationTargetLanguages,push_option:e.pushNotificationDeliveryOption})),i}return G(n,t),n})(we),t5=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.message=new Ma(e,r),i}return G(n,t),n})(xe),UK=(function(t){function n(e){var r,i,a=this;a=t.call(this)||this;var s=[];e.mentionType===Oa.USERS&&(e.mentionedUserIds?s=e.mentionedUserIds:e.mentionedUsers&&(s=e.mentionedUsers.map((function(c){return c.userId}))));var o=e.channelType,u=e.channelUrl;return a.method=Ie.POST,a.path="".concat(Gn(o),"/").concat(encodeURIComponent(u),"/scheduled_messages"),a.params=ht({req_id:e.reqId,scheduled_at:e.scheduledAt,message_type:yg.FILE,url:e.fileUrl,file_name:e.fileName,file_size:e.fileSize,file_type:e.mimeType,thumbnails:(r=e._thumbnails)===null||r===void 0?void 0:r.map((function(c){return Rd.payloadify(c)})),custom_type:e.customType,data:e.data,require_auth:e.requireAuth,mention_type:e.mentionType,mentioned_user_ids:s,sorted_metaarray:(i=e.metaArrays)===null||i===void 0?void 0:i.map((function(c){return _a.payloadify(c)})),apple_critical_alert_options:e.appleCriticalAlertOptions?xl.payloadify(e.appleCriticalAlertOptions):null,push_option:e.pushNotificationDeliveryOption}),a}return G(n,t),n})(we),xK=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.message=new Ai(e,r),i}return G(n,t),n})(xe),LK=(function(t){function n(e){var r=e.pollId,i=e.title,a=e.data,s=e.allowUserSuggestion,o=e.allowMultipleVotes,u=e.closeAt,c=t.call(this)||this;return c.method=Ie.PUT,c.path="".concat(Iu,"/").concat(encodeURIComponent(r)),c.params={title:i,data:a,allow_user_suggestion:s,allow_multiple_votes:o,close_at:u},c}return G(n,t),n})(we),kK=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.poll=new Ul(e,r),i}return G(n,t),n})(xe),PK=(function(t){function n(e){var r=e.pollId,i=t.call(this)||this;return i.method=Ie.DELETE,i.path="".concat(Iu,"/").concat(encodeURIComponent(r)),i}return G(n,t),n})(we);(function(t){function n(){return t!==null&&t.apply(this,arguments)||this}G(n,t)})(xe);var FK=(function(t){function n(e){var r=e.pollId,i=t.call(this)||this;return i.method=Ie.PUT,i.path="".concat(Iu,"/").concat(encodeURIComponent(r),"/close"),i}return G(n,t),n})(we),BK=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.poll=new Ul(e,r),i}return G(n,t),n})(xe),HK=(function(t){function n(e){var r=e.channelUrl,i=e.channelType,a=e.pollId,s=e.optionText,o=t.call(this)||this;return o.method=Ie.POST,o.path="".concat(Iu,"/").concat(encodeURIComponent(a),"/options"),o.params={channel_url:r,channel_type:i,text:s},o}return G(n,t),n})(we),GK=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.poll=new Ul(e,r),i}return G(n,t),n})(xe),VK=(function(t){function n(e){var r=e.pollId,i=e.pollOptionId,a=e.optionText,s=t.call(this)||this;return s.method=Ie.PUT,s.path="".concat(Iu,"/").concat(encodeURIComponent(r),"/options/").concat(encodeURIComponent(i)),s.params={text:a},s}return G(n,t),n})(we),zK=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.poll=new Ul(e,r),i}return G(n,t),n})(xe),jK=(function(t){function n(e){var r=e.pollId,i=e.pollOptionId,a=t.call(this)||this;return a.method=Ie.DELETE,a.path="".concat(Iu,"/").concat(encodeURIComponent(r),"/options/").concat(encodeURIComponent(i)),a}return G(n,t),n})(we);(function(t){function n(){return t!==null&&t.apply(this,arguments)||this}G(n,t)})(xe);var qK=(function(t){function n(e){var r=e.reqId,i=e.channelType,a=e.channelUrl,s=e.pollId,o=e.pollOptionIds;return t.call(this,{code:"VOTE",ackRequired:!0,payload:ze({req_id:r,channel_type:i===yn.OPEN?"open_channels":"group_channels",channel_url:a,poll_id:s,option_ids:o})})||this}return G(n,t),n})(Ra),Lw=(function(t){function n(e,r,i){var a=t.call(this,e,"VOTE",i)||this;return a.event=new o$(i),a.channelUrl=i.channel_url,a.channelType=i.channel_type,a}return G(n,t),n})(Rr),n5=100,r5="GroupChannel",$K="url",i5=100,kw="Message",KK="messageId",a5="NotificationMessage",YK="notificationId",WK="Poll",QK="pollId",XK="FeedChannel",ZK="url",s5="UserInfo",JK="userId";function eY(t){var n,e,r;return(n=t.messageParams)!==null&&n!==void 0?n:ht(Z(Z({},t),{isReplyToChannel:!1,mentionedUserIds:(e=t.mentionedUserIds)!==null&&e!==void 0?e:(r=t.mentionedUsers)===null||r===void 0?void 0:r.map((function(i){return i.userId})),pushNotificationDeliveryOption:Au.DEFAULT,isPinnedMessage:!1,fileInfoList:t.fileInfoList.map((function(i){var a;return{fileUrl:i.plainUrl,fileName:i.fileName,fileSize:i.fileSize,mimeType:i.mimeType,thumbnailSizes:(a=i.thumbnails)===null||a===void 0?void 0:a.map((function(s){return{maxWidth:s.width,maxHeight:s.height}})),_thumbnails:i.thumbnails,_uploadedMetaData:{requireAuth:i._requireAuth,isUploaded:!0}}}))}))}var tY=Z(Z({},jS),{fileInfoList:[],message:""}),nY=function(t){return(ra(t.file)||re("string",t.fileUrl))&&re("string",t.fileName,!0)&&re("string",t.mimeType,!0)&&re("number",t.fileSize,!0)&&(t.thumbnailSizes===void 0||Array.isArray(t.thumbnailSizes)&&t.thumbnailSizes.every((function(n){return n.maxWidth>0&&n.maxHeight>0})))},SC=(function(t){function n(){var e=t!==null&&t.apply(this,arguments)||this;return e._onFileUploaded=Bt,e}return G(n,t),n.prototype._triggerOnFileUploaded=function(e,r,i,a){this._onFileUploaded(e,r,i,a)},n.prototype.onFileUploaded=function(e){return this._onFileUploaded=e,this},n.prototype.onPending=function(e){return t.prototype.onPending.call(this,e),this},n.prototype.onFailed=function(e){return t.prototype.onFailed.call(this,e),this},n.prototype.onSucceeded=function(e){return t.prototype.onSucceeded.call(this,e),this},n})(po),rY=(function(t){function n(e,r){var i=t.call(this,e)||this;return i.message=null,i.message=Da(e,r.message),i}return G(n,t),n})(wi),iY=(function(t){function n(e){var r=this,i=e.channelType,a=e.channelUrl,s=e.limit,o=e.token,u=e.includeReactions,c=e.includeMetaArray,h=e.includeParentMessageInfo,p=e.includeThreadInfo,m=e.includePollDetails;return(r=t.call(this)||this).method=Ie.GET,r.path="".concat(Gn(i),"/").concat(encodeURIComponent(a),"/pinned_messages"),r.params=ze({limit:s,token:o,include_reactions_summary:u,with_sorted_meta_array:c,include_thread_info:p,include_parent_message_info:h,include_poll_details:m}),r}return G(n,t),n})(we),aY=(function(t){function n(e,r){var i=t.call(this,e,r)||this,a=r.pinned_messages,s=r.has_more,o=r.next;return i.pinnedMessages=a.map((function(u){return new rY(e,u)})),i.hasMore=s,i.token=o,i}return G(n,t),n})(xe),sY=(function(t){function n(e,r,i,a){var s=t.call(this,e,r,i,a)||this;return s.includeMetaArray=a.includeMetaArray,s.includeReactions=a.includeReactions,s.includeParentMessageInfo=a.includeParentMessageInfo,s.includeThreadInfo=a.includeThreadInfo,s.includePollDetails=a.includePollDetails,s}return G(n,t),n.prototype._validate=function(){return t.prototype._validate.call(this)&&re("boolean",this.includeMetaArray,!0)&&re("boolean",this.includeReactions,!0)&&re("boolean",this.includeParentMessageInfo,!0)&&re("boolean",this.includeThreadInfo,!0)&&re("boolean",this.includePollDetails,!0)},n.prototype.next=function(){return D(this,void 0,void 0,(function(){var e,r,i,a,s,o,u;return O(this,(function(c){switch(c.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=te.of(this._iid).requestQueue,r=new iY(Z(Z({},this),{token:this._token})),[4,e.send(r)]):[3,2]:[3,5];case 1:return i=c.sent(),a=i.as(aY),s=a.pinnedMessages,o=a.hasMore,u=a.token,this._token=u,this._hasNext=!!o,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw ae.queryInProgress;case 4:return[3,6];case 5:throw ae.invalidParameters;case 6:return[2]}}))}))},n})(Ac),oY=(function(t){function n(e){var r=e.channelType,i=e.channelUrl,a=e.messageId,s=t.call(this)||this;return s.method=Ie.POST,s.path="".concat(Gn(r),"/").concat(encodeURIComponent(i),"/messages/").concat(a,"/pin"),s}return G(n,t),n})(we);(function(t){function n(e,r){return t.call(this,e,r)||this}G(n,t)})(xe);var lY=(function(t){function n(e){var r=e.channelType,i=e.channelUrl,a=e.messageId,s=t.call(this)||this;return s.method=Ie.DELETE,s.path="".concat(Gn(r),"/").concat(encodeURIComponent(i),"/messages/").concat(a,"/pin"),s}return G(n,t),n})(we);(function(t){function n(e,r){return t.call(this,e,r)||this}G(n,t)})(xe);var Na,uY=2;(function(t){t.SEND="send",t.RESEND="resend",t.COPY="copy"})(Na||(Na={}));var jr,sS=(function(t){function n(e,r){var i,a,s,o,u,c,h,p=this;return(p=t.call(this,e)||this)._name="",p._createdAt=0,p.pinnedMessageIds=[],p.channelType=yn.BASE,p.coverUrl="",p.customType="",p.data="",p.isFrozen=!1,p.isEphemeral=!1,p.creator=null,p._messageCollectionLastAccessedAt=0,p._url=r.channel_url,p._name=(i=r.name)!==null&&i!==void 0?i:"",p._createdAt=1e3*r.created_at,p.coverUrl=(a=r.cover_url)!==null&&a!==void 0?a:"",p.customType=(s=r.custom_type)!==null&&s!==void 0?s:"",p.data=(o=r.data)!==null&&o!==void 0?o:"",p.isFrozen=(u=r.freeze)!==null&&u!==void 0&&u,p.isEphemeral=(c=r.is_ephemeral)!==null&&c!==void 0&&c,p.creator=r.created_by?new fn(p._iid,r.created_by):null,r.metadata&&Object.keys(r.metadata).length>0&&r.ts?(p._cachedMetaData=new Map,Object.keys(r.metadata).forEach((function(m){p._cachedMetaData.set(m,{value:r.metadata[m],isRemoved:!1,updatedAt:r.ts})}))):typeof r.metadata=="string"&&(p._cachedMetaData=new Map(Object.entries(JSON.parse(r.metadata)))),p.pinnedMessageIds=(h=r.pinned_message_ids)!==null&&h!==void 0?h:[],p}return G(n,t),Object.defineProperty(n.prototype,"url",{get:function(){return this._url},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"name",{get:function(){return this._name},set:function(e){this._name=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"createdAt",{get:function(){return this._createdAt},enumerable:!1,configurable:!0}),n.prototype.toJSON=function(){return Z(Z({},this),{url:this._url,name:this._name,createdAt:this._createdAt})},n.payloadify=function(e,r){r===void 0&&(r=!1);var i=Z(Z({},t.payloadify.call(this,e)),{channel_url:e.url,name:e.name,cover_url:e.coverUrl,custom_type:e.customType,data:e.data,freeze:e.isFrozen,is_ephemeral:e.isEphemeral,created_by:e.creator?fn.payloadify(e.creator):null,created_at:e.createdAt/1e3,metadata:e.cachedMetaData,pinned_message_ids:e.pinnedMessageIds});return r?i:ze(ht(i))},n.prototype.isGroupChannel=function(){return this.channelType===yn.GROUP},n.prototype.isOpenChannel=function(){return this.channelType===yn.OPEN},n.prototype.isFeedChannel=function(){return this.channelType===yn.FEED},Object.defineProperty(n.prototype,"cachedMetaData",{get:function(){var e={};return this._cachedMetaData&&this._cachedMetaData.forEach((function(r,i){r.isRemoved||(e[i]=r.value)})),e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"messageCollectionLastAccessedAt",{get:function(){return this._messageCollectionLastAccessedAt},enumerable:!1,configurable:!0}),n.prototype._serializeCachedMetaData=function(){return this._cachedMetaData?{cachedMetaData:JSON.stringify(Object.fromEntries(this._cachedMetaData))}:{}},n.prototype._updateMessageCollectionLastAccessedAt=function(){this._messageCollectionLastAccessedAt=Date.now()},n.prototype._update=function(e){Object.assign(this,e)},n.prototype._upsertCachedMetaData=function(e,r){var i=this;Object.keys(e).forEach((function(a){i._cachedMetaData||(i._cachedMetaData=new Map);var s=i._cachedMetaData.get(a);(!s||s.updatedAt<=r)&&i._cachedMetaData.set(a,{value:e[a],isRemoved:!1,updatedAt:r})}))},n.prototype._updateCachedMetaData=function(e,r){var i=this,a=!1;return this._cachedMetaData?this._cachedMetaData.forEach((function(s,o){var u;s.updatedAt<=r&&(i._cachedMetaData.set(o,{value:(u=e[o])!==null&&u!==void 0?u:s.value,isRemoved:!e[o],updatedAt:r}),a=!0)})):(this._cachedMetaData=new Map,Object.keys(e).forEach((function(s){i._cachedMetaData.set(s,{value:e[s],isRemoved:!1,updatedAt:r})})),a=!0),{isUpdated:a}},n.prototype._removeFromCachedMetaData=function(e,r){var i=this;this._cachedMetaData&&e.forEach((function(a){var s=i._cachedMetaData.get(a);s&&s.updatedAt<r&&(s.isRemoved=!0,s.updatedAt=r)}))},n.prototype._clearCachedMetaData=function(){this._cachedMetaData&&this._cachedMetaData.clear()},n.prototype._runIfHandleableWithGroupChannel=function(e){this.isGroupChannel()?e(this):this.isFeedChannel()&&e(this.groupChannel)},n.prototype._generateRequestId=function(){return"rq-".concat(il())},n.prototype.isIdentical=function(e){return e&&this.url===e.url},n.prototype.isEqual=function(e){return xk(this,e)},n.prototype.createOperatorListQuery=function(e){return e===void 0&&(e={}),new Y$(this._iid,this.url,this.channelType,e)},n.prototype.createMutedUserListQuery=function(e){return e===void 0&&(e={}),new Z$(this._iid,this.url,this.channelType,e)},n.prototype.createBannedUserListQuery=function(e){return e===void 0&&(e={}),new tK(this._iid,this.url,this.channelType,e)},n.prototype.createPreviousMessageListQuery=function(e){return e===void 0&&(e={}),new W$(this._iid,this.url,this.channelType,e)},n.prototype.createPinnedMessageListQuery=function(e){return e===void 0&&(e={}),new sY(this._iid,this.url,this.channelType,e)},n.prototype.addOperators=function(e){return D(this,void 0,void 0,(function(){var r,i;return O(this,(function(a){switch(a.label){case 0:return Ue(hn("string",e)).throw(ae.invalidParameters),r=te.of(this._iid).requestQueue,i=new nK({channelUrl:this.url,channelType:this.channelType,operatorUserIds:e}),[4,r.send(i)];case 1:return a.sent(),[2]}}))}))},n.prototype.removeOperators=function(e){return D(this,void 0,void 0,(function(){var r,i;return O(this,(function(a){switch(a.label){case 0:return Ue(hn("string",e)).throw(ae.invalidParameters),r=te.of(this._iid).requestQueue,i=new rK({channelUrl:this.url,channelType:this.channelType,operatorUserIds:e}),[4,r.send(i)];case 1:return a.sent(),[2]}}))}))},n.prototype.getMyMutedInfo=function(){return D(this,void 0,void 0,(function(){var e,r,i,a,s,o,u,c,h,p,m;return O(this,(function(_){switch(_.label){case 0:return e=te.of(this._iid),r=e.sdkState,i=e.requestQueue,a=new iK({channelUrl:this.url,channelType:this.channelType,userId:r.userId}),[4,i.send(a)];case 1:return s=_.sent(),o=s.as(aK),u=o.isMuted,c=o.startAt,h=o.endAt,p=o.remainingDuration,m=o.description,[2,{isMuted:u,startAt:c,endAt:h,remainingDuration:p,description:m}]}}))}))},n.prototype.getMetaData=function(e){return D(this,void 0,void 0,(function(){var r,i,a,s,o,u;return O(this,(function(c){switch(c.label){case 0:return Ue(hn("string",e)).throw(ae.invalidParameters),r=te.of(this._iid).requestQueue,i=new hD({channelUrl:this.url,channelType:this.channelType,keys:e}),[4,r.send(i)];case 1:return a=c.sent(),s=a.as(fD),o=s.metadata,u=s.ts,this._upsertCachedMetaData(o,u),[2,o]}}))}))},n.prototype.getAllMetaData=function(){return D(this,void 0,void 0,(function(){var e,r,i,a,s,o;return O(this,(function(u){switch(u.label){case 0:return e=te.of(this._iid).requestQueue,r=new hD({channelUrl:this.url,channelType:this.channelType,keys:[]}),[4,e.send(r)];case 1:return i=u.sent(),a=i.as(fD),s=a.metadata,o=a.ts,this._updateCachedMetaData(s,o),[2,s]}}))}))},n.prototype.createMetaData=function(e){return D(this,void 0,void 0,(function(){var r,i,a,s;return O(this,(function(o){switch(o.label){case 0:return r=te.of(this._iid).requestQueue,i=new sK({channelUrl:this.url,channelType:this.channelType,metadata:e}),[4,r.send(i)];case 1:return a=o.sent(),s=a.as(oK).metaData,this._upsertCachedMetaData(s,0),[2,s]}}))}))},n.prototype.updateMetaData=function(e,r){return r===void 0&&(r=!1),D(this,void 0,void 0,(function(){var i,a,s,o,u,c;return O(this,(function(h){switch(h.label){case 0:return i=te.of(this._iid).requestQueue,a=new lK({channelUrl:this.url,channelType:this.channelType,metadata:e,upsert:r}),[4,i.send(a)];case 1:return s=h.sent(),o=s.as(uK),u=o.metadata,c=o.ts,this._upsertCachedMetaData(u,c),[2,u]}}))}))},n.prototype.deleteMetaData=function(e){return D(this,void 0,void 0,(function(){var r,i,a,s;return O(this,(function(o){switch(o.label){case 0:return Ue(re("string",e)).throw(ae.invalidParameters),r=te.of(this._iid).requestQueue,i=new cK({channelUrl:this.url,channelType:this.channelType,key:e}),[4,r.send(i)];case 1:return a=o.sent(),s=a.as(dK).ts,this._removeFromCachedMetaData([e],s),[2]}}))}))},n.prototype.deleteAllMetaData=function(){return D(this,void 0,void 0,(function(){var e,r,i,a;return O(this,(function(s){switch(s.label){case 0:return e=te.of(this._iid).requestQueue,r=new hK({channelUrl:this.url,channelType:this.channelType}),[4,e.send(r)];case 1:return i=s.sent(),a=i.as(fK).ts,this._removeFromCachedMetaData(wt([],dt(this._cachedMetaData.keys()),!1),a),[2]}}))}))},n.prototype.getMetaCounters=function(e){return D(this,void 0,void 0,(function(){var r,i,a;return O(this,(function(s){switch(s.label){case 0:return Ue(hn("string",e)).throw(ae.invalidParameters),r=te.of(this._iid).requestQueue,i=new vD({channelUrl:this.url,channelType:this.channelType,keys:e}),[4,r.send(i)];case 1:return a=s.sent(),[2,a.as(pD).metaCounter]}}))}))},n.prototype.getAllMetaCounters=function(){return D(this,void 0,void 0,(function(){var e,r,i;return O(this,(function(a){switch(a.label){case 0:return e=te.of(this._iid).requestQueue,r=new vD({channelUrl:this.url,channelType:this.channelType,keys:[]}),[4,e.send(r)];case 1:return i=a.sent(),[2,i.as(pD).metaCounter]}}))}))},n.prototype.createMetaCounters=function(e){return D(this,void 0,void 0,(function(){var r,i,a;return O(this,(function(s){switch(s.label){case 0:return r=te.of(this._iid).requestQueue,i=new vK({channelUrl:this.url,channelType:this.channelType,metaCounter:e}),[4,r.send(i)];case 1:return a=s.sent(),[2,a.as(pK).metaCounter]}}))}))},n.prototype.updateMetaCounters=function(e,r){return r===void 0&&(r=!1),D(this,void 0,void 0,(function(){var i,a,s;return O(this,(function(o){switch(o.label){case 0:return i=te.of(this._iid).requestQueue,a=new aN({channelUrl:this.url,channelType:this.channelType,metaCounter:e,upsert:r}),[4,i.send(a)];case 1:return s=o.sent(),[2,s.as(sN).metaCounter]}}))}))},n.prototype.increaseMetaCounters=function(e){return D(this,void 0,void 0,(function(){var r,i,a;return O(this,(function(s){switch(s.label){case 0:return r=te.of(this._iid).requestQueue,i=new aN({channelUrl:this.url,channelType:this.channelType,metaCounter:e,upsert:!1,mode:"increase"}),[4,r.send(i)];case 1:return a=s.sent(),[2,a.as(sN).metaCounter]}}))}))},n.prototype.decreaseMetaCounters=function(e){return D(this,void 0,void 0,(function(){var r,i,a;return O(this,(function(s){switch(s.label){case 0:return r=te.of(this._iid).requestQueue,i=new aN({channelUrl:this.url,channelType:this.channelType,metaCounter:e,upsert:!1,mode:"decrease"}),[4,r.send(i)];case 1:return a=s.sent(),[2,a.as(sN).metaCounter]}}))}))},n.prototype.deleteMetaCounter=function(e){return D(this,void 0,void 0,(function(){var r,i;return O(this,(function(a){switch(a.label){case 0:return Ue(re("string",e)).throw(ae.invalidParameters),r=te.of(this._iid).requestQueue,i=new mK({channelUrl:this.url,channelType:this.channelType,key:e}),[4,r.send(i)];case 1:return a.sent(),[2]}}))}))},n.prototype.deleteAllMetaCounters=function(){return D(this,void 0,void 0,(function(){var e,r;return O(this,(function(i){switch(i.label){case 0:return e=te.of(this._iid).requestQueue,r=new gK({channelUrl:this.url,channelType:this.channelType}),[4,e.send(r)];case 1:return i.sent(),[2]}}))}))},n.prototype.muteUser=function(e,r,i){return D(this,void 0,void 0,(function(){return O(this,(function(a){return[2,this.muteUserWithUserId(e.userId,r,i)]}))}))},n.prototype.muteUserWithUserId=function(e,r,i){return D(this,void 0,void 0,(function(){var a,s;return O(this,(function(o){switch(o.label){case 0:return Ue(re("string",e)&&re("number",r,!0)&&re("string",i,!0)).throw(ae.invalidParameters),a=te.of(this._iid).requestQueue,s=new _K({channelUrl:this.url,channelType:this.channelType,userId:e,seconds:r,description:i}),[4,a.send(s)];case 1:return o.sent(),[2]}}))}))},n.prototype.unmuteUser=function(e){return D(this,void 0,void 0,(function(){return O(this,(function(r){return[2,this.unmuteUserWithUserId(e.userId)]}))}))},n.prototype.unmuteUserWithUserId=function(e){return D(this,void 0,void 0,(function(){var r,i;return O(this,(function(a){switch(a.label){case 0:return Ue(re("string",e)).throw(ae.invalidParameters),r=te.of(this._iid).requestQueue,i=new yK({channelUrl:this.url,channelType:this.channelType,userId:e}),[4,r.send(i)];case 1:return a.sent(),[2]}}))}))},n.prototype.banUser=function(e,r,i){return D(this,void 0,void 0,(function(){return O(this,(function(a){return[2,this.banUserWithUserId(e.userId,r,i)]}))}))},n.prototype.banUserWithUserId=function(e,r,i){return D(this,void 0,void 0,(function(){var a,s;return O(this,(function(o){switch(o.label){case 0:return Ue(re("string",e)&&re("number",r,!0)&&re("string",i,!0)).throw(ae.invalidParameters),a=te.of(this._iid).requestQueue,s=new EK({channelUrl:this.url,channelType:this.channelType,userId:e,seconds:r,description:i}),[4,a.send(s)];case 1:return o.sent(),[2]}}))}))},n.prototype.unbanUser=function(e){return D(this,void 0,void 0,(function(){return O(this,(function(r){return[2,this.unbanUserWithUserId(e.userId)]}))}))},n.prototype.unbanUserWithUserId=function(e){return D(this,void 0,void 0,(function(){var r,i;return O(this,(function(a){switch(a.label){case 0:return Ue(re("string",e)).throw(ae.invalidParameters),r=te.of(this._iid).requestQueue,i=new bK({channelUrl:this.url,channelType:this.channelType,userId:e}),[4,r.send(i)];case 1:return a.sent(),[2]}}))}))},n.prototype.freeze=function(){return D(this,void 0,void 0,(function(){var e,r;return O(this,(function(i){switch(i.label){case 0:return e=te.of(this._iid).requestQueue,r=new mD({channelUrl:this.url,channelType:this.channelType,freezing:!0}),[4,e.send(r)];case 1:return i.sent(),this.isFrozen=!0,[2]}}))}))},n.prototype.unfreeze=function(){return D(this,void 0,void 0,(function(){var e,r;return O(this,(function(i){switch(i.label){case 0:return e=te.of(this._iid).requestQueue,r=new mD({channelUrl:this.url,channelType:this.channelType,freezing:!1}),[4,e.send(r)];case 1:return i.sent(),this.isFrozen=!1,[2]}}))}))},n.prototype.getMessagesByMessageId=function(e,r){return D(this,void 0,void 0,(function(){var i;return O(this,(function(a){switch(a.label){case 0:return i=Z(Z({},Ty),r),Ue(re("number",e)&&aD(i)).throw(ae.invalidParameters),[4,Ki.of(this._iid).getMessagesByMessageId(this.url,this.channelType,e,i)];case 1:return[2,a.sent()]}}))}))},n.prototype.getMessagesByTimestamp=function(e,r){return D(this,void 0,void 0,(function(){var i;return O(this,(function(a){switch(a.label){case 0:return i=Z(Z({},Ty),r),Ue(re("number",e)&&aD(i)).throw(ae.invalidParameters),[4,Ki.of(this._iid).getMessagesByTimestamp(this.url,this.channelType,e,i)];case 1:return[2,a.sent()]}}))}))},n.prototype.getMessageChangeLogsSinceTimestamp=function(e,r){return r===void 0&&(r={}),D(this,void 0,void 0,(function(){var i;return O(this,(function(a){switch(a.label){case 0:return i=Z(Z({},OA),r),Ue(re("number",e)&&sD(i)).throw(ae.invalidParameters),[4,Ki.of(this._iid).getMessageChangelogs(this.url,this.channelType,e,i)];case 1:return[2,a.sent()]}}))}))},n.prototype.getMessageChangeLogsSinceToken=function(e,r){return r===void 0&&(r={}),D(this,void 0,void 0,(function(){var i;return O(this,(function(a){switch(a.label){case 0:return i=Z(Z({},OA),r),Ue(re("string",e)&&sD(i)).throw(ae.invalidParameters),[4,Ki.of(this._iid).getMessageChangelogs(this.url,this.channelType,e,i)];case 1:return[2,a.sent()]}}))}))},n.prototype._createPendingSendableMessagePayload=function(e,r,i){var a,s=te.of(this._iid).sessionManager;return ze(ht({channel_url:this.url,channel_type:this.channelType,msg_id:0,parent_message_id:e.parentMessageId,data:e.data,custom_type:e.customType,mention_type:e.mentionType,sorted_metaarray:e.metaArrays?e.metaArrays.map((function(o){return _a.payloadify(o)})):null,apple_critical_alert_options:e.appleCriticalAlertOptions?xl.payloadify(e.appleCriticalAlertOptions):null,created_at:i,user:s.currentUser?Ng.payloadify(s.currentUser):null,req_id:r,request_state:Tn.PENDING,mentioned_user_ids:e.mentionedUserIds,mentioned_users:(a=e.mentionedUsers)===null||a===void 0?void 0:a.map((function(o){return fn.payloadify(o)}))}))},n.prototype._createPendingUserMessage=function(e,r,i){var a,s,o={};if(e.translationTargetLanguages)try{for(var u=Fe(e.translationTargetLanguages),c=u.next();!c.done;c=u.next())o[c.value]=""}catch(m){a={error:m}}finally{try{c&&!c.done&&(s=u.return)&&s.call(u)}finally{if(a)throw a.error}}var h=ze(Z(Z({},this._createPendingSendableMessagePayload(e,r,i)),{type:br.USER,message:e.message,translations:o,extended_message_payload:e.extendedMessagePayload})),p=new Ma(this._iid,h);return p.messageParams=e,p},n.prototype._createPendingScheduledUserMessage=function(e,r,i){var a=this._createPendingUserMessage(e,r,i);return a.scheduledInfo={scheduledMessageId:0,scheduledAt:e.scheduledAt,scheduledMessageParams:e},a},n.prototype._createPendingFileMessage=function(e,r,i){var a,s,o,u,c,h,p,m=ze(Z(Z({},this._createPendingSendableMessagePayload(e,r,i)),{type:br.FILE,url:e.fileUrl,file:{name:(a=e.fileName)!==null&&a!==void 0?a:(s=e.file)===null||s===void 0?void 0:s.name,size:(o=e.fileSize)!==null&&o!==void 0?o:(u=e.file)===null||u===void 0?void 0:u.size,type:(c=e.mimeType)!==null&&c!==void 0?c:(h=e.file)===null||h===void 0?void 0:h.type,data:e.data},thumbnails:(p=e._thumbnails)===null||p===void 0?void 0:p.map((function(b){return Rd.payloadify(b)})),message:e.message})),_=new Ai(this._iid,m);return _.messageParams=e,_},n.prototype._createPendingMultipleFilesMessage=function(e,r,i){var a=ze(Z(Z({},this._createPendingSendableMessagePayload(e,r,i)),{type:br.FILE,file:e.fileInfoList.length>0?{name:e.fileInfoList[0].fileName,size:e.fileInfoList[0].fileSize,type:e.fileInfoList[0].mimeType,data:e.data}:void 0,message:e.message})),s=new rl(this._iid,a);return s.messageParams=e,s},n.prototype._validateFailedFileMessageHasFile=function(e,r){var i;return!!e.url||ra(r)||ra((i=e.messageParams)===null||i===void 0?void 0:i.file)},n.prototype._createPendingScheduledFileMessage=function(e,r,i){var a=this._createPendingFileMessage(e,r,i);return a.scheduledInfo={scheduledMessageId:0,scheduledAt:e.scheduledAt,scheduledMessageParams:e},a},n.prototype._markMessageAsFailed=function(e,r,i){i===void 0&&(i=!1),e.errorCode=r.code,r.code===et.REQUEST_CANCELED||r.code===et.FILE_UPLOAD_CANCEL_FAILED?e.sendingStatus=Tn.CANCELED:i||(e.sendingStatus=Tn.FAILED)},n.prototype.sendUserMessage=function(e){var r=Z(Z({},VP),e);return Ue(jP(r)).throw(ae.invalidParameters),this._sendUserMessage(r)},n.prototype._sendUserMessage=function(e,r,i){var a=this;r===void 0&&(r=Na.SEND);var s=te.of(this._iid),o=s.dispatcher,u=s.requestQueue,c=i??this._generateRequestId(),h=Date.now(),p=new po;return za(2).then((function(){var m=a._createPendingUserMessage(e,c,h);o.dispatch(new Br({messages:[m],source:r===Na.RESEND?Se.LOCAL_MESSAGE_RESEND_STARTED:Se.EVENT_MESSAGE_SENT_PENDING})),gt((function(){return D(a,void 0,void 0,(function(){return O(this,(function(b){return[2,p._trigger(m)]}))}))}));var _=new NK(Z(Z({},e),{channelUrl:a.url,channelType:a.channelType,reqId:c}));u.send(_).then((function(b){var C=b.as(xw).message;o.dispatch(new Br({messages:[C],source:Se.EVENT_MESSAGE_SENT_SUCCESS})),gt((function(){return D(a,void 0,void 0,(function(){return O(this,(function(N){return[2,p._trigger(C)]}))}))}))})).catch((function(b){if($a(b))throw b;za(2).then((function(){var C=a._createPendingUserMessage(e,c,h),N=te.of(a._iid).cacheContext,S=N.localCacheEnabled&&N.localCacheConfig.enableAutoResend&&qC(b.code);a._markMessageAsFailed(C,b,S),o.dispatch(new Br({messages:[C],source:C.sendingStatus===Tn.PENDING?Se.REQUEST_RESEND_MESSAGE:Se.EVENT_MESSAGE_SENT_FAILED})),gt((function(){return D(a,void 0,void 0,(function(){return O(this,(function(M){return[2,p._triggerFailed(b,C)]}))}))}))}))}))})),p},n.prototype._autoResendUserMessage=function(e){return Ue(e instanceof Ma&&!!e.messageParams).throw(ae.invalidParameters),this._sendUserMessage(e.messageParams,Na.SEND,e.reqId)},n.prototype.resendUserMessage=function(e){var r;return D(this,void 0,void 0,(function(){var i,a;return O(this,(function(s){return Ue(e instanceof Ma&&!e.scheduledInfo).throw(ae.invalidParameters),i=new ps,a=(r=e.messageParams)!==null&&r!==void 0?r:UA(e),this._sendUserMessage(a,Na.RESEND,e.reqId).onFailed((function(o){return i.reject(o)})).onSucceeded((function(o){return i.resolve(o)})),[2,i.promise]}))}))},n.prototype.updateUserMessage=function(e,r){return D(this,void 0,void 0,(function(){var i,a,s,o;return O(this,(function(u){switch(u.label){case 0:return i=Z(Z({},$P),r),Ue(re("number",e)&&KP(i)).throw(ae.invalidParameters),a=te.of(this._iid).requestQueue,s=new gD(Z({channelType:this.channelType,channelUrl:this.url,messageId:e,metaArrayParams:i.metaArrays?{array:i.metaArrays,mode:"add",upsert:!0}:void 0},i)),[4,a.send(s)];case 1:return o=u.sent(),[2,o.as(iS).message]}}))}))},n.prototype.copyUserMessage=function(e,r){var i,a,s;return D(this,void 0,void 0,(function(){var o,u;return O(this,(function(c){return Ue(e instanceof n&&r instanceof Ma&&r.sendingStatus===Tn.SUCCEEDED&&this.url===r.channelUrl&&!r.scheduledInfo).throw(ae.invalidParameters),Ue(!r.poll).throw(ae.notSupportedError),o=new ps,u=(i=r.messageParams)!==null&&i!==void 0?i:ht(Z(Z({},r),{mentionType:r.mentionType,mentionedUserIds:(a=r.mentionedUserIds)!==null&&a!==void 0?a:(s=r.mentionedUsers)===null||s===void 0?void 0:s.map((function(h){return h.userId})),translationTargetLanguages:Object.keys(r.translations),pushNotificationDeliveryOption:Au.DEFAULT,parentMessageId:null,isReplyToChannel:!1,isPinnedMessage:!1})),e._sendUserMessage(u).onSucceeded((function(h){o.resolve(h)})).onFailed((function(h){return o.reject(h)})),[2,o.promise]}))}))},n.prototype.translateUserMessage=function(e,r){return D(this,void 0,void 0,(function(){var i,a,s;return O(this,(function(o){switch(o.label){case 0:return Ue(e instanceof Ma&&e.messageId>0&&hn("string",r)).throw(ae.invalidParameters),i=te.of(this._iid).requestQueue,a=new RK({channelType:this.channelType,channelUrl:this.url,messageId:e.messageId,translationTargetLanguages:r}),[4,i.send(a)];case 1:return s=o.sent(),[2,s.as(OK).message]}}))}))},n.prototype._createScheduledUserMessage=function(e,r){var i=this,a=te.of(this._iid).requestQueue,s=Date.now(),o=this._generateRequestId();za(2).then((function(){var c=i._createPendingScheduledUserMessage(e,o,s);gt((function(){return D(i,void 0,void 0,(function(){return O(this,(function(h){return[2,r._trigger(c)]}))}))}))}));var u=new DK(Z({reqId:o,channelType:this.channelType,channelUrl:this.url},e));a.send(u).then((function(c){var h=c.as(t5).message;gt((function(){return D(i,void 0,void 0,(function(){return O(this,(function(p){return[2,r._trigger(h)]}))}))}))})).catch((function(c){if($a(c))throw c;za(2).then((function(){var h=i._createPendingScheduledUserMessage(e,o,s);i._markMessageAsFailed(h,c),gt((function(){return D(i,void 0,void 0,(function(){return O(this,(function(p){return[2,r._triggerFailed(c,h)]}))}))}))}))}))},n.prototype.sendFileMessage=function(e){var r=Z(Z({},cD),e);return Ue(dD(r)).throw(ae.invalidParameters),this._sendFileMessage(r)},n.prototype.sendMultipleFilesMessage=function(e){var r,i=Z(Z({},tY),e),a=te.of(this._iid);Ue((function(o,u){return u===void 0&&(u=Lq),qS(o)&&re("string",o.message,!0)&&Array.isArray(o.fileInfoList)&&o.fileInfoList.length>=2&&o.fileInfoList.length<=u&&o.fileInfoList.every((function(c){return nY(c)}))})(i,(r=a.appInfo)===null||r===void 0?void 0:r.multipleFilesMessageFileCountLimit)).throw(ae.invalidParameters);var s=!!e.fileInfoList.find((function(o){var u=a.appInfo.uploadSizeLimit;return o.file instanceof Blob&&o.file.size>u||o.fileSize>u}));return Ue(!s).throw(ae.fileSizeLimitExceededError),this._sendMultipleFilesMessage(i)},n.prototype._sendFileMessage=function(e,r,i){var a=this;r===void 0&&(r=Na.SEND);var s=te.of(this._iid).dispatcher,o=Ki.of(this._iid).fileMessageQueue,u=i??this._generateRequestId(),c=Date.now(),h=new po;return za(2).then((function(){var p=a._createPendingFileMessage(e,u,c);s.dispatch(new Br({messages:[p],source:r===Na.RESEND?Se.LOCAL_MESSAGE_RESEND_STARTED:Se.EVENT_MESSAGE_SENT_PENDING})),gt((function(){return D(a,void 0,void 0,(function(){return O(this,(function(m){return[2,h._trigger(p)]}))}))})),o.request(a,u,e).then((function(m){s.dispatch(new Br({messages:[m],source:Se.EVENT_MESSAGE_SENT_SUCCESS})),gt((function(){return D(a,void 0,void 0,(function(){return O(this,(function(_){return[2,h._trigger(m)]}))}))}))})).catch((function(m){if($a(m))throw m;za(2).then((function(){var _=a._createPendingFileMessage(e,u,c),b=te.of(a._iid).cacheContext,C=b.localCacheEnabled&&b.localCacheConfig.enableAutoResend&&qC(m.code);a._markMessageAsFailed(_,m,C),s.dispatch(new Br({messages:[_],source:_.sendingStatus===Tn.PENDING?Se.REQUEST_RESEND_MESSAGE:m.code===et.FILE_UPLOAD_CANCEL_FAILED?Se.LOCAL_MESSAGE_CANCELED:Se.EVENT_MESSAGE_SENT_FAILED})),gt((function(){return D(a,void 0,void 0,(function(){return O(this,(function(N){return[2,h._triggerFailed(m,_)]}))}))}))}))}))})),h},n.prototype._autoResendFileMessage=function(e){Ue(e instanceof Ai&&!!e.messageParams).throw(ae.invalidParameters);var r=te.of(this._iid).logger;return r.debug("autoResendFileMessage pending",e),this._sendFileMessage(e.messageParams,Na.SEND,e.reqId).onFailed((function(i){r.debug("autoResendFileMessage failed",i)})).onSucceeded((function(i){r.debug("autoResendFileMessage success",i)}))},n.prototype._sendMultipleFilesMessage=function(e,r,i){var a=this,s=te.of(this._iid).dispatcher,o=Ki.of(this._iid).fileMessageQueue,u=i??this._generateRequestId(),c=Date.now(),h=new SC;return za(2).then((function(){var p=a._createPendingMultipleFilesMessage(e,u,c);s.dispatch(new Br({messages:[p],source:r===Na.RESEND?Se.LOCAL_MESSAGE_RESEND_STARTED:Se.EVENT_MESSAGE_SENT_PENDING})),gt((function(){return D(a,void 0,void 0,(function(){return O(this,(function(m){return[2,h._trigger(p)]}))}))})),o.request(a,u,e,{requestHandler:h,isCopy:r===Na.COPY}).then((function(m){s.dispatch(new Br({messages:[m],source:Se.EVENT_MESSAGE_SENT_SUCCESS})),gt((function(){return D(a,void 0,void 0,(function(){return O(this,(function(_){return[2,h._trigger(m)]}))}))}))})).catch((function(m){if($a(m))throw m;za(2).then((function(){var _=a._createPendingMultipleFilesMessage(e,u,c);a._markMessageAsFailed(_,m),s.dispatch(new Br({messages:[_],source:Se.EVENT_MESSAGE_SENT_FAILED})),gt((function(){return D(a,void 0,void 0,(function(){return O(this,(function(b){return[2,h._triggerFailed(m,_)]}))}))}))}))}))})),h},n.prototype._createScheduledFileMessage=function(e,r,i,a){var s=this,o=te.of(this._iid).requestQueue,u=new UK(Z(Z({reqId:i,channelType:this.channelType,channelUrl:this.url},e),{fileUrl:e.fileUrl,requireAuth:e.requireAuth}));o.send(u).then((function(c){var h=c.as(xK).message;gt((function(){return D(s,void 0,void 0,(function(){return O(this,(function(p){return[2,r._trigger(h)]}))}))}))})).catch((function(c){if($a(c))throw c;za(2).then((function(){var h=s._createPendingScheduledFileMessage(e,i,a);s._markMessageAsFailed(h,c),gt((function(){return D(s,void 0,void 0,(function(){return O(this,(function(p){return[2,r._triggerFailed(c,h)]}))}))}))}))}))},n.prototype.sendFileMessages=function(e){var r,i;Ue(e.every((function(c){return dD(Z(Z({},cD),c))}))).throw(ae.invalidParameters);var a=new po;try{for(var s=Fe(e),o=s.next();!o.done;o=s.next()){var u=o.value;this.sendFileMessage(u).onPending((function(c){return a._trigger(c)})).onFailed((function(c,h){return a._triggerFailed(c,h)})).onSucceeded((function(c){return a._trigger(c)}))}}catch(c){r={error:c}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return a},n.prototype.resendFileMessage=function(e,r){return D(this,void 0,void 0,(function(){var i,a,s;return O(this,(function(o){return i=this._validateFailedFileMessageHasFile(e,r),Ue(e instanceof Ai&&i&&!e.scheduledInfo).throw(ae.invalidParameters),a=new ps,s=xA(e,r),this._sendFileMessage(s,Na.RESEND,e.reqId).onFailed((function(u){return a.reject(u)})).onSucceeded((function(u){return a.resolve(u)})),[2,a.promise]}))}))},n.prototype.resendMessage=function(e,r){var i,a;if(Ue(e instanceof ai&&!e.scheduledInfo&&e.isResendable).throw(ae.invalidParameters),e.isUserMessage()){var s=(i=e.messageParams)!==null&&i!==void 0?i:UA(e);return this._sendUserMessage(s,Na.RESEND,e.reqId)}if(e.isFileMessage()){var o=this._validateFailedFileMessageHasFile(e,r);return Ue(o).throw(ae.invalidParameters),s=(a=e.messageParams)!==null&&a!==void 0?a:xA(e,r),this._sendFileMessage(s,Na.RESEND,e.reqId)}if(e.isMultipleFilesMessage())throw ae.channelTypeNotSupportedError},n.prototype.updateFileMessage=function(e,r){return D(this,void 0,void 0,(function(){var i,a,s,o;return O(this,(function(u){switch(u.label){case 0:return i=Z(Z({},q$),r),Ue(re("number",e)&&(function(c){return Ow(c)})(i)).throw(ae.invalidParameters),a=te.of(this._iid).requestQueue,s=new _D(Z({channelType:this.channelType,channelUrl:this.url,messageId:e,metaArrayParams:i.metaArrays?{array:i.metaArrays,mode:"add",upsert:!0}:void 0},i)),[4,a.send(s)];case 1:return o=u.sent(),[2,o.as(aS).message]}}))}))},n.prototype.uploadFile=function(e){return D(this,void 0,void 0,(function(){var r,i,a,s,o,u,c;return O(this,(function(h){switch(h.label){case 0:return r=te.of(this._iid).requestQueue,i=il(),(a=new tS({file:e.file,channelUrl:this.url,thumbnailSizes:e.thumbnailSizes,requestId:i})).uploadProgressHandler=e.progressHandler,e.uploadStartedHandler&&e.uploadStartedHandler(i),[4,r.send(a)];case 1:return s=h.sent(),o=s.as(nS),u=o.url,c=o.thumbnails,[2,{requestId:i,url:u,thumbnails:c}]}}))}))},n.prototype.cancelUploadingFileMessage=function(e){return D(this,void 0,void 0,(function(){return O(this,(function(r){return Ue(re("string",e)).throw(ae.invalidParameters),Ki.of(this._iid).fileMessageQueue.cancel(this,e),[2,!0]}))}))},n.prototype.copyFileMessage=function(e,r){var i,a,s;return D(this,void 0,void 0,(function(){var o,u;return O(this,(function(c){return Ue(e instanceof n&&r instanceof Ai&&r.sendingStatus===Tn.SUCCEEDED&&this.url===r.channelUrl&&!r.scheduledInfo).throw(ae.invalidParameters),o=new ps,u=ht(Z(Z({},r),{fileUrl:r.url,fileName:r.name,fileSize:r.size,mimeType:r.type,mentionType:r.mentionType,mentionedUserIds:(i=r.mentionedUserIds)!==null&&i!==void 0?i:(a=r.mentionedUsers)===null||a===void 0?void 0:a.map((function(h){return h.userId})),pushNotificationDeliveryOption:Au.DEFAULT,parentMessageId:null,isReplyToChannel:!1,thumbnailSizes:(s=r.thumbnails)===null||s===void 0?void 0:s.map((function(h){return{maxWidth:h.width,maxHeight:h.height}})),requireAuth:r.requireAuth,isPinnedMessage:!1})),e._sendFileMessage(u).onSucceeded((function(h){return o.resolve(h)})).onFailed((function(h){return o.reject(h)})),[2,o.promise]}))}))},n.prototype.copyMessage=function(e,r){Ue(e instanceof n&&r instanceof ai&&r.sendingStatus===Tn.SUCCEEDED&&this.url===r.channelUrl&&!r.scheduledInfo).throw(ae.invalidParameters);var i=r,a=e;if(i.isUserMessage()){Ue(!i.poll).throw(ae.notSupportedError);var s=zP(i);return a._sendUserMessage(s)}if(i.isFileMessage())return s=qP(i),a._sendFileMessage(s);if(r.isMultipleFilesMessage())throw ae.channelTypeNotSupportedError},n.prototype.deleteMessage=function(e){return D(this,void 0,void 0,(function(){var r,i;return O(this,(function(a){switch(a.label){case 0:return Ue(e instanceof ja).throw(ae.invalidParameters),e.messageId>0?(r=te.of(this._iid).requestQueue,i=new jk({channelType:this.channelType,channelUrl:this.url,messageId:e.messageId,messageToken:e instanceof ai?e._messageToken:void 0}),[4,r.send(i)]):[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}}))}))},n.prototype.addReaction=function(e,r){return D(this,void 0,void 0,(function(){var i,a,s;return O(this,(function(o){switch(o.label){case 0:return Ue(e instanceof ja&&e.messageId>0&&re("string",r)).throw(ae.invalidParameters),i=te.of(this._iid).requestQueue,a=new AK({channelType:this.channelType,channelUrl:this.url,messageId:e.messageId,reactionKey:r}),[4,i.send(a)];case 1:return s=o.sent(),[2,s.as(MK).reactionEvent]}}))}))},n.prototype.deleteReaction=function(e,r){return D(this,void 0,void 0,(function(){var i,a,s;return O(this,(function(o){switch(o.label){case 0:return Ue(e instanceof ja&&e.messageId>0&&re("string",r)).throw(ae.invalidParameters),i=te.of(this._iid).requestQueue,a=new IK({channelType:this.channelType,channelUrl:this.url,messageId:e.messageId,reactionKey:r}),[4,i.send(a)];case 1:return s=o.sent(),[2,s.as(wK).reactionEvent]}}))}))},n.prototype._updateUserMessageMetaArray=function(e,r,i,a){return D(this,void 0,void 0,(function(){var s,o,u,c,h,p;return O(this,(function(m){switch(m.label){case 0:return s=te.of(this._iid),o=s.dispatcher,u=s.requestQueue,c=new gD({channelType:this.channelType,channelUrl:this.url,messageId:e,metaArrayParams:{array:r,mode:i,upsert:a}}),[4,u.send(c)];case 1:return h=m.sent(),p=h.as(iS).message,o.dispatch(new Br({messages:[p],source:Se.EVENT_MESSAGE_UPDATED})),[2,p]}}))}))},n.prototype._updateFileMessageMetaArray=function(e,r,i,a){return D(this,void 0,void 0,(function(){var s,o,u,c,h,p;return O(this,(function(m){switch(m.label){case 0:return s=te.of(this._iid),o=s.dispatcher,u=s.requestQueue,c=new _D({channelType:this.channelType,channelUrl:this.url,messageId:e,metaArrayParams:{array:r,mode:i,upsert:a}}),[4,u.send(c)];case 1:return h=m.sent(),p=h.as(aS).message,o.dispatch(new Br({messages:[p],source:Se.EVENT_MESSAGE_UPDATED})),[2,p]}}))}))},n.prototype.createMessageMetaArrayKeys=function(e,r){return D(this,void 0,void 0,(function(){var i;return O(this,(function(a){return Ue(e instanceof ja&&e.messageId>0&&hn("string",r)).throw(ae.invalidParameters),i=r.map((function(s){return new _a({key:s})})),e instanceof Ai?[2,this._updateFileMessageMetaArray(e.messageId,i,"add",!0)]:[2,this._updateUserMessageMetaArray(e.messageId,i,"add",!0)]}))}))},n.prototype.deleteMessageMetaArrayKeys=function(e,r){return D(this,void 0,void 0,(function(){var i;return O(this,(function(a){return Ue(e instanceof ja&&e.messageId>0&&hn("string",r)).throw(ae.invalidParameters),i=r.map((function(s){return new _a({key:s})})),e instanceof Ai?[2,this._updateFileMessageMetaArray(e.messageId,i,"remove",!0)]:[2,this._updateUserMessageMetaArray(e.messageId,i,"remove",!0)]}))}))},n.prototype.addMessageMetaArrayValues=function(e,r){return D(this,void 0,void 0,(function(){return O(this,(function(i){return Ue(e instanceof ja&&e.messageId>0&&r.every((function(a){return a instanceof _a}))).throw(ae.invalidParameters),e instanceof Ai?[2,this._updateFileMessageMetaArray(e.messageId,r,"add",!0)]:[2,this._updateUserMessageMetaArray(e.messageId,r,"add",!0)]}))}))},n.prototype.removeMessageMetaArrayValues=function(e,r){return D(this,void 0,void 0,(function(){return O(this,(function(i){return Ue(e instanceof ja&&e.messageId>0&&r.every((function(a){return a instanceof _a}))).throw(ae.invalidParameters),e instanceof Ai?[2,this._updateFileMessageMetaArray(e.messageId,r,"remove",!0)]:[2,this._updateUserMessageMetaArray(e.messageId,r,"remove",!0)]}))}))},n.prototype.report=function(e,r){return D(this,void 0,void 0,(function(){var i,a,s,o;return O(this,(function(u){switch(u.label){case 0:return Ue((dn(Ny,e)||e instanceof vg)&&re("string",r)).throw(ae.invalidParameters),i=te.of(this._iid),a=i.sdkState,s=i.requestQueue,o=new CK({channelUrl:this.url,channelType:this.channelType,userId:a.userId,category:e,description:r}),[4,s.send(o)];case 1:return u.sent(),[2]}}))}))},n.prototype.reportUser=function(e,r,i){return D(this,void 0,void 0,(function(){var a,s,o,u;return O(this,(function(c){switch(c.label){case 0:return Ue(e instanceof fn&&(dn(Ny,r)||r instanceof vg)&&re("string",i)).throw(ae.invalidParameters),a=te.of(this._iid),s=a.sdkState,o=a.requestQueue,u=new SK({channelUrl:this.url,channelType:this.channelType,userId:s.userId,offendingUserId:e.userId,category:r,description:i}),[4,o.send(u)];case 1:return c.sent(),[2]}}))}))},n.prototype.reportMessage=function(e,r,i){return D(this,void 0,void 0,(function(){var a,s,o,u;return O(this,(function(c){switch(c.label){case 0:return Ue(e instanceof ai&&(dn(Ny,r)||r instanceof vg)&&re("string",i)).throw(ae.invalidParameters),a=te.of(this._iid),s=a.sdkState,o=a.requestQueue,u=new TK({channelUrl:this.url,channelType:this.channelType,userId:s.userId,offendingUserId:e.sender.userId,messageId:e.messageId,category:r,description:i,messageToken:e._messageToken}),[4,o.send(u)];case 1:return c.sent(),[2]}}))}))},n.prototype.updatePoll=function(e,r){return D(this,void 0,void 0,(function(){var i,a,s;return O(this,(function(o){switch(o.label){case 0:return Ue(re("number",e)&&(function(u){return re("string",u.title,!0)&&RP(u.data)&&re("boolean",u.allowUserSuggestion,!0)&&re("boolean",u.allowMultipleVotes,!0)&&re("number",u.closeAt,!0)})(r)).throw(ae.invalidParameters),i=te.of(this._iid).requestQueue,a=new LK(Z({pollId:e},r)),[4,i.send(a)];case 1:return s=o.sent(),[2,s.as(kK).poll]}}))}))},n.prototype.deletePoll=function(e){return D(this,void 0,void 0,(function(){var r,i,a;return O(this,(function(s){switch(s.label){case 0:return r=re("number",e),Ue(r).throw(ae.invalidParameters),i=te.of(this._iid).requestQueue,a=new PK({pollId:e}),[4,i.send(a)];case 1:return s.sent(),[2]}}))}))},n.prototype.closePoll=function(e){return D(this,void 0,void 0,(function(){var r,i,a,s;return O(this,(function(o){switch(o.label){case 0:return r=re("number",e),Ue(r).throw(ae.invalidParameters),i=te.of(this._iid).requestQueue,a=new FK({pollId:e}),[4,i.send(a)];case 1:return s=o.sent(),[2,s.as(BK).poll]}}))}))},n.prototype.addPollOption=function(e,r){return D(this,void 0,void 0,(function(){var i,a,s,o;return O(this,(function(u){switch(u.label){case 0:return i=re("number",e)&&re("string",r)&&r.trim()!=="",Ue(i).throw(ae.invalidParameters),a=te.of(this._iid).requestQueue,s=new HK({channelUrl:this.url,channelType:this.channelType,pollId:e,optionText:r}),[4,a.send(s)];case 1:return o=u.sent(),[2,o.as(GK).poll]}}))}))},n.prototype.updatePollOption=function(e,r,i){return D(this,void 0,void 0,(function(){var a,s,o,u;return O(this,(function(c){switch(c.label){case 0:return a=re("number",e)&&re("number",r)&&re("string",i)&&i.trim()!=="",Ue(a).throw(ae.invalidParameters),s=te.of(this._iid).requestQueue,o=new VK({pollId:e,pollOptionId:r,optionText:i}),[4,s.send(o)];case 1:return u=c.sent(),[2,u.as(zK).poll]}}))}))},n.prototype.deletePollOption=function(e,r){return D(this,void 0,void 0,(function(){var i,a,s;return O(this,(function(o){switch(o.label){case 0:return i=re("number",e)&&re("number",r),Ue(i).throw(ae.invalidParameters),a=te.of(this._iid).requestQueue,s=new jK({pollId:e,pollOptionId:r}),[4,a.send(s)];case 1:return o.sent(),[2]}}))}))},n.prototype.votePoll=function(e,r){return D(this,void 0,void 0,(function(){var i,a,s,o,u,c,h;return O(this,(function(p){switch(p.label){case 0:return i=re("number",e)&&hn("number",r),Ue(i).throw(ae.invalidParameters),a=te.of(this._iid),s=a.requestQueue,o=a.dispatcher,u=new qK({reqId:this._generateRequestId(),channelUrl:this.url,channelType:this.channelType,pollId:e,pollOptionIds:r}),[4,s.send(u)];case 1:return c=p.sent(),h=c.as(Lw).event,o.dispatch(new VS({event:h,source:Se.EVENT_POLL_VOTED})),[2,h]}}))}))},n.prototype.getPollChangeLogsSinceTimestamp=function(e){return D(this,void 0,void 0,(function(){return O(this,(function(r){switch(r.label){case 0:return Ue(re("number",e)).throw(ae.invalidParameters),[4,eS.of(this._iid).getPollChangeLogs(this.url,this.channelType,e)];case 1:return[2,r.sent()]}}))}))},n.prototype.getPollChangeLogsSinceToken=function(e){return D(this,void 0,void 0,(function(){return O(this,(function(r){switch(r.label){case 0:return Ue(re("string",e,!0)),[4,eS.of(this._iid).getPollChangeLogs(this.url,this.channelType,e)];case 1:return[2,r.sent()]}}))}))},n.prototype.createPollListQuery=function(e){return e===void 0&&(e=10),new xP(this._iid,{channelUrl:this.url,channelType:this.channelType,limit:e})},n.prototype.createPollVoterListQuery=function(e,r,i){return i===void 0&&(i=20),new LP(this._iid,{channelUrl:this.url,channelType:this.channelType,pollId:e,pollOptionId:r,limit:i})},n.prototype.pinMessage=function(e){return D(this,void 0,void 0,(function(){var r,i;return O(this,(function(a){switch(a.label){case 0:return Ue(re("number",e)&&e>0).throw(ae.invalidParameters),r=te.of(this._iid).requestQueue,i=new oY({channelType:this.channelType,channelUrl:this.url,messageId:e}),[4,r.send(i)];case 1:return a.sent(),[2]}}))}))},n.prototype.unpinMessage=function(e){return D(this,void 0,void 0,(function(){var r,i;return O(this,(function(a){switch(a.label){case 0:return Ue(re("number",e)&&e>0).throw(ae.invalidParameters),r=te.of(this._iid).requestQueue,i=new lY({channelType:this.channelType,channelUrl:this.url,messageId:e}),[4,r.send(i)];case 1:return a.sent(),[2]}}))}))},n})(wi),o5=(function(t){function n(e){e===void 0&&(e={});var r=t.call(this)||this;return Object.keys(e).forEach((function(i){r.hasOwnProperty(i)&&(r[i]=e[i])})),r}return G(n,t),n})((function(){this.onConnected=Bt,this.onReconnectStarted=Bt,this.onReconnectSucceeded=Bt,this.onReconnectFailed=Bt,this.onDisconnected=Bt,this.onConnectionDelayed=Bt})),yD=(function(t){function n(e){e===void 0&&(e={});var r=t.call(this)||this;return Object.keys(e).forEach((function(i){r.hasOwnProperty(i)&&(r[i]=e[i])})),r}return G(n,t),n})((function(){this.onSessionExpired=Bt,this.onSessionTokenRequired=function(t){return t(null)},this.onSessionError=Bt,this.onSessionRefreshed=Bt,this.onSessionClosed=Bt})),cY=(function(t){function n(e){e===void 0&&(e={});var r=t.call(this)||this;return Object.keys(e).forEach((function(i){r.hasOwnProperty(i)&&(r[i]=e[i])})),r}return G(n,t),n})((function(){this.onFriendsDiscovered=Bt,this.onTotalUnreadMessageCountChanged=Bt,this.onTotalUnreadMessageCountUpdated=Bt})),dY=(function(t){function n(e){var r=e.limit,i=e.token,a=e.userIdsFilter,s=e.metaDataKeyFilter,o=e.metaDataValuesFilter,u=e.nicknameStartsWithFilter,c=t.call(this)||this;return c.method=Ie.GET,c.path=jn,c.params=ze({limit:r,token:i,user_ids:a,metadatakey:s,metadatavalues_in:o,nickname_startswith:u}),c}return G(n,t),n})(we),hY=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.users=r.users.map((function(a){return new fn(e,a)})),i.next=r.next,i}return G(n,t),n})(xe),fY=(function(t){function n(e,r){var i,a,s,o=this;return(o=t.call(this,e,r)||this).userIdsFilter=null,o.metaDataKeyFilter=null,o.metaDataValuesFilter=null,o.nicknameStartsWithFilter=null,o.userIdsFilter=(i=r.userIdsFilter)!==null&&i!==void 0?i:null,o.metaDataKeyFilter=(a=r.metaDataKeyFilter)!==null&&a!==void 0?a:null,o.metaDataValuesFilter=(s=r.metaDataValuesFilter)!==null&&s!==void 0?s:null,o.nicknameStartsWithFilter=r.nicknameStartsWithFilter||null,o}return G(n,t),n.prototype._validate=function(){return t.prototype._validate.call(this)&&hn("string",this.userIdsFilter,!0)&&re("string",this.metaDataKeyFilter,!0)&&hn("string",this.metaDataValuesFilter,!0)&&re("string",this.nicknameStartsWithFilter,!0)},n.prototype.next=function(){return D(this,void 0,void 0,(function(){var e,r,i,a,s,o;return O(this,(function(u){switch(u.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=te.of(this._iid).requestQueue,r=new dY(ht(Z(Z({},this),{token:this._token}))),[4,e.send(r)]):[3,2]:[3,5];case 1:return i=u.sent(),a=i.as(hY),s=a.users,o=a.next,this._token=o,this._hasNext=!!o,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw ae.queryInProgress;case 4:return[3,6];case 5:throw ae.invalidParameters;case 6:return[2]}}))}))},n})(wd),vY=(function(t){function n(e){var r=e.userId,i=e.limit,a=e.token,s=e.userIdsFilter,o=t.call(this)||this;return o.method=Ie.GET,o.path="".concat(jn,"/").concat(encodeURIComponent(r),"/block"),o.params=ze({limit:i,token:a,user_ids:s}),o}return G(n,t),n})(we),pY=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.users=r.users.map((function(a){return new fn(e,a)})),i.next=r.next,i}return G(n,t),n})(xe),mY=(function(t){function n(e,r){var i,a=this;return(a=t.call(this,e,r)||this).userIdsFilter=null,a.userIdsFilter=(i=r.userIdsFilter)!==null&&i!==void 0?i:null,a}return G(n,t),n.prototype._validate=function(){return t.prototype._validate.call(this)&&hn("string",this.userIdsFilter,!0)},n.prototype.next=function(){return D(this,void 0,void 0,(function(){var e,r,i,a,s,o,u,c;return O(this,(function(h){switch(h.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=te.of(this._iid),r=e.sdkState,i=e.requestQueue,a=new vY(ht(Z(Z({},this),{userId:r.userId,token:this._token}))),[4,i.send(a)]):[3,2]:[3,5];case 1:return s=h.sent(),o=s.as(pY),u=o.users,c=o.next,this._token=c,this._hasNext=!!c,this._isLoading=!1,[2,u];case 2:return[2,[]];case 3:throw ae.queryInProgress;case 4:return[3,6];case 5:throw ae.invalidParameters;case 6:return[2]}}))}))},n})(wd),gY=(function(t){function n(e){var r=e.userId,i=e.limit,a=e.token,s=t.call(this)||this;return s.method=Ie.GET,s.path="".concat(jn,"/").concat(encodeURIComponent(r),"/friends"),s.params={limit:i,token:a},s}return G(n,t),n})(we),_Y=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.hasMore=r.has_more,i.users=r.users.map((function(a){return new fn(e,a)})),i.next=r.next,i}return G(n,t),n})(xe),yY=(function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return G(n,t),n.prototype._validate=function(){return t.prototype._validate.call(this)},n.prototype.next=function(){return D(this,void 0,void 0,(function(){var e,r,i,a,s,o,u,c,h;return O(this,(function(p){switch(p.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=te.of(this._iid),r=e.sdkState,i=e.requestQueue,a=new gY(Z(Z({},this),{userId:r.userId,token:this._token})),[4,i.send(a)]):[3,2]:[3,5];case 1:return s=p.sent(),o=s.as(_Y),u=o.users,c=o.hasMore,h=o.next,this._token=h,this._hasNext=c,this._isLoading=!1,[2,u];case 2:return[2,[]];case 3:throw ae.queryInProgress;case 4:return[3,6];case 5:throw ae.invalidParameters;case 6:return[2]}}))}))},n})(wd),$1={},bE=(function(){function t(n){var e=n.dbname,r=n.itemSizeLimit,i=r===void 0?1048576:r,a=n.cacheLimit,s=a===void 0?256:a,o=n.blockHashBase,u=o===void 0?2:o,c=n.blockHashMultiplier,h=c===void 0?10:c,p=n.blockHashConstant,m=p===void 0?11:p,_=n.transactionApplyDelay,b=_===void 0?200:_,C=n.disableLogger,N=C!==void 0&&C;return $1[e]||(this.itemSizeLimit=i,this.cacheLimit=s,this.blockHashBase=u,this.blockHashMultiplier=h,this.blockHashConstant=m,this.transactionApplyDelay=b,this.disableLogger=N,$1[e]=this),$1[e]}return t.get=function(n){return $1[n]},t})();(function(t){t[t.UNKNOWN_ERROR=6e7]="UNKNOWN_ERROR",t[t.STORE_NOT_DEFINED=61001e3]="STORE_NOT_DEFINED",t[t.STORE_NOT_AVAILABLE=61001001]="STORE_NOT_AVAILABLE",t[t.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING=61001002]="STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING",t[t.STORE_IS_FULL=61001003]="STORE_IS_FULL",t[t.STORE_NOT_INITIALIZED=61001004]="STORE_NOT_INITIALIZED",t[t.STORE_INVALID_KEY_TYPE=61002e3]="STORE_INVALID_KEY_TYPE",t[t.STORE_BROKEN_INTEGRITY=61002001]="STORE_BROKEN_INTEGRITY",t[t.STORE_BROKEN_BLOB=61002002]="STORE_BROKEN_BLOB",t[t.STORE_ENCRYPTION_INVALID=61002003]="STORE_ENCRYPTION_INVALID",t[t.STORE_ITEM_SIZE_LIMIT_EXCEEDED=61017e3]="STORE_ITEM_SIZE_LIMIT_EXCEEDED",t[t.STORE_READ_FAILED=61017001]="STORE_READ_FAILED",t[t.STORE_WRITE_FAILED=61017002]="STORE_WRITE_FAILED",t[t.DATABASE_SCHEMA_NOT_ON_UPGRADE=62002e3]="DATABASE_SCHEMA_NOT_ON_UPGRADE",t[t.COLLECTION_NOT_READY=63001e3]="COLLECTION_NOT_READY",t[t.COLLECTION_KEY_NOT_MATCH=63002e3]="COLLECTION_KEY_NOT_MATCH",t[t.COLLECTION_QUERY_NOT_VALID=63002001]="COLLECTION_QUERY_NOT_VALID",t[t.COLLECTION_KEY_NOT_FOUND=63004e3]="COLLECTION_KEY_NOT_FOUND",t[t.COLLECTION_KEY_NOT_GIVEN=63004001]="COLLECTION_KEY_NOT_GIVEN",t[t.COLLECTION_INSERT_DUPLICATE=63009e3]="COLLECTION_INSERT_DUPLICATE",t[t.COLLECTION_WRITE_FAILED=63017e3]="COLLECTION_WRITE_FAILED",t[t.COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED=63017001]="COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED",t[t.INDEX_TABLE_IS_REQUIRED=65001e3]="INDEX_TABLE_IS_REQUIRED",t[t.INDEX_TYPE_NOT_MATCH=65002e3]="INDEX_TYPE_NOT_MATCH",t[t.COMPARE_TYPE_NOT_MATCH=69002001]="COMPARE_TYPE_NOT_MATCH",t[t.CIRCULAR_REFERENCE_FOUND=69002002]="CIRCULAR_REFERENCE_FOUND"})(jr||(jr={}));var ip,rr=(function(t){function n(e){var r=e.code,i=r===void 0?jr.UNKNOWN_ERROR:r,a=e.message,s=a===void 0?"Unknown error occurred.":a,o=t.call(this,s)||this;return o.code=i,Object.setPrototypeOf(o,n.prototype),o}return G(n,t),Object.defineProperty(n,"storeNotDefined",{get:function(){return new n({code:jr.STORE_NOT_DEFINED,message:"Store is not defined. Specify the store on NestDB()"})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeNotAvailable",{get:function(){return new n({code:jr.STORE_NOT_AVAILABLE,message:"Store is not available. Check your environment settings."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeNotAvailableInPrivateBrowsing",{get:function(){return new n({code:jr.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING,message:"Store is not available because it is in private browsing."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeIsFull",{get:function(){return new n({code:jr.STORE_IS_FULL,message:"Store is full."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeNotInitialized",{get:function(){return new n({code:jr.STORE_NOT_INITIALIZED,message:"Store is not initialized."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeKeyTypeIsInvalid",{get:function(){return new n({code:jr.STORE_INVALID_KEY_TYPE,message:"Store key should be string type."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeBrokenIntegrity",{get:function(){return new n({code:jr.STORE_BROKEN_INTEGRITY,message:"Data should be in a store but it does not. Integrity is broken."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeBrokenBlob",{get:function(){return new n({code:jr.STORE_BROKEN_BLOB,message:"Data should be in a store but it does not. Blob data is broken."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeEncryptionInvalid",{get:function(){return new n({code:jr.STORE_ENCRYPTION_INVALID,message:"Encryption algorithm has changed. All the store should reset."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeItemSizeExceeded",{get:function(){return new n({code:jr.STORE_ITEM_SIZE_LIMIT_EXCEEDED,message:"The size of the item exceeds the limit that the store allows."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeReadFailed",{get:function(){return new n({code:jr.STORE_READ_FAILED,message:"Failed to read from store."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeWriteFailed",{get:function(){return new n({code:jr.STORE_WRITE_FAILED,message:"Failed to write to store."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"databaseSchemaNotOnUpgrade",{get:function(){return new n({code:jr.DATABASE_SCHEMA_NOT_ON_UPGRADE,message:"Committing schema is not allowed when upgrade is not running."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionNotReady",{get:function(){return new n({code:jr.COLLECTION_NOT_READY,message:"Collection is not ready due to an error during initialization."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionKeyNotMatch",{get:function(){return new n({code:jr.COLLECTION_KEY_NOT_MATCH,message:"keyName of collection could not change."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionQueryNotValid",{get:function(){return new n({code:jr.COLLECTION_QUERY_NOT_VALID,message:"Query parameter is not a valid format."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionInsertDuplicate",{get:function(){return new n({code:jr.COLLECTION_INSERT_DUPLICATE,message:"The key already exists."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionKeyNotFound",{get:function(){return new n({code:jr.COLLECTION_KEY_NOT_FOUND,message:"The key is not found."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionKeyNotGiven",{get:function(){return new n({code:jr.COLLECTION_KEY_NOT_GIVEN,message:"The item should contain [keyName] property."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionWriteFailed",{get:function(){return new n({code:jr.COLLECTION_WRITE_FAILED,message:"Failed to write an item."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionItemSizeExceeded",{get:function(){return new n({code:jr.COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED,message:"The size of the item exceeds the limit that a collection allows."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"indexTableIsRequired",{get:function(){return new n({code:jr.INDEX_TABLE_IS_REQUIRED,message:"Index table is required."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"indexTypesNotMatch",{get:function(){return new n({code:jr.INDEX_TYPE_NOT_MATCH,message:"Indexed column should have primitive type."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"compareTypesNotMatch",{get:function(){return new n({code:jr.COMPARE_TYPE_NOT_MATCH,message:"Values to compare have different types."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"circularReferenceFound",{get:function(){return new n({code:jr.CIRCULAR_REFERENCE_FOUND,message:"Cannot handle circular referenced object."})},enumerable:!1,configurable:!0}),n})(Error);(function(t){t.INIT="init",t.READY="ready",t.CLOSED="closed"})(ip||(ip={}));var ED,Bs=function(t,n){if(n===void 0&&(n=new WeakMap),typeof t=="object"&&t!==null){if(n.has(t))throw rr.circularReferenceFound;var e;return n.set(t,!0),Array.isArray(t)?e=t.map((function(r){return Bs(r,n)})):t instanceof RegExp||t instanceof Date?e=t:(e={},Object.keys(t).forEach((function(r){e[r]=Bs(t[r],n)}))),n.delete(t),e}return t},pd=function(t,n){if(n==null)return 1;if(t==null)return-1;if(typeof t!=typeof n)throw rr.compareTypesNotMatch;var e=0;switch(typeof t){case"boolean":case"number":e=t-n;break;case"string":e=t.localeCompare(n)}return e},bD=function(t,n){for(var e=0,r=0;r<t.length;r++)e=t.charCodeAt(r)+(e<<6)+(e<<16)-e;return(e>>>0)%n},K1=function(t){return new Promise((function(n){setTimeout((function(){return n()}),t)}))},cp=function(t,n){if(!n)return!1;if(typeof t!="function"){for(var e in t)if(["/and","&&"].includes(e)){if(t[e].some((function(u){return!cp(u,n)})))return!1}else if(["/or","||"].includes(e)){if(t[e].every((function(u){return!cp(u,n)})))return!1}else if(e==="/where"){if(!(0,t[e])(n))return!1}else{var r=e;if(typeof t[r]=="object"){var i=t[r];for(var a in i)switch(a){case"/eq":case"=":if((s=n[r])!==(o=i[a]))return!1;break;case"/neq":case"!=":if((s=n[r])===(o=i[a]))return!1;break;case"/gt":case">":var s=n[r],o=i[a];if(!(pd(s,o)>0))return!1;break;case"/gte":case">=":if(s=n[r],o=i[a],!(pd(s,o)>=0))return!1;break;case"/lt":case"<":if(s=n[r],o=i[a],!(pd(s,o)<0))return!1;break;case"/lte":case"<=":if(s=n[r],o=i[a],!(pd(s,o)<=0))return!1;break;case"/in":if(s=n[r],!(o=i[a]).includes(s))return!1;break;case"/nin":if(s=n[r],(o=i[a]).includes(s))return!1;break;case"/contain":if(s=n[r],o=i[a],!s.includes(o))return!1;break;case"/regex":if(s=n[r],!(o=i[a]).test(s))return!1;break;case"/where":if(s=n[r],!(0,i[a])(s))return!1}}else if(typeof t[r]=="function"){if(!t[r](n[r]))return!1}else if(t[r]!==n[r])return!1}return!0}return t(n)},ny=function(){},CD=function(){return Promise.resolve()},EY=function(t){return t},SD=function(t,n){n()};(function(t){t[t.FORWARD=0]="FORWARD",t[t.BACKWARD=1]="BACKWARD"})(ED||(ED={}));var dp,qa,hc,bY=(function(){function t(n){var e=n.initialPrevValue,r=e===void 0?null:e,i=n.initialNextValue,a=i===void 0?null:i,s=n.iterator,o=n.map,u=o===void 0?EY:o,c=n.backward,h=c===void 0?CD:c,p=n.forward,m=p===void 0?CD:p,_=n.complete,b=_===void 0?ny:_;this._prevValue=r,this._nextValue=a,this._error=null,this._map=u,this._backward=h,this._forward=m,this._iterator=s,this._complete=b}return Object.defineProperty(t.prototype,"prevValue",{get:function(){return this._map(this._prevValue)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextValue",{get:function(){return this._map(this._nextValue)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"error",{get:function(){return this._error},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPrevious",{get:function(){return!!this._prevValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasNext",{get:function(){return!!this._nextValue},enumerable:!1,configurable:!0}),t.prototype.prev=function(){return D(this,void 0,void 0,(function(){var n,e,r;return O(this,(function(i){switch(i.label){case 0:if(!this.hasPrevious)return[3,6];i.label=1;case 1:return i.trys.push([1,3,,4]),n=this._prevValue,e=this,[4,this._backward()];case 2:return e._prevValue=i.sent()||null,this._nextValue=n,[3,4];case 3:return r=i.sent(),this._error=r,[3,4];case 4:return[4,this._iterator(this)];case 5:return[2,i.sent()];case 6:this._complete(),i.label=7;case 7:return[2]}}))}))},t.prototype.next=function(){return D(this,void 0,void 0,(function(){var n,e,r;return O(this,(function(i){switch(i.label){case 0:if(!this.hasNext)return[3,6];i.label=1;case 1:return i.trys.push([1,3,,4]),n=this._nextValue,e=this,[4,this._forward()];case 2:return e._nextValue=i.sent()||null,this._prevValue=n,[3,4];case 3:return r=i.sent(),this._error=r,[3,4];case 4:return[4,this._iterator(this)];case 5:return[2,i.sent()];case 6:this._complete(),i.label=7;case 7:return[2]}}))}))},t.prototype.stop=function(){this._prevValue=null,this._nextValue=null,this._complete()},t})(),LA=(function(){function t(n){var e=n.condition,r=e===void 0?{}:e,i=n.backward,a=i!==void 0&&i,s=n.blockManager,o=n.indexer;this.condition=r,this.backward=a,this._blockManager=s,this._indexer=o}return t.prototype.findOptimizedStartPosition=function(){var n=this,e=["=","/eq",">",">=","/gt","/gte"],r=["=","/eq","<","<=","/lt","/lte"];if(this.backward){var i=this._indexer.origin.length-1;if(typeof this.condition!="function")for(_=0;_<this._indexer.fields.length;_++){var a=this._indexer.fields[_],s=1;if(a[0]==="-"&&(a=a.slice(1),s=-1),this.condition[a]){if(typeof this.condition[a]=="object"){var o=s>0?r:e;for(var u in this.condition[a])if(o.includes(u)){for(var c=i;c>=0;c--)if(s*pd(this._indexer.origin[c].columnValues[_],this.condition[a][u])<=0){i=c;break}}}else for(c=i;c>=0;c--)if(s*pd(this._indexer.origin[c].columnValues[_],this.condition[a])<=0){i=c;break}}}return Math.min(i+1,this._indexer.origin.length-1)}var h=0;if(typeof this.condition!="function")for(var p=function(b){var C=m._indexer.fields[b],N=1;if(C[0]==="-"&&(C=C.slice(1),N=-1),m.condition[C]){if(typeof m.condition[C]=="object")Object.keys(m.condition[C]).forEach((function(M){if((N>0?e:r).includes(M)){for(var w=h;w<n._indexer.origin.length;w++)if(N*pd(n._indexer.origin[w].columnValues[b],n.condition[C][M])>=0){h=w;break}}}));else for(var S=h;S<m._indexer.origin.length;S++)if(N*pd(m._indexer.origin[S].columnValues[b],m.condition[C])>=0){h=S;break}}},m=this,_=0;_<this._indexer.fields.length;_++)p(_);return Math.max(h-1,0)},t.prototype.each=function(n){return D(this,void 0,void 0,(function(){var e,r,i,a,s,o,u,c=this;return O(this,(function(h){switch(h.label){case 0:if(e=this.findOptimizedStartPosition(),r=0,this.backward&&this._indexer.origin[e]&&(r=this._indexer.origin[e].keys.length-1),i=function(){if(c._indexer.origin[e]){if(!c._indexer.origin[e].keys[++r]){if(!c._indexer.origin[++e])return!1;r=0}return!0}return!1},a=function(){if(c._indexer.origin[e]){if(!c._indexer.origin[e].keys[--r]){if(!c._indexer.origin[--e])return!1;r=c._indexer.origin[e].keys.length-1}return!0}return!1},s=null,!this._indexer.origin[e])return[3,4];o=this.backward?a:i,h.label=1;case 1:return[4,this._blockManager.getFromBlock(this._indexer.origin[e].keys[r])];case 2:if((u=h.sent())&&cp(this.condition,u))return s=u,[3,4];h.label=3;case 3:if(o())return[3,1];h.label=4;case 4:return[4,new Promise((function(p){var m=new bY({initialNextValue:Bs(s),iterator:n,forward:function(){return D(c,void 0,void 0,(function(){var _,b;return O(this,(function(C){switch(C.label){case 0:_=this.backward?a:i,C.label=1;case 1:return _()?[4,this._blockManager.getFromBlock(this._indexer.origin[e].keys[r])]:[3,3];case 2:return(b=C.sent())&&cp(this.condition,b)?[2,Bs(b)]:[3,1];case 3:return[2,null]}}))}))},backward:function(){return D(c,void 0,void 0,(function(){var _,b;return O(this,(function(C){switch(C.label){case 0:_=this.backward?i:a,C.label=1;case 1:return _()?[4,this._blockManager.getFromBlock(this._indexer.origin[e].keys[r])]:[3,3];case 2:return(b=C.sent())&&cp(this.condition,b)?[2,Bs(b)]:[3,1];case 3:return[2,null]}}))}))},complete:p});n(m)}))];case 5:return[2,h.sent()]}}))}))},t})(),CY=(function(){function t(n){var e=n.condition,r=e===void 0?{}:e,i=n.backward,a=i!==void 0&&i,s=n.mutex,o=n.blockManager,u=n.indexer;this._mutex=s,this._iterator=new LA({condition:r,backward:a,blockManager:o,indexer:u})}return t.prototype.fetch=function(n){return n===void 0&&(n={}),D(this,void 0,void 0,(function(){var e,r,i,a,s=this;return O(this,(function(o){switch(o.label){case 0:if(e=Math.max(n.offset||0,0),(r=typeof n.limit=="number"?n.limit:Number.MAX_SAFE_INTEGER)===0)return[2,[]];if(r<0)throw rr.collectionQueryNotValid;o.label=1;case 1:return o.trys.push([1,4,,5]),i=[],[4,this._mutex.lock()];case 2:return o.sent(),[4,this._iterator.each((function(u){return D(s,void 0,void 0,(function(){return O(this,(function(c){return u.error?u.stop():u.hasNext?e===0?(i.push(u.nextValue),0<r&&r<=i.length?u.stop():u.next()):(e--,u.next()):u.stop(),[2]}))}))}))];case 3:return o.sent(),this._mutex.unlock(),[2,i];case 4:throw a=o.sent(),this._mutex.unlock(),a;case 5:return[2]}}))}))},t.prototype.count=function(){return D(this,void 0,void 0,(function(){var n,e,r=this;return O(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),n=0,[4,this._mutex.lock()];case 1:return i.sent(),[4,this._iterator.each((function(a){return D(r,void 0,void 0,(function(){return O(this,(function(s){return a.error?a.stop():a.hasNext?(n++,a.next()):a.stop(),[2]}))}))}))];case 2:return i.sent(),this._mutex.unlock(),[2,n];case 3:throw e=i.sent(),this._mutex.unlock(),e;case 4:return[2]}}))}))},t})(),Pw=function(t){return"".concat("nest","@").concat(t)},_p=function(t,n){return"".concat(Pw(t),"/").concat(n)},oN=function(t,n){return"".concat(_p(t,n),".metadata")},kA=function(t,n){return"".concat(_p(t,n),"/block.")},TD=function(t,n){return"".concat(_p(t,n),"/blob.")},SY=(function(){function t(n){var e=n.dbname,r=n.collectionName,i=n.store;this.dbname=e,this.collectionName=r,this.store=i}return t.prototype.get=function(n){return D(this,void 0,void 0,(function(){var e,r,i,a,s,o,u,c,h;return O(this,(function(p){switch(p.label){case 0:return[4,this.store.get(n)];case 1:return(e=p.sent())?(r=e.data,i=e.type,typeof fetch>"u"?[3,4]:[4,fetch(r)]):[3,5];case 2:return[4,p.sent().blob()];case 3:return[2,p.sent()];case 4:for(a=[],s=atob(r.split(",")[1]),o=0;o<s.length;o+=512){for(u=s.slice(o,o+512),c=new Array(u.length),h=0;h<u.length;h++)c[h]=u.charCodeAt(h);a.push(new Uint8Array(c))}return[2,new Blob(a,{type:i})];case 5:return[2,null]}}))}))},t.prototype.save=function(n,e){return e===void 0&&(e="".concat(Date.now())),D(this,void 0,void 0,(function(){var r,i,a,s,o=this;return O(this,(function(u){switch(u.label){case 0:return[4,new Promise((function(c){var h=(function(m,_,b,C){return C===void 0&&(C=0),"".concat(TD(m,_)).concat(b,".").concat(C)})(o.dbname,o.collectionName,e),p=new FileReader;p.onload=function(){c({blobId:h,data:p.result,type:n.type})},p.readAsDataURL(n)}))];case 1:return r=u.sent(),i=r.blobId,a=r.data,s=r.type,[4,this.store.set({key:i,value:{data:a,type:s}})];case 2:return u.sent(),[2,i]}}))}))},t.prototype.remove=function(n){return D(this,void 0,void 0,(function(){return O(this,(function(e){switch(e.label){case 0:return[4,this.store.remove(n)];case 1:return e.sent(),[2]}}))}))},t.prototype.clear=function(){return D(this,void 0,void 0,(function(){var n,e,r=this;return O(this,(function(i){switch(i.label){case 0:return n=TD(this.dbname,this.collectionName),[4,this.store.getAllKeys()];case 1:return e=i.sent(),[4,Promise.all(e.filter((function(a){return a.startsWith(n)})).map((function(a){return D(r,void 0,void 0,(function(){return O(this,(function(s){switch(s.label){case 0:return[4,this.store.remove(a)];case 1:return[2,s.sent()]}}))}))})))];case 2:return i.sent(),[2]}}))}))},t})();(function(t){t[t.COMMIT=0]="COMMIT",t[t.WRITE=1]="WRITE",t[t.ERROR=2]="ERROR"})(dp||(dp={})),(function(t){t.PENDING="pending",t.PERSISTENT="persistent",t.VOLATILE="volatile"})(qa||(qa={})),(function(t){t[t.NO_CACHE=0]="NO_CACHE",t[t.DEFAULT=1]="DEFAULT",t[t.PERSISTENT=2]="PERSISTENT"})(hc||(hc={}));var Ay,Ha,ND=[qa.PENDING,qa.VOLATILE],Y1={},Gs=(function(){function t(n){var e=n.dbname,r=n.limit,i=r===void 0?256:r;return Y1[e]||(this.dbname=e,this._items=[],this._limit=i,Y1[e]=this),Y1[e]}return t.get=function(n){return Y1[n]},Object.defineProperty(t.prototype,"items",{get:function(){return this._items},enumerable:!1,configurable:!0}),t.prototype.find=function(n,e,r){return r===void 0&&(r=hc.DEFAULT),D(this,void 0,void 0,(function(){var i,a;return O(this,(function(s){switch(s.label){case 0:return(i=this.get(e))?[3,2]:[4,n.get(e)];case 1:return(a=s.sent())&&(i={key:e,value:a,state:r===hc.PERSISTENT?qa.PERSISTENT:qa.VOLATILE},this.put(i)),[3,3];case 2:r===hc.PERSISTENT&&(i.state=qa.PERSISTENT),s.label=3;case 3:return[2,i]}}))}))},t.prototype.get=function(n,e){e===void 0&&(e=hc.DEFAULT);var r=this._items.map((function(a){return a.key})).indexOf(n);if(r>-1){var i=this._items[r];return e===hc.PERSISTENT&&(i.state=qa.PERSISTENT),e!==hc.NO_CACHE&&this.put(i),i}return null},t.prototype.put=function(n){var e,r;if(this._limit>0){var i=this._items.map((function(p){return p.key})).indexOf(n.key);if(i>-1)ND.includes(this._items[i].state)&&ND.includes(n.state)?(this._items.splice(i,1),this._items.push(n)):(this._items[i].state=n.state,this._items[i].value=n.value);else{this._items.push(n);var a=this._items.filter((function(p){return p.state===qa.VOLATILE})),s=a.length-this._limit;if(s>0){var o=[];try{for(var u=Fe(this._items),c=u.next();!c.done;c=u.next()){var h=c.value;h.state===qa.VOLATILE&&s>0?s--:o.push(h)}}catch(p){e={error:p}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(e)throw e.error}}this._items=o}}}},t.prototype.remove=function(n){var e=this._items.map((function(r){return r.key})).indexOf(n);e>-1&&this._items.splice(e,1)},t.prototype.clearByCondition=function(n){this._items=this._items.filter((function(e){return!n(e)}))},t.prototype.clearForDatabase=function(n){this.clearByCondition((function(e){return e.key.startsWith(Pw(n))}))},t.prototype.clear=function(n){n===void 0&&(n=!1),this._items=n?[]:this._items.filter((function(e){return e.state!==qa.VOLATILE}))},t})(),TY=(function(){function t(n){var e=n.dbname,r=n.collectionName,i=n.store;this._requests=[],this._onCommit=new Map,this._onWrite=new Map,this._onError=new Map,this.dbname=e,this.collectionName=r,this.metadataKey=(function(a,s){return"".concat(_p(a,s),"/trans.metadata")})(e,r),this.recordsetKey=(function(a,s){return"".concat(_p(a,s),"/trans.recordset")})(e,r),this._store=i}return Object.defineProperty(t.prototype,"generation",{get:function(){return this._metadata?this._metadata.generation:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requestCount",{get:function(){return this._requests.length},enumerable:!1,configurable:!0}),t.prototype._getReducedRecordset=function(n){return n===void 0&&(n=[]),D(this,void 0,void 0,(function(){var e;return O(this,(function(r){switch(r.label){case 0:return[4,this._store.get(this.recordsetKey)];case 1:return(e=r.sent()||[]).push.apply(e,wt([],dt(n),!1)),[2,this._reduceRecordSet(e)]}}))}))},t.prototype._reduceRecordSet=function(n){for(var e=[],r={},i=n.length-1;i>=0;i--){for(var a=n[i],s=[],o=a.requests.length-1;o>=0;o--){var u=a.requests[o],c=u.data;r[c.key]||(s.unshift(u),r[c.key]=!0)}s.length>0&&(a.requests=s,e.unshift(a))}return e},t.prototype._applyRecord=function(n,e){return D(this,void 0,void 0,(function(){var r,i,a,s,o,u,c,h,p;return O(this,(function(m){switch(m.label){case 0:r=Gs.get(this.dbname),i=e.generation,a=e.requests,s=null,m.label=1;case 1:return m.trys.push([1,3,,4]),[4,this._store.setMany(a.map((function(_){return Z(Z({},_.data),{generation:i})})))];case 2:for(o=m.sent(),u=0;u<a.length;u++)o[u]instanceof Error&&(s||(s=o[u]),c=a[u].data,r.put(Z(Z({},c),{state:qa.PERSISTENT})));return[3,4];case 3:return h=m.sent(),s=h,[3,4];case 4:return s?[3,6]:(p=n.filter((function(_){return _.generation!==i})),[4,this._store.set({key:this.recordsetKey,value:p})]);case 5:return m.sent(),this._onWrite.forEach((function(_){_(a.map((function(b){return b.data})))})),[3,7];case 6:this._onError.forEach((function(_){s&&_(s)})),m.label=7;case 7:return[2]}}))}))},t.prototype.init=function(){return D(this,void 0,void 0,(function(){var n,e,r,i,a,s,o,u;return O(this,(function(c){switch(c.label){case 0:return n=this,[4,this._store.get(this.metadataKey)];case 1:return n._metadata=c.sent()||{generation:1},[4,this._getReducedRecordset()];case 2:e=c.sent(),c.label=3;case 3:c.trys.push([3,8,9,10]),r=Fe(e),i=r.next(),c.label=4;case 4:return i.done?[3,7]:(a=i.value,[4,this._applyRecord(e,a)]);case 5:c.sent(),c.label=6;case 6:return i=r.next(),[3,4];case 7:return[3,10];case 8:return s=c.sent(),o={error:s},[3,10];case 9:try{i&&!i.done&&(u=r.return)&&u.call(r)}finally{if(o)throw o.error}return[7];case 10:return[2]}}))}))},t.prototype.on=function(n,e,r){switch(n){case dp.COMMIT:this._onCommit.set(e,r);break;case dp.WRITE:this._onWrite.set(e,r);break;case dp.ERROR:this._onError.set(e,r)}},t.prototype.requestWrite=function(n,e){this._requests.push({data:n,options:e}),Gs.get(this.dbname).put(Z({state:qa.PENDING},n))},t.prototype.requestMultipleWrite=function(n,e){var r,i,a=Gs.get(this.dbname);try{for(var s=Fe(n),o=s.next();!o.done;o=s.next()){var u=o.value;this._requests.push({data:u,options:e}),a.put(Z({state:qa.PENDING},u))}}catch(c){r={error:c}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}},t.prototype.clear=function(){return D(this,void 0,void 0,(function(){return O(this,(function(n){return Gs.get(this.dbname).clearByCondition((function(e){return e.state===qa.PENDING})),this._requests=[],[2]}))}))},t.prototype.commit=function(){return D(this,void 0,void 0,(function(){var n,e,r,i,a,s,o,u,c,h,p,m,_=this;return O(this,(function(b){switch(b.label){case 0:if(!((n=this._requests).length>0))return[3,4];for(e=[],r={},u=n.length-1;u>=0;u--)i=n[u],h=i.data,r[h.key]||(r[h.key]=!0,e.unshift(i));return a={generation:this.generation,requests:e},[4,this._getReducedRecordset([a])];case 1:return s=b.sent(),[4,this._store.set({key:this.recordsetKey,value:s})];case 2:return b.sent(),this._metadata.generation++,[4,this._store.set({key:this.metadataKey,value:this._metadata})];case 3:for(b.sent(),o=Gs.get(this.dbname),u=0;u<e.length;u++)c=e[u],h=c.data,p=c.options,o.put(Z(Z({},h),{state:p&&p.persistent?qa.PERSISTENT:qa.VOLATILE}));this._requests=[],this._onCommit.forEach((function(C){C(n.map((function(N){return N.data})))})),m=bE.get(this.dbname),setTimeout((function(){try{_._applyRecord(s,a)}catch(C){_._onError.forEach((function(N){return N(C)}))}}),m.transactionApplyDelay),b.label=4;case 4:return[2]}}))}))},t})(),TC=(function(){function t(n){var e=n.blockId,r=n.keyName,i=n.items,a=i===void 0?[]:i,s=n.limit;this.blockId=e,this.keyName=r,this.limit=s,this._items=wt([],dt(a),!1)}return t.createFromCacheItem=function(n){return n?new t(n.value):null},Object.defineProperty(t.prototype,"isEmpty",{get:function(){return this._items.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){return this._items},enumerable:!1,configurable:!0}),t.prototype.serialize=function(){return{blockId:this.blockId,keyName:this.keyName,limit:this.limit,items:this._items}},t.prototype.getItemByKey=function(n){var e=this,r=this._items.find((function(i){var a=i[e.keyName];return n===a}));return r??null},t.prototype.has=function(n){var e=this;return this._items.map((function(r){return r[e.keyName]})).includes(n)},t.prototype.add=function(n){var e=this,r=this._items.map((function(i){return i[e.keyName]})).indexOf(n[this.keyName]);return r<0?this._items.length<this.limit&&(this._items.push(n),!0):(this._items[r]=n,!0)},t.prototype.remove=function(n){for(var e=0;e<this._items.length;e++)if(this._items[e][this.keyName]===n)return this._items.splice(e,1),!0;return!1},t.prototype.clear=function(){this._items=[]},t})(),NY=(function(){function t(n){var e=n.dbname,r=n.collectionName,i=n.metadata,a=n.hashFunction,s=a===void 0?bD:a,o=n.transaction,u=n.store;this.dbname=e,this.collectionName=r,this.hashFunction=s,this.metadata=i,this._transaction=o,this._store=u}return Object.defineProperty(t.prototype,"keyName",{get:function(){return this.metadata.keyName},enumerable:!1,configurable:!0}),t.prototype.createBlockId=function(n,e){return e===void 0&&(e=this.metadata.blockLevel),r=this.dbname,i=this.collectionName,a=e,s="".concat((function(o,u,c){var h=c.base*Math.pow(c.multiplier,u)+c.constant;return(c.hashFunction||bD)(o,h)})(n,e,{hashFunction:this.hashFunction,base:this.metadata.blockHashBase,multiplier:this.metadata.blockHashMultiplier,constant:this.metadata.blockHashConstant})),"".concat(kA(r,i)).concat(a,".").concat(s);var r,i,a,s},t.prototype._findBlock=function(n){return D(this,void 0,void 0,(function(){var e,r,i,a,s;return O(this,(function(o){switch(o.label){case 0:e=Gs.get(this.dbname),r=this.metadata.blockLevel,o.label=1;case 1:return r>0?(i=this.createBlockId(n,r),[4,e.find(this._store,i)]):[3,4];case 2:if((a=o.sent())&&(s=TC.createFromCacheItem(a),s?.getItemByKey(n)))return[2,s];o.label=3;case 3:return r--,[3,1];case 4:return[2,null]}}))}))},t.prototype.getFromBlock=function(n){return D(this,void 0,void 0,(function(){var e;return O(this,(function(r){switch(r.label){case 0:return[4,this._findBlock(n)];case 1:return[2,(e=r.sent())?e.getItemByKey(n):null]}}))}))},t.prototype.putToBlock=function(n,e){return D(this,void 0,void 0,(function(){var r,i,a,s,o;return O(this,(function(u){switch(u.label){case 0:return r=bE.get(this.dbname),i=this.createBlockId(n),a=Math.floor(this._store.itemSizeLimit/r.itemSizeLimit),[4,Gs.get(this.dbname).find(this._store,i)];case 1:return s=u.sent(),(o=s?TC.createFromCacheItem(s):new TC({blockId:i,keyName:this.keyName,items:[],limit:a}))!=null&&o.add(e)?(this._transaction.requestWrite({key:o.blockId,value:o.serialize()}),[2,!0]):[2,!1]}}))}))},t.prototype.removeFromBlock=function(n){return D(this,void 0,void 0,(function(){var e;return O(this,(function(r){switch(r.label){case 0:return[4,this._findBlock(n)];case 1:return(e=r.sent())&&e.remove(n)?(this._transaction.requestWrite({key:e.blockId,value:e.serialize()}),[2,!0]):[2,!1]}}))}))},t.prototype.clearAllBlocks=function(){return D(this,void 0,void 0,(function(){var n,e,r;return O(this,(function(i){switch(i.label){case 0:return n=kA(this.dbname,this.collectionName),[4,this._store.getAllKeys()];case 1:return e=i.sent(),r=e.filter((function(a){return a.startsWith(n)})),[4,this._store.removeMany(r)];case 2:return i.sent(),[4,this._transaction.clear()];case 3:return i.sent(),Gs.get(this.dbname).clearByCondition((function(a){return a.key.startsWith(n)})),[2]}}))}))},t})(),Dh=(function(){function t(n){var e=n.dbname,r=n.collectionName,i=n.keyName,a=n.fields,s=n.transaction,o=n.store,u=this;this._origin=[],this._table=[];var c=(function(h,p,m){return"".concat(_p(h,p),"/index.").concat(m)})(e,r,a.join(">"));this.dbname=e,this.collectionName=r,this.keyName=i,this.fields=a,this.indexerKey=c,this._store=o,this._transaction=s,this._transaction.on(dp.COMMIT,this.indexerKey,(function(){return u.commit()})),this._transaction.on(dp.ERROR,this.indexerKey,(function(){return u.abort()}))}return t.createKey=function(n){return n.join(">")},t.parseKey=function(n){return n.split(">")},t.prototype._addItem=function(n){var e=n[this.keyName],r=this.getColumnValues(n),i=dt(this.indexOf(r),2),a=i[0];return i[1]?!this._table[a].keys.includes(e)&&(this._table[a].keys.push(e),!0):(this._table.splice(a,0,{columnValues:r,keys:[e]}),!0)},t.prototype._removeItem=function(n){var e=n[this.keyName],r=this.getColumnValues(n),i=dt(this.indexOf(r),2),a=i[0];if(i[1]){var s=this._table[a].keys.indexOf(e);if(s>-1)return this._table[a].keys.splice(s,1),this._table[a].keys.length===0&&this._table.splice(a,1),!0}return!1},Object.defineProperty(t.prototype,"origin",{get:function(){return this._origin},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"table",{get:function(){return this._table},enumerable:!1,configurable:!0}),t.prototype.getColumnValues=function(n){var e,r,i,a,s=[];try{for(var o=Fe(this.fields),u=o.next();!u.done;u=o.next()){var c=u.value;if(c[0]==="-"&&(c=c.slice(1)),i=n[c],a=void 0,a=typeof i,i!==null&&a!=="undefined"&&a!=="boolean"&&a!=="number"&&a!=="string")throw rr.indexTypesNotMatch;s.push(n[c])}}catch(h){e={error:h}}finally{try{u&&!u.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return s},t.prototype.diff=function(n,e){for(var r in this.fields){var i=this.fields[r][0]==="-"?-1:1,a=pd(n[r],e[r]);if(a!==0)return i*a}return 0},t.prototype.indexOf=function(n){if(this._table.length>0){for(var e=0,r=this._table.length-1;e<=r;){var i=Math.floor((e+r)/2),a=this.diff(n,this._table[i].columnValues);if(a>0)e=i+1;else{if(!(a<0))return[i,!0];r=i-1}}return[e,!1]}return[0,!1]},t.prototype.ensure=function(){return D(this,void 0,void 0,(function(){var n,e,r,i,a,s,o,u,c,h,p,m,_,b,C,N,S;return O(this,(function(M){switch(M.label){case 0:return[4,(n=Gs.get(this.dbname)).find(this._store,this.indexerKey,hc.PERSISTENT)];case 1:return(e=M.sent())?[3,11]:(r=kA(this.dbname,this.collectionName),[4,this._store.getAllKeys()]);case 2:i=M.sent(),M.label=3;case 3:M.trys.push([3,8,9,10]),a=Fe(i),s=a.next(),M.label=4;case 4:return s.done?[3,7]:(o=s.value).startsWith(r)?[4,n.find(this._store,o,hc.NO_CACHE)]:[3,6];case 5:if(u=M.sent(),c=TC.createFromCacheItem(u))try{for(N=void 0,h=Fe(c.items),p=h.next();!p.done;p=h.next())m=p.value,this._addItem(m)}catch(w){N={error:w}}finally{try{p&&!p.done&&(S=h.return)&&S.call(h)}finally{if(N)throw N.error}}M.label=6;case 6:return s=a.next(),[3,4];case 7:return[3,10];case 8:return _=M.sent(),b={error:_},[3,10];case 9:try{s&&!s.done&&(C=a.return)&&C.call(a)}finally{if(b)throw b.error}return[7];case 10:return this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[3,12];case 11:this._origin=e.value,this._table=Bs(this._origin),M.label=12;case 12:return[2]}}))}))},t.prototype.drop=function(){return D(this,void 0,void 0,(function(){return O(this,(function(n){switch(n.label){case 0:return Gs.get(this.dbname).remove(this.indexerKey),[4,this._store.remove(this.indexerKey)];case 1:return n.sent(),[2]}}))}))},t.prototype.addItem=function(n){return D(this,void 0,void 0,(function(){return O(this,(function(e){return this._addItem(n)&&this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[2]}))}))},t.prototype.removeItem=function(n){return D(this,void 0,void 0,(function(){return O(this,(function(e){return this._removeItem(n)&&this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[2]}))}))},t.prototype.clear=function(){return D(this,void 0,void 0,(function(){return O(this,(function(n){return this._table=[],this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[2]}))}))},t.prototype.commit=function(){this._origin=this._table,this._table=Bs(this._origin)},t.prototype.abort=function(){this._table=Bs(this._origin)},t})(),oS=function(){return typeof document<"u"&&typeof navigator<"u"&&navigator.product!=="ReactNative"},AD=function(){var t=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(n){var e=(t+16*Math.random())%16|0;return t=Math.floor(t/16),(n==="x"?e:3&e|8).toString(16)}))};(function(t){t[t.PROCESSING=0]="PROCESSING",t[t.DONE=1]="DONE"})(Ay||(Ay={})),(function(t){t.NEWNODE="newnode",t.REMOVENODE="removenode",t.CLAIM_HOST="claimhost",t.SYNC_HOST="synchost",t.REQUEST_LOCK="requestlock",t.ACQUIRE_LOCK="acquirelock",t.RELEASE_LOCK="releaselock"})(Ha||(Ha={}));var vu,lN={},Fw=(function(){function t(n,e){e===void 0&&(e={});var r=this;return this._state=Ay.PROCESSING,this._queue=[],this._activationQueue=[],lN[n]&&!e.forceCreate||(this.nodeId=AD(),this.key=n,oS()&&(e.startAsInvisible?this.registerNode():document.visibilityState==="visible"?this.claimHost():this.registerNode(),document.addEventListener("visibilitychange",(function(){document.visibilityState==="visible"&&r.claimHost()})),window.addEventListener("message",(function(i){var a,s,o=i.data;if(o?.isNestDbMessage){var u=o.nodeId,c=o.requestId,h=o.key,p=o.op,m=o.data;if(u!==r.nodeId&&h===r.key)switch(p){case Ha.NEWNODE:r._sendSync();break;case Ha.CLAIM_HOST:r._sendSync(),r._hostId=u;break;case Ha.SYNC_HOST:if(!r.isInSync){r._activationTimeout&&clearTimeout(r._activationTimeout);var _=m,b=_.currentItemRequestId,C=_.queue,N=function(U){var L=r._queue.findIndex((function(P){return P.requestId===U.requestId}));L<0&&r._requestLock({isNestDbMessage:!0,nodeId:U.nodeId,requestId:U.requestId,key:r.key,op:Ha.REQUEST_LOCK,ts:U.ts})};try{for(var S=Fe(C),M=S.next();!M.done;M=S.next())N(M.value)}catch(U){a={error:U}}finally{try{M&&!M.done&&(s=S.return)&&s.call(S)}finally{if(a)throw a.error}}r._currentItem=r._queue.find((function(U){return U.requestId===b})),r._completeSync()}break;case Ha.REMOVENODE:r._queue=r._queue.filter((function(U){return U.nodeId!==o.nodeId})),r._currentItem&&r._currentItem.nodeId===o.nodeId&&(r._currentItem=void 0,r._acquire(r._queue[0]));break;case Ha.REQUEST_LOCK:r._requestLock(o);break;case Ha.ACQUIRE_LOCK:var w=r._queue.find((function(U){return U.requestId===c}));r._acquire(w);break;case Ha.RELEASE_LOCK:r._release(c)}}})),window.addEventListener("beforeunload",(function(){r._send(Ha.REMOVENODE)}))),lN[n]=this),lN[n]}return Object.defineProperty(t.prototype,"locked",{get:function(){return!!this._currentItem},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isHost",{get:function(){return this._hostId===this.nodeId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isInSync",{get:function(){return this._state==Ay.DONE},enumerable:!1,configurable:!0}),t.prototype._send=function(n,e){var r;e===void 0&&(e={});var i={isNestDbMessage:!0,nodeId:this.nodeId,requestId:(r=e?.requestId)!==null&&r!==void 0?r:AD(),key:this.key,op:n,data:e.data,ts:Date.now()};return oS()&&window.postMessage(i,"*"),i},t.prototype._acquire=function(n){n?(this._currentItem=n,this._currentItem.onAcquired&&this._currentItem.onAcquired(n.requestId)):this._currentItem=void 0},t.prototype._release=function(n){if(this._currentItem&&this._currentItem.requestId===n){var e=this._currentItem;this._currentItem=void 0,e.nodeId===this.nodeId&&this._send(Ha.RELEASE_LOCK,{requestId:e.requestId});var r=this._queue.findIndex((function(i){return i.requestId===n}));r>-1&&this._queue.splice(r,1),e.onReleased&&e.onReleased(n)}},t.prototype._requestLock=function(n){var e=this;return new Promise((function(r){for(var i={nodeId:n.nodeId,requestId:n.requestId,ts:n.ts,onAcquired:function(o){e.isHost&&e._send(Ha.ACQUIRE_LOCK,{requestId:o}),r()},onReleased:function(){e._acquire(e._queue[0])}},a=!1,s=0;s<e._queue.length;s++)if(e._queue[s].ts>i.ts){e._queue.splice(s,0,i),a=!0;break}a||e._queue.push(i),e._currentItem||e._acquire(e._queue[0])}))},t.prototype._sendSync=function(){var n;this.isHost&&this._send(Ha.SYNC_HOST,{data:{currentItemRequestId:(n=this._currentItem)===null||n===void 0?void 0:n.requestId,queue:this._queue.map((function(e){return{nodeId:e.nodeId,requestId:e.requestId,ts:e.ts}}))}})},t.prototype._waitUntilSyncCompleted=function(){return D(this,void 0,void 0,(function(){var n=this;return O(this,(function(e){return this.isHost&&!this.isInSync?[2,new Promise((function(r){n._activationQueue.push(r)}))]:[2]}))}))},t.prototype._waitSync=function(){var n=this;this.isInSync||(this._activationTimeout=setTimeout((function(){n._completeSync()}),8))},t.prototype._completeSync=function(){this.isInSync||(this._state=Ay.DONE,this._activationQueue.forEach((function(n){return n()})),this._activationQueue=[])},t.prototype.registerNode=function(){this._send(Ha.NEWNODE),this._waitSync()},t.prototype.claimHost=function(){this._hostId=this.nodeId,this._send(Ha.CLAIM_HOST),this._waitSync()},t.prototype.lock=function(){return D(this,void 0,void 0,(function(){var n;return O(this,(function(e){switch(e.label){case 0:return[4,this._waitUntilSyncCompleted()];case 1:return e.sent(),n=this._send(Ha.REQUEST_LOCK),[4,this._requestLock(n)];case 2:return e.sent(),[2]}}))}))},t.prototype.unlock=function(){var n;!((n=this._currentItem)===null||n===void 0)&&n.requestId&&this._release(this._currentItem.requestId)},t})(),uN=(function(){function t(n){var e=n.dbname,r=n.collectionName,i=n.keyName,a=n.keyHash,s=n.indexes,o=n.store,u=this;this._state=ip.INIT,this._indexers=[],this.dbname=e,this.name=r,this.keyName=i,this.indexes=wt([[i]],dt(s.filter((function(c){return Dh.createKey(c)!==u.keyName}))),!1),this._keyHash=a,this._store=o,this._mutex=new Fw((function(c,h){return"".concat(_p(c,h),".lock")})(e,r)),this._blobContainer=new SY({dbname:e,collectionName:r,store:o}),this._transaction=new TY({dbname:e,collectionName:r,store:o})}return t.metadataOf=function(n,e,r){return D(this,void 0,void 0,(function(){var i;return O(this,(function(a){switch(a.label){case 0:return i=oN(n,e),[4,r.get(i)];case 1:return[2,a.sent()]}}))}))},Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isReady",{get:function(){return this._state===ip.READY},enumerable:!1,configurable:!0}),t.prototype.init=function(){return D(this,void 0,void 0,(function(){var n,e,r,i,a,s,o,u,c,h,p,m,_,b,C=this;return O(this,(function(N){switch(N.label){case 0:return[4,this._mutex.lock()];case 1:N.sent(),N.label=2;case 2:return N.trys.push([2,9,,10]),n=bE.get(this.dbname),[4,t.metadataOf(this.dbname,this.name,this._store)];case 3:return e=N.sent(),this._metadata=e||{keyName:this.keyName,blockLevel:1,blockHashBase:n.blockHashBase,blockHashMultiplier:n.blockHashMultiplier,blockHashConstant:n.blockHashConstant,indexes:this.indexes},[4,this._transaction.init()];case 4:N.sent(),this._blockManager=new NY({dbname:this.dbname,collectionName:this.name,hashFunction:this._keyHash,metadata:this._metadata,transaction:this._transaction,store:this._store}),r=wt([],dt(this.indexes),!1),i=[],a=r.map((function(S){return Dh.createKey(S)})),s=e?e.indexes.map((function(S){return Dh.createKey(S)})):[];try{for(o=Fe(s),u=o.next();!u.done;u=o.next())c=u.value,a.includes(c)||i.push(Dh.parseKey(c))}catch(S){_={error:S}}finally{try{u&&!u.done&&(b=o.return)&&b.call(o)}finally{if(_)throw _.error}}return(h=[]).push.apply(h,wt([],dt(r.map((function(S){var M=new Dh({dbname:C.dbname,collectionName:C.name,keyName:C.keyName,fields:S,transaction:C._transaction,store:C._store});return C._indexers.push(M),M.ensure()}))),!1)),h.push.apply(h,wt([],dt(i.map((function(S){return new Dh({dbname:C.dbname,collectionName:C.name,keyName:C.keyName,fields:S,transaction:C._transaction,store:C._store}).drop()}))),!1)),[4,Promise.all(h)];case 5:return N.sent(),[4,this._transaction.commit()];case 6:return N.sent(),a.sort().join(",")===s.sort().join(",")?[3,8]:(p=oN(this.dbname,this.name),this._metadata.indexes=r,[4,this._store.set({key:p,value:this._metadata})]);case 7:N.sent(),N.label=8;case 8:return this._state=ip.READY,this._mutex.unlock(),[3,10];case 9:throw m=N.sent(),this._mutex.unlock(),m;case 10:return[2]}}))}))},t.prototype.close=function(){this._state=ip.CLOSED},t.prototype._hasPropertyOfKeyName=function(n){var e=n[this.keyName];return typeof e=="string"&&!!e},t.prototype._getIndexerBy=function(n){var e,r;n===void 0&&(n=null),n||(n=[this.keyName]);var i=Dh.createKey(n);try{for(var a=Fe(this._indexers),s=a.next();!s.done;s=a.next()){var o=s.value;if(i===Dh.createKey(o.fields))return o}}catch(u){e={error:u}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}throw rr.indexTableIsRequired},t.prototype._upgradeBlockLevel=function(){return D(this,void 0,void 0,(function(){var n;return O(this,(function(e){switch(e.label){case 0:return n=oN(this.dbname,this.name),this._metadata.blockLevel++,[4,this._store.set({key:n,value:this._metadata})];case 1:return e.sent(),[2]}}))}))},t.prototype._requestInsert=function(n){return D(this,void 0,void 0,(function(){var e,r,i,a,s,o;return O(this,(function(u){switch(u.label){case 0:return e=n[this.keyName],[4,this._blockManager.getFromBlock(e)];case 1:return u.sent()?[3,13]:[4,this._blockManager.putToBlock(e,n)];case 2:return u.sent()?[3,5]:[4,this._upgradeBlockLevel()];case 3:return u.sent(),[4,this._blockManager.putToBlock(e,n)];case 4:u.sent(),u.label=5;case 5:u.trys.push([5,10,11,12]),r=Fe(this._indexers),i=r.next(),u.label=6;case 6:return i.done?[3,9]:[4,i.value.addItem(n)];case 7:u.sent(),u.label=8;case 8:return i=r.next(),[3,6];case 9:return[3,12];case 10:return a=u.sent(),s={error:a},[3,12];case 11:try{i&&!i.done&&(o=r.return)&&o.call(r)}finally{if(s)throw s.error}return[7];case 12:return[3,14];case 13:throw rr.collectionInsertDuplicate;case 14:return[2]}}))}))},t.prototype._requestUpsert=function(n){return D(this,void 0,void 0,(function(){var e,r,i,a,s,o,u,c,h,p,m,_,b;return O(this,(function(C){switch(C.label){case 0:return e=n[this.keyName],[4,this._blockManager.getFromBlock(e)];case 1:return(r=C.sent())?[3,13]:[4,this._blockManager.putToBlock(e,n)];case 2:return C.sent()?[3,5]:[4,this._upgradeBlockLevel()];case 3:return C.sent(),[4,this._blockManager.putToBlock(e,n)];case 4:C.sent(),C.label=5;case 5:C.trys.push([5,10,11,12]),i=Fe(this._indexers),a=i.next(),C.label=6;case 6:return a.done?[3,9]:[4,(c=a.value).addItem(n)];case 7:C.sent(),C.label=8;case 8:return a=i.next(),[3,6];case 9:return[3,12];case 10:return s=C.sent(),p={error:s},[3,12];case 11:try{a&&!a.done&&(m=i.return)&&m.call(i)}finally{if(p)throw p.error}return[7];case 12:return[3,23];case 13:return[4,this._blockManager.putToBlock(e,n)];case 14:C.sent(),C.label=15;case 15:C.trys.push([15,21,22,23]),o=Fe(this._indexers),u=o.next(),C.label=16;case 16:return u.done?[3,20]:(c=u.value).diff(c.getColumnValues(r),c.getColumnValues(n))===0?[3,19]:[4,c.removeItem(r)];case 17:return C.sent(),[4,c.addItem(n)];case 18:C.sent(),C.label=19;case 19:return u=o.next(),[3,16];case 20:return[3,23];case 21:return h=C.sent(),_={error:h},[3,23];case 22:try{u&&!u.done&&(b=o.return)&&b.call(o)}finally{if(_)throw _.error}return[7];case 23:return[2]}}))}))},t.prototype._requestUpdate=function(n){return D(this,void 0,void 0,(function(){var e,r,i,a,s,o,u,c;return O(this,(function(h){switch(h.label){case 0:return e=n[this.keyName],[4,this._blockManager.getFromBlock(e)];case 1:return(r=h.sent())?[4,this._blockManager.putToBlock(e,n)]:[3,11];case 2:h.sent(),h.label=3;case 3:h.trys.push([3,9,10,11]),i=Fe(this._indexers),a=i.next(),h.label=4;case 4:return a.done?[3,8]:(s=a.value).diff(s.getColumnValues(r),s.getColumnValues(n))===0?[3,7]:[4,s.removeItem(r)];case 5:return h.sent(),[4,s.addItem(n)];case 6:h.sent(),h.label=7;case 7:return a=i.next(),[3,4];case 8:return[3,11];case 9:return o=h.sent(),u={error:o},[3,11];case 10:try{a&&!a.done&&(c=i.return)&&c.call(i)}finally{if(u)throw u.error}return[7];case 11:return[2]}}))}))},t.prototype._requestRemove=function(n){return D(this,void 0,void 0,(function(){var e,r,i,a,s,o;return O(this,(function(u){switch(u.label){case 0:return[4,this._blockManager.getFromBlock(n)];case 1:return(e=u.sent())?[4,this._blockManager.removeFromBlock(n)]:[3,10];case 2:u.sent(),u.label=3;case 3:u.trys.push([3,8,9,10]),r=Fe(this._indexers),i=r.next(),u.label=4;case 4:return i.done?[3,7]:[4,i.value.removeItem(e)];case 5:u.sent(),u.label=6;case 6:return i=r.next(),[3,4];case 7:return[3,10];case 8:return a=u.sent(),s={error:a},[3,10];case 9:try{i&&!i.done&&(o=r.return)&&o.call(r)}finally{if(s)throw s.error}return[7];case 10:return[2]}}))}))},t.prototype._requestClear=function(){return D(this,void 0,void 0,(function(){var n,e,r,i,a;return O(this,(function(s){switch(s.label){case 0:return[4,this._blockManager.clearAllBlocks()];case 1:s.sent(),s.label=2;case 2:s.trys.push([2,7,8,9]),n=Fe(this._indexers),e=n.next(),s.label=3;case 3:return e.done?[3,6]:[4,e.value.clear()];case 4:s.sent(),s.label=5;case 5:return e=n.next(),[3,3];case 6:return[3,9];case 7:return r=s.sent(),i={error:r},[3,9];case 8:try{e&&!e.done&&(a=n.return)&&a.call(n)}finally{if(i)throw i.error}return[7];case 9:return[2]}}))}))},t.prototype.getByKey=function(n){return D(this,void 0,void 0,(function(){var e,r;return O(this,(function(i){switch(i.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,6];case 1:i.sent(),i.label=2;case 2:return i.trys.push([2,4,,5]),[4,this._blockManager.getFromBlock(n)];case 3:return e=i.sent(),this._mutex.unlock(),[2,Bs(e)];case 4:throw r=i.sent(),this._mutex.unlock(),r;case 5:return[3,7];case 6:throw rr.collectionNotReady;case 7:return[2]}}))}))},t.prototype.query=function(n){if(n===void 0&&(n={}),this.isReady)return new CY({condition:n.where,mutex:this._mutex,blockManager:this._blockManager,indexer:this._getIndexerBy(n.index),backward:!!n.backward});throw rr.collectionNotReady},t.prototype.insertOne=function(n){return D(this,void 0,void 0,(function(){var e;return O(this,(function(r){switch(r.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:r.sent(),r.label=2;case 2:if(r.trys.push([2,5,,7]),!this._hasPropertyOfKeyName(n))throw rr.collectionKeyNotGiven;return[4,this._requestInsert(Bs(n))];case 3:return r.sent(),[4,this._transaction.commit()];case 4:return r.sent(),this._mutex.unlock(),[2,n];case 5:return e=r.sent(),[4,this._transaction.clear()];case 6:throw r.sent(),this._mutex.unlock(),e;case 7:return[3,9];case 8:throw rr.collectionNotReady;case 9:return[2]}}))}))},t.prototype.insertMany=function(n){return D(this,void 0,void 0,(function(){var e,r,i,a,s,o,u,c=this;return O(this,(function(h){switch(h.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,15];case 1:h.sent(),h.label=2;case 2:if(h.trys.push([2,12,,14]),n.some((function(p){return!c._hasPropertyOfKeyName(p)})))throw rr.collectionKeyNotGiven;h.label=3;case 3:h.trys.push([3,8,9,10]),e=Fe(n),r=e.next(),h.label=4;case 4:return r.done?[3,7]:(i=r.value,[4,this._requestInsert(Bs(i))]);case 5:h.sent(),h.label=6;case 6:return r=e.next(),[3,4];case 7:return[3,10];case 8:return a=h.sent(),o={error:a},[3,10];case 9:try{r&&!r.done&&(u=e.return)&&u.call(e)}finally{if(o)throw o.error}return[7];case 10:return[4,this._transaction.commit()];case 11:return h.sent(),this._mutex.unlock(),[2,n];case 12:return s=h.sent(),[4,this._transaction.clear()];case 13:throw h.sent(),this._mutex.unlock(),s;case 14:return[3,16];case 15:throw rr.collectionNotReady;case 16:return[2]}}))}))},t.prototype.upsertOne=function(n){return D(this,void 0,void 0,(function(){var e;return O(this,(function(r){switch(r.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:r.sent(),r.label=2;case 2:if(r.trys.push([2,5,,7]),!this._hasPropertyOfKeyName(n))throw rr.collectionKeyNotGiven;return[4,this._requestUpsert(Bs(n))];case 3:return r.sent(),[4,this._transaction.commit()];case 4:return r.sent(),this._mutex.unlock(),[2,n];case 5:return e=r.sent(),[4,this._transaction.clear()];case 6:throw r.sent(),this._mutex.unlock(),e;case 7:return[3,9];case 8:throw rr.collectionNotReady;case 9:return[2]}}))}))},t.prototype.upsertMany=function(n){return D(this,void 0,void 0,(function(){var e,r,i,a,s,o,u,c=this;return O(this,(function(h){switch(h.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,15];case 1:h.sent(),h.label=2;case 2:if(h.trys.push([2,12,,14]),n.some((function(p){return!c._hasPropertyOfKeyName(p)})))throw rr.collectionKeyNotGiven;h.label=3;case 3:h.trys.push([3,8,9,10]),e=Fe(n),r=e.next(),h.label=4;case 4:return r.done?[3,7]:(i=r.value,[4,this._requestUpsert(Bs(i))]);case 5:h.sent(),h.label=6;case 6:return r=e.next(),[3,4];case 7:return[3,10];case 8:return a=h.sent(),o={error:a},[3,10];case 9:try{r&&!r.done&&(u=e.return)&&u.call(e)}finally{if(o)throw o.error}return[7];case 10:return[4,this._transaction.commit()];case 11:return h.sent(),this._mutex.unlock(),[2,n];case 12:return s=h.sent(),[4,this._transaction.clear()];case 13:throw h.sent(),this._mutex.unlock(),s;case 14:return[3,16];case 15:throw rr.collectionNotReady;case 16:return[2]}}))}))},t.prototype.update=function(n){return D(this,void 0,void 0,(function(){var e;return O(this,(function(r){switch(r.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:r.sent(),r.label=2;case 2:if(r.trys.push([2,5,,7]),!this._hasPropertyOfKeyName(n))throw rr.collectionKeyNotGiven;return[4,this._requestUpdate(Bs(n))];case 3:return r.sent(),[4,this._transaction.commit()];case 4:return r.sent(),this._mutex.unlock(),[2,n];case 5:return e=r.sent(),[4,this._transaction.clear()];case 6:throw r.sent(),this._mutex.unlock(),e;case 7:return[3,9];case 8:throw rr.collectionNotReady;case 9:return[2]}}))}))},t.prototype.updateIf=function(n,e){return D(this,void 0,void 0,(function(){var r,i,a,s,o,u,c,h,p,m,_,b,C,N,S=this;return O(this,(function(M){switch(M.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,16];case 1:M.sent(),M.label=2;case 2:return M.trys.push([2,13,,15]),r=n.where,i=r===void 0?{}:r,a=n.index,s=a===void 0?null:a,o=n.backward,u=o!==void 0&&o,c=[],[4,new LA({condition:i,blockManager:this._blockManager,backward:u,indexer:this._getIndexerBy(s)}).each((function(w){return D(S,void 0,void 0,(function(){var U;return O(this,(function(L){if(w.error)throw w.stop(),w.error;return w.hasNext?(U=w.nextValue,cp(i,U)&&e.set&&(typeof e.set!="function"?Object.keys(e.set).forEach((function(P){var x;U[P]=(x=e.set)===null||x===void 0?void 0:x[P]})):e.set(U),c.push(U)),w.next()):w.stop(),[2]}))}))}))];case 3:M.sent(),M.label=4;case 4:M.trys.push([4,9,10,11]),h=Fe(c),p=h.next(),M.label=5;case 5:return p.done?[3,8]:(m=p.value,[4,this._requestUpdate(Bs(m))]);case 6:M.sent(),M.label=7;case 7:return p=h.next(),[3,5];case 8:return[3,11];case 9:return _=M.sent(),C={error:_},[3,11];case 10:try{p&&!p.done&&(N=h.return)&&N.call(h)}finally{if(C)throw C.error}return[7];case 11:return[4,this._transaction.commit()];case 12:return M.sent(),this._mutex.unlock(),[2,c];case 13:return b=M.sent(),[4,this._transaction.clear()];case 14:throw M.sent(),this._mutex.unlock(),b;case 15:return[3,17];case 16:throw this._transaction.clear(),rr.collectionNotReady;case 17:return[2]}}))}))},t.prototype.remove=function(n){return D(this,void 0,void 0,(function(){var e;return O(this,(function(r){switch(r.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:r.sent(),r.label=2;case 2:return r.trys.push([2,5,,7]),[4,this._requestRemove(n)];case 3:return r.sent(),[4,this._transaction.commit()];case 4:return r.sent(),this._mutex.unlock(),[3,7];case 5:return e=r.sent(),[4,this._transaction.clear()];case 6:throw r.sent(),this._mutex.unlock(),e;case 7:return[3,9];case 8:throw rr.collectionNotReady;case 9:return[2]}}))}))},t.prototype.removeIf=function(n){return D(this,void 0,void 0,(function(){var e,r,i,a,s,o,u,c,h,p,m,_,b,C,N=this;return O(this,(function(S){switch(S.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,15];case 1:S.sent(),S.label=2;case 2:return S.trys.push([2,13,,14]),e=n.where,r=e===void 0?{}:e,i=n.index,a=i===void 0?null:i,s=n.backward,o=s!==void 0&&s,u=[],[4,new LA({condition:r,blockManager:this._blockManager,backward:o,indexer:this._getIndexerBy(a)}).each((function(M){return D(N,void 0,void 0,(function(){var w,U;return O(this,(function(L){if(M.error)throw M.stop(),M.error;return M.hasNext?(w=M.nextValue,cp(r,w)&&(U=w[this.keyName],u.push(U)),M.next()):M.stop(),[2]}))}))}))];case 3:S.sent(),S.label=4;case 4:S.trys.push([4,9,10,11]),c=Fe(u),h=c.next(),S.label=5;case 5:return h.done?[3,8]:(p=h.value,[4,this._requestRemove(p)]);case 6:S.sent(),S.label=7;case 7:return h=c.next(),[3,5];case 8:return[3,11];case 9:return m=S.sent(),b={error:m},[3,11];case 10:try{h&&!h.done&&(C=c.return)&&C.call(c)}finally{if(b)throw b.error}return[7];case 11:return[4,this._transaction.commit()];case 12:return S.sent(),this._mutex.unlock(),[2,u];case 13:throw _=S.sent(),this._mutex.unlock(),_;case 14:return[3,16];case 15:throw this._transaction.clear(),rr.collectionNotReady;case 16:return[2]}}))}))},t.prototype.clear=function(){return D(this,void 0,void 0,(function(){var n;return O(this,(function(e){switch(e.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:e.sent(),e.label=2;case 2:return e.trys.push([2,5,,7]),[4,this._requestClear()];case 3:return e.sent(),[4,this._transaction.commit()];case 4:return e.sent(),this._mutex.unlock(),[3,7];case 5:return n=e.sent(),[4,this._transaction.clear()];case 6:throw e.sent(),this._mutex.unlock(),n;case 7:return[3,9];case 8:throw rr.collectionNotReady;case 9:return[2]}}))}))},t.prototype.getBlob=function(n){return D(this,void 0,void 0,(function(){return O(this,(function(e){switch(e.label){case 0:return[4,this._blobContainer.get(n)];case 1:return[2,e.sent()]}}))}))},t.prototype.saveBlob=function(n,e){return D(this,void 0,void 0,(function(){return O(this,(function(r){switch(r.label){case 0:return[4,this._blobContainer.save(n,e)];case 1:return[2,r.sent()]}}))}))},t.prototype.removeBlob=function(n){return D(this,void 0,void 0,(function(){return O(this,(function(e){switch(e.label){case 0:return[4,this._blobContainer.remove(n)];case 1:return e.sent(),[2]}}))}))},t.prototype.removeAllBlobs=function(){return D(this,void 0,void 0,(function(){return O(this,(function(n){switch(n.label){case 0:return[4,this._blobContainer.clear()];case 1:return n.sent(),[2]}}))}))},t})(),cN="[NESTDB]",W1=!0,Pv=(function(){function t(){}return t.off=function(){W1=!1},t.log=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];W1&&console.log.apply(console,wt(["".concat(cN,"[LOG]")],dt(n),!1))},t.warning=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];W1&&console.warn.apply(console,wt(["".concat(cN,"[WARNING]")],dt(n),!1))},t.error=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];W1&&console.error.apply(console,wt(["".concat(cN,"[ERROR]")],dt(n),!1))},t})(),AY=[{},{a:700400,n:"error"}],$S=(function(){function t(n){var e,r,i;this.encryption=(e=n.encryption)!==null&&e!==void 0?e:kk,this.itemSizeLimit=(r=n.itemSizeLimit)!==null&&r!==void 0?r:4194304,this.metadataBuffer=(i=n.metadataBuffer)!==null&&i!==void 0?i:256}return Object.defineProperty(t.prototype,"_encryptionCheckKey",{get:function(){return"".concat(this.dbname,".encrypt")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_reservedKeys",{get:function(){return[this._encryptionCheckKey]},enumerable:!1,configurable:!0}),t.prototype._getRawKey=function(n,e){return e===void 0&&(e=""),"".concat(n).concat(e)},t.prototype._generateShardPostfixArray=function(n){return n===void 0&&(n=1),wt([],dt(Array(n).keys()),!1)},t.prototype._shardify=function(n){var e=this,r=n.key,i=n.value,a=JSON.stringify(this.encryption.encrypt(i)),s=Math.ceil(a.length/this.adjustedItemSizeLimit);return this._generateShardPostfixArray(s).map((function(o){var u={key:e._getRawKey(r,".".concat(o)),data:a.substring(o*e.adjustedItemSizeLimit,(o+1)*e.adjustedItemSizeLimit)};return o===0&&(u.metadata={shards:s}),u}))},t.prototype._resetIfEncryptionChanged=function(){return D(this,void 0,void 0,(function(){var n,e,r,i,a,s,o,u,c,h=this;return O(this,(function(p){switch(p.label){case 0:return[4,this.get(this._encryptionCheckKey)];case 1:if(n=p.sent(),e={encrypted:AY.map((function(m){var _;return(_=h.encryption)===null||_===void 0?void 0:_.encrypt(m)}))},!n)return[3,8];if(!n.encrypted||!Array.isArray(n.encrypted))return[3,6];for(a in r=n.encrypted,i=[],r)i.push(a);s=0,p.label=2;case 2:return s<i.length?(a=i[s])in r?(o=a,u=JSON.stringify(n.encrypted[o]),c=JSON.stringify(e.encrypted[o]),u===c?[3,4]:(Pv.warning("Encryption algorithm has changed. Stored data would be cleared."),[4,this.clear()])):[3,4]:[3,5];case 3:return p.sent(),[3,5];case 4:return s++,[3,2];case 5:return[3,8];case 6:return[4,this.clear()];case 7:p.sent(),p.label=8;case 8:return[4,this.set({key:this._encryptionCheckKey,value:e})];case 9:return p.sent(),[2]}}))}))},Object.defineProperty(t.prototype,"adjustedItemSizeLimit",{get:function(){return Math.max(this.itemSizeLimit-this.metadataBuffer,4)},enumerable:!1,configurable:!0}),t.prototype.usage=function(){return D(this,void 0,void 0,(function(){var n,e,r,i,a,s,o,u,c;return O(this,(function(h){switch(h.label){case 0:return n=0,[4,this._getAllRawKeys()];case 1:e=h.sent(),h.label=2;case 2:h.trys.push([2,7,8,9]),r=Fe(e),i=r.next(),h.label=3;case 3:return i.done?[3,6]:(a=i.value,[4,this._getRaw(a)]);case 4:(s=h.sent())&&(n+=JSON.stringify(s).length),h.label=5;case 5:return i=r.next(),[3,3];case 6:return[3,9];case 7:return o=h.sent(),u={error:o},[3,9];case 8:try{i&&!i.done&&(c=r.return)&&c.call(r)}finally{if(u)throw u.error}return[7];case 9:return[2,n]}}))}))},t.prototype.getAllKeys=function(){return D(this,void 0,void 0,(function(){var n=this;return O(this,(function(e){switch(e.label){case 0:return[4,this._getAllRawKeys()];case 1:return[2,e.sent().filter((function(r){return r.endsWith(".0")})).map((function(r){return r.replace(/\.0$/,"")})).filter((function(r){return!n._reservedKeys.includes(r)}))]}}))}))},t.prototype.get=function(n){return D(this,void 0,void 0,(function(){var e,r,i,a,s,o,u=this;return O(this,(function(c){switch(c.label){case 0:return e=this._getRawKey(n,".0"),[4,this._getRaw(e)];case 1:if(!(r=c.sent()))return[3,7];c.label=2;case 2:return c.trys.push([2,6,,7]),i=r.data,(a=r.metadata)!=null&&a.shards&&a.shards>1?[4,Promise.all(this._generateShardPostfixArray(a?.shards).map((function(h){return D(u,void 0,void 0,(function(){var p,m;return O(this,(function(_){switch(_.label){case 0:return h>0?(p=this._getRawKey(n,".".concat(h)),[4,this._getRaw(p)]):[3,2];case 1:if(!(m=_.sent()))throw rr.storeBrokenIntegrity;return[2,m.data];case 2:return[2,i]}}))}))})))]:[3,4];case 3:return o=c.sent(),[3,5];case 4:o=[i],c.label=5;case 5:return s=o,[2,this.encryption.decrypt(JSON.parse(s.join("")))];case 6:return c.sent(),[2,null];case 7:return[2,null]}}))}))},t.prototype.set=function(n){return D(this,void 0,void 0,(function(){var e;return O(this,(function(r){switch(r.label){case 0:return e=this._shardify(n),[4,this._setRaw(e)];case 1:return r.sent(),[2,Z({},n.value)]}}))}))},t.prototype.setMany=function(n){return D(this,void 0,void 0,(function(){var e,r=this;return O(this,(function(i){switch(i.label){case 0:return e=[],[4,this._setRaw(e.concat.apply(e,wt([],dt(n.map((function(a){return r._shardify(a)}))),!1)))];case 1:return i.sent(),[2,n.map((function(a){return a.value}))]}}))}))},t.prototype.remove=function(n){return D(this,void 0,void 0,(function(){var e,r,i,a,s,o=this;return O(this,(function(u){switch(u.label){case 0:return e=this._getRawKey(n,".0"),[4,this._getRaw(e)];case 1:return(r=u.sent())?(i=r.metadata,a=this._generateShardPostfixArray(i?.shards).map((function(c){return o._getRawKey(n,".".concat(c))})),[4,this._removeRaw(a)]):[3,3];case 2:return u.sent(),(s=Gs.get(this.dbname))==null||s.remove(n),[2,!0];case 3:return[2,!1]}}))}))},t.prototype.removeMany=function(n){return D(this,void 0,void 0,(function(){var e,r,i,a,s,o,u,c,h,p,m=this;return O(this,(function(_){switch(_.label){case 0:e=Gs.get(this.dbname),r=[],i=function(b){var C,N,S;return O(this,(function(M){switch(M.label){case 0:return C=a._getRawKey(b,".0"),[4,a._getRaw(C)];case 1:return(N=M.sent())&&(S=N.metadata,r.push.apply(r,wt([],dt(a._generateShardPostfixArray(S?.shards).map((function(w){return m._getRawKey(b,".".concat(w))}))),!1))),e?.remove(b),[2]}}))},a=this,_.label=1;case 1:_.trys.push([1,6,7,8]),s=Fe(n),o=s.next(),_.label=2;case 2:return o.done?[3,5]:(u=o.value,[5,i(u)]);case 3:_.sent(),_.label=4;case 4:return o=s.next(),[3,2];case 5:return[3,8];case 6:return c=_.sent(),h={error:c},[3,8];case 7:try{o&&!o.done&&(p=s.return)&&p.call(s)}finally{if(h)throw h.error}return[7];case 8:return r.length>0?[4,this._removeRaw(r)]:[3,10];case 9:_.sent(),_.label=10;case 10:return[2,n]}}))}))},t.prototype.clear=function(){return D(this,void 0,void 0,(function(){var n;return O(this,(function(e){return(n=Gs.get(this.dbname))==null||n.clearForDatabase(this.dbname),[2]}))}))},t})(),ks={},jv=(function(t){function n(e){e===void 0&&(e={});var r,i=this;i=t.call(this,Z(Z({},e),{itemSizeLimit:(r=e.itemSizeLimit)!==null&&r!==void 0?r:4194304}))||this;var a=e.delay,s=a===void 0?1:a;return i.delay=s,i.observer={},i}return G(n,t),Object.defineProperty(n.prototype,"rawData",{get:function(){return ks[this.dbname]},set:function(e){ks[this.dbname]=e},enumerable:!1,configurable:!0}),n.prototype._getAllRawKeys=function(){return D(this,void 0,void 0,(function(){return O(this,(function(e){if(ks[this.dbname])return[2,Object.keys(ks[this.dbname])];throw rr.storeNotAvailable}))}))},n.prototype._getRaw=function(e){return D(this,void 0,void 0,(function(){return O(this,(function(r){switch(r.label){case 0:return ks[this.dbname]?[4,K1(this.delay)]:[3,2];case 1:return r.sent(),[2,ks[this.dbname][e]?Z({key:e},ks[this.dbname][e]):null];case 2:throw rr.storeNotAvailable}}))}))},n.prototype._setRaw=function(e){return D(this,void 0,void 0,(function(){var r,i,a,s,o,u,c,h;return O(this,(function(p){switch(p.label){case 0:return ks[this.dbname]?[4,K1(this.delay)]:[3,2];case 1:p.sent();try{for(r=Fe(e),i=r.next();!i.done;i=r.next())a=i.value,s=a.key,o=a.data,u=a.metadata,ks[this.dbname][s]=Object.freeze({data:o,metadata:u})}catch(m){c={error:m}}finally{try{i&&!i.done&&(h=r.return)&&h.call(r)}finally{if(c)throw c.error}}return[3,3];case 2:throw rr.storeNotAvailable;case 3:return[2]}}))}))},n.prototype._removeRaw=function(e){return D(this,void 0,void 0,(function(){var r,i,a,s,o;return O(this,(function(u){switch(u.label){case 0:return ks[this.dbname]?[4,K1(this.delay)]:[3,2];case 1:u.sent();try{for(r=Fe(e),i=r.next();!i.done;i=r.next())a=i.value,ks[this.dbname][a]&&delete ks[this.dbname][a]}catch(c){s={error:c}}finally{try{i&&!i.done&&(o=r.return)&&o.call(r)}finally{if(s)throw s.error}}return[3,3];case 2:throw rr.storeNotAvailable;case 3:return[2]}}))}))},n.prototype.observe=function(e,r,i){var a=this;this.observer[e]||(this.observer[e]={}),r.forEach((function(s){return a.observer[e][s]=i}))},n.prototype.checkAvailability=function(){return D(this,void 0,void 0,(function(){return O(this,(function(e){return[2]}))}))},n.prototype.init=function(e){return D(this,void 0,void 0,(function(){return O(this,(function(r){switch(r.label){case 0:return this.dbname=e,ks[this.dbname]||(ks[this.dbname]={}),[4,this._resetIfEncryptionChanged()];case 1:return r.sent(),[2]}}))}))},n.prototype.set=function(e){return D(this,void 0,void 0,(function(){var r,i;return O(this,(function(a){if((r=this.observer[e.key])&&typeof r.set=="function"&&(i=r.set()))throw i;return[2,t.prototype.set.call(this,e)]}))}))},n.prototype.setMany=function(e){return D(this,void 0,void 0,(function(){var r,i,a,s,o,u,c;return O(this,(function(h){try{for(r=Fe(e),i=r.next();!i.done;i=r.next())if(a=i.value,(s=this.observer[a.key])&&typeof s.set=="function"&&(o=s.set()))throw o}catch(p){u={error:p}}finally{try{i&&!i.done&&(c=r.return)&&c.call(r)}finally{if(u)throw u.error}}return[2,t.prototype.setMany.call(this,e)]}))}))},n.prototype.clear=function(){return D(this,void 0,void 0,(function(){return O(this,(function(e){switch(e.label){case 0:return[4,t.prototype.clear.call(this)];case 1:return e.sent(),[4,K1(this.delay)];case 2:return e.sent(),ks[this.dbname]={},[2]}}))}))},n})($S),MD="NestDBStore";(function(t){t[t.UNINITIALIZED=0]="UNINITIALIZED",t[t.OPENING=1]="OPENING",t[t.OPEN=2]="OPEN",t[t.CLOSED=3]="CLOSED"})(vu||(vu={}));var MY=(function(t){function n(e){e===void 0&&(e={});var r,i=this;return(i=t.call(this,Z(Z({},e),{itemSizeLimit:(r=e.itemSizeLimit)!==null&&r!==void 0?r:104857600}))||this)._storeName=MD,i._state=vu.UNINITIALIZED,i._openJobQueue=[],i._window=typeof window<"u"?window:void 0,i._indexedDb=i._window?i._window.indexedDB||i._window.mozIndexedDB||i._window.webkitIndexedDB||i._window.msIndexedDB:void 0,i}return G(n,t),Object.defineProperty(n.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),n.prototype.isTransactionInactiveError=function(e){return e instanceof Error&&e.message.includes("The transaction is inactive")},n.prototype._putToObjectStore=function(e,r){return D(this,void 0,void 0,(function(){return O(this,(function(i){return[2,new Promise((function(a,s){var o=e.put(r);o.addEventListener("success",(function(u){a(u.target.result)})),o.addEventListener("error",(function(u){s(u.target.error)}))}))]}))}))},n.prototype._deleteFromObjectStore=function(e,r){return D(this,void 0,void 0,(function(){return O(this,(function(i){return[2,new Promise((function(a,s){var o=e.delete(r);o.addEventListener("success",(function(){return a(r)})),o.addEventListener("error",(function(u){return s(u.target.error)}))}))]}))}))},n.prototype._openDatabase=function(e){var r=this;return new Promise((function(i,a){if(r._indexedDb){r._state=vu.OPENING;var s=r._indexedDb.open(e);s.addEventListener("upgradeneeded",(function(o){o.target.result.createObjectStore(MD,{keyPath:"key"})})),s.addEventListener("success",(function(o){r._state=vu.OPEN,r._database=o.target.result,r._openJobQueue.forEach((function(u){return u()})),r._openJobQueue=[],r._database.onclose=function(){r._database=void 0,r._state=vu.OPENING,setTimeout((function(){r._openDatabase(e)}),5)},i(r._database)})),s.addEventListener("error",(function(o){r._state=vu.UNINITIALIZED,a(o.target.error)}))}else a(rr.storeNotAvailable)}))},n.prototype._getObjectStore=function(e){return D(this,void 0,void 0,(function(){var r,i=this;return O(this,(function(a){switch(a.label){case 0:return this._database?((r=this._database.transaction(this._storeName,e)).addEventListener("abort",(function(s){throw s.target.error})),[2,r.objectStore(this._storeName)]):[3,1];case 1:switch(this._state){case vu.UNINITIALIZED:case vu.OPEN:return[3,2];case vu.OPENING:case vu.CLOSED:return[3,3]}return[3,4];case 2:throw rr.storeNotInitialized;case 3:return[2,new Promise((function(s){i._openJobQueue.push((function(){return s(i._getObjectStore(e))}))}))];case 4:return[4,this._getObjectStore(e)];case 5:return[2,a.sent()]}}))}))},n.prototype._getAllRawKeys=function(){return D(this,void 0,void 0,(function(){var e=this;return O(this,(function(r){switch(r.label){case 0:return[4,new Promise((function(i,a){return D(e,void 0,void 0,(function(){var s,o;return O(this,(function(u){switch(u.label){case 0:return[4,this._getObjectStore("readonly")];case 1:return s=u.sent(),(o=s.getAllKeys()).addEventListener("success",(function(c){i(c.target.result)})),o.addEventListener("error",(function(c){return a(c.target.error)})),[2]}}))}))}))];case 1:return[2,r.sent()]}}))}))},n.prototype._getRaw=function(e){return D(this,void 0,void 0,(function(){var r=this;return O(this,(function(i){switch(i.label){case 0:return[4,new Promise((function(a,s){return D(r,void 0,void 0,(function(){var o,u;return O(this,(function(c){switch(c.label){case 0:return[4,this._getObjectStore("readonly")];case 1:return o=c.sent(),(u=o.get(e)).addEventListener("success",(function(h){var p;a((p=h?.target)===null||p===void 0?void 0:p.result)})),u.addEventListener("error",(function(h){return s(h.target.error)})),[2]}}))}))}))];case 1:return[2,i.sent()]}}))}))},n.prototype._setRaw=function(e){return D(this,void 0,void 0,(function(){var r,i,a,s,o,u,c,h,p,m=this;return O(this,(function(_){switch(_.label){case 0:return _.trys.push([0,3,,15]),[4,this._getObjectStore("readwrite")];case 1:return r=_.sent(),[4,Promise.all(e.map((function(b){return m._putToObjectStore(r,b)})))];case 2:return _.sent(),[3,15];case 3:return i=_.sent(),this.isTransactionInactiveError(i)?[4,this._getObjectStore("readwrite")]:[3,13];case 4:a=_.sent(),_.label=5;case 5:_.trys.push([5,10,11,12]),s=Fe(e),o=s.next(),_.label=6;case 6:return o.done?[3,9]:(u=o.value,[4,this._putToObjectStore(a,u)]);case 7:_.sent(),_.label=8;case 8:return o=s.next(),[3,6];case 9:return[3,12];case 10:return c=_.sent(),h={error:c},[3,12];case 11:try{o&&!o.done&&(p=s.return)&&p.call(s)}finally{if(h)throw h.error}return[7];case 12:return[3,14];case 13:throw i;case 14:return[3,15];case 15:return[2]}}))}))},n.prototype._removeRaw=function(e){return D(this,void 0,void 0,(function(){var r,i,a,s,o,u,c,h,p,m=this;return O(this,(function(_){switch(_.label){case 0:return _.trys.push([0,3,,15]),[4,this._getObjectStore("readwrite")];case 1:return r=_.sent(),[4,Promise.all(e.map((function(b){return m._deleteFromObjectStore(r,b)})))];case 2:return _.sent(),[3,15];case 3:return i=_.sent(),this.isTransactionInactiveError(i)?[4,this._getObjectStore("readwrite")]:[3,13];case 4:a=_.sent(),_.label=5;case 5:_.trys.push([5,10,11,12]),s=Fe(e),o=s.next(),_.label=6;case 6:return o.done?[3,9]:(u=o.value,[4,this._deleteFromObjectStore(a,u)]);case 7:_.sent(),_.label=8;case 8:return o=s.next(),[3,6];case 9:return[3,12];case 10:return c=_.sent(),h={error:c},[3,12];case 11:try{o&&!o.done&&(p=s.return)&&p.call(s)}finally{if(h)throw h.error}return[7];case 12:return[3,14];case 13:throw i;case 14:return[3,15];case 15:return[2]}}))}))},n.prototype._triggerDatabaseClose=function(){this._database&&this._database.onclose&&this._database.onclose(new Event("dummy"))},n.prototype.checkAvailability=function(){return D(this,void 0,void 0,(function(){var e,r=this;return O(this,(function(i){switch(i.label){case 0:if(!((e=typeof window<"u"?window:null)!=null&&e.indexedDB||e?.mozIndexedDB||e?.webkitIndexedDB||e?.msIndexedDB))return[3,6];if(this._indexedDb=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB,!this._window||!oS())return[3,4];if(!(oS()&&navigator.userAgent&&navigator.userAgent.includes("Edge/")))return[3,1];if(!this._window.indexedDB&&(e.PointerEvent||e.MSPointerEvent))throw rr.storeNotAvailableInPrivateBrowsing;return[3,3];case 1:return[4,new Promise((function(a,s){if(r._indexedDb)try{var o=r._indexedDb.open("_testMozilla");o.onerror=function(){return s(rr.storeNotAvailableInPrivateBrowsing)},o.onsuccess=function(u){if(u.target.result.close(),r._indexedDb){var c=r._indexedDb.deleteDatabase("_testMozilla");c.onerror=function(){return a()},c.onsuccess=function(){return a()}}else s(rr.storeNotAvailable)}}catch{s(rr.storeNotAvailableInPrivateBrowsing)}else s(rr.storeNotAvailable)}))];case 2:i.sent(),i.label=3;case 3:return[3,5];case 4:throw rr.storeNotAvailable;case 5:return[3,7];case 6:throw rr.storeNotAvailable;case 7:return[2]}}))}))},n.prototype.init=function(e){return D(this,void 0,void 0,(function(){return O(this,(function(r){switch(r.label){case 0:return this.dbname=e,[4,this.checkAvailability()];case 1:return r.sent(),[4,this._openDatabase(e)];case 2:return r.sent(),[4,this._resetIfEncryptionChanged()];case 3:return r.sent(),[2]}}))}))},n.prototype.clear=function(){return D(this,void 0,void 0,(function(){var e=this;return O(this,(function(r){switch(r.label){case 0:return[4,t.prototype.clear.call(this)];case 1:return r.sent(),[4,new Promise((function(i,a){return D(e,void 0,void 0,(function(){var s,o;return O(this,(function(u){switch(u.label){case 0:return[4,this._getObjectStore("readwrite")];case 1:return s=u.sent(),(o=s.clear()).addEventListener("success",(function(){return i()})),o.addEventListener("error",(function(c){return a(c.target.error)})),[2]}}))}))}))];case 2:return[2,r.sent()]}}))}))},n})($S),IY=(function(t){function n(e){var r=this,i=e.AsyncStorage,a=e.itemSizeLimit,s=a===void 0?2097152:a,o=tj(e,["AsyncStorage","itemSizeLimit"]);return(r=t.call(this,Z(Z({},o),{itemSizeLimit:s}))||this)._asyncStorage=i,r}return G(n,t),n.prototype._isBelonging=function(e){return e.startsWith("".concat(this.dbname,"/"))},n.prototype._getActualKey=function(e){return"".concat(this.dbname,"/").concat(e)},n.prototype._getAllRawKeys=function(){return D(this,void 0,void 0,(function(){var e,r=this;return O(this,(function(i){switch(i.label){case 0:return[4,this._asyncStorage.getAllKeys()];case 1:return e=i.sent(),[2,e.filter((function(a){return r._isBelonging(a)})).map((function(a){return a.substring("".concat(r.dbname,"/").length)}))]}}))}))},n.prototype._getRaw=function(e){return D(this,void 0,void 0,(function(){var r;return O(this,(function(i){switch(i.label){case 0:return[4,this._asyncStorage.getItem(this._getActualKey(e))];case 1:return[2,(r=i.sent())?JSON.parse(r):null]}}))}))},n.prototype._setRaw=function(e){return D(this,void 0,void 0,(function(){var r,i,a,s,o,u,c;return O(this,(function(h){switch(h.label){case 0:r=[];try{for(i=Fe(e),a=i.next();!a.done;a=i.next())s=a.value,o=s.key,s.data.length<=this.adjustedItemSizeLimit&&r.push([this._getActualKey(o),JSON.stringify(s)])}catch(p){u={error:p}}finally{try{a&&!a.done&&(c=i.return)&&c.call(i)}finally{if(u)throw u.error}}return[4,this._asyncStorage.multiSet(r)];case 1:return h.sent(),[2]}}))}))},n.prototype._removeRaw=function(e){return D(this,void 0,void 0,(function(){var r=this;return O(this,(function(i){switch(i.label){case 0:return[4,this._asyncStorage.multiRemove(e.map((function(a){return r._getActualKey(a)})))];case 1:return i.sent(),[2]}}))}))},n.prototype.checkAvailability=function(){return D(this,void 0,void 0,(function(){return O(this,(function(e){if(!this._asyncStorage)throw rr.storeNotAvailable;return[2]}))}))},n.prototype.init=function(e){return D(this,void 0,void 0,(function(){return O(this,(function(r){switch(r.label){case 0:return this.dbname=e,[4,this._resetIfEncryptionChanged()];case 1:return r.sent(),[2]}}))}))},n.prototype.clear=function(){return D(this,void 0,void 0,(function(){var e;return O(this,(function(r){switch(r.label){case 0:return[4,t.prototype.clear.call(this)];case 1:return r.sent(),[4,this.getAllKeys()];case 2:return e=r.sent(),[4,this.removeMany(e)];case 3:return r.sent(),[2]}}))}))},n})($S),wY=(function(t){function n(e){var r,i,a=this;return(a=t.call(this,Z(Z({},e),{itemSizeLimit:(r=e.itemSizeLimit)!==null&&r!==void 0?r:6291456}))||this)._mmkv=(i=e.MMKV,{getString:function(s){return i.getString(s)},set:function(s,o){return i.set(s,o)},delete:function(s){return i.remove?i.remove(s):i.delete(s)},getAllKeys:function(){return i.getAllKeys()}}),a}return G(n,t),n.prototype._isBelonging=function(e){return e.startsWith("".concat(this.dbname,"/"))},n.prototype._getActualKey=function(e){return"".concat(this.dbname,"/").concat(e)},n.prototype._getAllRawKeys=function(){return D(this,void 0,void 0,(function(){var e,r=this;return O(this,(function(i){switch(i.label){case 0:return[4,this._mmkv.getAllKeys()];case 1:return e=i.sent(),[2,e.filter((function(a){return r._isBelonging(a)})).map((function(a){return a.substring("".concat(r.dbname,"/").length)}))]}}))}))},n.prototype._getRaw=function(e){return D(this,void 0,void 0,(function(){var r;return O(this,(function(i){switch(i.label){case 0:return[4,this._mmkv.getString(this._getActualKey(e))];case 1:return[2,(r=i.sent())?JSON.parse(r):null]}}))}))},n.prototype._setRaw=function(e){return D(this,void 0,void 0,(function(){var r,i,a,s,o,u;return O(this,(function(c){try{for(r=Fe(e),i=r.next();!i.done;i=r.next())a=i.value,s=a.key,a.data.length<=this.adjustedItemSizeLimit&&this._mmkv.set(this._getActualKey(s),JSON.stringify(a))}catch(h){o={error:h}}finally{try{i&&!i.done&&(u=r.return)&&u.call(r)}finally{if(o)throw o.error}}return[2]}))}))},n.prototype._removeRaw=function(e){return D(this,void 0,void 0,(function(){var r,i,a,s,o;return O(this,(function(u){try{for(r=Fe(e),i=r.next();!i.done;i=r.next())a=i.value,this._mmkv.delete(this._getActualKey(a))}catch(c){s={error:c}}finally{try{i&&!i.done&&(o=r.return)&&o.call(r)}finally{if(s)throw s.error}}return[2]}))}))},n.prototype.checkAvailability=function(){return D(this,void 0,void 0,(function(){return O(this,(function(e){if(!this._mmkv)throw rr.storeNotAvailable;return[2]}))}))},n.prototype.init=function(e){return D(this,void 0,void 0,(function(){return O(this,(function(r){switch(r.label){case 0:return this.dbname=e,[4,this._resetIfEncryptionChanged()];case 1:return r.sent(),[2]}}))}))},n.prototype.clear=function(){return D(this,void 0,void 0,(function(){var e;return O(this,(function(r){switch(r.label){case 0:return[4,t.prototype.clear.call(this)];case 1:return r.sent(),[4,this.getAllKeys()];case 2:return e=r.sent(),[4,this.removeMany(e)];case 3:return r.sent(),[2]}}))}))},n})($S),yu;(function(t){t.INIT="INIT",t.OPENING="OPENING",t.OPENED="OPENED",t.CLOSED="CLOSED"})(yu||(yu={}));var ud,RY=(function(){function t(n){var e=n.name,r=n.version,i=n.store,a=n.config;this.name=e,this._version=r,this._state=yu.INIT,this._config=a||new bE({dbname:e}),this._store=i,this._event={success:ny,error:ny,storeReplaced:ny,upgrade:SD},this._collections=new Map,this._globalMutex=new Fw("".concat(this.name,".lock")),this._config.disableLogger&&Pv.off(),new Gs({dbname:e,limit:this._config.cacheLimit})}return Object.defineProperty(t.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"store",{get:function(){return this._store},enumerable:!1,configurable:!0}),t.prototype._initializeCollection=function(n,e){var r;return D(this,void 0,void 0,(function(){var i,a,s;return O(this,(function(o){switch(o.label){case 0:return a=this._collections.get(n),e?(i=new uN({dbname:this.name,collectionName:n,keyName:e.keyName,indexes:(r=e.index)!==null&&r!==void 0?r:[[e.keyName]],store:this._store}),[3,3]):[3,1];case 1:return a&&a.state===ip.READY?[3,3]:[4,uN.metadataOf(this.name,n,this._store)];case 2:(s=o.sent())&&(i=new uN({dbname:this.name,collectionName:n,keyName:s.keyName,indexes:s.indexes,store:this._store})),o.label=3;case 3:return i?(this._collections.set(n,i),[4,i.init()]):[3,5];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))},t.prototype.estimateUsage=function(){return D(this,void 0,void 0,(function(){return O(this,(function(n){switch(n.label){case 0:return[4,(e=this._store,D(void 0,void 0,void 0,(function(){return O(this,(function(r){switch(r.label){case 0:return[4,e.usage()];case 1:return[2,r.sent()]}}))})))];case 1:return[2,n.sent()]}var e}))}))},t.prototype.commitSchema=function(n){return D(this,void 0,void 0,(function(){var e=this;return O(this,(function(r){switch(r.label){case 0:return this._state!==yu.OPENING?[3,2]:[4,Promise.all(n.map((function(i){return D(e,void 0,void 0,(function(){return O(this,(function(a){switch(a.label){case 0:return[4,this._initializeCollection(i.collectionName,i)];case 1:return a.sent(),[2]}}))}))})))];case 1:return r.sent(),[3,3];case 2:throw rr.databaseSchemaNotOnUpgrade;case 3:return[2]}}))}))},t.prototype.open=function(){var n;return D(this,void 0,void 0,(function(){var e,r,i,a,s,o,u,c,h,p,m=this;return O(this,(function(_){switch(_.label){case 0:return[4,this._globalMutex.lock()];case 1:if(_.sent(),this._state===yu.OPENED)return[3,20];this._state=yu.OPENING,_.label=2;case 2:return _.trys.push([2,13,,20]),[4,this._store.init(this.name)];case 3:return _.sent(),b=this.name,e="".concat(Pw(b),".metadata"),r={version:0,collectionNames:[]},[4,this._store.get(e)];case 4:i=(n=_.sent())!==null&&n!==void 0?n:r,_.label=5;case 5:_.trys.push([5,10,11,12]),a=Fe(i.collectionNames),s=a.next(),_.label=6;case 6:return s.done?[3,9]:(o=s.value,[4,this._initializeCollection(o)]);case 7:_.sent(),_.label=8;case 8:return s=a.next(),[3,6];case 9:return[3,12];case 10:return u=_.sent(),h={error:u},[3,12];case 11:try{s&&!s.done&&(p=a.return)&&p.call(a)}finally{if(h)throw h.error}return[7];case 12:return[2,new Promise((function(C,N){var S=function(w){i.version<m._version?m._event.upgrade(i.version,(function(U){return D(m,void 0,void 0,(function(){var L;return O(this,(function(P){switch(P.label){case 0:if(U)return[3,5];i.version++,i.collectionNames=Array.from(this._collections.keys()),P.label=1;case 1:return P.trys.push([1,3,,4]),[4,this._store.set({key:e,value:i})];case 2:return P.sent(),w({continued:!0}),[3,4];case 3:return L=P.sent(),w({continued:!1,err:L}),[3,4];case 4:return[3,6];case 5:w({continued:!1,err:U}),P.label=6;case 6:return[2]}}))}))})):w({continued:!1})},M=function(w){var U=w.continued,L=U!==void 0&&U,P=w.err,x=P===void 0?null:P;L?setTimeout((function(){return S(M)}),10):x?(Pv.error(x.message),m._globalMutex.unlock(),m._event.error(x),N(x)):Promise.all(i.collectionNames.map((function(H){return m._initializeCollection(H)}))).then((function(){m._state=yu.OPENED,m._globalMutex.unlock(),m._event.success(),C()})).catch((function(H){Pv.error(H.message),m._globalMutex.unlock(),m._event.error(H),N(H)}))};S(M)}))];case 13:switch(c=_.sent(),c.code){case jr.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING:return[3,14];case jr.STORE_NOT_AVAILABLE:return[3,16]}return[3,18];case 14:return Pv.warning("Access to the local storage is not allowed. Switched to MemoryStore automatically."),this._store=new jv({}),this._globalMutex.unlock(),this._event.error(c),this._event.storeReplaced(this._store),[4,this.open()];case 15:return _.sent(),[3,19];case 16:return Pv.warning("IndexedDB is not available in this environment. Switched to MemoryStore automatically. Consider using other store to save data persistently (e.g. AsyncStorage)."),this._store=new jv({}),this._globalMutex.unlock(),this._event.error(c),this._event.storeReplaced(this._store),[4,this.open()];case 17:return _.sent(),[3,19];case 18:throw Pv.error(c.message),this._globalMutex.unlock(),this._event.error(c),c;case 19:return[3,20];case 20:return[2]}var b}))}))},t.prototype.close=function(){this._collections.forEach((function(n){return n.close()})),this._state=yu.CLOSED},t.prototype.clear=function(){return D(this,void 0,void 0,(function(){return O(this,(function(n){switch(n.label){case 0:return[4,Promise.all(Array.from(this._collections.values()).map((function(e){return e.clear()})))];case 1:return n.sent(),[2]}}))}))},t.prototype.reset=function(){return D(this,void 0,void 0,(function(){var n;return O(this,(function(e){switch(e.label){case 0:return(n=Gs.get(this.name))&&n.clearForDatabase(this.name),[4,this._store.clear()];case 1:return e.sent(),[2]}}))}))},t.prototype.on=function(n,e){this._event[n]=e},t.prototype.off=function(n){typeof this._event[n]=="function"&&(n==="upgrade"?this._event[n]=SD:this._event[n]=ny)},t.prototype.collection=function(n){var e=this._collections.get(n);if(e)return e;throw rr.collectionNotReady},t})();(function(t){t[t.VERBOSE=0]="VERBOSE",t[t.DEBUG=1]="DEBUG",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.NONE=5]="NONE"})(ud||(ud={}));var ga,l5=(function(){function t(){this.level=ud.WARN}return t.prototype.verbose=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];this.level<=ud.VERBOSE&&console.log.apply(console,wt(["[verbose]"],dt(n),!1))},t.prototype.debug=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];this.level<=ud.DEBUG&&console.log.apply(console,wt(["[debug]"],dt(n),!1))},t.prototype.info=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];this.level<=ud.INFO&&console.log.apply(console,wt(["[info]"],dt(n),!1))},t.prototype.warn=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];this.level<=ud.WARN&&console.warn.apply(console,wt(["[warn]"],dt(n),!1))},t.prototype.error=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];this.level<=ud.ERROR&&console.error.apply(console,wt(["[error]"],dt(n),!1))},t})(),af=(function(){function t(n){var e,r,i,a;this.messageTypeFilter=(e=n?.messageTypeFilter)!==null&&e!==void 0?e:Ia.ALL,this.customTypesFilter=(r=n?.customTypesFilter)!==null&&r!==void 0?r:null,this.senderUserIdsFilter=(i=n?.senderUserIdsFilter)!==null&&i!==void 0?i:null,this.replyType=(a=n?.replyType)!==null&&a!==void 0?a:Yi.NONE}return t.prototype.clone=function(){var n=new t,e=JSON.parse(JSON.stringify(this));return Object.keys(e).forEach((function(r){n[r]=e[r]})),n},t.prototype.match=function(n){switch(this.messageTypeFilter){case Ia.USER:if(n.messageType!==br.USER)return!1;break;case Ia.FILE:if(n.messageType!==br.FILE)return!1;break;case Ia.ADMIN:if(n.messageType!==br.ADMIN)return!1}if(this.customTypesFilter&&this.customTypesFilter.length>0&&!this.customTypesFilter.includes("*")&&!this.customTypesFilter.includes(n.customType)||this.senderUserIdsFilter&&this.senderUserIdsFilter.length>0&&(!(n instanceof ai)||!this.senderUserIdsFilter.includes(n.sender.userId)))return!1;if(n instanceof ja)switch(this.replyType){case Yi.NONE:if(n.parentMessageId>0)return!1;break;case Yi.ONLY_REPLY_TO_CHANNEL:if(n instanceof ai&&n.parentMessageId>0&&!n.replyToChannel)return!1}return!0},t})();(function(t){t.CHANNEL_LATEST="channel_latest",t.NEWEST_CHILD_MESSAGE="newest_child_message"})(ga||(ga={}));var My,pc=function(t){switch(t){case ga.CHANNEL_LATEST:return["channelUrl","-createdAt","-messageId"];case ga.NEWEST_CHILD_MESSAGE:return["channelUrl","-parentMessageId","-createdAt","-messageId"]}},OY=function(){return["channelUrl","-createdAt","-notificationId"]},DY=Z(Z({},VP),{scheduledAt:void 0}),UY=function(t){return jP(t)&&re("number",t.scheduledAt,!0)},xY=Z(Z({},jS),{scheduledAt:0,file:void 0,fileUrl:void 0,fileName:void 0,mimeType:void 0,fileSize:void 0,thumbnailSizes:void 0,requireAuth:!1}),LY=function(t){return qS(t)&&re("number",t.scheduledAt)&&(ra(t.file)||re("string",t.fileUrl))&&re("string",t.fileName,!0)&&re("string",t.mimeType,!0)&&re("number",t.fileSize,!0)&&(t.thumbnailSizes===null||t.thumbnailSizes===void 0||t.thumbnailSizes.every((function(n){return re("object",n)&&n.maxWidth>0&&n.maxHeight>0})))},u5="UnsentMessage",kY="reqId",Q1={},yp=(function(t){function n(e){var r=t.call(this,e)||this;return r._mutex=new Fw("unsendmessagecache.lock"),Q1[e]=r,r}return G(n,t),Object.defineProperty(n.prototype,"_cacheContext",{get:function(){return te.of(this._iid).cacheContext},enumerable:!1,configurable:!0}),n.of=function(e,r){return r===void 0&&(r=!1),Q1[e]&&!r||(Q1[e]=new n(e)),Q1[e]},Object.defineProperty(n.prototype,"collection",{get:function(){var e=this._cacheContext.nestdb,r=e?.collection(u5);if(!r)throw ae.databaseError;return r},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"localCacheEnabled",{get:function(){return this._cacheContext.localCacheEnabled&&!!this.collection},enumerable:!1,configurable:!0}),n.prototype._serialize=function(e){if(e.messageId>0)throw ae.invalidParameters;var r,i=Z({},e.serialize());return e instanceof Ma?(e.messageParams&&(i.messageParams=lD(e.messageParams)),e.scheduledInfo&&e.scheduledInfo.scheduledMessageParams&&(i.scheduledInfo.scheduledMessageParams=(r=e.scheduledInfo.scheduledMessageParams,Z(Z({},lD(r)),{scheduledAt:r.scheduledAt})))):e instanceof Ai?(e.messageParams&&(i.messageParams=uD(e.messageParams)),e.scheduledInfo&&e.scheduledInfo.scheduledMessageParams&&(i.scheduledInfo.scheduledMessageParams=(function(a){return Z(Z({},uD(a)),{scheduledAt:a.scheduledAt})})(e.scheduledInfo.scheduledMessageParams))):e instanceof rl&&e.messageParams&&(i.messageParams=(function(a){return ze({fileInfoList:a.fileInfoList.map((function(s){return{file:s.file,fileUrl:Ky.getPlainUrl(s),fileName:s.fileName,fileSize:s.fileSize,mimeType:s.mimeType,thumbnailSizes:s.thumbnailSizes,_thumbnails:s._thumbnails,_uploadedMetaData:s._uploadedMetaData}})),isReplyToChannel:a.isReplyToChannel,pushNotificationDeliveryOption:a.pushNotificationDeliveryOption})})(e.messageParams)),i},n.prototype._deserialize=function(e){return e=Z(Z({},e),{messageId:parseInt(e.messageId)}),Ki.of(this._iid).buildMessageFromSerializedData(e)},n.prototype._deserializeWithMessageCreateParams=function(e){var r,i,a;return D(this,void 0,void 0,(function(){var s,o,u,c,h,p,m=this;return O(this,(function(_){switch(_.label){case 0:return s=Ki.of(this._iid),o=this._deserialize(e),e.messageParams?o instanceof Ma?(c=e.messageParams,o.messageParams=s.buildUserMessageCreateParamsFromSerializedData(c,o),[3,6]):[3,1]:[3,6];case 1:return o instanceof Ai?(c=e.messageParams).fileKey&&typeof c.fileKey=="string"&&iN((r=c.fileType)!==null&&r!==void 0?r:"")?(u=c,[4,this.collection.getBlob(c.fileKey)]):[3,3]:[3,4];case 2:u.file=(i=_.sent())!==null&&i!==void 0?i:void 0,_.label=3;case 3:return o.messageParams=s.buildFileMessageCreateParamsFromSerializedData(c,o),[3,6];case 4:return o instanceof rl&&(c=e.messageParams)&&c.fileInfoList?(o.messageParams=s.buildMultipleFilesMessageCreateParamsFromSerializedData(c,o),[4,Promise.all(o.messageParams.fileInfoList.map((function(b){return D(m,void 0,void 0,(function(){var C,N,S,M,w;return O(this,(function(U){switch(U.label){case 0:return typeof((N=b._uploadedMetaData)===null||N===void 0?void 0:N.fileKey)=="string"&&iN((M=(S=b._uploadedMetaData)===null||S===void 0?void 0:S.fileType)!==null&&M!==void 0?M:"")?(C=b,[4,this.collection.getBlob(b._uploadedMetaData.fileKey)]):[3,2];case 1:C.file=(w=U.sent())!==null&&w!==void 0?w:void 0,U.label=2;case 2:return[2]}}))}))})))]):[3,6];case 5:_.sent(),_.label=6;case 6:return o.scheduledInfo&&e.scheduledInfo&&e.scheduledInfo.scheduledMessageParams?o instanceof Ma?(h=e.scheduledInfo.scheduledMessageParams,o.scheduledInfo.scheduledMessageParams=s.buildScheduledUserMessageCreateParamsFromSerializedData(h,o),[3,10]):[3,7]:[3,10];case 7:return o instanceof Ai?(h=e.scheduledInfo.scheduledMessageParams).fileKey&&typeof h.fileKey=="string"&&typeof h.fileType=="string"&&iN(h.fileType)?(p=h,[4,this.collection.getBlob(h.fileKey)]):[3,9]:[3,10];case 8:p.file=(a=_.sent())!==null&&a!==void 0?a:void 0,_.label=9;case 9:o.scheduledInfo.scheduledMessageParams=s.buildScheduledFileMessageCreateParamsFromSerializedData(h,o),_.label=10;case 10:return[2,o]}}))}))},n.prototype._getFileInfoBlobKey=function(e,r){return"".concat(e,".").concat(r)},n.prototype.get=function(e){return D(this,void 0,void 0,(function(){var r;return O(this,(function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,this.collection.getByKey("".concat(e))]:[3,2];case 1:if(r=i.sent())return[2,this._deserializeWithMessageCreateParams(r)];i.label=2;case 2:return[2,void 0]}}))}))},n.prototype.fetch=function(e){var r=e.channelUrl,i=e.filter,a=i===void 0?new af:i,s=e.order,o=s===void 0?ga.CHANNEL_LATEST:s,u=e.sendingStatus,c=e.backward,h=c!==void 0&&c,p=e.parentMessageId;return D(this,void 0,void 0,(function(){var m,_,b,C,N=this;return O(this,(function(S){switch(S.label){case 0:return this.localCacheEnabled?(m=pc(o),_={"/where":function(M){return!!(o!==ga.NEWEST_CHILD_MESSAGE||p&&M.parentMessageId!==0&&M.parentMessageId===p)&&a.match(N._deserialize(M))}},r&&(_.channelUrl=r),u&&(_.sendingStatus=u),b={where:_,index:m,backward:h},[4,this.collection.query(b)]):[3,3];case 1:return[4,S.sent().fetch({})];case 2:return C=S.sent(),[2,Promise.all(C.map((function(M){return D(N,void 0,void 0,(function(){return O(this,(function(w){switch(w.label){case 0:return[4,this._deserializeWithMessageCreateParams(M)];case 1:return[2,w.sent()]}}))}))})))];case 3:return[2,[]]}}))}))},n.prototype.getAllChildMessages=function(e,r){return r===void 0&&(r=new af),D(this,void 0,void 0,(function(){return O(this,(function(i){switch(i.label){case 0:return[4,this.fetch({filter:r,order:ga.NEWEST_CHILD_MESSAGE,channelUrl:e.channelUrl,backward:!1,parentMessageId:e.messageId})];case 1:return[2,i.sent()]}}))}))},n.prototype.upsert=function(e){return D(this,void 0,void 0,(function(){var r=this;return O(this,(function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,Promise.all(e.map((function(a){return D(r,void 0,void 0,(function(){var s;return O(this,(function(o){switch(o.label){case 0:return a instanceof Ai||a instanceof rl?[4,this._mutex.lock()]:[3,4];case 1:return o.sent(),[4,this.saveBlob(a)];case 2:return o.sent(),[4,this._mutex.unlock()];case 3:o.sent(),o.label=4;case 4:return s=this._serialize(a),[4,this.collection.upsertOne(s)];case 5:return o.sent(),[2]}}))}))})))]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}}))}))},n.prototype.upsertChildMessages=function(e){return D(this,void 0,void 0,(function(){var r=this;return O(this,(function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,Promise.all(e.map((function(a){return D(r,void 0,void 0,(function(){var s;return O(this,(function(o){switch(o.label){case 0:return s=[],a.threadInfo&&a.threadInfo.replyCount>0?[4,this.getAllChildMessages(a)]:[3,2];case 1:s=o.sent(),o.label=2;case 2:return s.length>0?(s.forEach((function(u){return u.applyParentMessage(a)})),[4,this.upsert(s)]):[3,4];case 3:o.sent(),o.label=4;case 4:return[2]}}))}))})))]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}}))}))},n.prototype.remove=function(e){return D(this,void 0,void 0,(function(){var r,i,a,s,o,u;return O(this,(function(c){switch(c.label){case 0:if(!this.localCacheEnabled)return[3,8];c.label=1;case 1:c.trys.push([1,6,7,8]),r=Fe(e),i=r.next(),c.label=2;case 2:return i.done?[3,5]:(a=i.value,[4,this.collection.remove(a)]);case 3:c.sent(),c.label=4;case 4:return i=r.next(),[3,2];case 5:return[3,8];case 6:return s=c.sent(),o={error:s},[3,8];case 7:try{i&&!i.done&&(u=r.return)&&u.call(r)}finally{if(o)throw o.error}return[7];case 8:return[2]}}))}))},n.prototype.removeMessagesOfChannel=function(e){return D(this,void 0,void 0,(function(){return O(this,(function(r){switch(r.label){case 0:return this.localCacheEnabled?[4,this.collection.removeIf({where:{channelUrl:e}})]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},n.prototype.clear=function(){return D(this,void 0,void 0,(function(){return O(this,(function(e){switch(e.label){case 0:return this.localCacheEnabled?[4,this.collection.clear()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},n.prototype.saveBlob=function(e){return D(this,void 0,void 0,(function(){var r,i,a,s=this;return O(this,(function(o){switch(o.label){case 0:return e instanceof Ai?e.messageParams&&(a=e.messageParams).file&&CC(a.file)?[4,this.collection.saveBlob(a.file,e.reqId)]:[3,2]:[3,5];case 1:i=o.sent(),a.fileKey=i,a.fileType=up.BLOB,o.label=2;case 2:return e.scheduledInfo&&e.scheduledInfo.scheduledMessageParams&&(r=e.scheduledInfo.scheduledMessageParams).file&&CC(r.file)?[4,this.collection.saveBlob(r.file,e.reqId)]:[3,4];case 3:i=o.sent(),r.fileKey=i,r.fileType=up.BLOB,o.label=4;case 4:return[3,7];case 5:return e instanceof rl&&(a=e.messageParams)&&a.fileInfoList&&Array.isArray(a.fileInfoList)?[4,Promise.all(a.fileInfoList.map((function(u,c){return D(s,void 0,void 0,(function(){var h;return O(this,(function(p){switch(p.label){case 0:return u.file&&CC(u.file)?[4,this.collection.saveBlob(u.file,this._getFileInfoBlobKey(e.reqId,c))]:[3,2];case 1:h=p.sent(),u._uploadedMetaData||(u._uploadedMetaData={}),u._uploadedMetaData.fileKey=h,u._uploadedMetaData.fileType=up.BLOB,p.label=2;case 2:return[2]}}))}))})))]:[3,7];case 6:o.sent(),o.label=7;case 7:return[2]}}))}))},n})(wi),X1={},ap=(function(t){function n(e){var r=t.call(this,e)||this;return X1[e]=r,r}return G(n,t),Object.defineProperty(n.prototype,"_sdkState",{get:function(){return te.of(this._iid).sdkState},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_cacheContext",{get:function(){return te.of(this._iid).cacheContext},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_unsentMessageCache",{get:function(){return yp.of(this._iid)},enumerable:!1,configurable:!0}),n.of=function(e,r){return r===void 0&&(r=!1),X1[e]&&!r||(X1[e]=new n(e)),X1[e]},Object.defineProperty(n.prototype,"collection",{get:function(){var e=this._cacheContext.nestdb;return Ue(!!e).throw(ae.databaseError),e.collection(kw)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"localCacheEnabled",{get:function(){return this._cacheContext.localCacheEnabled&&!!this.collection},enumerable:!1,configurable:!0}),n.prototype._serialize=function(e){return Z(Z({},e.serialize()),{messageId:"".concat(e.messageId)})},n.prototype._deserialize=function(e){return e=Z(Z({},e),{messageId:parseInt(e.messageId)}),Ki.of(this._iid).buildMessageFromSerializedData(e)},n.prototype.get=function(e){return D(this,void 0,void 0,(function(){var r;return O(this,(function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,this.collection.getByKey("".concat(e))]:[3,2];case 1:if(r=i.sent())return[2,this._deserialize(r)];i.label=2;case 2:return[2,void 0]}}))}))},n.prototype.fetch=function(e){var r=e.channelUrl,i=e.token,a=e.limit,s=a===void 0?100:a,o=e.filter,u=o===void 0?new af:o,c=e.order,h=c===void 0?ga.CHANNEL_LATEST:c,p=e.backward,m=p!==void 0&&p,_=e.parentMessageId,b=e.isPollOnly,C=b!==void 0&&b,N=e.exactMatch,S=N!==void 0&&N,M=e.inclusive,w=M===void 0||M;return D(this,void 0,void 0,(function(){var U,L,P,x=this;return O(this,(function(H){switch(H.label){case 0:return this.localCacheEnabled?(U=pc(h),L={where:{channelUrl:r,"/where":function(F){if(i!=null&&i!=="")switch(h){case ga.CHANNEL_LATEST:if(S&&F.createdAt!==i)return!1;if(m){if(w&&F.createdAt<i||!w&&F.createdAt<=i)return!1}else if(w&&F.createdAt>i||!w&&F.createdAt>=i)return!1;break;case ga.NEWEST_CHILD_MESSAGE:if(!_||F.parentMessageId===0||F.parentMessageId!==_)return!1}return!(C&&!F._poll)&&u.match(x._deserialize(F))}},index:U,backward:m},[4,this.collection.query(L)]):[3,3];case 1:return[4,H.sent().fetch({limit:s??void 0})];case 2:return P=H.sent(),[2,Promise.all(P.map((function(F){return D(x,void 0,void 0,(function(){return O(this,(function(Q){return[2,this._deserialize(F)]}))}))})))];case 3:return[2,[]]}}))}))},n.prototype.getAllChildMessages=function(e,r){return r===void 0&&(r=new af),D(this,void 0,void 0,(function(){return O(this,(function(i){switch(i.label){case 0:return[4,this.fetch({channelUrl:e.channelUrl,token:Date.now(),limit:null,backward:!1,filter:r,order:ga.NEWEST_CHILD_MESSAGE,parentMessageId:e.messageId})];case 1:return[2,i.sent()]}}))}))},n.prototype.upsert=function(e){var r;return D(this,void 0,void 0,(function(){var i,a,s,o,u,c,h,p,m=this;return O(this,(function(_){switch(_.label){case 0:return this.localCacheEnabled?[4,this.saveBlobs(e)]:[3,13];case 1:_.sent(),_.label=2;case 2:_.trys.push([2,7,8,9]),i=Fe(e),a=i.next(),_.label=3;case 3:return a.done?[3,6]:(s=a.value,!((r=s.threadInfo)===null||r===void 0)&&r._isUpdateRequired?[4,this.get(s.messageId)]:[3,5]);case 4:(o=_.sent())!=null&&o.threadInfo&&s.threadInfo._updateFrom(o.threadInfo),_.label=5;case 5:return a=i.next(),[3,3];case 6:return[3,9];case 7:return u=_.sent(),h={error:u},[3,9];case 8:try{a&&!a.done&&(p=i.return)&&p.call(i)}finally{if(h)throw h.error}return[7];case 9:return c=e.map((function(b){return m._serialize(b)})),[4,this.collection.upsertMany(c)];case 10:return _.sent(),[4,this.upsertChildMessages(e)];case 11:return _.sent(),[4,this._unsentMessageCache.upsertChildMessages(e)];case 12:_.sent(),_.label=13;case 13:return[2]}}))}))},n.prototype.upsertChildMessages=function(e){return D(this,void 0,void 0,(function(){var r=this;return O(this,(function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,Promise.all(e.map((function(a){return D(r,void 0,void 0,(function(){var s,o;return O(this,(function(u){switch(u.label){case 0:return s=[],!((o=a.threadInfo)===null||o===void 0)&&o.replyCount&&a.threadInfo.replyCount>0?[4,this.getAllChildMessages(a)]:[3,2];case 1:s=u.sent(),u.label=2;case 2:return s.length>0?(s.forEach((function(c){return c.applyParentMessage(a)})),[4,this.upsert(s)]):[3,4];case 3:u.sent(),u.label=4;case 4:return[2]}}))}))})))]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}}))}))},n.prototype.remove=function(e){return D(this,void 0,void 0,(function(){var r,i,a,s,o,u;return O(this,(function(c){switch(c.label){case 0:if(!this.localCacheEnabled)return[3,8];c.label=1;case 1:c.trys.push([1,6,7,8]),r=Fe(e),i=r.next(),c.label=2;case 2:return i.done?[3,5]:(a=i.value,[4,this.collection.remove("".concat(a))]);case 3:c.sent(),c.label=4;case 4:return i=r.next(),[3,2];case 5:return[3,8];case 6:return s=c.sent(),o={error:s},[3,8];case 7:try{i&&!i.done&&(u=r.return)&&u.call(r)}finally{if(o)throw o.error}return[7];case 8:return[2]}}))}))},n.prototype.removeMessagesOfChannel=function(e){return D(this,void 0,void 0,(function(){var r;return O(this,(function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,this.collection.removeIf({where:{channelUrl:e},index:pc(ga.CHANNEL_LATEST)})]:[3,6];case 1:return i.sent(),[4,(r=this._cacheContext.preference).remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/sync"))];case 2:return i.sent(),[4,r.remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/sync.meta"))];case 3:return i.sent(),[4,r.remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/changelogs"))];case 4:return i.sent(),[4,r.remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/changelogs.meta"))];case 5:i.sent(),i.label=6;case 6:return[2]}}))}))},n.prototype.removeUnderOffset=function(e,r,i){return i===void 0&&(i=!1),D(this,void 0,void 0,(function(){return O(this,(function(a){switch(a.label){case 0:return this.localCacheEnabled?[4,this.collection.removeIf({where:{channelUrl:e,createdAt:i?{"<=":r}:{"<":r}},index:pc(ga.CHANNEL_LATEST)})]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}}))}))},n.prototype.clear=function(){return D(this,void 0,void 0,(function(){return O(this,(function(e){switch(e.label){case 0:return this.localCacheEnabled?[4,this.collection.clear()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},n.prototype.countBetween=function(e,r,i){return D(this,void 0,void 0,(function(){var a,s=this;return O(this,(function(o){switch(o.label){case 0:return this.localCacheEnabled?(a=pc(ga.CHANNEL_LATEST),[4,this.collection.query({where:{channelUrl:e,"/where":function(u){var c=s._deserialize(u);return i.includes(c.createdAt)&&r.match(c)}},index:a}).count()]):[3,2];case 1:return[2,o.sent()];case 2:return[2,0]}}))}))},n.prototype.saveBlobs=function(e){return D(this,void 0,void 0,(function(){var r=this;return O(this,(function(i){switch(i.label){case 0:return[4,Promise.all(e.map((function(a){return D(r,void 0,void 0,(function(){var s,o;return O(this,(function(u){switch(u.label){case 0:return a instanceof Ai&&a.messageParams&&(s=a.messageParams).file&&CC(s.file)?[4,this.collection.saveBlob(s.file,a.reqId)]:[3,2];case 1:o=u.sent(),s.fileKey=o,u.label=2;case 2:return[2]}}))}))})))];case 1:return i.sent(),[2]}}))}))},n.prototype._getGroupChannelPreferenceSize=function(e){return D(this,void 0,void 0,(function(){var r,i,a,s,o,u;return O(this,(function(c){switch(c.label){case 0:return r=0,[4,(i=this._cacheContext.preference).get("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/sync"))];case 1:return a=c.sent(),[4,i.get("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/sync.meta"))];case 2:return s=c.sent(),[4,i.get("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/changelogs"))];case 3:return o=c.sent(),[4,i.get("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/changelogs.meta"))];case 4:return u=c.sent(),a&&(r+=JSON.stringify(a).length),s&&(r+=JSON.stringify(s).length),o&&(r+=JSON.stringify(o).length),u&&(r+=JSON.stringify(u).length),[2,r]}}))}))},n})(wi),Z1={},PY=(function(t){function n(e){var r=t.call(this,e)||this;return Z1[e]=r,r}return G(n,t),Object.defineProperty(n.prototype,"_sdkState",{get:function(){return te.of(this._iid).sdkState},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_cacheContext",{get:function(){return te.of(this._iid).cacheContext},enumerable:!1,configurable:!0}),n.of=function(e,r){return r===void 0&&(r=!1),Z1[e]&&!r||(Z1[e]=new n(e)),Z1[e]},Object.defineProperty(n.prototype,"collection",{get:function(){var e=this._cacheContext.nestdb;return Ue(!!e).throw(ae.databaseError),e.collection(a5)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"localCacheEnabled",{get:function(){return this._cacheContext.localCacheEnabled&&!!this.collection},enumerable:!1,configurable:!0}),n.prototype._serialize=function(e){return Z({},e.serialize())},n.prototype._deserialize=function(e){return Ki.of(this._iid).buildMessageFromSerializedData(e)},n.prototype.get=function(e){return D(this,void 0,void 0,(function(){var r;return O(this,(function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,this.collection.getByKey(e)]:[3,2];case 1:if(r=i.sent())return[2,this._deserialize(r)];i.label=2;case 2:return[2,void 0]}}))}))},n.prototype.fetch=function(e){var r=e.channelUrl,i=e.token,a=e.limit,s=a===void 0?100:a,o=e.filter,u=o===void 0?new af:o,c=e.backward,h=c!==void 0&&c,p=e.exactMatch,m=p!==void 0&&p,_=e.inclusive,b=_===void 0||_;return D(this,void 0,void 0,(function(){var C,N=this;return O(this,(function(S){switch(S.label){case 0:return this.localCacheEnabled?(C={where:{channelUrl:r,"/where":function(M){if(i){if(m&&M.createdAt!==i)return!1;if(h){if(b&&M.createdAt<i||!b&&M.createdAt<=i)return!1}else if(b&&M.createdAt>i||!b&&M.createdAt>=i)return!1}return u.match(N._deserialize(M))}},index:["channelUrl","-createdAt","-notificationId"],backward:h},[4,this.collection.query(C)]):[3,3];case 1:return[4,S.sent().fetch({limit:s??void 0})];case 2:return[2,S.sent().map((function(M){return N._deserialize(M)}))];case 3:return[2,[]]}}))}))},n.prototype.upsert=function(e){return D(this,void 0,void 0,(function(){var r,i=this;return O(this,(function(a){switch(a.label){case 0:return this.localCacheEnabled?(r=e.map((function(s){return i._serialize(s)})),[4,this.collection.upsertMany(r)]):[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}}))}))},n.prototype.remove=function(e){return D(this,void 0,void 0,(function(){var r,i,a,s,o,u;return O(this,(function(c){switch(c.label){case 0:if(!this.localCacheEnabled)return[3,8];c.label=1;case 1:c.trys.push([1,6,7,8]),r=Fe(e),i=r.next(),c.label=2;case 2:return i.done?[3,5]:(a=i.value,[4,this.collection.remove(a)]);case 3:c.sent(),c.label=4;case 4:return i=r.next(),[3,2];case 5:return[3,8];case 6:return s=c.sent(),o={error:s},[3,8];case 7:try{i&&!i.done&&(u=r.return)&&u.call(r)}finally{if(o)throw o.error}return[7];case 8:return[2]}}))}))},n.prototype.markAsReadByTimestamp=function(e,r){return D(this,void 0,void 0,(function(){return O(this,(function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,this.collection.updateIf({where:{channelUrl:e,messageStatus:rp.SENT,createdAt:{"<":r}}},{set:{messageStatus:rp.READ}})]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}}))}))},n.prototype.markAsReadByMessageIds=function(e,r){return D(this,void 0,void 0,(function(){return O(this,(function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,this.collection.updateIf({where:{channelUrl:e,notificationId:{"/in":r},messageStatus:rp.SENT}},{set:{messageStatus:rp.READ}})]:[3,2];case 1:return[2,i.sent().length];case 2:return[2,0]}}))}))},n.prototype.removeMessagesOfChannel=function(e){return D(this,void 0,void 0,(function(){var r;return O(this,(function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,this.collection.removeIf({where:{channelUrl:e},index:["channelUrl","-createdAt","-notificationId"]})]:[3,6];case 1:return i.sent(),[4,(r=this._cacheContext.preference).remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/sync"))];case 2:return i.sent(),[4,r.remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/sync.meta"))];case 3:return i.sent(),[4,r.remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/changelogs"))];case 4:return i.sent(),[4,r.remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/changelogs.meta"))];case 5:i.sent(),i.label=6;case 6:return[2]}}))}))},n.prototype.removeUnderOffset=function(e,r){return D(this,void 0,void 0,(function(){return O(this,(function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,this.collection.removeIf({where:{channelUrl:e,createdAt:{"<":r}},index:pc(ga.CHANNEL_LATEST)})]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}}))}))},n.prototype.clear=function(){return D(this,void 0,void 0,(function(){return O(this,(function(e){switch(e.label){case 0:return this.localCacheEnabled?[4,this.collection.clear()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},n.prototype.countBetween=function(e,r,i){return D(this,void 0,void 0,(function(){var a,s=this;return O(this,(function(o){switch(o.label){case 0:return this.localCacheEnabled?(a=["channelUrl","-createdAt","-notificationId"],[4,this.collection.query({where:{channelUrl:e,"/where":function(u){var c=s._deserialize(u);return i.includes(c.createdAt)&&r.match(c)}},index:a}).count()]):[3,2];case 1:return[2,o.sent()];case 2:return[2,0]}}))}))},n})(wi),F0={},c5=(function(t){function n(e){var r=t.call(this,e)||this;return r._observers=new Map,r._dispatcherContext=r._dispatcher.on((function(i){return D(r,void 0,void 0,(function(){var a,s,o,u,c,h,p,m,_,b,C,N,S,M,w,U,L,P,x,H,F,Q=this;return O(this,(function($){switch($.label){case 0:return i instanceof Br?(a=i.messages,F=i.source,h=i.isWebSocketEventComing,s=a.filter((function(q){return q instanceof ja&&q.channelType!==yn.OPEN&&q.messageId>0})),o=a.filter((function(q){return q instanceof ja&&q.channelType!==yn.OPEN&&q.messageId===0})),u=a.filter((function(q){return q instanceof gp})),s.length>0?[4,$r((function(){return D(Q,void 0,void 0,(function(){return O(this,(function(q){switch(q.label){case 0:return[4,this._messageCache.upsert(s)];case 1:return q.sent(),[4,this._unsentMessageCache.remove(s.map((function(X){return X instanceof ai?X.reqId:null})).filter((function(X){return X!==null})))];case 2:return q.sent(),[2]}}))}))}))]:[3,2]):[3,7];case 1:$.sent(),h||this._broadcastUpdateEvent(s,F),$.label=2;case 2:return o.length>0?[4,$r((function(){return D(Q,void 0,void 0,(function(){return O(this,(function(q){switch(q.label){case 0:return[4,this._unsentMessageCache.upsert(o)];case 1:return q.sent(),[2]}}))}))}))]:[3,4];case 3:$.sent(),h||this._broadcastUpdateEvent(o,F),$.label=4;case 4:return u.length>0?[4,$r((function(){return D(Q,void 0,void 0,(function(){return O(this,(function(q){switch(q.label){case 0:return[4,this._notificationCache.upsert(u)];case 1:return q.sent(),[2]}}))}))}))]:[3,6];case 5:$.sent(),h||this._broadcastUpdateEvent(u,F),$.label=6;case 6:return[3,24];case 7:return i instanceof Aw?(c=i.messageIds,F=i.source,h=i.isWebSocketEventComing,p=c.filter((function(q){return typeof q=="number"})),m=c.filter((function(q){return typeof q=="string"})),[4,$r((function(){return D(Q,void 0,void 0,(function(){return O(this,(function(q){switch(q.label){case 0:return p.length>0?[4,this._messageCache.remove(p)]:[3,2];case 1:q.sent(),q.label=2;case 2:return m.length>0?[4,this._notificationCache.remove(m)]:[3,4];case 3:q.sent(),q.label=4;case 4:return[2]}}))}))}))]):[3,9];case 8:return $.sent(),h||this._broadcastRemoveEvent(c,F),[3,24];case 9:return i instanceof MP?(_=i.reqId,F=i.source,[4,$r((function(){return D(Q,void 0,void 0,(function(){return O(this,(function(q){switch(q.label){case 0:return[4,this._unsentMessageCache.remove([_])];case 1:return q.sent(),[2]}}))}))}))]):[3,11];case 10:return $.sent(),this._broadcastRemoveUnsentEvent(_,F),[3,24];case 11:return i instanceof IP?(b=i.polls,F=i.source,this._cacheContext.localCacheEnabled?(C=b.map((function(q){return q.messageId})),[4,Promise.all(C.map((function(q){return Q._messageCache.get(q)})))]):[3,14]):[3,15];case 12:return(N=$.sent().filter((function(q){return q}))).length>0&&b.forEach((function(q){var X=N.find((function(V){return V.messageId===q.messageId}));X&&X.applyPoll(q)})),[4,$r((function(){return D(Q,void 0,void 0,(function(){return O(this,(function(q){switch(q.label){case 0:return[4,this._messageCache.upsert(N)];case 1:return[2,q.sent()]}}))}))}))];case 13:$.sent(),$.label=14;case 14:return this._broadcastPollChangeLogEvent(b,F),[3,24];case 15:return i instanceof Mw?(S=i.event,F=i.source,[4,this._messageCache.get(S.messageId)]):[3,19];case 16:return(M=$.sent())&&M.isUserMessage()&&M.poll&&M.poll.applyPollUpdateEvent(S)?[4,$r((function(){return D(Q,void 0,void 0,(function(){return O(this,(function(q){switch(q.label){case 0:return[4,this._messageCache.upsert([M])];case 1:return[2,q.sent()]}}))}))}))]:[3,18];case 17:$.sent(),$.label=18;case 18:return this._broadcastPollUpdateEvent(S,F),[3,24];case 19:return i instanceof VS?(w=i.event,F=i.source,[4,this._messageCache.get(w.messageId)]):[3,23];case 20:return(U=$.sent())&&U.isUserMessage()&&U.poll&&U.poll.applyPollVoteEvent(w)?[4,$r((function(){return D(Q,void 0,void 0,(function(){return O(this,(function(q){switch(q.label){case 0:return[4,this._messageCache.upsert([U])];case 1:return[2,q.sent()]}}))}))}))]:[3,22];case 21:$.sent(),$.label=22;case 22:return this._broadcastPollVoteEvent(w,F),[3,24];case 23:i instanceof NP?(L=i.event,F=i.source,L.messageId>0&&this._broadcastReactionUpdateEvent(L,F)):i instanceof AP?(P=i.event,F=i.source,this._broadcastThreadUpdateEvent(P,F)):i instanceof TP&&(x=i.messageDeletionTimestamp,H=i.channelUrl,F=i.source,this._broadcastMessageRetentionEvent(x,H,F)),$.label=24;case 24:return[2]}}))}))})),r}return G(n,t),Object.defineProperty(n.prototype,"_cacheContext",{get:function(){return te.of(this._iid).cacheContext},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_dispatcher",{get:function(){return te.of(this._iid).dispatcher},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_messageCache",{get:function(){return ap.of(this._iid)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_unsentMessageCache",{get:function(){return yp.of(this._iid)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_notificationCache",{get:function(){return PY.of(this._iid)},enumerable:!1,configurable:!0}),n.of=function(e,r){var i;return r===void 0&&(r=!1),F0[e]&&!r||(F0[e]&&((i=F0[e]._dispatcherContext)===null||i===void 0||i.close()),F0[e]=new n(e)),F0[e]},n.prototype._broadcastUpdateEvent=function(e,r){var i,a;try{for(var s=Fe(this._observers.values()),o=s.next();!o.done;o=s.next()){var u=o.value;u.onUpdate&&u.onUpdate(e,r)}}catch(c){i={error:c}}finally{try{o&&!o.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}},n.prototype._broadcastPollChangeLogEvent=function(e,r){var i,a;try{for(var s=Fe(this._observers.values()),o=s.next();!o.done;o=s.next()){var u=o.value;u.onPollChangeLogUpdate&&u.onPollChangeLogUpdate(e,r)}}catch(c){i={error:c}}finally{try{o&&!o.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}},n.prototype._broadcastPollUpdateEvent=function(e,r){var i,a;try{for(var s=Fe(this._observers.values()),o=s.next();!o.done;o=s.next()){var u=o.value;u.onPollUpdate&&u.onPollUpdate(e,r)}}catch(c){i={error:c}}finally{try{o&&!o.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}},n.prototype._broadcastPollVoteEvent=function(e,r){var i,a;try{for(var s=Fe(this._observers.values()),o=s.next();!o.done;o=s.next()){var u=o.value;u.onPollVote&&u.onPollVote(e,r)}}catch(c){i={error:c}}finally{try{o&&!o.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}},n.prototype._broadcastRemoveEvent=function(e,r){var i,a;try{for(var s=Fe(this._observers.values()),o=s.next();!o.done;o=s.next()){var u=o.value;u.onRemove&&u.onRemove(e,r)}}catch(c){i={error:c}}finally{try{o&&!o.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}},n.prototype._broadcastRemoveUnsentEvent=function(e,r){var i,a;try{for(var s=Fe(this._observers.values()),o=s.next();!o.done;o=s.next()){var u=o.value;u.onRemoveUnsent&&u.onRemoveUnsent(e,r)}}catch(c){i={error:c}}finally{try{o&&!o.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}},n.prototype._broadcastReactionUpdateEvent=function(e,r){var i,a;try{for(var s=Fe(this._observers.values()),o=s.next();!o.done;o=s.next()){var u=o.value;u.onReactionUpdate&&u.onReactionUpdate(e,r)}}catch(c){i={error:c}}finally{try{o&&!o.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}},n.prototype._broadcastThreadUpdateEvent=function(e,r){var i,a;try{for(var s=Fe(this._observers.values()),o=s.next();!o.done;o=s.next()){var u=o.value;u.onThreadInfoUpdate&&u.onThreadInfoUpdate(e,r)}}catch(c){i={error:c}}finally{try{o&&!o.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}},n.prototype._broadcastMessageRetentionEvent=function(e,r,i){var a,s;try{for(var o=Fe(this._observers.values()),u=o.next();!u.done;u=o.next()){var c=u.value;c.onDeletedByRetentionPolicy&&c.onDeletedByRetentionPolicy(e,r,i)}}catch(h){a={error:h}}finally{try{u&&!u.done&&(s=o.return)&&s.call(o)}finally{if(a)throw a.error}}},n.prototype.subscribe=function(e,r){this._observers.set(e,r)},n.prototype.unsubscribe=function(e){this._observers.delete(e)},n.prototype.unsubscribeAll=function(){this._observers.clear()},n})(wi),ID={},PA=(function(t){function n(e,r){var i=r.sdkState,a=r.cacheContext,s=t.call(this,e)||this;return s._users=new Map,s._sdkState=i,s._cacheContext=a,ID[e]=s,s}return G(n,t),n.of=function(e){return ID[e]},Object.defineProperty(n.prototype,"collection",{get:function(){var e=this._cacheContext.nestdb;return Ue(!!e).throw(ae.databaseError),e.collection(s5)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"localCacheEnabled",{get:function(){return this._cacheContext.localCacheEnabled&&!!this.collection},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"users",{get:function(){return wt([],dt(this._users.values()),!1)},enumerable:!1,configurable:!0}),n.prototype._serialize=function(e,r){return Z(Z({},e.serialize()),{updatedAt:r})},n.prototype._deserialize=function(e){return fn._buildUserFromSerializedData(e)},n.prototype.isCachedInMemory=function(e){return this._users.has(e)},n.prototype.getUserInfoFromCache=function(e){if(this._users.has(e))return this._users.get(e)},n.prototype.get=function(e){return D(this,void 0,void 0,(function(){var r,i;return O(this,(function(a){switch(a.label){case 0:return this._users.has(e)?[3,3]:this.localCacheEnabled?[4,this.collection.getByKey(e)]:[3,2];case 1:if(r=a.sent())return i=this._deserialize(r),this._users.set(i.userId,i),[2,i];a.label=2;case 2:return[2,void 0];case 3:return[2,this._users.get(e)]}}))}))},n.prototype.fetch=function(e){var r=e.limit,i=r===void 0?100:r,a=e.backward,s=a!==void 0&&a;return D(this,void 0,void 0,(function(){var o,u,c,h=this;return O(this,(function(p){switch(p.label){case 0:if(!this.localCacheEnabled)return[2,[]];p.label=1;case 1:return p.trys.push([1,4,,5]),o={index:["-userId","-updatedAt"],backward:s},[4,this.collection.query(o)];case 2:return[4,p.sent().fetch({limit:i})];case 3:return u=p.sent(),(c=u.map((function(m){return h._deserialize(m)}))).forEach((function(m){h._users.has(m.userId)||h._users.set(m.userId,m)})),[2,c];case 4:return p.sent(),[2,[]];case 5:return[2]}}))}))},n.prototype.upsert=function(e,r){return D(this,void 0,void 0,(function(){var i,a;return O(this,(function(s){switch(s.label){case 0:if(!this.localCacheEnabled)return[3,2];if(i=this._serialize(e,r),a=this._users.get(e.userId)){if(a._hashValue===e._hashValue)return[2];if(a._updatedAt>r)return[2]}return this._users.set(e.userId,fn._buildUserFromSerializedData(i)),[4,this.collection.upsertOne(i)];case 1:s.sent(),s.label=2;case 2:return[2]}}))}))},n.prototype.remove=function(e){return D(this,void 0,void 0,(function(){return O(this,(function(r){switch(r.label){case 0:return this._users.has(e)&&this._users.delete(e),this.localCacheEnabled?[4,this.collection.remove(e)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},n.prototype.clearMemoryCache=function(){this._users.clear()},n.prototype.clear=function(){return D(this,void 0,void 0,(function(){return O(this,(function(e){switch(e.label){case 0:return this.clearMemoryCache(),this.localCacheEnabled?[4,this.collection.clear()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},n})(wi),FY=(function(t){function n(e){var r=this,i=e.reverse,a=i!==void 0&&i,s=e.limit,o=s===void 0?20:s,u=e.keys,c=e.token;return(r=t.call(this)||this).method=Ie.GET,r.path="".concat(Hk),r.params=ze({token:c,limit:o,reverse:a,order:yA.UPDATED_AT,show_ui_template:!0,show_color_variables:!0,keys:u}),r}return G(n,t),n})(we),BY=(function(t){function n(e,r){var i=t.call(this,e,r)||this,a=r.next,s=r.has_more,o=s!==void 0&&s,u=r.templates;return i.nextToken=a,i.hasMore=o,i.templates=u.map((function(c){return{template:JSON.stringify(c)}})),i}return G(n,t),n})(xe),HY=(function(t){function n(e){var r=this,i=e.key;return(r=t.call(this)||this).method=Ie.GET,r.path="".concat(Hk,"/").concat(i),r}return G(n,t),n})(we),GY=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.template=JSON.stringify(r),i}return G(n,t),n})(xe),wD={},Ki=(function(){function t(n,e){var r=e.sdkState,i=e.dispatcher,a=e.requestQueue,s=e.onlineDetector,o=e.cacheContext;this._iid=n,this._sdkState=r,this._requestQueue=a,this._dispatcher=i,this._cacheContext=o,ap.of(n),yp.of(n),c5.of(n),this.fileMessageQueue=new P$(n,{sdkState:r,dispatcher:i,requestQueue:a,onlineDetector:s,cacheContext:o}),wD[n]=this}return t.of=function(n){return wD[n]},t.prototype._setSenderInfo=function(n){if(this._cacheContext.localCacheEnabled&&(n.messageType===br.USER||n.messageType===br.FILE)){var e=n.sender;if(e){var r=PA.of(this._iid),i=r.getUserInfoFromCache(e.userId);if(i){var a=Z(Z({},n.sender),{nickname:i.nickname,profileUrl:i.plainProfileUrl,requireAuth:i.requireAuth,metadata:i.metaData});n.sender=a}else r.upsert(new fn(this._iid,fn.payloadify(e)),n.createdAt)}}},t.prototype.buildMessageFromSerializedData=function(n){var e=gd(n);if(e.notificationId)return new gp(this._iid,gp.payloadify(e));switch(this._setSenderInfo(e),e.messageType){case br.USER:return new Ma(this._iid,Ma.payloadify(e));case br.FILE:return rl._isMultipleFilesMessageSerializedData(e)?new rl(this._iid,rl.payloadify(e)):new Ai(this._iid,Ai.payloadify(e));case br.ADMIN:return new mp(this._iid,mp.payloadify(e))}throw ae.invalidParameters},t.prototype.buildUserMessageCreateParamsFromSerializedData=function(n,e){return ze(ht({data:e.data,customType:e.customType,mentionType:e.mentionType,mentionedUserIds:e.mentionedUserIds,mentionedUsers:e.mentionedUsers,mentionedMessageTemplate:e.mentionedMessageTemplate,metaArrays:e.metaArrays,parentMessageId:e.parentMessageId,isReplyToChannel:n.isReplyToChannel,pushNotificationDeliveryOption:n.pushNotificationDeliveryOption,appleCriticalAlertOptions:e.appleCriticalAlertOptions,reqId:e.reqId,message:e.message,translationTargetLanguages:Object.keys(e.translations),pollId:n.pollId}))},t.prototype.buildFileMessageCreateParamsFromSerializedData=function(n,e){var r;return ze(ht({data:e.data,customType:e.customType,mentionType:e.mentionType,mentionedUserIds:e.mentionedUserIds,mentionedUsers:e.mentionedUsers,metaArrays:e.metaArrays,parentMessageId:e.parentMessageId,isReplyToChannel:n.isReplyToChannel,pushNotificationDeliveryOption:n.pushNotificationDeliveryOption,appleCriticalAlertOptions:e.appleCriticalAlertOptions,reqId:e.reqId,file:n.file,fileKey:n.fileKey,fileUrl:e.plainUrl,fileName:e.name,fileSize:e.size,mimeType:e.type,thumbnailSizes:(r=e.thumbnails)===null||r===void 0?void 0:r.map((function(i){return{maxWidth:i.width,maxHeight:i.height}})),fileType:n.fileType,requireAuth:e.requireAuth}))},t.prototype.buildMultipleFilesMessageCreateParamsFromSerializedData=function(n,e){var r=this;return ze({data:e.data,customType:e.customType,mentionType:e.mentionType,mentionedUserIds:e.mentionedUserIds,mentionedUsers:e.mentionedUsers,metaArrays:e.metaArrays,parentMessageId:e.parentMessageId,isReplyToChannel:n.isReplyToChannel,pushNotificationDeliveryOption:n.pushNotificationDeliveryOption,appleCriticalAlertOptions:e.appleCriticalAlertOptions,reqId:e.reqId,fileInfoList:n.fileInfoList.map((function(i){return new Ky(r._iid,i)}))})},t.prototype.buildScheduledUserMessageCreateParamsFromSerializedData=function(n,e){return Z(Z({},this.buildUserMessageCreateParamsFromSerializedData(n,e)),{scheduledAt:n.scheduledAt})},t.prototype.buildScheduledFileMessageCreateParamsFromSerializedData=function(n,e){return Z(Z({},this.buildFileMessageCreateParamsFromSerializedData(n,e)),{scheduledAt:n.scheduledAt})},t.prototype.buildSenderFromSerializedData=function(n){var e=gd(n);return new Ng(this._iid,Ng.payloadify(e))},t.prototype.getMessage=function(n){return D(this,void 0,void 0,(function(){var e,r;return O(this,(function(i){switch(i.label){case 0:return e=new F$(n),[4,this._requestQueue.send(e)];case 1:return r=i.sent(),[2,r.as(B$).message]}}))}))},t.prototype.getScheduledMessage=function(n){return D(this,void 0,void 0,(function(){var e,r;return O(this,(function(i){switch(i.label){case 0:return e=new V$(n),[4,this._requestQueue.send(e)];case 1:return r=i.sent(),[2,r.as(z$).message]}}))}))},t.prototype.getMessagesByMessageId=function(n,e,r,i,a){return a===void 0&&(a=Se.REQUEST_MESSAGE),D(this,void 0,void 0,(function(){var s,o,u;return O(this,(function(c){switch(c.label){case 0:return s=new j1(Z(Z(Z({channelType:e,channelUrl:n,token:String(r)},Ty),i),{sdkSource:Nl.EXTERNAL_LEGACY})),[4,this._requestQueue.send(s)];case 1:return o=c.sent(),u=o.as(q1).messages,this._dispatcher.dispatch(new Br({messages:u,source:a})),[2,u]}}))}))},t.prototype.getMessagesByTimestamp=function(n,e,r,i,a){return a===void 0&&(a=Se.REQUEST_MESSAGE),D(this,void 0,void 0,(function(){var s,o,u;return O(this,(function(c){switch(c.label){case 0:return s=new j1(Z(Z(Z({channelType:e,channelUrl:n,timestamp:r},Ty),i),{sdkSource:Nl.EXTERNAL_LEGACY})),[4,this._requestQueue.send(s)];case 1:return o=c.sent(),u=o.as(q1).messages,this._dispatcher.dispatch(new Br({messages:u,source:a})),[2,u]}}))}))},t.prototype._getMessagesByTimestampForCollection=function(n,e,r,i,a,s,o,u){return a===void 0&&(a=Se.REQUEST_MESSAGE),D(this,void 0,void 0,(function(){var c,h,p,m,_,b;return O(this,(function(C){switch(C.label){case 0:return c=new j1(Z(Z(Z({channelType:e,channelUrl:n,timestamp:r},Ty),i),{checkingHasNext:s,checkingContinuousMessages:o,sdkSource:u})),[4,this._requestQueue.send(c)];case 1:return h=C.sent(),p=h.as(q1),m=p.messages,_=p.isContinuousMessages,b=p.hasNext,this._dispatcher.dispatch(new Br({messages:m,source:a})),[2,{messages:m,isContinuousMessages:_,hasNext:b}]}}))}))},t.prototype.getThreadedMessagesByTimestamp=function(n,e,r,i){return i===void 0&&(i=Se.REQUEST_THREADED_MESSAGE),D(this,void 0,void 0,(function(){var a,s,o,u;return O(this,(function(c){switch(c.label){case 0:return a=new j1(Z(Z(Z({channelUrl:n.channelUrl,channelType:n.channelType,timestamp:e},EE),r),{replyType:Yi.ALL,parentMessageId:n.messageId,includeThreadInfo:!0})),[4,this._requestQueue.send(a)];case 1:return s=c.sent(),o=s.as(q1).messages,(u=o.slice(1)).forEach((function(h){h.parentMessage=n})),this._dispatcher.dispatch(new Br({messages:u,source:i})),[2,{parentMessage:o[0],threadedMessages:u}]}}))}))},t.prototype.getMessageTemplatesByToken=function(n,e){return e===void 0&&(e={}),D(this,void 0,void 0,(function(){var r,i,a,s,o,u;return O(this,(function(c){switch(c.label){case 0:return r=new FY(Z({token:n},e)),[4,this._requestQueue.send(r)];case 1:return i=c.sent(),a=i.as(BY),s=a.hasMore,o=a.nextToken,u=a.templates,[2,{hasMore:s,token:o,templates:u}]}}))}))},t.prototype.getMessageTemplate=function(n){return D(this,void 0,void 0,(function(){var e,r;return O(this,(function(i){switch(i.label){case 0:return e=new HY({key:n}),[4,this._requestQueue.send(e)];case 1:return r=i.sent(),[2,{template:r.as(GY).template}]}}))}))},t.prototype.getMessageChangelogs=function(n,e,r,i,a){return a===void 0&&(a=Se.REQUEST_MESSAGE_CHANGELOGS),D(this,void 0,void 0,(function(){var s,o,u,c,h,p,m,_,b;return O(this,(function(C){switch(C.label){case 0:return s=new H$(ze(ht(Z(Z({channelType:e,channelUrl:n,timestamp:typeof r=="number"?r:null,token:typeof r=="string"?r:null},OA),i)))),[4,this._requestQueue.send(s)];case 1:return o=C.sent(),u=o.as(G$),c=u.updatedMessages,h=u.deletedMessagesInfo,p=u.hasMore,m=u.nextToken,_=u.forceUseNextToken,b=h.map((function(N){return N.messageId})),c.length>0&&this._dispatcher.dispatch(new Br({messages:c,source:a})),b.length>0&&this._dispatcher.dispatch(new Aw({messageIds:b,source:a})),[2,{updatedMessages:c,deletedMessageIds:b,hasMore:p,token:m,forceUseNextToken:_}]}}))}))},t})(),d5=(function(t){function n(e,r){var i=t.call(this,e)||this;i.targetMessageId=0;var a=r.thread_info,s=r.parent_message_id,o=r.channel_url,u=r.channel_type;return a&&re("object",a)&&re("number",s)&&re("string",o)&&re("string",u)&&(i.threadInfo=new rS(e,a),i.targetMessageId=s,i.channelUrl=o,i.channelType=u),i}return G(n,t),n})(wi),VY={channelUrl:"",channelType:yn.BASE,messageId:0,includeReactions:!1,includeMetaArray:!1,includeParentMessageInfo:!1,includeThreadInfo:!1},zY=(function(t){function n(e){var r=e.channelCustomType,i=e.keyword,a=e.limit,s=e.reverse,o=e.exactMatch,u=e.channelUrl,c=e.order,h=e.messageTimestampFrom,p=e.messageTimestampTo,m=e.advancedQuery,_=e.targetFields,b=e.nextToken,C=t.call(this)||this;return C.method=Ie.GET,C.path="".concat(pj,"/messages"),C.params=ze({custom_type:r,query:i,limit:a,reverse:s,exact_match:o,channel_url:u,message_ts_from:h,message_ts_to:p,sort_field:c,advanced_query:m,target_fields:_,after:b}),C}return G(n,t),n})(we),jY=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.messages=r.results.map((function(a){return Da(e,a)})),i.hasNext=r.has_next,i.nextToken=r.end_cursor,i.totalCount=r.total_count,i}return G(n,t),n})(xe);(function(t){t.SCORE="score",t.TIMESTAMP="ts"})(My||(My={}));var qY=(function(t){function n(e,r){var i,a,s,o,u,c,h,p,m,_=this;return(_=t.call(this,e,r)||this).keyword="",_.reverse=!1,_.exactMatch=!1,_.channelUrl=null,_.channelCustomType=null,_.messageTimestampFrom=null,_.messageTimestampTo=null,_.order=My.SCORE,_.advancedQuery=!1,_.targetFields=null,_._nextToken="",_.totalCount=-1,_.keyword=r.keyword,_.reverse=(i=r.reverse)!==null&&i!==void 0&&i,_.exactMatch=(a=r.exactMatch)!==null&&a!==void 0&&a,_.channelUrl=(s=r.channelUrl)!==null&&s!==void 0?s:null,_.channelCustomType=(o=r.channelCustomType)!==null&&o!==void 0?o:null,_.messageTimestampFrom=(u=r.messageTimestampFrom)!==null&&u!==void 0?u:null,_.messageTimestampTo=(c=r.messageTimestampTo)!==null&&c!==void 0?c:null,_.order=(h=r.order)!==null&&h!==void 0?h:My.SCORE,_.advancedQuery=(p=r.advancedQuery)!==null&&p!==void 0&&p,_.targetFields=(m=r.targetFields)!==null&&m!==void 0?m:null,_}return G(n,t),n.prototype._validate=function(){return t.prototype._validate.call(this)&&re("string",this.keyword)&&this.keyword.length>0&&re("boolean",this.reverse)&&re("boolean",this.exactMatch)&&re("string",this.channelUrl,!0)&&re("string",this.channelCustomType,!0)&&re("number",this.messageTimestampFrom,!0)&&re("number",this.messageTimestampTo,!0)&&dn(My,this.order)&&re("boolean",this.advancedQuery)&&hn("string",this.targetFields,!0)},n.prototype.next=function(){return D(this,void 0,void 0,(function(){var e,r,i,a,s,o,u,c;return O(this,(function(h){switch(h.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=te.of(this._iid).requestQueue,r=new zY(ht(Z(Z({},this),{nextToken:this._nextToken?this._nextToken:null}))),[4,e.send(r)]):[3,2]:[3,5];case 1:return i=h.sent(),a=i.as(jY),s=a.messages,o=a.hasNext,u=a.nextToken,c=a.totalCount,this._nextToken=u,this._hasNext=o,this._isLoading=!1,this.totalCount=c,[2,s];case 2:return[2,[]];case 3:throw ae.queryInProgress;case 4:return[3,6];case 5:throw ae.invalidParameters;case 6:return[2]}}))}))},n})(wd),$Y=(function(t){function n(e){var r=e.channelType,i=e.channelUrl,a=e.limit,s=e.token,o=t.call(this)||this;return o.method=Ie.GET,o.path="".concat(Gn(r),"/").concat(encodeURIComponent(i),"/messages/parent_thread_message"),o.params=ze(ht({limit:a,token:s})),o}return G(n,t),n})(we),KY=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.token=r.next,i.messages=r.messages.map((function(a){return Da(e,a)})),i}return G(n,t),n})(xe),YY=(function(t){function n(e,r,i,a){var s=t.call(this,e,r,i,a)||this;return s._edge="",s}return G(n,t),n.prototype._validate=function(){return t.prototype._validate.call(this)},n.prototype.load=function(){return D(this,void 0,void 0,(function(){var e,r,i,a,s,o;return O(this,(function(u){switch(u.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=te.of(this._iid).requestQueue,r=new $Y({channelType:this.channelType,channelUrl:this.channelUrl,token:this._edge,limit:this.limit}),[4,e.send(r)]):[3,2]:[3,5];case 1:return i=u.sent(),a=i.as(KY),s=a.messages,o=a.token,this._edge=o,this._hasNext=!!o,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw ae.queryInProgress;case 4:return[3,6];case 5:throw ae.invalidParameters;case 6:return[2]}}))}))},n})(Ac),WY={channelUrl:"",scheduledMessageId:0},QY={reverse:!1,limit:20},XY=(function(t){function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.name="message",e}return G(n,t),n.prototype.init=function(e,r){var i=r.sdkState,a=r.dispatcher,s=r.sessionManager,o=r.requestQueue,u=r.logger,c=r.onlineDetector,h=r.cacheContext;t.prototype.init.call(this,e,{sdkState:i,dispatcher:a,sessionManager:s,requestQueue:o,logger:u,onlineDetector:c,cacheContext:h}),this._manager=new Ki(e,{sdkState:i,dispatcher:a,requestQueue:o,onlineDetector:c,cacheContext:h})},n.prototype.buildMessageFromSerializedData=function(e){return this._manager.buildMessageFromSerializedData(e)},n.prototype.buildSenderFromSerializedData=function(e){return this._manager.buildSenderFromSerializedData(e)},n.prototype.getMessage=function(e){return D(this,void 0,void 0,(function(){var r,i;return O(this,(function(a){switch(a.label){case 0:return r=Z(Z({},VY),e),Ue((function(s){return re("string",s.channelUrl)&&dn(yn,s.channelType)&&re("number",s.messageId)&&re("boolean",s.includeReactions,!0)&&re("boolean",s.includeMetaArray,!0)&&re("boolean",s.includeParentMessageInfo,!0)&&re("boolean",s.includeThreadInfo,!0)})(r)).throw(ae.invalidParameters),[4,this._manager.getMessage(r)];case 1:if((i=a.sent())instanceof ja||i instanceof gp||i===null)return[2,i];throw"Unknown message type is given."}}))}))},n.prototype.getScheduledMessage=function(e){return D(this,void 0,void 0,(function(){var r;return O(this,(function(i){return r=Z(Z({},WY),e),Ue((function(a){return re("string",a.channelUrl)&&a.channelUrl!==""&&re("number",a.scheduledMessageId)&&a.scheduledMessageId>0})(r)).throw(ae.invalidParameters),[2,this._manager.getScheduledMessage(r)]}))}))},n.prototype.getMessageTemplatesByToken=function(e,r){return r===void 0&&(r={}),D(this,void 0,void 0,(function(){var i;return O(this,(function(a){return i=Z(Z({},QY),r),Ue(re("string",e,!0)&&(function(s){return re("boolean",s.reverse,!0)&&re("number",s.limit,!0)&&hn("string",s.keys,!0)})(i)).throw(ae.invalidParameters),[2,this._manager.getMessageTemplatesByToken(e,i)]}))}))},n.prototype.getMessageTemplate=function(e){return D(this,void 0,void 0,(function(){return O(this,(function(r){return Ue(re("string",e)).throw(ae.invalidParameters),[2,this._manager.getMessageTemplate(e)]}))}))},n})(GS),ti,Iy,FA;(function(t){t.LATEST_LAST_MESSAGE="latest_last_message",t.CHRONOLOGICAL="chronological",t.CHANNEL_NAME_ALPHABETICAL="channel_name_alphabetical",t.METADATA_VALUE_ALPHABETICAL="metadata_value_alphabetical"})(ti||(ti={})),(function(t){t.CHRONOLOGICAL="chronological",t.CHANNEL_NAME_ALPHABETICAL="channel_name_alphabetical",t.METADATA_VALUE_ALPHABETICAL="metadata_value_alphabetical"})(Iy||(Iy={})),(function(t){t.CREATED_AT="created_at",t.SCHEDULED_AT="scheduled_at"})(FA||(FA={}));var Yy,NC=function(t){switch(t){case ti.LATEST_LAST_MESSAGE:return["-lastMessageUpdatedAt","-createdAt","syncIndex"];case ti.CHRONOLOGICAL:return["-createdAt","syncIndex"];case ti.CHANNEL_NAME_ALPHABETICAL:return["name"];default:return["-lastMessageUpdatedAt","-createdAt","syncIndex"]}},h5=(function(t){function n(e){var r=e.message,i=t.call(this)||this;return i.message=r,i}return G(n,t),n})(gr),RD={},ry=(function(){function t(n,e){var r=e.localCacheEnabled,i=e.enableAutoResend,a=e.dispatcher,s=e.sdkState,o=e.logger,u=this;this._iid=n,RD[n]=this,this._localCacheEnabled=r,this._enableAutoResend=i,this._isProcessingAutoResend=!1,this._autoResendQueue=[],this._dispatcher=a,this._logger=o,this._sdkState=s,this._localCacheEnabled&&a.on((function(c){if(c instanceof Ao)switch(c.stateType){case zn.CONNECTED:u._isProcessingAutoResend||u.processAutoResendRegisteredPendingMessages().then((function(){return u._processNextAutoResend()}));break;case zn.INTERNAL_DISCONNECTED:case zn.EXTERNAL_DISCONNECTED:u._isProcessingAutoResend=!1}}))}return t.of=function(n){return RD[n]},t.prototype.processNonAutoResendRegisteredPendingMessages=function(){return D(this,void 0,void 0,(function(){var n=this;return O(this,(function(e){switch(e.label){case 0:return this._enableAutoResend?[4,$r((function(){return D(n,void 0,void 0,(function(){var r,i,a,s,o,u;return O(this,(function(c){switch(c.label){case 0:return[4,this._fetchAllCachedPendingMessages()];case 1:r=c.sent();try{for(i=Fe(r),a=i.next();!a.done;a=i.next())(s=a.value).errorCode===0&&(this._logger.debug("cached pending message is not auto-resend registered. changing its sending status to failed: ",s.reqId),s.sendingStatus=Tn.FAILED,s.errorCode=et.ACK_TIMEOUT,this._dispatcher.dispatch(new Br({messages:[s],source:Se.LOCAL_MESSAGE_FAILED})))}catch(h){o={error:h}}finally{try{a&&!a.done&&(u=i.return)&&u.call(i)}finally{if(o)throw o.error}}return[2]}}))}))}))]:[2];case 1:return e.sent(),[2]}}))}))},t.prototype.processAutoResendRegisteredPendingMessages=function(){return D(this,void 0,void 0,(function(){var n=this;return O(this,(function(e){switch(e.label){case 0:return[4,$r((function(){return D(n,void 0,void 0,(function(){var r,i,a,s,o,u,c,h;return O(this,(function(p){switch(p.label){case 0:return[4,this._fetchAllCachedPendingMessages()];case 1:r=p.sent();try{for(i=Fe(r),a=i.next();!a.done;a=i.next())s=a.value,this._enableAutoResend&&s.errorCode&&qC(s.errorCode)&&(o=new Date().getTime(),u=s.createdAt+2592e5,this._enableAutoResend&&o<=u?this._autoResendQueue.map((function(m){return m.reqId})).indexOf(s.reqId)<0&&this._autoResendQueue.push(s):(this._logger.debug("auto-resend registered pending messaged expired. expiration date: ",new Date(u).toLocaleString()),s.sendingStatus=Tn.FAILED,this._dispatcher.dispatch(new Br({messages:[s],source:Se.LOCAL_MESSAGE_FAILED}))))}catch(m){c={error:m}}finally{try{a&&!a.done&&(h=i.return)&&h.call(i)}finally{if(c)throw c.error}}return[2]}}))}))}))];case 1:return e.sent(),[2]}}))}))},t.prototype.completeCurrentAndProcessNextAutoResend=function(n){if(this._localCacheEnabled&&this._enableAutoResend&&(n.sendingStatus===Tn.SUCCEEDED||n.sendingStatus===Tn.FAILED&&!qC(n.errorCode))){var e=this.indexOf(n);e>=0&&this._autoResendQueue.splice(e,1),e===0&&this._processNextAutoResend()}},t.prototype._fetchAllCachedPendingMessages=function(){return D(this,void 0,void 0,(function(){var n,e;return O(this,(function(r){switch(r.label){case 0:return n=yp.of(this._iid),(e=new af).replyType=Yi.ALL,[4,n.fetch({sendingStatus:Tn.PENDING,backward:!0,filter:e})];case 1:return[2,r.sent()]}}))}))},t.prototype.indexOf=function(n){return this._autoResendQueue.length>0?this._autoResendQueue.map((function(e){return e.reqId})).indexOf(n.reqId):-1},t.prototype._processNextAutoResend=function(){return D(this,void 0,void 0,(function(){var n;return O(this,(function(e){if(this._localCacheEnabled&&this._enableAutoResend&&this._sdkState.appState==="foreground")try{this._autoResendQueue.length>0?(this._isProcessingAutoResend||(this._logger.debug("auto-resend queue started."),this._isProcessingAutoResend=!0),n=this._autoResendQueue[0],this._dispatcher.dispatch(new h5({message:n})),this._logger.debug("processing auto-resend for message request id: ",n.reqId)):(this._logger.debug("auto-resend queue finished."),this._isProcessingAutoResend=!1)}catch(r){this._logger.warn("process auto-resend error: ",r),this._isProcessingAutoResend=!1}return[2]}))}))},t})();(function(t){t[t.USER_BLOCK=20001]="USER_BLOCK",t[t.USER_UNBLOCK=2e4]="USER_UNBLOCK",t[t.FRIEND_DISCOVERED=20900]="FRIEND_DISCOVERED"})(Yy||(Yy={}));var sd,lS=(function(){function t(n){this.category=n.cat,this.data=n.data}return t.getDataAsUserBlockEvent=function(n,e){var r=e.data,i=r.blocker,a=r.blockee;return{blocker:new fn(n,i),blockee:new fn(n,a)}},t.getDataAsFriendDiscoveredEvent=function(n,e){var r=e.data.friend_discoveries;return{friendDiscoveries:Array.isArray(r)?r.map((function(i){return new fn(n,i)})):[]}},t})(),f5=(function(t){function n(e,r){var i=r.userId,a=t.call(this)||this;return a._iid=e,a.userId=i,a}return G(n,t),n})(gr),v5=(function(t){function n(){return t.call(this)||this}return G(n,t),n})(gr),p5=(function(t){function n(e){var r=e.configTs,i=t.call(this)||this;return i.configTs=r,i}return G(n,t),n})(gr),m5=(function(t){function n(e,r,i){var a=t.call(this,e,"USEV",i)||this;return a.event=new lS(i),a}return G(n,t),n})(Rr),g5=(function(t){function n(e){var r=e.appConfigsInfo,i=e.configTs,a=t.call(this)||this;return a.appConfigsInfo={},a.configTs=0,a.appConfigsInfo=r,a.configTs=i,a}return G(n,t),n})(gr);(function(t){t[t.IDLE=0]="IDLE",t[t.RUNNING=1]="RUNNING",t[t.END=2]="END"})(sd||(sd={}));var Td=(function(t){function n(e,r,i,a){var s=t.call(this)||this;return s._state=sd.IDLE,s._retryCount=0,s._retryLimit=3,s.priority=0,s._worker=r,s}return G(n,t),Object.defineProperty(n.prototype,"isIdle",{get:function(){return this._state===sd.IDLE},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isRunning",{get:function(){return this._state===sd.RUNNING},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isDone",{get:function(){return this._state===sd.END},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"retryCount",{get:function(){return this._retryCount},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"retryLimit",{get:function(){return this._retryLimit},enumerable:!1,configurable:!0}),n.prototype._run=function(e){return D(this,void 0,void 0,(function(){var r,i;return O(this,(function(a){switch(a.label){case 0:if(!this.isRunning)return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this._worker(e)];case 2:return r=a.sent(),this._retryCount=0,this.dispatch("progress",r),r.hasNext?this._run(r.nextToken):this.end(),[3,4];case 3:return i=a.sent(),this.dispatch("error",i),this._retryCount<this._retryLimit?(this._retryCount++,this._run(e)):this.stop(),[3,4];case 4:return[2]}}))}))},n.prototype.start=function(e){this.isRunning||(this._state=sd.RUNNING,this._run(e))},n.prototype.stop=function(){this._state=sd.IDLE,this.dispatch("stop")},n.prototype.end=function(){this._state=sd.END,this.dispatch("end")},n})(Tp),ZY=function(t,n){this.pollId=0,this.messageId=0,this.pollId=n.poll.id,this.messageId=n.poll.message_id,this._iid=t,this._payload=n},nr;(function(t){t[t.NONE=0]="NONE",t[t.CHANNEL_ENTER=10102]="CHANNEL_ENTER",t[t.CHANNEL_EXIT=10103]="CHANNEL_EXIT",t[t.USER_CHANNEL_MUTE=10201]="USER_CHANNEL_MUTE",t[t.USER_CHANNEL_UNMUTE=10200]="USER_CHANNEL_UNMUTE",t[t.USER_CHANNEL_BAN=10601]="USER_CHANNEL_BAN",t[t.USER_CHANNEL_UNBAN=10600]="USER_CHANNEL_UNBAN",t[t.CHANNEL_FREEZE=10701]="CHANNEL_FREEZE",t[t.CHANNEL_UNFREEZE=10700]="CHANNEL_UNFREEZE",t[t.TYPING_START=10900]="TYPING_START",t[t.TYPING_END=10901]="TYPING_END",t[t.CHANNEL_JOIN=1e4]="CHANNEL_JOIN",t[t.CHANNEL_LEAVE=10001]="CHANNEL_LEAVE",t[t.CHANNEL_OPERATOR_UPDATE=10002]="CHANNEL_OPERATOR_UPDATE",t[t.CHANNEL_INVITE=10020]="CHANNEL_INVITE",t[t.CHANNEL_ACCEPT_INVITE=10021]="CHANNEL_ACCEPT_INVITE",t[t.CHANNEL_DECLINE_INVITE=10022]="CHANNEL_DECLINE_INVITE",t[t.CHANNEL_PROP_CHANGED=11e3]="CHANNEL_PROP_CHANGED",t[t.CHANNEL_DELETED=12e3]="CHANNEL_DELETED",t[t.CHANNEL_META_DATA_CHANGED=11100]="CHANNEL_META_DATA_CHANGED",t[t.CHANNEL_META_COUNTERS_CHANGED=11200]="CHANNEL_META_COUNTERS_CHANGED",t[t.CHANNEL_HIDE=13e3]="CHANNEL_HIDE",t[t.CHANNEL_UNHIDE=13001]="CHANNEL_UNHIDE",t[t.PINNED_MESSAGE_CHANGED=11300]="PINNED_MESSAGE_CHANGED"})(nr||(nr={}));var JY=(function(){function t(n){var e;this.channelUrl=n.channel_url,this.channelType=n.channel_type,this.category=n.cat,this.data=(e=n.data)!==null&&e!==void 0?e:{},this.ts=n.ts}return Object.defineProperty(t.prototype,"isGroupChannelEvent",{get:function(){return this.channelType===yn.GROUP},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isOpenChannelEvent",{get:function(){return this.channelType===yn.OPEN},enumerable:!1,configurable:!0}),t})(),Od=(function(t){function n(e,r,i){var a=t.call(this,e,"SYEV",i)||this;return a.event=new JY(i),a}return G(n,t),n})(Rr),_5=(function(t){function n(e,r,i){var a=t.call(this,e,r,i)||this,s=i.data.operators,o=s===void 0?[]:s;return a.operators=o.map((function(u){return new fn(a._iid,u)})),a}return G(n,t),n})(Od),y5=(function(t){function n(e,r,i){var a,s=this;return(s=t.call(this,e,"SYEV",i)||this).pinnedMessageIds=[],s.latestPinnedMessage=null,s.ts=0,i.data&&(s.pinnedMessageIds=(a=i.data.pinned_message_ids)!==null&&a!==void 0?a:[],s.latestPinnedMessage=i.data.latest_pinned_message?Da(e,Z({},i.data.latest_pinned_message)):null),s.ts=i.ts,s}return G(n,t),n})(Rr),E5=(function(t){function n(e,r){var i=t.call(this,e)||this;return i._logger=r.logger,i._sdkState=r.sdkState,i._sessionManager=r.sessionManager,i._requestQueue=r.requestQueue,i._dispatcher=r.dispatcher,i._cacheContext=r.cacheContext,i._channelType=r.channelType,i}return G(n,t),Object.defineProperty(n.prototype,"_messageBroadcast",{get:function(){return c5.of(this._iid)},enumerable:!1,configurable:!0}),n.prototype.subscribeMessageEvent=function(e,r){this._messageBroadcast.subscribe(e,r)},n.prototype.unsubscribeMessageEvent=function(e){this._messageBroadcast.unsubscribe(e)},n.prototype.getMessageFromCache=function(e){return D(this,void 0,void 0,(function(){return O(this,(function(r){return[2,null]}))}))},n.prototype.getExactlyMatchingMessagesForTokenFromCache=function(e,r,i){return D(this,void 0,void 0,(function(){return O(this,(function(a){return[2,[]]}))}))},n.prototype.getMessagesFromCache=function(e,r,i,a,s,o){return D(this,void 0,void 0,(function(){return O(this,(function(u){return[2,[]]}))}))},n.prototype.getPollMessagesFromCache=function(e,r,i,a){return D(this,void 0,void 0,(function(){return O(this,(function(s){return[2,[]]}))}))},n.prototype.getCachedMessageCountBetween=function(e,r,i,a){return D(this,void 0,void 0,(function(){return O(this,(function(s){return[2,0]}))}))},n.prototype.getUnsentMessagesFromCache=function(e,r){return D(this,void 0,void 0,(function(){return O(this,(function(i){return[2,[]]}))}))},n.prototype.removeFailedMessageFromCache=function(e){return D(this,void 0,void 0,(function(){return O(this,(function(r){return[2]}))}))},n})(wi),b5=(function(t){function n(e,r,i){var a,s,o,u,c=this;(c=t.call(this,e,"ADMM",i)||this).message=new mp(e,i);var h=te.of(e).sdkState;return c.isMentioned=Eg(c.message.mentionType,(o=(a=c.message.mentionedUserIds)!==null&&a!==void 0?a:(s=c.message.mentionedUsers)===null||s===void 0?void 0:s.map((function(p){return p.userId})))!==null&&o!==void 0?o:[],h.userId),c.forceUpdateLastMessage=(u=i.force_update_last_message)!==null&&u!==void 0&&u,c}return G(n,t),n})(Rr),C5=(function(t){function n(e,r,i){var a,s,o,u,c,h=this;(h=t.call(this,e,"AEDI",i)||this).message=new mp(e,i);var p=te.of(e).sdkState;return h.mentionCountChange=mw({mentionType:(a=i.old_values)===null||a===void 0?void 0:a.mention_type,mentionedUserIds:(o=(s=i.old_values)===null||s===void 0?void 0:s.mentioned_user_ids)!==null&&o!==void 0?o:[]},ht({mentionType:h.message.mentionType,mentionedUserIds:(u=h.message.mentionedUserIds)!==null&&u!==void 0?u:(c=h.message.mentionedUsers)===null||c===void 0?void 0:c.map((function(m){return m.userId}))}),p.userId),h}return G(n,t),n})(Rr),S5=(function(t){function n(e,r,i){var a=t.call(this,e,"MRCT",i)||this;return a.channelUrl=i.channel_url,a.channelType=i.channel_type,a.event=new Iw(i),a}return G(n,t),n})(Rr),T5=(function(t){function n(e,r,i){var a=t.call(this,e,"MTHD",i)||this;return a.event=new d5(e,i),a}return G(n,t),n})(Rr),N5=(function(t){function n(e,r,i){var a=t.call(this,e,"MCNT",i)||this;return a.groupChannelMemberCounts=i.group_channels.map((function(s){return{channelUrl:s.channel_url,memberCount:s.member_count,joinedMemberCount:s.joined_member_count,updatedAt:s.ts}})),a.openChannelMemberCounts=i.open_channels.map((function(s){return{channelUrl:s.channel_url,participantCount:s.participant_count,updatedAt:s.ts}})),a}return G(n,t),n})(Rr),A5=(function(t){function n(e,r,i){var a=t.call(this,e,"PEDI",i)||this;return a.event=new ZY(e,i),a.status=IA(i.poll.status)||i.poll.status,a.channelUrl=i.channel_url,a.channelType=i.channel_type,a}return G(n,t),n})(Rr),M5=function(){this.onUserMuted=Bt,this.onUserUnmuted=Bt,this.onUserBanned=Bt,this.onUserUnbanned=Bt,this.onChannelChanged=Bt,this.onChannelDeleted=Bt,this.onChannelFrozen=Bt,this.onChannelUnfrozen=Bt,this.onOperatorUpdated=Bt,this.onChannelMemberCountChanged=Bt,this.onMetaDataCreated=Bt,this.onMetaDataUpdated=Bt,this.onMetaDataDeleted=Bt,this.onMetaCounterCreated=Bt,this.onMetaCounterUpdated=Bt,this.onMetaCounterDeleted=Bt,this.onMessageReceived=Bt,this.onMessageUpdated=Bt,this.onMessageDeleted=Bt,this.onMentionReceived=Bt,this.onReactionUpdated=Bt,this.onThreadInfoUpdated=Bt},ii;(function(t){t.NONE="none",t.JOINED="joined",t.INVITED="invited",t.LEFT="left"})(ii||(ii={}));var bc,Hs,zs,ef,wl,uS,_d,Wy,el=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.state=null,i.role=null,i.isMuted=!1,i.isBlockedByMe=!1,i.isBlockingMe=!1,i.state=dn(ii,r.state)?r.state:null,i.role=dn(nl,r.role)?r.role:null,typeof r.is_muted=="boolean"&&(i.isMuted=r.is_muted),typeof r.is_blocked_by_me=="boolean"&&(i.isBlockedByMe=r.is_blocked_by_me),typeof r.is_blocking_me=="boolean"&&(i.isBlockingMe=r.is_blocking_me),i}return G(n,t),n.payloadify=function(e){return ze(ht(Z(Z({},t.payloadify.call(this,e)),{state:e.state,role:e.role,is_muted:e.isMuted,is_blocked_by_me:e.isBlockedByMe,is_blocking_me:e.isBlockingMe})))},n})(Ap),eW=(function(t){function n(e,r){var i,a,s=this;return(s=t.call(this,e)||this).channelUrl=(i=r.channel_url)!==null&&i!==void 0?i:"",s.channelType=(a=r.channel_type)!==null&&a!==void 0?a:yn.GROUP,s.member=new fn(s._iid,r.user),s.deliveryAt=r.ts,s}return G(n,t),n})(wi);(function(t){t.ALL="all",t.PUBLIC="public",t.PRIVATE="private"})(bc||(bc={})),(function(t){t.ALL="all",t.JOINED="joined_only",t.INVITED="invited_only",t.INVITED_BY_FRIEND="invited_by_friend",t.INVITED_BY_NON_FRIEND="invited_by_non_friend"})(Hs||(Hs={})),(function(t){t.ALL="all",t.SUPER="super",t.NON_SUPER="nonsuper",t.BROADCAST_ONLY="broadcast_only",t.EXCLUSIVE_ONLY="exclusive_only"})(zs||(zs={})),(function(t){t.ALL="all",t.UNREAD_MESSAGE="unread_message"})(ef||(ef={})),(function(t){t.ALL="all",t.UNHIDDEN="unhidden_only",t.HIDDEN="hidden_only",t.HIDDEN_ALLOW_AUTO_UNHIDE="hidden_allow_auto_unhide",t.HIDDEN_PREVENT_AUTO_UNHIDE="hidden_prevent_auto_unhide"})(wl||(wl={})),(function(t){t.ALL="all",t.OPERATOR="operator",t.NONOPERATOR="nonoperator"})(uS||(uS={})),(function(t){t.AND="AND",t.OR="OR"})(_d||(_d={})),(function(t){t.MEMBER_NICKNAME="member_nickname",t.CHANNEL_NAME="channel_name"})(Wy||(Wy={}));var qr,I5=(function(){function t(n){var e,r,i,a,s,o,u,c,h,p,m,_,b,C,N,S,M,w,U,L;this._searchFilter=null,this._userIdsFilter=null,this.metadataKey=null,this.metadataValues=null,this.metadataValueStartsWith=null,this.includeEmpty=(e=n?.includeEmpty)!==null&&e!==void 0&&e,this.nicknameContainsFilter=(r=n?.nicknameContainsFilter)!==null&&r!==void 0?r:null,this.nicknameStartsWithFilter=(i=n?.nicknameStartsWithFilter)!==null&&i!==void 0?i:null,this.nicknameExactMatchFilter=(a=n?.nicknameExactMatchFilter)!==null&&a!==void 0?a:null,this.channelNameContainsFilter=(s=n?.channelNameContainsFilter)!==null&&s!==void 0?s:"",this.myMemberStateFilter=(o=n?.myMemberStateFilter)!==null&&o!==void 0?o:Hs.ALL,this.customTypesFilter=(u=n?.customTypesFilter)!==null&&u!==void 0?u:null,this.channelUrlsFilter=(c=n?.channelUrlsFilter)!==null&&c!==void 0?c:null,this.superChannelFilter=(h=n?.superChannelFilter)!==null&&h!==void 0?h:zs.ALL,this.publicChannelFilter=(p=n?.publicChannelFilter)!==null&&p!==void 0?p:bc.ALL,this.customTypeStartsWithFilter=(m=n?.customTypeStartsWithFilter)!==null&&m!==void 0?m:null,this.unreadChannelFilter=(_=n?.unreadChannelFilter)!==null&&_!==void 0?_:ef.ALL,this.hiddenChannelFilter=(b=n?.hiddenChannelFilter)!==null&&b!==void 0?b:wl.UNHIDDEN,this.includeFrozen=(C=n?.includeFrozen)===null||C===void 0||C,this.metadataKey=(N=n?.metadataKey)!==null&&N!==void 0?N:null,this.metadataValues=(S=n?.metadataValues)!==null&&S!==void 0?S:null,this.metadataValueStartsWith=(M=n?.metadataValueStartsWith)!==null&&M!==void 0?M:null,this._userIdsFilter=(w=n?.userIdsFilter)!==null&&w!==void 0?w:null,this._searchFilter=(U=n?.searchFilter)!==null&&U!==void 0?U:null,n?.createdAfter&&(this.createdAfter=n.createdAfter),n?.createdBefore&&(this.createdBefore=n.createdBefore),this.includeMetaData=(L=n?.includeMetaData)===null||L===void 0||L}return t.prototype._isFriend=function(n){return!(!n||!n.friendDiscoveryKey&&!n.friendName)},Object.defineProperty(t.prototype,"searchFilter",{get:function(){return this._searchFilter},enumerable:!1,configurable:!0}),t.prototype.setSearchFilter=function(n,e){Array.isArray(n)&&n.length!==0&&typeof e=="string"&&e&&(this._searchFilter={query:e,fields:n})},Object.defineProperty(t.prototype,"userIdsFilter",{get:function(){return this._userIdsFilter},enumerable:!1,configurable:!0}),t.prototype.setUserIdsFilter=function(n,e,r){r===void 0&&(r=_d.AND),this._userIdsFilter={userIds:n,includeMode:e,queryType:r}},t.prototype.clone=function(){var n,e=new t;this.searchFilter&&e.setSearchFilter(this.searchFilter.fields,(n=this.searchFilter.query)!==null&&n!==void 0?n:void 0),this.userIdsFilter&&e.setUserIdsFilter(this.userIdsFilter.userIds,this.userIdsFilter.includeMode,this.userIdsFilter.queryType);var r=JSON.parse(JSON.stringify(this));return Object.keys(r).forEach((function(i){e[i]=r[i]})),e},t.prototype.match=function(n,e){var r;if(this._searchFilter){var i=this._searchFilter,a=i.query,s=i.fields;if(a&&s&&s.length>0&&!s.some((function(C){switch(C){case Wy.CHANNEL_NAME:return n.name.toLowerCase().includes(a.toLowerCase());case Wy.MEMBER_NICKNAME:return n.members.some((function(N){return N.nickname.toLowerCase().includes(a.toLowerCase())}));default:return!0}})))return!1}if(this._userIdsFilter){var o=this._userIdsFilter,u=o.userIds,c=o.includeMode,h=o.queryType,p=n.members.map((function(C){return C.userId}));if(c){if(u.length>0)switch(h){case _d.AND:if(u.some((function(C){return!p.includes(C)})))return!1;break;case _d.OR:if(u.every((function(C){return!p.includes(C)})))return!1}}else if(u.includes(e)||u.push(e),n.members.length>u.length||!sj(u,p))return!1}if(!this.includeEmpty&&!n.lastMessage||!this.includeFrozen&&n.isFrozen||this.customTypesFilter&&this.customTypesFilter.length>0&&!this.customTypesFilter.includes("*")&&!this.customTypesFilter.includes(n.customType)||this.customTypeStartsWithFilter&&!new RegExp("^".concat(this.customTypeStartsWithFilter)).test(n.customType)||this.channelNameContainsFilter&&!n.name.toLowerCase().includes(this.channelNameContainsFilter.toLowerCase()))return!1;if(this.nicknameContainsFilter){var m=this.nicknameContainsFilter.toLowerCase();if(!n.members.some((function(C){return C.userId!==e&&C.nickname.toLowerCase().includes(m)})))return!1}if(this.nicknameStartsWithFilter){var _=this.nicknameStartsWithFilter.toLowerCase();if(!n.members.some((function(C){return C.userId!==e&&C.nickname.toLowerCase().startsWith(_)})))return!1}if(this.nicknameExactMatchFilter){var b=this.nicknameExactMatchFilter.toLowerCase();if(!n.members.some((function(C){return C.userId!==e&&C.nickname.toLowerCase()!=b})))return!1}if(this.channelUrlsFilter&&this.channelUrlsFilter.length>0&&!this.channelUrlsFilter.includes(n.url))return!1;if(this.myMemberStateFilter)switch(this.myMemberStateFilter){case Hs.ALL:if(n.myMemberState==="none")return!1;break;case Hs.JOINED:if(n.myMemberState!=="joined")return!1;break;case Hs.INVITED:if(n.myMemberState!=="invited")return!1;break;case Hs.INVITED_BY_FRIEND:if(n.myMemberState!=="invited"||!this._isFriend(n.inviter))return!1;break;case Hs.INVITED_BY_NON_FRIEND:if(n.myMemberState!=="invited"||this._isFriend(n.inviter))return!1}if(this.hiddenChannelFilter)switch(this.hiddenChannelFilter){case wl.UNHIDDEN:if(n.isHidden||n.hiddenState!=="unhidden")return!1;break;case wl.HIDDEN:if(!n.isHidden)return!1;break;case wl.HIDDEN_ALLOW_AUTO_UNHIDE:if(!n.isHidden||n.hiddenState!=="hidden_allow_auto_unhide")return!1;break;case wl.HIDDEN_PREVENT_AUTO_UNHIDE:if(!n.isHidden||n.hiddenState!=="hidden_prevent_auto_unhide")return!1}if(this.unreadChannelFilter&&this.unreadChannelFilter===ef.UNREAD_MESSAGE&&n.unreadMessageCount===0)return!1;if(this.publicChannelFilter)switch(this.publicChannelFilter){case bc.PUBLIC:if(!n.isPublic)return!1;break;case bc.PRIVATE:if(n.isPublic)return!1}if(this.superChannelFilter)switch(this.superChannelFilter){case zs.SUPER:if(!n.isSuper)return!1;break;case zs.NON_SUPER:if(n.isSuper)return!1}return this.includeMetaData&&this.metadataKey&&(((r=n.cachedMetaData)===null||r===void 0?void 0:r[this.metadataKey])===void 0||this.metadataValues&&!this.metadataValues.includes(n.cachedMetaData[this.metadataKey])||this.metadataValueStartsWith&&!n.cachedMetaData[this.metadataKey].startsWith(this.metadataValueStartsWith))?!1:!(this.createdAfter&&n.createdAt<this.createdAfter)&&!(this.createdBefore&&n.createdAt>this.createdBefore)},t})(),tW=(function(t){function n(e,r){var i=r.sdkState,a=r.cacheContext,s=t.call(this,e)||this;return s._channels=new Map,s._sdkState=i,s._cacheContext=a,s}return G(n,t),Object.defineProperty(n.prototype,"collection",{get:function(){var e=this._cacheContext.nestdb;return Ue(!!e).throw(ae.databaseError),e.collection(r5)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"localCacheEnabled",{get:function(){return this._cacheContext.localCacheEnabled&&!!this.collection},enumerable:!1,configurable:!0}),n.prototype._serialize=function(e,r){return r===void 0&&(r=0),Z(Z({},e.serialize()),{lastMessageUpdatedAt:e.lastMessage?e.lastMessage.createdAt:0,syncIndex:r})},n.prototype._deserialize=function(e){return ji.of(this._iid).buildGroupChannelFromSerializedData(e)},Object.defineProperty(n.prototype,"channels",{get:function(){return wt([],dt(this._channels.values()),!1)},enumerable:!1,configurable:!0}),n.prototype.isCachedInMemory=function(e){return this._channels.has(e)},n.prototype.filterOffsetChanged=function(e){var r=this;return e.filter((function(i){if(r._channels.has(i.url))return r._channels.get(i.url).messageOffsetTimestamp<i.messageOffsetTimestamp}))},n.prototype.get=function(e){return D(this,void 0,void 0,(function(){var r,i;return O(this,(function(a){switch(a.label){case 0:return this._channels.has(e)?[3,3]:this.localCacheEnabled?[4,this.collection.getByKey(e)]:[3,2];case 1:if(r=a.sent())return i=this._deserialize(r),this._channels.set(e,i),[2,i];a.label=2;case 2:return[2,void 0];case 3:return[2,this._channels.get(e)]}}))}))},n.prototype.fetch=function(e){var r=e.token,i=e.offset,a=i===void 0?0:i,s=e.limit,o=s===void 0?n5:s,u=e.backward,c=u!==void 0&&u,h=e.filter,p=h===void 0?new I5:h,m=e.order,_=m===void 0?ti.LATEST_LAST_MESSAGE:m,b=e.borderlineChannelUrl;return D(this,void 0,void 0,(function(){var C,N,S,M,w,U=this;return O(this,(function(L){switch(L.label){case 0:return this.localCacheEnabled?(C=!!b,N=NC(_),S={where:function(P){if(a>0)return a--,!1;if(r)switch(_){case ti.CHANNEL_NAME_ALPHABETICAL:if(!c&&P.name.localeCompare(r)<0||c&&P.name.localeCompare(r)>0)return!1;break;case ti.CHRONOLOGICAL:if(!c&&P.createdAt>r||c&&P.createdAt<r)return!1;break;case ti.LATEST_LAST_MESSAGE:if(!c&&P.lastMessageUpdatedAt>r||c&&P.lastMessageUpdatedAt<r)return!1}return C&&b&&b===P.url?(C=!1,!1):!C&&p.match(U._deserialize(P),U._sdkState.userId)},index:N,backward:c},[4,this.collection.query(S)]):[3,3];case 1:return[4,L.sent().fetch({limit:o})];case 2:return M=L.sent(),(w=M.map((function(P){return U._deserialize(P)}))).forEach((function(P){!p.includeMetaData&&P.cachedMetaData&&P._clearCachedMetaData(),U._channels.has(P.url)||U._channels.set(P.url,P)})),[2,w];case 3:return[2,[]]}}))}))},n.prototype.upsert=function(e,r){return D(this,void 0,void 0,(function(){var i,a,s,o=this;return O(this,(function(u){switch(u.label){case 0:if(i=[],e.forEach((function(c){if(o._channels.has(c.url)){var h=o._channels.get(c.url);h._pinnedMessagesUpdatedAt<c._pinnedMessagesUpdatedAt&&(h._pinnedMessagesUpdatedAt=c._pinnedMessagesUpdatedAt),h._messageCollectionLastAccessedAt>c._messageCollectionLastAccessedAt&&(c._messageCollectionLastAccessedAt=h._messageCollectionLastAccessedAt),c.cachedMetaData instanceof Map&&c.cachedMetaData.size>0&&r&&(h._updateCachedMetaData(c.cachedMetaData,r).isUpdated||Object.assign(c,{_cachedMetaData:h.cachedMetaData})),h._update(c),i.push(h)}else o._channels.set(c.url,c),i.push(c)})),!this.localCacheEnabled)return[3,2];for(a=[],s=0;s<i.length;s++)a.push(this._serialize(i[s],s));return[4,this.collection.upsertMany(a)];case 1:u.sent(),u.label=2;case 2:return[2,i]}}))}))},n.prototype.remove=function(e){return D(this,void 0,void 0,(function(){var r,i,a,s,o;return O(this,(function(u){switch(u.label){case 0:try{for(r=Fe(e),i=r.next();!i.done;i=r.next())a=i.value,this._channels.delete(a)}catch(c){s={error:c}}finally{try{i&&!i.done&&(o=r.return)&&o.call(r)}finally{if(s)throw s.error}}return this.localCacheEnabled?[4,this.collection.removeIf({where:{url:{"/in":e}}})]:[3,2];case 1:u.sent(),u.label=2;case 2:return[2]}}))}))},n.prototype.clear=function(){return D(this,void 0,void 0,(function(){return O(this,(function(e){switch(e.label){case 0:return this.clearMemoryCache(),this.localCacheEnabled?[4,this.collection.clear()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},n.prototype.clearMemoryCache=function(){this._channels.clear()},n.prototype._setBlockStateOfAllChannels=function(e,r,i){return D(this,void 0,void 0,(function(){var a,s,o,u,c,h,p,m,_,b,C,N,S,M,w,U,L,P,x;return O(this,(function(H){switch(H.label){case 0:if(a=[],e===this._sdkState.userId)try{for(s=Fe(this._channels.values()),o=s.next();!o.done;o=s.next()){m=o.value;try{for(M=void 0,u=Fe(m.members),c=u.next();!c.done;c=u.next())if((C=c.value).userId===r){C.isBlockedByMe=i,a.push(m);break}}catch(F){M={error:F}}finally{try{c&&!c.done&&(w=u.return)&&w.call(u)}finally{if(M)throw M.error}}}}catch(F){N={error:F}}finally{try{o&&!o.done&&(S=s.return)&&S.call(s)}finally{if(N)throw N.error}}else if(r===this._sdkState.userId)try{for(h=Fe(this._channels.values()),p=h.next();!p.done;p=h.next()){m=p.value;try{for(P=void 0,_=Fe(m.members),b=_.next();!b.done;b=_.next())if((C=b.value).userId===e){C.isBlockingMe=i,a.push(m);break}}catch(F){P={error:F}}finally{try{b&&!b.done&&(x=_.return)&&x.call(_)}finally{if(P)throw P.error}}}}catch(F){U={error:F}}finally{try{p&&!p.done&&(L=h.return)&&L.call(h)}finally{if(U)throw U.error}}return a.length>0?[4,this.upsert(a)]:[3,2];case 1:H.sent(),H.label=2;case 2:return[2]}}))}))},n.prototype.block=function(e,r){return D(this,void 0,void 0,(function(){return O(this,(function(i){switch(i.label){case 0:return[4,this._setBlockStateOfAllChannels(e,r,!0)];case 1:return i.sent(),[2]}}))}))},n.prototype.unblock=function(e,r){return D(this,void 0,void 0,(function(){return O(this,(function(i){switch(i.label){case 0:return[4,this._setBlockStateOfAllChannels(e,r,!1)];case 1:return i.sent(),[2]}}))}))},n.prototype.markAsRead=function(e,r){return r===void 0&&(r=wt([],dt(this._channels.keys()),!1)),D(this,void 0,void 0,(function(){var i,a,s,o,u,c,h,p;return O(this,(function(m){switch(m.label){case 0:i=[],m.label=1;case 1:m.trys.push([1,6,7,8]),a=Fe(r),s=a.next(),m.label=2;case 2:return s.done?[3,5]:(o=s.value,[4,this.get(o)]);case 3:(u=m.sent())!=null&&u._updateUnreadMemberState(this._sdkState.userId,e)&&(u._updateUnreadCount(0,0),i.push(u)),m.label=4;case 4:return s=a.next(),[3,2];case 5:return[3,8];case 6:return c=m.sent(),h={error:c},[3,8];case 7:try{s&&!s.done&&(p=a.return)&&p.call(a)}finally{if(h)throw h.error}return[7];case 8:return i.length>0?[4,this.upsert(i)]:[3,10];case 9:m.sent(),m.label=10;case 10:return[2]}}))}))},n})(wi),AC={invitedUserIds:void 0,channelUrl:void 0,coverUrl:void 0,coverImage:void 0,isDistinct:void 0,isSuper:void 0,isBroadcast:void 0,isExclusive:void 0,isPublic:void 0,isDiscoverable:void 0,isStrict:void 0,isEphemeral:void 0,accessCode:void 0,name:void 0,data:void 0,customType:void 0,operatorUserIds:void 0,messageSurvivalSeconds:void 0},BA=function(t){return hn("string",t.invitedUserIds,!0)&&re("string",t.channelUrl,!0)&&re("string",t.coverUrl,!0)&&(ra(t.coverImage)||re("string",t.coverImage,!0))&&re("boolean",t.isDistinct,!0)&&re("boolean",t.isSuper,!0)&&re("boolean",t.isBroadcast,!0)&&re("boolean",t.isExclusive,!0)&&re("boolean",t.isPublic,!0)&&re("boolean",t.isStrict,!0)&&re("boolean",t.isDiscoverable,!0)&&re("boolean",t.isEphemeral,!0)&&re("string",t.accessCode,!0)&&re("string",t.name,!0)&&re("string",t.data,!0)&&re("string",t.customType,!0)&&hn("string",t.operatorUserIds,!0)&&re("number",t.messageSurvivalSeconds,!0)},cS={customTypes:void 0,includeEmpty:!1,includeFrozen:!0,includeMetaData:!0,includeChatNotification:!1},HA=function(t){return hn("string",t.customTypes,!0)&&re("boolean",t.includeEmpty,!0)&&re("boolean",t.includeFrozen,!0)&&re("boolean",t.includeMetaData,!0)&&re("boolean",t.includeChatNotification,!0)},w5={myMemberStateFilter:Hs.ALL},R5=function(t){return dn(Hs,t.myMemberStateFilter)};(function(t){t.GROUP_CHANNEL_UNREAD_MENTION_COUNT="group_channel_unread_mention_count",t.NONSUPER_UNREAD_MENTION_COUNT="non_super_group_channel_unread_mention_count",t.SUPER_UNREAD_MENTION_COUNT="super_group_channel_unread_mention_count",t.GROUP_CHANNEL_UNREAD_MESSAGE_COUNT="group_channel_unread_message_count",t.NONSUPER_UNREAD_MESSAGE_COUNT="non_super_group_channel_unread_message_count",t.SUPER_UNREAD_MESSAGE_COUNT="super_group_channel_unread_message_count",t.GROUP_CHANNEL_INVITATION_COUNT="group_channel_invitation_count",t.NONSUPER_INVITATION_COUNT="non_super_group_channel_invitation_count",t.SUPER_INVITATION_COUNT="super_group_channel_invitation_count"})(qr||(qr={}));var nW={keys:[qr.GROUP_CHANNEL_UNREAD_MENTION_COUNT,qr.NONSUPER_UNREAD_MENTION_COUNT,qr.SUPER_UNREAD_MENTION_COUNT,qr.GROUP_CHANNEL_UNREAD_MESSAGE_COUNT,qr.NONSUPER_UNREAD_MESSAGE_COUNT,qr.SUPER_UNREAD_MESSAGE_COUNT,qr.GROUP_CHANNEL_INVITATION_COUNT,qr.NONSUPER_INVITATION_COUNT,qr.SUPER_INVITATION_COUNT],customTypeFilters:void 0,customTypesFilter:void 0},rW={channelCustomTypesFilter:void 0,superChannelFilter:zs.ALL},iW=function(t){return hn("string",t.channelCustomTypesFilter,!0)&&dn(zs,t.superChannelFilter)},aW={channelUrl:void 0,scheduledStatus:void 0,messageTypeFilter:Ia.ALL};Z({},Se);var MC=function(t){return t.startsWith("EVENT_")||t===Se.SYNC_CHANNEL_CHANGELOGS||t===Se.REFRESH_CHANNEL},mn=(function(t){function n(e){var r=e.channels,i=e.context,a=e.isWebSocketEventComing,s=a!==void 0&&a,o=e.ts,u=t.call(this)||this;return u.channels=r,u.context=i,u.isWebSocketEventComing=s,u.ts=o,u}return G(n,t),n})(gr),nd=(function(t){function n(e){var r=e.channelUrls,i=e.context,a=e.isWebSocketEventComing,s=a!==void 0&&a,o=t.call(this)||this;return o.channelUrls=r,o.context=i,o.isWebSocketEventComing=s,o}return G(n,t),n})(gr),O5=(function(t){function n(e){var r=e.channel,i=t.call(this)||this;return i.channel=r,i}return G(n,t),n})(gr),sW=(function(){function t(n){var e=n.groupChannelCache,r=n.userInfoCache,i=n.messageCache,a=n.unsentMessageCache,s=n.dispatcher,o=this;this._observers=new Map,s.on((function(u){return D(o,void 0,void 0,(function(){var c,h,p,m,_,b,C,N,S,M,w,U,L,P,x,H,F,Q,$=this;return O(this,(function(q){switch(q.label){case 0:if(!(u instanceof mn))return[3,19];if(c=u.channels,L=u.context,P=u.isWebSocketEventComing,h=c.filter((function(X){return X instanceof al})),L.source!==Se.EVENT_CHANNEL_RESET_HISTORY&&L.source!==Se.EVENT_CHANNEL_HIDDEN)return[3,9];q.label=1;case 1:q.trys.push([1,6,7,8]),p=Fe(h),m=p.next(),q.label=2;case 2:return m.done?[3,5]:(S=m.value,[4,i.removeUnderOffset(S.url,S.messageOffsetTimestamp)]);case 3:q.sent(),q.label=4;case 4:return m=p.next(),[3,2];case 5:return[3,8];case 6:return _=q.sent(),x={error:_},[3,8];case 7:try{m&&!m.done&&(H=p.return)&&H.call(p)}finally{if(x)throw x.error}return[7];case 8:return[3,17];case 9:b=e.filterOffsetChanged(h),q.label=10;case 10:q.trys.push([10,15,16,17]),C=Fe(b),N=C.next(),q.label=11;case 11:return N.done?[3,14]:(S=N.value,[4,i.removeUnderOffset(S.url,S.messageOffsetTimestamp)]);case 12:q.sent(),q.label=13;case 13:return N=C.next(),[3,11];case 14:return[3,17];case 15:return M=q.sent(),F={error:M},[3,17];case 16:try{N&&!N.done&&(Q=C.return)&&Q.call(C)}finally{if(F)throw F.error}return[7];case 17:return[4,e.upsert(h,u.ts)];case 18:return w=q.sent(),P||this._broadcastUpdateEvent(w,L),[3,25];case 19:return u instanceof nd?(U=u.channelUrls,L=u.context,P=u.isWebSocketEventComing,[4,e.remove(U)]):[3,22];case 20:return q.sent(),[4,$r((function(){return D($,void 0,void 0,(function(){var X,V,ee,z,ie,se;return O(this,(function(he){switch(he.label){case 0:he.trys.push([0,6,7,8]),X=Fe(U),V=X.next(),he.label=1;case 1:return V.done?[3,5]:(ee=V.value,[4,i.removeMessagesOfChannel(ee)]);case 2:return he.sent(),[4,a.removeMessagesOfChannel(ee)];case 3:he.sent(),he.label=4;case 4:return V=X.next(),[3,1];case 5:return[3,8];case 6:return z=he.sent(),ie={error:z},[3,8];case 7:try{V&&!V.done&&(se=X.return)&&se.call(X)}finally{if(ie)throw ie.error}return[7];case 8:return[2]}}))}))}))];case 21:return q.sent(),P||this._broadcastRemoveEvent(U,L),[3,25];case 22:return u instanceof f5?[4,e.fetch({token:Number.MAX_SAFE_INTEGER,limit:Number.MAX_SAFE_INTEGER})]:[3,25];case 23:return q.sent(),[4,r.fetch({limit:Number.MAX_SAFE_INTEGER})];case 24:q.sent(),q.label=25;case 25:return[2]}}))}))}))}return t.prototype._broadcastUpdateEvent=function(n,e){var r,i;try{for(var a=Fe(this._observers.values()),s=a.next();!s.done;s=a.next()){var o=s.value;o.onUpdate&&o.onUpdate(n,e)}}catch(u){r={error:u}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}},t.prototype._broadcastRemoveEvent=function(n,e){var r,i;try{for(var a=Fe(this._observers.values()),s=a.next();!s.done;s=a.next()){var o=s.value;o.onRemove&&o.onRemove(n,e)}}catch(u){r={error:u}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}},t.prototype.subscribe=function(n,e){this._observers.set(n,e)},t.prototype.unsubscribe=function(n){this._observers.delete(n)},t.prototype.unsubscribeAll=function(){this._observers.clear()},t})(),oW=(function(t){function n(e){var r=e.userId,i=e.ts,a=e.token,s=e.filter,o=e.includeChatNotification,u=o!==void 0&&o,c=t.call(this)||this,h=Z(Z({},cS),s),p=h.customTypes,m=h.includeEmpty,_=h.includeFrozen;return c.method=Ie.GET,c.path="".concat(jn,"/").concat(encodeURIComponent(r),"/my_group_channels/changelogs"),c.params=ze(ht({show_delivery_receipt:!0,show_member:!0,show_read_receipt:!0,change_ts:i||null,token:a,custom_types:p,show_empty:m,show_frozen:_,include_chat_notification:u})),c}return G(n,t),n})(we),lW=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.updatedChannels=r.updated.map((function(a){return new al(e,Object.assign(a,{ts:r.ts}))})),i.deletedChannelUrls=r.deleted,i.hasMore=r.has_more,i.token=r.next,i.ts=r.ts,i}return G(n,t),n})(xe),GA=(function(t){function n(e){var r=e.channelUrl,i=e.isInternalCall,a=e.showLatestMessage,s=t.call(this)||this;return s.method=Ie.GET,s.path="".concat(i?fj:Ya,"/").concat(encodeURIComponent(r)),s.params={show_member:!0,show_read_receipt:!0,show_delivery_receipt:!0,show_latest_message:a!=null&&a,show_conversation:!0},s}return G(n,t),n})(we),VA=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.channel=new al(e,r),i}return G(n,t),n})(xe),Qm={includeEmpty:!1,myMemberStateFilter:Hs.ALL,unreadChannelFilter:ef.ALL,superChannelFilter:zs.ALL,publicChannelFilter:bc.ALL,hiddenChannelFilter:wl.ALL,userIdsFilter:{queryType:_d.AND},order:ti.LATEST_LAST_MESSAGE},uW=(function(t){function n(e){var r=this,i=e.userId,a=e.token,s=e.limit,o=e.order,u=e.includeEmpty,c=e.myMemberStateFilter,h=e.superChannelFilter,p=e.publicChannelFilter,m=e.unreadChannelFilter,_=e.nicknameContainsFilter,b=e.nicknameStartsWithFilter,C=e.nicknameExactMatchFilter,N=e.channelNameContainsFilter,S=e.channelUrlsFilter,M=e.customTypesFilter,w=e.customTypeStartsWithFilter,U=e.hiddenChannelFilter,L=e.metadataOrderKeyFilter,P=e.metadataKey,x=e.metadataValues,H=e.metadataValueStartsWith,F=e.includeFrozen,Q=e.includeMetaData,$=e.searchFilter,q=e.userIdsFilter,X=e.includeChatNotification,V=X!==void 0&&X,ee=e.includeLeftChannel,z=ee!==void 0&&ee,ie=e.createdAfter,se=e.createdBefore;return(r=t.call(this)||this).method=Ie.GET,r.path="".concat(jn,"/").concat(encodeURIComponent(i),"/my_group_channels"),r.params=ze({token:a,limit:s,order:o??Qm.order,show_member:!0,show_read_receipt:!0,show_delivery_receipt:!0,show_empty:u??Qm.includeEmpty,member_state_filter:c??Qm.myMemberStateFilter,super_mode:h??Qm.superChannelFilter,public_mode:p??Qm.publicChannelFilter,unread_filter:m??Qm.unreadChannelFilter,members_nickname_contains:_,members_nickname_startswith:b,members_nickname:C,name_contains:N,channel_urls:S,custom_types:M,custom_type_startswith:w,hidden_mode:U,metadata_order_key:L,metadata_key:P,metadata_values:x,metadata_value_startswith:H,show_frozen:F,show_metadata:Q,include_chat_notification:V,include_left_channel:z,created_after:ie,created_before:se}),$&&$.query&&$.fields&&(r.params.search_query=$.query,r.params.search_fields=$.fields),q&&q.userIds&&q.userIds.length>0&&(q.includeMode?(r.params.members_include_in=q.userIds,r.params.query_type=q.queryType.toUpperCase()):r.params.members_exactly_in=q.userIds),r}return G(n,t),n})(we),cW=(function(t){function n(e,r){var i=t.call(this,e,r)||this;i.channels=[];var a=r.next,s=r.channels,o=r.ts;return i.token=a,s&&s.length>0&&(i.channels=s.map((function(u){return u.ts=o,new al(e,u)}))),i.ts=o??0,i}return G(n,t),n})(xe),dW=(function(t){function n(e){var r=e.userId,i=e.filter,a=t.call(this)||this,s=i.myMemberStateFilter;return a.method=Ie.GET,a.path="".concat(jn,"/").concat(encodeURIComponent(r),"/group_channel_count"),a.params={state:s??Hs.ALL},a}return G(n,t),n})(we),hW=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.groupChannelCount=r.group_channel_count,i}return G(n,t),n})(xe),fW=(function(t){function n(e){var r=e.userId,i=e.filter,a=t.call(this)||this,s=i.keys,o=i.customTypeFilters,u=i.customTypesFilter;return a.method=Ie.GET,a.path="".concat(jn,"/").concat(encodeURIComponent(r),"/unread_item_count"),a.params=ze({item_keys:s,custom_types:u??o}),a}return G(n,t),n})(we),vW=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return typeof r[qr.GROUP_CHANNEL_UNREAD_MENTION_COUNT]=="number"&&(i.groupChannelUnreadMentionCount=r[qr.GROUP_CHANNEL_UNREAD_MENTION_COUNT]),typeof r[qr.GROUP_CHANNEL_UNREAD_MESSAGE_COUNT]=="number"&&(i.groupChannelUnreadMessageCount=r[qr.GROUP_CHANNEL_UNREAD_MESSAGE_COUNT]),typeof r[qr.GROUP_CHANNEL_INVITATION_COUNT]=="number"&&(i.groupChannelInvitationCount=r[qr.GROUP_CHANNEL_INVITATION_COUNT]),typeof r[qr.SUPER_UNREAD_MENTION_COUNT]=="number"&&(i.superGroupChannelUnreadMentionCount=r[qr.SUPER_UNREAD_MENTION_COUNT]),typeof r[qr.SUPER_UNREAD_MESSAGE_COUNT]=="number"&&(i.superGroupChannelUnreadMessageCount=r[qr.SUPER_UNREAD_MESSAGE_COUNT]),typeof r[qr.SUPER_INVITATION_COUNT]=="number"&&(i.superGroupChannelInvitationCount=r[qr.SUPER_INVITATION_COUNT]),typeof r[qr.NONSUPER_UNREAD_MENTION_COUNT]=="number"&&(i.nonSuperGroupChannelUnreadMentionCount=r[qr.NONSUPER_UNREAD_MENTION_COUNT]),typeof r[qr.NONSUPER_UNREAD_MESSAGE_COUNT]=="number"&&(i.nonSuperGroupChannelUnreadMessageCount=r[qr.NONSUPER_UNREAD_MESSAGE_COUNT]),typeof r[qr.NONSUPER_INVITATION_COUNT]=="number"&&(i.nonSuperGroupChannelInvitationCount=r[qr.NONSUPER_INVITATION_COUNT]),i}return G(n,t),n})(xe),pW=(function(t){function n(e){var r=e.userId,i=t.call(this)||this;return i.method=Ie.GET,i.path="".concat(jn,"/").concat(encodeURIComponent(r),"/unread_channel_count"),i}return G(n,t),n})(we),mW=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.unreadCount=r.unread_count,i}return G(n,t),n})(xe),gW=(function(t){function n(e){var r=e.userId,i=e.filter,a=e.includeFeedChannel,s=a!==void 0&&a,o=t.call(this)||this,u=i.channelCustomTypesFilter,c=i.superChannelFilter;return o.method=Ie.GET,o.path="".concat(jn,"/").concat(encodeURIComponent(r),"/unread_message_count"),o.params={super_mode:c??zs.ALL,custom_types:u,include_feed_channel:s},o}return G(n,t),n})(we),_W=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.unreadCount=r.unread_count,i.unreadFeedCount=r.unread_feed_count,i}return G(n,t),n})(xe),yW=(function(t){function n(e){var r=e.channelUrl,i=e.scheduledStatus,a=e.messageTypeFilter,s=t.call(this)||this;return s.method=Ie.GET,s.path="".concat(Bk,"/count"),s.params={channel_url:r,status:bW(i)},a&&(s.params.message_type=a),s}return G(n,t),n})(we),EW=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.count=r.count,i}return G(n,t),n})(xe),bW=function(t){if(!t)return[];var n=[];return t.forEach((function(e){switch(e){case Kh.PENDING:n.push(Jo.PENDING);break;case Kh.SENT:n.push(Jo.IN_QUEUE),n.push(Jo.SENT);break;case Kh.CANCELED:n.push(Jo.CANCELED);break;case Kh.FAILED:n.push(Jo.FAILED)}})),n},CW=(function(t){function n(e){var r=this,i=e.userId,a=e.channelUrl,s=e.coverUrl,o=e.coverImage,u=e.isDistinct,c=e.isSuper,h=e.isBroadcast,p=e.isPublic,m=e.isExclusive,_=e.isDiscoverable,b=e.isStrict,C=e.isEphemeral,N=e.accessCode,S=e.name,M=e.data,w=e.customType,U=e.messageSurvivalSeconds,L=e.invitedUserIds,P=e.operatorUserIds;return(r=t.call(this)||this).method=Ie.POST,r.path=Ya,r.params=ze({user_ids:wt([i],dt(L??[]),!1).filter((function(x,H,F){return H===F.indexOf(x)})),channel_url:a,cover_url:s,cover_file:o,is_distinct:u,is_super:c,is_broadcast:h,is_exclusive:m,is_public:p,is_discoverable:_,strict:b,is_ephemeral:C,access_code:N,name:S,data:M,custom_type:w,operator_ids:P,message_survival_seconds:U}),r}return G(n,t),n})(we),SW=(function(t){function n(e,r){var i,a=this;return(a=t.call(this,e,r)||this).channel=new al(e,r),a.isCreated=(i=r.is_created)===null||i===void 0||i,a}return G(n,t),n})(xe),OD=(function(t){function n(e){var r=e.userId,i=e.channelUrls,a=t.call(this)||this;return a.method=Ie.PUT,a.path="".concat(jn,"/").concat(encodeURIComponent(r),"/mark_as_read_all"),a.params={channel_urls:i},a}return G(n,t),n})(we);(function(t){function n(){return t!==null&&t.apply(this,arguments)||this}G(n,t)})(xe);var TW=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.userId,s=e.accessCode;return(r=t.call(this)||this).method=Ie.PUT,r.path="".concat(Ya,"/").concat(encodeURIComponent(i),"/join"),r.params={user_id:a,access_code:s},r}return G(n,t),n})(we),NW=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.channel=new al(e,r),i}return G(n,t),n})(xe),AW=(function(t){function n(e,r,i){var a=t.call(this,e,r,i)||this,s=i.data,o=s.member_count,u=o===void 0?0:o,c=s.joined_member_count,h=c===void 0?0:c,p=s.users,m=p===void 0?null:p;return a.memberCount=u,a.joinedMemberCount=h,a.members=Array.isArray(m)?m.map((function(_){return new el(e,_)})):[new el(e,i.data)],a}return G(n,t),n})(Od),MW=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.userId,s=e.shouldRemoveOperatorStatus;return(r=t.call(this)||this).method=Ie.PUT,r.path="".concat(Ya,"/").concat(encodeURIComponent(i),"/leave"),r.params={user_id:a,should_remove_operator_status:s},r}return G(n,t),n})(we);(function(t){function n(e,r){return t.call(this,e,r)||this}G(n,t)})(xe);var IW=(function(t){function n(e,r,i){var a=t.call(this,e,r,i)||this,s=i.data,o=s.member_count,u=o===void 0?0:o,c=s.joined_member_count,h=c===void 0?0:c;return a.memberCount=u,a.joinedMemberCount=h,a.member=new el(a._iid,i.data),a}return G(n,t),n})(Od),wW=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.userIds;return(r=t.call(this)||this).method=Ie.POST,r.path="".concat(Ya,"/").concat(encodeURIComponent(i),"/invite"),r.params={user_ids:a},r}return G(n,t),n})(we),RW=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.channel=new al(e,r),i}return G(n,t),n})(xe),OW=(function(t){function n(e,r,i){var a=t.call(this,e,r,i)||this;a.inviter=null;var s=i.data,o=s.member_count,u=o===void 0?0:o,c=s.joined_member_count,h=c===void 0?0:c,p=s.inviter,m=s.invitees,_=m===void 0?[]:m;return a.memberCount=u,a.joinedMemberCount=h,p&&Object.keys(p).length>0&&(a.inviter=new fn(e,p)),a.invitees=_.map((function(b){return new el(e,b)})),a}return G(n,t),n})(Od),DW=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.userId;return(r=t.call(this)||this).method=Ie.PUT,r.path="".concat(Ya,"/").concat(encodeURIComponent(i),"/decline"),r.params={user_id:a},r}return G(n,t),n})(we);(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.channel=new al(e,r),i.channel.myMemberState=ii.NONE,i}G(n,t)})(xe);var UW=(function(t){function n(e,r,i){var a=t.call(this,e,r,i)||this,s=i.data,o=s.member_count,u=s.joined_member_count,c=s.inviter,h=s.invitee;return a.memberCount=o??0,a.joinedMemberCount=u??0,a.inviter=new fn(e,c),a.invitee=new el(e,h),a}return G(n,t),n})(Od),zA={hidePreviousMessages:!1,allowAutoUnhide:!0},xW=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.userId,s=e.hidePreviousMessages,o=e.allowAutoUnhide;return(r=t.call(this)||this).method=Ie.PUT,r.path="".concat(Ya,"/").concat(encodeURIComponent(i),"/hide"),r.params={user_id:a,hide_previous_messages:s??zA.hidePreviousMessages,allow_auto_unhide:o??zA.allowAutoUnhide},r}return G(n,t),n})(we),LW=(function(t){function n(e,r){var i=t.call(this,e,r)||this,a=r.ts_message_offset;return i.messageOffsetTimestamp=a,i}return G(n,t),n})(xe),kW=(function(t){function n(e,r,i){var a,s,o,u=this;return(u=t.call(this,e,"SYEV",i)||this).allowAutoUnhide=null,u.hidePreviousMessages=null,u.messageOffsetTimestamp=null,i.data&&(u.allowAutoUnhide=(a=i.data.allow_auto_unhide)!==null&&a!==void 0?a:null,u.hidePreviousMessages=(s=i.data.hide_previous_messages)!==null&&s!==void 0?s:null),u.messageOffsetTimestamp=(o=i.ts_message_offset)!==null&&o!==void 0?o:null,u}return G(n,t),n})(Rr),PW=(function(t){function n(e){var r=e.channelUrl,i=e.time;return t.call(this,{code:"TPST",ackRequired:!1,payload:{channel_url:r,time:i}})||this}return G(n,t),n})(Ra),FW=(function(t){function n(e,r,i){var a=t.call(this,e,"SYEV",i)||this;return a.user=new fn(e,i.data),a}return G(n,t),n})(Rr),BW=(function(t){function n(e){var r=e.channelUrl,i=e.time;return t.call(this,{code:"TPEN",ackRequired:!1,payload:{channel_url:r,time:i}})||this}return G(n,t),n})(Ra),HW=(function(t){function n(e,r,i){var a=t.call(this,e,"SYEV",i)||this;return a.user=new fn(e,i.data),a}return G(n,t),n})(Rr),GW=(function(t){function n(e){var r=e.channelUrl,i=e.messageId;return t.call(this,{code:"MACK",ackRequired:!1,payload:{channel_url:r,msg_id:i}})||this}return G(n,t),n})(Ra),D5=(function(t){function n(e,r){var i,a,s,o,u,c,h,p,m,_,b,C,N,S,M,w,U,L,P,x,H,F,Q,$=this;return($=t.call(this,e,r)||this).includeEmpty=!1,$.includeFrozen=!0,$.includeMetaData=!0,$.includeChatNotification=!1,$.channelUrlsFilter=null,$.customTypesFilter=null,$.customTypeStartsWithFilter=null,$.nicknameContainsFilter=null,$.nicknameStartsWithFilter=null,$.nicknameExactMatchFilter=null,$.channelNameContainsFilter="",$.myMemberStateFilter=Hs.ALL,$.unreadChannelFilter=ef.ALL,$.superChannelFilter=zs.ALL,$.publicChannelFilter=bc.ALL,$.hiddenChannelFilter=wl.UNHIDDEN,$.searchFilter={fields:[],query:null},$.userIdsFilter={userIds:[],includeMode:!0,queryType:_d.AND},$.metadataKey=null,$.metadataValues=null,$.metadataOrderKeyFilter=null,$.metadataValueStartsWith=null,$.order=ti.LATEST_LAST_MESSAGE,$.includeEmpty=(i=r.includeEmpty)!==null&&i!==void 0&&i,$.includeFrozen=(a=r.includeFrozen)===null||a===void 0||a,$.includeMetaData=(s=r.includeMetaData)===null||s===void 0||s,$.includeChatNotification=(o=r.includeChatNotification)!==null&&o!==void 0&&o,$.channelUrlsFilter=(u=r.channelUrlsFilter)!==null&&u!==void 0?u:null,$.customTypesFilter=(c=r.customTypesFilter)!==null&&c!==void 0?c:null,$.customTypeStartsWithFilter=(h=r.customTypeStartsWithFilter)!==null&&h!==void 0?h:"",$.nicknameContainsFilter=(p=r.nicknameContainsFilter)!==null&&p!==void 0?p:null,$.nicknameStartsWithFilter=(m=r.nicknameStartsWithFilter)!==null&&m!==void 0?m:null,$.nicknameExactMatchFilter=(_=r.nicknameExactMatchFilter)!==null&&_!==void 0?_:null,$.channelNameContainsFilter=(b=r.channelNameContainsFilter)!==null&&b!==void 0?b:"",$.myMemberStateFilter=(C=r.myMemberStateFilter)!==null&&C!==void 0?C:Hs.ALL,$.unreadChannelFilter=(N=r.unreadChannelFilter)!==null&&N!==void 0?N:ef.ALL,$.superChannelFilter=(S=r.superChannelFilter)!==null&&S!==void 0?S:zs.ALL,$.publicChannelFilter=(M=r.publicChannelFilter)!==null&&M!==void 0?M:bc.ALL,$.hiddenChannelFilter=(w=r.hiddenChannelFilter)!==null&&w!==void 0?w:wl.UNHIDDEN,$.searchFilter=(U=r.searchFilter)!==null&&U!==void 0?U:{fields:[],query:null},$.userIdsFilter=(L=r.userIdsFilter)!==null&&L!==void 0?L:{userIds:[],includeMode:!0,queryType:_d.AND},$.metadataKey=(P=r.metadataKey)!==null&&P!==void 0?P:null,$.metadataValues=(x=r.metadataValues)!==null&&x!==void 0?x:null,$.metadataOrderKeyFilter=(H=r.metadataOrderKeyFilter)!==null&&H!==void 0?H:null,$.metadataValueStartsWith=(F=r.metadataValueStartsWith)!==null&&F!==void 0?F:null,$.order=(Q=r.order)!==null&&Q!==void 0?Q:ti.LATEST_LAST_MESSAGE,r.createdAfter&&($.createdAfter=r.createdAfter),r.createdBefore&&($.createdBefore=r.createdBefore),$}return G(n,t),n.prototype._validate=function(){return t.prototype._validate.call(this)&&re("boolean",this.includeEmpty)&&re("boolean",this.includeFrozen)&&re("boolean",this.includeMetaData)&&re("string",this.channelNameContainsFilter)&&hn("string",this.channelUrlsFilter,!0)&&hn("string",this.customTypesFilter,!0)&&re("string",this.customTypeStartsWithFilter)&&re("string",this.nicknameContainsFilter,!0)&&re("string",this.nicknameStartsWithFilter,!0)&&re("string",this.nicknameExactMatchFilter,!0)&&dn(Hs,this.myMemberStateFilter)&&dn(zs,this.superChannelFilter)&&dn(bc,this.publicChannelFilter)&&dn(ef,this.unreadChannelFilter)&&dn(wl,this.hiddenChannelFilter)&&hn(Wy,this.searchFilter.fields)&&re("string",this.searchFilter.query,!0)&&hn("string",this.userIdsFilter.userIds)&&re("boolean",this.userIdsFilter.includeMode)&&dn(_d,this.userIdsFilter.queryType)&&dn(ti,this.order)&&re("string",this.metadataOrderKeyFilter,!0)&&re("string",this.metadataKey,!0)&&hn("string",this.metadataValues,!0)&&re("string",this.metadataValueStartsWith,!0)&&pO(this.createdAfter)&&pO(this.createdBefore)},n.prototype.serialize=function(){return Pg(this)},n.prototype.next=function(){return D(this,void 0,void 0,(function(){var e,r,i;return O(this,(function(a){switch(a.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,[4,ji.of(this._iid).getMyGroupChannels(this._token,ht(Z({},this)),this.limit,Se.REQUEST_CHANNEL,!0)]):[3,2]:[3,5];case 1:return e=a.sent(),r=e.channels,i=e.token,this._token=i,this._hasNext=!!i,this._isLoading=!1,[2,r];case 2:return[2,[]];case 3:throw ae.queryInProgress;case 4:return[3,6];case 5:throw ae.invalidParameters;case 6:return[2]}}))}))},n})(wd),VW=(function(t){function n(e){var r=e.channelUrl,i=e.userId,a=t.call(this)||this;return a.method=Ie.PUT,a.path="".concat(Ya,"/").concat(encodeURIComponent(r),"/messages/mark_as_delivered"),a.params=ze({user_id:i}),a}return G(n,t),n})(we);(function(t){function n(){return t!==null&&t.apply(this,arguments)||this}G(n,t)})(xe);var jA,zW=(function(t){function n(e,r,i){var a=t.call(this,e,"DLVR",i)||this;return a.channelUrl=i.channel_url,a.deliveredStateUpdate=i.updated,a}return G(n,t),n})(Rr),Eu=(function(){function t(n){var e=n.top,r=e===void 0?Number.MAX_SAFE_INTEGER:e,i=n.bottom,a=i===void 0?0:i;this.top=r,this.bottom=a}return t.prototype.includes=function(){for(var n=this,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.every((function(i){return n.top<=i&&i<=n.bottom}))},t.prototype.overlap=function(n){return this.includes(n.top)||this.includes(n.bottom)},t.prototype.intersect=function(){for(var n=this,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.some((function(i){return n.top<=i&&i<=n.bottom}))},t.prototype.extends=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];this.top=Math.min.apply(Math,wt([this.top],dt(n),!1)),this.bottom=Math.max.apply(Math,wt([this.bottom],dt(n),!1))},t})(),du={},U5=function(t,n){return"sendbird:".concat(t,"@groupchannel/").concat(n,"/message/sync.meta")},jW=(function(){function t(n){var e=n._iid,r=n.channel,i=n.limit,a=i===void 0?100:i,s=this;this.ref=0,this._iid=e,this._channel=r,this._limit=a,this._prevSyncLoopCount=0;var o=te.of(this._iid),u=o.sdkState,c=o.cacheContext,h=o.dispatcher,p=o.logger,m=o.statManager,_=o.messageBackgroundSyncThrottleController;this._metadataKey=U5(u.userId,r.url);var b,C,N=(b=u.userId,C=r.url,"sendbird:".concat(b,"@groupchannel/").concat(C,"/message/sync"));this._prevSync=new Td(N,(function(S){return D(s,void 0,void 0,(function(){var M=this;return O(this,(function(w){switch(w.label){case 0:return[4,_.run("message-background-sync-".concat(r.url,"-prev"),(function(){return D(M,void 0,void 0,(function(){var U,L,P,x,H,F,Q,$,q,X,V,ee;return O(this,(function(z){switch(z.label){case 0:return U={hasNext:!0,nextToken:0},this._prevSyncLoopCount++,[4,this.loadMetadata()];case 1:if(z.sent(),p.debug("message background prev sync from",(F=this._metadata)===null||F===void 0?void 0:F.range.top),(Q=this._metadata)===null||Q===void 0?void 0:Q.previousComplete)return[3,10];z.label=2;case 2:return z.trys.push([2,5,8,9]),[4,Ki.of(this._iid)._getMessagesByTimestampForCollection(this._channel.url,this._channel.channelType,!((q=($=this._metadata)===null||$===void 0?void 0:$.range)===null||q===void 0)&&q.top?this._metadata.range.top:S,{prevResultSize:this._limit,nextResultSize:0,replyType:Yi.ALL,includeReactions:!0,includeMetaArray:!0,includeParentMessageInfo:!0,includeThreadInfo:!0,isInclusive:!0},Se.SYNC_MESSAGE_BACKGROUND,!1,!1,Nl.INTERNAL_BACKSYNC)];case 3:return(L=z.sent().messages).length>0&&(P=L.map((function(ie){return ie.createdAt})),!((X=this._metadata)===null||X===void 0)&&(H=X.range).intersect.apply(H,wt([],dt(P),!1))?this.extendRange(L):this._metadata={range:new Eu({top:Math.min.apply(Math,wt([],dt(P),!1)),bottom:Math.max.apply(Math,wt([],dt(P),!1))}),previousComplete:!1}),U.hasNext=L.length>=this._limit&&this._prevSyncLoopCount<1,this._metadata&&(U.nextToken=this._metadata.range.top,this._metadata.previousComplete=L.length<this._limit),p.debug("message background prev sync progress",U),[4,this.saveMetadata()];case 4:return z.sent(),[3,9];case 5:return x=z.sent(),p.debug("message background prev sync error",x),x instanceof ae&&x.isInvalidTokenError?[4,this.clearMetadata()]:[3,7];case 6:z.sent(),z.label=7;case 7:throw x;case 8:return m.put(new Ar({type:fr.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:r.url,measured_on:"back_sync",event:"cache_fetch",max_db_size:(ee=(V=c.localCacheConfig)===null||V===void 0?void 0:V.maxSize)!==null&&ee!==void 0?ee:0,use_local_cache:c.localCacheEnabled,starting_point:0,message_init_policy:""}})),[7];case 9:return[3,11];case 10:U.hasNext=!1,z.label=11;case 11:return[2,U]}}))}))}))];case 1:return[2,w.sent()]}}))}))})),this._nextSync=new Td(N,(function(S){return D(s,void 0,void 0,(function(){var M=this;return O(this,(function(w){switch(w.label){case 0:return[4,_.run("message-background-sync-".concat(r.url,"-next"),(function(){return D(M,void 0,void 0,(function(){var U,L,P,x,H,F,Q,$,q,X,V;return O(this,(function(ee){switch(ee.label){case 0:return U={hasNext:!0,nextToken:0},[4,this.loadMetadata()];case 1:ee.sent(),p.debug("message background next sync from",(F=this._metadata)===null||F===void 0?void 0:F.range.bottom),ee.label=2;case 2:return ee.trys.push([2,5,6,7]),[4,Ki.of(this._iid)._getMessagesByTimestampForCollection(this._channel.url,this._channel.channelType,!(($=(Q=this._metadata)===null||Q===void 0?void 0:Q.range)===null||$===void 0)&&$.bottom?this._metadata.range.bottom:S,{prevResultSize:0,nextResultSize:this._limit,replyType:Yi.ALL,includeReactions:!0,includeMetaArray:!0,includeParentMessageInfo:!0,includeThreadInfo:!0,isInclusive:!0},Se.SYNC_MESSAGE_BACKGROUND,!1,!1,Nl.INTERNAL_BACKSYNC)];case 3:return(L=ee.sent().messages).length>0&&(P=L.map((function(z){return z.createdAt})),!((q=this._metadata)===null||q===void 0)&&(H=q.range).intersect.apply(H,wt([],dt(P),!1))?this.extendRange(L):this._metadata={range:new Eu({top:Math.min.apply(Math,wt([],dt(P),!1)),bottom:Math.max.apply(Math,wt([],dt(P),!1))}),previousComplete:!1}),U.hasNext=L.length>=this._limit,this._metadata&&(U.nextToken=this._metadata.range.bottom),p.debug("message background next sync progress",U),[4,this.saveMetadata()];case 4:return ee.sent(),[3,7];case 5:throw x=ee.sent(),p.debug("message background next sync error",x),x;case 6:return m.put(new Ar({type:fr.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:r.url,measured_on:"back_sync",event:"cache_fetch",max_db_size:(V=(X=c.localCacheConfig)===null||X===void 0?void 0:X.maxSize)!==null&&V!==void 0?V:0,use_local_cache:c.localCacheEnabled,starting_point:0,message_init_policy:""}})),[7];case 7:return[2,U]}}))}))}))];case 1:return[2,w.sent()]}}))}))})),this._connectionEventContext=h.on((function(S){S instanceof Ao&&(S.stateType===zn.CONNECTED?s.resume():s.pause())}))}return t.of=function(n,e){return du[n]||(du[n]={}),du[n][e.url]||(du[n][e.url]=new t({_iid:n,channel:e})),du[n][e.url].ref++,du[n][e.url]},t.clear=function(n,e){du[n]&&du[n][e]&&(du[n][e].close(),delete du[n])},Object.defineProperty(t.prototype,"range",{get:function(){var n,e;return(e=(n=this._metadata)===null||n===void 0?void 0:n.range)!==null&&e!==void 0?e:new Eu({})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"previousComplete",{get:function(){var n;return!!(!((n=this._metadata)===null||n===void 0)&&n.previousComplete)},enumerable:!1,configurable:!0}),t.prototype.isWrappingMessages=function(n){var e;return(e=this.range)===null||e===void 0?void 0:e.includes.apply(e,wt([],dt(n.map((function(r){return r.createdAt}))),!1))},t.prototype.extendRange=function(n){var e;this._metadata&&(e=this._metadata.range).extends.apply(e,wt([],dt(n.map((function(r){return r.createdAt}))),!1))},t.prototype.loadMetadata=function(){return D(this,void 0,void 0,(function(){var n;return O(this,(function(e){switch(e.label){case 0:return this._metadata?[3,2]:[4,te.of(this._iid).cacheContext.preference.get(this._metadataKey)];case 1:n=e.sent(),this._metadata=n?{range:new Eu(n.range),previousComplete:n.previousComplete}:{range:new Eu({}),previousComplete:!1},e.label=2;case 2:return[2,this._metadata]}}))}))},t.prototype.saveMetadata=function(){return D(this,void 0,void 0,(function(){return O(this,(function(n){switch(n.label){case 0:return this._metadata?[4,te.of(this._iid).cacheContext.preference.set(this._metadataKey,this._metadata)]:[3,2];case 1:return n.sent(),[2,!0];case 2:return[2,!1]}}))}))},t.prototype.clearMetadata=function(){return D(this,void 0,void 0,(function(){return O(this,(function(n){switch(n.label){case 0:return[4,te.of(this._iid).cacheContext.preference.remove(this._metadataKey)];case 1:return n.sent(),this._metadata=void 0,[2]}}))}))},t.prototype.resume=function(n){var e,r,i,a;n===void 0&&(n=Date.now());var s=te.of(this._iid),o=s.logger,u=s.sessionManager;s.cacheContext.localCacheEnabled&&u.session.hasSession&&(o.debug("message background sync resume()"),this._prevSyncLoopCount=0,this._metadata&&this._metadata.previousComplete||this._prevSync.start((r=(e=this._metadata)===null||e===void 0?void 0:e.range.top)!==null&&r!==void 0?r:n),this._nextSync.start((a=(i=this._metadata)===null||i===void 0?void 0:i.range.bottom)!==null&&a!==void 0?a:n))},t.prototype.pause=function(){te.of(this._iid).logger.debug("message background sync stop()"),this._prevSync.stop(),this._nextSync.stop()},t.prototype.close=function(){this.ref--,this.ref<=0&&(this.ref=0,this.pause(),this._connectionEventContext.close(),delete du[this._iid][this._channel.url])},t})(),qW=(function(){function t(n){var e=n._iid,r=n.cacheContext,i=n.groupChannelCache,a=n.messageCache,s=n.unsentMessageCache,o=n.activeChannelCount,u=o===void 0?2e3:o;this._iid=e,this._cacheContext=r,this._groupChannelCache=i,this._messageCache=a,this._unsentMessageCache=s,this.activeChannelCount=u}return t.prototype.removeChannelMessages=function(n){return D(this,void 0,void 0,(function(){return O(this,(function(e){switch(e.label){case 0:return[4,this._messageCache.removeMessagesOfChannel(n)];case 1:return e.sent(),[4,this._unsentMessageCache.removeMessagesOfChannel(n)];case 2:return e.sent(),[2]}}))}))},Object.defineProperty(t.prototype,"channelRotationEnabled",{get:function(){var n,e,r=te.of(this._iid).appInfo;return(e=(n=r?.channelRotationInfo)===null||n===void 0?void 0:n.enabled)!==null&&e!==void 0&&e},enumerable:!1,configurable:!0}),t.prototype.removeChannelsByRotation=function(){return D(this,void 0,void 0,(function(){var n,e,r,i,a,s,o,u,c=this;return O(this,(function(h){switch(h.label){case 0:return n=te.of(this._iid),e=n.appInfo,r=n.connectedAt,e?.channelRotationInfo&&e.channelRotationInfo.enabled?(i=e.channelRotationInfo,a=i.orderBy,s=i.excludeRecentHours,o=i.bufferRatio,a==="LAST_MESSAGE_TS_EXCLUDING_RECENT_JOINS"?[3,1]:[3,5]):[3,5];case 1:return[4,this._groupChannelCache.fetch({token:0,order:ti.LATEST_LAST_MESSAGE,offset:this.activeChannelCount*o,limit:Number.MAX_SAFE_INTEGER})];case 2:return u=h.sent(),typeof s=="number"&&(u=u.filter((function(p){return 1e3*p.joinedAt<r-3600*s*1e3}))),[4,this._groupChannelCache.remove(u.map((function(p){return p.url})))];case 3:return h.sent(),[4,Promise.all(u.map((function(p){return c.removeChannelMessages(p.url)})))];case 4:return h.sent(),[3,5];case 5:return[2]}}))}))},t})(),Rv={},ji=(function(t){function n(e,r){var i,a=this;return(a=t.call(this,e,Z(Z({},r),{channelType:yn.GROUP}))||this)._leftChannels=new Map,a._markAsReadAllLastSentAt=0,a._forceDisableMack=(i=r.forceDisableMack)!==null&&i!==void 0&&i,a._groupChannelHandlers=new Map,a._groupChannelCache=new tW(a._iid,{sdkState:r.sdkState,cacheContext:r.cacheContext}),a._groupChannelRotationManager=new qW({_iid:a._iid,cacheContext:r.cacheContext,groupChannelCache:a._groupChannelCache,messageCache:a._messageCache,unsentMessageCache:a._unsentMessageCache}),a._userInfoCache=new PA(a._iid,{sdkState:r.sdkState,cacheContext:r.cacheContext}),a._groupChannelBroadcast=new sW({dispatcher:r.dispatcher,groupChannelCache:a._groupChannelCache,userInfoCache:a._userInfoCache,messageCache:ap.of(a._iid),unsentMessageCache:yp.of(a._iid)}),setInterval((function(){var s,o,u=function(p){p.invalidateTypingStatus()&&(a._dispatcher.dispatch(new mn({channels:[p],context:{source:Se.EVENT_CHANNEL_TYPING_STATUS_UPDATE}})),a._groupChannelHandlers.forEach((function(m){m.onTypingStatusUpdated&&m.onTypingStatusUpdated(p)})))};try{for(var c=Fe(a._groupChannelCache.channels),h=c.next();!h.done;h=c.next())u(h.value)}catch(p){s={error:p}}finally{try{h&&!h.done&&(o=c.return)&&o.call(c)}finally{if(s)throw s.error}}}),1e3),a._dispatcher.on((function(s){if(s instanceof Rr)a._handleEvent(s).catch((function(h){if($a(h)&&a._sdkState.appState==="foreground")throw h}));else if(s instanceof h5)D(a,void 0,void 0,(function(){var h,p;return O(this,(function(m){switch(m.label){case 0:return h=s.message,[4,this.getChannelFromCache(h.channelUrl)];case 1:return(p=m.sent())&&!p.isFrozen?[3,3]:[4,this.getChannelWithoutCache(h.channelUrl,!0)];case 2:p=m.sent(),m.label=3;case 3:return p.isFrozen||(h instanceof Ma?p._autoResendUserMessage(h):h instanceof Ai&&p._autoResendFileMessage(h)),[2]}}))}));else if(s instanceof v5)a.reduceDBSize();else if(s instanceof g5){var o=s.appConfigsInfo,u=s.configTs,c=o.message_purge_offset;c&&a._messageDataRetention(c),a._dispatcher.dispatch(new p5({configTs:u}))}else s instanceof HP?D(a,void 0,void 0,(function(){var h,p,m,_,b,C=this;return O(this,(function(N){switch(N.label){case 0:return h=s.channelUrl,p=s.channelType,m=s.parentMessage,_=new d5(this._iid,{channel_type:yn.GROUP,channel_url:h,parent_message_id:m.messageId,thread_info:rS.payloadify(m.threadInfo)}),p!==yn.GROUP?[3,2]:[4,this.getChannel(h,!0)];case 1:b=N.sent(),gt((function(){return D(C,void 0,void 0,(function(){var S,M,w,U,L;return O(this,(function(P){try{for(S=Fe(this._groupChannelHandlers.values()),M=S.next();!M.done;M=S.next())(w=M.value).onThreadInfoUpdated&&w.onThreadInfoUpdated(b,_)}catch(x){U={error:x}}finally{try{M&&!M.done&&(L=S.return)&&L.call(S)}finally{if(U)throw U.error}}return[2]}))}))})),N.label=2;case 2:return[2]}}))})):s instanceof O5?D(a,void 0,void 0,(function(){var h;return O(this,(function(p){switch(p.label){case 0:return h=s.channel,[4,this._groupChannelCache.upsert([h])];case 1:return p.sent(),[2]}}))})):s instanceof hP&&D(a,void 0,void 0,(function(){return O(this,(function(h){switch(h.label){case 0:return[4,this._expandMessageChunk(s)];case 1:return h.sent(),[2]}}))}))})),Rv[e]||(Rv[e]=a),a}return G(n,t),Object.defineProperty(n.prototype,"_messageCache",{get:function(){return ap.of(this._iid)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_unsentMessageCache",{get:function(){return yp.of(this._iid)},enumerable:!1,configurable:!0}),n.of=function(e){return Rv[e]||(Rv[e]=new n(e,te.of(e))),Rv[e]},n.clear=function(e){Rv[e]&&delete Rv[e]},Object.defineProperty(n.prototype,"handlers",{get:function(){return wt([],dt(this._groupChannelHandlers.values()),!1)},enumerable:!1,configurable:!0}),n.prototype.buildGroupChannelFromSerializedData=function(e){var r=gd(e);return new al(this._iid,al.payloadify(r))},n.prototype.buildGroupChannelListQueryFromSerializedData=function(e){var r=gd(e);return new D5(this._iid,r)},n.prototype.buildMemberFromSerializedData=function(e){var r=gd(e);return new el(this._iid,el.payloadify(r))},n.prototype.getChannelFromCache=function(e){var r;return D(this,void 0,void 0,(function(){return O(this,(function(i){switch(i.label){case 0:return[4,this._groupChannelCache.get(e)];case 1:return[2,(r=i.sent())!==null&&r!==void 0?r:null]}}))}))},n.prototype.getChannelsFromCache=function(e,r,i,a,s){return D(this,void 0,void 0,(function(){return O(this,(function(o){switch(o.label){case 0:return[4,this._groupChannelCache.fetch({token:e,filter:r,order:i,limit:a,borderlineChannelUrl:s})];case 1:return[2,o.sent()]}}))}))},n.prototype.upsertChannelsToCache=function(e){return D(this,void 0,void 0,(function(){return O(this,(function(r){switch(r.label){case 0:return[4,this._groupChannelCache.upsert(e)];case 1:return[2,r.sent()]}}))}))},n.prototype.removeChannelsFromCache=function(e){return D(this,void 0,void 0,(function(){return O(this,(function(r){switch(r.label){case 0:return[4,this._groupChannelCache.remove(e)];case 1:return r.sent(),[2]}}))}))},n.prototype.clearChannelsFromCache=function(){return D(this,void 0,void 0,(function(){return O(this,(function(e){switch(e.label){case 0:return[4,this._groupChannelCache.clear()];case 1:return e.sent(),[2]}}))}))},n.prototype.removeChannelsByRotation=function(){return D(this,void 0,void 0,(function(){return O(this,(function(e){switch(e.label){case 0:return[4,this._groupChannelRotationManager.removeChannelsByRotation()];case 1:return e.sent(),[2]}}))}))},n.prototype.reduceDBSize=function(){return D(this,void 0,void 0,(function(){var e,r,i,a,s,o,u,c,h,p,m,_,b,C,N;return O(this,(function(S){switch(S.label){case 0:return e=ap.of(this._iid),r=te.of(this._iid).cacheContext,i=r.localCacheConfig,a=r.nestdb,r.localCacheEnabled&&a&&a.state==yu.OPENED?(s=1024*i.maxSize*1024,[4,a.estimateUsage()]):[2];case 1:if((o=S.sent())<s)return[2];u=[],c=this._groupChannelCache.channels,h={},b=0,S.label=2;case 2:return b<c.length?[4,this.getMessagesFromCache(c[b].url,0,"prev",new af)]:[3,5];case 3:p=S.sent(),h[c[b].url]=JSON.stringify(p).length,m=new lj({channel:c[b],cachedMessageCount:p.length}),u.push(m),S.label=4;case 4:return b++,[3,2];case 5:_=u.sort(i.clearOrderComparator),b=0,S.label=6;case 6:return b<_.length?[4,e.removeMessagesOfChannel(_[b].channel.url)]:[3,10];case 7:return S.sent(),[4,e._getGroupChannelPreferenceSize(_[b].channel.url)];case 8:if(C=S.sent(),N=h[_[b].channel.url]+C,(o-=N)<s)return[3,10];S.label=9;case 9:return b++,[3,6];case 10:return[4,PA.of(this._iid).clear()];case 11:return S.sent(),[2]}}))}))},n.prototype._messageDataRetention=function(e){var r;return D(this,void 0,void 0,(function(){var i,a,s,o,u,c,h,p,m,_,b=this;return O(this,(function(C){switch(C.label){case 0:i=[],a=ap.of(this._iid),s=function(N){var S,M;return O(this,(function(w){switch(w.label){case 0:return S=N.customType,M=(r=e[S])!==null&&r!==void 0?r:e.global,[4,a.removeUnderOffset(N.url,M,!0)];case 1:return w.sent(),N.lastMessage&&N.lastMessage.createdAt<=M&&(N.lastMessage=null,i.push(N),gt((function(){return D(b,void 0,void 0,(function(){var U,L,P,x,H;return O(this,(function(F){try{for(U=Fe(this._groupChannelHandlers.values()),L=U.next();!L.done;L=U.next())(P=L.value).onChannelChanged&&P.onChannelChanged(N)}catch(Q){x={error:Q}}finally{try{L&&!L.done&&(H=U.return)&&H.call(U)}finally{if(x)throw x.error}}return[2]}))}))}))),o._dispatcher.dispatch(new TP({channelUrl:N.url,messageDeletionTimestamp:M,source:Se.EVENT_MESSAGE_OFFSET_UPDATED})),[2]}}))},o=this,C.label=1;case 1:C.trys.push([1,6,7,8]),u=Fe(this._groupChannelCache.channels),c=u.next(),C.label=2;case 2:return c.done?[3,5]:(h=c.value,[5,s(h)]);case 3:C.sent(),C.label=4;case 4:return c=u.next(),[3,2];case 5:return[3,8];case 6:return p=C.sent(),m={error:p},[3,8];case 7:try{c&&!c.done&&(_=u.return)&&_.call(u)}finally{if(m)throw m.error}return[7];case 8:return i.length>0&&this._dispatcher.dispatch(new mn({channels:i,context:{source:Se.EVENT_CHANNEL_UPDATED}})),[2]}}))}))},n.prototype._expandMessageChunk=function(e){var r;return D(this,void 0,void 0,(function(){var i,a,s,o,u,c,h,p;return O(this,(function(m){switch(m.label){case 0:return i=te.of(this._iid).cacheContext,a=e.previousMessageId,s=e.messageCreatedAt,o=e.channelUrl,i.localCacheEnabled&&((r=i.nestdb)===null||r===void 0?void 0:r.state)===yu.OPENED&&a?[4,this.getMessageFromCache(a)]:[2];case 1:return u=m.sent(),c=U5(this._sdkState.userId,o),[4,i.preference.get(c)];case 2:return(h=m.sent())?[3,5]:u?(p={range:new Eu({top:u.createdAt,bottom:s}),previousComplete:!1},[4,i.preference.set(c,p)]):[3,4];case 3:m.sent(),m.label=4;case 4:return[3,7];case 5:return u&&h.range.includes(u.createdAt)?(h.range.extends(u.createdAt,s),[4,i.preference.set(c,h)]):[3,7];case 6:m.sent(),m.label=7;case 7:return[2]}}))}))},n.prototype._isSuperGroupMackDisabled=function(e){var r=te.of(this._iid).appInfo;return!(!e.isSuper||e.isBroadcast||!r?.disableSuperGroupMack)},n.prototype._getCachedUserInfo=function(e){return this._userInfoCache.getUserInfoFromCache(e)},n.prototype._upsertCachedUserInfo=function(e,r){te.of(this._iid).useMemberInfoInMessage&&this._userInfoCache.upsert(e,r)},n.prototype._handleEvent=function(e){var r,i;return D(this,void 0,void 0,(function(){var a,s,o,u,c,h,p,m,_,b,C,N,S,M,w,U,L,P,x,H,F,Q,$,q,X,V,ee,z,ie,se,he,pe,K,ce,me,Le,ge,Ee,Ye,tt,yt,Ht,zt,Xt,Jt,Mt,jt,en,Dt,ln,Yt,st,ft,un,vt,_t,Pt,Et,Ft,vn,Je,Nn,An,Mn,Zt,Gt,xt,Lt,Cn,ir,It,Rt,Ct,nt,Te,it,St,bt,gn,ct,En,ur,Xn,ar,xn,Pn,cr,at,Nt,pt,At,Tt,We,tn,Vn,qn,In,mt,oe,Pe,ut,rn,wn,an,_r,Cr,Ot,on,kt,pn,Xr,Oi,Di,Zr,Wi,di,Xs,Mc,Pl,Mo,ol,wu,aa,Zs,Fl,Ic,Io,Ru,Bl,Ua,Qa,Ou,ll,Js,ul,cl,dl,xa,Hl,Gl,da,wo,kd,Pd,yf,Jr,_s,wc,Vl,ys,Du,Sr,Ir,Rc,Uu,Ef,sa,hl,xu,zl,bf,_i,jl,Xa,ql,Oc,ba,Cf,Fd,Dc,Bd,Sf,Jn=this;return O(this,(function($t){switch($t.label){case 0:switch($t.trys.push([0,88,,89]),e.code){case"MESG":case"FILE":case"ADMM":case"BRDM":return[3,1];case"MEDI":case"FEDI":case"AEDI":return[3,4];case"DELM":return[3,7];case"READ":return[3,10];case"DLVR":return[3,13];case"MRCT":return[3,15];case"MTHD":return[3,27];case"MCNT":return[3,31];case"PEDI":return[3,40];case"VOTE":return[3,43];case"SYEV":return[3,46];case"USEV":return[3,86]}return[3,87];case 1:return _=null,e.code==="MESG"?_=e.as(xw):e.code==="FILE"?_=e.as(ww):e.code!=="ADMM"&&e.code!="BRDM"||(_=e.as(b5)),_?(a=_.message,s=_.isMentioned,o=_.forceUpdateLastMessage,a.channelType!==yn.GROUP?[3,3]:(Ee=this._groupChannelCache.isCachedInMemory(a.channelUrl),V=a instanceof ai&&a.sender.userId===this._sdkState.userId,[4,this.getChannel(a.channelUrl,!0)])):[3,3];case 2:if(u=$t.sent(),c=te.of(this._iid),S=c.useMemberInfoInMessage,Jr=c.requestDeduplicator,this._forceDisableMack||this._isSuperGroupMackDisabled(u)||a instanceof mp||V||$r((function(){return D(Jn,void 0,void 0,(function(){var Re;return O(this,(function(_e){switch(_e.label){case 0:return Re=new GW(a),[4,this._requestQueue.send(Re)];case 1:return _e.sent(),[2]}}))}))})),a instanceof ai){h=a.sender,u.isSuper&&this._upsertCachedUserInfo(h,a.createdAt);try{for(p=Fe(u.members),m=p.next();!m.done;m=p.next())if((Zr=m.value).userId===a.sender.userId){S&&(Zr.nickname=a.sender.nickname,Zr.plainProfileUrl=a.sender.plainProfileUrl,Zr.metaData=a.sender.metaData,Zr.isBlockedByMe=a.sender.isBlockedByMe);break}}catch(Re){Ir={error:Re}}finally{try{m&&!m.done&&(Rc=p.return)&&Rc.call(p)}finally{if(Ir)throw Ir.error}}S&&s&&((r=a.mentionedUsers)===null||r===void 0||r.forEach((function(Re){var _e,nn;try{for(var Vt=Fe(u.members),Qt=Vt.next();!Qt.done;Qt=Vt.next()){var Or=Qt.value;if(Re.userId===Or.userId){Or.nickname=Re.nickname,Or.plainProfileUrl=Re.plainProfileUrl,Or.metaData=Re.metaData;break}}}catch(er){_e={error:er}}finally{try{Qt&&!Qt.done&&(nn=Vt.return)&&nn.call(Vt)}finally{if(_e)throw _e.error}}}))),V&&(P=this._sessionManager.currentUser)&&(P.nickname=a.sender.nickname,P.plainProfileUrl=a.sender.plainProfileUrl,P.metaData=a.sender.metaData)}a.silent&&!V||(u.isEphemeral||Ee)&&(u._updateLastMessage(a),V||u._shouldUpdateUnreadCountWith(a)&&u._updateUnreadCount(u.unreadMessageCount+1,u.unreadMentionCount+(s?1:0))),o&&u._updateLastMessage(a),Jr.updatePendingResponse(u,Date.now()),this._dispatcher.dispatch(new mn({channels:[u],context:{source:Se.EVENT_MESSAGE_RECEIVED}})),a.silent&&!V||gt((function(){return D(Jn,void 0,void 0,(function(){var Re,_e,nn,Vt,Qt;return O(this,(function(Or){try{for(Re=Fe(this._groupChannelHandlers.values()),_e=Re.next();!_e.done;_e=Re.next())(nn=_e.value).onChannelChanged&&nn.onChannelChanged(u)}catch(er){Vt={error:er}}finally{try{_e&&!_e.done&&(Qt=Re.return)&&Qt.call(Re)}finally{if(Vt)throw Vt.error}}return[2]}))}))})),this._dispatcher.dispatch(new Br({messages:[a],source:Se.EVENT_MESSAGE_RECEIVED})),gt((function(){return D(Jn,void 0,void 0,(function(){var Re,_e,nn,Vt,Qt;return O(this,(function(Or){try{for(Re=Fe(this._groupChannelHandlers.values()),_e=Re.next();!_e.done;_e=Re.next())(nn=_e.value).onMessageReceived&&nn.onMessageReceived(u,a),s&&nn.onMentionReceived&&nn.onMentionReceived(u,a)}catch(er){Vt={error:er}}finally{try{_e&&!_e.done&&(Qt=Re.return)&&Qt.call(Re)}finally{if(Vt)throw Vt.error}}return[2]}))}))})),$t.label=3;case 3:return[3,87];case 4:return _=null,e.code==="MEDI"?_=e.as(iS):e.code==="FEDI"?_=e.as(aS):e.code==="AEDI"&&(_=e.as(C5)),_?(b=_.message,C=_.mentionCountChange,N=te.of(this._iid),S=N.useMemberInfoInMessage,Jr=N.requestDeduplicator,b.threadInfo&&(b.threadInfo.unreadReplyCount=void 0),b.channelType!==yn.GROUP?[3,6]:(Ee=this._groupChannelCache.isCachedInMemory(b.channelUrl),[4,this.getChannel(b.channelUrl,!0)])):[3,6];case 5:if(M=$t.sent(),V=!1,b instanceof ai){V=b.sender.userId===this._sdkState.userId,M.isSuper&&this._upsertCachedUserInfo(b.sender,b.updatedAt);try{for(w=Fe(M.members),U=w.next();!U.done;U=w.next())if((Zr=U.value).userId===b.sender.userId){S&&(Zr.nickname=b.sender.nickname,Zr.plainProfileUrl=b.sender.plainProfileUrl,Zr.metaData=b.sender.metaData,Zr.isBlockedByMe=b.sender.isBlockedByMe);break}}catch(Re){Uu={error:Re}}finally{try{U&&!U.done&&(Ef=w.return)&&Ef.call(w)}finally{if(Uu)throw Uu.error}}}ce=!1,V?(L=b.sender,(P=this._sessionManager.currentUser)&&(P.nickname=L.nickname,P.plainProfileUrl=L.plainProfileUrl,P.metaData=L.metaData)):M.isReadMessage(b)||C!==0&&!b.silent&&Ee&&(M._updateUnreadCount(M.unreadMessageCount,M.unreadMentionCount+C),ce=!0),M._updateLastMessage(b)?ce=!0:!((i=M.lastMessage)===null||i===void 0)&&i.isIdentical(b)&&(Ee?M._updateLastMessage(b)&&(ce=!0):ce=!0),x=!1,M.lastPinnedMessage&&M.lastPinnedMessage.messageId===b.messageId&&(M.lastPinnedMessage=b,ce=!0,x=!0),ce&&(Jr.updatePendingResponse(M,Date.now()),this._dispatcher.dispatch(new mn({channels:[M],context:{source:x?Se.EVENT_PINNED_MESSAGE_UPDATED:Se.EVENT_MESSAGE_UPDATED}})),b.silent&&!V||gt((function(){return D(Jn,void 0,void 0,(function(){var Re,_e,nn,Vt,Qt;return O(this,(function(Or){try{for(Re=Fe(this._groupChannelHandlers.values()),_e=Re.next();!_e.done;_e=Re.next())(nn=_e.value).onChannelChanged&&nn.onChannelChanged(M)}catch(er){Vt={error:er}}finally{try{_e&&!_e.done&&(Qt=Re.return)&&Qt.call(Re)}finally{if(Vt)throw Vt.error}}return[2]}))}))})),x&&gt((function(){return D(Jn,void 0,void 0,(function(){var Re,_e,nn,Vt,Qt;return O(this,(function(Or){try{for(Re=Fe(this._groupChannelHandlers.values()),_e=Re.next();!_e.done;_e=Re.next())(nn=_e.value).onPinnedMessageUpdated&&nn.onPinnedMessageUpdated(M)}catch(er){Vt={error:er}}finally{try{_e&&!_e.done&&(Qt=Re.return)&&Qt.call(Re)}finally{if(Vt)throw Vt.error}}return[2]}))}))}))),this._dispatcher.dispatch(new Br({messages:[b],source:Se.EVENT_MESSAGE_UPDATED})),gt((function(){return D(Jn,void 0,void 0,(function(){var Re,_e,nn,Vt,Qt;return O(this,(function(Or){try{for(Re=Fe(this._groupChannelHandlers.values()),_e=Re.next();!_e.done;_e=Re.next())(nn=_e.value).onMessageUpdated&&nn.onMessageUpdated(M,b),C>0&&nn.onMentionReceived&&nn.onMentionReceived(M,b)}catch(er){Vt={error:er}}finally{try{_e&&!_e.done&&(Qt=Re.return)&&Qt.call(Re)}finally{if(Vt)throw Vt.error}}return[2]}))}))})),$t.label=6;case 6:return[3,87];case 7:return H=e.as(qk),Lt=H.channelUrl,Cn=H.channelType,F=H.messageId,Q=H.silent,$=H.messageCreatedAt,q=H.senderId,Cn!==yn.GROUP?[3,9]:[4,this.getChannel(Lt,!0)];case 8:X=$t.sent(),V=q===this._sdkState.userId,Q||V||$>0&&X.myLastRead<$&&X.unreadMessageCount>0&&(X._updateUnreadCount(X.unreadMessageCount-1,0),(Jr=te.of(this._iid).requestDeduplicator).updatePendingResponse(X,Date.now())),this._dispatcher.dispatch(new Aw({messageIds:[F],source:Se.EVENT_MESSAGE_DELETED})),gt((function(){return D(Jn,void 0,void 0,(function(){var Re,_e,nn,Vt,Qt;return O(this,(function(Or){try{for(Re=Fe(this._groupChannelHandlers.values()),_e=Re.next();!_e.done;_e=Re.next())(nn=_e.value).onMessageDeleted&&nn.onMessageDeleted(X,F)}catch(er){Vt={error:er}}finally{try{_e&&!_e.done&&(Qt=Re.return)&&Qt.call(Re)}finally{if(Vt)throw Vt.error}}return[2]}))}))})),$t.label=9;case 9:return[3,87];case 10:return(ee=e.as(BP).readStatus).channelType!==yn.GROUP?[3,12]:(Ee=this._groupChannelCache.isCachedInMemory(ee.channelUrl),[4,this.getChannel(ee.channelUrl,!0)]);case 11:if(z=$t.sent(),ie=ee.reader.userId===this._sdkState.userId,se=!0,Ee&&(se=z._updateUnreadMemberState(ee.reader.userId,ee.readAt,ee.isExcluded)),ee.isExcluded){if(se){try{for(he=Fe(this._groupChannelHandlers.values()),pe=he.next();!pe.done;pe=he.next())(K=pe.value).onUserMarkedUnread!==Bt?K.onUserMarkedUnread(z,[ee.reader.userId]):K.onUnreadMemberStatusUpdated&&K.onUnreadMemberStatusUpdated(z)}catch(Re){sa={error:Re}}finally{try{pe&&!pe.done&&(hl=he.return)&&hl.call(he)}finally{if(sa)throw sa.error}}this._dispatcher.dispatch(new mn({channels:[z],context:{source:Se.EVENT_CHANNEL_UNREAD,userIds:[ee.reader.userId]}}))}}else ce=!0,ie&&(Ee?z.unreadMentionCount>0||z.unreadMessageCount>0?z._updateUnreadCount(0,0):ce=!1:z.unreadMessageCount!==0&&z.unreadMentionCount!==0&&(ce=!1)),ce&&(this._dispatcher.dispatch(new mn({channels:[z],context:{source:se?Se.EVENT_CHANNEL_READ:Se.EVENT_CHANNEL_UPDATED,userIds:[ee.reader.userId]}})),gt((function(){return D(Jn,void 0,void 0,(function(){var Re,_e,nn,Vt,Qt;return O(this,(function(Or){try{for(Re=Fe(this._groupChannelHandlers.values()),_e=Re.next();!_e.done;_e=Re.next())nn=_e.value,ie?nn.onChannelChanged!==Bt&&nn.onChannelChanged(z):se&&(nn.onUserMarkedRead!==Bt?nn.onUserMarkedRead(z,[ee.reader.userId]):nn.onUnreadMemberStatusUpdated!==Bt&&nn.onUnreadMemberStatusUpdated(z))}catch(er){Vt={error:er}}finally{try{_e&&!_e.done&&(Qt=Re.return)&&Qt.call(Re)}finally{if(Vt)throw Vt.error}}return[2]}))}))})));$t.label=12;case 12:return[3,87];case 13:return me=e.as(zW),Lt=me.channelUrl,Le=me.deliveredStateUpdate,ge=Le===void 0?{}:Le,Ee=this._groupChannelCache.isCachedInMemory(Lt),[4,this.getChannel(Lt,!0)];case 14:return Ye=$t.sent(),Ee&&Object.keys(ge).forEach((function(Re){Ye._updateUndeliveredMemberState(Re,ge[Re])})),Object.keys(ge).some((function(Re){return Re!==Jn._sdkState.userId}))&&(this._dispatcher.dispatch(new mn({channels:[Ye],context:{source:Se.EVENT_CHANNEL_DELIVERED}})),gt((function(){return D(Jn,void 0,void 0,(function(){var Re,_e,nn,Vt,Qt;return O(this,(function(Or){try{for(Re=Fe(this._groupChannelHandlers.values()),_e=Re.next();!_e.done;_e=Re.next())(nn=_e.value).onUndeliveredMemberStatusUpdated&&nn.onUndeliveredMemberStatusUpdated(Ye)}catch(er){Vt={error:er}}finally{try{_e&&!_e.done&&(Qt=Re.return)&&Qt.call(Re)}finally{if(Vt)throw Vt.error}}return[2]}))}))}))),[3,87];case 15:return tt=e.as(S5),Lt=tt.channelUrl,Cn=tt.channelType,yt=tt.event,Cn!==yn.GROUP?[3,26]:[4,this.getChannel(Lt,!0)];case 16:return Ht=$t.sent(),[4,this.getMessageFromCache(yt.messageId)];case 17:if(Yt=$t.sent(),!Ht.isSuper)return[3,25];$t.label=18;case 18:$t.trys.push([18,23,24,25]),zt=Fe(Object.keys(yt._sampledUserInfoList)),Xt=zt.next(),$t.label=19;case 19:return Xt.done?[3,22]:(Jt=Xt.value,[4,this._userInfoCache.get(Jt)]);case 20:(Mt=$t.sent())?(Mt.plainProfileUrl=yt._sampledUserInfoList[Jt].profile_url,Mt.nickname=yt._sampledUserInfoList[Jt].nickname,this._upsertCachedUserInfo(Mt,yt.updatedAt)):(jt=new fn(this._iid,{user_id:Jt,nickname:yt._sampledUserInfoList[Jt].nickname,profile_url:yt._sampledUserInfoList[Jt].profile_url,require_auth_for_profile_image:yt._sampledUserInfoList[Jt].require_auth_for_profile_image}),this._upsertCachedUserInfo(jt,yt.updatedAt)),$t.label=21;case 21:return Xt=zt.next(),[3,19];case 22:return[3,25];case 23:return en=$t.sent(),xu={error:en},[3,25];case 24:try{Xt&&!Xt.done&&(zl=zt.return)&&zl.call(zt)}finally{if(xu)throw xu.error}return[7];case 25:Yt?Yt instanceof ja&&(Yt.applyReactionEvent(yt),this._dispatcher.dispatch(new Br({messages:[Yt],source:Se.EVENT_MESSAGE_REACTION_UPDATED}))):this._dispatcher.dispatch(new NP({event:yt,source:Se.EVENT_MESSAGE_REACTION_UPDATED})),gt((function(){return D(Jn,void 0,void 0,(function(){var Re,_e,nn,Vt,Qt;return O(this,(function(Or){try{for(Re=Fe(this._groupChannelHandlers.values()),_e=Re.next();!_e.done;_e=Re.next())(nn=_e.value).onReactionUpdated&&nn.onReactionUpdated(Ht,yt)}catch(er){Vt={error:er}}finally{try{_e&&!_e.done&&(Qt=Re.return)&&Qt.call(Re)}finally{if(Vt)throw Vt.error}}return[2]}))}))})),$t.label=26;case 26:return[3,87];case 27:return(Dt=e.as(T5).event).channelType!==yn.GROUP?[3,30]:[4,this.getChannel(Dt.channelUrl,!0)];case 28:return ln=$t.sent(),[4,this.getMessageFromCache(Dt.targetMessageId)];case 29:if((Yt=$t.sent())?Yt instanceof ja&&(Yt.applyThreadInfoUpdateEvent(Dt),this._dispatcher.dispatch(new Br({messages:[Yt],source:Se.EVENT_MESSAGE_THREADINFO_UPDATED}))):this._dispatcher.dispatch(new AP({event:Dt,source:Se.EVENT_MESSAGE_THREADINFO_UPDATED})),ln.isSuper)try{for(st=Fe(Dt.threadInfo.mostRepliedUsers),ft=st.next();!ft.done;ft=st.next())on=ft.value,this._upsertCachedUserInfo(on,Dt.threadInfo.updatedAt)}catch(Re){bf={error:Re}}finally{try{ft&&!ft.done&&(_i=st.return)&&_i.call(st)}finally{if(bf)throw bf.error}}gt((function(){return D(Jn,void 0,void 0,(function(){var Re,_e,nn,Vt,Qt;return O(this,(function(Or){try{for(Re=Fe(this._groupChannelHandlers.values()),_e=Re.next();!_e.done;_e=Re.next())(nn=_e.value).onThreadInfoUpdated&&nn.onThreadInfoUpdated(ln,Dt)}catch(er){Vt={error:er}}finally{try{_e&&!_e.done&&(Qt=Re.return)&&Qt.call(Re)}finally{if(Vt)throw Vt.error}}return[2]}))}))})),$t.label=30;case 30:return[3,87];case 31:un=e.as(N5).groupChannelMemberCounts,vt=[],$t.label=32;case 32:$t.trys.push([32,37,38,39]),_t=Fe(un),Pt=_t.next(),$t.label=33;case 33:return Pt.done?[3,36]:(Et=Pt.value,Lt=Et.channelUrl,rn=Et.memberCount,wn=Et.joinedMemberCount,Ft=Et.updatedAt,[4,this.getChannelFromCache(Lt)]);case 34:(vn=$t.sent())&&vn._setLatestMemberCount(rn,wn,Ft)&&vt.push(vn),$t.label=35;case 35:return Pt=_t.next(),[3,33];case 36:return[3,39];case 37:return Je=$t.sent(),jl={error:Je},[3,39];case 38:try{Pt&&!Pt.done&&(Xa=_t.return)&&Xa.call(_t)}finally{if(jl)throw jl.error}return[7];case 39:return vt.length>0&&(this._dispatcher.dispatch(new mn({channels:vt,context:{source:Se.EVENT_CHANNEL_MEMBER_COUNT_UPDATED}})),gt((function(){return D(Jn,void 0,void 0,(function(){var Re,_e,nn,Vt,Qt;return O(this,(function(Or){try{for(Re=Fe(this._groupChannelHandlers.values()),_e=Re.next();!_e.done;_e=Re.next())(nn=_e.value).onChannelMemberCountChanged&&nn.onChannelMemberCountChanged(vt)}catch(er){Vt={error:er}}finally{try{_e&&!_e.done&&(Qt=Re.return)&&Qt.call(Re)}finally{if(Vt)throw Vt.error}}return[2]}))}))}))),[3,87];case 40:return Nn=e.as(A5),An=Nn.event,Mn=Nn.status,Lt=Nn.channelUrl,Cn=Nn.channelType,Lt&&Cn===yn.GROUP?[4,this.getChannel(Lt,!0)]:[3,42];case 41:Zt=$t.sent(),this._dispatcher.dispatch(new Mw({event:An,source:Se.EVENT_POLL_UPDATED})),gt(Mn===wP?function(){return D(Jn,void 0,void 0,(function(){var Re,_e,nn,Vt,Qt;return O(this,(function(Or){try{for(Re=Fe(this._groupChannelHandlers.values()),_e=Re.next();!_e.done;_e=Re.next())(nn=_e.value).onPollDeleted&&nn.onPollDeleted(Zt,An.pollId)}catch(er){Vt={error:er}}finally{try{_e&&!_e.done&&(Qt=Re.return)&&Qt.call(Re)}finally{if(Vt)throw Vt.error}}return[2]}))}))}:function(){return D(Jn,void 0,void 0,(function(){var Re,_e,nn,Vt,Qt;return O(this,(function(Or){try{for(Re=Fe(this._groupChannelHandlers.values()),_e=Re.next();!_e.done;_e=Re.next())(nn=_e.value).onPollUpdated&&nn.onPollUpdated(Zt,An)}catch(er){Vt={error:er}}finally{try{_e&&!_e.done&&(Qt=Re.return)&&Qt.call(Re)}finally{if(Vt)throw Vt.error}}return[2]}))}))}),$t.label=42;case 42:return[3,87];case 43:return Gt=e.as(Lw),xt=Gt.event,Lt=Gt.channelUrl,Cn=Gt.channelType,Lt&&Cn===yn.GROUP?[4,this.getChannel(Lt,!0)]:[3,45];case 44:ir=$t.sent(),this._dispatcher.dispatch(new VS({event:xt,source:Se.EVENT_POLL_VOTED})),gt((function(){return D(Jn,void 0,void 0,(function(){var Re,_e,nn,Vt,Qt;return O(this,(function(Or){try{for(Re=Fe(this._groupChannelHandlers.values()),_e=Re.next();!_e.done;_e=Re.next())(nn=_e.value).onPollVoted&&nn.onPollVoted(ir,xt)}catch(er){Vt={error:er}}finally{try{_e&&!_e.done&&(Qt=Re.return)&&Qt.call(Re)}finally{if(Vt)throw Vt.error}}return[2]}))}))})),$t.label=45;case 45:return[3,87];case 46:if(!(It=e.as(Od).event).isGroupChannelEvent)return[3,85];switch(It.category){case nr.CHANNEL_JOIN:return[3,47];case nr.CHANNEL_LEAVE:return[3,49];case nr.CHANNEL_OPERATOR_UPDATE:return[3,53];case nr.CHANNEL_INVITE:return[3,55];case nr.CHANNEL_DECLINE_INVITE:return[3,57];case nr.TYPING_START:case nr.TYPING_END:return[3,59];case nr.USER_CHANNEL_MUTE:case nr.USER_CHANNEL_UNMUTE:return[3,61];case nr.USER_CHANNEL_BAN:return[3,63];case nr.USER_CHANNEL_UNBAN:return[3,67];case nr.CHANNEL_FREEZE:case nr.CHANNEL_UNFREEZE:return[3,69];case nr.CHANNEL_HIDE:return[3,71];case nr.CHANNEL_UNHIDE:return[3,73];case nr.CHANNEL_DELETED:return[3,75];case nr.CHANNEL_PROP_CHANGED:return[3,76];case nr.CHANNEL_META_DATA_CHANGED:return[3,79];case nr.CHANNEL_META_COUNTERS_CHANGED:return[3,81];case nr.PINNED_MESSAGE_CHANGED:return[3,83]}return[3,85];case 47:return[4,this.getChannel(It.channelUrl,!0)];case 48:if(Rt=$t.sent(),Ct=e.as(AW),nt=Ct.memberCount,Te=Ct.joinedMemberCount,it=Ct.members,St=!1,it.forEach((function(Re){Rt.isExclusive||Rt.isSuper||Rt.isBroadcast?St=St||Rt._setLatestMemberCount(nt,Te,It.ts):(Re.state=ii.JOINED,Rt.addMember(Re,It.ts),Jn._updateJoinedMemberCount(Rt)),Re.userId===Jn._sdkState.userId&&(Rt.myMemberState=ii.JOINED)})),Rt.isSuper)try{for(bt=Fe(it),gn=bt.next();!gn.done;gn=bt.next())Zr=gn.value,this._upsertCachedUserInfo(Zr,It.ts)}catch(Re){ql={error:Re}}finally{try{gn&&!gn.done&&(Oc=bt.return)&&Oc.call(bt)}finally{if(ql)throw ql.error}}return(Jr=te.of(this._iid).requestDeduplicator).updatePendingResponse(Rt,Date.now()),this._dispatcher.dispatch(new mn({channels:[Rt],context:{source:Se.EVENT_CHANNEL_JOINED,users:it}})),gt((function(){return D(Jn,void 0,void 0,(function(){return O(this,(function(Re){return this._groupChannelHandlers.forEach((function(_e){var nn,Vt;try{for(var Qt=Fe(it),Or=Qt.next();!Or.done;Or=Qt.next()){var er=Or.value;_e.onUserJoined&&_e.onUserJoined(Rt,er)}}catch(ei){nn={error:ei}}finally{try{Or&&!Or.done&&(Vt=Qt.return)&&Vt.call(Qt)}finally{if(nn)throw nn.error}}Rt.isBroadcast&&St&&_e.onChannelMemberCountChanged&&_e.onChannelMemberCountChanged([Rt])})),[2]}))}))})),[3,85];case 49:return(Wi=this._leftChannels.get(It.channelUrl))?(En=Wi.channel,[3,52]):[3,50];case 50:return[4,this.getChannel(It.channelUrl,!0)];case 51:En=$t.sent(),$t.label=52;case 52:return ct=En,ur=e.as(IW),rn=ur.memberCount,wn=ur.joinedMemberCount,Xn=ur.member,ar=!1,xn=te.of(this._iid),Pn=xn.appInfo,Jr=xn.requestDeduplicator,ct.isExclusive||ct.isSuper||ct.isBroadcast?ar=ct._setLatestMemberCount(rn,wn,It.ts):(Pn?.enabledChannelMemberShipHistory?((cr=ct.members.find((function(Re){return Re.userId===Xn.userId})))&&(cr.state=ii.LEFT),ct.memberCount=rn):ct.removeMember(Xn),this._updateJoinedMemberCount(ct)),Xn.userId===this._sdkState.userId?(ct.myMemberState=ii.NONE,ct.invitedAt=0,ct.joinedAt=0,ct._updateUnreadCount(0,0),ct.isPublic?this._dispatcher.dispatch(new mn({channels:[ct],context:{source:Se.EVENT_CHANNEL_LEFT,user:Xn}})):(this._markAsLeave(ct),this._dispatcher.dispatch(new nd({channelUrls:[ct.url],context:{source:Se.EVENT_CHANNEL_LEFT,user:Xn}})))):this._dispatcher.dispatch(new mn({channels:[ct],context:{source:Se.EVENT_CHANNEL_LEFT,user:Xn}})),Jr.updatePendingResponse(ct,Date.now()),ct.isSuper&&this._upsertCachedUserInfo(Xn,It.ts),gt((function(){return D(Jn,void 0,void 0,(function(){return O(this,(function(Re){return this._groupChannelHandlers.forEach((function(_e){_e.onUserLeft&&_e.onUserLeft(ct,Xn),ct.isBroadcast&&ar&&_e.onChannelMemberCountChanged&&_e.onChannelMemberCountChanged([ct])})),[2]}))}))})),[3,85];case 53:return[4,this.getChannel(It.channelUrl,!0)];case 54:at=$t.sent(),Nt=e.as(_5).operators,pt=Nt.map((function(Re){return Re.userId}));try{for(At=Fe(at.members),Tt=At.next();!Tt.done;Tt=At.next())(Zr=Tt.value).role=pt.includes(Zr.userId)?nl.OPERATOR:nl.NONE}catch(Re){ba={error:Re}}finally{try{Tt&&!Tt.done&&(Cf=At.return)&&Cf.call(At)}finally{if(ba)throw ba.error}}return at.myRole=pt.includes(this._sdkState.userId)?nl.OPERATOR:nl.NONE,(Jr=te.of(this._iid).requestDeduplicator).updatePendingResponse(at,Date.now()),this._dispatcher.dispatch(new mn({channels:[at],context:{source:Se.EVENT_CHANNEL_OPERATOR_UPDATED,operators:Nt}})),gt((function(){return D(Jn,void 0,void 0,(function(){return O(this,(function(Re){return this._groupChannelHandlers.forEach((function(_e){_e.onOperatorUpdated&&_e.onOperatorUpdated(at,Nt)})),[2]}))}))})),[3,85];case 55:return[4,this.getChannel(It.channelUrl,!0)];case 56:We=$t.sent(),tn=e.as(OW),rn=tn.memberCount,wn=tn.joinedMemberCount,Vn=tn.inviter,(qn=tn.invitees).forEach((function(Re){return Re.state=ii.INVITED}));try{for(In=Fe(qn),mt=In.next();!mt.done;mt=In.next())oe=mt.value,We.isExclusive||We.isSuper||We.isBroadcast?(We.isSuper&&this._userInfoCache.upsert(oe,It.ts),We._setLatestMemberCount(rn,wn,It.ts)):We.addMember(oe,It.ts),this._sdkState.userId===oe.userId&&(We.hiddenState=Xo.UNHIDDEN,We.myMemberState!==ii.JOINED&&(We.myMemberState=ii.INVITED),We.invitedAt=It.ts)}catch(Re){Fd={error:Re}}finally{try{mt&&!mt.done&&(Dc=In.return)&&Dc.call(In)}finally{if(Fd)throw Fd.error}}return(Jr=te.of(this._iid).requestDeduplicator).updatePendingResponse(We,Date.now()),this._dispatcher.dispatch(new mn({channels:[We],context:{source:Se.EVENT_CHANNEL_INVITED,inviter:Vn,invitees:qn}})),gt((function(){return D(Jn,void 0,void 0,(function(){return O(this,(function(Re){return this._groupChannelHandlers.forEach((function(_e){_e.onUserReceivedInvitation&&_e.onUserReceivedInvitation(We,Vn,qn)})),[2]}))}))})),[3,85];case 57:return[4,this.getChannel(It.channelUrl,!0)];case 58:return Pe=$t.sent(),ut=e.as(UW),rn=ut.memberCount,wn=ut.joinedMemberCount,an=ut.inviter,_r=ut.invitee,Pe.isExclusive||Pe.isSuper||Pe.isBroadcast?(Pe.isSuper&&this._userInfoCache.upsert(_r,It.ts),Pe._setLatestMemberCount(rn,wn,It.ts)):Pe.removeMember(_r),this._sdkState.userId===_r.userId?(Pe.invitedAt=0,Pe.myMemberState=ii.NONE,Pe.isPublic?this._dispatcher.dispatch(new mn({channels:[Pe],context:{source:Se.EVENT_CHANNEL_DECLINED_INVITE,inviter:an,invitee:_r}})):this._dispatcher.dispatch(new nd({channelUrls:[Pe.url],context:{source:Se.EVENT_CHANNEL_DECLINED_INVITE,inviter:an,invitee:_r}}))):this._dispatcher.dispatch(new mn({channels:[Pe],context:{source:Se.EVENT_CHANNEL_DECLINED_INVITE,inviter:an,invitee:_r}})),(Jr=te.of(this._iid).requestDeduplicator).updatePendingResponse(Pe,Date.now()),gt((function(){return D(Jn,void 0,void 0,(function(){return O(this,(function(Re){return this._groupChannelHandlers.forEach((function(_e){_e.onUserDeclinedInvitation&&_e.onUserDeclinedInvitation(Pe,an,_r)})),[2]}))}))})),[3,85];case 59:return[4,this.getChannel(It.channelUrl,!0)];case 60:return Cr=$t.sent(),Ot=It.category===nr.TYPING_START,on=e.as(Ot?FW:HW).user,Cr._updateTypingStatus(on,Ot?It.ts:0),(Jr=te.of(this._iid).requestDeduplicator).updatePendingResponse(Cr,Date.now()),this._dispatcher.dispatch(new mn({channels:[Cr],context:{source:Se.EVENT_CHANNEL_TYPING_STATUS_UPDATE}})),gt((function(){return D(Jn,void 0,void 0,(function(){return O(this,(function(Re){return this._groupChannelHandlers.forEach((function(_e){_e.onTypingStatusUpdated&&_e.onTypingStatusUpdated(Cr)})),[2]}))}))})),[3,85];case 61:return[4,this.getChannel(It.channelUrl,!0)];case 62:kt=$t.sent(),pn=It.category===nr.USER_CHANNEL_MUTE,(Xr=e.as(pn?QP:XP).user).userId===this._sdkState.userId&&(kt.myMutedState=pn?Ml.MUTED:Ml.UNMUTED,kt._myMutedRemainingTime=Xr.restrictionInfo.remainingDuration);try{for(Oi=Fe(kt.members),Di=Oi.next();!Di.done;Di=Oi.next())if((Zr=Di.value).userId===Xr.userId){Zr.isMuted=pn;break}}catch(Re){Bd={error:Re}}finally{try{Di&&!Di.done&&(Sf=Oi.return)&&Sf.call(Oi)}finally{if(Bd)throw Bd.error}}return kt.isSuper&&this._userInfoCache.upsert(Xr,It.ts),(Jr=te.of(this._iid).requestDeduplicator).updatePendingResponse(kt,Date.now()),this._dispatcher.dispatch(new mn({channels:[kt],context:{source:pn?Se.EVENT_CHANNEL_MUTED:Se.EVENT_CHANNEL_UNMUTED,user:Xr}})),gt((function(){return D(Jn,void 0,void 0,(function(){return O(this,(function(Re){return this._groupChannelHandlers.forEach((function(_e){pn?_e.onUserMuted&&_e.onUserMuted(kt,Xr):_e.onUserUnmuted&&_e.onUserUnmuted(kt,Xr)})),[2]}))}))})),[3,85];case 63:return(Wi=this._leftChannels.get(It.channelUrl))?(Xs=Wi.channel,[3,66]):[3,64];case 64:return[4,this.getChannel(It.channelUrl,!0)];case 65:Xs=$t.sent(),$t.label=66;case 66:return di=Xs,this._markAsLeave(di),Mc=e.as(ZP).user,ol=Mc.userId===this._sdkState.userId,di.isSuper&&this._userInfoCache.upsert(Mc,It.ts),ol&&this._dispatcher.dispatch(new nd({channelUrls:[di.url],context:{source:Se.EVENT_CHANNEL_BANNED,user:Mc}})),gt((function(){return D(Jn,void 0,void 0,(function(){return O(this,(function(Re){return this._groupChannelHandlers.forEach((function(_e){_e.onUserBanned&&_e.onUserBanned(di,Mc)})),[2]}))}))})),[3,85];case 67:return[4,this.getChannel(It.channelUrl,!0)];case 68:return Pl=$t.sent(),Mo=e.as(JP).user,ol=Mo.userId===this._sdkState.userId,Pl.isSuper&&this._userInfoCache.upsert(Mo,It.ts),ol&&this._dispatcher.dispatch(new nd({channelUrls:[Pl.url],context:{source:Se.EVENT_CHANNEL_UNBANNED,user:Mo}})),gt((function(){return D(Jn,void 0,void 0,(function(){return O(this,(function(Re){return this._groupChannelHandlers.forEach((function(_e){_e.onUserUnbanned&&_e.onUserUnbanned(Pl,Mo)})),[2]}))}))})),[3,85];case 69:return[4,this.getChannel(It.channelUrl,!0)];case 70:return wu=$t.sent(),aa=e.as(e5).freeze,wu.isFrozen=aa,(Jr=te.of(this._iid).requestDeduplicator).updatePendingResponse(wu,Date.now()),this._dispatcher.dispatch(new mn({channels:[wu],context:{source:aa?Se.EVENT_CHANNEL_FROZEN:Se.EVENT_CHANNEL_UNFROZEN}})),gt((function(){return D(Jn,void 0,void 0,(function(){return O(this,(function(Re){return this._groupChannelHandlers.forEach((function(_e){aa?_e.onChannelFrozen&&_e.onChannelFrozen(wu):_e.onChannelUnfrozen&&_e.onChannelUnfrozen(wu)})),[2]}))}))})),[3,85];case 71:return[4,this.getChannel(It.channelUrl,!0)];case 72:return Zs=$t.sent(),Fl=e.as(kW),Ic=Fl.allowAutoUnhide,Io=Fl.hidePreviousMessages,Ru=Fl.messageOffsetTimestamp,Ic!==null&&(Zs.hiddenState=Ic?Xo.HIDDEN_ALLOW_AUTO_UNHIDE:Xo.HIDDEN_PREVENT_AUTO_UNHIDE),Io!==null&&Io&&Zs._updateUnreadCount(0,0),Ru!==null&&(Zs.messageOffsetTimestamp=Ru),(Jr=te.of(this._iid).requestDeduplicator).updatePendingResponse(Zs,Date.now()),this._dispatcher.dispatch(new mn({channels:[Zs],context:{source:Se.EVENT_CHANNEL_HIDDEN}})),gt((function(){return D(Jn,void 0,void 0,(function(){return O(this,(function(Re){return this._groupChannelHandlers.forEach((function(_e){_e.onChannelHidden&&_e.onChannelHidden(Zs)})),[2]}))}))})),[3,85];case 73:return[4,this.getChannel(It.channelUrl,!0)];case 74:return(Bl=$t.sent()).hiddenState=Xo.UNHIDDEN,(Jr=te.of(this._iid).requestDeduplicator).updatePendingResponse(Bl,Date.now()),this._dispatcher.dispatch(new mn({channels:[Bl],context:{source:Se.EVENT_CHANNEL_UNHIDDEN}})),gt((function(){return D(Jn,void 0,void 0,(function(){return O(this,(function(Re){return this._groupChannelHandlers.forEach((function(_e){_e.onChannelChanged&&_e.onChannelChanged(Bl)})),[2]}))}))})),[3,85];case 75:return this._dispatcher.dispatch(new nd({channelUrls:[It.channelUrl],context:{source:Se.EVENT_CHANNEL_DELETED}})),gt((function(){return D(Jn,void 0,void 0,(function(){return O(this,(function(Re){return this._groupChannelHandlers.forEach((function(_e){_e.onChannelDeleted&&_e.onChannelDeleted(It.channelUrl,yn.GROUP)})),[2]}))}))})),[3,85];case 76:return[4,za(50)];case 77:return $t.sent(),[4,this.getChannelWithoutCache(It.channelUrl,!0,!1)];case 78:return Ua=$t.sent(),this._dispatcher.dispatch(new mn({channels:[Ua],context:{source:Se.EVENT_CHANNEL_UPDATED}})),gt((function(){return D(Jn,void 0,void 0,(function(){return O(this,(function(Re){return this._groupChannelHandlers.forEach((function(_e){_e.onChannelChanged&&_e.onChannelChanged(Ua)})),[2]}))}))})),[3,85];case 79:return[4,this.getChannel(It.channelUrl,!0)];case 80:return Qa=$t.sent(),Ou=e.as(YP),ll=Ou.created,Js=Ou.updated,ul=Ou.deleted,ll&&(Qa._upsertCachedMetaData(ll,It.ts),this._dispatcher.dispatch(new mn({channels:[Qa],context:{source:Se.EVENT_CHANNEL_METADATA_CREATED,metaData:ll},ts:It.ts}))),Js&&(Qa._upsertCachedMetaData(Js,It.ts),this._dispatcher.dispatch(new mn({channels:[Qa],context:{source:Se.EVENT_CHANNEL_METADATA_UPDATED,metaData:Js},ts:It.ts}))),ul&&(Qa._removeFromCachedMetaData(ul,It.ts),this._dispatcher.dispatch(new mn({channels:[Qa],context:{source:Se.EVENT_CHANNEL_METADATA_DELETED,metaDataKeys:ul},ts:It.ts}))),(ll||Js||ul)&&(Jr=te.of(this._iid).requestDeduplicator).updatePendingResponse(Qa,Date.now()),gt((function(){return D(Jn,void 0,void 0,(function(){return O(this,(function(Re){return this._groupChannelHandlers.forEach((function(_e){ll&&_e.onMetaDataCreated&&_e.onMetaDataCreated(Qa,ll),Js&&_e.onMetaDataUpdated&&_e.onMetaDataUpdated(Qa,Js),ul&&_e.onMetaDataDeleted&&_e.onMetaDataDeleted(Qa,ul)})),[2]}))}))})),[3,85];case 81:return[4,this.getChannel(It.channelUrl,!0)];case 82:return cl=$t.sent(),dl=e.as(WP),xa=dl.created,Hl=dl.updated,Gl=dl.deleted,xa&&this._dispatcher.dispatch(new mn({channels:[cl],context:{source:Se.EVENT_CHANNEL_METACOUNTER_CREATED,metaCounters:xa}})),Hl&&this._dispatcher.dispatch(new mn({channels:[cl],context:{source:Se.EVENT_CHANNEL_METACOUNTER_UPDATED,metaCounters:Hl}})),Gl&&this._dispatcher.dispatch(new mn({channels:[cl],context:{source:Se.EVENT_CHANNEL_METACOUNTER_DELETED,metaCounterKeys:Gl}})),gt((function(){return D(Jn,void 0,void 0,(function(){return O(this,(function(Re){return this._groupChannelHandlers.forEach((function(_e){xa&&_e.onMetaCounterCreated&&_e.onMetaCounterCreated(cl,xa),Hl&&_e.onMetaCounterUpdated&&_e.onMetaCounterUpdated(cl,Hl),Gl&&_e.onMetaCounterDeleted&&_e.onMetaCounterDeleted(cl,Gl)})),[2]}))}))})),[3,85];case 83:return[4,this.getChannel(It.channelUrl,!0)];case 84:return da=$t.sent(),wo=e.as(y5),kd=wo.pinnedMessageIds,Pd=wo.latestPinnedMessage,(yf=wo.ts)>da._pinnedMessagesUpdatedAt&&(da.pinnedMessageIds=kd??[],da.lastPinnedMessage=Pd,da._pinnedMessagesUpdatedAt=yf,(Jr=te.of(this._iid).requestDeduplicator).updatePendingResponse(da,Date.now()),this._dispatcher.dispatch(new mn({channels:[da],context:{source:Se.EVENT_PINNED_MESSAGE_UPDATED}})),gt((function(){return D(Jn,void 0,void 0,(function(){var Re,_e,nn,Vt,Qt;return O(this,(function(Or){try{for(Re=Fe(this._groupChannelHandlers.values()),_e=Re.next();!_e.done;_e=Re.next())(nn=_e.value).onChannelChanged&&nn.onChannelChanged(da)}catch(er){Vt={error:er}}finally{try{_e&&!_e.done&&(Qt=Re.return)&&Qt.call(Re)}finally{if(Vt)throw Vt.error}}return[2]}))}))})),gt((function(){return D(Jn,void 0,void 0,(function(){return O(this,(function(Re){return this._groupChannelHandlers.forEach((function(_e){_e.onPinnedMessageUpdated&&_e.onPinnedMessageUpdated(da)})),[2]}))}))}))),[3,85];case 85:return[3,87];case 86:switch((_s=e.as(m5).event).category){case Yy.USER_BLOCK:wc=lS.getDataAsUserBlockEvent(this._iid,_s),ys=wc.blocker,Du=wc.blockee,this._groupChannelCache.block(ys.userId,Du.userId);break;case Yy.USER_UNBLOCK:Vl=lS.getDataAsUserBlockEvent(this._iid,_s),ys=Vl.blocker,Du=Vl.blockee,this._groupChannelCache.unblock(ys.userId,Du.userId)}return[3,87];case 87:return[3,89];case 88:if(Sr=$t.sent(),$a(Sr))throw Sr;return[3,89];case 89:return[2]}}))}))},n.prototype._markAsLeave=function(e){var r,i=this,a=(r=this._leftChannels.get(e.url))!==null&&r!==void 0?r:{channel:e,ref:0};a.ref++,this._leftChannels.set(e.url,a),setTimeout((function(){a.ref--,a.ref===0&&i._leftChannels.delete(e.url)}),1e4)},n.prototype.addHandler=function(e,r){this._groupChannelHandlers.set(e,r)},n.prototype.removeHandler=function(e){this._groupChannelHandlers.delete(e)},n.prototype.clearHandler=function(){this._groupChannelHandlers.clear()},n.prototype.subscribeChannelEvent=function(e,r){this._groupChannelBroadcast.subscribe(e,r)},n.prototype.unsubscribeChannelEvent=function(e){this._groupChannelBroadcast.unsubscribe(e)},n.prototype._updateJoinedMemberCount=function(e){e.joinedMemberCount=e.members.filter((function(r){return r.state===ii.JOINED})).length},n.prototype.getChannel=function(e,r){return r===void 0&&(r=!1),D(this,void 0,void 0,(function(){var i;return O(this,(function(a){switch(a.label){case 0:Ue(re("string",e)).throw(ae.invalidParameters),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.getChannelFromCache(e)];case 2:return(i=a.sent())?[2,i]:[3,4];case 3:return a.sent(),[3,4];case 4:return[4,this.getChannelWithoutCache(e,r)];case 5:return[2,a.sent()]}}))}))},n.prototype.getChannelWithoutCache=function(e,r,i){return r===void 0&&(r=!1),i===void 0&&(i=!0),D(this,void 0,void 0,(function(){var a,s,o,u,c,h,p,m,_,b,C,N,S,M=this;return O(this,(function(w){switch(w.label){case 0:return Ue(re("string",e)).throw(ae.invalidParameters),a=te.of(this._iid).requestDeduplicator,s=new GA({channelUrl:e,isInternalCall:r}),[4,a.requestGetChannel(s.path,(function(){return M._requestQueue.send(s)}),s.params,i)];case 1:switch(o=w.sent(),u=o.as(VA).channel,c=u.unreadMessageCount,h=u.unreadMentionCount,u.myCountPreference){case Qo.UNREAD_MESSAGE_COUNT_ONLY:h=0;break;case Qo.UNREAD_MENTION_COUNT_ONLY:c=0;break;case Qo.OFF:c=0,h=0}u._updateUnreadCount(c,h),p=this._groupChannelCache.filterOffsetChanged([u]),w.label=2;case 2:w.trys.push([2,7,8,9]),m=Fe(p),_=m.next(),w.label=3;case 3:return _.done?[3,6]:(b=_.value,[4,this._messageCache.removeUnderOffset(b.url,b.messageOffsetTimestamp)]);case 4:w.sent(),w.label=5;case 5:return _=m.next(),[3,3];case 6:return[3,9];case 7:return C=w.sent(),N={error:C},[3,9];case 8:try{_&&!_.done&&(S=m.return)&&S.call(m)}finally{if(N)throw N.error}return[7];case 9:return[4,this._groupChannelCache.upsert([u])];case 10:return[2,w.sent()[0]]}}))}))},n.prototype.refreshChannel=function(e,r,i,a){return r===void 0&&(r=!0),i===void 0&&(i=Se.REFRESH_CHANNEL),a===void 0&&(a=!1),D(this,void 0,void 0,(function(){var s,o,u,c,h,p,m=this;return O(this,(function(_){switch(_.label){case 0:return _.trys.push([0,5,,6]),s=te.of(this._iid).requestDeduplicator,o=new GA({channelUrl:e,isInternalCall:r,showLatestMessage:a}),[4,s.requestGetChannel(o.path,(function(){return m._requestQueue.send(o)}),o.params)];case 1:return u=_.sent(),(c=u.as(VA).channel).myMemberState!==ii.NONE?[3,2]:(this._dispatcher.dispatch(new nd({channelUrls:[c.url],context:{source:i}})),[3,4]);case 2:return[4,this.upsertChannelsToCache([c])];case 3:h=_.sent(),this._dispatcher.dispatch(new mn({channels:h,context:{source:i}})),_.label=4;case 4:return[3,6];case 5:return(p=_.sent()).code!==et.NON_AUTHORIZED&&p.code!==et.NOT_FOUND_IN_DATABASE||this._dispatcher.dispatch(new nd({channelUrls:[e],context:{source:i}})),[3,6];case 6:return[2]}}))}))},n.prototype.getMyGroupChannels=function(e,r,i,a,s){return a===void 0&&(a=Se.REQUEST_CHANNEL),s===void 0&&(s=!1),D(this,void 0,void 0,(function(){var o,u,c,h,p,m,_,b,C;return O(this,(function(N){switch(N.label){case 0:return r.createdAfter&&(r.createdAfter=Math.floor(r.createdAfter/1e3)),r.createdBefore&&(r.createdBefore=Math.floor(r.createdBefore/1e3)),o=!1,s&&(u=te.of(this._iid),c=u.appInfo,(h=u.cacheContext)&&!h.localCacheEnabled&&c?.enabledChannelMemberShipHistory&&c?.applicationAttributes.includes("left_user_view_support")&&(o=!0)),p=new uW(Z(Z({},r),{userId:this._sdkState.userId,token:e,limit:i,includeLeftChannel:s&&o})),[4,this._requestQueue.send(p)];case 1:return m=N.sent(),_=m.as(cW),b=_.channels,C=_.token,this._dispatcher.dispatch(new mn({channels:b,context:{source:a}})),[2,{channels:b,token:C}]}}))}))},n.prototype.getMyGroupChannelChangeLogs=function(e,r,i){return i===void 0&&(i=Se.REQUEST_CHANNEL_CHANGELOGS),D(this,void 0,void 0,(function(){var a,s,o,u,c,h,p,m;return O(this,(function(_){switch(_.label){case 0:return a=Z(Z({},cS),r),Ue((re("string",e)||re("number",e))&&HA(a)).throw(ae.invalidParameters),s=new oW(ht({userId:this._sdkState.userId,ts:typeof e=="number"?e:null,token:typeof e=="string"?e:null,filter:a})),[4,this._requestQueue.send(s)];case 1:return o=_.sent(),u=o.as(lW),c=u.updatedChannels,h=u.deletedChannelUrls,p=u.hasMore,m=u.ts,c.length>0&&this._dispatcher.dispatch(new mn({channels:c,context:{source:i},ts:m})),h.length>0&&this._dispatcher.dispatch(new nd({channelUrls:h,context:{source:i}})),[2,{updatedChannels:c,deletedChannelUrls:h,hasMore:p,token:u.token}]}}))}))},n.prototype.getGroupChannelCount=function(e){return D(this,void 0,void 0,(function(){var r,i,a;return O(this,(function(s){switch(s.label){case 0:return r=Z(Z({},w5),e),Ue(R5(r)).throw(ae.invalidParameters),i=new dW({userId:this._sdkState.userId,filter:r}),[4,this._requestQueue.send(i)];case 1:return a=s.sent(),[2,a.as(hW).groupChannelCount]}}))}))},n.prototype.getUnreadItemCount=function(e){return D(this,void 0,void 0,(function(){var r,i,a,s,o,u,c,h,p,m,_,b,C,N,S,M;return O(this,(function(w){switch(w.label){case 0:return r=Z(Z({},nW),e),Ue((function(U){return hn(qr,U.keys)&&hn("string",U.customTypeFilters,!0)&&hn("string",U.customTypesFilter,!0)})(r)).throw(ae.invalidParameters),i=te.of(this._iid),a=i.sdkState,s=i.requestQueue,o=new fW({userId:a.userId,filter:r}),[4,s.send(o)];case 1:return u=w.sent(),c=u.as(vW),h=c.groupChannelUnreadMentionCount,p=c.groupChannelUnreadMessageCount,m=c.groupChannelInvitationCount,_=c.superGroupChannelUnreadMentionCount,b=c.superGroupChannelUnreadMessageCount,C=c.superGroupChannelInvitationCount,N=c.nonSuperGroupChannelUnreadMentionCount,S=c.nonSuperGroupChannelUnreadMessageCount,M=c.nonSuperGroupChannelInvitationCount,[2,ze({groupChannelUnreadMentionCount:h,groupChannelUnreadMessageCount:p,groupChannelInvitationCount:m,superGroupChannelUnreadMentionCount:_,superGroupChannelUnreadMessageCount:b,superGroupChannelInvitationCount:C,nonSuperGroupChannelUnreadMentionCount:N,nonSuperGroupChannelUnreadMessageCount:S,nonSuperGroupChannelInvitationCount:M})]}}))}))},n.prototype.getTotalUnreadChannelCount=function(){return D(this,void 0,void 0,(function(){var e,r,i,a,s;return O(this,(function(o){switch(o.label){case 0:return e=te.of(this._iid),r=e.sdkState,i=e.requestQueue,a=new pW({userId:r.userId}),[4,i.send(a)];case 1:return s=o.sent(),[2,s.as(mW).unreadCount]}}))}))},n.prototype.getTotalUnreadMessageCount=function(e){return D(this,void 0,void 0,(function(){var r,i,a,s,o,u;return O(this,(function(c){switch(c.label){case 0:return r=Z(Z({},rW),e),Ue(iW(r)).throw(ae.invalidParameters),i=te.of(this._iid),a=i.sdkState,s=i.requestQueue,o=new gW({userId:a.userId,filter:r}),[4,s.send(o)];case 1:return u=c.sent(),[2,u.as(_W).unreadCount]}}))}))},n.prototype.getTotalScheduledMessageCount=function(e){return e===void 0&&(e={}),D(this,void 0,void 0,(function(){var r,i,a,s;return O(this,(function(o){switch(o.label){case 0:return r=Z(Z({},aW),e),Ue((function(u){return re("string",u.channelUrl,!0)&&hn(Kh,u.scheduledStatus,!0)&&dn(Ia,u.messageTypeFilter)})(r)).throw(ae.invalidParameters),i=te.of(this._iid).requestQueue,a=new yW(r),[4,i.send(a)];case 1:return s=o.sent(),[2,s.as(EW).count]}}))}))},n.prototype.getSubscribedTotalUnreadMessageCount=function(){var e=te.of(this._iid).subscribedUnreadMessageCount;return e.all>=0?e.all:0},n.prototype.getSubscribedCustomTypeTotalUnreadMessageCount=function(){var e=0,r=te.of(this._iid).subscribedUnreadMessageCount;return Object.keys(r.customTypes).forEach((function(i){e+=r.customTypes[i]})),e},n.prototype.getSubscribedCustomTypeUnreadMessageCount=function(e){var r;return(r=te.of(this._iid).subscribedUnreadMessageCount.customTypes[e])!==null&&r!==void 0?r:0},n.prototype.createChannel=function(e){return D(this,void 0,void 0,(function(){var r,i,a,s;return O(this,(function(o){switch(o.label){case 0:return r=Z(Z({},AC),e),Ue(BA(r)).throw(ae.invalidParameters),r.isPublic||(r.accessCode=void 0),i=new CW(Z({userId:this._sdkState.userId},r)),[4,this._requestQueue.send(i)];case 1:return a=o.sent(),s=a.as(SW).channel,[4,this.upsertChannelsToCache([s])];case 2:return o.sent(),[2,s]}}))}))},n.prototype.markAsReadAll=function(){return D(this,void 0,void 0,(function(){var e,r,i,a,s,o,u,c;return O(this,(function(h){switch(h.label){case 0:return e=Date.now(),Ue(e-this._markAsReadAllLastSentAt>=1e3).throw(ae.markAsReadAllRateLimitExceeded),this._markAsReadAllLastSentAt=e,r=new OD({userId:this._sdkState.userId}),[4,this._requestQueue.send(r)];case 1:h.sent(),i=this._groupChannelCache.channels;try{for(a=Fe(i),s=a.next();!s.done;s=a.next())(o=s.value)._updateUnreadMemberState(this._sdkState.userId,e),o._updateUnreadCount(0,0)}catch(p){u={error:p}}finally{try{s&&!s.done&&(c=a.return)&&c.call(a)}finally{if(u)throw u.error}}return i.length>0?[4,this.upsertChannelsToCache(i)]:[3,3];case 2:h.sent(),h.label=3;case 3:return[2]}}))}))},n.prototype.markAsReadWithChannelUrls=function(e){return D(this,void 0,void 0,(function(){var r,i,a,s,o,u,c,h,p;return O(this,(function(m){switch(m.label){case 0:return r=Date.now(),Ue(hn("string",e)&&r-this._markAsReadAllLastSentAt>=1e3).throw(ae.markAsReadAllRateLimitExceeded),this._markAsReadAllLastSentAt=r,i=new OD({userId:this._sdkState.userId,channelUrls:e}),[4,this._requestQueue.send(i)];case 1:m.sent(),a=this._groupChannelCache.channels,s=[];try{for(o=Fe(a),u=o.next();!u.done;u=o.next())c=u.value,e.includes(c.url)&&(c._updateUnreadMemberState(this._sdkState.userId,r),c._updateUnreadCount(0,0),s.push(c))}catch(_){h={error:_}}finally{try{u&&!u.done&&(p=o.return)&&p.call(o)}finally{if(h)throw h.error}}return s.length>0?[4,this.upsertChannelsToCache(s)]:[3,3];case 2:m.sent(),m.label=3;case 3:return[2]}}))}))},n.prototype.markAsDelivered=function(e){return D(this,void 0,void 0,(function(){return O(this,(function(r){switch(r.label){case 0:return[4,this.getChannel(e)];case 1:return[4,r.sent().markAsDelivered()];case 2:return r.sent(),[2]}}))}))},n.prototype.getMessageFromCache=function(e){var r;return D(this,void 0,void 0,(function(){return O(this,(function(i){switch(i.label){case 0:return[4,this._messageCache.get(e)];case 1:return[2,(r=i.sent())!==null&&r!==void 0?r:null]}}))}))},n.prototype.getExactlyMatchingMessagesForTokenFromCache=function(e,r,i){return D(this,void 0,void 0,(function(){return O(this,(function(a){switch(a.label){case 0:return[4,this._messageCache.fetch({channelUrl:e,token:r,filter:i,exactMatch:!0})];case 1:return[2,a.sent()]}}))}))},n.prototype.getMessagesFromCache=function(e,r,i,a,s,o){return s===void 0&&(s=i5),o===void 0&&(o=!0),D(this,void 0,void 0,(function(){return O(this,(function(u){switch(u.label){case 0:return[4,this._messageCache.fetch({channelUrl:e,token:r,limit:s,filter:a,backward:i==="next",inclusive:o})];case 1:return[2,u.sent()]}}))}))},n.prototype.getPollMessagesFromCache=function(e,r,i,a){return D(this,void 0,void 0,(function(){return O(this,(function(s){switch(s.label){case 0:return[4,this._messageCache.fetch({channelUrl:e,token:r,limit:a,filter:i,backward:!1,isPollOnly:!0})];case 1:return[2,s.sent()]}}))}))},n.prototype.getCachedMessageCountBetween=function(e,r,i,a){return D(this,void 0,void 0,(function(){return O(this,(function(s){switch(s.label){case 0:return[4,this._messageCache.countBetween(e,r,new Eu({top:i,bottom:a}))];case 1:return[2,s.sent()]}}))}))},n.prototype.getUnsentMessagesFromCache=function(e,r){return D(this,void 0,void 0,(function(){return O(this,(function(i){switch(i.label){case 0:return[4,this._unsentMessageCache.fetch({channelUrl:e,filter:r})];case 1:return[2,i.sent()]}}))}))},n.prototype.removeFailedMessageFromCache=function(e){return D(this,void 0,void 0,(function(){return O(this,(function(r){switch(r.label){case 0:return[4,this._unsentMessageCache.remove([e])];case 1:return r.sent(),[2]}}))}))},n})(E5),$o=function(t,n){return n instanceof ai?t.findIndex((function(e){return e instanceof ai&&n.isIdentical(e)})):t.findIndex((function(e){return e.isIdentical(n)}))},B0=function(t,n){return t.findIndex((function(e){return e instanceof ja?e.messageId===n:e instanceof gp?e.notificationId===n:void 0}))},dN=function(t,n){if(t.length>0){for(var e=0,r=t.length-1,i=Math.floor((e+r)/2);e<r;){var a=t[i].createdAt-n.createdAt;if(a>0)r=i,i=Math.floor((e+r)/2);else{if(!(a<0))return i;e=i+1,i=Math.floor((e+r)/2)}}return t[i].createdAt>n.createdAt?i:i+1}return t.length},hu={},$W=(function(){function t(n){var e=n._iid,r=n.channel,i=n.includeParams,a=this;this.ref=0,this._iid=e,this._channel=r,this._includeParams=i;var s,o,u=te.of(this._iid),c=u.logger,h=u.sdkState,p=u.dispatcher;this._metadataKey=(s=h.userId,o=r.url,"sendbird:".concat(s,"@groupchannel/").concat(o,"/message/changelogs.meta"));var m=(function(_,b){return"sendbird:".concat(_,"@groupchannel/").concat(b,"/message/changelogs")})(h.userId,this._channel.url);this._sync=new Td(m,(function(){return D(a,void 0,void 0,(function(){var _,b,C,N,S,M,w,U,L;return O(this,(function(P){switch(P.label){case 0:return _={hasNext:!0,nextToken:0},[4,this.loadMetadata()];case 1:P.sent(),c.debug("message changelog sync from",(L=this._metadata)===null||L===void 0?void 0:L.token),P.label=2;case 2:return P.trys.push([2,5,,8]),[4,Ki.of(this._iid).getMessageChangelogs(this._channel.url,this._channel.channelType,this._metadata.token,Z({replyType:Yi.ALL},this._includeParams),Se.SYNC_MESSAGE_CHANGELOGS)];case 3:return b=P.sent(),C=b.updatedMessages,N=b.deletedMessageIds,S=b.hasMore,M=b.token,w=b.forceUseNextToken,_.hasNext=S,_.nextToken=M,C.length>0||N.length>0?this._metadata&&(this._metadata.token=M):w&&this._metadata&&(this._metadata.token=M),c.debug("message changelog sync progress",_),[4,this.saveMetadata()];case 4:return P.sent(),[3,8];case 5:return U=P.sent(),c.debug("message changelog sync error",U),U instanceof ae&&U.isInvalidTokenError?[4,this.clearMetadata()]:[3,7];case 6:P.sent(),P.label=7;case 7:throw U;case 8:return[2,_]}}))}))})),this._connectionEventContext=p.on((function(_){_ instanceof Ao&&(_.stateType===zn.CONNECTED?a.resume():a.pause())}))}return t.of=function(n,e,r){return hu[n]||(hu[n]={}),hu[n][e.url]||(hu[n][e.url]=new t({_iid:n,channel:e,includeParams:r})),hu[n][e.url].ref++,hu[n][e.url]},t.clear=function(n,e){hu[n]&&hu[n][e]&&(hu[n][e].close(),delete hu[n])},t.prototype.loadMetadata=function(){return D(this,void 0,void 0,(function(){var n,e,r,i;return O(this,(function(a){switch(a.label){case 0:return this._metadata?[3,2]:(n=te.of(this._iid),e=n.cacheContext,r=n.firstConnectedAt,[4,e.preference.get(this._metadataKey)]);case 1:i=a.sent(),this._metadata={token:i?i.token:r},a.label=2;case 2:return[2,this._metadata]}}))}))},t.prototype.saveMetadata=function(){return D(this,void 0,void 0,(function(){return O(this,(function(n){switch(n.label){case 0:return this._metadata?[4,te.of(this._iid).cacheContext.preference.set(this._metadataKey,this._metadata)]:[3,2];case 1:return n.sent(),[2,!0];case 2:return[2,!1]}}))}))},t.prototype.clearMetadata=function(){return D(this,void 0,void 0,(function(){return O(this,(function(n){switch(n.label){case 0:return[4,te.of(this._iid).cacheContext.preference.remove(this._metadataKey)];case 1:return n.sent(),this._metadata=void 0,[2]}}))}))},t.prototype.resume=function(){var n=te.of(this._iid),e=n.logger;n.sessionManager.session.hasSession&&(e.debug("message changelog sync resume()"),this._sync.start(0))},t.prototype.pause=function(){te.of(this._iid).logger.debug("message changelog sync pause()"),this._sync.stop()},t.prototype.close=function(){this.ref--,this.ref<=0&&(this.ref=0,this.pause(),this._connectionEventContext.close(),delete hu[this._iid][this._channel.url])},t})(),Ov={},KW=(function(){function t(n){var e=n._iid,r=n.channel,i=n.hasPollMessage,a=this;this.ref=0,this._iid=e,this._channel=r;var s,o,u=te.of(this._iid),c=u.logger,h=u.sdkState,p=u.dispatcher;this._metadataKey=(s=h.userId,o=r.url,"sendbird:".concat(s,"@groupchannel/").concat(o,"/poll/changelogs.meta"));var m=(function(_,b){return"sendbird:".concat(_,"@groupchannel/").concat(b,"/poll/changelogs")})(h.userId,this._channel.url);this._sync=new Td(m,(function(){return D(a,void 0,void 0,(function(){var _,b,C,N,S,M,w,U;return O(this,(function(L){switch(L.label){case 0:return _={hasNext:!0,nextToken:0},[4,this.loadMetadata()];case 1:return L.sent(),c.debug("poll changelog sync from",(U=this._metadata)===null||U===void 0?void 0:U.token),(b=!this._metadata||!this._metadata.token)?[4,i()]:[3,3];case 2:b=!L.sent(),L.label=3;case 3:if(b)return[2,{hasNext:!1,nextToken:0}];this._metadata||(C=te.of(this._iid).firstConnectedAt,this._metadata={token:C}),L.label=4;case 4:return L.trys.push([4,7,,10]),[4,eS.of(this._iid).getPollChangeLogs(this._channel.url,this._channel.channelType,this._metadata.token)];case 5:return N=L.sent(),S=N.hasMore,M=N.token,_.hasNext=S,_.nextToken=M,this._metadata.token=M,c.debug("poll changelog sync progress",_),[4,this.saveMetadata()];case 6:return L.sent(),[3,10];case 7:return w=L.sent(),c.debug("poll changelog sync error",w),w instanceof ae&&w.isInvalidTokenError?[4,this.clearMetadata()]:[3,9];case 8:L.sent(),L.label=9;case 9:throw w;case 10:return[2,_]}}))}))})),this._connectionEventContext=p.on((function(_){_ instanceof Ao&&(_.stateType===zn.CONNECTED?a.resume():a.pause())}))}return t.of=function(n,e,r){return Ov[n]||(Ov[n]={}),Ov[n][e.url]||(Ov[n][e.url]=new t({_iid:n,channel:e,hasPollMessage:r})),Ov[n][e.url].ref++,Ov[n][e.url]},t.prototype.loadMetadata=function(){return D(this,void 0,void 0,(function(){var n;return O(this,(function(e){switch(e.label){case 0:return this._metadata?[3,2]:[4,te.of(this._iid).cacheContext.preference.get(this._metadataKey)];case 1:n=e.sent(),this._metadata=n?{token:n.token}:void 0,e.label=2;case 2:return[2]}}))}))},t.prototype.saveMetadata=function(){return D(this,void 0,void 0,(function(){return O(this,(function(n){switch(n.label){case 0:return this._metadata?[4,te.of(this._iid).cacheContext.preference.set(this._metadataKey,this._metadata)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},t.prototype.clearMetadata=function(){return D(this,void 0,void 0,(function(){return O(this,(function(n){switch(n.label){case 0:return[4,te.of(this._iid).cacheContext.preference.remove(this._metadataKey)];case 1:return n.sent(),this._metadata=void 0,[2]}}))}))},t.prototype.resume=function(){te.of(this._iid).logger.debug("poll changelog sync resume()"),this._sync.start(0)},t.prototype.pause=function(){te.of(this._iid).logger.debug("poll changelog sync pause()"),this._sync.stop()},t.prototype.close=function(){this.ref--,this.ref<=0&&(this.ref=0,this.pause(),this._connectionEventContext.close(),delete Ov[this._iid][this._channel.url])},t})(),YW=(function(t){function n(e){var r,i,a,s,o,u,c,h,p,m,_=this;return(_=t.call(this)||this).method=Ie.GET,_.path="".concat(Gn(e.channelType),"/").concat(e.channelUrl,"/messages_gap"),_.params=ze({prev_start_ts:e.prevStart,prev_end_ts:e.prevEnd,prev_cache_count:e.prevCount,next_start_ts:e.nextStart,next_end_ts:e.nextEnd,next_cache_count:e.nextCount,huge_gap_threshold:(r=e.threshold)!==null&&r!==void 0?r:null,reverse:!0,custom_types:(i=e.customTypes)!==null&&i!==void 0?i:["*"],message_type:(a=e.messageType)!==null&&a!==void 0?a:null,include_reply_type:(s=e.replyType)!==null&&s!==void 0?s:Yi.NONE,include_reactions_summary:(o=e.includeReactions)===null||o===void 0||o,include_meta_array:(u=e.includeMetaArray)===null||u===void 0||u,include_thread_info:(c=e.includeThreadInfo)===null||c===void 0||c,include_parent_message_info:(h=e.includeParentMessageInfo)===null||h===void 0||h,with_sorted_meta_array:(p=e.includeMetaArray)===null||p===void 0||p,show_subchannel_messages_only:(m=e.showSubchannelMessagesOnly)!==null&&m!==void 0&&m,include_poll_details:!0,checking_continuous_messages:e.checkingContinuousMessages}),_}return G(n,t),n})(we),WW=(function(t){function n(e,r){var i,a,s,o,u,c,h=this;return(h=t.call(this,e,r)||this).isHugeGap=r.is_huge_gap,h.prevMessages=((i=r.prev_messages)!==null&&i!==void 0?i:[]).map((function(p){return Da(e,p)})),h.prevHasMore=(a=r.prev_hasmore)!==null&&a!==void 0&&a,h.isContinuousPrevMessages=(s=r.is_continuous_prev_messages)!==null&&s!==void 0&&s,h.nextMessages=((o=r.next_messages)!==null&&o!==void 0?o:[]).map((function(p){return Da(e,p)})),h.nextHasmore=(u=r.next_hasmore)!==null&&u!==void 0&&u,h.isContinuousNextMessages=(c=r.is_continuous_next_messages)!==null&&c!==void 0&&c,h}return G(n,t),n})(xe),DD={includeMetaArray:!0,includeReactions:!0,includeThreadInfo:!0,includeParentMessageInfo:!0};(function(t){t.CACHE_AND_REPLACE_BY_API="cache_and_replace_by_api"})(jA||(jA={}));var wy,Ry,Oy,QW=(function(){function t(){this._onCacheResult=Bt,this._onApiResult=Bt}return t.prototype._invokeResponse=function(n,e,r){var i=this;gt((function(){return D(i,void 0,void 0,(function(){return O(this,(function(a){switch(n){case"local":this._onCacheResult(e,r);break;case"remote":this._onApiResult(e,r)}return[2]}))}))}))},t.prototype.onCacheResult=function(n){return this._onCacheResult=n,this},t.prototype.onApiResult=function(n){return this._onApiResult=n,this},t})(),XW=(function(){function t(n,e){var r=e.filter,i=e.startingPoint,a=e.limit,s=e.prevResultLimit,o=e.nextResultLimit,u=e.channel,c=e.channelManager,h=e.disableBackgroundSync,p=h!==void 0&&h,m=this;this._messages=[],this._unsentMessages=[],this._isLoadingPrevious=!1,this._isLoadingNext=!1,this._iid=n,this._key="mc-".concat(il()),this._isDisposed=!1,this.filter=r??new af,this._channel=u,this._syncRange=new Eu({}),this._hasPrevious=!0,this._hasNext=!0,this._startingPoint=typeof i=="number"&&Number.isFinite(i)?i:Number.MAX_SAFE_INTEGER,this._limit=a||i5,this._prevResultLimit=s??Math.floor(this._limit/2),this._nextResultLimit=o??Math.floor(this._limit/2),this._channelManager=c;var _=te.of(this._iid).statManager;this._channelManager.subscribeChannelEvent(this._key,{onUpdate:function(M,w){var U=w.source,L=M.findIndex((function(P){return P.isIdentical(m.channel)}));L>=0&&(m._replaceChannelOfCollection(M[L]),m.channel._runIfHandleableWithGroupChannel((function(P){switch(U){case Se.EVENT_CHANNEL_UPDATED:for(var x=!1,H=0;H<m._messages.length;H++)if(m._messages[H].createdAt>=P.messageOffsetTimestamp){x=!0;var F=H;if(F>0){var Q=m._messages.splice(0,F);m._removeMessagesFromView(Q.map((function(X){return m.keyOf(X)})),Se.EVENT_MESSAGE_OFFSET_UPDATED)}break}!x&&m._messages.length>0&&m._removeMessagesFromView(m._messages.map((function(X){return m.keyOf(X)})),Se.EVENT_MESSAGE_OFFSET_UPDATED);break;case Se.EVENT_CHANNEL_UNMUTED:var $=te.of(m._iid).sdkState,q=w.user;$.userId===q.userId&&m._clearCheckMyMutedTimer();break;case Se.EVENT_CHANNEL_MUTED:$=te.of(m._iid).sdkState,q=w.user,$.userId===q.userId&&P._myMutedRemainingTime!==-1&&m._startCheckMyMutedTimer(P._myMutedRemainingTime);break;case Se.EVENT_CHANNEL_LEFT:P.isPublic&&m._clearCheckMyMutedTimer()}gt((function(){return D(m,void 0,void 0,(function(){var X;return O(this,(function(V){return MC(U)&&(!((X=this._handler)===null||X===void 0)&&X.onChannelUpdated)&&this._handler.onChannelUpdated(w,this.channel),[2]}))}))}))})),m._postprocessChannelUpdateEvent(M[L],U))},onRemove:function(M,w){var U=M.indexOf(m.channel.url);U>=0&&m._channel._runIfHandleableWithGroupChannel((function(L){L.myMemberState=ii.NONE,m._clearCheckMyMutedTimer(),gt((function(){return D(m,void 0,void 0,(function(){var P;return O(this,(function(x){return!((P=this._handler)===null||P===void 0)&&P.onChannelDeleted&&this._handler.onChannelDeleted(w,this.channel.url),[2]}))}))})),m._postprocessChannelRemoveEvent(M[U])}))}}),this._channelManager.subscribeMessageEvent(this._key,{onUpdate:function(M,w){var U,L,P=[],x=[];try{for(var H=Fe(M),F=H.next();!F.done;F=H.next()){var Q=F.value;Q.channelUrl===m._channel.url&&(m.filter.match(Q)?P.push(Q):x.push(m.keyOf(Q)))}}catch($){U={error:$}}finally{try{F&&!F.done&&(L=H.return)&&L.call(H)}finally{if(U)throw U.error}}if(ad(w)){if(P.length>0)switch(w){case Se.LOCAL_MESSAGE_CANCELED:case Se.LOCAL_MESSAGE_RESEND_STARTED:case Se.EVENT_MESSAGE_SENT_FAILED:case Se.EVENT_MESSAGE_SENT_SUCCESS:case Se.EVENT_MESSAGE_UPDATED:case Se.EVENT_MESSAGE_THREADINFO_UPDATED:case Se.EVENT_MESSAGE_REACTION_UPDATED:case Se.EVENT_MESSAGE_FEEDBACK_ADDED:case Se.EVENT_MESSAGE_FEEDBACK_UPDATED:case Se.EVENT_MESSAGE_FEEDBACK_DELETED:case Se.SYNC_MESSAGE_CHANGELOGS:m._updateMessagesToView(P,w);break;case Se.EVENT_MESSAGE_SENT_PENDING:m._addMessagesToView(P,w);break;case Se.EVENT_MESSAGE_RECEIVED:m.hasNext||m._addMessagesToView(P,w);break;case Se.SYNC_MESSAGE_FILL:m._addMessagesToView(P,w)}x.length>0&&m._removeMessagesFromView(x,w)}m._postprocessMessageUpdateEvent(M,w)},onRemove:function(M,w){m._removeMessagesFromView(M,w),m._postprocessMessageRemoveEvent(M)},onRemoveUnsent:function(M,w){m._removeUnsentMessageFromView(M,w)},onPollChangeLogUpdate:function(M,w){m._updatePollsToView(M,w)},onPollUpdate:function(M,w){m._applyPollUpdateEventToView(M,w)},onPollVote:function(M,w){m._applyPollVoteEventToView(M,w)},onReactionUpdate:function(M,w){m._applyReactionEventToView(M,w)},onThreadInfoUpdate:function(M,w){m._applyThreadInfoEventToView(M,w)},onDeletedByRetentionPolicy:function(M,w,U){w===m.channel.url&&m._messageRetention(M,U)}});var b=te.of(this._iid),C=b.cacheContext,N=b.dispatcher,S=b.messageBackgroundSyncThrottleController;this._channel._updateMessageCollectionLastAccessedAt(),N.dispatch(new mn({channels:[this._channel],context:{source:Se.CHANNEL_LASTACCESSEDAT_UPDATED}})),this._backgroundSync=jW.of(this._iid,this._channel),!p&&this._shouldStartBackgroundSync()&&this._backgroundSync.resume(this._startingPoint),this._changelogSync=$W.of(this._iid,this._channel,this.changelogIncludeParams),this._changelogSync.resume(),this._pollChangelogSync=KW.of(this._iid,this._channel,this._hasPollMessage.bind(this)),this._pollChangelogSync.resume(),this._prevFill=new Td(this._key,(function(M){return D(m,void 0,void 0,(function(){var w=this;return O(this,(function(U){switch(U.label){case 0:return[4,S.run("message-fill-sync-".concat(u.url,"-prev"),(function(){return D(w,void 0,void 0,(function(){var L,P,x,H,F,Q,$;return O(this,(function(q){switch(q.label){case 0:return[4,this._getRemoteMessages(M,{prevLimit:this._prevResultLimit,source:Se.SYNC_MESSAGE_FILL,checkingContinuousMessages:C.localCacheEnabled,sdkSource:Nl.INTERNAL_FILL_GAP})];case 1:return L=q.sent(),P=L.messages,x=L.isContinuousMessages,P.length>0?(H=Math.min.apply(Math,wt([],dt(P.map((function(X){return X.createdAt}))),!1)),this._syncRange.extends(H),x&&((F=this._backgroundSync)===null||F===void 0||F.range.extends(H)),[2,{hasNext:P.length>=this._prevResultLimit&&this.viewTop<H,nextToken:this._syncRange.top}]):(C.localCacheEnabled&&_.put(new Ar({type:fr.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,measured_on:"gap_check",event:"cache_fetch",max_db_size:($=(Q=C.localCacheConfig)===null||Q===void 0?void 0:Q.maxSize)!==null&&$!==void 0?$:0,use_local_cache:C.localCacheEnabled,starting_point:0,message_init_policy:""}})),[2,{hasNext:!1,nextToken:0}])}}))}))}))];case 1:return[2,U.sent()]}}))}))})),this._nextFill=new Td(this._key,(function(M){return D(m,void 0,void 0,(function(){var w=this;return O(this,(function(U){switch(U.label){case 0:return[4,S.run("message-fill-sync-".concat(u.url,"-next"),(function(){return D(w,void 0,void 0,(function(){var L,P,x,H,F,Q,$,q;return O(this,(function(X){switch(X.label){case 0:return[4,this._getRemoteMessages(M,{nextLimit:this._nextResultLimit,source:Se.SYNC_MESSAGE_FILL,checkingHasNext:!0,checkingContinuousMessages:C.localCacheEnabled,sdkSource:Nl.INTERNAL_FILL_GAP})];case 1:return L=X.sent(),P=L.messages,x=L.isContinuousMessages,H=L.hasNext,P.length>0?(F=Math.max.apply(Math,wt([],dt(P.map((function(V){return V.createdAt}))),!1)),this._syncRange.extends(F),x&&((Q=this._backgroundSync)===null||Q===void 0||Q.range.extends(F)),[2,{hasNext:H,nextToken:this._syncRange.bottom}]):(C.localCacheEnabled&&_.put(new Ar({type:fr.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,measured_on:"gap_check",event:"cache_fetch",max_db_size:(q=($=C.localCacheConfig)===null||$===void 0?void 0:$.maxSize)!==null&&q!==void 0?q:0,use_local_cache:C.localCacheEnabled,starting_point:0,message_init_policy:""}})),[2,{hasNext:!1,nextToken:0}])}}))}))}))];case 1:return[2,U.sent()]}}))}))})),this._connectionEventContext=N.on((function(M){if(M instanceof Ao)switch(M.stateType){case zn.CONNECTED:$r((function(){return D(m,void 0,void 0,(function(){return O(this,(function(w){return this._activate(),[2]}))}))}));break;case zn.LOGOUT:m.dispose();break;default:m._clearCheckMyMutedTimer(),m._prevFill.stop(),m._nextFill.stop()}}))}return t.prototype.keyOf=function(n){return 0},Object.defineProperty(t.prototype,"changelogIncludeParams",{get:function(){return{includeReactions:!0,includeThreadInfo:!0,includeMetaArray:!0,includeParentMessageInfo:!0}},enumerable:!1,configurable:!0}),t.prototype._postprocessChannelUpdateEvent=function(n,e){},t.prototype._postprocessChannelRemoveEvent=function(n){},t.prototype._postprocessMessageUpdateEvent=function(n,e){},t.prototype._postprocessMessageRemoveEvent=function(n){},Object.defineProperty(t.prototype,"channel",{get:function(){return this._channel},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"succeededMessages",{get:function(){return wt([],dt(this._messages),!1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"failedMessages",{get:function(){return this._unsentMessages.filter((function(n){return n.sendingStatus===Tn.FAILED}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pendingMessages",{get:function(){return this._unsentMessages.filter((function(n){return n.sendingStatus===Tn.PENDING}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPrevious",{get:function(){return this._hasPrevious},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasNext",{get:function(){return this._hasNext},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"viewTop",{get:function(){return Math.min.apply(Math,wt(wt([],dt(this._messages.map((function(n){return n.createdAt}))),!1),[Number.MAX_SAFE_INTEGER],!1))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"viewBottom",{get:function(){return Math.max.apply(Math,wt(wt([],dt(this._messages.map((function(n){return n.createdAt}))),!1),[0],!1))},enumerable:!1,configurable:!0}),t.prototype._activate=function(){return D(this,void 0,void 0,(function(){return O(this,(function(n){switch(n.label){case 0:return te.of(this._iid).logger.debug("check huge gap"),this._checkHugeGap(),[4,this._refreshChannel(Se.SYNC_CHANNEL_CHANGELOGS)];case 1:return n.sent(),[2]}}))}))},t.prototype._replaceChannelOfCollection=function(n){this._channel.isGroupChannel()?this._channel=n:this._channel.isFeedChannel()&&(this._channel._groupChannel=n._groupChannel)},t.prototype._shouldStartBackgroundSync=function(){var n=te.of(this._iid).cacheContext;return this.channel.isGroupChannel()?n.localCacheEnabled&&!this.channel.isSuper:n.localCacheEnabled},t.prototype._setBaseMessageCollectionHandler=function(n){this._handler=n},t.prototype._filterUnderOffsetMessage=function(n){var e;return this._channel._runIfHandleableWithGroupChannel((function(r){e=n.filter((function(i){return i.createdAt>=r.messageOffsetTimestamp}))})),e!==void 0?e:n},t.prototype._updateChildMessagesInView=function(n){var e=[];return this._messages.forEach((function(r){r instanceof ja&&r.parentMessageId===n.messageId&&r.applyParentMessage(n)&&e.push(r)})),e},t.prototype._updatePollsToView=function(n,e){var r,i,a=this,s=[];try{for(var o=Fe(n),u=o.next();!u.done;u=o.next()){var c=u.value,h=B0(this._messages,c.messageId);if(h>=0){var p=this._messages[h];p.isUserMessage()&&p.applyPoll(c),s.push(p)}}}catch(m){r={error:m}}finally{try{u&&!u.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return s.length>0&&ad(e)&&gt((function(){return D(a,void 0,void 0,(function(){var m,_,b;return O(this,(function(C){return m={source:e},s.length>0&&((b=(_=this._handler).onMessagesUpdated)===null||b===void 0||b.call(_,m,this.channel,s)),[2]}))}))})),s},t.prototype._applyPollUpdateEventToView=function(n,e){var r=this,i=B0(this._messages,n.messageId);if(i>=0){var a=this._messages[i];a&&a.isUserMessage()&&a.poll&&a.poll.applyPollUpdateEvent(n)&&ad(e)&&gt((function(){return D(r,void 0,void 0,(function(){var s,o,u;return O(this,(function(c){return s={source:e},(u=(o=this._handler)===null||o===void 0?void 0:o.onMessagesUpdated)===null||u===void 0||u.call(o,s,this.channel,[a]),[2]}))}))}))}},t.prototype._applyPollVoteEventToView=function(n,e){var r=this,i=B0(this._messages,n.messageId);if(i>=0){var a=this._messages[i];a&&a.isUserMessage()&&a.poll&&a.poll.applyPollVoteEvent(n)&&ad(e)&&gt((function(){return D(r,void 0,void 0,(function(){var s,o,u;return O(this,(function(c){return s={source:e},(u=(o=this._handler)===null||o===void 0?void 0:o.onMessagesUpdated)===null||u===void 0||u.call(o,s,this.channel,[a]),[2]}))}))}))}},t.prototype._applyReactionEventToView=function(n,e){var r=this,i=B0(this._messages,n.messageId);if(i>=0){var a=this._messages[i];a&&(a.isUserMessage()||a.isFileMessage()||a.isMultipleFilesMessage())&&ad(e)&&(a.applyReactionEvent(n),gt((function(){return D(r,void 0,void 0,(function(){var s,o,u;return O(this,(function(c){return s={source:e},(u=(o=this._handler)===null||o===void 0?void 0:o.onMessagesUpdated)===null||u===void 0||u.call(o,s,this.channel,[a]),[2]}))}))})))}},t.prototype._applyThreadInfoEventToView=function(n,e){var r=this,i=B0(this._messages,n.targetMessageId);if(i>=0){var a=this._messages[i];a&&(a.isUserMessage()||a.isFileMessage()||a.isMultipleFilesMessage())&&ad(e)&&(a.applyThreadInfoUpdateEvent(n),gt((function(){return D(r,void 0,void 0,(function(){var s,o,u;return O(this,(function(c){return s={source:e},(u=(o=this._handler)===null||o===void 0?void 0:o.onMessagesUpdated)===null||u===void 0||u.call(o,s,this.channel,[a]),[2]}))}))})))}},t.prototype._removeMessagesFromView=function(n,e){var r,i,a=this,s=[],o=[],u=function(m){var _=c._messages.findIndex((function(C){return a.keyOf(C)===m}));if(_>=0){var b=c._messages[_];s.push(c.keyOf(b)),o.push(b),c._messages.splice(_,1)}},c=this;try{for(var h=Fe(n),p=h.next();!p.done;p=h.next())u(p.value)}catch(m){r={error:m}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}return ad(e)&&o.length>0&&gt((function(){return D(a,void 0,void 0,(function(){var m,_,b;return O(this,(function(C){return m={source:e},(b=(_=this._handler)===null||_===void 0?void 0:_.onMessagesDeleted)===null||b===void 0||b.call(_,m,this.channel,s,o),[2]}))}))})),s},t.prototype._messageRetention=function(n,e){var r,i,a=[];try{for(var s=Fe(this._messages),o=s.next();!o.done;o=s.next()){var u=o.value;u.createdAt<=n&&a.push(this.keyOf(u))}}catch(c){r={error:c}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}a.length>0&&this._removeMessagesFromView(a,e)},t.prototype._removeUnsentMessageFromView=function(n,e){var r=this._unsentMessages.findIndex((function(i){return i.reqId===n}));r>=0&&this._unsentMessages.splice(r,1)},t.prototype._getLocalMessages=function(n,e){var r=e.prevLimit,i=r===void 0?0:r,a=e.nextLimit,s=a===void 0?0:a,o=e.inclusive,u=o===void 0||o;return D(this,void 0,void 0,(function(){var c,h,p,m,_;return O(this,(function(b){switch(b.label){case 0:return c=[],u?[4,this._channelManager.getExactlyMatchingMessagesForTokenFromCache(this._channel.url,n,this.filter)]:[3,2];case 1:c=b.sent(),b.label=2;case 2:return i>0?[4,this._channelManager.getMessagesFromCache(this._channel.url,n,"prev",this.filter,i,!1)]:[3,4];case 3:return p=b.sent(),[3,5];case 4:p=[],b.label=5;case 5:return h=p,s>0?[4,this._channelManager.getMessagesFromCache(this._channel.url,n,"next",this.filter,s,!1)]:[3,7];case 6:return _=b.sent(),[3,8];case 7:_=[],b.label=8;case 8:return m=_,[2,{messages:wt(wt(wt([],dt(c),!1),dt(h),!1),dt(m),!1).sort((function(C,N){return N.createdAt-C.createdAt})),prevMessagesCount:h.length,nextMessagesCount:m.length}]}}))}))},t.prototype._getRemoteMessages=function(n,e){var r=e.prevLimit,i=r===void 0?0:r,a=e.nextLimit,s=a===void 0?0:a,o=e.source,u=o===void 0?Se.REQUEST_MESSAGE:o,c=e.reverse,h=c!==void 0&&c,p=e.checkingHasNext,m=p!==void 0&&p,_=e.checkingContinuousMessages,b=_!==void 0&&_,C=e.sdkSource;return D(this,void 0,void 0,(function(){var N,S;return O(this,(function(M){switch(M.label){case 0:return N=Ki.of(this._iid),i>0||s>0?[4,N._getMessagesByTimestampForCollection(this._channel.url,this._channel.channelType,n,ht(Z(Z(Z({},this.filter),DD),{isInclusive:!0,reverse:h,prevResultSize:i,nextResultSize:s})),u,m,b,C)]:[3,2];case 1:return S=M.sent(),[3,3];case 2:S={messages:[],isContinuousMessages:!1},M.label=3;case 3:return[2,S]}}))}))},t.prototype._checkHugeGap=function(){var n,e,r,i,a;return D(this,void 0,void 0,(function(){var s,o,u,c,h,p,m,_,b,C,N,S,M,w,U,L,P,x,H,F,Q,$,q,X,V,ee=this;return O(this,(function(z){switch(z.label){case 0:return s=te.of(this._iid),o=s.dispatcher,u=s.requestQueue,c=s.cacheContext,h=s.statManager,p=s.logger,this._messages.length>0?(m=this._syncRange.top,_=this.viewTop,b=this._syncRange.bottom,C=this.hasNext?this.viewBottom:Number.MAX_SAFE_INTEGER,[4,this._channelManager.getCachedMessageCountBetween(this._channel.url,this.filter,_,m)]):[3,8];case 1:return N=z.sent(),[4,this._channelManager.getCachedMessageCountBetween(this._channel.url,this.filter,b,C)];case 2:S=z.sent(),z.label=3;case 3:return z.trys.push([3,5,6,7]),[4,FS((function(){return D(ee,void 0,void 0,(function(){var ie,se,he,pe,K,ce,me,Le,ge,Ee,Ye,tt,yt,Ht,zt,Xt,Jt,Mt=this;return O(this,(function(jt){switch(jt.label){case 0:return ie=new YW(Z(Z({channelUrl:this._channel.url,channelType:this._channel.channelType,prevStart:_,prevEnd:m,prevCount:N,nextStart:b,nextEnd:C,nextCount:S,checkingContinuousMessages:c.localCacheEnabled},this.filter),DD)),[4,u.send(ie)];case 1:return se=jt.sent(),he=se.as(WW),pe=he.isHugeGap,K=he.prevMessages,ce=K===void 0?[]:K,me=he.prevHasMore,Le=he.isContinuousPrevMessages,ge=he.nextMessages,Ee=ge===void 0?[]:ge,Ye=he.nextHasmore,tt=he.isContinuousNextMessages,pe?gt((function(){return D(Mt,void 0,void 0,(function(){var en;return O(this,(function(Dt){return!((en=this._handler)===null||en===void 0)&&en.onHugeGapDetected&&this._handler.onHugeGapDetected(),[2]}))}))})):(yt=this.viewTop,Ht=this.viewBottom,zt=Math.min.apply(Math,wt([Number.MAX_SAFE_INTEGER,yt],dt(ce.map((function(en){return en.createdAt}))),!1)),Xt=Math.max.apply(Math,wt([0,Ht],dt(Ee.map((function(en){return en.createdAt}))),!1)),o.dispatch(new Br({messages:ce,source:Se.SYNC_MESSAGE_FILL})),o.dispatch(new Br({messages:Ee,source:Se.SYNC_MESSAGE_FILL})),this._syncRange.extends(zt,Xt),(Le||tt)&&((Jt=this._backgroundSync)===null||Jt===void 0||Jt.range.extends(zt,Xt)),me&&this._prevFill.start(zt),Ye&&this._nextFill.start(Xt)),[2]}}))}))}),1)];case 4:return z.sent(),[3,7];case 5:return M=z.sent(),p.debug("Failed HugeGap Check ",M),[3,7];case 6:return c.localCacheEnabled&&h.put(new Ar({type:fr.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,measured_on:"gap_check",event:"cache_fetch",max_db_size:(e=(n=c.localCacheConfig)===null||n===void 0?void 0:n.maxSize)!==null&&e!==void 0?e:0,use_local_cache:c.localCacheEnabled,starting_point:0,message_init_policy:""}})),[7];case 7:return[3,13];case 8:w=Date.now(),z.label=9;case 9:return z.trys.push([9,11,12,13]),[4,this._getRemoteMessages(w,{prevLimit:this._prevResultLimit,nextLimit:this._nextResultLimit,source:Se.SYNC_MESSAGE_FILL,checkingHasNext:!0,checkingContinuousMessages:c.localCacheEnabled,sdkSource:Nl.INTERNAL_FILL_GAP})];case 10:if(U=z.sent(),L=U.messages,P=U.isContinuousMessages,x=U.hasNext,L.length>0){for(H=L.map((function(ie){return ie.createdAt})),F=0,Q=0,$=0;$<H.length;$++)(q=H[$])<=w?F++:q>=w&&Q++;this._hasPrevious=F>=this._prevResultLimit,this._hasNext=x??Q>=this._nextResultLimit,(V=this._syncRange).extends.apply(V,wt([],dt(H),!1)),P&&((r=this._backgroundSync)===null||r===void 0||r.range.extends(this._syncRange.top,this._syncRange.bottom)),this._addMessagesToView(L,Se.SYNC_MESSAGE_FILL)}else this._hasPrevious=!1,this._hasNext=!1;return[3,13];case 11:return(X=z.sent())instanceof ae&&X.code===et.NOT_FOUND_IN_DATABASE&&(this._hasPrevious=!1,this._hasNext=!1),[3,13];case 12:return c.localCacheEnabled&&h.put(new Ar({type:fr.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,measured_on:"gap_check",event:"cache_fetch",max_db_size:(a=(i=c.localCacheConfig)===null||i===void 0?void 0:i.maxSize)!==null&&a!==void 0?a:0,use_local_cache:c.localCacheEnabled,starting_point:0,message_init_policy:""}})),[7];case 13:return[2]}}))}))},t.prototype._loadUnsentMessages=function(){return D(this,void 0,void 0,(function(){var n;return O(this,(function(e){switch(e.label){case 0:return n=this,[4,this._channelManager.getUnsentMessagesFromCache(this._channel.url,this.filter)];case 1:return n._unsentMessages=e.sent(),[2]}}))}))},t.prototype._hasPollMessage=function(){return D(this,void 0,void 0,(function(){return O(this,(function(n){switch(n.label){case 0:return[4,this._channelManager.getPollMessagesFromCache(this._channel.url,Date.now()+6e5,this.filter,1)];case 1:return n.sent().length>0?[2,!0]:[2,!1]}}))}))},t.prototype._refreshChannel=function(n,e){return e===void 0&&(e=!1),D(this,void 0,void 0,(function(){var r,i,a=this;return O(this,(function(s){switch(s.label){case 0:r=te.of(this._iid).logger,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this._channelManager.refreshChannel(this.channel.url,!0,n,e)];case 2:return s.sent(),this.channel._runIfHandleableWithGroupChannel((function(o){o.myMutedState===Ml.MUTED&&$r((function(){return D(a,void 0,void 0,(function(){var u;return O(this,(function(c){switch(c.label){case 0:return[4,this.channel.getMyMutedInfo()];case 1:return(u=c.sent()).isMuted&&u.remainingDuration!==-1&&this._startCheckMyMutedTimer(u.remainingDuration),[2]}}))}))}))})),[3,4];case 3:return i=s.sent(),r.warn("Failed to refresh channel",i),[3,4];case 4:return[2]}}))}))},t.prototype._startCheckMyMutedTimer=function(n){var e=this;this._clearCheckMyMutedTimer(),this._checkMyMutedStateTimer=setTimeout((function(){return D(e,void 0,void 0,(function(){var r,i,a,s=this;return O(this,(function(o){switch(o.label){case 0:this._checkMyMutedStateTimer=void 0,r=!0,o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,this._channel.getMyMutedInfo()];case 2:return i=o.sent(),r=!i.isMuted,[3,5];case 3:return o.sent(),r=!0,[3,5];case 4:return r&&(a=te.of(this._iid).sessionManager,this.channel._runIfHandleableWithGroupChannel((function(u){var c,h;u.myMutedState=Ml.UNMUTED;var p={source:Se.EVENT_CHANNEL_UNMUTED,user:a.currentUser};(h=(c=s._handler)===null||c===void 0?void 0:c.onChannelUpdated)===null||h===void 0||h.call(c,p,s.channel)}))),[7];case 5:return[2]}}))}))}),n+1e3)},t.prototype._clearCheckMyMutedTimer=function(){this._checkMyMutedStateTimer&&(clearTimeout(this._checkMyMutedStateTimer),this._checkMyMutedStateTimer=void 0)},t.prototype._setHasNextAndHasPrevious=function(n,e){for(var r=n.map((function(u){return u.createdAt})),i=0,a=0,s=0;s<r.length;s++){var o=r[s];o<this._startingPoint?i++:o>this._startingPoint&&a++}this._hasPrevious=i>=this._prevResultLimit,this._hasNext=e??a>=this._nextResultLimit},t.prototype.initialize=function(n){var e=this,r=new QW;this._messages=[],this._unsentMessages=[],this._syncRange=new Eu({}),this._hasNext=!0,this._hasPrevious=!0;var i=[],a={messages:[],prevMessagesCount:0,nextMessagesCount:0};return gt((function(){return D(e,void 0,void 0,(function(){var s,o,u,c,h,p=this;return O(this,(function(m){switch(m.label){case 0:return[4,(h=this._backgroundSync)===null||h===void 0?void 0:h.loadMetadata()];case 1:return s=m.sent(),o=te.of(this._iid),u=o.cacheContext,c=o.statManager,n===jA.CACHE_AND_REPLACE_BY_API&&this._getLocalMessages(this._startingPoint,{prevLimit:this._prevResultLimit,nextLimit:this._nextResultLimit}).then((function(_){return D(p,void 0,void 0,(function(){return O(this,(function(b){switch(b.label){case 0:return a=_,i=this._filterUnderOffsetMessage(a.messages),this._addMessagesToView(i,Se.REQUEST_MESSAGE),[4,this._loadUnsentMessages()];case 1:return b.sent(),r._invokeResponse("local",null,i),[2]}}))}))})).catch((function(_){if($a(_))throw _;r._invokeResponse("local",_,null)})).finally((function(){return D(p,void 0,void 0,(function(){var _,b,C,N,S,M,w,U=this;return O(this,(function(L){switch(L.label){case 0:return _=te.of(this._iid).cacheContext,b=!0,C=!0,N=!1,_.localCacheEnabled&&(i.length>0&&(S=s.range).includes.apply(S,wt([],dt(i.map((function(P){return P.createdAt}))),!1))?!s.previousComplete&&a.prevMessagesCount<this._prevResultLimit?C=!0:this._startingPoint>s.range.bottom||a.nextMessagesCount<this._nextResultLimit?N=!0:C=!1:i.length===0&&(N=!0)),[4,this._refreshChannel(Se.REFRESH_CHANNEL,N)];case 1:return L.sent(),N&&this._channel._runIfHandleableWithGroupChannel((function(P){var x=Math.max.apply(Math,wt([],dt(i.map((function(H){return H.createdAt}))),!1));P._latestMessageInfo&&x>=P._latestMessageInfo.createdAt&&(C=!1)})),C?(b=!1,this._getRemoteMessages(this._startingPoint,{prevLimit:this._prevResultLimit,nextLimit:this._nextResultLimit,reverse:!0,checkingHasNext:!0,checkingContinuousMessages:_.localCacheEnabled,sdkSource:Nl.EXTERNAL_COLLECTION}).then((function(P){var x,H,F,Q=P.messages,$=P.isContinuousMessages,q=P.hasNext,X=U._filterUnderOffsetMessage(Q);U._messages=[],X.length>0?(U._setHasNextAndHasPrevious(X,q),(x=U._syncRange).extends.apply(x,wt([],dt(X.map((function(V){return V.createdAt}))),!1)),$&&(!((H=U._backgroundSync)===null||H===void 0)&&H.range.overlap(U._syncRange))&&((F=U._backgroundSync)===null||F===void 0||F.range.extends(U._syncRange.top,U._syncRange.bottom)),U._addMessagesToView(X,Se.REQUEST_MESSAGE)):(U._hasPrevious=!1,U._hasNext=!1),r._invokeResponse("remote",null,X)})).catch((function(P){if($a(P))throw P;r._invokeResponse("remote",P,null)}))):(this._setHasNextAndHasPrevious(i),r._invokeResponse("remote",null,i)),_.localCacheEnabled&&c.put(new Ar({type:fr.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,starting_point:this._startingPoint,measured_on:"initial_load",event:b?"cache_hit":"cache_miss",max_db_size:(w=(M=_.localCacheConfig)===null||M===void 0?void 0:M.maxSize)!==null&&w!==void 0?w:0,message_init_policy:n,use_local_cache:_.localCacheEnabled,collection_id:this._key}})),[2]}}))}))})),c.put(new $y({type:fr.FEATURE_LOCALCACHE,data:{use_local_cache:u.localCacheEnabled,collection_interface:{message_init_policy:n,message:!0}}})),[2]}}))}))})),r},t.prototype.loadPrevious=function(){var n,e,r;return D(this,void 0,void 0,(function(){var i,a,s,o,u,c,h,p,m=this;return O(this,(function(_){switch(_.label){case 0:if(this._isDisposed)throw new ae({code:et.COLLECTION_DISPOSED,message:"Collection has been disposed."});return i=te.of(this._iid),a=i.cacheContext,s=i.statManager,o=i.logger,this._hasPrevious?this._isLoadingPrevious?(o.warn("Messages are already fetching."),[2,[]]):(this._isLoadingPrevious=!0,u=this.viewTop,c=[],[4,$r((function(){return D(m,void 0,void 0,(function(){var b;return O(this,(function(C){switch(C.label){case 0:return[4,this._getLocalMessages(u,{prevLimit:this._prevResultLimit,inclusive:!1})];case 1:return b=C.sent(),c=this._filterUnderOffsetMessage(b.messages),[2]}}))}))}))]):[2,[]];case 1:return _.sent(),h=c.length>=this._prevResultLimit,a.localCacheEnabled&&s.put(new Ar({type:fr.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,starting_point:this._startingPoint,measured_on:"load_prev",event:h?"cache_hit":"cache_miss",max_db_size:(e=(n=a.localCacheConfig)===null||n===void 0?void 0:n.maxSize)!==null&&e!==void 0?e:0,use_local_cache:a.localCacheEnabled,collection_id:this._key,message_init_policy:""}})),h&&(!((r=this._backgroundSync)===null||r===void 0)&&r.isWrappingMessages(c))?[3,3]:(p=!1,[4,$r((function(){return D(m,void 0,void 0,(function(){var b,C,N,S,M,w,U,L=this;return O(this,(function(P){switch(P.label){case 0:return b=te.of(this._iid).cacheContext,[4,this._getRemoteMessages(u,{prevLimit:this._prevResultLimit,reverse:!0,checkingContinuousMessages:b.localCacheEnabled,sdkSource:Nl.EXTERNAL_COLLECTION})];case 1:return C=P.sent(),(c=this._filterUnderOffsetMessage(C.messages)).length>0&&((N=this._syncRange).extends.apply(N,wt([],dt(c.map((function(x){return x.createdAt}))),!1)),!((S=this._backgroundSync)===null||S===void 0)&&S.range.overlap(this._syncRange)&&C.isContinuousMessages&&(p=!0,(M=this._backgroundSync)===null||M===void 0||M.range.extends(this._syncRange.top))),c=c.filter((function(x){return $o(L._messages,x)<0})),this._hasPrevious=c.length>=this._prevResultLimit,b.localCacheEnabled&&p&&s.put(new Ar({type:fr.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,starting_point:this._startingPoint,measured_on:"load_prev",event:"cache_fetch",max_db_size:(U=(w=b.localCacheConfig)===null||w===void 0?void 0:w.maxSize)!==null&&U!==void 0?U:0,use_local_cache:b.localCacheEnabled,collection_id:this._key,message_init_policy:""}})),[2]}}))}))}))]);case 2:return _.sent(),this._addMessagesToView(c,Se.REQUEST_MESSAGE),[3,4];case 3:this._hasPrevious=c.length>=this._prevResultLimit,c.length>0&&this._addMessagesToView(c,Se.REQUEST_MESSAGE),_.label=4;case 4:return this._isLoadingPrevious=!1,[2,c]}}))}))},t.prototype.loadNext=function(){var n,e,r;return D(this,void 0,void 0,(function(){var i,a,s,o,u,c,h,p,m=this;return O(this,(function(_){switch(_.label){case 0:if(this._isDisposed)throw new ae({code:et.COLLECTION_DISPOSED,message:"Collection has been disposed."});return i=te.of(this._iid),a=i.cacheContext,s=i.statManager,o=i.logger,this._hasNext?this._isLoadingNext?(o.warn("Messages are already fetching."),[2,[]]):(this._isLoadingNext=!0,u=this.viewBottom,c=[],[4,$r((function(){return D(m,void 0,void 0,(function(){var b;return O(this,(function(C){switch(C.label){case 0:return[4,this._getLocalMessages(u,{nextLimit:this._nextResultLimit,inclusive:!1})];case 1:return b=C.sent(),c=this._filterUnderOffsetMessage(b.messages),[2]}}))}))}))]):[2,[]];case 1:return _.sent(),h=c.length>=this._nextResultLimit,a.localCacheEnabled&&s.put(new Ar({type:fr.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,starting_point:this._startingPoint,measured_on:"load_next",event:h?"cache_hit":"cache_miss",max_db_size:(e=(n=a.localCacheConfig)===null||n===void 0?void 0:n.maxSize)!==null&&e!==void 0?e:0,use_local_cache:a.localCacheEnabled,collection_id:this._key,message_init_policy:""}})),h&&(!((r=this._backgroundSync)===null||r===void 0)&&r.isWrappingMessages(c))?[3,3]:(p=!1,[4,$r((function(){return D(m,void 0,void 0,(function(){var b,C,N,S,M,w,U,L,P=this;return O(this,(function(x){switch(x.label){case 0:return b=te.of(this._iid).cacheContext,[4,this._getRemoteMessages(u,{nextLimit:this._nextResultLimit,reverse:!0,checkingHasNext:!0,checkingContinuousMessages:b.localCacheEnabled,sdkSource:Nl.EXTERNAL_COLLECTION})];case 1:return C=x.sent(),(c=this._filterUnderOffsetMessage(C.messages)).length>0&&((N=this._syncRange).extends.apply(N,wt([],dt(c.map((function(H){return H.createdAt}))),!1)),!((S=this._backgroundSync)===null||S===void 0)&&S.range.overlap(this._syncRange)&&C.isContinuousMessages&&(p=!0,(M=this._backgroundSync)===null||M===void 0||M.range.extends(this._syncRange.bottom))),c=c.filter((function(H){return $o(P._messages,H)<0})),this._hasNext=(w=C.hasNext)!==null&&w!==void 0?w:c.length>=this._nextResultLimit,b.localCacheEnabled&&p&&s.put(new Ar({type:fr.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,starting_point:this._startingPoint,measured_on:"load_next",event:"cache_fetch",max_db_size:(L=(U=b.localCacheConfig)===null||U===void 0?void 0:U.maxSize)!==null&&L!==void 0?L:0,use_local_cache:b.localCacheEnabled,collection_id:this._key,message_init_policy:""}})),[2]}}))}))}))]);case 2:return _.sent(),this._addMessagesToView(c,Se.REQUEST_MESSAGE),[3,4];case 3:this._hasNext=c.length>=this._nextResultLimit,c.length>0&&this._addMessagesToView(c,Se.REQUEST_MESSAGE),_.label=4;case 4:return this._isLoadingNext=!1,[2,c]}}))}))},t.prototype.removeFailedMessage=function(n){return D(this,void 0,void 0,(function(){var e;return O(this,(function(r){switch(r.label){case 0:if(this._isDisposed)throw new ae({code:et.COLLECTION_DISPOSED,message:"Collection has been disposed."});return[4,this._channelManager.removeFailedMessageFromCache(n)];case 1:return r.sent(),(e=this._unsentMessages.findIndex((function(i){return i.reqId===n})))>-1&&this._unsentMessages.splice(e,1),[2]}}))}))},t.prototype.dispose=function(){var n,e,r,i=this;if(!this._isDisposed){this._isDisposed=!0;var a=te.of(this._iid),s=a.cacheContext,o=a.dispatcher;this._messages=[],this._clearCheckMyMutedTimer(),this._channel._runIfHandleableWithGroupChannel((function(u){u.myMemberState!==ii.NONE&&(i._channel._updateMessageCollectionLastAccessedAt(),o.dispatch(new mn({channels:[i._channel],context:{source:Se.CHANNEL_LASTACCESSEDAT_UPDATED}})))})),s.localCacheEnabled&&(this._prevFill.stop(),this._nextFill.stop()),(n=this._backgroundSync)===null||n===void 0||n.close(),(e=this._changelogSync)===null||e===void 0||e.close(),(r=this._pollChangelogSync)===null||r===void 0||r.close(),this._channelManager.unsubscribeChannelEvent(this._key),this._channelManager.unsubscribeMessageEvent(this._key),this._connectionEventContext&&this._connectionEventContext.close()}},t})(),ZW=(function(t){function n(e,r){return t.call(this,e,Z(Z({},r),{channelManager:ji.of(e)}))||this}return G(n,t),n.prototype.keyOf=function(e){return e.messageId},n.prototype.initialize=function(e){return t.prototype.initialize.call(this,e)},n.prototype.setMessageCollectionHandler=function(e){this._setBaseMessageCollectionHandler(e)},n.prototype._addMessagesToView=function(e,r){var i,a,s=this,o=this._filterUnderOffsetMessage(e),u=[],c=[];try{for(var h=Fe(o),p=h.next();!p.done;p=h.next()){var m=p.value;if(r===Se.SYNC_MESSAGE_FILL)if(m.messageId>0){if((N=$o(this._messages,m))<0){$o(this._unsentMessages,m)<0&&u.push(m);var _=dN(this._messages,m);this._messages.splice(_,0,m)}}else m instanceof ai&&(N=$o(this._unsentMessages,m))<0&&$o(this._messages,m)<0&&(this._unsentMessages.push(m),u.push(m));else if(m.messageId>0){if((N=$o(this._messages,m))<0){var b=$o(this._unsentMessages,m);b<0?u.push(m):(this._unsentMessages.splice(b,1),c.push(m)),_=dN(this._messages,m),this._messages.splice(_,0,m)}else c.push(m),this._messages[N]=m;if(m.updatedAt>0){var C=this._updateChildMessagesInView(m);c.push.apply(c,wt([],dt(C),!1))}}else if(m instanceof ai){var N;(N=$o(this._unsentMessages,m))<0?$o(this._messages,m)<0&&(this._unsentMessages.push(m),u.push(m)):(c.push(m),this._unsentMessages[N]=m)}}}catch(S){i={error:S}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}ad(r)&&gt((function(){return D(s,void 0,void 0,(function(){var S,M,w,U,L;return O(this,(function(P){return S={source:r},u.length>0&&((w=(M=this._handler)===null||M===void 0?void 0:M.onMessagesAdded)===null||w===void 0||w.call(M,S,this.channel,u)),c.length>0&&((L=(U=this._handler)===null||U===void 0?void 0:U.onMessagesUpdated)===null||L===void 0||L.call(U,S,this.channel,c)),[2]}))}))}))},n.prototype._updateMessagesToView=function(e,r){var i,a,s=this,o=[],u=[],c=[];try{for(var h=Fe(e),p=h.next();!p.done;p=h.next()){var m,_=p.value;if(_.messageId>0)if((m=$o(this._messages,_))>=0)u.push(_),this._messages[m]=_;else{var b=$o(this._unsentMessages,_);if(b>=0){var C=dt(this._unsentMessages.splice(b,1),1)[0];if(this.hasNext&&C)c.push(C);else{u.push(_);var N=dN(this._messages,_);this._messages.splice(N,0,_)}}else{var S=this._messages.map((function(M){return M.createdAt}));(_.createdAt<Math.min.apply(Math,wt([],dt(S),!1))&&!this._hasPrevious||_.createdAt>Math.max.apply(Math,wt([],dt(S),!1))&&!this._hasNext)&&o.push(_)}}else _ instanceof ai&&(m=$o(this._unsentMessages,_))>=0&&(u.push(_),this._unsentMessages[m]=_)}}catch(M){i={error:M}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}return ad(r)&&gt((function(){return D(s,void 0,void 0,(function(){var M,w,U,L,P;return O(this,(function(x){return M={source:r},u.length>0?(U=(w=this._handler)===null||w===void 0?void 0:w.onMessagesUpdated)===null||U===void 0||U.call(w,M,this.channel,u):c.length>0?(P=(L=this._handler)===null||L===void 0?void 0:L.onMessagesDeleted)===null||P===void 0||P.call(L,M,this.channel,[],c):o.length>0&&this._addMessagesToView(o,r),[2]}))}))})),u},n})(XW),JW={coverUrl:void 0,coverImage:void 0,isDistinct:void 0,isPublic:void 0,isDiscoverable:void 0,accessCode:void 0,name:void 0,data:void 0,customType:void 0,operatorUserIds:void 0,messageSurvivalSeconds:void 0},eQ=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.token,s=e.limit,o=e.order,u=e.mutedMemberFilter,c=e.memberStateFilter,h=e.nicknameStartsWithFilter,p=e.operatorFilter;return(r=t.call(this)||this).method=Ie.GET,r.path="".concat(Ya,"/").concat(encodeURIComponent(i),"/members"),r.params={token:a,limit:s,order:o,muted_member_filter:u,member_state_filter:c,nickname_startswith:h,operator_filter:p,show_member_is_muted:!0,show_read_receipt:!0,show_delivery_receipt:!0},r}return G(n,t),n})(we),tQ=(function(t){function n(e,r){var i=t.call(this,e,r)||this;i.members=[];var a=r.next,s=r.members;return i.token=a,s&&s.length>0&&(i.members=s.map((function(o){return new el(e,o)}))),i}return G(n,t),n})(xe);(function(t){t.ALL="all",t.MUTED="muted",t.UNMUTED="unmuted"})(wy||(wy={})),(function(t){t.MEMBER_NICKNAME_ALPHABETICAL="member_nickname_alphabetical",t.OPERATOR_THEN_MEMBER_ALPHABETICAL="operator_then_member_alphabetical"})(Ry||(Ry={})),(function(t){t.ALL="all",t.JOINED="joined_only",t.INVITED="invited_only",t.INVITED_BY_FRIEND="invited_by_friend",t.INVITED_BY_NON_FRIEND="invited_by_non_friend"})(Oy||(Oy={}));var nQ=(function(t){function n(e,r,i){var a,s,o,u,c=this;return(c=t.call(this,e,r,yn.GROUP,i)||this).mutedMemberFilter=wy.ALL,c.memberStateFilter=Oy.ALL,c.nicknameStartsWithFilter=null,c.operatorFilter=uS.ALL,c.order=Ry.MEMBER_NICKNAME_ALPHABETICAL,c.mutedMemberFilter=(a=i.mutedMemberFilter)!==null&&a!==void 0?a:wy.ALL,c.memberStateFilter=(s=i.memberStateFilter)!==null&&s!==void 0?s:Oy.ALL,c.nicknameStartsWithFilter=(o=i.nicknameStartsWithFilter)!==null&&o!==void 0?o:null,c.order=(u=i.order)!==null&&u!==void 0?u:Ry.MEMBER_NICKNAME_ALPHABETICAL,c}return G(n,t),n.prototype._validate=function(){return t.prototype._validate.call(this)&&dn(wy,this.mutedMemberFilter)&&dn(Oy,this.memberStateFilter)&&(re("string",this.nicknameStartsWithFilter)||this.nicknameStartsWithFilter===null)&&dn(uS,this.operatorFilter)&&dn(Ry,this.order)},n.prototype.next=function(){return D(this,void 0,void 0,(function(){var e,r,i,a,s,o;return O(this,(function(u){switch(u.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=te.of(this._iid).requestQueue,r=new eQ(ht(Z(Z({},this),{token:this._token}))),[4,e.send(r)]):[3,2]:[3,5];case 1:return i=u.sent(),a=i.as(tQ),s=a.members,o=a.token,this._token=o,this._hasNext=!!o,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw ae.queryInProgress;case 4:return[3,6];case 5:throw ae.invalidParameters;case 6:return[2]}}))}))},n})(Ac),rQ=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.userId,s=e.accessCode;return(r=t.call(this)||this).method=Ie.PUT,r.path="".concat(Ya,"/").concat(encodeURIComponent(i),"/accept"),r.params={user_id:a,access_code:s},r}return G(n,t),n})(we),iQ=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.channel=new al(e,r),i.channel.myMemberState=ii.JOINED,i}return G(n,t),n})(xe),aQ=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.isDistinct,s=e.isPublic,o=e.isDiscoverable,u=e.coverUrl,c=e.coverImage,h=e.accessCode,p=e.name,m=e.data,_=e.customType,b=e.operatorUserIds,C=e.messageSurvivalSeconds;return(r=t.call(this)||this).method=Ie.PUT,r.path="".concat(Ya,"/").concat(encodeURIComponent(i)),r.params=ze({is_distinct:a,is_public:s,is_discoverable:o,name:p,data:m,custom_type:_,cover_url:u,cover_file:c,access_code:h,operator_ids:b,message_survival_seconds:C}),r}return G(n,t),n})(we),sQ=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.channel=new al(e,r),i}return G(n,t),n})(xe),oQ=(function(t){function n(e){var r=this,i=e.channelUrl;return(r=t.call(this)||this).method=Ie.DELETE,r.path="".concat(Ya,"/").concat(encodeURIComponent(i)),r}return G(n,t),n})(we);(function(t){function n(e,r){return t.call(this,e,r)||this}G(n,t)})(xe);var lQ=(function(t){function n(e){var r=this,i=e.channelUrl;return(r=t.call(this)||this).method=Ie.DELETE,r.path="".concat(Ya,"/").concat(encodeURIComponent(i),"/hide"),r}return G(n,t),n})(we);(function(t){function n(){return t!==null&&t.apply(this,arguments)||this}G(n,t)})(xe);var uQ=(function(t){function n(e){var r=e.userId,i=e.channelUrl,a=e.countPreference,s=t.call(this)||this;return s.method=Ie.PUT,s.path="".concat(jn,"/").concat(encodeURIComponent(r),"/count_preference/").concat(encodeURIComponent(i)),s.params={count_preference:a},s}return G(n,t),n})(we),cQ=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.countPreference=r.count_preference,i}return G(n,t),n})(xe),dQ=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.locale;return(r=t.call(this)||this).method=Ie.PUT,r.path="".concat(Ya,"/").concat(encodeURIComponent(i),"/reset_user_history"),r.params=ze({locale:a}),r}return G(n,t),n})(we),hQ=(function(t){function n(e,r){var i=t.call(this,e,r)||this,a=r.ts_message_offset;return i.messageOffsetTimestamp=a,i}return G(n,t),n})(xe),fQ=Z(Z({},Rw),{scheduledAt:void 0,file:void 0,fileUrl:void 0,fileName:void 0,mimeType:void 0,fileSize:void 0,thumbnailSizes:void 0,requireAuth:!1}),vQ=Z(Z({},$P),{scheduledAt:void 0}),pQ=(function(t){function n(e){var r,i,a=this;a=t.call(this)||this;var s=[];e.mentionType===Oa.USERS&&(e.mentionedUserIds?s=e.mentionedUserIds:e.mentionedUsers&&(s=e.mentionedUsers.map((function(h){return h.userId}))));var o=e.channelType,u=e.channelUrl,c=e.scheduledMessageId;return a.method=Ie.PUT,a.path="".concat(Gn(o),"/").concat(encodeURIComponent(u),"/scheduled_messages/").concat(encodeURIComponent(c)),a.params=ze(ht({req_id:e.reqId,scheduled_at:e.scheduledAt,message_type:yg.FILE,url:e.fileUrl,file_name:e.fileName,file_size:e.fileSize,file_type:e.mimeType,thumbnails:(r=e._thumbnails)===null||r===void 0?void 0:r.map((function(h){return Rd.payloadify(h)})),custom_type:e.customType,data:e.data,require_auth:e.requireAuth,mention_type:e.mentionType,mentioned_user_ids:s,sorted_metaarray:(i=e.metaArrays)===null||i===void 0?void 0:i.map((function(h){return _a.payloadify(h)})),apple_critical_alert_options:e.appleCriticalAlertOptions?xl.payloadify(e.appleCriticalAlertOptions):null,push_option:e.pushNotificationDeliveryOption})),a}return G(n,t),n})(we),mQ=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.message=new Ai(e,r),i}return G(n,t),n})(xe),gQ=(function(t){function n(e){var r,i=this;i=t.call(this)||this;var a=[];e.mentionType===Oa.USERS&&(e.mentionedUserIds?a=e.mentionedUserIds:e.mentionedUsers&&(a=e.mentionedUsers.map((function(c){return c.userId}))));var s=e.channelType,o=e.channelUrl,u=e.scheduledMessageId;return i.method=Ie.PUT,i.path="".concat(Gn(s),"/").concat(encodeURIComponent(o),"/scheduled_messages/").concat(encodeURIComponent(u)),i.params=ze(ht({req_id:e.reqId,scheduled_at:e.scheduledAt,message_type:yg.USER,message:e.message,custom_type:e.customType,data:e.data,mention_type:e.mentionType,mentioned_user_ids:a,sorted_metaarray:(r=e.metaArrays)===null||r===void 0?void 0:r.map((function(c){return _a.payloadify(c)})),apple_critical_alert_options:e.appleCriticalAlertOptions?xl.payloadify(e.appleCriticalAlertOptions):null,target_langs:e.translationTargetLanguages,push_option:e.pushNotificationDeliveryOption})),i}return G(n,t),n})(we);(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.message=new Ma(e,r),i}G(n,t)})(xe);var UD,xD,_Q=(function(t){function n(e){var r=t.call(this)||this,i=e.channelType,a=e.channelUrl,s=e.scheduledMessageId;return r.method=Ie.DELETE,r.path="".concat(Gn(i),"/").concat(encodeURIComponent(a),"/scheduled_messages/").concat(encodeURIComponent(s)),r}return G(n,t),n})(we),yQ=(function(t){function n(e){var r=t.call(this)||this,i=e.channelType,a=e.channelUrl,s=e.scheduledMessageId;return r.method=Ie.POST,r.path="".concat(Gn(i),"/").concat(encodeURIComponent(a),"/scheduled_messages/").concat(encodeURIComponent(s),"/send_now"),r}return G(n,t),n})(we),EQ=(function(t){function n(e){var r=e.userId,i=e.channelUrl,a=e.pushTriggerOption,s=t.call(this)||this;return s.method=Ie.PUT,s.path="".concat(jn,"/").concat(encodeURIComponent(r),"/push_preference/").concat(encodeURIComponent(i)),s.params={push_trigger_option:a},s}return G(n,t),n})(we),bQ=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.pushTriggerOption=r.push_trigger_option,i.enabled=r.enable,i}return G(n,t),n})(xe),CQ=(function(t){function n(e){var r=e.userId,i=e.channelUrl,a=t.call(this)||this;return a.method=Ie.GET,a.path="".concat(jn,"/").concat(encodeURIComponent(r),"/push_preference/").concat(encodeURIComponent(i)),a}return G(n,t),n})(we),SQ=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.pushTriggerOption=r.push_trigger_option,i.enabled=r.enable,i}return G(n,t),n})(xe),TQ=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.channelType;return(r=t.call(this)||this).method=Ie.GET,r.path="".concat(Gn(a),"/").concat(encodeURIComponent(i),"/message_purge_offset"),r}return G(n,t),n})(we),NQ=(function(t){function n(e,r){var i=t.call(this,e,r)||this,a=r.message_purge_offset;return i.messageDeletionTimestamp=a,i}return G(n,t),n})(xe),LD=(function(){function t(n){this.url=n.channel_url,this.lastMessageTs=n.last_message_ts}return t.payloadify=function(n){return{channel_url:n.url,last_message_ts:n.lastMessageTs}},t})(),kD=(function(){function t(n){var e,r,i,a;this.type=n.type,this.ticketId=(e=n.ticket_id)!==null&&e!==void 0?e:void 0,this.timestamp=(r=n.timestamp)!==null&&r!==void 0?r:void 0,this.estimatedAgentJoinAt=(i=n.estimated_agent_join_at)!==null&&i!==void 0?i:void 0,this.requestedAt=(a=n.requested_at)!==null&&a!==void 0?a:void 0}return t.payloadify=function(n){return ze({type:n.type,ticket_id:n.ticketId,timestamp:n.timestamp,estimated_agent_join_at:n.estimatedAgentJoinAt,requested_at:n.requestedAt})},t})(),PD=(function(){function t(n){this.isResolved=n.is_resolved,this.determinedBy=n.determined_by}return t.payloadify=function(n){return{is_resolved:n.isResolved,determined_by:n.determinedBy}},t})();(function(t){t.DEFAULT="default",t.PROACTIVE="proactive"})(UD||(UD={})),(function(t){t.OPEN="open",t.CLOSED="closed"})(xD||(xD={}));var Qo,Xo,Qy=(function(){function t(n){var e,r,i,a,s,o;this.id=n.id,this.aiAgentId=n.ai_agent_id,this.type=n.conversation_type,this.status=n.status,this.channelInfo=new LD(n.channel),this.summary=(e=n.summary_text)!==null&&e!==void 0?e:void 0,this.csat=(r=n.csat)!==null&&r!==void 0?r:void 0,this.csatReason=(i=n.csat_reason)!==null&&i!==void 0?i:void 0,this.csatExpireAt=(a=n.csat_expire_at)!==null&&a!==void 0?a:void 0,this.resolution=n.resolution?new PD(n.resolution):void 0,this.topics=(s=n.topics)!==null&&s!==void 0?s:[],this.handoff=n.handoff?new kD(n.handoff):void 0,this.handedOverAt=(o=n.handed_over_at)!==null&&o!==void 0?o:void 0}return t.payloadify=function(n){return ze(ht({id:n.id,ai_agent_id:n.aiAgentId,conversation_type:n.type,status:n.status,channel:LD.payloadify(n.channelInfo),summary_text:n.summary,csat:n.csat,csat_reason:n.csatReason,csat_expire_at:n.csatExpireAt,resolution:n.resolution&&PD.payloadify(n.resolution),topics:n.topics,handoff:n.handoff&&kD.payloadify(n.handoff),handed_over_at:n.handedOverAt}))},t})(),AQ=(function(t){function n(e){var r=this,i=e.channelUrl;return(r=t.call(this)||this).method=Ie.POST,r.path="".concat(pw,"/").concat(encodeURIComponent(i),"/submit_csat"),r.params=ze({csat:e.csat,csat_reason:e.csatReason,csat_type:e.csatType,is_resolved:e.isResolved,resolution_score:e.resolutionScore,csat_started_at:e.csatStartedAt}),r}return G(n,t),n})(we),MQ=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.conversation=new Qy(r.conversation),i}return G(n,t),n})(xe),IQ=(function(t){function n(e){var r=this,i=e.channelUrl;return(r=t.call(this)||this).method=Ie.POST,r.path="".concat(pw,"/").concat(encodeURIComponent(i),"/handoff"),r.params={},r}return G(n,t),n})(we),wQ=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.conversation=new Qy(r.conversation),i}return G(n,t),n})(xe),RQ=(function(t){function n(e){var r=this,i=e.channelUrl;return(r=t.call(this)||this).method=Ie.POST,r.path="".concat(pw,"/").concat(encodeURIComponent(i),"/close_conversation"),r.params={},r}return G(n,t),n})(we),OQ=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.conversation=new Qy(r.conversation),i}return G(n,t),n})(xe),DQ=(function(t){function n(e){var r=e.aiAgentId,i=e.channelUrl,a=e.context,s=t.call(this)||this;return s.method=Ie.PUT,s.path="".concat(vw,"/ai_agents/").concat(encodeURIComponent(r),"/channels/").concat(encodeURIComponent(i),"/ai_agent_context"),s.params=ze(ht({context:a})),s}return G(n,t),n})(we),UQ=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.contextObject=r,i}return G(n,t),n})(xe),xQ=(function(t){function n(e){var r=e.aiAgentId,i=e.channelUrl,a=t.call(this)||this;return a.method=Ie.GET,a.path="".concat(vw,"/ai_agents/").concat(encodeURIComponent(r),"/channels/").concat(encodeURIComponent(i),"/ai_agent_context"),a}return G(n,t),n})(we),LQ=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.contextObject=r,i}return G(n,t),n})(xe),kQ=(function(t){function n(e){var r=e.aiAgentId,i=e.channelUrl,a=e.context,s=t.call(this)||this;return s.method=Ie.PATCH,s.path="".concat(vw,"/ai_agents/").concat(encodeURIComponent(r),"/channels/").concat(encodeURIComponent(i),"/ai_agent_context"),s.params=ze(ht({context:a})),s}return G(n,t),n})(we),PQ=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.contextObject=r,i}return G(n,t),n})(xe),FD=(function(){function t(n){this.type=n.type,this.ticketStatus=n.ticket_status}return t.payloadify=function(n){return ze({type:n.type,ticket_status:n.ticketStatus})},t})();(function(t){t.ALL="all",t.UNREAD_MESSAGE_COUNT_ONLY="unread_message_count_only",t.UNREAD_MENTION_COUNT_ONLY="unread_mention_count_only",t.OFF="off"})(Qo||(Qo={})),(function(t){t.UNHIDDEN="unhidden",t.HIDDEN_ALLOW_AUTO_UNHIDE="hidden_allow_auto_unhide",t.HIDDEN_PREVENT_AUTO_UNHIDE="hidden_prevent_auto_unhide"})(Xo||(Xo={}));var Dy,al=(function(t){function n(e,r){var i,a,s,o,u,c,h,p,m,_,b,C,N,S,M,w,U,L,P,x,H,F=this;return(F=t.call(this,e,r)||this)._unreadMemberStateMap=new Map,F._undeliveredMemberStateMap=new Map,F._typingStatus=new Map,F._lastMemberCountUpdated=0,F._typingStarted=0,F._typingEnded=0,F._aiAgentAdditionalData={},F.isDistinct=!1,F.isSuper=!1,F.isBroadcast=!1,F.isExclusive=!1,F.isPublic=!1,F.isDiscoverable=!0,F.isChatNotification=!1,F.isAccessCodeRequired=!1,F.isPushEnabled=!1,F.unreadMessageCount=0,F.unreadMentionCount=0,F.totalUnreadReplyCount=0,F.members=[],F.memberCount=0,F.joinedMemberCount=0,F.hiddenState=Xo.UNHIDDEN,F.lastMessage=null,F.messageOffsetTimestamp=0,F.messageSurvivalSeconds=-1,F.myMemberState=ii.NONE,F.myRole=nl.NONE,F.myMutedState=Ml.UNMUTED,F.myLastRead=0,F.myCountPreference=Qo.ALL,F.myPushTriggerOption=Zv.DEFAULT,F.inviter=null,F.invitedAt=0,F.joinedAt=0,F.lastPinnedMessage=null,F.conversation=null,F.helpdeskInfo=null,F._latestMessageInfo=null,F._pinnedMessagesUpdatedAt=0,F._myMutedRemainingTime=-1,F._messageDeletionTimestamp=0,F.channelType=yn.GROUP,F.isDistinct=(a=r.is_distinct)!==null&&a!==void 0&&a,F.isSuper=(s=r.is_super)!==null&&s!==void 0&&s,F.isBroadcast=(o=r.is_broadcast)!==null&&o!==void 0&&o,F.isExclusive=(u=r.is_exclusive)!==null&&u!==void 0&&u,F.isPublic=(c=r.is_public)!==null&&c!==void 0&&c,F.isDiscoverable=(h=r.is_discoverable)!==null&&h!==void 0?h:F.isPublic,F.isChatNotification=(p=r.is_chat_notification)!==null&&p!==void 0&&p,F.isAccessCodeRequired=(m=r.is_access_code_required)!==null&&m!==void 0&&m,F.isPushEnabled=(_=r.is_push_enabled)!==null&&_!==void 0&&_,Array.isArray(r.members)&&(i=F.members).push.apply(i,wt([],dt(r.members.map((function(Q){return new el(F._iid,Q)}))),!1)),F.memberCount=(b=r.member_count)!==null&&b!==void 0?b:0,F.joinedMemberCount=(C=r.joined_member_count)!==null&&C!==void 0?C:0,F.hiddenState=dn(Xo,r.hidden_state)?r.hidden_state:Xo.UNHIDDEN,F.messageOffsetTimestamp=(N=r.ts_message_offset)!==null&&N!==void 0?N:0,F.messageSurvivalSeconds=(S=r.message_survival_seconds)!==null&&S!==void 0?S:-1,F.lastMessage=r.last_message?Da(F._iid,Z({channel_type:F.channelType},r.last_message)):null,r.read_receipt&&Object.keys(r.read_receipt).forEach((function(Q){re("number",r.read_receipt[Q])&&F._updateUnreadMemberState(Q,r.read_receipt[Q])})),r.delivery_receipt&&Object.keys(r.delivery_receipt).forEach((function(Q){re("number",r.delivery_receipt[Q])&&F._updateUndeliveredMemberState(Q,r.delivery_receipt[Q])})),F.myMemberState=dn(ii,r.member_state)?r.member_state:ii.NONE,F.myRole=dn(nl,r.my_role)?r.my_role:nl.NONE,dn(Ml,r.is_muted)?F.myMutedState=r.is_muted:re("boolean",r.is_muted)?F.myMutedState=r.is_muted?Ml.MUTED:Ml.UNMUTED:F.myMutedState=Ml.UNMUTED,F.myCountPreference=dn(Qo,r.count_preference)?r.count_preference:Qo.ALL,F.myPushTriggerOption=dn(Zv,r.push_trigger_option)?r.push_trigger_option:Zv.ALL,F.myLastRead=(M=r.user_last_read)!==null&&M!==void 0?M:0,F.inviter=r.inviter?new fn(F._iid,r.inviter):null,F.invitedAt=(w=r.invited_at)!==null&&w!==void 0?w:0,F.joinedAt=(U=r.joined_ts)!==null&&U!==void 0?U:0,F._updateUnreadCount((L=r.unread_message_count)!==null&&L!==void 0?L:0,(P=r.unread_mention_count)!==null&&P!==void 0?P:0),F.totalUnreadReplyCount=(x=r.total_unread_thread_message_count)!==null&&x!==void 0?x:0,F.lastPinnedMessage=r.latest_pinned_message?Da(F._iid,Z({channel_type:F.channelType},r.latest_pinned_message)):null,F.conversation=r.conversation?new Qy(r.conversation):null,F.helpdeskInfo=r.helpdesk_info?new FD(r.helpdesk_info):null,r.latest_message&&(F._latestMessageInfo={messageId:r.latest_message.message_id,createdAt:r.latest_message.created_at}),F._aiAgentAdditionalData={hasBot:r.has_bot,hasAIBot:r.has_ai_bot,isAIAgent:r.is_ai_agent_channel,isDesk:r.is_desk_channel},F._messageDeletionTimestamp=(H=r.message_purge_offset)!==null&&H!==void 0?H:0,F}return G(n,t),Object.defineProperty(n.prototype,"isHidden",{get:function(){return this.hiddenState!==Xo.UNHIDDEN},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isTyping",{get:function(){return this._typingStatus.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"cachedUnreadMemberState",{get:function(){var e,r,i={};try{for(var a=Fe(this._unreadMemberStateMap),s=a.next();!s.done;s=a.next()){var o=dt(s.value,2),u=o[0],c=o[1];i[u]=c}}catch(h){e={error:h}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return i},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"cachedUndeliveredMemberState",{get:function(){var e,r,i={};try{for(var a=Fe(this._undeliveredMemberStateMap),s=a.next();!s.done;s=a.next()){var o=dt(s.value,2),u=o[0],c=o[1];i[u]=c}}catch(h){e={error:h}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return i},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hasBot",{get:function(){return!!this._aiAgentAdditionalData.hasBot},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hasAiBot",{get:function(){return!!this._aiAgentAdditionalData.hasAIBot},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isDesk",{get:function(){return!!this._aiAgentAdditionalData.isDesk},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isAIAgent",{get:function(){return!!this._aiAgentAdditionalData.isAIAgent},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"messageDeletionTimestamp",{get:function(){return this._messageDeletionTimestamp},enumerable:!1,configurable:!0}),n.payloadify=function(e,r){r===void 0&&(r=!1);var i=Z(Z({},t.payloadify.call(this,e,r)),{is_access_code_required:e.isAccessCodeRequired,is_distinct:e.isDistinct,is_super:e.isSuper,is_broadcast:e.isBroadcast,is_exclusive:e.isExclusive,is_public:e.isPublic,is_discoverable:e.isDiscoverable,is_muted:e.myMutedState,is_push_enabled:e.isPushEnabled,unread_message_count:e.unreadMessageCount,unread_mention_count:e.unreadMentionCount,total_unread_thread_message_count:e.totalUnreadReplyCount,push_trigger_option:e.myPushTriggerOption,count_preference:e.myCountPreference,hidden_state:e.hiddenState,member_count:e.memberCount,joined_member_count:e.joinedMemberCount,member_state:e.myMemberState,my_role:e.myRole,user_last_read:e.myLastRead,ts_message_offset:e.messageOffsetTimestamp,message_survival_seconds:e.messageSurvivalSeconds,read_receipt:e.cachedUnreadMemberState,delivery_receipt:e.cachedUndeliveredMemberState,members:e.members.map((function(a){return el.payloadify(a)})),last_message:e.lastMessage?RA(e.lastMessage):null,inviter:e.inviter?fn.payloadify(e.inviter):null,invited_at:e.invitedAt,joined_ts:e.joinedAt,latest_pinned_message:e.lastPinnedMessage?RA(e.lastPinnedMessage):null,latest_message:e._latestMessageInfo?{message_id:e._latestMessageInfo.messageId,created_at:e._latestMessageInfo.createdAt}:null,has_bot:e._aiAgentAdditionalData.hasBot,has_ai_bot:e._aiAgentAdditionalData.hasAIBot,is_desk_channel:e._aiAgentAdditionalData.isDesk,is_ai_agent_channel:e._aiAgentAdditionalData.isAIAgent,message_purge_offset:e.messageDeletionTimestamp,conversation:e.conversation?Qy.payloadify(e.conversation):null,helpdesk_info:e.helpdeskInfo?FD.payloadify(e.helpdeskInfo):null});return r?i:ze(ht(i))},n.prototype._shouldUpdateLastMessageWith=function(e){if(e.silent)return!1;var r=te.of(this._iid).appInfo;switch(r?.lastMessageThreadingPolicy){case np.NONE:case np.INCLUDE_REPLY:break;case np.EXCLUDE_REPLY:if(e.parentMessageId>0)return!1;break;case np.INCLUDE_REPLY_TO_CHANNEL:if(e instanceof ai&&e.parentMessageId>0&&!e.replyToChannel)return!1}return!this.lastMessage||this.lastMessage.createdAt<e.createdAt||this.lastMessage.createdAt===e.createdAt&&this.lastMessage.messageId===e.messageId&&this.lastMessage.updatedAt<=e.updatedAt},n.prototype._tryUpdateLastMessageAndCallEvents=function(e,r){var i=te.of(this._iid).dispatcher,a=ji.of(this._iid);this._updateLastMessage(r),a.handlers.map((function(s){s.onChannelChanged&&s.onChannelChanged(e)})),i.dispatch(new mn({channels:[e],context:{source:Se.EVENT_MESSAGE_SENT}}))},n.prototype._shouldUpdateUnreadCountWith=function(e){var r=te.of(this._iid).appInfo;switch(r?.unreadCountThreadingPolicy){case tp.NONE:case tp.INCLUDE_REPLY:break;case tp.EXCLUDE_REPLY:if(e.parentMessageId>0)return!1;break;case tp.INCLUDE_REPLY_TO_CHANNEL:if(e instanceof ai&&e.parentMessageId>0&&!e.replyToChannel)return!1}return!0},n.prototype._updateLastMessage=function(e){return!!this._shouldUpdateLastMessageWith(e)&&(this.lastMessage=e,!0)},n.prototype._updateUnreadCount=function(e,r){if(typeof e=="number"&&e>=0)if(this.myCountPreference===Qo.ALL||this.myCountPreference===Qo.UNREAD_MESSAGE_COUNT_ONLY)if(this.isExclusive||this.isSuper||this.isBroadcast){var i=te.of(this._iid).maxSuperGroupChannelUnreadCount;this.unreadMessageCount=i&&e>=i?i:e}else this.unreadMessageCount=e;else this.unreadMessageCount=0;else this.unreadMessageCount=0;typeof r=="number"&&r>=0&&(this.myCountPreference===Qo.ALL||this.myCountPreference===Qo.UNREAD_MENTION_COUNT_ONLY)?this.unreadMentionCount=r:this.unreadMentionCount=0},n.prototype._updateUnreadMemberState=function(e,r,i){i===void 0&&(i=!1);var a=this._unreadMemberStateMap.get(e);return!!(!a||i||!i&&a<r)&&a!==r&&(this._unreadMemberStateMap.set(e,r),te.of(this._iid).sdkState.userId===e&&(this.myLastRead=r),!0)},n.prototype._updateUndeliveredMemberState=function(e,r){var i=this._undeliveredMemberStateMap.get(e);return(!i||i<r)&&(this._undeliveredMemberStateMap.set(e,r),!0)},n.prototype._updateTypingStatus=function(e,r){r===void 0&&(r=new Date().getTime()),r>0?this._typingStatus.set(e.userId,{user:e,ts:r}):this._typingStatus.delete(e.userId)},n.prototype._clearTypingStatus=function(){this._typingStatus.clear(),this._typingStarted=0,this._typingEnded=0},n.prototype._update=function(e){e._typingStatus=this._typingStatus,e._typingStarted=this._typingStarted,e._typingEnded=this._typingEnded,t.prototype._update.call(this,e)},n.prototype._setLatestMemberCount=function(e,r,i){var a=!1;return i>=this._lastMemberCountUpdated&&(this._lastMemberCountUpdated=i,a=e!==this.memberCount||r!==this.joinedMemberCount,this.memberCount=e,this.joinedMemberCount=r),a},n.prototype.isReadMessage=function(e){var r=te.of(this._iid).sdkState,i=this._unreadMemberStateMap.get(r.userId);return!!i&&i>=e.createdAt},n.prototype.serialize=function(){var e=this;return Pg(this,(function(r){r.cachedUnreadMemberState=e.cachedUnreadMemberState,r.cachedUndeliveredMemberState=e.cachedUndeliveredMemberState,Object.assign(r,e._serializeCachedMetaData())}))},n.prototype.createMessageCollection=function(e){return e===void 0&&(e={}),new ZW(this._iid,Z(Z({},e),{channel:this}))},n.prototype.createMemberListQuery=function(e){return e===void 0&&(e={}),new nQ(this._iid,this.url,e)},n.prototype.createThreadedParentMessageListQuery=function(e){return e===void 0&&(e={}),new YY(this._iid,this.url,this.channelType,e)},n.prototype.addMember=function(e,r){if(r===void 0&&(r=0),!this.isExclusive&&!this.isSuper&&!this.isBroadcast){var i=this.members.findIndex((function(s){return s.userId===e.userId}));if(i>-1){var a=this.members[i];a.state===ii.JOINED&&(e.state=a.state),this.members.splice(i,1),this.memberCount--}this.members.push(e),this.memberCount++,this._updateUnreadMemberState(e.userId,r),this._updateUndeliveredMemberState(e.userId,r)}},n.prototype.removeMember=function(e){if(!this.isExclusive&&!this.isSuper&&!this.isBroadcast){var r=e instanceof el?e.userId:e,i=this.members.findIndex((function(a){return a.userId===r}));if(i>-1)return this.members.splice(i,1),this.memberCount--,!0}return!1},n.prototype.getUnreadMemberCount=function(e){var r,i;if(e instanceof ai&&!this.isExclusive&&!this.isSuper&&!this.isBroadcast){var a=te.of(this._iid).sdkState,s=e.createdAt,o=0;try{for(var u=Fe(this.members),c=u.next();!c.done;c=u.next()){var h=c.value;a.userId!==h.userId&&h.state===ii.JOINED&&e.sender.userId!==h.userId&&(this.cachedUnreadMemberState[h.userId]||0)<s&&o++}}catch(p){r={error:p}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return o}return 0},n.prototype.getUndeliveredMemberCount=function(e){var r,i;if(e instanceof ai&&!this.isExclusive&&!this.isSuper&&!this.isBroadcast){var a=te.of(this._iid).sdkState,s=e.createdAt,o=0;try{for(var u=Fe(this.members),c=u.next();!c.done;c=u.next()){var h=c.value;a.userId!==h.userId&&h.state===ii.JOINED&&e.sender.userId!==h.userId&&(this.cachedUndeliveredMemberState[h.userId]||0)<s&&o++}}catch(p){r={error:p}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return o}return 0},n.prototype.getReadMembers=function(e,r){var i=this;r===void 0&&(r=!1);var a=te.of(this._iid).sdkState;if(!a.userId||this.isExclusive||this.isSuper||this.isBroadcast)return[];var s=e instanceof ai?e.sender:null,o=[];return this.members.forEach((function(u){if(r||u.userId!==a.userId&&u.userId!==s?.userId){var c=i._unreadMemberStateMap.get(u.userId);c&&c>=e.createdAt&&o.push(u)}})),o},n.prototype.getUnreadMembers=function(e,r){var i=this;r===void 0&&(r=!1);var a=te.of(this._iid).sdkState;if(!a.userId||this.isExclusive||this.isSuper||this.isBroadcast)return[];var s=e instanceof ai?e.sender:null,o=[];return this.members.forEach((function(u){if(r||u.userId!==a.userId&&u.userId!==s?.userId){var c=i._unreadMemberStateMap.get(u.userId);c&&c<e.createdAt&&o.push(u)}})),o},n.prototype.getReadStatus=function(e){var r=this;e===void 0&&(e=!1);var i=te.of(this._iid).sdkState;if(!i.userId||this.isExclusive||this.isSuper||this.isBroadcast)return null;var a={};return this.members.forEach((function(s){if(e||s.userId!==i.userId){var o=r._unreadMemberStateMap.get(s.userId);a[s.userId]=new FP(r._iid,{channel_url:r.url,channel_type:r.channelType,user:el.payloadify(s),ts:o??0})}})),a},n.prototype.getDeliveryStatus=function(e){var r=this;e===void 0&&(e=!0);var i=te.of(this._iid).sdkState;if(!i.userId||this.isExclusive||this.isSuper||this.isBroadcast)return null;var a={};return this.members.forEach((function(s){if(e||s.userId!==i.userId){var o=r._undeliveredMemberStateMap.get(s.userId);a[s.userId]=new eW(r._iid,{channel_url:r.url,channel_type:r.channelType,user:el.payloadify(s),ts:o??0})}})),a},n.prototype.getTypingUsers=function(){var e=[];return this._typingStatus.forEach((function(r){var i=r.user;e.push(i)})),e},n.prototype.invalidateTypingStatus=function(){var e=this;if(!this.isTyping)return!1;var r=te.of(this._iid).typingIndicatorInvalidateTime,i=Date.now(),a=!1;return this._typingStatus.forEach((function(s,o){var u=s.ts;i-u>=r&&(e._typingStatus.delete(o),a=!0)})),a},n.prototype.refresh=function(){return D(this,void 0,void 0,(function(){return O(this,(function(e){return[2,this._refresh()]}))}))},n.prototype._refresh=function(e){return e===void 0&&(e=!1),D(this,void 0,void 0,(function(){var r,i,a,s,o,u;return O(this,(function(c){switch(c.label){case 0:return r=te.of(this._iid),i=r.requestQueue,a=r.dispatcher,s=new GA({channelUrl:this.url}),[4,i.send(s)];case 1:return o=c.sent(),u=o.as(VA).channel,this._update(u),e||a.dispatch(new mn({channels:[u],context:{source:Se.REFRESH_CHANNEL}})),[2,this]}}))}))},n.prototype.freeze=function(){return D(this,void 0,void 0,(function(){return O(this,(function(e){switch(e.label){case 0:return[4,t.prototype.freeze.call(this)];case 1:return e.sent(),te.of(this._iid).dispatcher.dispatch(new mn({channels:[this],context:{source:Se.EVENT_CHANNEL_FROZEN},isWebSocketEventComing:!0})),[2]}}))}))},n.prototype.unfreeze=function(){return D(this,void 0,void 0,(function(){return O(this,(function(e){switch(e.label){case 0:return[4,t.prototype.unfreeze.call(this)];case 1:return e.sent(),te.of(this._iid).dispatcher.dispatch(new mn({channels:[this],context:{source:Se.EVENT_CHANNEL_UNFROZEN},isWebSocketEventComing:!0})),[2]}}))}))},n.prototype.updateChannel=function(e){return D(this,void 0,void 0,(function(){var r,i,a,s,o,u,c;return O(this,(function(h){switch(h.label){case 0:return r=Z(Z({},JW),e),Ue((function(p){return re("string",p.coverUrl,!0)&&(ra(p.coverImage)||re("string",p.coverImage,!0))&&re("boolean",p.isDistinct,!0)&&re("boolean",p.isPublic,!0)&&re("boolean",p.isDiscoverable,!0)&&re("string",p.accessCode,!0)&&re("string",p.name,!0)&&re("string",p.data,!0)&&re("string",p.customType,!0)&&hn("string",p.operatorUserIds,!0)&&re("number",p.messageSurvivalSeconds,!0)})(r)).throw(ae.invalidParameters),i=te.of(this._iid),a=i.dispatcher,s=i.requestQueue,o=new aQ(Z({channelUrl:this.url},r)),[4,s.send(o)];case 1:return u=h.sent(),c=u.as(sQ).channel,this._update(c),a.dispatch(new mn({channels:[c],context:{source:Se.EVENT_CHANNEL_UPDATED},isWebSocketEventComing:!0})),[2,this]}}))}))},n.prototype.invite=function(e){return D(this,void 0,void 0,(function(){return O(this,(function(r){return Ue(e.every((function(i){return i instanceof fn}))).throw(ae.invalidParameters),[2,this.inviteWithUserIds(e.map((function(i){return i.userId})))]}))}))},n.prototype.inviteWithUserIds=function(e){return D(this,void 0,void 0,(function(){var r,i,a,s,o,u,c;return O(this,(function(h){switch(h.label){case 0:return Ue(hn("string",e)).throw(ae.invalidParameters),r=te.of(this._iid),i=r.dispatcher,a=r.requestQueue,s=r.sessionManager,o=new wW({channelUrl:this.url,userIds:e}),[4,a.send(o)];case 1:return u=h.sent(),c=u.as(RW).channel,this._update(c),i.dispatch(new mn({channels:[c],context:{source:Se.EVENT_CHANNEL_INVITED,inviter:s.currentUser,invitees:[]},isWebSocketEventComing:!0})),[2,this]}}))}))},n.prototype.join=function(e){return D(this,void 0,void 0,(function(){var r,i,a,s,o,u,c;return O(this,(function(h){switch(h.label){case 0:return Ue(re("string",e,!0)).throw(ae.invalidParameters),r=te.of(this._iid),i=r.dispatcher,a=r.sdkState,s=r.requestQueue,o=new TW({channelUrl:this.url,userId:a.userId,accessCode:e}),[4,s.send(o)];case 1:return u=h.sent(),(c=u.as(NW).channel).myMemberState=this.myMemberState=ii.JOINED,this._update(c),i.dispatch(new mn({channels:[c],context:{source:Se.EVENT_CHANNEL_JOINED,users:[]},isWebSocketEventComing:!0})),[2,this]}}))}))},n.prototype.leave=function(e){return e===void 0&&(e=!1),D(this,void 0,void 0,(function(){var r,i,a,s;return O(this,(function(o){switch(o.label){case 0:return r=te.of(this._iid),i=r.sdkState,a=r.requestQueue,s=new MW({channelUrl:this.url,userId:i.userId,shouldRemoveOperatorStatus:e}),[4,a.send(s)];case 1:return o.sent(),this.myMemberState=ii.NONE,[2]}}))}))},n.prototype.acceptInvitation=function(e){return D(this,void 0,void 0,(function(){var r,i,a,s,o,u,c;return O(this,(function(h){switch(h.label){case 0:return Ue(re("string",e,!0)).throw(ae.invalidParameters),r=te.of(this._iid),i=r.dispatcher,a=r.sdkState,s=r.requestQueue,o=new rQ({channelUrl:this.url,userId:a.userId,accessCode:e}),[4,s.send(o)];case 1:return u=h.sent(),(c=u.as(iQ).channel).myMemberState=this.myMemberState=ii.JOINED,this._update(c),i.dispatch(new mn({channels:[c],context:{source:Se.EVENT_CHANNEL_ACCEPTED_INVITE},isWebSocketEventComing:!0})),[2,this]}}))}))},n.prototype.declineInvitation=function(){return D(this,void 0,void 0,(function(){var e,r,i,a;return O(this,(function(s){switch(s.label){case 0:return e=te.of(this._iid),r=e.sdkState,i=e.requestQueue,a=new DW({channelUrl:this.url,userId:r.userId}),[4,i.send(a)];case 1:return s.sent(),this.myMemberState=ii.NONE,[2,this]}}))}))},n.prototype.sendUserMessage=function(e){var r=this,i=new po,a=te.of(this._iid).dispatcher,s=ry.of(this._iid);return t.prototype.sendUserMessage.call(this,e).onPending((function(o){s.completeCurrentAndProcessNextAutoResend(o),i._trigger(o)})).onFailed((function(o,u){u&&s.completeCurrentAndProcessNextAutoResend(u),i._triggerFailed(o,u)})).onSucceeded((function(o){s.completeCurrentAndProcessNextAutoResend(o),r._updateLastMessage(o),ji.of(r._iid).handlers.map((function(u){u.onChannelChanged&&u.onChannelChanged(r)})),a.dispatch(new mn({channels:[r],context:{source:Se.EVENT_MESSAGE_SENT}})),i._trigger(o)})),i},n.prototype.updateUserMessage=function(e,r){return D(this,void 0,void 0,(function(){var i,a,s,o,u=this;return O(this,(function(c){switch(c.label){case 0:return i=te.of(this._iid).dispatcher,[4,t.prototype.updateUserMessage.call(this,e,r)];case 1:return a=c.sent(),s=this._updateLastMessage(a),o=!1,this.lastPinnedMessage&&this.lastPinnedMessage.messageId===a.messageId&&(this.lastPinnedMessage=a,s=!0,o=!0),s&&(ji.of(this._iid).handlers.map((function(h){h.onChannelChanged&&h.onChannelChanged(u)})),i.dispatch(new mn({channels:[this],context:{source:o?Se.EVENT_PINNED_MESSAGE_UPDATED:Se.EVENT_MESSAGE_UPDATED}}))),o&&ji.of(this._iid).handlers.map((function(h){h.onPinnedMessageUpdated&&h.onPinnedMessageUpdated(u)})),i.dispatch(new Br({messages:[a],source:Se.EVENT_MESSAGE_UPDATED})),[2,a]}}))}))},n.prototype._autoResendUserMessage=function(e){var r=this,i=new po,a=te.of(this._iid).dispatcher,s=ry.of(this._iid);return t.prototype._autoResendUserMessage.call(this,e).onPending((function(o){s.completeCurrentAndProcessNextAutoResend(o),i._trigger(o)})).onFailed((function(o,u){s.completeCurrentAndProcessNextAutoResend(u),i._triggerFailed(o,u)})).onSucceeded((function(o){var u=ji.of(r._iid);s.completeCurrentAndProcessNextAutoResend(o),r._updateLastMessage(o),u.handlers.map((function(c){c.onChannelChanged&&c.onChannelChanged(r)})),a.dispatch(new mn({channels:[r],context:{source:Se.EVENT_MESSAGE_SENT}})),i._trigger(o)})),i},n.prototype.sendFileMessage=function(e){var r=this,i=new po,a=te.of(this._iid).dispatcher,s=ry.of(this._iid);return t.prototype.sendFileMessage.call(this,e).onPending((function(o){s.completeCurrentAndProcessNextAutoResend(o),i._trigger(o)})).onFailed((function(o,u){u&&s.completeCurrentAndProcessNextAutoResend(u),i._triggerFailed(o,u)})).onSucceeded((function(o){var u=ji.of(r._iid);s.completeCurrentAndProcessNextAutoResend(o),r._updateLastMessage(o),u.handlers.map((function(c){c.onChannelChanged&&c.onChannelChanged(r)})),a.dispatch(new mn({channels:[r],context:{source:Se.EVENT_MESSAGE_SENT}})),i._trigger(o)})),i},n.prototype.sendMultipleFilesMessage=function(e){var r=this,i=new SC,a=te.of(this._iid).dispatcher;return t.prototype.sendMultipleFilesMessage.call(this,e).onPending((function(s){i._trigger(s)})).onFailed((function(s,o){i._triggerFailed(s,o)})).onSucceeded((function(s){var o=ji.of(r._iid);r._updateLastMessage(s),o.handlers.map((function(u){u.onChannelChanged&&u.onChannelChanged(r)})),a.dispatch(new mn({channels:[r],context:{source:Se.EVENT_MESSAGE_SENT}})),i._trigger(s)})).onFileUploaded((function(s,o,u,c){i._triggerOnFileUploaded(s,o,u,c)})),i},n.prototype.updateFileMessage=function(e,r){return D(this,void 0,void 0,(function(){var i,a,s,o,u=this;return O(this,(function(c){switch(c.label){case 0:return i=te.of(this._iid).dispatcher,[4,t.prototype.updateFileMessage.call(this,e,r)];case 1:return a=c.sent(),s=this._updateLastMessage(a),o=!1,this.lastPinnedMessage&&this.lastPinnedMessage.messageId===a.messageId&&(this.lastPinnedMessage=a,s=!0,o=!0),s&&(ji.of(this._iid).handlers.map((function(h){h.onChannelChanged&&h.onChannelChanged(u)})),i.dispatch(new mn({channels:[this],context:{source:o?Se.EVENT_PINNED_MESSAGE_UPDATED:Se.EVENT_MESSAGE_UPDATED}}))),o&&ji.of(this._iid).handlers.map((function(h){h.onPinnedMessageUpdated&&h.onPinnedMessageUpdated(u)})),i.dispatch(new Br({messages:[a],source:Se.EVENT_MESSAGE_UPDATED})),[2,a]}}))}))},n.prototype._autoResendFileMessage=function(e){var r=this,i=new po,a=te.of(this._iid).dispatcher,s=ry.of(this._iid);return t.prototype._autoResendFileMessage.call(this,e).onPending((function(o){s.completeCurrentAndProcessNextAutoResend(o),i._trigger(o)})).onFailed((function(o,u){s.completeCurrentAndProcessNextAutoResend(u),i._triggerFailed(o,u)})).onSucceeded((function(o){var u=ji.of(r._iid);s.completeCurrentAndProcessNextAutoResend(o),r._updateLastMessage(o),u.handlers.map((function(c){c.onChannelChanged&&c.onChannelChanged(r)})),a.dispatch(new mn({channels:[r],context:{source:Se.EVENT_MESSAGE_SENT}})),i._trigger(o)})),i},n.prototype.deleteMessage=function(e){return D(this,void 0,void 0,(function(){return O(this,(function(r){switch(r.label){case 0:return[4,t.prototype.deleteMessage.call(this,e)];case 1:return r.sent(),e.messageId===0&&e instanceof ai&&te.of(this._iid).dispatcher.dispatch(new MP({reqId:e.reqId,source:Se.EVENT_MESSAGE_DELETED})),[2]}}))}))},n.prototype.hide=function(e){return D(this,void 0,void 0,(function(){var r,i,a,s,o,u,c,h;return O(this,(function(p){switch(p.label){case 0:return r=Z(Z({},zA),e),Ue((function(m){return re("boolean",m.hidePreviousMessages,!0)&&re("boolean",m.allowAutoUnhide,!0)})(r)).throw(ae.invalidParameters),i=te.of(this._iid),a=i.dispatcher,s=i.sdkState,o=i.requestQueue,u=new xW(Z({channelUrl:this.url,userId:s.userId},r)),[4,o.send(u)];case 1:return c=p.sent(),h=c.as(LW).messageOffsetTimestamp,this.hiddenState=r.allowAutoUnhide?Xo.HIDDEN_ALLOW_AUTO_UNHIDE:Xo.HIDDEN_PREVENT_AUTO_UNHIDE,r.hidePreviousMessages&&this._updateUnreadCount(0,0),h&&(this.messageOffsetTimestamp=h),a.dispatch(new mn({channels:[this],context:{source:Se.EVENT_CHANNEL_HIDDEN},isWebSocketEventComing:!0})),[2,this]}}))}))},n.prototype.unhide=function(){return D(this,void 0,void 0,(function(){var e,r,i,a;return O(this,(function(s){switch(s.label){case 0:return e=te.of(this._iid),r=e.dispatcher,i=e.requestQueue,a=new lQ({channelUrl:this.url}),[4,i.send(a)];case 1:return s.sent(),this.hiddenState=Xo.UNHIDDEN,r.dispatch(new mn({channels:[this],context:{source:Se.EVENT_CHANNEL_UNHIDDEN},isWebSocketEventComing:!0})),[2,this]}}))}))},n.prototype.delete=function(){return D(this,void 0,void 0,(function(){var e,r;return O(this,(function(i){switch(i.label){case 0:return e=te.of(this._iid).requestQueue,r=new oQ({channelUrl:this.url}),[4,e.send(r)];case 1:return i.sent(),[2]}}))}))},n.prototype.markAsRead=function(){return D(this,void 0,void 0,(function(){var e,r,i,a,s,o,u,c=this;return O(this,(function(h){switch(h.label){case 0:return e=te.of(this._iid),r=e.dispatcher,i=e.requestQueue,a=new S$({channelUrl:this.url}),[4,i.send(a)];case 1:return s=h.sent(),o=s.as(BP).readStatus,this._updateUnreadMemberState(o.reader.userId,o.readAt),u=!1,(this.unreadMessageCount>0||this.unreadMentionCount>0)&&(this._updateUnreadCount(0,0),u=!0),ji.of(this._iid).handlers.map((function(p){u&&p.onChannelChanged&&p.onChannelChanged(c),p.onUserMarkedRead&&p.onUserMarkedRead(c,[o.reader.userId])})),r.dispatch(new mn({channels:[this],context:{source:Se.EVENT_CHANNEL_READ,userIds:[o.reader.userId]}})),[2]}}))}))},n.prototype.markAsUnread=function(e){return D(this,void 0,void 0,(function(){var r,i,a,s,o,u,c,h,p,m,_,b,C=this;return O(this,(function(N){switch(N.label){case 0:return r=te.of(this._iid),i=r.sdkState,a=r.dispatcher,s=r.requestQueue,o=new T$({channelUrl:this.url,channelType:this.channelType,messageId:e.messageId,userId:i.userId,isExcluded:!0,uniqueId:"read-".concat(il())}),[4,s.send(o)];case 1:return u=N.sent(),c=u.as(N$),h=c.readAt,p=c.unreadMessageCount,m=c.userId,_=c.isExcluded,b=c.totalUnreadCount,this._updateUnreadMemberState(m,h,_),this._updateUnreadCount(p,this.unreadMentionCount),a.dispatch(new Cw(b)),ji.of(this._iid).handlers.map((function(S){S.onChannelChanged&&S.onChannelChanged(C),S.onUserMarkedUnread&&S.onUserMarkedUnread(C,[m])})),a.dispatch(new mn({channels:[this],context:{source:Se.EVENT_CHANNEL_UNREAD,userIds:[m]}})),[2]}}))}))},n.prototype.markAsDelivered=function(){return D(this,void 0,void 0,(function(){var e,r,i,a;return O(this,(function(s){switch(s.label){case 0:return e=te.of(this._iid),r=e.sdkState,i=e.requestQueue,a=new VW({channelUrl:this.url,userId:r.userId}),[4,i.send(a)];case 1:return s.sent(),[2]}}))}))},n.prototype.startTyping=function(){return D(this,void 0,void 0,(function(){var e,r,i,a,s;return O(this,(function(o){switch(o.label){case 0:return e=te.of(this._iid),r=e.requestQueue,i=e.typingIndicatorThrottle,(a=new Date().getTime())-this._typingStarted>=i?(this._typingStarted=a,this._typingEnded=0,s=new PW({channelUrl:this.url,time:this._typingStarted}),[4,r.send(s)]):[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}}))}))},n.prototype.endTyping=function(){return D(this,void 0,void 0,(function(){var e,r,i,a,s;return O(this,(function(o){switch(o.label){case 0:return e=te.of(this._iid),r=e.requestQueue,i=e.typingIndicatorThrottle,(a=new Date().getTime())-this._typingEnded>=i?(this._typingStarted=0,this._typingEnded=a,s=new BW({channelUrl:this.url,time:this._typingStarted}),[4,r.send(s)]):[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}}))}))},n.prototype.createScheduledUserMessage=function(e){e=Z(Z({},DY),e),Ue(UY(e)).throw(ae.invalidParameters);var r=new po;return this._createScheduledUserMessage(e,r),r},n.prototype.updateScheduledUserMessage=function(e,r){return D(this,void 0,void 0,(function(){var i,a,s,o;return O(this,(function(u){switch(u.label){case 0:return i=Z(Z({},vQ),r),Ue((function(c){return KP(c)&&re("number",c.scheduledAt,!0)})(i)).throw(ae.invalidParameters),a=te.of(this._iid).requestQueue,s=new gQ(Z({reqId:this._generateRequestId(),scheduledMessageId:e,channelType:this.channelType,channelUrl:this.url},i)),[4,a.send(s)];case 1:return o=u.sent(),[2,o.as(t5).message]}}))}))},n.prototype.createScheduledFileMessage=function(e){var r=this;e=Z(Z({},xY),e),Ue(LY(e)).throw(ae.invalidParameters);var i=Date.now(),a=this._generateRequestId(),s=new po;return za(uY).then((function(){var o=r._createPendingScheduledFileMessage(e,a,i);gt((function(){return D(r,void 0,void 0,(function(){return O(this,(function(u){return[2,s._trigger(o)]}))}))}))})),ra(e.file)?this._uploadFileAndUpdateParams(e).then((function(){return r._createScheduledFileMessage(e,s,a,i)})):this._createScheduledFileMessage(e,s,a,i),s},n.prototype.updateScheduledFileMessage=function(e,r){return D(this,void 0,void 0,(function(){var i,a,s;return O(this,(function(o){switch(o.label){case 0:return i=Z(Z({},fQ),r),Ue((function(u){return Ow(u)&&re("number",u.scheduledAt,!0)&&(ra(u.file)||re("string",u.fileUrl))&&re("string",u.fileName,!0)&&re("string",u.mimeType,!0)&&re("number",u.fileSize,!0)&&(u.thumbnailSizes===null||u.thumbnailSizes===void 0||u.thumbnailSizes.every((function(c){return re("object",c)&&c.maxWidth>0&&c.maxHeight>0})))})(i)).throw(ae.invalidParameters),ra(i.file)?[4,this._uploadFileAndUpdateParams(i)]:[3,2];case 1:o.sent(),o.label=2;case 2:return a=new pQ(Z({reqId:this._generateRequestId(),scheduledMessageId:e,channelType:this.channelType,channelUrl:this.url},i)),[4,te.of(this._iid).requestQueue.send(a)];case 3:return s=o.sent(),[2,s.as(mQ).message]}}))}))},n.prototype.cancelScheduledMessage=function(e){return D(this,void 0,void 0,(function(){var r;return O(this,(function(i){switch(i.label){case 0:return r=new _Q({scheduledMessageId:e,channelType:this.channelType,channelUrl:this.url}),[4,te.of(this._iid).requestQueue.send(r)];case 1:return i.sent(),[2]}}))}))},n.prototype.sendScheduledMessageNow=function(e){return D(this,void 0,void 0,(function(){var r;return O(this,(function(i){switch(i.label){case 0:return r=new yQ({scheduledMessageId:e,channelType:this.channelType,channelUrl:this.url}),[4,te.of(this._iid).requestQueue.send(r)];case 1:return i.sent(),[2]}}))}))},n.prototype.getMyPushTriggerOption=function(){return D(this,void 0,void 0,(function(){var e,r,i,a,s,o;return O(this,(function(u){switch(u.label){case 0:return e=te.of(this._iid),r=e.sdkState,i=e.requestQueue,a=new CQ({userId:r.userId,channelUrl:this.url}),[4,i.send(a)];case 1:return s=u.sent(),o=s.as(SQ).pushTriggerOption,this.myPushTriggerOption=o,[2,o]}}))}))},n.prototype.setMyPushTriggerOption=function(e){return D(this,void 0,void 0,(function(){var r,i,a,s,o,u,c;return O(this,(function(h){switch(h.label){case 0:return Ue(dn(Zv,e)).throw(ae.invalidParameters),r=te.of(this._iid),i=r.dispatcher,a=r.sdkState,s=r.requestQueue,o=new EQ({userId:a.userId,channelUrl:this.url,pushTriggerOption:e}),[4,s.send(o)];case 1:return u=h.sent(),c=u.as(bQ).pushTriggerOption,this.myPushTriggerOption=c,i.dispatch(new mn({channels:[this],context:{source:Se.EVENT_CHANNEL_UPDATED},isWebSocketEventComing:!0})),[2,c]}}))}))},n.prototype.setMyCountPreference=function(e){return D(this,void 0,void 0,(function(){var r,i,a,s,o,u,c;return O(this,(function(h){switch(h.label){case 0:return Ue(dn(Qo,e)).throw(ae.invalidParameters),r=te.of(this._iid),i=r.dispatcher,a=r.sdkState,s=r.requestQueue,o=new uQ({channelUrl:this.url,userId:a.userId,countPreference:e}),[4,s.send(o)];case 1:return u=h.sent(),c=u.as(cQ).countPreference,this.myCountPreference=c,this._updateUnreadCount(this.unreadMessageCount,this.unreadMentionCount),i.dispatch(new mn({channels:[this],context:{source:Se.EVENT_CHANNEL_UPDATED},isWebSocketEventComing:!0})),[2,c]}}))}))},n.prototype.resetMyHistory=function(){return D(this,void 0,void 0,(function(){var e,r,i,a,s,o;return O(this,(function(u){switch(u.label){case 0:return e=te.of(this._iid),r=e.dispatcher,i=e.requestQueue,a=new dQ({channelUrl:this.url}),[4,i.send(a)];case 1:return s=u.sent(),o=s.as(hQ).messageOffsetTimestamp,this.messageOffsetTimestamp=o,this.lastMessage&&this.lastMessage.createdAt<o&&(this.lastMessage=null),this._updateUnreadCount(0,0),this.totalUnreadReplyCount=0,r.dispatch(new mn({channels:[this],context:{source:Se.EVENT_CHANNEL_RESET_HISTORY},isWebSocketEventComing:!0})),[2,this]}}))}))},n.prototype._uploadFileAndUpdateParams=function(e){return D(this,void 0,void 0,(function(){var r,i,a,s,o,u,c,h,p,m;return O(this,(function(_){switch(_.label){case 0:return ra(e.file)?(r=te.of(this._iid).requestQueue,i=new tS({file:e.file,channelUrl:this.url,thumbnailSizes:e.thumbnailSizes,requestId:this._generateRequestId()}),[4,r.send(i)]):[3,2];case 1:a=_.sent(),s=a.as(nS),o=s.url,u=s.fileSize,c=u===void 0?e.fileSize:u,h=s.thumbnails,p=s.requireAuth,m=p!==void 0&&p,e.fileUrl=o,e.fileSize=c,e.requireAuth=m,e._thumbnails=h,_.label=2;case 2:return[2]}}))}))},n.prototype.resendMessage=function(e,r){var i,a=this;if(Ue(e instanceof ai&&!e.scheduledInfo&&e.isResendable).throw(ae.invalidParameters),e.isUserMessage()){var s=(i=e.messageParams)!==null&&i!==void 0?i:UA(e),o=new po;return this._sendUserMessage(s,Na.RESEND,e.reqId).onPending((function(p){o._trigger(p)})).onFailed((function(p,m){o._triggerFailed(p,m)})).onSucceeded((function(p){a._tryUpdateLastMessageAndCallEvents(a,p),o._trigger(p)})),o}if(e.isFileMessage()){var u=this._validateFailedFileMessageHasFile(e,r);Ue(u).throw(ae.invalidParameters),s=xA(e,r);var c=new po;return this._sendFileMessage(s,Na.RESEND,e.reqId).onPending((function(p){c._trigger(p)})).onFailed((function(p,m){c._triggerFailed(p,m)})).onSucceeded((function(p){a._tryUpdateLastMessageAndCallEvents(a,p),c._trigger(p)})),c}if(e.isMultipleFilesMessage()){s=e.messageParams;var h=new SC;return this._sendMultipleFilesMessage(s,Na.RESEND,e.reqId).onPending((function(p){h._trigger(p)})).onFailed((function(p,m){h._triggerFailed(p,m)})).onSucceeded((function(p){a._tryUpdateLastMessageAndCallEvents(a,p),h._trigger(p)})).onFileUploaded((function(p,m,_,b){h._triggerOnFileUploaded(p,m,_,b)})),h}},n.prototype.copyMessage=function(e,r){var i=this;if(Ue(e instanceof sS&&r instanceof ai&&r.sendingStatus===Tn.SUCCEEDED&&this.url===r.channelUrl&&!r.scheduledInfo).throw(ae.invalidParameters),r.isUserMessage()){Ue(!r.poll).throw(ae.notSupportedError);var a=zP(r),s=new po;return e._sendUserMessage(a).onPending((function(c){s._trigger(c)})).onFailed((function(c,h){s._triggerFailed(c,h)})).onSucceeded((function(c){e.isGroupChannel()&&i._tryUpdateLastMessageAndCallEvents(e,c),s._trigger(c)})),s}if(r.isFileMessage()){a=qP(r);var o=new po;return e._sendFileMessage(a).onPending((function(c){o._trigger(c)})).onFailed((function(c,h){o._triggerFailed(c,h)})).onSucceeded((function(c){e.isGroupChannel()&&i._tryUpdateLastMessageAndCallEvents(e,c),o._trigger(c)})),o}if(r.isMultipleFilesMessage()){if(e.isGroupChannel()){a=eY(r);var u=new SC;return e._sendMultipleFilesMessage(a,Na.COPY).onPending((function(c){u._trigger(c)})).onFailed((function(c,h){u._triggerFailed(c,h)})).onSucceeded((function(c){i._tryUpdateLastMessageAndCallEvents(e,c),u._trigger(c)})).onFileUploaded((function(c,h,p,m){u._triggerOnFileUploaded(c,h,p,m)})),u}throw ae.channelTypeNotSupportedError}},n.prototype.getMessageDeletionTimestamp=function(){return D(this,void 0,void 0,(function(){var e,r,i,a,s,o;return O(this,(function(u){switch(u.label){case 0:return e=te.of(this._iid),r=e.requestQueue,i=e.dispatcher,a=new TQ({channelUrl:this.url,channelType:this.channelType}),[4,r.send(a)];case 1:return s=u.sent(),o=s.as(NQ).messageDeletionTimestamp,this._messageDeletionTimestamp=o,i.dispatch(new O5({channel:this})),[2,o]}}))}))},n.prototype.submitCSAT=function(e){return D(this,void 0,void 0,(function(){var r,i,a,s,o,u;return O(this,(function(c){switch(c.label){case 0:return Ue(re("number",e.csat)&&re("string",e.csatType)&&re("string",e.csatReason,!0)&&re("boolean",e.isResolved,!0)&&re("number",e.resolutionScore,!0)&&re("number",e.csatStartedAt,!0)).throw(ae.invalidParameters),r=te.of(this._iid),i=r.requestQueue,a=r.dispatcher,s=new AQ(Z({channelUrl:this.url},e)),[4,i.send(s)];case 1:return o=c.sent(),u=o.as(MQ).conversation,this.conversation=u,a.dispatch(new mn({channels:[this],context:{source:Se.EVENT_CHANNEL_CSAT_SUBMITTED}})),[2,u]}}))}))},n.prototype.markConversationAsHandoff=function(){return D(this,void 0,void 0,(function(){var e,r,i,a,s,o;return O(this,(function(u){switch(u.label){case 0:return e=te.of(this._iid),r=e.requestQueue,i=e.dispatcher,a=new IQ({channelUrl:this.url}),[4,r.send(a)];case 1:return s=u.sent(),o=s.as(wQ).conversation,this.conversation=o,i.dispatch(new mn({channels:[this],context:{source:Se.EVENT_CHANNEL_CONVERSATION_HANDEDOFF}})),[2,o]}}))}))},n.prototype.closeConversation=function(){return D(this,void 0,void 0,(function(){var e,r,i,a,s,o;return O(this,(function(u){switch(u.label){case 0:return e=te.of(this._iid),r=e.requestQueue,i=e.dispatcher,a=new RQ({channelUrl:this.url}),[4,r.send(a)];case 1:return s=u.sent(),o=s.as(OQ).conversation,this.conversation=o,i.dispatch(new mn({channels:[this],context:{source:Se.EVENT_CHANNEL_UPDATED}})),[2,o]}}))}))},n.prototype.getContextObject=function(e){return D(this,void 0,void 0,(function(){var r,i,a;return O(this,(function(s){switch(s.label){case 0:return r=te.of(this._iid).requestQueue,i=new xQ({aiAgentId:e,channelUrl:this.url}),[4,r.send(i)];case 1:return a=s.sent(),[2,a.as(LQ).contextObject]}}))}))},n.prototype.updateContext=function(e,r){return D(this,void 0,void 0,(function(){var i,a,s;return O(this,(function(o){switch(o.label){case 0:return i=te.of(this._iid).requestQueue,a=new DQ({aiAgentId:e,channelUrl:this.url,context:r}),[4,i.send(a)];case 1:return s=o.sent(),[2,s.as(UQ).contextObject]}}))}))},n.prototype.patchContext=function(e,r){return D(this,void 0,void 0,(function(){var i,a,s;return O(this,(function(o){switch(o.label){case 0:return i=te.of(this._iid).requestQueue,a=new kQ({aiAgentId:e,channelUrl:this.url,context:r}),[4,i.send(a)];case 1:return s=o.sent(),[2,s.as(PQ).contextObject]}}))}))},n})(sS),Uh={},FQ=(function(){function t(n){var e=n._iid,r=n.limit,i=r===void 0?100:r,a=this;this.ref=0,this._iid=e,this._limit=i;var s,o=te.of(this._iid),u=o.sdkState,c=o.dispatcher,h=o.logger,p=o.cacheContext,m=o.statManager;this._metadataKey=(s=u.userId,"sendbird:".concat(s,"@groupchannel/sync.meta"));var _=(function(b){return"sendbird:".concat(b,"@groupchannel/sync")})(u.userId);this._sync=new Td(_,(function(){return D(a,void 0,void 0,(function(){var b,C,N,S,M,w,U,L,P,x,H,F,Q,$,q,X;return O(this,(function(V){switch(V.label){case 0:return b={hasNext:!0,nextToken:""},[4,this.loadMetadata()];case 1:if(V.sent(),h.debug("channel background sync from",(P=this._metadata)===null||P===void 0?void 0:P.token),(x=this._metadata)===null||x===void 0?void 0:x.completed)return[3,14];C={includeEmpty:!0,includeMetaData:!0,hiddenChannelFilter:wl.ALL,order:ti.CHRONOLOGICAL},V.label=2;case 2:if(V.trys.push([2,9,12,13]),C.order!==ti.LATEST_LAST_MESSAGE)return[3,6];V.label=3;case 3:return V.trys.push([3,5,,6]),[4,p.preference.get(Sw(u.appId))];case 4:return N=V.sent(),C.includeChatNotification=!!N,[3,6];case 5:return V.sent(),C.includeChatNotification=!1,[3,6];case 6:return[4,ji.of(this._iid).getMyGroupChannels((F=(H=this._metadata)===null||H===void 0?void 0:H.token)!==null&&F!==void 0?F:"",C,this._limit,Se.SYNC_CHANNEL_BACKGROUND)];case 7:return S=V.sent(),M=S.channels,w=S.token,b.hasNext=M.length>=this._limit&&!!w,b.nextToken=w,this._metadata&&(this._metadata.token=w,(L=this._metadata.range).extends.apply(L,wt([],dt(M.map((function(ee){return ee.createdAt}))),!1)),this._metadata.completed=!b.hasNext),h.debug("channel background sync progress",b),[4,this.saveMetadata()];case 8:return V.sent(),[3,13];case 9:return U=V.sent(),h.debug("channel background sync error",U),U instanceof ae&&U.isInvalidTokenError?[4,this.clearMetaData()]:[3,11];case 10:V.sent(),V.label=11;case 11:throw U;case 12:return m.put(new Ar({type:fr.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:"",measured_on:"channel_back_sync",event:"cache_fetch",max_db_size:($=(Q=p.localCacheConfig)===null||Q===void 0?void 0:Q.maxSize)!==null&&$!==void 0?$:0,use_local_cache:p.localCacheEnabled,starting_point:0,message_init_policy:(X=(q=C.order)===null||q===void 0?void 0:q.toString())!==null&&X!==void 0?X:"",collection_id:u.userId}})),[7];case 13:return[3,15];case 14:b.hasNext=!1,b.nextToken="",V.label=15;case 15:return[2,b]}}))}))})),this._connectionEventContext=c.on((function(b){b instanceof Ao&&(b.stateType===zn.CONNECTED?a.resume():a.pause())}))}return t.of=function(n){return Uh[n]||(Uh[n]=new t({_iid:n})),Uh[n].ref++,Uh[n]},t.clear=function(n){Uh[n]&&(Uh[n].close(),delete Uh[n])},Object.defineProperty(t.prototype,"range",{get:function(){var n,e;return(e=(n=this._metadata)===null||n===void 0?void 0:n.range)!==null&&e!==void 0?e:new Eu({})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"completed",{get:function(){var n;return!!(!((n=this._metadata)===null||n===void 0)&&n.completed)},enumerable:!1,configurable:!0}),t.prototype.loadMetadata=function(){return D(this,void 0,void 0,(function(){var n;return O(this,(function(e){switch(e.label){case 0:return this._metadata?[3,2]:[4,te.of(this._iid).cacheContext.preference.get(this._metadataKey)];case 1:n=e.sent(),this._metadata={token:n?n.token:"",range:new Eu(n?n.range:{top:Number.MAX_SAFE_INTEGER,bottom:0}),completed:!!n&&n.completed},e.label=2;case 2:return[2,this._metadata]}}))}))},t.prototype.saveMetadata=function(){return D(this,void 0,void 0,(function(){return O(this,(function(n){switch(n.label){case 0:return this._metadata?[4,te.of(this._iid).cacheContext.preference.set(this._metadataKey,this._metadata)]:[3,2];case 1:return n.sent(),[2,!0];case 2:return[2,!1]}}))}))},t.prototype.clearMetaData=function(){return D(this,void 0,void 0,(function(){return O(this,(function(n){switch(n.label){case 0:return[4,te.of(this._iid).cacheContext.preference.remove(this._metadataKey)];case 1:return n.sent(),this._metadata=void 0,[2]}}))}))},t.prototype.resume=function(){var n,e,r=te.of(this._iid),i=r.logger;r.sessionManager.session.hasSession&&(i.debug("channel background sync resume()"),this._sync.start((e=(n=this._metadata)===null||n===void 0?void 0:n.token)!==null&&e!==void 0?e:""))},t.prototype.pause=function(){te.of(this._iid).logger.debug("channel background sync stop()"),this._sync.stop()},t.prototype.close=function(){this.ref--,this.ref<=0&&(this.ref=0,this.pause(),this._connectionEventContext.close(),delete Uh[this._iid])},t})(),xh={},BQ=(function(){function t(n){var e=n._iid,r=this;this.ref=0,this._iid=e;var i,a=te.of(this._iid),s=a.logger,o=a.sdkState,u=a.dispatcher,c=a.cacheContext,h=a.statManager;this._metadataKey=(i=o.userId,"sendbird:".concat(i,"@groupchannel/changelogs.meta")),this._subscribers=new Tp;var p=(function(m){return"sendbird:".concat(m,"@groupchannel/changelogs")})(o.userId);this._sync=new Td(p,(function(){return D(r,void 0,void 0,(function(){var m,_,b,C,N,S,M,w,U,L,P,x,H;return O(this,(function(F){switch(F.label){case 0:return m={hasNext:!0,nextToken:0},[4,this.loadMetadata()];case 1:F.sent(),s.debug("channel changelog sync from",(P=this._metadata)===null||P===void 0?void 0:P.token),_=ji.of(this._iid),F.label=2;case 2:F.trys.push([2,9,12,16]),b={includeEmpty:!0,includeMetaData:!0},F.label=3;case 3:return F.trys.push([3,5,,6]),[4,c.preference.get(Sw(o.appId))];case 4:return C=F.sent(),b.includeChatNotification=!!C,[3,6];case 5:return F.sent(),b.includeChatNotification=!1,[3,6];case 6:return[4,_.getMyGroupChannelChangeLogs((H=(x=this._metadata)===null||x===void 0?void 0:x.token)!==null&&H!==void 0?H:"",b,Se.SYNC_CHANNEL_CHANGELOGS)];case 7:return N=F.sent(),S=N.updatedChannels,M=N.deletedChannelUrls,w=N.hasMore,U=N.token,this._subscribers.dispatch("progress",{updatedChannels:S,deletedChannelUrls:M,hasMore:w,token:U}),m.hasNext=w,m.nextToken=U,this._metadata&&(this._metadata.token=U),s.debug("channel changelog sync progress",m),[4,this.saveMetadata()];case 8:return F.sent(),c.localCacheEnabled&&h.put(new Ar({type:fr.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:"",measured_on:"channel_change_log_sync",event:S.length>0||M.length>0?"cache_miss":"cache_hit",max_db_size:S.length,use_local_cache:c.localCacheEnabled,starting_point:0,message_init_policy:M.length.toString(),collection_id:o.userId}})),[3,16];case 9:return L=F.sent(),s.debug("channel changelog sync error",L),L instanceof ae&&L.isInvalidTokenError?[4,this.clearMetadata()]:[3,11];case 10:F.sent(),F.label=11;case 11:throw L;case 12:return m.hasNext?[3,15]:[4,za(500)];case 13:return F.sent(),[4,_.removeChannelsByRotation()];case 14:F.sent(),F.label=15;case 15:return[7];case 16:return[2,m]}}))}))})),this._sync.on("stop",(function(){r._subscribers.dispatch("pause")})),this._connectionEventContext=u.on((function(m){m instanceof Ao&&(m.stateType===zn.CONNECTED?r.resume():r.pause())}))}return t.of=function(n){return xh[n]||(xh[n]=new t({_iid:n})),xh[n].ref++,xh[n]},t.clear=function(n){xh[n]&&(xh[n].close(),delete xh[n])},Object.defineProperty(t.prototype,"isRunning",{get:function(){return this._sync.isRunning},enumerable:!1,configurable:!0}),t.prototype.loadMetadata=function(){return D(this,void 0,void 0,(function(){var n,e,r,i;return O(this,(function(a){switch(a.label){case 0:return this._metadata?[3,2]:(n=te.of(this._iid),e=n.cacheContext,r=n.firstConnectedAt,[4,e.preference.get(this._metadataKey)]);case 1:i=a.sent(),this._metadata={token:i?i.token:r},a.label=2;case 2:return[2,this._metadata]}}))}))},t.prototype.saveMetadata=function(){return D(this,void 0,void 0,(function(){return O(this,(function(n){switch(n.label){case 0:return this._metadata?[4,te.of(this._iid).cacheContext.preference.set(this._metadataKey,this._metadata)]:[3,2];case 1:return n.sent(),[2,!0];case 2:return[2,!1]}}))}))},t.prototype.clearMetadata=function(){return D(this,void 0,void 0,(function(){return O(this,(function(n){switch(n.label){case 0:return[4,te.of(this._iid).cacheContext.preference.remove(this._metadataKey)];case 1:return n.sent(),this._metadata=void 0,[2]}}))}))},t.prototype.on=function(n,e){return this._subscribers.on(n,e)},t.prototype.resume=function(){te.of(this._iid).sessionManager.session.hasSession&&this._sync.start(0)},t.prototype.pause=function(){this._sync.stop()},t.prototype.close=function(){this.ref--,this.ref<=0&&(this.ref=0,this.pause(),this._connectionEventContext.close(),delete xh[this._iid])},t})(),IC=function(t,n){return t.findIndex((function(e){return e.isIdentical(n)}))},BD=function(t,n,e){if(t.length>0){for(var r=IC(t,n),i=0,a=t.length-1,s=Math.floor((i+a)/2);i<a;){var o=HD(t[s],n,e);if(o>0)a=s,s=Math.floor((i+a)/2);else{if(!(o<0))return{place:s,oldPosition:r};i=s+1,s=Math.floor((i+a)/2)}}return{place:HD(t[s],n,e)>=0?s:s+1,oldPosition:r}}return{place:t.length,oldPosition:-1}},HD=function(t,n,e){switch(e){case ti.LATEST_LAST_MESSAGE:return t.lastMessage&&n.lastMessage?(r=n.lastMessage.createdAt-t.lastMessage.createdAt)===0?n.createdAt-t.createdAt:r:t.lastMessage?-1:n.lastMessage?1:n.createdAt-t.createdAt;case ti.CHRONOLOGICAL:return n.createdAt-t.createdAt;case ti.CHANNEL_NAME_ALPHABETICAL:var r;return(r=t.name.localeCompare(n.name))===0?t.createdAt-n.createdAt:r;default:return 0}},HQ=(function(){function t(n,e){var r=e.filter,i=r===void 0?new I5:r,a=e.order,s=a===void 0?ti.LATEST_LAST_MESSAGE:a,o=e.limit,u=o===void 0?n5:o,c=e.includeChangesOnInitialLoad,h=c!==void 0&&c,p=this;this.channels=[],this._isInitialized=!1,this._iid=n,this._key="gcc-".concat(il()),this._isDisposed=!1,this._isGetRemoteChannelsSucceeded=!0,this._includeChangesOnInitialLoad=h,this.filter=i,this.order=s,this._hasMore=!0,this._token="",this._limit=u;var m=te.of(this._iid),_=m.sdkState,b=m.cacheContext,C=m.dispatcher;b.localCacheEnabled&&(this._backgroundSync=FQ.of(n),this._backgroundSync.resume()),this._changelogSync=BQ.of(n),this._changelogSync.resume(),ji.of(this._iid).subscribeChannelEvent(this._key,{onUpdate:function(N,S){var M=S.source;if(MC(M)){var w=N.filter((function(L){return p.filter.match(L,_.userId)})),U=N.filter((function(L){return!p.filter.match(L,_.userId)})).map((function(L){return L.url}));w.length>0&&p._addChannelsToView(w,S),U.length>0&&p._removeChannelsFromView(U,S)}},onRemove:function(N,S){p._removeChannelsFromView(N,S)}}),C.on((function(N){N instanceof Ao&&(N.stateType===zn.CONNECTED?p._isGetRemoteChannelsSucceeded||D(p,void 0,void 0,(function(){return O(this,(function(S){switch(S.label){case 0:return[4,this._revokeLoadMore()];case 1:return S.sent(),[2]}}))})):N.stateType===zn.LOGOUT&&p.dispose())}))}return Object.defineProperty(t.prototype,"hasMore",{get:function(){return!this._isDisposed&&this._hasMore},enumerable:!1,configurable:!0}),t.prototype.setGroupChannelCollectionHandler=function(n){this._handler=n},t.prototype._addChannelsToView=function(n,e,r){var i,a,s,o,u=this;r===void 0&&(r=!1);var c=[],h=[],p=[];try{for(var m=Fe(n),_=m.next();!_.done;_=m.next()){var b=_.value,C=IC(this.channels,b);C>=0&&this.channels.splice(C,1);var N=BD(this.channels,b,this.order).place;if(C<0)N===this.channels.length?!r&&this._hasMore||(c.push(b),this.channels.push(b)):(c.push(b),this.channels.splice(N,0,b));else switch(e.source){case Se.EVENT_CHANNEL_UPDATED:case Se.EVENT_MESSAGE_RECEIVED:case Se.SYNC_CHANNEL_CHANGELOGS:case Se.EVENT_MESSAGE_SENT:this.order===ti.CHANNEL_NAME_ALPHABETICAL&&this._hasMore&&N===this.channels.length?p.push(b):(this.channels.splice(N,0,b),h.push(b));break;default:this.channels.splice(N,0,b),h.push(b)}}}catch(U){i={error:U}}finally{try{_&&!_.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}if(p.length>0)try{for(var S=Fe(p),M=S.next();!M.done;M=S.next()){b=M.value;var w=IC(this.channels,b);w!==-1&&this.channels.splice(w,1)}}catch(U){s={error:U}}finally{try{M&&!M.done&&(o=S.return)&&o.call(S)}finally{if(s)throw s.error}}MC(e.source)&&gt((function(){return D(u,void 0,void 0,(function(){var U,L,P;return O(this,(function(x){return c.length>0&&(!((U=this._handler)===null||U===void 0)&&U.onChannelsAdded)&&this._handler.onChannelsAdded(e,c),h.length>0&&(!((L=this._handler)===null||L===void 0)&&L.onChannelsUpdated)&&this._handler.onChannelsUpdated(e,h),p.length>0&&(!((P=this._handler)===null||P===void 0)&&P.onChannelsDeleted)&&this._handler.onChannelsDeleted(e,p.map((function(H){return H.url}))),[2]}))}))}))},t.prototype._removeChannelsFromView=function(n,e){var r,i,a=this,s=[],o=function(p){var m=u.channels.findIndex((function(_){return _.url===p}));m>=0&&(s.push(u.channels[m].url),u.channels.splice(m,1))},u=this;try{for(var c=Fe(n),h=c.next();!h.done;h=c.next())o(h.value)}catch(p){r={error:p}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}return MC(e.source)&&s.length>0&&gt((function(){return D(a,void 0,void 0,(function(){var p;return O(this,(function(m){return!((p=this._handler)===null||p===void 0)&&p.onChannelsDeleted&&this._handler.onChannelsDeleted(e,s),[2]}))}))})),s},t.prototype._getLocalChannels=function(){return D(this,void 0,void 0,(function(){var n,e;return O(this,(function(r){switch(r.label){case 0:return n=ji.of(this._iid),e=this.channels.length>0?(function(i,a){var s,o,u,c;switch(a){case ti.LATEST_LAST_MESSAGE:return(o=(s=i.lastMessage)===null||s===void 0?void 0:s.createdAt)!==null&&o!==void 0?o:i.createdAt;case ti.CHRONOLOGICAL:return i.createdAt;case ti.CHANNEL_NAME_ALPHABETICAL:return i.name;default:return(c=(u=i.lastMessage)===null||u===void 0?void 0:u.createdAt)!==null&&c!==void 0?c:i.createdAt}})(this.channels[this.channels.length-1],this.order):null,[4,n.getChannelsFromCache(e,this.filter,this.order,this._limit,e?this.channels[this.channels.length-1].url:void 0)];case 1:return[2,r.sent()]}}))}))},t.prototype._getRemoteChannels=function(){return D(this,void 0,void 0,(function(){var n,e,r;return O(this,(function(i){switch(i.label){case 0:return[4,ji.of(this._iid).getMyGroupChannels(this._token,ht(Z(Z({},this.filter),{userIdsFilter:this.filter.userIdsFilter,searchFilter:this.filter.searchFilter,order:this.order})),this._limit)];case 1:return n=i.sent(),e=n.channels,r=n.token,this._token=r,this._hasMore=!!r,[2,e]}}))}))},t.prototype._revokeLoadMore=function(){return D(this,void 0,void 0,(function(){var n;return O(this,(function(e){switch(e.label){case 0:if(this._isDisposed)return[2];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this._getRemoteChannels()];case 2:return n=e.sent(),this._isGetRemoteChannelsSucceeded=!0,this._addChannelsToView(n,{source:Se.REQUEST_CHANNEL},!0),[3,4];case 3:return e.sent(),this._isGetRemoteChannelsSucceeded=!1,[3,4];case 4:return[2]}}))}))},t.prototype.loadMore=function(){var n;return D(this,void 0,void 0,(function(){var e,r,i,a,s,o,u,c,h,p,m,_,b,C,N,S,M,w,U,L,P,x=this;return O(this,(function(H){switch(H.label){case 0:if(this._isDisposed)throw new ae({code:et.COLLECTION_DISPOSED,message:"Collection has been disposed."});return e=null,this._includeChangesOnInitialLoad&&this.channels.length===0&&this._changelogSync.isRunning?[4,new Promise((function(F){x._changelogSyncSubscriberContext=x._changelogSync.on("progress",(function(Q){return F(Q)})).on("pause",(function(){return F(null)}))}))]:[3,2];case 1:e=H.sent(),(n=this._changelogSyncSubscriberContext)===null||n===void 0||n.close(),H.label=2;case 2:return r=te.of(this._iid),i=r.cacheContext,a=r.connectionManager,s=r.statManager,this._isInitialized?[3,5]:(this._isInitialized=!0,i.localCacheEnabled?[4,this._backgroundSync.loadMetadata()]:[3,4]);case 3:H.sent(),H.label=4;case 4:s.put(new $y({type:fr.FEATURE_LOCALCACHE,data:{use_local_cache:i.localCacheEnabled,collection_interface:{group_channel:!0}}})),H.label=5;case 5:return o=[],this._hasMore?!i.localCacheEnabled||a.isConnected&&!this._backgroundSync.completed?[3,7]:[4,$r((function(){return D(x,void 0,void 0,(function(){return O(this,(function(F){switch(F.label){case 0:return[4,this._getLocalChannels()];case 1:return o=F.sent(),[2]}}))}))}))]:[3,11];case 6:return H.sent(),this._hasMore=o.length>=this._limit,[3,10];case 7:return H.trys.push([7,9,,10]),[4,this._getRemoteChannels()];case 8:return o=H.sent(),this._isGetRemoteChannelsSucceeded=!0,[3,10];case 9:return H.sent(),this._isGetRemoteChannelsSucceeded=!1,[3,10];case 10:this._addChannelsToView(o,{source:Se.REQUEST_CHANNEL},!0),H.label=11;case 11:if(e){u=te.of(this._iid).sdkState,c=e.updatedChannels.filter((function(F){return x.filter.match(F,u.userId)}));try{for(h=Fe(c),p=h.next();!p.done;p=h.next())m=p.value,(M=IC(o,m))>=0?o[M]=m:(_=BD(o,m,this.order).place,o.splice(_,0,m)),this._addChannelsToView([m],{source:Se.REQUEST_CHANNEL},!0)}catch(F){w={error:F}}finally{try{p&&!p.done&&(U=h.return)&&U.call(h)}finally{if(w)throw w.error}}b=o.map((function(F){return F.url}));try{for(C=Fe(e.deletedChannelUrls),N=C.next();!N.done;N=C.next())S=N.value,(M=b.indexOf(S))>=0&&(o.splice(M,1),b.splice(M,1))}catch(F){L={error:F}}finally{try{N&&!N.done&&(P=C.return)&&P.call(C)}finally{if(L)throw L.error}}this._removeChannelsFromView(e.deletedChannelUrls,{source:Se.REQUEST_CHANNEL})}return[2,o]}}))}))},t.prototype.dispose=function(){var n,e,r;this._isDisposed||(this._isDisposed=!0,this.channels.length>0&&this.channels.splice(0,this.channels.length),(n=this._backgroundSync)===null||n===void 0||n.close(),(e=this._changelogSync)===null||e===void 0||e.close(),(r=this._changelogSyncSubscriberContext)===null||r===void 0||r.close(),ji.of(this._iid).unsubscribeChannelEvent(this._key))},t})(),GQ=(function(t){function n(e){var r=this,i=e.token,a=e.limit,s=e.order,o=e.includeEmpty,u=e.membershipFilter,c=e.channelNameContainsFilter,h=e.channelUrlsFilter,p=e.customTypesFilter,m=e.customTypeStartsWithFilter,_=e.superChannelFilter,b=e.metadataOrderKeyFilter,C=e.metadataKey,N=e.metadataValues,S=e.metadataValueStartsWith,M=e.includeFrozen,w=e.includeMetaData;return(r=t.call(this)||this).method=Ie.GET,r.path=Ya,r.params=ze(ht({token:i,limit:a,order:s,show_member:!0,show_read_receipt:!0,show_delivery_receipt:!0,show_empty:o,public_mode:bc.PUBLIC,public_membership_mode:u,name_contains:c,channel_urls:h,custom_types:p,custom_type_startswith:m,super_mode:_,metadata_order_key:b,metadata_key:C,metadata_values:N,metadata_value_startswith:S,show_frozen:M,show_metadata:w})),r}return G(n,t),n})(we),VQ=(function(t){function n(e,r){var i=t.call(this,e,r)||this;i.channels=[];var a=r.next,s=r.channels,o=r.ts;return i.token=a,s&&s.length>0&&(i.channels=s.map((function(u){return u.ts=o,new al(e,u)}))),i.ts=typeof o=="number"?o:0,i}return G(n,t),n})(xe);(function(t){t.ALL="all",t.JOINED="joined"})(Dy||(Dy={}));var zQ=(function(t){function n(e,r){var i,a,s,o,u,c,h,p,m,_,b,C,N,S,M=this;return(M=t.call(this,e,r)||this).includeEmpty=!1,M.includeFrozen=!0,M.includeMetaData=!0,M.channelUrlsFilter=null,M.customTypesFilter=null,M.customTypeStartsWithFilter=null,M.channelNameContainsFilter=null,M.membershipFilter=Dy.ALL,M.superChannelFilter=zs.ALL,M.metadataKey=null,M.metadataValues=null,M.metadataOrderKeyFilter=null,M.metadataValueStartsWith=null,M.order=Iy.CHRONOLOGICAL,M.includeEmpty=(i=r.includeEmpty)!==null&&i!==void 0&&i,M.includeFrozen=(a=r.includeFrozen)===null||a===void 0||a,M.includeMetaData=(s=r.includeMetaData)===null||s===void 0||s,M.channelUrlsFilter=(o=r.channelUrlsFilter)!==null&&o!==void 0?o:null,M.customTypesFilter=(u=r.customTypesFilter)!==null&&u!==void 0?u:null,M.customTypeStartsWithFilter=(c=r.customTypeStartsWithFilter)!==null&&c!==void 0?c:null,M.channelNameContainsFilter=(h=r.channelNameContainsFilter)!==null&&h!==void 0?h:null,M.membershipFilter=(p=r.membershipFilter)!==null&&p!==void 0?p:Dy.ALL,M.superChannelFilter=(m=r.superChannelFilter)!==null&&m!==void 0?m:zs.ALL,M.metadataKey=(_=r.metadataKey)!==null&&_!==void 0?_:null,M.metadataValues=(b=r.metadataValues)!==null&&b!==void 0?b:null,M.metadataOrderKeyFilter=(C=r.metadataOrderKeyFilter)!==null&&C!==void 0?C:null,M.metadataValueStartsWith=(N=r.metadataValueStartsWith)!==null&&N!==void 0?N:null,M.order=(S=r.order)!==null&&S!==void 0?S:Iy.CHRONOLOGICAL,M}return G(n,t),n.prototype._validate=function(){return t.prototype._validate.call(this)&&re("boolean",this.includeEmpty)&&re("boolean",this.includeFrozen)&&re("boolean",this.includeMetaData)&&re("string",this.channelNameContainsFilter,!0)&&hn("string",this.channelUrlsFilter,!0)&&hn("string",this.customTypesFilter,!0)&&re("string",this.customTypeStartsWithFilter,!0)&&dn(Dy,this.membershipFilter)&&dn(zs,this.superChannelFilter)&&dn(Iy,this.order)&&re("string",this.metadataOrderKeyFilter,!0)&&re("string",this.metadataKey,!0)&&hn("string",this.metadataValues,!0)&&re("string",this.metadataValueStartsWith,!0)},n.prototype.next=function(){return D(this,void 0,void 0,(function(){var e,r,i,a,s,o,u;return O(this,(function(c){switch(c.label){case 0:return this._validate()?this._isLoading?[3,3]:(e=[],this._hasNext?(this._isLoading=!0,r=te.of(this._iid).requestQueue,i=new GQ(ht(Z(Z({},this),{token:this._token}))),[4,r.send(i)]):[3,2]):[3,5];case 1:return a=c.sent(),s=a.as(VQ),o=s.channels,u=s.token,this._token=u,this._hasNext=!!u,this._isLoading=!1,[2,o];case 2:return[2,e];case 3:throw ae.queryInProgress;case 4:return[3,6];case 5:throw ae.invalidParameters;case 6:return[2]}}))}))},n})(wd),Bw=(function(t){function n(e){e===void 0&&(e={});var r=t.call(this)||this;return Object.keys(e).forEach((function(i){r.hasOwnProperty(i)&&(r[i]=e[i])})),r}return G(n,t),n})((function(t){function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.onUserJoined=Bt,e.onUserLeft=Bt,e.onUserReceivedInvitation=Bt,e.onUserDeclinedInvitation=Bt,e.onChannelHidden=Bt,e.onUnreadMemberStatusUpdated=Bt,e.onUserMarkedRead=Bt,e.onUserMarkedUnread=Bt,e.onUndeliveredMemberStatusUpdated=Bt,e.onTypingStatusUpdated=Bt,e.onPollUpdated=Bt,e.onPollVoted=Bt,e.onPollDeleted=Bt,e.onPinnedMessageUpdated=Bt,e}return G(n,t),n})(M5)),jQ=(function(t){function n(e){var r=this,i=e.token,a=e.limit,s=e.order,o=e.reverse,u=e.channelUrl,c=e.messageTypeFilter,h=e.scheduledStatus;return(r=t.call(this)||this).method=Ie.GET,r.path="".concat(Bk),r.params=ze(ht({token:i,limit:a,reverse:o,channel_url:u,order:s,message_type:c,status:h})),r}return G(n,t),n})(we),qQ=(function(t){function n(e,r){var i=t.call(this,e,r)||this;i.scheduledMessages=[];var a=r.next,s=r.scheduled_messages;return i.token=a,i.scheduledMessages=s.map((function(o){return Da(e,o)})),i}return G(n,t),n})(xe),$Q=(function(t){function n(e,r){var i,a,s,o,u,c=this;return(c=t.call(this,e,r)||this).channelUrl=null,c.order=null,c.reverse=!1,c.scheduledStatus=null,c.messageTypeFilter=Ia.ALL,c.channelUrl=(i=r.channelUrl)!==null&&i!==void 0?i:null,c.order=(a=r.order)!==null&&a!==void 0?a:null,c.reverse=(s=r.reverse)!==null&&s!==void 0&&s,c.scheduledStatus=(o=r.scheduledStatus)!==null&&o!==void 0?o:null,c.messageTypeFilter=(u=r.messageTypeFilter)!==null&&u!==void 0?u:Ia.ALL,c}return G(n,t),n.prototype._validate=function(){return t.prototype._validate.call(this)&&re("string",this.channelUrl,!0)&&(dn(FA,this.order)||this.order===null)&&re("boolean",this.reverse)&&(hn(Kh,this.scheduledStatus)||this.scheduledStatus===null)&&dn(Ia,this.messageTypeFilter)},n.prototype.next=function(){return D(this,void 0,void 0,(function(){var e,r,i,a,s,o;return O(this,(function(u){switch(u.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=te.of(this._iid).requestQueue,r=new jQ(ht(Z(Z({},this),{token:this._token}))),[4,e.send(r)]):[3,2]:[3,5];case 1:return i=u.sent(),a=i.as(qQ),s=a.scheduledMessages,o=a.token,this._token=o,this._hasNext=!!o,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw ae.queryInProgress;case 4:return[3,6];case 5:throw ae.invalidParameters;case 6:return[2]}}))}))},n})(wd),KQ=(function(t){function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.name="groupChannel",e}return G(n,t),n.prototype.init=function(e,r){var i=r.sdkState,a=r.dispatcher,s=r.sessionManager,o=r.requestQueue,u=r.logger,c=r.onlineDetector,h=r.cacheContext;t.prototype.init.call(this,e,{sdkState:i,dispatcher:a,sessionManager:s,requestQueue:o,logger:u,onlineDetector:c,cacheContext:h}),this._manager=new ji(e,{sdkState:i,cacheContext:h,dispatcher:a,sessionManager:s,requestQueue:o,logger:u})},n.prototype.createGroupChannelCollection=function(e){return e===void 0&&(e={}),new HQ(this._iid,e)},n.prototype.createMyGroupChannelListQuery=function(e){return e===void 0&&(e={}),new D5(this._iid,e)},n.prototype.createPublicGroupChannelListQuery=function(e){return e===void 0&&(e={}),new zQ(this._iid,e)},n.prototype.createScheduledMessageListQuery=function(e){return e===void 0&&(e={}),new $Q(this._iid,e)},n.prototype.addGroupChannelHandler=function(e,r){Ue(re("string",e)&&r instanceof Bw).throw(ae.invalidParameters),this._manager.addHandler(e,r)},n.prototype.removeGroupChannelHandler=function(e){Ue(re("string",e)).throw(ae.invalidParameters),this._manager.removeHandler(e)},n.prototype.removeAllGroupChannelHandlers=function(){this._manager.clearHandler()},n.prototype.buildGroupChannelFromSerializedData=function(e){return this._manager.buildGroupChannelFromSerializedData(e)},n.prototype.buildGroupChannelListQueryFromSerializedData=function(e){return this._manager.buildGroupChannelListQueryFromSerializedData(e)},n.prototype.buildMemberFromSerializedData=function(e){return this._manager.buildMemberFromSerializedData(e)},n.prototype.getChannel=function(e){return D(this,void 0,void 0,(function(){return O(this,(function(r){return Ue(re("string",e)).throw(ae.invalidParameters),[2,this._manager.getChannel(e)]}))}))},n.prototype.getChannelWithoutCache=function(e){return D(this,void 0,void 0,(function(){return O(this,(function(r){return Ue(re("string",e)).throw(ae.invalidParameters),[2,this._manager.getChannelWithoutCache(e)]}))}))},n.prototype.getMyGroupChannelChangeLogsByToken=function(e,r){return r===void 0&&(r={}),D(this,void 0,void 0,(function(){var i;return O(this,(function(a){switch(a.label){case 0:return i=Z(Z({},cS),r),Ue(re("string",e)&&HA(i)).throw(ae.invalidParameters),[4,this._manager.getMyGroupChannelChangeLogs(e,i)];case 1:return[2,a.sent()]}}))}))},n.prototype.getMyGroupChannelChangeLogsByTimestamp=function(e,r){return r===void 0&&(r={}),D(this,void 0,void 0,(function(){var i;return O(this,(function(a){switch(a.label){case 0:return i=Z(Z({},cS),r),Ue(re("number",e)&&HA(i)).throw(ae.invalidParameters),[4,this._manager.getMyGroupChannelChangeLogs(e,i)];case 1:return[2,a.sent()]}}))}))},n.prototype.getGroupChannelCount=function(e){return D(this,void 0,void 0,(function(){var r;return O(this,(function(i){return r=Z(Z({},w5),e),Ue(R5(r)).throw(ae.invalidParameters),[2,this._manager.getGroupChannelCount(r)]}))}))},n.prototype.getUnreadItemCount=function(e){return e===void 0&&(e={}),D(this,void 0,void 0,(function(){return O(this,(function(r){switch(r.label){case 0:return[4,this._manager.getUnreadItemCount(e)];case 1:return[2,r.sent()]}}))}))},n.prototype.getTotalUnreadChannelCount=function(){return D(this,void 0,void 0,(function(){return O(this,(function(e){switch(e.label){case 0:return[4,this._manager.getTotalUnreadChannelCount()];case 1:return[2,e.sent()]}}))}))},n.prototype.getTotalUnreadMessageCount=function(e){return e===void 0&&(e={}),D(this,void 0,void 0,(function(){return O(this,(function(r){switch(r.label){case 0:return[4,this._manager.getTotalUnreadMessageCount(e)];case 1:return[2,r.sent()]}}))}))},n.prototype.getTotalScheduledMessageCount=function(e){return e===void 0&&(e={}),D(this,void 0,void 0,(function(){return O(this,(function(r){switch(r.label){case 0:return[4,this._manager.getTotalScheduledMessageCount(e)];case 1:return[2,r.sent()]}}))}))},n.prototype.getSubscribedTotalUnreadMessageCount=function(){return this._manager.getSubscribedTotalUnreadMessageCount()},n.prototype.getSubscribedCustomTypeTotalUnreadMessageCount=function(){return this._manager.getSubscribedCustomTypeTotalUnreadMessageCount()},n.prototype.getSubscribedCustomTypeUnreadMessageCount=function(e){return this._manager.getSubscribedCustomTypeUnreadMessageCount(e)},n.prototype.createChannel=function(e){return e===void 0&&(e={}),D(this,void 0,void 0,(function(){var r;return O(this,(function(i){return r=Z(Z({},AC),e),Ue(BA(r)).throw(ae.invalidParameters),[2,this._manager.createChannel(r)]}))}))},n.prototype.createDistinctChannelIfNotExist=function(e){return e===void 0&&(e={}),D(this,void 0,void 0,(function(){var r;return O(this,(function(i){return r=Z(Z({},AC),e),Ue(BA(r)).throw(ae.invalidParameters),r&&(r.isDistinct=!0),[2,this.createChannel(r)]}))}))},n.prototype.createChannelWithUserIds=function(e,r,i,a,s,o){return r===void 0&&(r=!1),s===void 0&&(s=""),o===void 0&&(o=""),D(this,void 0,void 0,(function(){var u;return O(this,(function(c){return u=Z(Z({},AC),{invitedUserIds:e,isDistinct:r,name:i,data:s,customType:o}),typeof a=="string"?u.coverUrl=a:u.coverImage=a,[2,this.createChannel(u)]}))}))},n.prototype.markAsReadAll=function(){return D(this,void 0,void 0,(function(){return O(this,(function(e){return this._manager.markAsReadAll(),[2]}))}))},n.prototype.markAsReadWithChannelUrls=function(e){return D(this,void 0,void 0,(function(){return O(this,(function(r){return Ue(hn("string",e)).throw(ae.invalidParameters),this._manager.markAsReadWithChannelUrls(e),[2]}))}))},n.prototype.markAsDelivered=function(e){return D(this,void 0,void 0,(function(){return O(this,(function(r){switch(r.label){case 0:return Ue(re("string",e)).throw(ae.invalidParameters),[4,this.getChannel(e)];case 1:return[4,r.sent().markAsDelivered()];case 2:return r.sent(),[2]}}))}))},n})(GS);ti.LATEST_LAST_MESSAGE;function CE(t){const n=R.useRef(t);return n.current=t,R.useCallback((...e)=>n.current(...e),[n])}var YQ=(function(t){function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.name="poll",e}return G(n,t),n.prototype.init=function(e,r){var i=r.sdkState,a=r.dispatcher,s=r.sessionManager,o=r.requestQueue,u=r.logger,c=r.onlineDetector,h=r.cacheContext;t.prototype.init.call(this,e,{sdkState:i,dispatcher:a,sessionManager:s,requestQueue:o,logger:u,onlineDetector:c,cacheContext:h}),this._manager=new eS(e,{sdkState:i,dispatcher:a,sessionManager:s,requestQueue:o,logger:u,onlineDetector:c,cacheContext:h})},n.prototype.create=function(e){return D(this,void 0,void 0,(function(){var r;return O(this,(function(i){return r=Z(Z({},m$),e),Ue(OP(r)).throw(ae.invalidParameters),[2,this._manager.create(r)]}))}))},n.prototype.get=function(e){return D(this,void 0,void 0,(function(){var r;return O(this,(function(i){return r=Z(Z({},_$),e),Ue(UP(r)).throw(ae.invalidParameters),[2,this._manager.get(r)]}))}))},n.prototype.getOption=function(e){return D(this,void 0,void 0,(function(){var r;return O(this,(function(i){return r=Z(Z({},g$),e),Ue(DP(r)).throw(ae.invalidParameters),[2,this._manager.getOption(r)]}))}))},n.prototype.buildPollFromSerializedData=function(e){return this._manager.buildPollFromSerializedData(e)},n})(GS),WQ=function(t){return["-lastMessageUpdatedAt","-createdAt","syncIndex"]},GD=(function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return G(n,t),n})(gr),x5=function(t){this.key=t.key,this.url=t.url},L5=function(t){this.id=t.id,this.name=t.name,this.url=t.url,this.emojis=t.emojis?t.emojis.map((function(n){return new x5(n)})):[]},QQ=function(t){this.emojiHash=t.emoji_hash||"",this.emojiCategories=t.emoji_categories?t.emoji_categories.map((function(n){return new L5(n)})):[]},XQ={profileImage:void 0,profileUrl:void 0,nickname:void 0},VD=function(t){return{v2:function(){return D(void 0,void 0,void 0,(function(){return O(this,(function(n){switch(n.label){case 0:return[4,t.commitSchema([{collectionName:r5,keyName:$K,index:[NC(ti.LATEST_LAST_MESSAGE),NC(ti.CHRONOLOGICAL),NC(ti.CHANNEL_NAME_ALPHABETICAL)]},{collectionName:kw,keyName:KK,index:[pc(ga.CHANNEL_LATEST),pc(ga.NEWEST_CHILD_MESSAGE)]},{collectionName:u5,keyName:kY,index:[pc(ga.CHANNEL_LATEST),pc(ga.NEWEST_CHILD_MESSAGE)]},{collectionName:WK,keyName:QK}])];case 1:return[2,n.sent()]}}))}))},v3:function(){return D(void 0,void 0,void 0,(function(){return O(this,(function(n){switch(n.label){case 0:return[4,t.commitSchema([{collectionName:XK,keyName:ZK,index:[WQ()]}])];case 1:return[2,n.sent()]}}))}))},v4:function(){return D(void 0,void 0,void 0,(function(){return O(this,(function(n){switch(n.label){case 0:return[4,t.commitSchema([{collectionName:a5,keyName:YK,index:[OY()]}])];case 1:return[2,n.sent()]}}))}))},v5:function(){return D(void 0,void 0,void 0,(function(){return O(this,(function(n){switch(n.label){case 0:return[4,t.commitSchema([{collectionName:s5,keyName:JK,index:[["-userId","-updatedAt"]]}])];case 1:return[2,n.sent()]}}))}))}}},zD=function(t){var n=new l5;return function(e,r){return D(void 0,void 0,void 0,(function(){var i,a,s,o;return O(this,(function(u){switch(u.label){case 0:switch(e){case 1:case 2:case 3:case 4:return[3,1];case 5:return[3,2];case 6:return[3,4];case 7:return[3,11]}return[3,15];case 1:return r(),[3,16];case 2:return[4,t.reset()];case 3:return u.sent(),r(),[3,16];case 4:return u.trys.push([4,9,,10]),i=VD(t),a=i.v2,s=i.v3,o=i.v4,[4,a()];case 5:return u.sent(),[4,s()];case 6:return u.sent(),[4,o()];case 7:return u.sent(),[4,t.collection(kw).removeIf({where:{channelType:yn.OPEN}})];case 8:return u.sent(),[3,10];case 9:return u.sent(),n.warn("Failed to migrate to v2, v3, v4"),[3,10];case 10:return r(),[3,16];case 11:return u.trys.push([11,13,,14]),[4,(0,VD(t).v5)()];case 12:return u.sent(),[3,14];case 13:return u.sent(),n.warn("Failed to migrate to v5"),[3,14];case 14:return r(),[3,16];case 15:r(),u.label=16;case 16:return[2]}}))}))}},ZQ=function(){return typeof document<"u"?document.visibilityState:"visible"},JQ=(function(t){function n(e){var r=e.getVisibilityState,i=r===void 0?ZQ:r,a=e.initialState,s=a===void 0?"visible":a,o=e.isEnabled,u=o===void 0||o,c=e.pauseCheckDelay,h=c===void 0?3e4:c,p=t.call(this)||this;return p._pauseCheckDelay=3e4,p._currentState="visible",p._getVisibilityState=i,p._pauseCheckDelay=h,p._currentState=s,p._isEnabled=u,p._boundToggleState=p._toggleState.bind(p),p}return G(n,t),Object.defineProperty(n.prototype,"currentState",{get:function(){return this._currentState},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isAvailable",{get:function(){return typeof window<"u"&&!!window.addEventListener&&!!window.removeEventListener},enumerable:!1,configurable:!0}),n.prototype._toggleState=function(){var e=this,r=this._getVisibilityState();r!=="hidden"?this._currentState==="hidden"&&(this._pauseDelayTimer&&(clearTimeout(this._pauseDelayTimer),this._pauseDelayTimer=void 0),this.dispatch("resume")):this._currentState!=="hidden"&&(this._pauseDelayTimer=setTimeout((function(){e._pauseDelayTimer=void 0,e.dispatch("pause")}),this._pauseCheckDelay)),this._currentState=r},n.prototype.start=function(){this._isEnabled&&this.isAvailable&&(this._boundToggleState=this._toggleState.bind(this),window.addEventListener("visibilitychange",this._boundToggleState,{capture:!0}))},n.prototype.stop=function(){this._isEnabled&&this.isAvailable&&this._boundToggleState&&window.removeEventListener("visibilitychange",this._boundToggleState,{capture:!0})},n})(Tp),eX=(function(){function t(n){var e=n.logger,r=n.connectionDelegate,i=r===void 0?null:r,a=this;this._onlineWorker=function(){var s;return(s=a.connectionDelegate)===null||s===void 0?void 0:s.reconnect()},this._offlineWorker=function(){var s;return(s=a.connectionDelegate)===null||s===void 0?void 0:s.disconnect()},this.unsubscribes=[],this._onlineListener=function(s){if(a.isAvailableOnWeb)return window.addEventListener("online",s),function(){return window.removeEventListener("online",s,!1)}},this._offlineListener=function(s){if(a.isAvailableOnWeb)return window.addEventListener("offline",s),function(){return window.removeEventListener("offline",s,!1)}},this.logger=e,i&&(this.connectionDelegate=i)}return Object.defineProperty(t.prototype,"isAvailableOnWeb",{get:function(){return typeof window<"u"&&!!window.addEventListener&&"ononline"in window&&"onoffline"in window&&typeof navigator<"u"&&navigator.onLine!==void 0},enumerable:!1,configurable:!0}),t.prototype.setOnlineListener=function(n){n&&typeof n=="function"&&(this._onlineListener=n)},t.prototype.setOfflineListener=function(n){n&&typeof n=="function"&&(this._offlineListener=n)},t.prototype.start=function(){this.unsubscribes=[this._onlineListener(this._onlineWorker),this._offlineListener(this._offlineWorker)]},t.prototype.stop=function(){var n=this;this.unsubscribes.forEach((function(e){try{e?.()}catch(r){n.logger.warn(r.message)}})),this.unsubscribes=[]},t.prototype.isOnline=function(){return D(this,void 0,void 0,(function(){return O(this,(function(n){return this.isAvailableOnWeb?[2,navigator.onLine]:[2,new Promise((function(e){fetch("https://www.google.com",{method:Ie.GET,mode:"no-cors"}).then((function(){return e(!0)})).catch((function(){return e(!1)}))}))]}))}))},t})(),tX=(function(t){function n(e){var r,i=this;return(i=t.call(this)||this).method=Ie.GET,i.path=Sj,i.params=ze(ht({ts:typeof e.token=="number"?e.token:void 0,token:typeof e.token=="string"?e.token:void 0,limit:(r=e.limit)!==null&&r!==void 0?r:100})),i}return G(n,t),n})(we),nX=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.configs=r.configs,i.hasMore=r.has_more,i.nextToken=r.next,i.ts=r.ts,i}return G(n,t),n})(xe),jD=(function(t){function n(e){var r=e.userId,i=e.nickname,a=e.profileUrl,s=e.profileImage,o=e.preferredLanguages,u=t.call(this)||this;return u.method=Ie.PUT,u.path="".concat(jn,"/").concat(encodeURIComponent(r)),u.params=ze(ht({nickname:i,profile_url:a,profile_file:s,preferred_languages:o})),u}return G(n,t),n})(we),qD=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.user=new fn(e,Z({},r)),i}return G(n,t),n})(xe),rX=(function(t){function n(e){var r=e.userId,i=e.token,a=e.deviceOS,s=e.deviceManufacturer,o=e.systemPushEnabled,u=t.call(this)||this;return u.method=Ie.POST,u.path="".concat(jn,"/").concat(encodeURIComponent(r),"/push/apns"),u.params=ze({apns_device_token:i,always_push:!0,device_os:a,device_manufacturer:s,system_push_enabled:o}),u}return G(n,t),n})(we);(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.token=r.token,i.type=r.type?na[r.type.toLowerCase()]:na.UNKNOWN,i.user=new fn(e,r.user),i}G(n,t)})(xe);var iX=(function(t){function n(e){var r=e.userId,i=e.token,a=e.deviceOS,s=e.deviceManufacturer,o=e.systemPushEnabled,u=t.call(this)||this;return u.method=Ie.POST,u.path="".concat(jn,"/").concat(encodeURIComponent(r),"/push/gcm"),u.params=ze({gcm_reg_token:i,always_push:!0,device_os:a,device_manufacturer:s,system_push_enabled:o}),u}return G(n,t),n})(we);(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.token=r.token,i.type=r.type?na[r.type.toLowerCase()]:na.UNKNOWN,i.user=new fn(e,r.user),i}G(n,t)})(xe);var aX=(function(t){function n(e){var r=e.userId,i=e.token,a=t.call(this)||this;return a.method=Ie.DELETE,a.path="".concat(jn,"/").concat(encodeURIComponent(r),"/push/apns/").concat(encodeURIComponent(i)),a}return G(n,t),n})(we),sX=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.token=r.token,i.user=new fn(e,r.user),i.lastDeletedAt=r.device_token_last_deleted_at,i}return G(n,t),n})(xe),oX=(function(t){function n(e){var r=e.userId,i=e.token,a=t.call(this)||this;return a.method=Ie.DELETE,a.path="".concat(jn,"/").concat(encodeURIComponent(r),"/push/gcm/").concat(encodeURIComponent(i)),a}return G(n,t),n})(we),lX=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.token=r.token,i.user=new fn(e,r.user),i.lastDeletedAt=r.device_token_last_deleted_at,i}return G(n,t),n})(xe),uX=(function(t){function n(e){var r=e.userId,i=t.call(this)||this;return i.method=Ie.DELETE,i.path="".concat(jn,"/").concat(encodeURIComponent(r),"/push/apns"),i}return G(n,t),n})(we),cX=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.type=r.type?na[r.type.toLowerCase()]:na.UNKNOWN,i.user=new fn(e,r.user),i.lastDeletedAt=r.device_token_last_deleted_at,i}return G(n,t),n})(xe),dX=(function(t){function n(e){var r=e.userId,i=t.call(this)||this;return i.method=Ie.DELETE,i.path="".concat(jn,"/").concat(encodeURIComponent(r),"/push/gcm"),i}return G(n,t),n})(we),hX=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.type=r.type?na[r.type.toLowerCase()]:na.UNKNOWN,i.user=new fn(e,r.user),i.lastDeletedAt=r.device_token_last_deleted_at,i}return G(n,t),n})(xe),fX=(function(t){function n(e){var r=e.userId,i=e.type,a=e.token,s=e.ts,o=t.call(this)||this;return o.method=Ie.GET,o.path="".concat(jn,"/").concat(encodeURIComponent(r),"/push/").concat(encodeURIComponent(i),"/device_tokens"),o.params={created_ts:s,token:a},o}return G(n,t),n})(we),vX=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.pushTokens={type:r.type?na[r.type.toLowerCase()]:na.UNKNOWN,deviceTokens:r.device_tokens,hasMore:r.has_more,token:r.token},i}return G(n,t),n})(xe),pX=(function(t){function n(e){var r=e.userId,i=t.call(this)||this;return i.method=Ie.GET,i.path="".concat(jn,"/").concat(encodeURIComponent(r),"/channel_invitation_preference"),i}return G(n,t),n})(we),mX=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.autoAccept=r.auto_accept,i}return G(n,t),n})(xe),gX=(function(t){function n(e){var r=e.userId,i=e.willAutoAccept,a=t.call(this)||this;return a.method=Ie.PUT,a.path="".concat(jn,"/").concat(encodeURIComponent(r),"/channel_invitation_preference"),a.params={auto_accept:i},a}return G(n,t),n})(we),_X=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.autoAccept=r.auto_accept,i}return G(n,t),n})(xe),yX=(function(t){function n(e){var r=e.userId,i=t.call(this)||this;return i.method=Ie.GET,i.path="".concat(jn,"/").concat(encodeURIComponent(r),"/push_preference"),i}return G(n,t),n})(we),EX=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.preference={doNotDisturbOn:r.do_not_disturb,startHour:r.start_hour,startMin:r.start_min,endHour:r.end_hour,endMin:r.end_min,timezone:r.timezone},i}return G(n,t),n})(xe),bX=(function(t){function n(e){var r=e.userId,i=e.doNotDisturbOn,a=e.startHour,s=e.startMin,o=e.endHour,u=e.endMin,c=e.timezone,h=t.call(this)||this;return h.method=Ie.PUT,h.path="".concat(jn,"/").concat(encodeURIComponent(r),"/push_preference"),h.params={do_not_disturb:i,start_hour:a,start_min:s,end_hour:o,end_min:u,timezone:c},h}return G(n,t),n})(we),CX=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.preference={doNotDisturbOn:r.do_not_disturb,startHour:r.start_hour,startMin:r.start_min,endHour:r.end_hour,endMin:r.end_min,timezone:r.timezone},i}return G(n,t),n})(xe),SX=(function(t){function n(e){var r=e.userId,i=t.call(this)||this;return i.method=Ie.GET,i.path="".concat(jn,"/").concat(encodeURIComponent(r),"/push_preference"),i}return G(n,t),n})(we),TX=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.snoozePeriod={isSnoozeOn:r.snooze_enabled},typeof r.snooze_start_ts=="number"&&(i.snoozePeriod.startTs=r.snooze_start_ts),typeof r.snooze_end_ts=="number"&&(i.snoozePeriod.endTs=r.snooze_end_ts),i}return G(n,t),n})(xe),NX=(function(t){function n(e){var r=e.userId,i=e.snoozeOn,a=e.startTs,s=e.endTs,o=t.call(this)||this;return o.method=Ie.PUT,o.path="".concat(jn,"/").concat(encodeURIComponent(r),"/push_preference"),o.params={snooze_enabled:i,snooze_start_ts:a,snooze_end_ts:s},o}return G(n,t),n})(we),AX=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.snoozePeriod={isSnoozeOn:r.snooze_enabled},typeof r.snooze_start_ts=="number"&&(i.snoozePeriod.startTs=r.snooze_start_ts),typeof r.snooze_end_ts=="number"&&(i.snoozePeriod.endTs=r.snooze_end_ts),i}return G(n,t),n})(xe),MX=(function(t){function n(e){var r=e.userId,i=e.blockedUserId,a=t.call(this)||this;return a.method=Ie.POST,a.path="".concat(jn,"/").concat(encodeURIComponent(r),"/block"),a.params={target_id:i},a}return G(n,t),n})(we);(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.user=new fn(e,r),i}G(n,t)})(xe);var IX=(function(t){function n(e){var r=e.userId,i=e.unblockedUserId,a=t.call(this)||this;return a.method=Ie.DELETE,a.path="".concat(jn,"/").concat(encodeURIComponent(r),"/block/").concat(encodeURIComponent(i)),a}return G(n,t),n})(we);(function(t){function n(){return t!==null&&t.apply(this,arguments)||this}G(n,t)})(xe);var wX=(function(t){function n(e){var r=e.userId,i=t.call(this)||this;return i.method=Ie.GET,i.path="".concat(jn,"/").concat(encodeURIComponent(r),"/push_preference"),i}return G(n,t),n})(we),RX=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.pushTriggerOption=r.push_trigger_option,i}return G(n,t),n})(xe),OX=(function(t){function n(e){var r=e.userId,i=e.pushTriggerOption,a=t.call(this)||this;return a.method=Ie.PUT,a.path="".concat(jn,"/").concat(encodeURIComponent(r),"/push_preference"),a.params={push_trigger_option:i},a}return G(n,t),n})(we),DX=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.pushTriggerOption=r.push_trigger_option,i}return G(n,t),n})(xe),UX=(function(t){function n(e){var r=e.userId,i=t.call(this)||this;return i.method=Ie.GET,i.path="".concat(jn,"/").concat(encodeURIComponent(r),"/push/template"),i}return G(n,t),n})(we),xX=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.name=r.name,i}return G(n,t),n})(xe),LX=(function(t){function n(e){var r=e.userId,i=e.templateName,a=t.call(this)||this;return a.method=Ie.PUT,a.path="".concat(jn,"/").concat(encodeURIComponent(r),"/push/template"),a.params={name:i},a}return G(n,t),n})(we),kX=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.name=r.name,i}return G(n,t),n})(xe),PX=(function(t){function n(e){var r=e.userId,i=e.token,a=t.call(this)||this;return a.method=Ie.GET,a.path="".concat(jn,"/").concat(encodeURIComponent(r),"/friends/changelogs"),a.params={token:i},a}return G(n,t),n})(we),FX=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.changelogs={addedUsers:r.added.map((function(a){return new fn(e,a)})),updatedUsers:r.updated.map((function(a){return new fn(e,a)})),deletedUserIds:r.deleted,hasMore:r.has_more,token:r.next},i}return G(n,t),n})(xe),BX=(function(t){function n(e){var r=e.userId,i=e.discoveries,a=t.call(this)||this;return a.method=Ie.PUT,a.path="".concat(jn,"/").concat(encodeURIComponent(r),"/friend_discoveries"),a.params={friend_discoveries:i.map((function(s){return{friend_discovery_key:s.friendDiscoveryKey,friend_name:s.friendName}}))},a}return G(n,t),n})(we),HX=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.friendDiscoveryRequestId=r.friend_discovery_request_id,i}return G(n,t),n})(xe),GX=(function(t){function n(e){var r=e.userId,i=e.discoveryKeys,a=t.call(this)||this;return a.method=Ie.DELETE,a.path="".concat(jn,"/").concat(encodeURIComponent(r),"/friend_discoveries"),a.params={friend_discovery_keys:i},a}return G(n,t),n})(we);(function(t){function n(){return t!==null&&t.apply(this,arguments)||this}G(n,t)})(xe);var VX=(function(t){function n(e){var r=e.userId,i=e.userIds,a=t.call(this)||this;return a.method=Ie.POST,a.path="".concat(jn,"/").concat(encodeURIComponent(r),"/friends"),a.params={user_ids:i},a}return G(n,t),n})(we),zX=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.users=r.users.map((function(a){return new fn(e,a)})),i}return G(n,t),n})(xe),jX=(function(t){function n(e){var r=e.userId,i=e.userIds,a=t.call(this)||this;return a.method=Ie.DELETE,a.path="".concat(jn,"/").concat(encodeURIComponent(r),"/friends"),a.params={user_ids:i},a}return G(n,t),n})(we);(function(t){function n(){return t!==null&&t.apply(this,arguments)||this}G(n,t)})(xe);var qX=(function(t){function n(e){var r=e.userId,i=t.call(this)||this;return i.method=Ie.GET,i.path="".concat(jn,"/").concat(encodeURIComponent(r),"/allow_friend_discovery"),i.params={},i}return G(n,t),n})(we),$X=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.allowFriendDiscovery=r.allow_friend_discovery,i}return G(n,t),n})(xe),KX=(function(t){function n(e){var r=e.userId,i=e.allowFriendDiscovery,a=t.call(this)||this;return a.method=Ie.PUT,a.path="".concat(jn,"/").concat(encodeURIComponent(r),"/allow_friend_discovery"),a.params={allow_friend_discovery:i},a}return G(n,t),n})(we);(function(t){function n(){return t!==null&&t.apply(this,arguments)||this}G(n,t)})(xe);var dS,YX=(function(t){function n(){var e=t.call(this)||this;return e.method=Ie.GET,e.path=Fk,e}return G(n,t),n})(we),WX=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.emojiContainer=new QQ(r),i}return G(n,t),n})(xe),QX=(function(t){function n(e){var r=e.categoryId,i=t.call(this)||this;return i.method=Ie.GET,i.path="".concat(Fk,"/").concat(r),i}return G(n,t),n})(we),XX=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.emojiCategory=new L5(r),i}return G(n,t),n})(xe),ZX=(function(t){function n(e){var r=e.key,i=t.call(this)||this;return i.method=Ie.GET,i.path="".concat(mj,"/").concat(r),i}return G(n,t),n})(we),JX=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.emoji=new x5(r),i}return G(n,t),n})(xe),eZ=(function(t){function n(){var e=t.call(this)||this;return e.method=Ie.GET,e.path="".concat(gj),e}return G(n,t),n})(we),tZ=(function(t){function n(e,r){var i,a=this,s=r??{};return(a=t.call(this,e,r)||this).uikitConfiguration={string:JSON.stringify(s),json:s},a.updatedAt=(i=r?.updated_at)!==null&&i!==void 0?i:0,a}return G(n,t),n})(xe);(function(t){t.DELIVERED="DELIVERED",t.CLICKED="CLICKED"})(dS||(dS={}));var H0,$D=(function(t){function n(e){var r=e.deviceToken,i=e.pushTrackingId,a=e.messageId,s=e.allowedPushNotification,o=e.channelKey,u=e.templateKey,c=e.eventType,h=e.notificationEventDeadline,p=t.call(this)||this;return p.method=Ie.POST,p.path=Ej,p.params=ze({device_token:r,push_tracking_id:i,message_id:a,allowed_push_notification:s,channel_key:o,template_key:u,event_type:c,notification_event_deadline:h}),p}return G(n,t),n})(we),nZ=(function(){function t(n,e,r){var i=this;this._storeInitialized=!1,this._iid=n,this.options=e;var a=te.of(n),s=a.sdkState,o=a.cacheContext,u=a.dispatcher,c=a.sessionManager,h=a.requestQueue,p=a.logger,m=a.userEventHandlers,_=a.appStateToggleEnabled;this._onlineDetector=new eX({logger:p,connectionDelegate:{reconnect:function(){return D(i,void 0,void 0,(function(){var C,N,S,M,w,U;return O(this,(function(L){switch(L.label){case 0:if(C=te.of(n),N=C.sdkState,S=C.connectionManager,(M=C.sessionManager).session.hasSession)return[3,5];L.label=1;case 1:return L.trys.push([1,3,,4]),[4,S.connect(M.session.authToken)];case 2:return L.sent(),[3,4];case 3:if(w=L.sent(),$a(w))throw w;return p.debug("connect failed by reconnect event = ",w),[3,4];case 4:return[3,9];case 5:if(N.appState!=="foreground")return[3,9];L.label=6;case 6:return L.trys.push([6,8,,9]),[4,S.resetAndReconnect()];case 7:return L.sent(),[3,9];case 8:if(U=L.sent(),$a(U))throw U;return p.debug("resetAndReconnect failed by reconnect event = ",U),[3,9];case 9:return u.dispatch(new GD),[2]}}))}))},disconnect:function(){$r((function(){return D(i,void 0,void 0,(function(){var C,N,S;return O(this,(function(M){switch(M.label){case 0:return C=te.of(n),N=C.connectionManager,S=C.dispatcher,[4,N.disconnect()];case 1:return M.sent(),S.dispatch(new vd(new Ar({type:fr.WEBSOCKET_DISCONNECT,data:{success:!0,error_code:et.NETWORK_ERROR,error_description:"cause=network_closed"}}))),[2]}}))}))}))}}});var b=new ry(n,{localCacheEnabled:o.localCacheEnabled,enableAutoResend:o.localCacheConfig.enableAutoResend,dispatcher:u,sdkState:s,logger:p});r.forEach((function(C){C.init(n,{sdkState:s,cacheContext:o,dispatcher:u,sessionManager:c,requestQueue:h,logger:p,onlineDetector:i._onlineDetector}),i[C.name]=C})),this._appStateChangeDetector=new JQ({isEnabled:_}),this._appStateChangeDetector.on("resume",(function(){p.debug("the page resumes from freeze"),i.setForegroundState()})).on("pause",(function(){p.debug("the page freezes"),i.setBackgroundState()})),u.on((function(C){var N;if(C instanceof Ao)C.stateType===zn.CONNECTED&&b.processNonAutoResendRegisteredPendingMessages();else if(C instanceof Rr){if(C.code==="USEV"){var S=C.as(m5).event;if(S.category===Yy.FRIEND_DISCOVERED){var M=lS.getDataAsFriendDiscoveredEvent(n,S).friendDiscoveries;gt((function(){return D(i,void 0,void 0,(function(){return O(this,(function(P){return[2,m.forEach((function(x){x.onFriendsDiscovered&&x.onFriendsDiscovered(M)}))]}))}))}))}}}else if(C instanceof Cw){var w=te.of(i._iid).subscribedUnreadMessageCount,U=!1,L=C.ts;typeof L=="number"&&L>w.ts&&(w.all!==C.all&&(U=!0),w.all=C.all>=0?C.all:0,C.customTypes&&Object.keys(C.customTypes).forEach((function(P){w.customTypes[P]!==C.customTypes[P]&&(U=!0),w.customTypes[P]=C.customTypes[P]})),U=U&&w.ts>0,w.ts=L),U&&gt((function(){return D(i,void 0,void 0,(function(){return O(this,(function(P){return[2,m.forEach((function(x){x.onTotalUnreadMessageCountChanged&&x.onTotalUnreadMessageCountChanged({groupChannelCount:w.all,feedChannelCount:w.feed,customTypeUnreadCount:w.customTypes}),x.onTotalUnreadMessageCountUpdated&&x.onTotalUnreadMessageCountUpdated(w.all,w.customTypes)}))]}))}))}))}else C instanceof pP?(o.preference.set(i._getUserProfileCacheKey(s.userId),MA.payloadify(C.userProfile)),!((N=C.userProfile.appInfo.notificationInfo)===null||N===void 0)&&N.isEnabled&&o.preference.set(Sw(i.appId),{value:!0})):C instanceof gP?C.configSyncNeeded&&$r((function(){return D(i,void 0,void 0,(function(){return O(this,(function(P){switch(P.label){case 0:return[4,this._getAppConfigsInfo()];case 1:return P.sent(),[2]}}))}))})):C instanceof p5?o.preference.set(ZC(i.appId),{configTs:C.configTs}):C instanceof bg&&C.error&&C.error.isSessionInvalidatedError&&(p.debug("session revoked."),i._internalDisconnect(C.error))}))}return t.init=function(n){var e=n.appId,r=n.appVersion,i=n.modules,a=i===void 0?[]:i,s=n.options,o=s===void 0?new Lk:s,u=n.debugMode,c=u!==void 0&&u,h=n.customApiHost,p=n.customWebSocketHost,m=n.newInstance,_=m!==void 0&&m,b=n.logLevel,C=n.localCacheEnabled,N=C!==void 0&&C,S=n.localCacheConfig,M=S===void 0?new Pk:S,w=n.localCacheEncryption,U=n.useAsyncStorageStore,L=U===void 0?null:U,P=n.useMMKVStorageStore,x=P===void 0?null:P,H=n.appStateToggleEnabled,F=H===void 0||H;if(!H0||_){var Q="su-".concat(il()),$=w??{encrypt:function(z){return z},decrypt:function(z){return z}},q=new l5;q.level=b??ud.WARN;var X=new jv({encryption:$});c||(CA()?x?X=new wY({MMKV:x,encryption:$}):L&&(X=new IY({AsyncStorage:L,encryption:$}),q.warn("AsyncStorage store is deprecated due to the small size limit. Please use MMKVStorage store instead.")):X=new MY({encryption:$})),new te(Q,{appId:e,appVersion:r,options:o,apiHost:h??"https://api-".concat(e,".sendbird.com"),websocketHost:p??"wss://ws-".concat(e,".sendbird.com"),store:X,encryption:$,logger:q,localCacheEnabled:N,localCacheConfig:M,debugMode:c,appStateToggleEnabled:F});var V=[new XY,new YQ],ee=new t(Q,o,wt(wt([],dt(a),!1),dt(V),!1));return H0||(H0=ee),ee}return H0},Object.defineProperty(t,"instance",{get:function(){return H0},enumerable:!1,configurable:!0}),Object.defineProperty(t,"version",{get:function(){return Uk},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"appId",{get:function(){return te.of(this._iid).sdkState.appId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"appInfo",{get:function(){var n=te.of(this._iid).appInfo;return n??null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"appVersion",{get:function(){var n;return(n=te.of(this._iid).sdkState.appVersion)!==null&&n!==void 0?n:""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"debugMode",{get:function(){return!!te.of(this._iid).debugMode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"logLevel",{get:function(){return te.of(this._iid).logger.level},set:function(n){te.of(this._iid).logger.level=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCacheEnabled",{get:function(){return te.of(this._iid).cacheContext.localCacheEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localCacheConfig",{get:function(){var n=te.of(this._iid).cacheContext;return n.localCacheEnabled?n.localCacheConfig:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ekey",{get:function(){return te.of(this._iid).sessionManager.ekey},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentUser",{get:function(){var n;return(n=te.of(this._iid).sessionManager.currentUser)!==null&&n!==void 0?n:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"connectionState",{get:function(){var n=te.of(this._iid).connectionManager;return n.isConnected?_u.OPEN:n.isConnecting?_u.CONNECTING:_u.CLOSED},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastConnectedAt",{get:function(){var n=te.of(this._iid),e=n.connectedAt;return n.connectionManager.isConnected?e:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fcmPushToken",{get:function(){var n;return(n=this._fcmPushToken)!==null&&n!==void 0?n:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"apnsPushToken",{get:function(){var n;return(n=this._apnsPushToken)!==null&&n!==void 0?n:null},enumerable:!1,configurable:!0}),t.prototype._getNestDBVersion=function(){return 8},t.prototype._getPreferenceVersion=function(){return 9},t.prototype._getPreferenceCacheKey=function(n){return"sendbird@".concat(this.appId,"/").concat(n,".pref")},t.prototype._getUserProfileCacheKey=function(n){return"sendbird@".concat(this.appId,"/").concat(n,".profile")},t.prototype._internalDisconnect=function(n){return D(this,void 0,void 0,(function(){var e,r,i,a;return O(this,(function(s){switch(s.label){case 0:return e=te.of(this._iid),r=e.connectionManager,i=e.sdkState,a=e.requestQueue,this._appStateChangeDetector.stop(),this._onlineDetector.stop(),a.cancelAll(),[4,r.logout(n)];case 1:return s.sent(),[4,this.clearCachedData()];case 2:return s.sent(),i.appState="foreground",[2]}}))}))},t.prototype._getAppConfigsInfo=function(){return D(this,void 0,void 0,(function(){var n,e,r,i,a,s,o,u,c=this;return O(this,(function(h){switch(h.label){case 0:return n=te.of(this._iid),e=n.requestQueue,r=n.dispatcher,i=n.cacheContext,a=n.sdkState,s={},[4,i.preference.get(ZC(a.appId))];case 1:return(u=h.sent())&&(o=u.configTs),new Td("appConfigsInfo",(function(p){return D(c,void 0,void 0,(function(){var m,_,b,C,N,S,M,w;return O(this,(function(U){switch(U.label){case 0:return m={hasNext:!0,nextToken:p},_=new tX({token:p}),[4,e.send(_)];case 1:return b=U.sent(),C=b.as(nX),N=C.configs,S=C.hasMore,M=C.nextToken,w=C.ts,Object.keys(N).forEach((function(L){s[L]=N[L]})),m.hasNext=S,m.nextToken=M,S||r.dispatch(new g5({appConfigsInfo:s,configTs:w})),[2,m]}}))}))})).start(o),[2]}}))}))},t.prototype.getMemoryStoreForDebugging=function(){var n=te.of(this._iid),e=n.debugMode,r=n.cacheContext;if(e)return r.store instanceof jv?r.store:null;throw ae.debugModeRequired},t.prototype.addExtension=function(n,e){var r=te.of(this._iid).sdkState;["sb_uikit","sb_syncmanager","device-os-platform"].indexOf(n)>-1&&r.extensions&&(r.extensions[n]=e)},t.prototype.addSendbirdExtensions=function(n,e,r){var i,a,s=te.of(this._iid),o=s.logger,u=s.sdkState,c=new RegExp(Ij);if(n.length===0)return o.debug("sb.addSendbirdExtensions() has failed because the given sendbirdExtensions is empty."),!1;if(n.find((function(C){return!c.test(C.version)})))return o.debug("sb.addSendbirdExtensions() has failed because the given version did not satisfy the SemVer specification."),!1;if(r)try{for(var h=Fe(Object.entries(r)),p=h.next();!p.done;p=h.next()){var m=dt(p.value,2),_=m[0],b=m[1];if(/&|=/.test(_)||/&|=/.test(b))return o.debug("sb.addSendbirdExtensions() has failed because the given customData includes at least one invalid character: = or &."),!1}}catch(C){i={error:C}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}return u.sendbirdRuntimeEnvironment={sendbirdExtensions:n,deviceOS:e,customData:r},!0},t.prototype.setOnlineListener=function(n){this._onlineDetector.setOnlineListener(n)},t.prototype.setOfflineListener=function(n){this._onlineDetector.setOfflineListener(n)},t.prototype._safeInitializeStore=function(n){return D(this,void 0,void 0,(function(){var e;return O(this,(function(r){switch(r.label){case 0:e=te.of(this._iid).cacheContext,r.label=1;case 1:return r.trys.push([1,3,,5]),[4,e.store.init(n)];case 2:return r.sent(),this._storeInitialized=!0,[3,5];case 3:return r.sent(),e.replaceStore(new jv),[4,this._safeInitializeStore(n)];case 4:return r.sent(),[3,5];case 5:return[2]}}))}))},t.prototype.initializeCache=function(n){return D(this,void 0,void 0,(function(){var e,r,i,a,s,o,u,c,h;return O(this,(function(p){switch(p.label){case 0:if(e=te.of(this._iid),r=e.sdkState,i=e.cacheContext,a=e.dispatcher,s=e.logger,r.userId&&r.userId===n)return[3,13];o="sendbird@".concat(r.appId,"/").concat(n,".db"),p.label=1;case 1:return p.trys.push([1,9,11,13]),i.localCacheEnabled?i.nestdb&&i.nestdb.state!==yu.CLOSED&&i.nestdb.name===o?[3,3]:(u="sendbird@".concat(r.appId,"/").concat(n,".db"),(c=i.nestdb=new RY({name:u,version:this._getNestDBVersion(),store:i.store,config:new bE({dbname:u,cacheLimit:64,itemSizeLimit:61440})})).on("upgrade",zD(c)),c.on("storeReplaced",(function(m){i.replaceStore(m),i.localCacheEnabled=!1,c.on("upgrade",zD(c))})),[4,c.open()]):[3,6];case 2:return p.sent(),this._storeInitialized=!0,a.dispatch(new f5(this._iid,{userId:n})),[3,5];case 3:return[4,this._safeInitializeStore(o)];case 4:p.sent(),p.label=5;case 5:return r.userId=n,[3,8];case 6:return[4,this._safeInitializeStore(o)];case 7:p.sent(),r.userId=n,p.label=8;case 8:return[3,13];case 9:return h=p.sent(),s.warn("Nest DB Open Failed. ",h),i.store instanceof jv||(i.replaceStore(new jv),i.localCacheEnabled=!1),[4,this._safeInitializeStore(o)];case 10:throw p.sent(),r.userId=n,ae.databaseError;case 11:return[4,this._setupPreference(n)];case 12:return p.sent(),[7];case 13:return[2]}}))}))},t.prototype.getCacheDataSize=function(){return D(this,void 0,void 0,(function(){var n;return O(this,(function(e){switch(e.label){case 0:return(n=te.of(this._iid).cacheContext).localCacheEnabled&&n.nestdb?[4,n.nestdb.estimateUsage()]:[3,2];case 1:return[2,e.sent()];case 2:return[2,0]}}))}))},t.prototype.clearCachedData=function(){return D(this,void 0,void 0,(function(){var n;return O(this,(function(e){switch(e.label){case 0:return(n=te.of(this._iid).cacheContext).localCacheEnabled&&n.nestdb?[4,n.nestdb.clear()]:[3,2];case 1:e.sent(),e.label=2;case 2:return this._storeInitialized?[4,n.preference.clear()]:[3,4];case 3:e.sent(),e.label=4;case 4:return[2]}}))}))},t.prototype.clearCachedMessages=function(n){return D(this,void 0,void 0,(function(){var e,r,i=this;return O(this,(function(a){switch(a.label){case 0:return Ue(hn("string",n)).throw(ae.invalidParameters),e=ap.of(this._iid),r=yp.of(this._iid),e&&r?[4,Promise.all(n.map((function(s){return D(i,void 0,void 0,(function(){return O(this,(function(o){switch(o.label){case 0:return[4,e.removeMessagesOfChannel(s)];case 1:return o.sent(),[4,r.removeMessagesOfChannel(s)];case 2:return o.sent(),[2]}}))}))})))]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}}))}))},t.prototype._setupPreference=function(n){return D(this,void 0,void 0,(function(){var e,r,i,a,s;return O(this,(function(o){switch(o.label){case 0:return e=te.of(this._iid),r=e.sdkState,i=e.cacheContext,a=e.statManager,[4,i.preference.init(this._getPreferenceCacheKey(n),this._getPreferenceVersion())];case 1:return o.sent(),[4,i.preference.get(this._getUserProfileCacheKey(n))];case 2:return(s=o.sent())&&new MA(this._iid,s).apply(),[4,a.init("sendbird@".concat(r.appId,"/").concat(n,".statlog"))];case 3:return o.sent(),[2]}}))}))},t.prototype._ready=function(n,e,r){return r===void 0&&(r={}),D(this,void 0,void 0,(function(){var i,a,s,o,u,c;return O(this,(function(h){switch(h.label){case 0:return Ue(re("string",n)&&re("string",e,!0)).throw(ae.invalidParameters),i=te.of(this._iid),a=i.sdkState,s=i.cacheContext,o=i.connectionManager,u=r.errorForOtherUser,a.userId&&a.userId!==n?u?[3,2]:[4,o.logout()]:[3,3];case 1:return h.sent(),[3,3];case 2:throw u;case 3:return h.trys.push([3,5,,6]),[4,this.initializeCache(n)];case 4:return h.sent(),te.of(this._iid).dispatcher.dispatch(new v5),[3,6];case 5:return h.sent(),c=te.of(this._iid).logger,s.localCacheEnabled=!1,c.warn("Cache initialization failed - cache is not available."),[3,6];case 6:return[2]}}))}))},t.prototype.authenticateFeed=function(n,e){return D(this,void 0,void 0,(function(){return O(this,(function(r){switch(r.label){case 0:return[4,this.authenticate(n,e)];case 1:return[2,r.sent()]}}))}))},t.prototype.authenticate=function(n,e,r){var i;return r===void 0&&(r=jC.SESSION_TOKEN),D(this,void 0,void 0,(function(){var a,s,o;return O(this,(function(u){switch(u.label){case 0:return a=te.of(this._iid),s=a.sessionManager,o=a.connectionManager,[4,this._ready(n,e,{errorForOtherUser:o.isConnected?ae.alreadyConnectedAsAnotherUser:void 0})];case 1:return u.sent(),!((i=s.session.services)===null||i===void 0)&&i.includes($C.CHAT)?[3,3]:(s.handler||e&&r!==jC.ACCESS_TOKEN||this.setSessionHandler(new yD),[4,s.authenticate(n,e)]);case 2:u.sent(),u.label=3;case 3:return[2,this.currentUser]}}))}))},t.prototype.connect=function(n,e){return D(this,void 0,void 0,(function(){return O(this,(function(r){switch(r.label){case 0:return[4,this._ready(n,e)];case 1:r.sent(),r.label=2;case 2:return r.trys.push([2,,4,5]),[4,te.of(this._iid).connectionManager.connect(e)];case 3:return r.sent(),[3,5];case 4:return this._onlineDetector.start(),this._appStateChangeDetector.start(),[7];case 5:return[2,this.currentUser]}}))}))},t.prototype.reconnect=function(){var n=te.of(this._iid),e=n.connectionManager,r=n.sdkState,i=n.sessionManager,a=n.dispatcher,s=i.session.hasSession;return s&&(a.dispatch(new vd(new Ar({type:fr.WEBSOCKET_DISCONNECT,data:{success:!0,error_code:0,error_description:"cause=explicit_reconnect"}}))),this._appStateChangeDetector.start(),this._onlineDetector.start(),e.resetAndReconnect().then((function(){r.appState="foreground"})).catch((function(){}))),s},t.prototype.disconnect=function(){return D(this,void 0,void 0,(function(){return O(this,(function(n){switch(n.label){case 0:return[4,this._internalDisconnect()];case 1:return n.sent(),[2]}}))}))},t.prototype.disconnectWebSocket=function(){return D(this,void 0,void 0,(function(){var n,e,r;return O(this,(function(i){switch(i.label){case 0:return n=te.of(this._iid),e=n.connectionManager,r=n.requestQueue,n.dispatcher.dispatch(new vd(new Ar({type:fr.WEBSOCKET_DISCONNECT,data:{success:!0,error_code:0,error_description:"cause=explicit_disconnect_websocket"}}))),this._appStateChangeDetector.stop(),this._onlineDetector.stop(),r.cancelAll(),[4,e.disconnectWebSocket(!0)];case 1:return i.sent(),[2]}}))}))},t.prototype.setBackgroundState=function(){var n=te.of(this._iid),e=n.connectionManager,r=n.sdkState,i=n.logger,a=n.dispatcher;r.appState==="foreground"&&(r.appState="background",i.debug("going background state"),a.dispatch(new vd(new Ar({type:fr.WEBSOCKET_DISCONNECT,data:{success:!0,error_code:et.WEBSOCKET_CONNECTION_CLOSED,error_description:"cause=background"}}))),e.background().catch((function(s){i.debug("setBackgroundState error = ",s)})))},t.prototype.setForegroundState=function(){var n=te.of(this._iid),e=n.connectionManager,r=n.sdkState,i=n.dispatcher,a=n.logger;r.appState==="background"&&(r.appState="foreground",a.debug("going foreground state"),e.resetAndReconnect().catch((function(s){a.debug("setForgroundState error = ",s)})),i.dispatch(new GD))},t.prototype.setSessionHandler=function(n){Ue(n instanceof yD).throw(ae.invalidParameters),te.of(this._iid).sessionManager.handler=n},t.prototype.addUserEventHandler=function(n,e){Ue(re("string",n)&&e instanceof cY).throw(ae.invalidParameters),te.of(this._iid).userEventHandlers.set(n,e)},t.prototype.removeUserEventHandler=function(n){te.of(this._iid).userEventHandlers.delete(n)},t.prototype.removeAllUserEventHandler=function(){te.of(this._iid).userEventHandlers.clear()},t.prototype.addConnectionHandler=function(n,e){Ue(re("string",n)&&e instanceof o5).throw(ae.invalidParameters),te.of(this._iid).connectionHandlers.set(n,e)},t.prototype.removeConnectionHandler=function(n){te.of(this._iid).connectionHandlers.delete(n)},t.prototype.removeAllConnectionHandler=function(){te.of(this._iid).connectionHandlers.clear()},t.prototype.createApplicationUserListQuery=function(n){return n===void 0&&(n={}),new fY(this._iid,n)},t.prototype.createBlockedUserListQuery=function(n){return n===void 0&&(n={}),new mY(this._iid,n)},t.prototype.createFriendListQuery=function(n){return n===void 0&&(n={}),new yY(this._iid,n)},t.prototype.createMessageSearchQuery=function(n){return new qY(this._iid,n)},t.prototype.createPollListQuery=function(n){return new xP(this._iid,Z({},n))},t.prototype.createPollVoterListQuery=function(n){return new LP(this._iid,Z({},n))},t.prototype.buildUserFromSerializedData=function(n){var e=gd(n);return new fn(this._iid,fn.payloadify(e))},t.prototype.updateCurrentUserInfo=function(n){return n===void 0&&(n={}),D(this,void 0,void 0,(function(){var e,r,i,a,s,o,u;return O(this,(function(c){switch(c.label){case 0:return e=Z(Z({},XQ),n),Ue((function(h){return ra(h.profileImage,!0)&&re("string",h.profileUrl,!0)&&re("string",h.nickname,!0)})(e)).throw(ae.invalidParameters),this.currentUser?(r=te.of(this._iid),i=r.sdkState,a=r.requestQueue,s=new jD(Z({userId:i.userId},e)),[4,a.send(s)]):[3,2];case 1:return o=c.sent(),u=o.as(qD).user,this.currentUser&&(e.nickname&&(this.currentUser.nickname=u.nickname),(e.profileUrl||e.profileImage)&&(this.currentUser.plainProfileUrl=u.profileUrl)),[2,u];case 2:throw ae.connectionRequired}}))}))},t.prototype.updateCurrentUserInfoWithPreferredLanguages=function(n){return D(this,void 0,void 0,(function(){var e,r,i,a,s,o;return O(this,(function(u){switch(u.label){case 0:return Ue(hn("string",n)).throw(ae.invalidParameters),this.currentUser?(e=te.of(this._iid),r=e.sdkState,i=e.requestQueue,a=new jD({userId:r.userId,preferredLanguages:n}),[4,i.send(a)]):[3,2];case 1:return s=u.sent(),o=s.as(qD).user,this.currentUser&&(this.currentUser.preferredLanguages=o.preferredLanguages),[2,o];case 2:throw ae.connectionRequired}}))}))},t.prototype.registerFCMPushTokenForCurrentUser=function(n,e){var r,i;return D(this,void 0,void 0,(function(){var a,s,o,u,c,h,p=this;return O(this,(function(m){switch(m.label){case 0:if(Ue(re("string",n)&&re("string",e?.deviceManufacturer,!0)).throw(ae.invalidParameters),e?.deviceOS&&Ue(dn($h,e.deviceOS.platform,!0)&&re("string",e.deviceOS.version,!0)).throw(ae.invalidParameters),!this.currentUser)return[3,6];a={deviceOS:"".concat(((r=e?.deviceOS)===null||r===void 0?void 0:r.platform)||$h.ANDROID,"-").concat(((i=e?.deviceOS)===null||i===void 0?void 0:i.version)||"unknown"),deviceManufacturer:e?.deviceManufacturer,systemPushEnabled:e?.systemPushEnabled},m.label=1;case 1:return m.trys.push([1,4,,5]),s=te.of(this._iid),o=s.sessionManager,u=s.sdkState,c=s.requestQueue,o.hasDeviceToken(na.FCM,n)?[2,ds.SUCCESS]:(h=new iX({userId:u.userId,token:n,deviceOS:a.deviceOS,deviceManufacturer:a.deviceManufacturer,systemPushEnabled:a.systemPushEnabled}),[4,c.send(h)]);case 2:return m.sent(),[4,$r((function(){return D(p,void 0,void 0,(function(){return O(this,(function(_){switch(_.label){case 0:return o.setDeviceToken(na.FCM,n,a),[4,o.saveDeviceToken()];case 1:return _.sent(),[2]}}))}))}))];case 3:return m.sent(),this._fcmPushToken="",[2,ds.SUCCESS];case 4:return m.sent(),[2,ds.ERROR];case 5:return[3,7];case 6:return this._fcmPushToken=n,[2,ds.PENDING];case 7:return[2]}}))}))},t.prototype.unregisterFCMPushTokenForCurrentUser=function(n){return D(this,void 0,void 0,(function(){var e,r,i,a,s,o,u,c=this;return O(this,(function(h){switch(h.label){case 0:if(Ue(re("string",n)).throw(ae.invalidParameters),!this.currentUser)return[3,6];h.label=1;case 1:return h.trys.push([1,4,,5]),e=te.of(this._iid),r=e.sessionManager,i=e.sdkState,a=e.requestQueue,s=new oX({userId:i.userId,token:n}),[4,a.send(s)];case 2:return o=h.sent(),u=o.as(lX).lastDeletedAt,[4,$r((function(){return D(c,void 0,void 0,(function(){return O(this,(function(p){switch(p.label){case 0:return r.unsetDeviceToken(na.FCM,n),r.setDeviceTokenDeletedAt(u),[4,r.saveDeviceToken()];case 1:return p.sent(),[2]}}))}))}))];case 3:return h.sent(),this._fcmPushToken="",[2,ds.SUCCESS];case 4:return h.sent(),[2,ds.ERROR];case 5:return[3,7];case 6:return this._fcmPushToken=n,[2,ds.PENDING];case 7:return[2]}}))}))},t.prototype.unregisterFCMPushTokenAllForCurrentUser=function(){return D(this,void 0,void 0,(function(){var n,e,r,i,a,s,o,u=this;return O(this,(function(c){switch(c.label){case 0:return this.currentUser?(n=te.of(this._iid),e=n.sessionManager,r=n.sdkState,i=n.requestQueue,a=new dX({userId:r.userId}),[4,i.send(a)]):[3,3];case 1:return s=c.sent(),o=s.as(hX).lastDeletedAt,[4,$r((function(){return D(u,void 0,void 0,(function(){return O(this,(function(h){switch(h.label){case 0:return e.unsetDeviceTokens(na.FCM),e.setDeviceTokenDeletedAt(o),[4,e.saveDeviceToken()];case 1:return h.sent(),[2]}}))}))}))];case 2:c.sent(),c.label=3;case 3:return[2]}}))}))},t.prototype.registerAPNSPushTokenForCurrentUser=function(n,e){var r,i;return D(this,void 0,void 0,(function(){var a,s,o,u,c,h,p=this;return O(this,(function(m){switch(m.label){case 0:if(Ue(re("string",n)&&re("string",e?.deviceManufacturer,!0)).throw(ae.invalidParameters),e?.deviceOS&&Ue(dn($h,e.deviceOS.platform,!0)&&re("string",e.deviceOS.version,!0)).throw(ae.invalidParameters),!this.currentUser)return[3,6];a={deviceOS:"".concat(((r=e?.deviceOS)===null||r===void 0?void 0:r.platform)||$h.IOS,"-").concat(((i=e?.deviceOS)===null||i===void 0?void 0:i.version)||"unknown"),deviceManufacturer:e?.deviceManufacturer,systemPushEnabled:e?.systemPushEnabled},m.label=1;case 1:return m.trys.push([1,4,,5]),s=te.of(this._iid),o=s.sessionManager,u=s.sdkState,c=s.requestQueue,o.hasDeviceToken(na.APNS,n)?[2,ds.SUCCESS]:(h=new rX({userId:u.userId,token:n,deviceOS:a.deviceOS,deviceManufacturer:a.deviceManufacturer,systemPushEnabled:a.systemPushEnabled}),[4,c.send(h)]);case 2:return m.sent(),[4,$r((function(){return D(p,void 0,void 0,(function(){return O(this,(function(_){switch(_.label){case 0:return o.setDeviceToken(na.APNS,n,a),[4,o.saveDeviceToken()];case 1:return _.sent(),[2]}}))}))}))];case 3:return m.sent(),this._apnsPushToken="",[2,ds.SUCCESS];case 4:return m.sent(),[2,ds.ERROR];case 5:return[3,7];case 6:return this._apnsPushToken=n,[2,ds.PENDING];case 7:return[2]}}))}))},t.prototype.unregisterAPNSPushTokenForCurrentUser=function(n){return D(this,void 0,void 0,(function(){var e,r,i,a,s,o,u,c=this;return O(this,(function(h){switch(h.label){case 0:if(Ue(re("string",n)).throw(ae.invalidParameters),!this.currentUser)return[3,6];h.label=1;case 1:return h.trys.push([1,4,,5]),e=te.of(this._iid),r=e.sessionManager,i=e.sdkState,a=e.requestQueue,s=new aX({userId:i.userId,token:n}),[4,a.send(s)];case 2:return o=h.sent(),u=o.as(sX).lastDeletedAt,[4,$r((function(){return D(c,void 0,void 0,(function(){return O(this,(function(p){switch(p.label){case 0:return r.unsetDeviceToken(na.APNS,n),r.setDeviceTokenDeletedAt(u),[4,r.saveDeviceToken()];case 1:return p.sent(),[2]}}))}))}))];case 3:return h.sent(),this._apnsPushToken="",[2,ds.SUCCESS];case 4:return h.sent(),[2,ds.ERROR];case 5:return[3,7];case 6:return this._apnsPushToken=n,[2,ds.PENDING];case 7:return[2]}}))}))},t.prototype.unregisterAPNSPushTokenAllForCurrentUser=function(){return D(this,void 0,void 0,(function(){var n,e,r,i,a,s,o,u=this;return O(this,(function(c){switch(c.label){case 0:return this.currentUser?(n=te.of(this._iid),e=n.sessionManager,r=n.sdkState,i=n.requestQueue,a=new uX({userId:r.userId}),[4,i.send(a)]):[3,3];case 1:return s=c.sent(),o=s.as(cX).lastDeletedAt,[4,$r((function(){return D(u,void 0,void 0,(function(){return O(this,(function(h){switch(h.label){case 0:return e.unsetDeviceTokens(na.APNS),e.setDeviceTokenDeletedAt(o),[4,e.saveDeviceToken()];case 1:return h.sent(),[2]}}))}))}))];case 2:c.sent(),c.label=3;case 3:return[2]}}))}))},t.prototype.markPushNotificationAsDelivered=function(n,e){var r;return e===void 0&&(e=!0),D(this,void 0,void 0,(function(){var i,a,s,o,u,c,h,p,m,_,b,C,N,S,M,w,U,L,P;return O(this,(function(x){switch(x.label){case 0:if(i=te.of(this._iid),a=i.logger,s=i.sessionManager,o=i.requestQueue,u=i.pushNotificationAckManager,a.debug("markPushNotificationAsDelivered:",n),c=dS.DELIVERED,h=u.parseData(n),p=h.pushTrackingId,m=h.sessionTopics,_=h.sessionKey,b=h.messageId,C=h.channelKey,N=h.templateKey,S=h.notificationEventDeadline,!_||!m.includes(JC.PUSH_ACKNOWLEDGEMENT))throw a.info("Can't use markPushNotificationAsDelivered() feature."),ae.malformedDataError;if(u.isAcked(p,c))return a.info("already delivered push notification:",p),[2];M=!!C,w=e&&M,U=(r=s.deviceTokens[0])===null||r===void 0?void 0:r.token,L=new $D({deviceToken:U??"",pushTrackingId:p,eventType:c,messageId:b,channelKey:C,templateKey:N,notificationEventDeadline:S,allowedPushNotification:w}),_&&(L.headers["Session-Key"]=_),x.label=1;case 1:return x.trys.push([1,3,,4]),[4,o.send(L)];case 2:return x.sent(),u.markAsAcked(p,c),[3,4];case 3:throw P=x.sent(),a.debug("failed to mark push notification as delivered. push tracking id: ".concat(p,". error: ").concat(P)),P;case 4:return[2]}}))}))},t.prototype.markPushNotificationAsClicked=function(n){var e;return D(this,void 0,void 0,(function(){var r,i,a,s,o,u,c,h,p,m,_,b,C,N,S,M,w;return O(this,(function(U){switch(U.label){case 0:if(r=te.of(this._iid),i=r.logger,a=r.sessionManager,s=r.requestQueue,o=r.pushNotificationAckManager,i.debug("markPushNotificationAsClicked:",n),u=dS.CLICKED,c=o.parseData(n),h=c.pushTrackingId,p=c.sessionTopics,m=c.sessionKey,_=c.messageId,b=c.channelKey,C=c.templateKey,N=c.notificationEventDeadline,!m||!p.includes(JC.PUSH_ACKNOWLEDGEMENT))throw i.info("Can't use markPushNotificationAsClicked() feature."),ae.malformedDataError;if(o.isAcked(h,u))return i.info("already clicked push notification:",h),[2];S=(e=a.deviceTokens[0])===null||e===void 0?void 0:e.token,M=new $D({deviceToken:S??"",pushTrackingId:h,eventType:u,messageId:_,channelKey:b,templateKey:C,notificationEventDeadline:N}),m&&(M.headers["Session-Key"]=m),U.label=1;case 1:return U.trys.push([1,3,,4]),[4,s.send(M)];case 2:return U.sent(),o.markAsAcked(h,u),[3,4];case 3:throw w=U.sent(),i.debug("failed to mark push notification as clicked. push tracking id: ".concat(h,". error: ").concat(w)),w;case 4:return[2]}}))}))},t.prototype.getChannelInvitationPreference=function(){return D(this,void 0,void 0,(function(){var n,e,r,i,a;return O(this,(function(s){switch(s.label){case 0:return n=te.of(this._iid),e=n.sdkState,r=n.requestQueue,i=new pX({userId:e.userId}),[4,r.send(i)];case 1:return a=s.sent(),[2,{autoAccept:a.as(mX).autoAccept}]}}))}))},t.prototype.setChannelInvitationPreference=function(n){return D(this,void 0,void 0,(function(){var e,r,i,a,s;return O(this,(function(o){switch(o.label){case 0:return Ue(re("boolean",n)).throw(ae.invalidParameters),e=te.of(this._iid),r=e.sdkState,i=e.requestQueue,a=new gX({userId:r.userId,willAutoAccept:n}),[4,i.send(a)];case 1:return s=o.sent(),[2,{autoAccept:s.as(_X).autoAccept}]}}))}))},t.prototype.getDoNotDisturb=function(){return D(this,void 0,void 0,(function(){var n,e,r,i,a;return O(this,(function(s){switch(s.label){case 0:return n=te.of(this._iid),e=n.sdkState,r=n.requestQueue,i=new yX({userId:e.userId}),[4,r.send(i)];case 1:return a=s.sent(),[2,a.as(EX).preference]}}))}))},t.prototype.setDoNotDisturb=function(n,e,r,i,a,s){return e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=0),a===void 0&&(a=0),s===void 0&&(s=""),D(this,void 0,void 0,(function(){var o,u,c,h,p;return O(this,(function(m){switch(m.label){case 0:return Ue(re("boolean",n)&&re("number",e)&&re("number",r)&&re("number",i)&&re("number",a)&&re("string",s)).throw(ae.invalidParameters),o=te.of(this._iid),u=o.sdkState,c=o.requestQueue,h=new bX({userId:u.userId,doNotDisturbOn:n,startHour:e,startMin:r,endHour:i,endMin:a,timezone:s}),[4,c.send(h)];case 1:return p=m.sent(),[2,p.as(CX).preference]}}))}))},t.prototype.getSnoozePeriod=function(){return D(this,void 0,void 0,(function(){var n,e,r,i,a;return O(this,(function(s){switch(s.label){case 0:return n=te.of(this._iid),e=n.sdkState,r=n.requestQueue,i=new SX({userId:e.userId}),[4,r.send(i)];case 1:return a=s.sent(),[2,a.as(TX).snoozePeriod]}}))}))},t.prototype.setSnoozePeriod=function(n,e,r){return e===void 0&&(e=0),r===void 0&&(r=0),D(this,void 0,void 0,(function(){var i,a,s,o,u;return O(this,(function(c){switch(c.label){case 0:return Ue(re("boolean",n)&&re("number",e)&&re("number",r)).throw(ae.invalidParameters),i=te.of(this._iid),a=i.sdkState,s=i.requestQueue,o=new NX({userId:a.userId,snoozeOn:n,startTs:e,endTs:r}),[4,s.send(o)];case 1:return u=c.sent(),[2,u.as(AX).snoozePeriod]}}))}))},t.prototype.getMyPushTokensByToken=function(n,e){return D(this,void 0,void 0,(function(){var r,i,a,s,o,u,c,h,p,m,_,b;return O(this,(function(C){switch(C.label){case 0:return Ue(re("string",n)&&dn(na,e)).throw(ae.invalidParameters),r=te.of(this._iid),i=r.sdkState,a=r.requestQueue,s=r.sessionManager,o=new fX({userId:i.userId,type:e,token:n}),[4,a.send(o)];case 1:u=C.sent(),c=u.as(vX).pushTokens;try{for(h=Fe(c.deviceTokens),p=h.next();!p.done;p=h.next())m=p.value,s.setDeviceToken(c.type,m)}catch(N){_={error:N}}finally{try{p&&!p.done&&(b=h.return)&&b.call(h)}finally{if(_)throw _.error}}return[4,s.saveDeviceToken()];case 2:return C.sent(),[2,c]}}))}))},t.prototype.getPushTriggerOption=function(){return D(this,void 0,void 0,(function(){var n,e,r,i;return O(this,(function(a){switch(a.label){case 0:return n=te.of(this._iid),e=n.sdkState,r=n.requestQueue,i=new wX({userId:e.userId}),[4,r.send(i)];case 1:return[2,a.sent().as(RX).pushTriggerOption]}}))}))},t.prototype.setPushTriggerOption=function(n){return D(this,void 0,void 0,(function(){var e,r,i,a;return O(this,(function(s){switch(s.label){case 0:return Ue(dn(Zv,n)).throw(ae.invalidParameters),e=te.of(this._iid),r=e.sdkState,i=e.requestQueue,a=new OX({userId:r.userId,pushTriggerOption:n}),[4,i.send(a)];case 1:return[2,s.sent().as(DX).pushTriggerOption]}}))}))},t.prototype.getPushTemplate=function(){return D(this,void 0,void 0,(function(){var n,e,r,i;return O(this,(function(a){switch(a.label){case 0:return n=te.of(this._iid),e=n.sdkState,r=n.requestQueue,i=new UX({userId:e.userId}),[4,r.send(i)];case 1:return[2,a.sent().as(xX).name]}}))}))},t.prototype.setPushTemplate=function(n){return D(this,void 0,void 0,(function(){var e,r,i,a;return O(this,(function(s){switch(s.label){case 0:return Ue(dn(gA,n)).throw(ae.invalidParameters),e=te.of(this._iid),r=e.sdkState,i=e.requestQueue,a=new LX({userId:r.userId,templateName:n}),[4,i.send(a)];case 1:return[2,s.sent().as(kX).name]}}))}))},t.prototype.blockUser=function(n){return D(this,void 0,void 0,(function(){var e,r,i,a;return O(this,(function(s){switch(s.label){case 0:return Ue(n instanceof fn||re("string",n)).throw(ae.invalidParameters),e=te.of(this._iid),r=e.sdkState,i=e.requestQueue,a=new MX({userId:r.userId,blockedUserId:n instanceof fn?n.userId:n}),[4,i.send(a)];case 1:return s.sent(),[2]}}))}))},t.prototype.blockUserWithUserId=function(n){return D(this,void 0,void 0,(function(){return O(this,(function(e){return[2,this.blockUser(n)]}))}))},t.prototype.unblockUser=function(n){return D(this,void 0,void 0,(function(){var e,r,i,a;return O(this,(function(s){switch(s.label){case 0:return Ue(n instanceof fn||re("string",n)).throw(ae.invalidParameters),e=te.of(this._iid),r=e.sdkState,i=e.requestQueue,a=new IX({userId:r.userId,unblockedUserId:n instanceof fn?n.userId:n}),[4,i.send(a)];case 1:return s.sent(),[2]}}))}))},t.prototype.unblockUserWithUserId=function(n){return D(this,void 0,void 0,(function(){return O(this,(function(e){return[2,this.unblockUser(n)]}))}))},t.prototype.getFriendChangeLogsByToken=function(n){return D(this,void 0,void 0,(function(){var e,r,i,a,s;return O(this,(function(o){switch(o.label){case 0:return Ue(re("string",n)).throw(ae.invalidParameters),e=te.of(this._iid),r=e.sdkState,i=e.requestQueue,a=new PX({userId:r.userId,token:n}),[4,i.send(a)];case 1:return s=o.sent(),[2,s.as(FX).changelogs]}}))}))},t.prototype.getAllowFriendDiscovery=function(){return D(this,void 0,void 0,(function(){var n,e,r,i,a;return O(this,(function(s){switch(s.label){case 0:return n=te.of(this._iid),e=n.sdkState,r=n.requestQueue,i=new qX({userId:e.userId}),[4,r.send(i)];case 1:return a=s.sent(),[2,a.as($X).allowFriendDiscovery]}}))}))},t.prototype.setAllowFriendDiscovery=function(n){return D(this,void 0,void 0,(function(){var e,r,i,a;return O(this,(function(s){switch(s.label){case 0:return Ue(re("boolean",n)).throw(ae.invalidParameters),e=te.of(this._iid),r=e.sdkState,i=e.requestQueue,a=new KX({userId:r.userId,allowFriendDiscovery:n}),[4,i.send(a)];case 1:return s.sent(),[2,n]}}))}))},t.prototype.uploadFriendDiscoveries=function(n){return D(this,void 0,void 0,(function(){var e,r,i,a,s;return O(this,(function(o){switch(o.label){case 0:return e=te.of(this._iid),r=e.sdkState,i=e.requestQueue,a=new BX({userId:r.userId,discoveries:n}),[4,i.send(a)];case 1:return s=o.sent(),[2,s.as(HX).friendDiscoveryRequestId]}}))}))},t.prototype.deleteFriendDiscovery=function(n){return D(this,void 0,void 0,(function(){return O(this,(function(e){return[2,this.deleteFriendDiscoveries([n])]}))}))},t.prototype.deleteFriendDiscoveries=function(n){return D(this,void 0,void 0,(function(){var e,r,i,a;return O(this,(function(s){switch(s.label){case 0:return Ue(hn("string",n)).throw(ae.invalidParameters),e=te.of(this._iid),r=e.sdkState,i=e.requestQueue,a=new GX({userId:r.userId,discoveryKeys:n}),[4,i.send(a)];case 1:return s.sent(),[2]}}))}))},t.prototype.addFriends=function(n){return D(this,void 0,void 0,(function(){var e,r,i,a,s;return O(this,(function(o){switch(o.label){case 0:return Ue(hn("string",n)).throw(ae.invalidParameters),e=te.of(this._iid),r=e.sdkState,i=e.requestQueue,a=new VX({userId:r.userId,userIds:n}),[4,i.send(a)];case 1:return s=o.sent(),[2,s.as(zX).users]}}))}))},t.prototype.deleteFriend=function(n){return D(this,void 0,void 0,(function(){return O(this,(function(e){return[2,this.deleteFriends([n])]}))}))},t.prototype.deleteFriends=function(n){return D(this,void 0,void 0,(function(){var e,r,i,a;return O(this,(function(s){switch(s.label){case 0:return Ue(hn("string",n)).throw(ae.invalidParameters),e=te.of(this._iid),r=e.sdkState,i=e.requestQueue,a=new jX({userId:r.userId,userIds:n}),[4,i.send(a)];case 1:return s.sent(),[2]}}))}))},t.prototype.getAllEmoji=function(){return D(this,void 0,void 0,(function(){var n,e,r;return O(this,(function(i){switch(i.label){case 0:return n=te.of(this._iid).requestQueue,e=new YX,[4,n.send(e)];case 1:return r=i.sent(),[2,r.as(WX).emojiContainer]}}))}))},t.prototype.getEmojiCategory=function(n){return D(this,void 0,void 0,(function(){var e,r,i;return O(this,(function(a){switch(a.label){case 0:return e=te.of(this._iid).requestQueue,r=new QX({categoryId:n}),[4,e.send(r)];case 1:return i=a.sent(),[2,i.as(XX).emojiCategory]}}))}))},t.prototype.getEmoji=function(n){return D(this,void 0,void 0,(function(){var e,r,i;return O(this,(function(a){switch(a.label){case 0:return e=te.of(this._iid).requestQueue,r=new ZX({key:n}),[4,e.send(r)];case 1:return i=a.sent(),[2,i.as(JX).emoji]}}))}))},t.prototype.getUIKitConfiguration=function(){return D(this,void 0,void 0,(function(){var n,e,r,i;return O(this,(function(a){switch(a.label){case 0:return n=te.of(this._iid),Ue(n.hasExtension("sb_uikit")).throw(ae.notSupportedError),e=n.requestQueue,r=new eZ,[4,e.send(r)];case 1:return i=a.sent(),[2,i.as(tZ).uikitConfiguration]}}))}))},t.prototype.getReportCategoryInfoList=function(){return D(this,void 0,void 0,(function(){return O(this,(function(n){switch(n.label){case 0:return[4,te.of(this._iid).reportCategoryManager.categories()];case 1:return[2,n.sent()]}}))}))},t})();function kn(t){return typeof t=="boolean"}function Xm(t,n){return n.includes(t)}function rZ(t){return t instanceof Set}function iZ(t,n){return Object.prototype.toString.call(t)===Object.prototype.toString.call(n)}function qA(t){if(typeof t!="object"||t===null)return t;if(Array.isArray(t))return t.map(e=>qA(e));const n={};return Object.keys(t).forEach(e=>{const r=e.replace(/_\w/g,i=>i[1].toUpperCase());n[r]=qA(t[e])}),n}function k5(t,n){const e=Object.assign({},t);return Object.keys(n).forEach(r=>{Object.prototype.hasOwnProperty.call(e,r)&&iZ(e[r],n[r])&&(typeof n[r]=="object"&&!Array.isArray(n[r])?e[r]=k5(e[r],n[r]):e[r]=n[r])}),e}const Hw=()=>({common:{enableUsingDefaultUserProfile:!1},groupChannel:{channel:{enableMention:!1,enableOgtag:!0,enableReactions:!0,enableReactionsSupergroup:!1,enableTypingIndicator:!0,enableVoiceMessage:!1,input:{camera:{enablePhoto:!0,enableVideo:!0},enableDocument:!0,gallery:{enablePhoto:!0,enableVideo:!0}},replyType:"quote_reply",threadReplySelectType:"thread",typingIndicatorTypes:new Set(["text"]),enableFeedback:!1,enableSuggestedReplies:!1,showSuggestedRepliesFor:"last_message_only",suggestedRepliesDirection:"vertical",enableMarkdownForUserMessage:!1,enableFormTypeMessage:!1,enableMarkAsUnread:!1},channelList:{enableMessageReceiptStatus:!1,enableTypingIndicator:!1},setting:{enableMessageSearch:!1}},openChannel:{channel:{enableOgtag:!0,input:{camera:{enablePhoto:!0,enableVideo:!0},enableDocument:!0,gallery:{enablePhoto:!0,enableVideo:!0}}}}});function aZ(t){return delete t.groupChannel.channel.typingIndicatorTypes,delete t.groupChannel.channel.enableFeedback,delete t.groupChannel.channel.enableSuggestedReplies,delete t.groupChannel.channel.showSuggestedRepliesFor,delete t.groupChannel.channel.suggestedRepliesDirection,delete t.groupChannel.channel.enableMarkdownForUserMessage,delete t.groupChannel.channel.enableFormTypeMessage,t}const P5=()=>{const t=Hw();return aZ(t)},KD=Hw(),sZ=P5();var hS=function(t,n,e,r){function i(a){return a instanceof e?a:new e(function(s){s(a)})}return new(e||(e=Promise))(function(a,s){function o(h){try{c(r.next(h))}catch(p){s(p)}}function u(h){try{c(r.throw(h))}catch(p){s(p)}}function c(h){h.done?a(h.value):i(h.value).then(o,u)}c((r=r.apply(t,n||[])).next())})};const $A={items:{},getItem(t){var n;return hS(this,void 0,void 0,function*(){return(n=$A.items[t])!==null&&n!==void 0?n:null})},setItem(t,n){return hS(this,void 0,void 0,function*(){$A.items[t]=n})}};class oZ{constructor(n){this.storage=n??$A}init(n){return this.key=`sbu@${n}.uikitConfiguration`,this.get()}get safeKey(){if(!this.key)throw new Error("Please UIKitConfigManager.init() first");return this.key}update(n){return hS(this,void 0,void 0,function*(){const e=yield this.get(),r={updatedAt:n.updatedAt,configuration:k5(e.configuration,n.configuration)};return yield this.storage.setItem(this.safeKey,JSON.stringify(r)),r})}get(){return hS(this,void 0,void 0,function*(){const n={updatedAt:0,configuration:sZ};try{const e=yield this.storage.getItem(this.safeKey);return e?JSON.parse(e):n}catch{return n}})}}function lZ(t,n,e){var r,i;e.common&&kn((r=e.common)===null||r===void 0?void 0:r.enableUsingDefaultUserProfile)&&(t.enableUsingDefaultUserProfile=e.common.enableUsingDefaultUserProfile),n.common&&kn((i=n.common)===null||i===void 0?void 0:i.enableUsingDefaultUserProfile)&&(t.enableUsingDefaultUserProfile=n.common.enableUsingDefaultUserProfile)}function uZ(t,n,e){cZ(t,n,e),dZ(t,n,e),hZ(t,n,e),fZ(t,n,e)}function cZ(t,n,e){var r,i,a,s,o,u,c,h,p,m,_,b,C,N,S,M,w,U,L,P,x,H,F,Q,$,q,X,V,ee,z,ie,se,he,pe,K,ce,me,Le,ge,Ee,Ye,tt,yt,Ht,zt,Xt,Jt,Mt,jt,en,Dt,ln,Yt,st,ft,un,vt,_t,Pt,Et,Ft,vn,Je,Nn,An,Mn,Zt,Gt,xt,Lt,Cn,ir,It,Rt,Ct,nt,Te,it,St,bt,gn,ct,En,ur,Xn,ar,xn,Pn,cr,at,Nt,pt,At,Tt,We,tn,Vn,qn,In,mt,oe,Pe,ut,rn,wn,an,_r,Cr,Ot,on,kt,pn,Xr,Oi,Di,Zr,Wi,di,Xs;!((r=e.groupChannel)===null||r===void 0)&&r.channel&&kn((a=(i=e.groupChannel)===null||i===void 0?void 0:i.channel)===null||a===void 0?void 0:a.enableOgtag)&&(t.channel.enableOgtag=e.groupChannel.channel.enableOgtag),!((s=n.groupChannel)===null||s===void 0)&&s.channel&&kn((u=(o=n.groupChannel)===null||o===void 0?void 0:o.channel)===null||u===void 0?void 0:u.enableOgtag)&&(t.channel.enableOgtag=(h=(c=n.groupChannel)===null||c===void 0?void 0:c.channel)===null||h===void 0?void 0:h.enableOgtag),!((p=e.groupChannel)===null||p===void 0)&&p.channel&&kn((_=(m=e.groupChannel)===null||m===void 0?void 0:m.channel)===null||_===void 0?void 0:_.enableTypingIndicator)&&(t.channel.enableTypingIndicator=(C=(b=e.groupChannel)===null||b===void 0?void 0:b.channel)===null||C===void 0?void 0:C.enableTypingIndicator),!((N=n.groupChannel)===null||N===void 0)&&N.channel&&kn((M=(S=n.groupChannel)===null||S===void 0?void 0:S.channel)===null||M===void 0?void 0:M.enableTypingIndicator)&&(t.channel.enableTypingIndicator=(U=(w=n.groupChannel)===null||w===void 0?void 0:w.channel)===null||U===void 0?void 0:U.enableTypingIndicator),!((L=e.groupChannel)===null||L===void 0)&&L.channel&&kn((x=(P=e.groupChannel)===null||P===void 0?void 0:P.channel)===null||x===void 0?void 0:x.enableReactions)&&(t.channel.enableReactions=(F=(H=e.groupChannel)===null||H===void 0?void 0:H.channel)===null||F===void 0?void 0:F.enableReactions),!((Q=n.groupChannel)===null||Q===void 0)&&Q.channel&&kn((q=($=n.groupChannel)===null||$===void 0?void 0:$.channel)===null||q===void 0?void 0:q.enableReactions)&&(t.channel.enableReactions=(V=(X=n.groupChannel)===null||X===void 0?void 0:X.channel)===null||V===void 0?void 0:V.enableReactions),!((ee=e.groupChannel)===null||ee===void 0)&&ee.channel&&kn((ie=(z=e.groupChannel)===null||z===void 0?void 0:z.channel)===null||ie===void 0?void 0:ie.enableReactionsSupergroup)&&(t.channel.enableReactionsSupergroup=(he=(se=e.groupChannel)===null||se===void 0?void 0:se.channel)===null||he===void 0?void 0:he.enableReactionsSupergroup),!((pe=n.groupChannel)===null||pe===void 0)&&pe.channel&&kn((ce=(K=n.groupChannel)===null||K===void 0?void 0:K.channel)===null||ce===void 0?void 0:ce.enableReactionsSupergroup)&&console.warn("Currently, EnableReactionsSupergroup feature is turned off by default. If you wish to use this feature, contact us: https://dashboard.sendbird.com/settings/contact_us?category=feedback_and_feature_requests&product=UIKit"),!((me=e.groupChannel)===null||me===void 0)&&me.channel&&kn((ge=(Le=e.groupChannel)===null||Le===void 0?void 0:Le.channel)===null||ge===void 0?void 0:ge.enableMention)&&(t.channel.enableMention=(Ye=(Ee=e.groupChannel)===null||Ee===void 0?void 0:Ee.channel)===null||Ye===void 0?void 0:Ye.enableMention),!((tt=n.groupChannel)===null||tt===void 0)&&tt.channel&&kn((Ht=(yt=n.groupChannel)===null||yt===void 0?void 0:yt.channel)===null||Ht===void 0?void 0:Ht.enableMention)&&(t.channel.enableMention=(Xt=(zt=n.groupChannel)===null||zt===void 0?void 0:zt.channel)===null||Xt===void 0?void 0:Xt.enableMention),!((Jt=e.groupChannel)===null||Jt===void 0)&&Jt.channel&&kn((jt=(Mt=e.groupChannel)===null||Mt===void 0?void 0:Mt.channel)===null||jt===void 0?void 0:jt.enableMarkAsUnread)&&(t.channel.enableMarkAsUnread=e.groupChannel.channel.enableMarkAsUnread),!((en=n.groupChannel)===null||en===void 0)&&en.channel&&kn((ln=(Dt=n.groupChannel)===null||Dt===void 0?void 0:Dt.channel)===null||ln===void 0?void 0:ln.enableMarkAsUnread)&&(t.channel.enableMarkAsUnread=(st=(Yt=n.groupChannel)===null||Yt===void 0?void 0:Yt.channel)===null||st===void 0?void 0:st.enableMarkAsUnread),!((ft=e.groupChannel)===null||ft===void 0)&&ft.channel&&Xm((vt=(un=e.groupChannel)===null||un===void 0?void 0:un.channel)===null||vt===void 0?void 0:vt.replyType,["none","quote_reply","thread"])&&(t.channel.replyType=(Pt=(_t=e.groupChannel)===null||_t===void 0?void 0:_t.channel)===null||Pt===void 0?void 0:Pt.replyType),!((Et=n.groupChannel)===null||Et===void 0)&&Et.channel&&Xm((vn=(Ft=n.groupChannel)===null||Ft===void 0?void 0:Ft.channel)===null||vn===void 0?void 0:vn.replyType,["none","quote_reply","thread"])&&(t.channel.replyType=(Nn=(Je=n.groupChannel)===null||Je===void 0?void 0:Je.channel)===null||Nn===void 0?void 0:Nn.replyType),!((An=e.groupChannel)===null||An===void 0)&&An.channel&&Xm((Zt=(Mn=e.groupChannel)===null||Mn===void 0?void 0:Mn.channel)===null||Zt===void 0?void 0:Zt.threadReplySelectType,["thread","parent"])&&(t.channel.threadReplySelectType=(xt=(Gt=e.groupChannel)===null||Gt===void 0?void 0:Gt.channel)===null||xt===void 0?void 0:xt.threadReplySelectType),!((Lt=n.groupChannel)===null||Lt===void 0)&&Lt.channel&&Xm((ir=(Cn=n.groupChannel)===null||Cn===void 0?void 0:Cn.channel)===null||ir===void 0?void 0:ir.threadReplySelectType,["thread","parent"])&&(t.channel.threadReplySelectType=(Rt=(It=n.groupChannel)===null||It===void 0?void 0:It.channel)===null||Rt===void 0?void 0:Rt.threadReplySelectType),!((Ct=e.groupChannel)===null||Ct===void 0)&&Ct.channel&&kn((Te=(nt=e.groupChannel)===null||nt===void 0?void 0:nt.channel)===null||Te===void 0?void 0:Te.enableVoiceMessage)&&(t.channel.enableVoiceMessage=(St=(it=e.groupChannel)===null||it===void 0?void 0:it.channel)===null||St===void 0?void 0:St.enableVoiceMessage),!((bt=n.groupChannel)===null||bt===void 0)&&bt.channel&&kn((ct=(gn=n.groupChannel)===null||gn===void 0?void 0:gn.channel)===null||ct===void 0?void 0:ct.enableVoiceMessage)&&(t.channel.enableVoiceMessage=(ur=(En=n.groupChannel)===null||En===void 0?void 0:En.channel)===null||ur===void 0?void 0:ur.enableVoiceMessage),!((Xn=n.groupChannel)===null||Xn===void 0)&&Xn.channel&&rZ((xn=(ar=n.groupChannel)===null||ar===void 0?void 0:ar.channel)===null||xn===void 0?void 0:xn.typingIndicatorTypes)&&(t.channel.typingIndicatorTypes=(cr=(Pn=n.groupChannel)===null||Pn===void 0?void 0:Pn.channel)===null||cr===void 0?void 0:cr.typingIndicatorTypes),!((at=n.groupChannel)===null||at===void 0)&&at.channel&&kn((pt=(Nt=n.groupChannel)===null||Nt===void 0?void 0:Nt.channel)===null||pt===void 0?void 0:pt.enableFeedback)&&(t.channel.enableFeedback=(Tt=(At=n.groupChannel)===null||At===void 0?void 0:At.channel)===null||Tt===void 0?void 0:Tt.enableFeedback),!((We=n.groupChannel)===null||We===void 0)&&We.channel&&kn((Vn=(tn=n.groupChannel)===null||tn===void 0?void 0:tn.channel)===null||Vn===void 0?void 0:Vn.enableSuggestedReplies)&&(t.channel.enableSuggestedReplies=(In=(qn=n.groupChannel)===null||qn===void 0?void 0:qn.channel)===null||In===void 0?void 0:In.enableSuggestedReplies),!((mt=n.groupChannel)===null||mt===void 0)&&mt.channel&&Xm((Pe=(oe=n.groupChannel)===null||oe===void 0?void 0:oe.channel)===null||Pe===void 0?void 0:Pe.showSuggestedRepliesFor,["all_messages","last_message_only"])&&(t.channel.showSuggestedRepliesFor=(rn=(ut=n.groupChannel)===null||ut===void 0?void 0:ut.channel)===null||rn===void 0?void 0:rn.showSuggestedRepliesFor),!((wn=n.groupChannel)===null||wn===void 0)&&wn.channel&&Xm((_r=(an=n.groupChannel)===null||an===void 0?void 0:an.channel)===null||_r===void 0?void 0:_r.suggestedRepliesDirection,["vertical","horizontal"])&&(t.channel.suggestedRepliesDirection=(Ot=(Cr=n.groupChannel)===null||Cr===void 0?void 0:Cr.channel)===null||Ot===void 0?void 0:Ot.suggestedRepliesDirection),!((on=n.groupChannel)===null||on===void 0)&&on.channel&&kn((pn=(kt=n.groupChannel)===null||kt===void 0?void 0:kt.channel)===null||pn===void 0?void 0:pn.enableMarkdownForUserMessage)&&(t.channel.enableMarkdownForUserMessage=(Oi=(Xr=n.groupChannel)===null||Xr===void 0?void 0:Xr.channel)===null||Oi===void 0?void 0:Oi.enableMarkdownForUserMessage),!((Di=n.groupChannel)===null||Di===void 0)&&Di.channel&&kn((Wi=(Zr=n.groupChannel)===null||Zr===void 0?void 0:Zr.channel)===null||Wi===void 0?void 0:Wi.enableFormTypeMessage)&&(t.channel.enableFormTypeMessage=(Xs=(di=n.groupChannel)===null||di===void 0?void 0:di.channel)===null||Xs===void 0?void 0:Xs.enableFormTypeMessage)}function dZ(t,n,e){var r,i,a,s,o,u,c,h,p,m,_,b,C,N,S,M,w,U,L,P,x,H,F,Q,$,q,X,V,ee,z,ie,se,he,pe,K,ce,me,Le,ge,Ee,Ye,tt,yt,Ht,zt,Xt,Jt,Mt,jt,en,Dt,ln,Yt,st,ft,un,vt,_t,Pt,Et,Ft,vn,Je,Nn,An,Mn,Zt,Gt,xt,Lt,Cn,ir,It,Rt,Ct,nt,Te,it,St,bt,gn,ct,En,ur,Xn,ar,xn,Pn,cr,at,Nt,pt,At,Tt,We,tn,Vn,qn,In,mt,oe,Pe,ut,rn;!((i=(r=e.groupChannel)===null||r===void 0?void 0:r.channel)===null||i===void 0)&&i.input&&kn((o=(s=(a=e.groupChannel)===null||a===void 0?void 0:a.channel)===null||s===void 0?void 0:s.input)===null||o===void 0?void 0:o.enableDocument)&&(t.channel.input.enableDocument=(h=(c=(u=e.groupChannel)===null||u===void 0?void 0:u.channel)===null||c===void 0?void 0:c.input)===null||h===void 0?void 0:h.enableDocument),!((m=(p=n.groupChannel)===null||p===void 0?void 0:p.channel)===null||m===void 0)&&m.input&&kn((C=(b=(_=n.groupChannel)===null||_===void 0?void 0:_.channel)===null||b===void 0?void 0:b.input)===null||C===void 0?void 0:C.enableDocument)&&(t.channel.input.enableDocument=(M=(S=(N=n.groupChannel)===null||N===void 0?void 0:N.channel)===null||S===void 0?void 0:S.input)===null||M===void 0?void 0:M.enableDocument),!((L=(U=(w=e.groupChannel)===null||w===void 0?void 0:w.channel)===null||U===void 0?void 0:U.input)===null||L===void 0)&&L.camera&&kn((F=(H=(x=(P=e.groupChannel)===null||P===void 0?void 0:P.channel)===null||x===void 0?void 0:x.input)===null||H===void 0?void 0:H.camera)===null||F===void 0?void 0:F.enablePhoto)&&(t.channel.input.camera.enablePhoto=(X=(q=($=(Q=e.groupChannel)===null||Q===void 0?void 0:Q.channel)===null||$===void 0?void 0:$.input)===null||q===void 0?void 0:q.camera)===null||X===void 0?void 0:X.enablePhoto),!((z=(ee=(V=n.groupChannel)===null||V===void 0?void 0:V.channel)===null||ee===void 0?void 0:ee.input)===null||z===void 0)&&z.camera&&kn((pe=(he=(se=(ie=n.groupChannel)===null||ie===void 0?void 0:ie.channel)===null||se===void 0?void 0:se.input)===null||he===void 0?void 0:he.camera)===null||pe===void 0?void 0:pe.enablePhoto)&&(t.channel.input.camera.enablePhoto=(Le=(me=(ce=(K=n.groupChannel)===null||K===void 0?void 0:K.channel)===null||ce===void 0?void 0:ce.input)===null||me===void 0?void 0:me.camera)===null||Le===void 0?void 0:Le.enablePhoto),!((Ye=(Ee=(ge=e.groupChannel)===null||ge===void 0?void 0:ge.channel)===null||Ee===void 0?void 0:Ee.input)===null||Ye===void 0)&&Ye.camera&&kn((zt=(Ht=(yt=(tt=e.groupChannel)===null||tt===void 0?void 0:tt.channel)===null||yt===void 0?void 0:yt.input)===null||Ht===void 0?void 0:Ht.camera)===null||zt===void 0?void 0:zt.enableVideo)&&(t.channel.input.camera.enableVideo=(jt=(Mt=(Jt=(Xt=e.groupChannel)===null||Xt===void 0?void 0:Xt.channel)===null||Jt===void 0?void 0:Jt.input)===null||Mt===void 0?void 0:Mt.camera)===null||jt===void 0?void 0:jt.enableVideo),!((ln=(Dt=(en=n.groupChannel)===null||en===void 0?void 0:en.channel)===null||Dt===void 0?void 0:Dt.input)===null||ln===void 0)&&ln.camera&&kn((un=(ft=(st=(Yt=n.groupChannel)===null||Yt===void 0?void 0:Yt.channel)===null||st===void 0?void 0:st.input)===null||ft===void 0?void 0:ft.camera)===null||un===void 0?void 0:un.enableVideo)&&(t.channel.input.camera.enableVideo=(Et=(Pt=(_t=(vt=n.groupChannel)===null||vt===void 0?void 0:vt.channel)===null||_t===void 0?void 0:_t.input)===null||Pt===void 0?void 0:Pt.camera)===null||Et===void 0?void 0:Et.enableVideo),!((Je=(vn=(Ft=e.groupChannel)===null||Ft===void 0?void 0:Ft.channel)===null||vn===void 0?void 0:vn.input)===null||Je===void 0)&&Je.gallery&&kn((Zt=(Mn=(An=(Nn=e.groupChannel)===null||Nn===void 0?void 0:Nn.channel)===null||An===void 0?void 0:An.input)===null||Mn===void 0?void 0:Mn.gallery)===null||Zt===void 0?void 0:Zt.enablePhoto)&&(t.channel.input.gallery.enablePhoto=(Cn=(Lt=(xt=(Gt=e.groupChannel)===null||Gt===void 0?void 0:Gt.channel)===null||xt===void 0?void 0:xt.input)===null||Lt===void 0?void 0:Lt.gallery)===null||Cn===void 0?void 0:Cn.enablePhoto),!((Rt=(It=(ir=n.groupChannel)===null||ir===void 0?void 0:ir.channel)===null||It===void 0?void 0:It.input)===null||Rt===void 0)&&Rt.gallery&&kn((it=(Te=(nt=(Ct=n.groupChannel)===null||Ct===void 0?void 0:Ct.channel)===null||nt===void 0?void 0:nt.input)===null||Te===void 0?void 0:Te.gallery)===null||it===void 0?void 0:it.enablePhoto)&&(t.channel.input.gallery.enablePhoto=(ct=(gn=(bt=(St=n.groupChannel)===null||St===void 0?void 0:St.channel)===null||bt===void 0?void 0:bt.input)===null||gn===void 0?void 0:gn.gallery)===null||ct===void 0?void 0:ct.enablePhoto),!((Xn=(ur=(En=e.groupChannel)===null||En===void 0?void 0:En.channel)===null||ur===void 0?void 0:ur.input)===null||Xn===void 0)&&Xn.gallery&&kn((cr=(Pn=(xn=(ar=e.groupChannel)===null||ar===void 0?void 0:ar.channel)===null||xn===void 0?void 0:xn.input)===null||Pn===void 0?void 0:Pn.gallery)===null||cr===void 0?void 0:cr.enableVideo)&&(t.channel.input.gallery.enableVideo=(At=(pt=(Nt=(at=e.groupChannel)===null||at===void 0?void 0:at.channel)===null||Nt===void 0?void 0:Nt.input)===null||pt===void 0?void 0:pt.gallery)===null||At===void 0?void 0:At.enableVideo),!((tn=(We=(Tt=n.groupChannel)===null||Tt===void 0?void 0:Tt.channel)===null||We===void 0?void 0:We.input)===null||tn===void 0)&&tn.gallery&&kn((mt=(In=(qn=(Vn=n.groupChannel)===null||Vn===void 0?void 0:Vn.channel)===null||qn===void 0?void 0:qn.input)===null||In===void 0?void 0:In.gallery)===null||mt===void 0?void 0:mt.enableVideo)&&(t.channel.input.gallery.enableVideo=(rn=(ut=(Pe=(oe=n.groupChannel)===null||oe===void 0?void 0:oe.channel)===null||Pe===void 0?void 0:Pe.input)===null||ut===void 0?void 0:ut.gallery)===null||rn===void 0?void 0:rn.enableVideo)}function hZ(t,n,e){var r,i,a,s,o,u,c,h,p,m,_,b,C,N,S,M,w,U;!((r=e.groupChannel)===null||r===void 0)&&r.channelList&&kn((a=(i=e.groupChannel)===null||i===void 0?void 0:i.channelList)===null||a===void 0?void 0:a.enableTypingIndicator)&&(t.channelList.enableTypingIndicator=e.groupChannel.channelList.enableTypingIndicator),!((s=n.groupChannel)===null||s===void 0)&&s.channelList&&kn((u=(o=n.groupChannel)===null||o===void 0?void 0:o.channelList)===null||u===void 0?void 0:u.enableTypingIndicator)&&(t.channelList.enableTypingIndicator=(h=(c=n.groupChannel)===null||c===void 0?void 0:c.channelList)===null||h===void 0?void 0:h.enableTypingIndicator),!((p=e.groupChannel)===null||p===void 0)&&p.channelList&&kn((_=(m=e.groupChannel)===null||m===void 0?void 0:m.channelList)===null||_===void 0?void 0:_.enableMessageReceiptStatus)&&(t.channelList.enableMessageReceiptStatus=(C=(b=e.groupChannel)===null||b===void 0?void 0:b.channelList)===null||C===void 0?void 0:C.enableMessageReceiptStatus),!((N=n.groupChannel)===null||N===void 0)&&N.channelList&&kn((M=(S=n.groupChannel)===null||S===void 0?void 0:S.channelList)===null||M===void 0?void 0:M.enableMessageReceiptStatus)&&(t.channelList.enableMessageReceiptStatus=(U=(w=n.groupChannel)===null||w===void 0?void 0:w.channelList)===null||U===void 0?void 0:U.enableMessageReceiptStatus)}function fZ(t,n,e){var r,i,a,s,o,u,c,h;!((r=e.groupChannel)===null||r===void 0)&&r.setting&&kn((a=(i=e.groupChannel)===null||i===void 0?void 0:i.setting)===null||a===void 0?void 0:a.enableMessageSearch)&&(t.setting.enableMessageSearch=e.groupChannel.setting.enableMessageSearch),!((s=n.groupChannel)===null||s===void 0)&&s.setting&&kn((u=(o=n.groupChannel)===null||o===void 0?void 0:o.setting)===null||u===void 0?void 0:u.enableMessageSearch)&&(t.setting.enableMessageSearch=(h=(c=n.groupChannel)===null||c===void 0?void 0:c.setting)===null||h===void 0?void 0:h.enableMessageSearch)}function vZ(t,n,e){pZ(t,n,e),mZ(t,n,e)}function pZ(t,n,e){var r,i,a,s,o,u,c,h;!((r=e.openChannel)===null||r===void 0)&&r.channel&&kn((a=(i=e.openChannel)===null||i===void 0?void 0:i.channel)===null||a===void 0?void 0:a.enableOgtag)&&(t.channel.enableOgtag=e.openChannel.channel.enableOgtag),!((s=n.openChannel)===null||s===void 0)&&s.channel&&kn((u=(o=n.openChannel)===null||o===void 0?void 0:o.channel)===null||u===void 0?void 0:u.enableOgtag)&&(t.channel.enableOgtag=(h=(c=n.openChannel)===null||c===void 0?void 0:c.channel)===null||h===void 0?void 0:h.enableOgtag)}function mZ(t,n,e){var r,i,a,s,o,u,c,h,p,m,_,b,C,N,S,M,w,U,L,P,x,H,F,Q,$,q,X,V,ee,z,ie,se,he,pe,K,ce,me,Le,ge,Ee,Ye,tt,yt,Ht,zt,Xt,Jt,Mt,jt,en,Dt,ln,Yt,st,ft,un,vt,_t,Pt,Et,Ft,vn,Je,Nn,An,Mn,Zt,Gt,xt,Lt,Cn,ir,It,Rt,Ct,nt,Te,it,St,bt,gn,ct,En,ur,Xn,ar,xn,Pn,cr,at,Nt,pt,At,Tt,We,tn,Vn,qn,In,mt,oe,Pe,ut,rn;!((i=(r=e.openChannel)===null||r===void 0?void 0:r.channel)===null||i===void 0)&&i.input&&kn((o=(s=(a=e.openChannel)===null||a===void 0?void 0:a.channel)===null||s===void 0?void 0:s.input)===null||o===void 0?void 0:o.enableDocument)&&(t.channel.input.enableDocument=(h=(c=(u=e.openChannel)===null||u===void 0?void 0:u.channel)===null||c===void 0?void 0:c.input)===null||h===void 0?void 0:h.enableDocument),!((m=(p=n.openChannel)===null||p===void 0?void 0:p.channel)===null||m===void 0)&&m.input&&kn((C=(b=(_=n.openChannel)===null||_===void 0?void 0:_.channel)===null||b===void 0?void 0:b.input)===null||C===void 0?void 0:C.enableDocument)&&(t.channel.input.enableDocument=(M=(S=(N=n.openChannel)===null||N===void 0?void 0:N.channel)===null||S===void 0?void 0:S.input)===null||M===void 0?void 0:M.enableDocument),!((L=(U=(w=e.openChannel)===null||w===void 0?void 0:w.channel)===null||U===void 0?void 0:U.input)===null||L===void 0)&&L.camera&&kn((F=(H=(x=(P=e.openChannel)===null||P===void 0?void 0:P.channel)===null||x===void 0?void 0:x.input)===null||H===void 0?void 0:H.camera)===null||F===void 0?void 0:F.enablePhoto)&&(t.channel.input.camera.enablePhoto=(X=(q=($=(Q=e.openChannel)===null||Q===void 0?void 0:Q.channel)===null||$===void 0?void 0:$.input)===null||q===void 0?void 0:q.camera)===null||X===void 0?void 0:X.enablePhoto),!((z=(ee=(V=n.openChannel)===null||V===void 0?void 0:V.channel)===null||ee===void 0?void 0:ee.input)===null||z===void 0)&&z.camera&&kn((pe=(he=(se=(ie=n.openChannel)===null||ie===void 0?void 0:ie.channel)===null||se===void 0?void 0:se.input)===null||he===void 0?void 0:he.camera)===null||pe===void 0?void 0:pe.enablePhoto)&&(t.channel.input.camera.enablePhoto=(Le=(me=(ce=(K=n.openChannel)===null||K===void 0?void 0:K.channel)===null||ce===void 0?void 0:ce.input)===null||me===void 0?void 0:me.camera)===null||Le===void 0?void 0:Le.enablePhoto),!((Ye=(Ee=(ge=e.openChannel)===null||ge===void 0?void 0:ge.channel)===null||Ee===void 0?void 0:Ee.input)===null||Ye===void 0)&&Ye.camera&&kn((zt=(Ht=(yt=(tt=e.openChannel)===null||tt===void 0?void 0:tt.channel)===null||yt===void 0?void 0:yt.input)===null||Ht===void 0?void 0:Ht.camera)===null||zt===void 0?void 0:zt.enableVideo)&&(t.channel.input.camera.enableVideo=(jt=(Mt=(Jt=(Xt=e.openChannel)===null||Xt===void 0?void 0:Xt.channel)===null||Jt===void 0?void 0:Jt.input)===null||Mt===void 0?void 0:Mt.camera)===null||jt===void 0?void 0:jt.enableVideo),!((ln=(Dt=(en=n.openChannel)===null||en===void 0?void 0:en.channel)===null||Dt===void 0?void 0:Dt.input)===null||ln===void 0)&&ln.camera&&kn((un=(ft=(st=(Yt=n.openChannel)===null||Yt===void 0?void 0:Yt.channel)===null||st===void 0?void 0:st.input)===null||ft===void 0?void 0:ft.camera)===null||un===void 0?void 0:un.enableVideo)&&(t.channel.input.camera.enableVideo=(Et=(Pt=(_t=(vt=n.openChannel)===null||vt===void 0?void 0:vt.channel)===null||_t===void 0?void 0:_t.input)===null||Pt===void 0?void 0:Pt.camera)===null||Et===void 0?void 0:Et.enableVideo),!((Je=(vn=(Ft=e.openChannel)===null||Ft===void 0?void 0:Ft.channel)===null||vn===void 0?void 0:vn.input)===null||Je===void 0)&&Je.gallery&&kn((Zt=(Mn=(An=(Nn=e.openChannel)===null||Nn===void 0?void 0:Nn.channel)===null||An===void 0?void 0:An.input)===null||Mn===void 0?void 0:Mn.gallery)===null||Zt===void 0?void 0:Zt.enablePhoto)&&(t.channel.input.gallery.enablePhoto=(Cn=(Lt=(xt=(Gt=e.openChannel)===null||Gt===void 0?void 0:Gt.channel)===null||xt===void 0?void 0:xt.input)===null||Lt===void 0?void 0:Lt.gallery)===null||Cn===void 0?void 0:Cn.enablePhoto),!((Rt=(It=(ir=n.openChannel)===null||ir===void 0?void 0:ir.channel)===null||It===void 0?void 0:It.input)===null||Rt===void 0)&&Rt.gallery&&kn((it=(Te=(nt=(Ct=n.openChannel)===null||Ct===void 0?void 0:Ct.channel)===null||nt===void 0?void 0:nt.input)===null||Te===void 0?void 0:Te.gallery)===null||it===void 0?void 0:it.enablePhoto)&&(t.channel.input.gallery.enablePhoto=(ct=(gn=(bt=(St=n.openChannel)===null||St===void 0?void 0:St.channel)===null||bt===void 0?void 0:bt.input)===null||gn===void 0?void 0:gn.gallery)===null||ct===void 0?void 0:ct.enablePhoto),!((Xn=(ur=(En=e.openChannel)===null||En===void 0?void 0:En.channel)===null||ur===void 0?void 0:ur.input)===null||Xn===void 0)&&Xn.gallery&&kn((cr=(Pn=(xn=(ar=e.openChannel)===null||ar===void 0?void 0:ar.channel)===null||xn===void 0?void 0:xn.input)===null||Pn===void 0?void 0:Pn.gallery)===null||cr===void 0?void 0:cr.enableVideo)&&(t.channel.input.gallery.enableVideo=(At=(pt=(Nt=(at=e.openChannel)===null||at===void 0?void 0:at.channel)===null||Nt===void 0?void 0:Nt.input)===null||pt===void 0?void 0:pt.gallery)===null||At===void 0?void 0:At.enableVideo),!((tn=(We=(Tt=n.openChannel)===null||Tt===void 0?void 0:Tt.channel)===null||We===void 0?void 0:We.input)===null||tn===void 0)&&tn.gallery&&kn((mt=(In=(qn=(Vn=n.openChannel)===null||Vn===void 0?void 0:Vn.channel)===null||qn===void 0?void 0:qn.input)===null||In===void 0?void 0:In.gallery)===null||mt===void 0?void 0:mt.enableVideo)&&(t.channel.input.gallery.enableVideo=(rn=(ut=(Pe=(oe=n.openChannel)===null||oe===void 0?void 0:oe.channel)===null||Pe===void 0?void 0:Pe.input)===null||ut===void 0?void 0:ut.gallery)===null||rn===void 0?void 0:rn.enableVideo)}function gZ(t,n){const e=Hw();return lZ(e.common,t,n),uZ(e.groupChannel,t,n),vZ(e.openChannel,t,n),e}function _Z(t){return typeof t=="object"&&"configuration"in t&&"updated_at"in t}var yZ=function(t,n,e,r){function i(a){return a instanceof e?a:new e(function(s){s(a)})}return new(e||(e=Promise))(function(a,s){function o(h){try{c(r.next(h))}catch(p){s(p)}}function u(h){try{c(r.throw(h))}catch(p){s(p)}}function c(h){h.done?a(h.value):i(h.value).then(o,u)}c((r=r.apply(t,n||[])).next())})};function G0(t){var n,e;return(e=(n=t.appInfo)===null||n===void 0?void 0:n.applicationAttributes)!==null&&e!==void 0?e:[]}const F5=R.createContext({initDashboardConfigs:()=>Promise.resolve(),configs:KD,configsWithAppAttr:()=>KD}),B5=({storage:t,children:n,localConfigs:e={}})=>{const[r,i]=R.useState(P5),[a]=R.useState(()=>new oZ(t)),s=R.useCallback(c=>yZ(void 0,void 0,void 0,function*(){const h=yield a.init(c.appId);if(c.appInfo&&c.appInfo.uikitConfigInfo.lastUpdatedAt===h.updatedAt)i(h.configuration);else try{const p=yield c.getUIKitConfiguration();if(_Z(p.json)){const m=qA(p.json),_=yield a.update(m);i(_.configuration)}}catch{i(h.configuration)}}),[a]),o=gZ(e,r),u=CE(c=>({groupChannel:{channel:{get enableReactions(){return o.groupChannel.channel.enableReactions&&G0(c).includes(L0.reactions)},get enableReactionsSupergroup(){return o.groupChannel.channel.enableReactionsSupergroup&&G0(c).includes(L0.reactions)},get enableOgtag(){return o.groupChannel.channel.enableOgtag&&G0(c).includes(L0.enable_og_tag)}},setting:{get enableMessageSearch(){return o.groupChannel.setting.enableMessageSearch&&G0(c).includes(L0.message_search_v3)}}},openChannel:{channel:{get enableOgtag(){return o.openChannel.channel.enableOgtag&&G0(c).includes(L0.enable_og_tag)}}}}));return E.createElement(F5.Provider,{value:{initDashboardConfigs:s,configs:o,configsWithAppAttr:u}},n)},H5=()=>R.useContext(F5);function Gw(t){return{lowerCase:t.toLowerCase(),upperCase:t.toUpperCase()}}function EZ(t){return{lowerCase:t.toLowerCase(),upperCase:t.toUpperCase()}}var G5={getItem:function(t){return si(this,void 0,void 0,function(){var n;return oi(this,function(e){return[2,(n=localStorage.getItem(t))!==null&&n!==void 0?n:null]})})},setItem:function(t,n){return si(this,void 0,void 0,function(){return oi(this,function(e){return[2,localStorage.setItem(t,n)]})})}},bZ=1024*1024,mc=10,sf=100,V5=100,hN=250,Vw=1e3,z5=6e5,CZ=12e3,Ope=11025,YD=["audio/webm","audio/mp4","audio/mpeg","audio/ogg"],wC="sendbird-voice-player-provider-root",KA="sendbird-global-audio-player-id",Xy="Voice_message.mp3",SZ="Voice_message.m4a",tf="audio/mp3;sbu_type=voice",TZ="audio/x-m4a;sbu_type=voice",j5="KEY_VOICE_MESSAGE_DURATION",q5="KEY_INTERNAL_MESSAGE_TYPE",$5="voice/mp3",J1="32px",K5=10,YA=25*1024*1024,fN="sendbird_message_templates_token_key",Zm="sendbird_message_templates_key",SE="message_template",NZ=function(t){return/iPhone|iPad|iPod/i.test(t)},AZ=function(t){return/WebKit/i.test(t)},MZ=function(t){return/Chrome/i.test(t)},zw=function(t){return!MZ(t)&&/Safari/i.test(t)},WD=function(t){return NZ(t)&&(AZ(t)||zw(t))},dd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function IZ(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Y5={exports:{}},vN={};var QD;function wZ(){if(QD)return vN;QD=1;var t=E;function n(p,m){return p===m&&(p!==0||1/p===1/m)||p!==p&&m!==m}var e=typeof Object.is=="function"?Object.is:n,r=t.useState,i=t.useEffect,a=t.useLayoutEffect,s=t.useDebugValue;function o(p,m){var _=m(),b=r({inst:{value:_,getSnapshot:m}}),C=b[0].inst,N=b[1];return a(function(){C.value=_,C.getSnapshot=m,u(C)&&N({inst:C})},[p,_,m]),i(function(){return u(C)&&N({inst:C}),p(function(){u(C)&&N({inst:C})})},[p]),s(_),_}function u(p){var m=p.getSnapshot;p=p.value;try{var _=m();return!e(p,_)}catch{return!0}}function c(p,m){return m()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:o;return vN.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:h,vN}Y5.exports=wZ();var jw=Y5.exports;function RZ(){this.__data__=[],this.size=0}var OZ=RZ;function DZ(t,n){return t===n||t!==t&&n!==n}var W5=DZ,UZ=W5;function xZ(t,n){for(var e=t.length;e--;)if(UZ(t[e][0],n))return e;return-1}var KS=xZ,LZ=KS,kZ=Array.prototype,PZ=kZ.splice;function FZ(t){var n=this.__data__,e=LZ(n,t);if(e<0)return!1;var r=n.length-1;return e==r?n.pop():PZ.call(n,e,1),--this.size,!0}var BZ=FZ,HZ=KS;function GZ(t){var n=this.__data__,e=HZ(n,t);return e<0?void 0:n[e][1]}var VZ=GZ,zZ=KS;function jZ(t){return zZ(this.__data__,t)>-1}var qZ=jZ,$Z=KS;function KZ(t,n){var e=this.__data__,r=$Z(e,t);return r<0?(++this.size,e.push([t,n])):e[r][1]=n,this}var YZ=KZ,WZ=OZ,QZ=BZ,XZ=VZ,ZZ=qZ,JZ=YZ;function Fg(t){var n=-1,e=t==null?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}Fg.prototype.clear=WZ;Fg.prototype.delete=QZ;Fg.prototype.get=XZ;Fg.prototype.has=ZZ;Fg.prototype.set=JZ;var YS=Fg,eJ=YS;function tJ(){this.__data__=new eJ,this.size=0}var nJ=tJ;function rJ(t){var n=this.__data__,e=n.delete(t);return this.size=n.size,e}var iJ=rJ;function aJ(t){return this.__data__.get(t)}var sJ=aJ;function oJ(t){return this.__data__.has(t)}var lJ=oJ,uJ=typeof dd=="object"&&dd&&dd.Object===Object&&dd,Q5=uJ,cJ=Q5,dJ=typeof self=="object"&&self&&self.Object===Object&&self,hJ=cJ||dJ||Function("return this")(),Dd=hJ,fJ=Dd,vJ=fJ.Symbol,qw=vJ,XD=qw,X5=Object.prototype,pJ=X5.hasOwnProperty,mJ=X5.toString,V0=XD?XD.toStringTag:void 0;function gJ(t){var n=pJ.call(t,V0),e=t[V0];try{t[V0]=void 0;var r=!0}catch{}var i=mJ.call(t);return r&&(n?t[V0]=e:delete t[V0]),i}var _J=gJ,yJ=Object.prototype,EJ=yJ.toString;function bJ(t){return EJ.call(t)}var CJ=bJ,ZD=qw,SJ=_J,TJ=CJ,NJ="[object Null]",AJ="[object Undefined]",JD=ZD?ZD.toStringTag:void 0;function MJ(t){return t==null?t===void 0?AJ:NJ:JD&&JD in Object(t)?SJ(t):TJ(t)}var WS=MJ;function IJ(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}var Z5=IJ,wJ=WS,RJ=Z5,OJ="[object AsyncFunction]",DJ="[object Function]",UJ="[object GeneratorFunction]",xJ="[object Proxy]";function LJ(t){if(!RJ(t))return!1;var n=wJ(t);return n==DJ||n==UJ||n==OJ||n==xJ}var J5=LJ,kJ=Dd,PJ=kJ["__core-js_shared__"],FJ=PJ,pN=FJ,eU=(function(){var t=/[^.]+$/.exec(pN&&pN.keys&&pN.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""})();function BJ(t){return!!eU&&eU in t}var HJ=BJ,GJ=Function.prototype,VJ=GJ.toString;function zJ(t){if(t!=null){try{return VJ.call(t)}catch{}try{return t+""}catch{}}return""}var eF=zJ,jJ=J5,qJ=HJ,$J=Z5,KJ=eF,YJ=/[\\^$.*+?()[\]{}|]/g,WJ=/^\[object .+?Constructor\]$/,QJ=Function.prototype,XJ=Object.prototype,ZJ=QJ.toString,JJ=XJ.hasOwnProperty,eee=RegExp("^"+ZJ.call(JJ).replace(YJ,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function tee(t){if(!$J(t)||qJ(t))return!1;var n=jJ(t)?eee:WJ;return n.test(KJ(t))}var nee=tee;function ree(t,n){return t?.[n]}var iee=ree,aee=nee,see=iee;function oee(t,n){var e=see(t,n);return aee(e)?e:void 0}var Bg=oee,lee=Bg,uee=Dd,cee=lee(uee,"Map"),$w=cee,dee=Bg,hee=dee(Object,"create"),QS=hee,tU=QS;function fee(){this.__data__=tU?tU(null):{},this.size=0}var vee=fee;function pee(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}var mee=pee,gee=QS,_ee="__lodash_hash_undefined__",yee=Object.prototype,Eee=yee.hasOwnProperty;function bee(t){var n=this.__data__;if(gee){var e=n[t];return e===_ee?void 0:e}return Eee.call(n,t)?n[t]:void 0}var Cee=bee,See=QS,Tee=Object.prototype,Nee=Tee.hasOwnProperty;function Aee(t){var n=this.__data__;return See?n[t]!==void 0:Nee.call(n,t)}var Mee=Aee,Iee=QS,wee="__lodash_hash_undefined__";function Ree(t,n){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=Iee&&n===void 0?wee:n,this}var Oee=Ree,Dee=vee,Uee=mee,xee=Cee,Lee=Mee,kee=Oee;function Hg(t){var n=-1,e=t==null?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}Hg.prototype.clear=Dee;Hg.prototype.delete=Uee;Hg.prototype.get=xee;Hg.prototype.has=Lee;Hg.prototype.set=kee;var Pee=Hg,nU=Pee,Fee=YS,Bee=$w;function Hee(){this.size=0,this.__data__={hash:new nU,map:new(Bee||Fee),string:new nU}}var Gee=Hee;function Vee(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}var zee=Vee,jee=zee;function qee(t,n){var e=t.__data__;return jee(n)?e[typeof n=="string"?"string":"hash"]:e.map}var XS=qee,$ee=XS;function Kee(t){var n=$ee(this,t).delete(t);return this.size-=n?1:0,n}var Yee=Kee,Wee=XS;function Qee(t){return Wee(this,t).get(t)}var Xee=Qee,Zee=XS;function Jee(t){return Zee(this,t).has(t)}var ete=Jee,tte=XS;function nte(t,n){var e=tte(this,t),r=e.size;return e.set(t,n),this.size+=e.size==r?0:1,this}var rte=nte,ite=Gee,ate=Yee,ste=Xee,ote=ete,lte=rte;function Gg(t){var n=-1,e=t==null?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}Gg.prototype.clear=ite;Gg.prototype.delete=ate;Gg.prototype.get=ste;Gg.prototype.has=ote;Gg.prototype.set=lte;var tF=Gg,ute=YS,cte=$w,dte=tF,hte=200;function fte(t,n){var e=this.__data__;if(e instanceof ute){var r=e.__data__;if(!cte||r.length<hte-1)return r.push([t,n]),this.size=++e.size,this;e=this.__data__=new dte(r)}return e.set(t,n),this.size=e.size,this}var vte=fte,pte=YS,mte=nJ,gte=iJ,_te=sJ,yte=lJ,Ete=vte;function Vg(t){var n=this.__data__=new pte(t);this.size=n.size}Vg.prototype.clear=mte;Vg.prototype.delete=gte;Vg.prototype.get=_te;Vg.prototype.has=yte;Vg.prototype.set=Ete;var bte=Vg,Cte="__lodash_hash_undefined__";function Ste(t){return this.__data__.set(t,Cte),this}var Tte=Ste;function Nte(t){return this.__data__.has(t)}var Ate=Nte,Mte=tF,Ite=Tte,wte=Ate;function fS(t){var n=-1,e=t==null?0:t.length;for(this.__data__=new Mte;++n<e;)this.add(t[n])}fS.prototype.add=fS.prototype.push=Ite;fS.prototype.has=wte;var Rte=fS;function Ote(t,n){for(var e=-1,r=t==null?0:t.length;++e<r;)if(n(t[e],e,t))return!0;return!1}var Dte=Ote;function Ute(t,n){return t.has(n)}var xte=Ute,Lte=Rte,kte=Dte,Pte=xte,Fte=1,Bte=2;function Hte(t,n,e,r,i,a){var s=e&Fte,o=t.length,u=n.length;if(o!=u&&!(s&&u>o))return!1;var c=a.get(t),h=a.get(n);if(c&&h)return c==n&&h==t;var p=-1,m=!0,_=e&Bte?new Lte:void 0;for(a.set(t,n),a.set(n,t);++p<o;){var b=t[p],C=n[p];if(r)var N=s?r(C,b,p,n,t,a):r(b,C,p,t,n,a);if(N!==void 0){if(N)continue;m=!1;break}if(_){if(!kte(n,function(S,M){if(!Pte(_,M)&&(b===S||i(b,S,e,r,a)))return _.push(M)})){m=!1;break}}else if(!(b===C||i(b,C,e,r,a))){m=!1;break}}return a.delete(t),a.delete(n),m}var nF=Hte,Gte=Dd,Vte=Gte.Uint8Array,zte=Vte;function jte(t){var n=-1,e=Array(t.size);return t.forEach(function(r,i){e[++n]=[i,r]}),e}var qte=jte;function $te(t){var n=-1,e=Array(t.size);return t.forEach(function(r){e[++n]=r}),e}var Kte=$te,rU=qw,iU=zte,Yte=W5,Wte=nF,Qte=qte,Xte=Kte,Zte=1,Jte=2,ene="[object Boolean]",tne="[object Date]",nne="[object Error]",rne="[object Map]",ine="[object Number]",ane="[object RegExp]",sne="[object Set]",one="[object String]",lne="[object Symbol]",une="[object ArrayBuffer]",cne="[object DataView]",aU=rU?rU.prototype:void 0,mN=aU?aU.valueOf:void 0;function dne(t,n,e,r,i,a,s){switch(e){case cne:if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset)return!1;t=t.buffer,n=n.buffer;case une:return!(t.byteLength!=n.byteLength||!a(new iU(t),new iU(n)));case ene:case tne:case ine:return Yte(+t,+n);case nne:return t.name==n.name&&t.message==n.message;case ane:case one:return t==n+"";case rne:var o=Qte;case sne:var u=r&Zte;if(o||(o=Xte),t.size!=n.size&&!u)return!1;var c=s.get(t);if(c)return c==n;r|=Jte,s.set(t,n);var h=Wte(o(t),o(n),r,i,a,s);return s.delete(t),h;case lne:if(mN)return mN.call(t)==mN.call(n)}return!1}var hne=dne;function fne(t,n){for(var e=-1,r=n.length,i=t.length;++e<r;)t[i+e]=n[e];return t}var vne=fne,pne=Array.isArray,Kw=pne,mne=vne,gne=Kw;function _ne(t,n,e){var r=n(t);return gne(t)?r:mne(r,e(t))}var yne=_ne;function Ene(t,n){for(var e=-1,r=t==null?0:t.length,i=0,a=[];++e<r;){var s=t[e];n(s,e,t)&&(a[i++]=s)}return a}var bne=Ene;function Cne(){return[]}var Sne=Cne,Tne=bne,Nne=Sne,Ane=Object.prototype,Mne=Ane.propertyIsEnumerable,sU=Object.getOwnPropertySymbols,Ine=sU?function(t){return t==null?[]:(t=Object(t),Tne(sU(t),function(n){return Mne.call(t,n)}))}:Nne,wne=Ine;function Rne(t,n){for(var e=-1,r=Array(t);++e<t;)r[e]=n(e);return r}var One=Rne;function Dne(t){return t!=null&&typeof t=="object"}var ZS=Dne,Une=WS,xne=ZS,Lne="[object Arguments]";function kne(t){return xne(t)&&Une(t)==Lne}var Pne=kne,oU=Pne,Fne=ZS,rF=Object.prototype,Bne=rF.hasOwnProperty,Hne=rF.propertyIsEnumerable,Gne=oU((function(){return arguments})())?oU:function(t){return Fne(t)&&Bne.call(t,"callee")&&!Hne.call(t,"callee")},Vne=Gne,vS={exports:{}};function zne(){return!1}var jne=zne;vS.exports;(function(t,n){var e=Dd,r=jne,i=n&&!n.nodeType&&n,a=i&&!0&&t&&!t.nodeType&&t,s=a&&a.exports===i,o=s?e.Buffer:void 0,u=o?o.isBuffer:void 0,c=u||r;t.exports=c})(vS,vS.exports);var iF=vS.exports,qne=9007199254740991,$ne=/^(?:0|[1-9]\d*)$/;function Kne(t,n){var e=typeof t;return n=n??qne,!!n&&(e=="number"||e!="symbol"&&$ne.test(t))&&t>-1&&t%1==0&&t<n}var Yne=Kne,Wne=9007199254740991;function Qne(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Wne}var aF=Qne,Xne=WS,Zne=aF,Jne=ZS,ere="[object Arguments]",tre="[object Array]",nre="[object Boolean]",rre="[object Date]",ire="[object Error]",are="[object Function]",sre="[object Map]",ore="[object Number]",lre="[object Object]",ure="[object RegExp]",cre="[object Set]",dre="[object String]",hre="[object WeakMap]",fre="[object ArrayBuffer]",vre="[object DataView]",pre="[object Float32Array]",mre="[object Float64Array]",gre="[object Int8Array]",_re="[object Int16Array]",yre="[object Int32Array]",Ere="[object Uint8Array]",bre="[object Uint8ClampedArray]",Cre="[object Uint16Array]",Sre="[object Uint32Array]",pi={};pi[pre]=pi[mre]=pi[gre]=pi[_re]=pi[yre]=pi[Ere]=pi[bre]=pi[Cre]=pi[Sre]=!0;pi[ere]=pi[tre]=pi[fre]=pi[nre]=pi[vre]=pi[rre]=pi[ire]=pi[are]=pi[sre]=pi[ore]=pi[lre]=pi[ure]=pi[cre]=pi[dre]=pi[hre]=!1;function Tre(t){return Jne(t)&&Zne(t.length)&&!!pi[Xne(t)]}var Nre=Tre;function Are(t){return function(n){return t(n)}}var Mre=Are,pS={exports:{}};pS.exports;(function(t,n){var e=Q5,r=n&&!n.nodeType&&n,i=r&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===r,s=a&&e.process,o=(function(){try{var u=i&&i.require&&i.require("util").types;return u||s&&s.binding&&s.binding("util")}catch{}})();t.exports=o})(pS,pS.exports);var Ire=pS.exports,wre=Nre,Rre=Mre,lU=Ire,uU=lU&&lU.isTypedArray,Ore=uU?Rre(uU):wre,sF=Ore,Dre=One,Ure=Vne,xre=Kw,Lre=iF,kre=Yne,Pre=sF,Fre=Object.prototype,Bre=Fre.hasOwnProperty;function Hre(t,n){var e=xre(t),r=!e&&Ure(t),i=!e&&!r&&Lre(t),a=!e&&!r&&!i&&Pre(t),s=e||r||i||a,o=s?Dre(t.length,String):[],u=o.length;for(var c in t)(n||Bre.call(t,c))&&!(s&&(c=="length"||i&&(c=="offset"||c=="parent")||a&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||kre(c,u)))&&o.push(c);return o}var Gre=Hre,Vre=Object.prototype;function zre(t){var n=t&&t.constructor,e=typeof n=="function"&&n.prototype||Vre;return t===e}var jre=zre;function qre(t,n){return function(e){return t(n(e))}}var $re=qre,Kre=$re,Yre=Kre(Object.keys,Object),Wre=Yre,Qre=jre,Xre=Wre,Zre=Object.prototype,Jre=Zre.hasOwnProperty;function eie(t){if(!Qre(t))return Xre(t);var n=[];for(var e in Object(t))Jre.call(t,e)&&e!="constructor"&&n.push(e);return n}var tie=eie,nie=J5,rie=aF;function iie(t){return t!=null&&rie(t.length)&&!nie(t)}var aie=iie,sie=Gre,oie=tie,lie=aie;function uie(t){return lie(t)?sie(t):oie(t)}var cie=uie,die=yne,hie=wne,fie=cie;function vie(t){return die(t,fie,hie)}var pie=vie,cU=pie,mie=1,gie=Object.prototype,_ie=gie.hasOwnProperty;function yie(t,n,e,r,i,a){var s=e&mie,o=cU(t),u=o.length,c=cU(n),h=c.length;if(u!=h&&!s)return!1;for(var p=u;p--;){var m=o[p];if(!(s?m in n:_ie.call(n,m)))return!1}var _=a.get(t),b=a.get(n);if(_&&b)return _==n&&b==t;var C=!0;a.set(t,n),a.set(n,t);for(var N=s;++p<u;){m=o[p];var S=t[m],M=n[m];if(r)var w=s?r(M,S,m,n,t,a):r(S,M,m,t,n,a);if(!(w===void 0?S===M||i(S,M,e,r,a):w)){C=!1;break}N||(N=m=="constructor")}if(C&&!N){var U=t.constructor,L=n.constructor;U!=L&&"constructor"in t&&"constructor"in n&&!(typeof U=="function"&&U instanceof U&&typeof L=="function"&&L instanceof L)&&(C=!1)}return a.delete(t),a.delete(n),C}var Eie=yie,bie=Bg,Cie=Dd,Sie=bie(Cie,"DataView"),Tie=Sie,Nie=Bg,Aie=Dd,Mie=Nie(Aie,"Promise"),Iie=Mie,wie=Bg,Rie=Dd,Oie=wie(Rie,"Set"),Die=Oie,Uie=Bg,xie=Dd,Lie=Uie(xie,"WeakMap"),kie=Lie,WA=Tie,QA=$w,XA=Iie,ZA=Die,JA=kie,oF=WS,zg=eF,dU="[object Map]",Pie="[object Object]",hU="[object Promise]",fU="[object Set]",vU="[object WeakMap]",pU="[object DataView]",Fie=zg(WA),Bie=zg(QA),Hie=zg(XA),Gie=zg(ZA),Vie=zg(JA),Fv=oF;(WA&&Fv(new WA(new ArrayBuffer(1)))!=pU||QA&&Fv(new QA)!=dU||XA&&Fv(XA.resolve())!=hU||ZA&&Fv(new ZA)!=fU||JA&&Fv(new JA)!=vU)&&(Fv=function(t){var n=oF(t),e=n==Pie?t.constructor:void 0,r=e?zg(e):"";if(r)switch(r){case Fie:return pU;case Bie:return dU;case Hie:return hU;case Gie:return fU;case Vie:return vU}return n});var zie=Fv,gN=bte,jie=nF,qie=hne,$ie=Eie,mU=zie,gU=Kw,_U=iF,Kie=sF,Yie=1,yU="[object Arguments]",EU="[object Array]",eC="[object Object]",Wie=Object.prototype,bU=Wie.hasOwnProperty;function Qie(t,n,e,r,i,a){var s=gU(t),o=gU(n),u=s?EU:mU(t),c=o?EU:mU(n);u=u==yU?eC:u,c=c==yU?eC:c;var h=u==eC,p=c==eC,m=u==c;if(m&&_U(t)){if(!_U(n))return!1;s=!0,h=!1}if(m&&!h)return a||(a=new gN),s||Kie(t)?jie(t,n,e,r,i,a):qie(t,n,u,e,r,i,a);if(!(e&Yie)){var _=h&&bU.call(t,"__wrapped__"),b=p&&bU.call(n,"__wrapped__");if(_||b){var C=_?t.value():t,N=b?n.value():n;return a||(a=new gN),i(C,N,e,r,a)}}return m?(a||(a=new gN),$ie(t,n,e,r,i,a)):!1}var Xie=Qie,Zie=Xie,CU=ZS;function lF(t,n,e,r,i){return t===n?!0:t==null||n==null||!CU(t)&&!CU(n)?t!==t&&n!==n:Zie(t,n,e,r,lF,i)}var Jie=lF,eae=Jie;function tae(t,n){return eae(t,n)}var nae=tae,uF=IZ(nae);function cF(t,n){return Object.entries(n).some(function(e){var r=e[0],i=e[1];return typeof t[r]=="function"&&typeof i=="function"?!1:!uF(t[r],i)})}function rae(t){var n=J({},t),e=[],r=new Set,i=function(){var s=e.shift();if(s){var o=s.partial,u=s.force,c=typeof o=="function"?o(n):o,h=cF(n,c);(u||h)&&(n=J(J({},n),c),r.forEach(function(p){return p()}))}},a=function(s,o){e.push({partial:s,force:o}),i()};return{getState:function(){return n},setState:a,subscribe:function(s){return r.add(s),function(){return r.delete(s)}}}}var iae={onUserProfileMessage:void 0,disableUserProfile:!1,isReactionEnabled:!0,isMentionEnabled:!1,isVoiceMessageEnabled:!0,replyType:"NONE",showSearchIcon:!0,isTypingIndicatorEnabledOnChannelList:!1,isMessageReceiptStatusEnabledOnChannelList:!1,setCurrenttheme:function(){}},aae=J(J({},iae),{appId:"",userId:"",accessToken:void 0,theme:"light",isOnline:!1,allowProfileEdit:!0,forceLeftToRightMessageLayout:!1,disableMarkAsDelivered:!1,isMultipleFilesMessageEnabled:!1,htmlTextDirection:"ltr",uikitUploadSizeLimit:YA,uikitMultipleFilesMessageLimit:K5,imageCompression:void 0,voiceRecord:void 0,userMention:void 0,renderUserProfile:void 0,onStartDirectMessage:void 0,setCurrentTheme:void 0,userListQuery:void 0,pubSub:void 0,logger:void 0,markAsReadScheduler:void 0,markAsDeliveredScheduler:void 0,common:{enableUsingDefaultUserProfile:!1},groupChannel:{enableOgtag:!0,enableTypingIndicator:!0,enableReactions:!0,enableMention:!1,replyType:"none",threadReplySelectType:"thread",enableVoiceMessage:!0,typingIndicatorTypes:void 0,enableDocument:!1,enableFeedback:!1,enableSuggestedReplies:!1,showSuggestedRepliesFor:"all_messages",suggestedRepliesDirection:"vertical",enableMarkdownForUserMessage:!1,enableFormTypeMessage:!1,enableMarkAsUnread:!1,enableReactionsSupergroup:void 0},groupChannelList:{enableTypingIndicator:!1,enableMessageReceiptStatus:!1},groupChannelSettings:{enableMessageSearch:!1},openChannel:{enableOgtag:!0,enableDocument:!1}}),sae={sdkStore:{sdk:{},initialized:!1,loading:!1,error:void 0},userStore:{user:{},initialized:!1,loading:!1},appInfoStore:{messageTemplatesInfo:void 0,waitingTemplateKeysMap:{}}},ig={config:aae,stores:sae,emojiManager:void 0,eventHandlers:{reaction:{onPressUserProfile:function(){}},connection:{onConnected:function(){},onFailed:function(){}},modal:{onMounted:function(){}},message:{onSendMessageFailed:function(){},onUpdateMessageFailed:function(){},onFileUploadFailed:function(){}}},utils:{updateMessageTemplatesInfo:function(){return new Promise(function(){})},getCachedTemplate:function(){return null}}};function oae(t,n,e){var r=R.useContext(t);if(!r)throw new Error("useStore must be used within a StoreProvider");var i=R.useRef(n);i.current=n;var a=jw.useSyncExternalStore(r.subscribe,function(){return i.current(r.getState())},function(){return i.current(e)}),s=R.useCallback(function(o){var u=r.getState();cF(u,o)&&r.setState(function(c){return J(J({},c),o)})},[r]);return R.useMemo(function(){return{state:a,updateState:s}},[a,s])}var Yw=E.createContext(null),lae=function(t){return rae({config:J(J({},ig.config),t?.config),stores:J(J({},ig.stores),t?.stores),eventHandlers:J(J({},ig.eventHandlers),t?.eventHandlers),emojiManager:ig.emojiManager,utils:J(J({},ig.utils),t?.utils)})},uae=function(){return oae(Yw,function(t){return t},ig)},cae=(function(t){function n(){var e=t!==null&&t.apply(this,arguments)||this;return e._channels=new Map,e._enteredChannelUrls=[],e}return G(n,t),Object.defineProperty(n.prototype,"enteredChannels",{get:function(){var e=this;return this._enteredChannelUrls.map((function(r){return e._channels.get(r)})).filter((function(r){return!!r}))},enumerable:!1,configurable:!0}),n.prototype.isEnteredChannel=function(e){return this._enteredChannelUrls.includes(e)},n.prototype.enter=function(e){this._enteredChannelUrls.indexOf(e)<0&&this._enteredChannelUrls.push(e)},n.prototype.exit=function(e){var r=this._enteredChannelUrls.indexOf(e);r>=0&&this._enteredChannelUrls.splice(r,1)},n.prototype.exitAll=function(){this._enteredChannelUrls=[]},n.prototype.get=function(e){return D(this,void 0,void 0,(function(){return O(this,(function(r){return[2,this._channels.get(e)]}))}))},n.prototype.upsert=function(e){return D(this,void 0,void 0,(function(){var r,i=this;return O(this,(function(a){return r=[],e.forEach((function(s){if(i._channels.has(s.url)){var o=i._channels.get(s.url);Object.assign(o,s),r.push(o)}else i._channels.set(s.url,s),r.push(s)})),[2,r]}))}))},n.prototype.remove=function(e){return D(this,void 0,void 0,(function(){return O(this,(function(r){return this._channels.delete(e),this.exit(e),[2]}))}))},n.prototype.clear=function(){return D(this,void 0,void 0,(function(){return O(this,(function(e){return this._channels.clear(),this._enteredChannelUrls=[],[2]}))}))},n})(wi),dF={channelUrl:void 0,name:void 0,coverUrlOrImage:void 0,data:void 0,customType:void 0,operatorUserIds:void 0,isEphemeral:void 0},dae=(function(t){function n(e){var r=e.channelUrl,i=e.isInternalCall,a=t.call(this)||this;return a.method=Ie.GET,a.path="".concat(i?vj:Np,"/").concat(encodeURIComponent(r)),a.params={show_pinned_messages:!0},a}return G(n,t),n})(we),SU=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.channel=new Ag(e,r),i}return G(n,t),n})(xe),hae=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.coverUrlOrImage,s=e.name,o=e.data,u=e.customType,c=e.operatorUserIds,h=e.isEphemeral;return(r=t.call(this)||this).method=Ie.POST,r.path=Np,r.params=ze(ht({channel_url:i,cover_url:re("string",a)?a:null,cover_file:ra(a)?a:null,name:s,data:o,custom_type:u,operators:c,is_ephemeral:h})),r}return G(n,t),n})(we);(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.channel=new Ag(e,r),i}G(n,t)})(xe);var fae=(function(t){function n(e){var r=e.channelUrl;return t.call(this,{code:"ENTR",payload:{channel_url:r},ackRequired:!0})||this}return G(n,t),n})(Ra),hF=(function(t){function n(e,r,i){var a,s,o=this;return o=t.call(this,e,"SYEV",i)||this,i.data&&(o.participantCount=(a=i.data.participant_count)!==null&&a!==void 0?a:0,o.user=new fn(e,i.data),o.ts=(s=i.data.edge_ts)!==null&&s!==void 0?s:0),o}return G(n,t),n})(Od),vae=(function(t){function n(e){var r=e.channelUrl;return t.call(this,{code:"EXIT",payload:{channel_url:r},ackRequired:!0})||this}return G(n,t),n})(Ra),fF=(function(t){function n(e,r,i){var a,s,o=this;return o=t.call(this,e,"EXIT",i)||this,i.data&&(o.participantCount=(a=i.data.participant_count)!==null&&a!==void 0?a:0,o.user=new fn(e,i.data),o.ts=(s=i.data.edge_ts)!==null&&s!==void 0?s:0),o}return G(n,t),n})(Od),_N={},pu=(function(t){function n(e,r){var i=t.call(this,e,Z(Z({},r),{channelType:yn.OPEN}))||this;return i.subscribeChannelEvent=Bt,i.unsubscribeChannelEvent=Bt,i.refreshChannel=function(){return D(i,void 0,void 0,(function(){return O(this,(function(a){return[2,Bt()]}))}))},i._openChannelCache=new cae(e),i._openChannelHandlers=new Map,i._dispatcher.on((function(a){var s,o;if(a instanceof Rr)i._handleEvent(a).catch((function(p){if($a(p)&&i._sdkState.appState==="foreground")throw p}));else if(a instanceof Ao&&a.stateType===zn.CONNECTED){var u=i._openChannelCache.enteredChannels;try{for(var c=Fe(u),h=c.next();!h.done;h=c.next())h.value.enter()}catch(p){s={error:p}}finally{try{h&&!h.done&&(o=c.return)&&o.call(c)}finally{if(s)throw s.error}}}})),_N[e]||(_N[e]=i),i}return G(n,t),n.of=function(e){return _N[e]},n.prototype.buildOpenChannelFromSerializedData=function(e){var r=gd(e);return new Ag(this._iid,Ag.payloadify(r))},n.prototype.getChannelFromCache=function(e){var r;return D(this,void 0,void 0,(function(){return O(this,(function(i){switch(i.label){case 0:return[4,this._openChannelCache.get(e)];case 1:return[2,(r=i.sent())!==null&&r!==void 0?r:null]}}))}))},n.prototype.upsertChannelsToCache=function(e){return D(this,void 0,void 0,(function(){return O(this,(function(r){switch(r.label){case 0:return[4,this._openChannelCache.upsert(e)];case 1:return[2,r.sent()]}}))}))},n.prototype.removeChannelsFromCache=function(e){return D(this,void 0,void 0,(function(){var r,i,a,s,o,u;return O(this,(function(c){switch(c.label){case 0:c.trys.push([0,5,6,7]),r=Fe(e),i=r.next(),c.label=1;case 1:return i.done?[3,4]:(a=i.value,[4,this._openChannelCache.remove(a)]);case 2:c.sent(),c.label=3;case 3:return i=r.next(),[3,1];case 4:return[3,7];case 5:return s=c.sent(),o={error:s},[3,7];case 6:try{i&&!i.done&&(u=r.return)&&u.call(r)}finally{if(o)throw o.error}return[7];case 7:return[2]}}))}))},n.prototype.setEnteredToCache=function(e){this._openChannelCache.enter(e.url)},n.prototype.setExitedToCache=function(e){this._openChannelCache.exit(e.url)},Object.defineProperty(n.prototype,"handlers",{get:function(){return wt([],dt(this._openChannelHandlers.values()),!1)},enumerable:!1,configurable:!0}),n.prototype._handleEvent=function(e){return D(this,void 0,void 0,(function(){var r,i,a,s,o,u,c,h,p,m,_,b,C,N,S,M,w,U,L,P,x,H,F,Q,$,q,X,V,ee,z,ie,se,he,pe,K,ce,me,Le,ge,Ee,Ye,tt,yt,Ht,zt,Xt,Jt,Mt,jt,en,Dt,ln,Yt,st,ft,un,vt,_t,Pt,Et,Ft,vn,Je,Nn,An,Mn,Zt,Gt,xt,Lt,Cn,ir,It,Rt=this;return O(this,(function(Ct){switch(Ct.label){case 0:switch(Ct.trys.push([0,62,,63]),e.code){case"MESG":case"FILE":case"ADMM":case"BRDM":return[3,1];case"MEDI":case"FEDI":case"AEDI":return[3,4];case"DELM":return[3,7];case"MRCT":return[3,10];case"MTHD":return[3,13];case"MCNT":return[3,16];case"PEDI":return[3,27];case"VOTE":return[3,30];case"SYEV":return[3,33]}return[3,61];case 1:return s=null,e.code==="MESG"?s=e.as(xw):e.code==="FILE"?s=e.as(ww):e.code!=="ADMM"&&e.code!="BRDM"||(s=e.as(b5)),s?(r=s.message,i=s.isMentioned,r.channelType!==yn.OPEN?[3,3]:[4,this.getChannel(r.channelUrl,!0)]):[3,3];case 2:a=Ct.sent(),gt((function(){return D(Rt,void 0,void 0,(function(){var nt,Te,it,St,bt;return O(this,(function(gn){try{for(nt=Fe(this._openChannelHandlers.values()),Te=nt.next();!Te.done;Te=nt.next())it=Te.value,this._openChannelCache.isEnteredChannel(a.url)&&(it.onMessageReceived&&it.onMessageReceived(a,r),i&&it.onMentionReceived&&it.onMentionReceived(a,r))}catch(ct){St={error:ct}}finally{try{Te&&!Te.done&&(bt=nt.return)&&bt.call(nt)}finally{if(St)throw St.error}}return[2]}))}))})),Ct.label=3;case 3:return[3,61];case 4:return s=null,e.code==="MEDI"?s=e.as(iS):e.code==="FEDI"?s=e.as(aS):e.code==="AEDI"&&(s=e.as(C5)),s?(o=s.message,u=s.mentionCountChange,o.channelType!==yn.OPEN?[3,6]:[4,this.getChannel(o.channelUrl,!0)]):[3,6];case 5:c=Ct.sent(),h=!1,c.lastPinnedMessage&&c.lastPinnedMessage.messageId===o.messageId&&c.lastPinnedMessage.updatedAt<o.updatedAt&&(c.lastPinnedMessage=o,h=!0,te.of(this._iid).requestDeduplicator.updatePendingResponse(c,Date.now())),gt((function(){return D(Rt,void 0,void 0,(function(){var nt,Te,it,St,bt,gn,ct;return O(this,(function(En){try{for(nt=Fe(this._openChannelHandlers.values()),Te=nt.next();!Te.done;Te=nt.next())it=Te.value,this._openChannelCache.isEnteredChannel(c.url)&&(h&&((gn=it.onPinnedMessageUpdated)===null||gn===void 0||gn.call(it,c),(ct=it.onChannelChanged)===null||ct===void 0||ct.call(it,c)),it.onMessageUpdated&&it.onMessageUpdated(c,o),u>0&&it.onMentionReceived&&it.onMentionReceived(c,o))}catch(ur){St={error:ur}}finally{try{Te&&!Te.done&&(bt=nt.return)&&bt.call(nt)}finally{if(St)throw St.error}}return[2]}))}))})),Ct.label=6;case 6:return[3,61];case 7:return p=e.as(qk),se=p.channelUrl,he=p.channelType,m=p.messageId,he!==yn.OPEN?[3,9]:[4,this.getChannel(se,!0)];case 8:_=Ct.sent(),gt((function(){return D(Rt,void 0,void 0,(function(){var nt,Te,it,St,bt;return O(this,(function(gn){try{for(nt=Fe(this._openChannelHandlers.values()),Te=nt.next();!Te.done;Te=nt.next())it=Te.value,this._openChannelCache.isEnteredChannel(_.url)&&it.onMessageDeleted&&it.onMessageDeleted(_,m)}catch(ct){St={error:ct}}finally{try{Te&&!Te.done&&(bt=nt.return)&&bt.call(nt)}finally{if(St)throw St.error}}return[2]}))}))})),Ct.label=9;case 9:return[3,61];case 10:return b=e.as(S5),se=b.channelUrl,he=b.channelType,C=b.event,he!==yn.OPEN?[3,12]:[4,this.getChannel(se,!0)];case 11:N=Ct.sent(),gt((function(){return D(Rt,void 0,void 0,(function(){var nt,Te,it,St,bt;return O(this,(function(gn){try{for(nt=Fe(this._openChannelHandlers.values()),Te=nt.next();!Te.done;Te=nt.next())it=Te.value,this._openChannelCache.isEnteredChannel(N.url)&&it.onReactionUpdated&&it.onReactionUpdated(N,C)}catch(ct){St={error:ct}}finally{try{Te&&!Te.done&&(bt=nt.return)&&bt.call(nt)}finally{if(St)throw St.error}}return[2]}))}))})),Ct.label=12;case 12:return[3,61];case 13:return(S=e.as(T5).event).channelType!==yn.OPEN?[3,15]:[4,this.getChannel(S.channelUrl,!0)];case 14:M=Ct.sent(),gt((function(){return D(Rt,void 0,void 0,(function(){var nt,Te,it,St,bt;return O(this,(function(gn){try{for(nt=Fe(this._openChannelHandlers.values()),Te=nt.next();!Te.done;Te=nt.next())it=Te.value,this._openChannelCache.isEnteredChannel(M.url)&&it.onThreadInfoUpdated&&it.onThreadInfoUpdated(M,S)}catch(ct){St={error:ct}}finally{try{Te&&!Te.done&&(bt=nt.return)&&bt.call(nt)}finally{if(St)throw St.error}}return[2]}))}))})),Ct.label=15;case 15:return[3,61];case 16:w=e.as(N5).openChannelMemberCounts,U=[],Ct.label=17;case 17:Ct.trys.push([17,22,23,24]),L=Fe(w),P=L.next(),Ct.label=18;case 18:return P.done?[3,21]:(x=P.value,se=x.channelUrl,tt=x.participantCount,H=x.updatedAt,[4,this.getChannelFromCache(se)]);case 19:(F=Ct.sent())&&F._updateParticipantCount(tt,H)&&U.push(F),Ct.label=20;case 20:return P=L.next(),[3,18];case 21:return[3,24];case 22:return Q=Ct.sent(),ir={error:Q},[3,24];case 23:try{P&&!P.done&&(It=L.return)&&It.call(L)}finally{if(ir)throw ir.error}return[7];case 24:return U.length>0?[4,this.upsertChannelsToCache(U)]:[3,26];case 25:$=Ct.sent(),gt((function(){return D(Rt,void 0,void 0,(function(){var nt,Te,it,St,bt;return O(this,(function(gn){try{for(nt=Fe(this._openChannelHandlers.values()),Te=nt.next();!Te.done;Te=nt.next())(it=Te.value).onChannelMemberCountChanged&&it.onChannelMemberCountChanged($)}catch(ct){St={error:ct}}finally{try{Te&&!Te.done&&(bt=nt.return)&&bt.call(nt)}finally{if(St)throw St.error}}return[2]}))}))})),Ct.label=26;case 26:return[3,61];case 27:return q=e.as(A5),X=q.event,V=q.status,se=q.channelUrl,he=q.channelType,se&&he===yn.OPEN?[4,this.getChannel(se,!0)]:[3,29];case 28:ee=Ct.sent(),this._dispatcher.dispatch(new Mw({event:X,source:Se.EVENT_POLL_UPDATED})),gt(V===wP?function(){return D(Rt,void 0,void 0,(function(){var nt,Te,it,St,bt;return O(this,(function(gn){try{for(nt=Fe(this._openChannelHandlers.values()),Te=nt.next();!Te.done;Te=nt.next())(it=Te.value).onPollDeleted&&it.onPollDeleted(ee,X.pollId)}catch(ct){St={error:ct}}finally{try{Te&&!Te.done&&(bt=nt.return)&&bt.call(nt)}finally{if(St)throw St.error}}return[2]}))}))}:function(){return D(Rt,void 0,void 0,(function(){var nt,Te,it,St,bt;return O(this,(function(gn){try{for(nt=Fe(this._openChannelHandlers.values()),Te=nt.next();!Te.done;Te=nt.next())(it=Te.value).onPollUpdated&&it.onPollUpdated(ee,X)}catch(ct){St={error:ct}}finally{try{Te&&!Te.done&&(bt=nt.return)&&bt.call(nt)}finally{if(St)throw St.error}}return[2]}))}))}),Ct.label=29;case 29:return[3,61];case 30:return z=e.as(Lw),ie=z.event,se=z.channelUrl,he=z.channelType,se&&he===yn.OPEN?[4,this.getChannel(se,!0)]:[3,32];case 31:pe=Ct.sent(),this._dispatcher.dispatch(new VS({event:ie,source:Se.EVENT_POLL_VOTED})),gt((function(){return D(Rt,void 0,void 0,(function(){var nt,Te,it,St,bt;return O(this,(function(gn){try{for(nt=Fe(this._openChannelHandlers.values()),Te=nt.next();!Te.done;Te=nt.next())(it=Te.value).onPollVoted&&it.onPollVoted(pe,ie)}catch(ct){St={error:ct}}finally{try{Te&&!Te.done&&(bt=nt.return)&&bt.call(nt)}finally{if(St)throw St.error}}return[2]}))}))})),Ct.label=32;case 32:return[3,61];case 33:if(!(K=e.as(Od).event).isOpenChannelEvent)return[3,60];switch(K.category){case nr.CHANNEL_ENTER:return[3,34];case nr.CHANNEL_EXIT:return[3,36];case nr.CHANNEL_OPERATOR_UPDATE:return[3,38];case nr.USER_CHANNEL_MUTE:case nr.USER_CHANNEL_UNMUTE:return[3,41];case nr.USER_CHANNEL_BAN:case nr.USER_CHANNEL_UNBAN:return[3,43];case nr.CHANNEL_FREEZE:case nr.CHANNEL_UNFREEZE:return[3,45];case nr.CHANNEL_DELETED:return[3,48];case nr.CHANNEL_PROP_CHANGED:return[3,50];case nr.CHANNEL_META_DATA_CHANGED:return[3,52];case nr.CHANNEL_META_COUNTERS_CHANGED:return[3,54];case nr.PINNED_MESSAGE_CHANGED:return[3,56]}return[3,60];case 34:return[4,this.getChannel(K.channelUrl,!0)];case 35:return ce=Ct.sent(),me=e.as(hF),tt=me.participantCount,Le=me.user,ge=ce._updateParticipantCount(tt,K.ts),te.of(this._iid).requestDeduplicator.updatePendingResponse(ce,Date.now()),gt((function(){return D(Rt,void 0,void 0,(function(){return O(this,(function(nt){return this._openChannelHandlers.forEach((function(Te){Te.onUserEntered&&Te.onUserEntered(ce,Le),ge&&Te.onChannelParticipantCountChanged&&Te.onChannelParticipantCountChanged(ce)})),[2]}))}))})),[3,60];case 36:return[4,this.getChannel(K.channelUrl,!0)];case 37:return Ee=Ct.sent(),Ye=e.as(fF),tt=Ye.participantCount,yt=Ye.user,Ht=Ee._updateParticipantCount(tt,K.ts),te.of(this._iid).requestDeduplicator.updatePendingResponse(Ee,Date.now()),gt((function(){return D(Rt,void 0,void 0,(function(){return O(this,(function(nt){return this._openChannelHandlers.forEach((function(Te){Te.onUserExited&&Te.onUserExited(Ee,yt),Ht&&Te.onChannelParticipantCountChanged&&Te.onChannelParticipantCountChanged(Ee)})),[2]}))}))})),[3,60];case 38:return[4,this.getChannel(K.channelUrl,!0)];case 39:return zt=Ct.sent(),Xt=e.as(_5).operators,zt.operators=Xt,te.of(this._iid).requestDeduplicator.updatePendingResponse(zt,Date.now()),[4,this.upsertChannelsToCache([zt])];case 40:return Ct.sent(),gt((function(){return D(Rt,void 0,void 0,(function(){return O(this,(function(nt){return this._openChannelHandlers.forEach((function(Te){Te.onOperatorUpdated&&Te.onOperatorUpdated(zt,Xt)})),[2]}))}))})),[3,60];case 41:return[4,this.getChannel(K.channelUrl,!0)];case 42:return Jt=Ct.sent(),Mt=K.category===nr.USER_CHANNEL_MUTE,jt=e.as(Mt?QP:XP).user,gt((function(){return D(Rt,void 0,void 0,(function(){return O(this,(function(nt){return this._openChannelHandlers.forEach((function(Te){Mt?Te.onUserMuted&&Te.onUserMuted(Jt,jt):Te.onUserUnmuted&&Te.onUserUnmuted(Jt,jt)})),[2]}))}))})),[3,60];case 43:return[4,this.getChannel(K.channelUrl,!0)];case 44:return en=Ct.sent(),Dt=K.category===nr.USER_CHANNEL_BAN,ln=e.as(Dt?ZP:JP).user,gt((function(){return D(Rt,void 0,void 0,(function(){return O(this,(function(nt){return this._openChannelHandlers.forEach((function(Te){Dt?Te.onUserBanned&&Te.onUserBanned(en,ln):Te.onUserUnbanned&&Te.onUserUnbanned(en,ln)})),[2]}))}))})),[3,60];case 45:return[4,this.getChannel(K.channelUrl,!0)];case 46:return Yt=Ct.sent(),st=e.as(e5).freeze,Yt.isFrozen=st,te.of(this._iid).requestDeduplicator.updatePendingResponse(Yt,Date.now()),[4,this.upsertChannelsToCache([Yt])];case 47:return Ct.sent(),gt((function(){return D(Rt,void 0,void 0,(function(){return O(this,(function(nt){return this._openChannelHandlers.forEach((function(Te){st?Te.onChannelFrozen&&Te.onChannelFrozen(Yt):Te.onChannelUnfrozen&&Te.onChannelUnfrozen(Yt)})),[2]}))}))})),[3,60];case 48:return[4,this.removeChannelsFromCache([K.channelUrl])];case 49:return Ct.sent(),gt((function(){return D(Rt,void 0,void 0,(function(){return O(this,(function(nt){return this._openChannelHandlers.forEach((function(Te){Te.onChannelDeleted&&Te.onChannelDeleted(K.channelUrl,yn.OPEN)})),[2]}))}))})),[3,60];case 50:return[4,this.getChannelWithoutCache(K.channelUrl,!0,!1)];case 51:return ft=Ct.sent(),gt((function(){return D(Rt,void 0,void 0,(function(){return O(this,(function(nt){return this._openChannelHandlers.forEach((function(Te){Te.onChannelChanged&&Te.onChannelChanged(ft)})),[2]}))}))})),[3,60];case 52:return[4,this.getChannel(K.channelUrl,!0)];case 53:return un=Ct.sent(),vt=e.as(YP),_t=vt.created,Pt=vt.updated,Et=vt.deleted,_t&&un._upsertCachedMetaData(_t,K.ts),Pt&&un._upsertCachedMetaData(Pt,K.ts),Et&&un._removeFromCachedMetaData(Et,K.ts),(_t||Pt||Et)&&te.of(this._iid).requestDeduplicator.updatePendingResponse(un,Date.now()),gt((function(){return D(Rt,void 0,void 0,(function(){return O(this,(function(nt){return this._openChannelHandlers.forEach((function(Te){_t&&Te.onMetaDataCreated&&Te.onMetaDataCreated(un,_t),Pt&&Te.onMetaDataUpdated&&Te.onMetaDataUpdated(un,Pt),Et&&Te.onMetaDataDeleted&&Te.onMetaDataDeleted(un,Et)})),[2]}))}))})),[3,60];case 54:return[4,this.getChannel(K.channelUrl,!0)];case 55:return Ft=Ct.sent(),vn=e.as(WP),Je=vn.created,Nn=vn.updated,An=vn.deleted,gt((function(){return D(Rt,void 0,void 0,(function(){return O(this,(function(nt){return this._openChannelHandlers.forEach((function(Te){Je&&Te.onMetaCounterCreated&&Te.onMetaCounterCreated(Ft,Je),Nn&&Te.onMetaCounterUpdated&&Te.onMetaCounterUpdated(Ft,Nn),An&&Te.onMetaCounterDeleted&&Te.onMetaCounterDeleted(Ft,An)})),[2]}))}))})),[3,60];case 56:return[4,this.getChannel(K.channelUrl,!0)];case 57:return Mn=Ct.sent(),Zt=e.as(y5),Gt=Zt.pinnedMessageIds,xt=Zt.latestPinnedMessage,(Lt=Zt.ts)>Mn._pinnedMessagesUpdatedAt?(Mn.pinnedMessageIds=Gt,Mn.lastPinnedMessage=xt,Mn._pinnedMessagesUpdatedAt=Lt,te.of(this._iid).requestDeduplicator.updatePendingResponse(Mn,Date.now()),[4,this.upsertChannelsToCache([Mn])]):[3,59];case 58:Ct.sent(),gt((function(){return D(Rt,void 0,void 0,(function(){var nt,Te,it,St,bt;return O(this,(function(gn){try{for(nt=Fe(this._openChannelHandlers.values()),Te=nt.next();!Te.done;Te=nt.next())(it=Te.value).onChannelChanged&&it.onChannelChanged(Mn)}catch(ct){St={error:ct}}finally{try{Te&&!Te.done&&(bt=nt.return)&&bt.call(nt)}finally{if(St)throw St.error}}return[2]}))}))})),gt((function(){return D(Rt,void 0,void 0,(function(){return O(this,(function(nt){return this._openChannelHandlers.forEach((function(Te){Te.onPinnedMessageUpdated&&Te.onPinnedMessageUpdated(Mn)})),[2]}))}))})),Ct.label=59;case 59:return[3,60];case 60:return[3,61];case 61:return[3,63];case 62:if(Cn=Ct.sent(),$a(Cn))throw Cn;return[3,63];case 63:return[2]}}))}))},n.prototype.addHandler=function(e,r){this._openChannelHandlers.set(e,r)},n.prototype.removeHandler=function(e){this._openChannelHandlers.delete(e)},n.prototype.clearHandler=function(){this._openChannelHandlers.clear()},n.prototype.getChannel=function(e,r){return r===void 0&&(r=!1),D(this,void 0,void 0,(function(){var i;return O(this,(function(a){switch(a.label){case 0:Ue(re("string",e)).throw(ae.invalidParameters),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.getChannelFromCache(e)];case 2:return(i=a.sent())?[2,i]:[3,4];case 3:return a.sent(),[3,4];case 4:return[4,this.getChannelWithoutCache(e,r)];case 5:return[2,a.sent()]}}))}))},n.prototype.getChannelWithoutCache=function(e,r,i){return r===void 0&&(r=!1),i===void 0&&(i=!0),D(this,void 0,void 0,(function(){var a,s,o,u,c=this;return O(this,(function(h){switch(h.label){case 0:return Ue(re("string",e)).throw(ae.invalidParameters),a=te.of(this._iid).requestDeduplicator,s=new dae({channelUrl:e,isInternalCall:r}),[4,a.requestGetChannel(s.path,(function(){return c._requestQueue.send(s)}),s.params,i)];case 1:return o=h.sent(),u=o.as(SU).channel,[4,this.upsertChannelsToCache([u])];case 2:return[2,h.sent()[0]]}}))}))},n.prototype.createChannel=function(e){return D(this,void 0,void 0,(function(){var r,i,a,s;return O(this,(function(o){switch(o.label){case 0:return r=Z(Z({},dF),e),Ue((function(u){return hn("string",u.operatorUserIds,!0)&&(re("string",u.coverUrlOrImage,!0)||ra(u.coverUrlOrImage,!0))&&re("string",u.name,!0)&&re("string",u.data,!0)&&re("string",u.customType,!0)&&(re("string",u.channelUrl)&&/^\w+$/.test(u.channelUrl)||u.channelUrl===null||u.channelUrl===void 0)&&re("boolean",u.isEphemeral,!0)})(r)).throw(ae.invalidParameters),i=new hae(r),[4,this._requestQueue.send(i)];case 1:return a=o.sent(),s=a.as(SU).channel,[4,this.upsertChannelsToCache([s])];case 2:return o.sent(),[2,s]}}))}))},n})(E5),TU={name:void 0,coverUrlOrImage:void 0,data:void 0,customType:void 0,operatorUserIds:void 0},pae=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.token,s=e.limit;return(r=t.call(this)||this).method=Ie.GET,r.path="".concat(Np,"/").concat(encodeURIComponent(i),"/participants"),r.params={token:a,limit:s},r}return G(n,t),n})(we),mae=(function(t){function n(e,r){var i=t.call(this,e,r)||this;i.participants=[];var a=r.next,s=r.participants;return i.token=a,i.participants=s.map((function(o){return new j$(e,o)})),i}return G(n,t),n})(xe),gae=(function(t){function n(e,r,i){return t.call(this,e,r,yn.OPEN,i)||this}return G(n,t),n.prototype._validate=function(){return t.prototype._validate.call(this)},n.prototype.next=function(){return D(this,void 0,void 0,(function(){var e,r,i,a,s,o;return O(this,(function(u){switch(u.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=te.of(this._iid).requestQueue,r=new pae(Z(Z({},this),{token:this._token})),[4,e.send(r)]):[3,2]:[3,5];case 1:return i=u.sent(),a=i.as(mae),s=a.participants,o=a.token,this._token=o,this._hasNext=!!o,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw ae.queryInProgress;case 4:return[3,6];case 5:throw ae.invalidParameters;case 6:return[2]}}))}))},n})(Ac),_ae=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.coverUrlOrImage,s=e.name,o=e.data,u=e.customType,c=e.operatorUserIds;return(r=t.call(this)||this).method=Ie.PUT,r.path="".concat(Np,"/").concat(encodeURIComponent(i)),r.params=ze(ht({cover_url:re("string",a)?a:null,cover_file:ra(a)?a:null,name:s,data:o,custom_type:u,operators:c})),r}return G(n,t),n})(we),yae=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.channel=new Ag(e,r),i}return G(n,t),n})(xe),Eae=(function(t){function n(e){var r=this,i=e.channelUrl;return(r=t.call(this)||this).method=Ie.DELETE,r.path="".concat(Np,"/").concat(encodeURIComponent(i)),r}return G(n,t),n})(we);(function(t){function n(e,r){return t.call(this,e,r)||this}G(n,t)})(xe);var Ag=(function(t){function n(e,r){var i,a=this;return(a=t.call(this,e,r)||this)._lastParticipantCountUpdated=0,a.participantCount=0,a.operators=[],a.lastPinnedMessage=null,a._pinnedMessagesUpdatedAt=0,a.channelType=yn.OPEN,a.participantCount=(i=r.participant_count)!==null&&i!==void 0?i:0,a.operators=Array.isArray(r.operators)?r.operators.map((function(s){return new fn(e,s)})):[],a.lastPinnedMessage=r.latest_pinned_message?Da(a._iid,Z({channel_type:a.channelType},r.latest_pinned_message)):null,a}return G(n,t),n.payloadify=function(e,r){r===void 0&&(r=!1);var i=Z(Z({},sS.payloadify(e,r)),{participant_count:e.participantCount,operators:e.operators.map((function(a){return fn.payloadify(a)})),latest_pinned_message:e.lastPinnedMessage?RA(e.lastPinnedMessage):null});return r?i:ze(ht(i))},n.prototype.serialize=function(){return Pg(this)},n.prototype.isOperator=function(e){return e instanceof fn?this.isOperator(e.userId):this.operators.some((function(r){return r.userId===e}))},n.prototype._updateParticipantCount=function(e,r){return r>this._lastParticipantCountUpdated&&(this.participantCount=e,this._lastParticipantCountUpdated=r,!0)},n.prototype.createParticipantListQuery=function(e){return new gae(this._iid,this.url,e)},n.prototype.refresh=function(){return D(this,void 0,void 0,(function(){return O(this,(function(e){switch(e.label){case 0:return[4,pu.of(this._iid).getChannelWithoutCache(this.url)];case 1:return[2,e.sent()]}}))}))},n.prototype.enter=function(){return D(this,void 0,void 0,(function(){var e,r,i,a,s,o;return O(this,(function(u){switch(u.label){case 0:return e=te.of(this._iid).requestQueue,r=new fae({channelUrl:this.url}),[4,e.send(r)];case 1:return i=u.sent(),a=i.as(hF),s=a.participantCount,o=a.ts,this._updateParticipantCount(s,o),pu.of(this._iid).setEnteredToCache(this),[2]}}))}))},n.prototype.exit=function(){return D(this,void 0,void 0,(function(){var e,r,i,a,s,o;return O(this,(function(u){switch(u.label){case 0:return e=te.of(this._iid).requestQueue,r=new vae({channelUrl:this.url}),[4,e.send(r)];case 1:return i=u.sent(),a=i.as(fF),s=a.participantCount,o=a.ts,this._updateParticipantCount(s,o),pu.of(this._iid).setExitedToCache(this),Ki.of(this._iid).fileMessageQueue.cancel(this),[2]}}))}))},n.prototype.updateChannel=function(e){return D(this,void 0,void 0,(function(){var r,i,a,s,o;return O(this,(function(u){switch(u.label){case 0:return r=Z(Z({},TU),e),Ue((function(c){return hn("string",c.operatorUserIds,!0)&&(re("string",c.coverUrlOrImage,!0)||ra(c.coverUrlOrImage,!0))&&re("string",c.name,!0)&&re("string",c.data,!0)&&re("string",c.customType,!0)})(r)).throw(ae.invalidParameters),i=te.of(this._iid).requestQueue,a=new _ae(Z({channelUrl:this.url},r)),[4,i.send(a)];case 1:return s=u.sent(),o=s.as(yae).channel,this._update(o),[4,pu.of(this._iid).upsertChannelsToCache([o])];case 2:return u.sent(),[2,this]}}))}))},n.prototype.updateChannelWithOperatorUserIds=function(e,r,i,a,s){return D(this,void 0,void 0,(function(){var o;return O(this,(function(u){return o=Z(Z({},TU),{name:e,coverUrlOrImage:r,data:i,operatorUserIds:a,customType:s}),[2,this.updateChannel(o)]}))}))},n.prototype.delete=function(){return D(this,void 0,void 0,(function(){var e,r;return O(this,(function(i){switch(i.label){case 0:return e=te.of(this._iid).requestQueue,r=new Eae({channelUrl:this.url}),[4,e.send(r)];case 1:return i.sent(),[4,pu.of(this._iid).removeChannelsFromCache([this.url])];case 2:return i.sent(),[2]}}))}))},n.prototype.updateUserMessage=function(e,r){return D(this,void 0,void 0,(function(){var i,a,s,o=this;return O(this,(function(u){switch(u.label){case 0:return[4,t.prototype.updateUserMessage.call(this,e,r)];case 1:return i=u.sent(),a=!1,s=!1,this.lastPinnedMessage&&this.lastPinnedMessage.messageId===i.messageId&&(this.lastPinnedMessage=i,a=!0,s=!0),a&&pu.of(this._iid).handlers.map((function(c){c.onChannelChanged&&c.onChannelChanged(o)})),s&&pu.of(this._iid).handlers.map((function(c){c.onPinnedMessageUpdated&&c.onPinnedMessageUpdated(o)})),[2,i]}}))}))},n.prototype.updateFileMessage=function(e,r){return D(this,void 0,void 0,(function(){var i,a,s,o=this;return O(this,(function(u){switch(u.label){case 0:return[4,t.prototype.updateFileMessage.call(this,e,r)];case 1:return i=u.sent(),a=!1,s=!1,this.lastPinnedMessage&&this.lastPinnedMessage.messageId===i.messageId&&(this.lastPinnedMessage=i,a=!0,s=!0),a&&pu.of(this._iid).handlers.map((function(c){c.onChannelChanged&&c.onChannelChanged(o)})),s&&pu.of(this._iid).handlers.map((function(c){c.onPinnedMessageUpdated&&c.onPinnedMessageUpdated(o)})),[2,i]}}))}))},n})(sS);(function(t){function n(e){e===void 0&&(e={});var r=t.call(this)||this;return Object.keys(e).forEach((function(i){r.hasOwnProperty(i)&&(r[i]=e[i])})),r}return G(n,t),n})((function(t){function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.onUserEntered=Bt,e.onUserExited=Bt,e.onChannelParticipantCountChanged=Bt,e.onPollUpdated=Bt,e.onPollVoted=Bt,e.onPollDeleted=Bt,e.onPinnedMessageUpdated=Bt,e}return G(n,t),n})(M5));var bae=(function(t){function n(e){var r=this,i=e.token,a=e.limit,s=e.nameKeyword,o=e.urlKeyword,u=e.customTypes,c=e.includeFrozen,h=e.includeMetaData;return(r=t.call(this)||this).method=Ie.GET,r.path=Np,r.params=ze({token:i,limit:a,name_contains:s,url_contains:o,custom_types:u,show_frozen:c,show_metadata:h,show_pinned_messages:!0}),r}return G(n,t),n})(we),Cae=(function(t){function n(e,r){var i=t.call(this,e,r)||this;i.channels=[];var a=r.next,s=r.channels,o=r.ts;return i.token=a,s&&s.length>0&&(i.channels=s.map((function(u){return new Ag(e,u)}))),i.ts=typeof o=="number"?o:null,i}return G(n,t),n})(xe),Sae=(function(t){function n(e,r){var i,a,s,o,u,c=this;return(c=t.call(this,e,r)||this).includeFrozen=!0,c.includeMetaData=!0,c.nameKeyword=null,c.urlKeyword=null,c.customTypes=null,c.includeFrozen=(i=r.includeFrozen)===null||i===void 0||i,c.includeMetaData=(a=r.includeMetaData)===null||a===void 0||a,c.nameKeyword=(s=r.nameKeyword)!==null&&s!==void 0?s:null,c.urlKeyword=(o=r.urlKeyword)!==null&&o!==void 0?o:null,c.customTypes=(u=r.customTypes)!==null&&u!==void 0?u:null,c}return G(n,t),n.prototype._validate=function(){return t.prototype._validate.call(this)&&re("boolean",this.includeFrozen)&&re("boolean",this.includeMetaData)&&re("string",this.nameKeyword,!0)&&re("string",this.urlKeyword,!0)&&hn("string",this.customTypes,!0)},n.prototype.next=function(){return D(this,void 0,void 0,(function(){var e,r,i,a,s,o;return O(this,(function(u){switch(u.label){case 0:return this._validate()?this._isLoading?[3,4]:this._hasNext?(this._isLoading=!0,e=te.of(this._iid).requestQueue,r=new bae(ht(Z(Z({},this),{token:this._token}))),[4,e.send(r)]):[3,3]:[3,6];case 1:return i=u.sent(),a=i.as(Cae),s=a.channels,o=a.token,this._token=o,this._hasNext=!!o,[4,pu.of(this._iid).upsertChannelsToCache(s)];case 2:return u.sent(),this._isLoading=!1,[2,s];case 3:return[2,[]];case 4:throw ae.queryInProgress;case 5:return[3,7];case 6:throw ae.invalidParameters;case 7:return[2]}}))}))},n})(wd),Tae=(function(t){function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.name="openChannel",e}return G(n,t),n.prototype.init=function(e,r){var i=r.sdkState,a=r.dispatcher,s=r.sessionManager,o=r.requestQueue,u=r.logger,c=r.onlineDetector,h=r.cacheContext;t.prototype.init.call(this,e,{sdkState:i,dispatcher:a,sessionManager:s,requestQueue:o,logger:u,onlineDetector:c,cacheContext:h}),this._manager=new pu(e,{sdkState:i,dispatcher:a,requestQueue:o,logger:u,cacheContext:h,sessionManager:s})},n.prototype.createOpenChannelListQuery=function(e){return e===void 0&&(e={}),new Sae(this._iid,e)},n.prototype.addOpenChannelHandler=function(e,r){this._manager.addHandler(e,r)},n.prototype.removeOpenChannelHandler=function(e){this._manager.removeHandler(e)},n.prototype.removeAllOpenChannelHandlers=function(){this._manager.clearHandler()},n.prototype.buildOpenChannelFromSerializedData=function(e){return this._manager.buildOpenChannelFromSerializedData(e)},n.prototype.getChannel=function(e){return D(this,void 0,void 0,(function(){return O(this,(function(r){return[2,this._manager.getChannel(e)]}))}))},n.prototype.getChannelWithoutCache=function(e){return D(this,void 0,void 0,(function(){return O(this,(function(r){return[2,this._manager.getChannelWithoutCache(e)]}))}))},n.prototype.createChannel=function(e){return e===void 0&&(e={}),D(this,void 0,void 0,(function(){return O(this,(function(r){return[2,this._manager.createChannel(e)]}))}))},n.prototype.createChannelWithOperatorUserIds=function(e,r,i,a,s){return D(this,void 0,void 0,(function(){var o;return O(this,(function(u){return(o=Z({},dF)).name=e,o.coverUrlOrImage=r,o.data=i,o.operatorUserIds=a,o.customType=s,[2,this._manager.createChannel(o)]}))}))},n})(GS),tC=function(t,n){return J(J({},t),{stores:J(J({},t.stores),{appInfoStore:J(J({},t.stores.appInfoStore),n)})})},nC=function(t,n){return J(J({},t),{stores:J(J({},t.stores),{sdkStore:J(J({},t.stores.sdkStore),n)})})},yN=function(t,n){return J(J({},t),{stores:J(J({},t.stores),{userStore:J(J({},t.stores.userStore),n)})})};function Nae(t){var n=t.appId,e=t.customApiHost,r=t.customWebSocketHost,i=t.sdkInitParams,a=i===void 0?{}:i,s=Object.assign(a,{appId:n,modules:[new KQ,new Tae],localCacheEnabled:typeof a.localCacheEnabled<"u"?a.localCacheEnabled:!0});return e&&(s.customApiHost=e),r&&(s.customWebSocketHost=r),nZ.init(s)}var EN="3.17.4";function Aae(t,n){var e,r,i=n.logger,a=n.sessionHandler,s=n.isMobile,o=n.customExtensionParams;(e=i.info)===null||e===void 0||e.call(i,"SendbirdProvider | useConnect/setupConnection/setVersion",{version:EN}),t.addExtension("sb_uikit",EN),t.addSendbirdExtensions([{product:bA.UIKIT_CHAT,version:EN,platform:lp?.JS}],{platform:s?$h.MOBILE_WEB:$h.WEB},o),a&&((r=i.info)===null||r===void 0||r.call(i,"SendbirdProvider | useConnect/setupConnection/configureSession",a),t.setSessionHandler(a))}var Mae="No sendbird state value available. Make sure you are rendering `<SendbirdProvider>` at the top of your app.",Zn=function(){var t,n=R.useContext(Yw);if(!n)throw new Error(Mae);var e=jw.useSyncExternalStore(n.subscribe,n.getState),r={initMessageTemplateInfo:R.useCallback(function(c){var h=c.payload;n.setState(function(p){return tC(p,{messageTemplatesInfo:h,waitingTemplateKeysMap:{}})})},[n]),upsertMessageTemplates:R.useCallback(function(c){var h=c.payload,p=e.stores.appInfoStore,m=p.messageTemplatesInfo;if(!m)return e;var _=J({},p.waitingTemplateKeysMap);h.forEach(function(b){var C=b.key,N=b.template;m.templatesMap[C]=N,delete _[C]}),n.setState(function(b){return tC(b,{waitingTemplateKeysMap:_,messageTemplatesInfo:m})})},[n,e.stores.appInfoStore]),upsertWaitingTemplateKeys:R.useCallback(function(c){var h=c.payload,p=e.stores.appInfoStore,m=h.keys,_=h.requestedAt,b=J({},p.waitingTemplateKeysMap);m.forEach(function(C){var N,S;b[C]={erroredMessageIds:(S=(N=b[C])===null||N===void 0?void 0:N.erroredMessageIds)!==null&&S!==void 0?S:[],requestedAt:_}}),n.setState(function(C){return tC(C,{waitingTemplateKeysMap:b})})},[n,e.stores.appInfoStore]),markErrorWaitingTemplateKeys:R.useCallback(function(c){var h=c.payload,p=e.stores.appInfoStore,m=h.keys,_=h.messageId,b=J({},p.waitingTemplateKeysMap);m.forEach(function(C){var N=b[C];N&&N.erroredMessageIds.indexOf(_)===-1&&N.erroredMessageIds.push(_)}),n.setState(function(C){return tC(C,{waitingTemplateKeysMap:b})})},[n,e.stores.appInfoStore])},i={setSdkLoading:R.useCallback(function(c){n.setState(function(h){return nC(h,{initialized:!1,loading:c})})},[n]),sdkError:R.useCallback(function(){n.setState(function(c){return nC(c,{initialized:!1,loading:!1,error:!0})})},[n]),initSdk:R.useCallback(function(c){n.setState(function(h){return nC(h,{sdk:c,initialized:!0,loading:!1,error:!1})})},[n]),resetSdk:R.useCallback(function(){n.setState(function(c){return nC(c,{sdk:{},initialized:!1,loading:!1,error:!1})})},[n])},a={initUser:R.useCallback(function(c){n.setState(function(h){return yN(h,{initialized:!0,loading:!1,user:c})})},[n]),resetUser:R.useCallback(function(){n.setState(function(c){return yN(c,{initialized:!1,loading:!1,user:{}})})},[n]),updateUserInfo:R.useCallback(function(c){n.setState(function(h){return yN(h,{user:c})})},[n])},s=R.useCallback(function(c){return si(void 0,[c],void 0,function(h){var p,m,_=h.logger;return oi(this,function(b){switch(b.label){case 0:return i.setSdkLoading(!0),p=e.stores.sdkStore.sdk,p?.disconnectWebSocket?[4,p.disconnectWebSocket()]:[3,2];case 1:b.sent(),b.label=2;case 2:return i.resetSdk(),a.resetUser(),(m=_.info)===null||m===void 0||m.call(_,"SendbirdProvider | useSendbird/disconnect completed"),[2]}})})},[n,(t=e.stores.sdkStore)===null||t===void 0?void 0:t.sdk,i,a]),o=R.useCallback(function(c){return si(void 0,void 0,void 0,function(){var h,p,m,_,b,C,N,S,M,w,U,L,P,x,H,F,Q,$,q,X,V,ee,z,ie;return oi(this,function(se){switch(se.label){case 0:return h=c.logger,p=c.userId,m=c.appId,_=c.accessToken,b=c.nickname,C=c.profileUrl,N=c.isMobile,S=c.sdkInitParams,M=c.customApiHost,w=c.customWebSocketHost,U=c.customExtensionParams,L=c.eventHandlers,P=c.initializeMessageTemplatesInfo,x=c.configureSession,H=c.initDashboardConfigs,[4,s({logger:h})];case 1:se.sent(),F=Nae({appId:m,customApiHost:M,customWebSocketHost:w,sdkInitParams:S}),Aae(F,{logger:h,isMobile:N,customExtensionParams:U,sessionHandler:x?x(F):void 0}),i.setSdkLoading(!0),se.label=2;case 2:return se.trys.push([2,8,,9]),[4,F.connect(p,_)];case 3:return Q=se.sent(),a.initUser(Q),b||C?[4,F.updateCurrentUserInfo({nickname:b||Q.nickname||"",profileUrl:C||Q.profileUrl})]:[3,5];case 4:se.sent(),se.label=5;case 5:return[4,P?.(F)];case 6:return se.sent(),[4,H?.(F)];case 7:return se.sent(),i.initSdk(F),(V=(X=L?.connection)===null||X===void 0?void 0:X.onConnected)===null||V===void 0||V.call(X,Q),[3,9];case 8:return $=se.sent(),q=$,i.resetSdk(),a.resetUser(),(ee=h.error)===null||ee===void 0||ee.call(h,"SendbirdProvider | useSendbird/connect failed",q),(ie=(z=L?.connection)===null||z===void 0?void 0:z.onFailed)===null||ie===void 0||ie.call(z,q),[3,9];case 9:return[2]}})})},[n,i,a,s]),u=R.useMemo(function(){return J(J(J(J({},r),i),a),{disconnect:s,connect:o})},[r,i,a,s,o]);return{state:e,actions:u}},vF="INITIALIZE_AUDIO_UNIT",eM="RESET_AUDIO_UNIT",pF="SET_CURRENT_PLAYER",mF="ON_VOICE_PLAYER_PLAY",gF="ON_VOICE_PLAYER_PAUSE",_F="ON_CURRENT_TIME_UPDATE",bu={IDLE:"IDLE",PREPARING:"PREPARING",PLAYING:"PLAYING",PAUSED:"PAUSED"},qv=function(){return{audioFile:null,playbackTime:0,duration:1e3,playingStatus:bu.IDLE}},Iae={currentPlayer:null,currentGroupKey:"",audioStorage:{}};function wae(t,n){var e,r,i,a,s,o,u,c,h;switch(n.type){case vF:{var p=n.payload.groupKey,m=!((o=t.audioStorage)===null||o===void 0)&&o[p]?t.audioStorage[p]:qv();return m.playingStatus=bu.PREPARING,J(J({},t),{audioStorage:J(J({},t.audioStorage),(e={},e[p]=m,e))})}case eM:{var p=n.payload.groupKey;return J(J({},t),{audioStorage:J(J({},t.audioStorage),(r={},r[p]=qv(),r))})}case pF:{var _=n.payload,b=_.audioPlayer,p=_.groupKey;return J(J({},t),{currentPlayer:b,currentGroupKey:p})}case mF:{var C=n.payload,p=C.groupKey,N=C.audioFile,m=!((u=t.audioStorage)===null||u===void 0)&&u[p]?t.audioStorage[p]:qv();return m.audioFile=N,m.playingStatus=bu.PLAYING,J(J({},t),{audioStorage:J(J({},t.audioStorage),(i={},i[p]=m,i))})}case gF:{var S=n.payload,p=S.groupKey,M=S.duration,w=S.currentTime,m=!((c=t.audioStorage)===null||c===void 0)&&c[p]?t.audioStorage[p]:qv();return m.playingStatus=bu.PAUSED,M===w&&(m.playbackTime=0),J(J({},t),{audioStorage:J(J({},t.audioStorage),(a={},a[p]=m,a))})}case _F:{var p=n.payload.groupKey,U=t.currentPlayer,w=U.currentTime,M=U.duration,m=!((h=t.audioStorage)===null||h===void 0)&&h[p]?t.audioStorage[p]:qv();return m.playbackTime===m.duration&&m.playingStatus===bu.PAUSED?m.playbackTime=0:w>0&&M>0&&(m.playbackTime=w,m.duration=M),J(J({},t),{audioStorage:J(J({},t.audioStorage),(s={},s[p]=m,s))})}default:return t}}var Rae=function(t,n){return t===void 0&&(t=""),n===void 0&&(n=""),"".concat(t,"-").concat(n)},NU=function(t){return zw(navigator.userAgent)&&t.includes("m4a")?{name:SZ,mimeType:TZ}:{name:Xy,mimeType:tf}},Oae="ALL",bN=function(){},Dae={currentGroupKey:"",currentPlayer:null,audioStorage:{}},yF=R.createContext({play:bN,pause:bN,stop:bN,voicePlayerStore:Dae}),Uae=function(t){var n=t.children,e=R.useReducer(wae,Iae),r=e[0],i=e[1],a=r.currentGroupKey,s=r.currentPlayer,o=r.audioStorage,u=Zn().state,c=u.config,h=c.logger,p=function(b){b===void 0&&(b=""),a.includes(b)&&(h.info("VoicePlayer: Pause playing(by text)."),m(a))},m=function(b){s?b===a?(h.info("VoicePlayer: Pause playing(by group key)."),s.pause()):b===Oae&&(h.info("VoicePlayer: Pause playing(all)."),s.pause()):h.warning("VoicePlayer: No currentPlayer to pause.")},_=function(b){var C=b.groupKey,N=b.audioFile,S=b.audioFileUrl,M=S===void 0?"":S,w=b.audioFileMimeType,U=w===void 0?tf:w;C!==a&&m(a);var L=document.getElementById(wC),P=document.getElementById(KA);L&&P&&L.removeChild(P),h.info("VoicePlayer: Start getting audio file."),new Promise(function(x,H){var F;if(i({type:vF,payload:{groupKey:C}}),N){h.info("VoicePlayer: Use the audioFile instance."),x(N);return}var Q=(F=o?.[C])===null||F===void 0?void 0:F.audioFile;if(Q){h.info("VoicePlayer: Get from the audioStorage."),x(Q);return}fetch(M).then(function($){return $.blob()}).then(function($){var q=new File([$],NU(U).name,{lastModified:new Date().getTime(),type:NU(U).mimeType});x(q),h.info("VoicePlayer: Get the audioFile from URL.")}).catch(H)}).then(function(x){var H,F=document.getElementById(wC);h.info("VoicePlayer: Succeeded getting audio file.",{audioFile:x});var Q=o[C]||qv(),$=new Audio((H=URL?.createObjectURL)===null||H===void 0?void 0:H.call(URL,x));$.id=KA,$.currentTime=Q.playbackTime,$.volume=1,$.loop=!1,$.onplaying=function(){h.info("VoicePlayer: OnPlaying event is called from audioPlayer",{groupKey:C,audioPlayer:$}),i({type:mF,payload:{groupKey:C,audioFile:x}})},$.onpause=function(){h.info("VoicePlayer: OnPause event is called from audioPlayer",{groupKey:C,audioPlayer:$}),i({type:gF,payload:{groupKey:C,duration:$.duration,currentTime:$.currentTime}})},$.ontimeupdate=function(){i({type:_F,payload:{groupKey:C}})},$.onerror=function(q){h.error("VoicePlayer: Failed to load the audioFile on the audio player.",q),i({type:eM,payload:{groupKey:C}})},$.dataset.sbGroupId=C;try{F?.childNodes.forEach(function(q){var X,V,ee=q,z=(X=ee.dataset)===null||X===void 0?void 0:X.sbGroupKey;z!==C&&((V=ee?.pause)===null||V===void 0||V.call(ee),F.removeChild(ee),h.info("VoicePlayer: Removed other player.",{element:ee}))})}finally{$?.play(),F?.appendChild($),i({type:pF,payload:{groupKey:C,audioPlayer:$}}),h.info("VoicePlayer: Succeeded playing audio player.",{groupKey:C,audioPlayer:$})}}).catch(function(x){h.warning("VoicePlayer: Failed loading audio file with URL.",x),i({type:eM,payload:{groupKey:C}})})};return E.createElement(yF.Provider,{value:{play:_,pause:m,stop:p,voicePlayerStore:r}},E.createElement("div",{id:wC,style:{display:"none"}}),n)},xae=function(){return R.useContext(yF)},Lae={en:{MESSAGE_STATUS__YESTERDAY:"Yesterday",CHANNEL__MESSAGE_LIST__NOTIFICATION__NEW_MESSAGE:"new message",CHANNEL__MESSAGE_LIST__NOTIFICATION__NEW_MESSAGE_S:"new messages",CHANNEL__MESSAGE_LIST__NOTIFICATION__UNREAD_MESSAGE:"unread message",CHANNEL__MESSAGE_LIST__NOTIFICATION__UNREAD_MESSAGE_S:"unread messages",CHANNEL__MESSAGE_LIST__NOTIFICATION__ON:"on",CHANNEL_PREVIEW_MOBILE_LEAVE:"Leave channel",CHANNEL_SETTING__HEADER__TITLE:"Channel information",CHANNEL_SETTING__PROFILE__EDIT:"Edit",CHANNEL_SETTING__MEMBERS__TITLE:"Members",CHANNEL_SETTING__MEMBERS__SEE_ALL_MEMBERS:"All members",CHANNEL_SETTING__MEMBERS__INVITE_MEMBER:"Invite users",CHANNEL_SETTING__MEMBERS__YOU:" (You)",CHANNEL_SETTING__MEMBERS__SELECT_TITLE:"Select members",CHANNEL_SETTING__MEMBERS__OPERATOR:"Operator",CHANNEL_SETTING__LEAVE_CHANNEL__TITLE:"Leave channel",CHANNEL_SETTING__OPERATORS__TITLE:"Operators",CHANNEL_SETTING__OPERATORS__TITLE_ALL:"All operators",CHANNEL_SETTING__OPERATORS__TITLE_ADD:"Add operator",CHANNEL_SETTING__OPERATORS__ADD_BUTTON:"Add",CHANNEL_SETTING__MUTED_MEMBERS__TITLE:"Muted members",CHANNEL_SETTING__MUTED_MEMBERS__TITLE_ALL:"All muted members",CHANNEL_SETTING__NO_UNMUTED:"No muted members yet",CHANNEL_SETTING__BANNED_MEMBERS__TITLE:"Banned users",CHANNEL_SETTING__FREEZE_CHANNEL:"Freeze Channel",CHANNEL_SETTING__MODERATION__REGISTER_AS_OPERATOR:"Register as operator",CHANNEL_SETTING__MODERATION__UNREGISTER_OPERATOR:"Unregister operator",CHANNEL_SETTING__MODERATION__MUTE:"Mute",CHANNEL_SETTING__MODERATION__UNMUTE:"Unmute",CHANNEL_SETTING__MODERATION__BAN:"Ban",CHANNEL_SETTING__MODERATION__UNBAN:"Unban",CHANNEL_SETTING__MODERATION__EMPTY_BAN:"No banned members yet",CHANNEL_SETTING__MODERATION__ALL_BAN:"All banned members",OPEN_CHANNEL_CONVERSATION__TITLE_PARTICIPANTS:"participants",OPEN_CHANNEL_CONVERSATION__SELECT_PARTICIPANTS:"Select participants",OPEN_CHANNEL_LIST__TITLE:"Channels",CREATE_OPEN_CHANNEL_LIST__TITLE:"New channel profile",CREATE_OPEN_CHANNEL_LIST__SUBTITLE__IMG_SECTION:"Channel image",CREATE_OPEN_CHANNEL_LIST__SUBTITLE__IMG_UPLOAD:"Upload",CREATE_OPEN_CHANNEL_LIST__SUBTITLE__TEXT_SECTION:"Channel name",CREATE_OPEN_CHANNEL_LIST__SUBTITLE__TEXT_PLACE_HOLDER:"Enter channel name",CREATE_OPEN_CHANNEL_LIST__SUBMIT:"Create",OPEN_CHANNEL_SETTINGS__OPERATOR_TITLE:"Channel Information",OPEN_CHANNEL_SETTINGS__OPERATOR_URL:"URL",OPEN_CHANNEL_SETTINGS__PARTICIPANTS_ACCORDION_TITLE:"Participants",OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_PANEL:"Delete channel",OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_TITLE:"Delete channel?",OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_CONTEXT:"Once deleted, this channel can't be restored.",OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_SUBMIT:"Delete",OPEN_CHANNEL_SETTINGS__OPERATORS_TITLE:"Operators",OPEN_CHANNEL_SETTINGS__OPERATORS__TITLE_ADD:"Add operator",OPEN_CHANNEL_SETTINGS__OPERATORS__TITLE_ALL:"All operators",OPEN_CHANNEL_SETTINGS__MUTED_MEMBERS__TITLE:"Muted participants",OPEN_CHANNEL_SETTINGS__MUTED_MEMBERS__TITLE_ALL:"All muted participants",OPEN_CHANNEL_SETTINGS__MUTED_MEMBERS__NO_ONE:"No muted participants yet",OPEN_CHANNEL_SETTINGS__BANNED_MEMBERS__TITLE:"Banned users",OPEN_CHANNEL_SETTINGS__BANNED_MEMBERS__TITLE_ALL:"All banned users",OPEN_CHANNEL_SETTINGS__BANNED_MEMBERS__NO_ONE:"No banned users yet",OPEN_CHANNEL_SETTINGS__MEMBERS__YOU:" (You)",OPEN_CHANNEL_SETTINGS__MEMBERS__OPERATOR:"Operator",OPEN_CHANNEL_SETTINGS__PARTICIPANTS_TITLE:"Participants",OPEN_CHANNEL_SETTINGS__EMPTY_LIST:"No participants yet",OPEN_CHANNEL_SETTINGS__SEE_ALL:"See all participants",OPEN_CHANNEL_SETTINGS__ALL_PARTICIPANTS_TITLE:"All participants",OPEN_CHANNEL_SETTINGS__NO_TITLE:"(No title)",OPEN_CHANNEL_SETTING__MODERATION__REGISTER_AS_OPERATOR:"Register as operator",OPEN_CHANNEL_SETTING__MODERATION__UNREGISTER_OPERATOR:"Unregister operator",OPEN_CHANNEL_SETTING__MODERATION__MUTE:"Mute",OPEN_CHANNEL_SETTING__MODERATION__UNMUTE:"Unmute",OPEN_CHANNEL_SETTING__MODERATION__BAN:"Ban",OPEN_CHANNEL_SETTING__MODERATION__UNBAN:"Unban",TRYING_TO_CONNECT:"Trying to connect",TYPING_INDICATOR__IS_TYPING:"is typing...",TYPING_INDICATOR__AND:"and",TYPING_INDICATOR__ARE_TYPING:"are typing...",TYPING_INDICATOR__MULTIPLE_TYPING:"Several people are typing...",CHANNEL_FROZEN:"Channel is frozen",PLACE_HOLDER__NO_CHANNEL:"No channels",PLACE_HOLDER__WRONG:"Something went wrong",PLACE_HOLDER__RETRY_TO_CONNECT:"Retry",PLACE_HOLDER__NO_MESSAGES:"No messages",TOOLTIP__AND_YOU:", and you",TOOLTIP__YOU:"you",TOOLTIP__UNKNOWN_USER:"(no name)",UNKNOWN__UNKNOWN_MESSAGE_TYPE:"(Unknown message type)",UNKNOWN__CANNOT_READ_MESSAGE:"Cannot read this message.",UNKNOWN__TEMPLATE_ERROR:"(Template error)",FORM_VERSION_ERROR:"Form type messages are not available in this version.",UNKNOWN__CANNOT_READ_TEMPLATE:"Cannot read this template.",MESSAGE_EDITED:"(edited)",MODAL__DELETE_MESSAGE__TITLE:"Delete this message?",MODAL__CHANNEL_INFORMATION__TITLE:"Edit channel information",MODAL__CHANNEL_INFORMATION__CHANNEL_IMAGE:"Channel image",MODAL__CHANNEL_INFORMATION__UPLOAD:"Upload",MODAL__CHANNEL_INFORMATION__CHANNEL_NAME:"Channel name",MODAL__CHANNEL_INFORMATION__INPUT__PLACE_HOLDER:"Enter name",MODAL__INVITE_MEMBER__TITLE:"Invite member",MODAL__INVITE_MEMBER__SELECTED:"selected",MODAL__CHOOSE_CHANNEL_TYPE__TITLE:"New channel",MODAL__CHOOSE_CHANNEL_TYPE__GROUP:"Group",MODAL__CHOOSE_CHANNEL_TYPE__SUPER_GROUP:"Super group",MODAL__CHOOSE_CHANNEL_TYPE__BROADCAST:"Broadcast",MODAL__CREATE_CHANNEL__TITLE:"New channel",MODAL__CREATE_CHANNEL__GROUP:"Group",MODAL__CREATE_CHANNEL__SUPER:"Super group",MODAL__CREATE_CHANNEL__BROADCAST:"Broadcast",MODAL__CREATE_CHANNEL__SELECTED:"selected",MODAL__LEAVE_CHANNEL__TITLE:"Leave this channel?",MODAL__LEAVE_CHANNEL__FOOTER:"Leave",MODAL__VOICE_MESSAGE_INPUT_DISABLED__TITLE_MUTED:"You're muted by the operator.",MODAL__VOICE_MESSAGE_INPUT_DISABLED__TITLE_FROZEN:"Channel is frozen.",USER_PROFILE__MESSAGE:"Message",USER_PROFILE__USER_ID:"User ID",EDIT_PROFILE__TITLE:"My profile",EDIT_PROFILE__IMAGE_LABEL:"Profile image",EDIT_PROFILE__IMAGE_UPLOAD:"Upload",EDIT_PROFILE__NICKNAME_LABEL:"Nickname",EDIT_PROFILE__NICKNAME_PLACEHOLDER:"Enter your nickname",EDIT_PROFILE__USERID_LABEL:"User ID",EDIT_PROFILE__THEME_LABEL:"Dark theme",MESSAGE_INPUT__PLACE_HOLDER:"Enter message",MESSAGE_INPUT__PLACE_HOLDER__DISABLED:"Chat is unavailable in this channel",MESSAGE_INPUT__PLACE_HOLDER__SUGGESTED_REPLIES:"Please choose one from above",MESSAGE_INPUT__PLACE_HOLDER__MESSAGE_FORM:"Please fill out the message form.",MESSAGE_INPUT__PLACE_HOLDER__FROZEN:"Chat is unavailable in this channel",MESSAGE_INPUT__PLACE_HOLDER__MUTED:"Chat is unavailable because you're muted",MESSAGE_INPUT__PLACE_HOLDER__MUTED_SHORT:"You're muted",MESSAGE_INPUT__QUOTE_REPLY__PLACE_HOLDER:"Reply to message",BUTTON__SUBMIT:"Submit",BUTTON__CANCEL:"Cancel",BUTTON__DELETE:"Delete",BUTTON__SAVE:"Save",BUTTON__CREATE:"Create",BUTTON__INVITE:"Invite",BUTTON__OK:"OK",BADGE__OVER:"+",NO_TITLE:"No title",NO_NAME:"(No name)",NO_MEMBERS:"(No members)",LABEL__OPERATOR:"Operator",MESSAGE_MENU__COPY:"Copy",MESSAGE_MENU__REPLY:"Reply",MESSAGE_MENU__THREAD:"Reply in thread",MESSAGE_MENU__OPEN_IN_CHANNEL:"Open in channel",MESSAGE_MENU__EDIT:"Edit",MESSAGE_MENU__RESEND:"Resend",MESSAGE_MENU__DELETE:"Delete",MESSAGE_MENU__SAVE:"Save",MESSAGE_MENU__MARK_AS_UNREAD:"Mark as unread",CONTEXT_MENU_DROPDOWN__COPY:"Copy",CONTEXT_MENU_DROPDOWN__EDIT:"Edit",CONTEXT_MENU_DROPDOWN__RESEND:"Resend",CONTEXT_MENU_DROPDOWN__DELETE:"Delete",CONTEXT_MENU_DROPDOWN__SAVE:"Save",SEARCH:"Search",SEARCH_IN_CHANNEL:"Search in channel",SEARCH_IN:"Search in",SEARCHING:"Searching for messages...",NO_SEARCHED_MESSAGE:"No results found.",QUOTE_MESSAGE_INPUT__REPLY_TO:"Reply to",QUOTE_MESSAGE_INPUT__FILE_TYPE_IMAGE:"Photo",QUOTE_MESSAGE_INPUT__FILE_TYPE_GIF:"GIF",QUOTE_MESSAGE_INPUT__FILE_TYPE__VIDEO:"Video",QUOTED_MESSAGE__REPLIED_TO:"replied to",QUOTED_MESSAGE__CURRENT_USER:"You",QUOTED_MESSAGE__UNAVAILABLE:"Message unavailable",THREAD__HEADER_TITLE:"Thread",CHANNEL__THREAD_REPLY:"reply",CHANNEL__THREAD_REPLIES:"replies",CHANNEL__THREAD_OVER_MAX:"99+",THREAD__THREAD_REPLY:"reply",THREAD__THREAD_REPLIES:"replies",THREAD__INPUT__REPLY_TO_THREAD:"Reply to thread",THREAD__INPUT__REPLY_IN_THREAD:"Reply in thread",MENTION_NAME__NO_NAME:"(No name)",MENTION_COUNT__OVER_LIMIT:"You can mention up to %d times at a time.",UI__FILE_VIEWER__UNSUPPORT:"Unsupported message",VOICE_RECORDING_PERMISSION_DENIED:`You cannot record the voice since
        voice recording is not permitted in your device system setting`,VOICE_MESSAGE:"Voice Message",CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_GIF:"GIF",CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_PHOTO:"Photo",CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_VIDEO:"Video",CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_AUDIO:"Audio",CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_VOICE_MESSAGE:"Voice message",CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_GENERAL:"File",CHANNEL_PREVIEW_LAST_MESSAGE_TEMPLATE_MESSAGE:"Message",DATE_FORMAT__MESSAGE_LIST__NOTIFICATION__UNREAD_SINCE:"p 'on' MMM dd",DATE_FORMAT__MESSAGE_LIST__DATE_SEPARATOR:"MMMM dd, yyyy",DATE_FORMAT__THREAD_LIST__DATE_SEPARATOR:"MMM dd, yyyy",DATE_FORMAT__MESSAGE_CREATED_AT:"p",DATE_FORMAT__UNREAD_SINCE:"p MMM dd",DATE_FORMAT__LAST_MESSAGE_CREATED_AT__TODAY:"p",DATE_FORMAT__LAST_MESSAGE_CREATED_AT__THIS_YEAR:"MMM d",DATE_FORMAT__LAST_MESSAGE_CREATED_AT__PREVIOUS_YEAR:"yyyy/M/d",FILE_UPLOAD_NOTIFICATION__COUNT_LIMIT:"Up to %d files can be attached.",FILE_UPLOAD_NOTIFICATION__SIZE_LIMIT:"The maximum size per file is %d MB.",FEEDBACK_LIKE:"Like",FEEDBACK_DISLIKE:"Dislike",EDIT_COMMENT:"Edit comment",REMOVE_FEEDBACK:"Remove Feedback",FEEDBACK_MODAL_TITLE:"Provide additional feedback (optional)",FEEDBACK_CONTENT_PLACEHOLDER:"Leave a comment",BUTTON__REMOVE_FEEDBACK:"Remove feedback",FEEDBACK_FAILED_SUBMIT:"Couldnt submit. Try again.",FEEDBACK_FAILED_SAVE:"Couldnt save. Try again.",FEEDBACK_FAILED_DELETE:"Couldnt delete. Try again.",FORM_ITEM_REQUIRED:"This field is required",FORM_ITEM_INVALID:"Please check the value",FORM_ITEM_OPTIONAL_EMPTY:"No Response"}},JS=function(t){return t===void 0&&(t="en"),Lae[t]},kae={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Pae=function(n,e,r){var i,a=kae[n];return typeof a=="string"?i=a:e===1?i=a.one:i=a.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+i:i+" ago":i};function CN(t){return function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=n.width?String(n.width):t.defaultWidth,r=t.formats[e]||t.formats[t.defaultWidth];return r}}var Fae={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Bae={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Hae={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Gae={date:CN({formats:Fae,defaultWidth:"full"}),time:CN({formats:Bae,defaultWidth:"full"}),dateTime:CN({formats:Hae,defaultWidth:"full"})},Vae={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},zae=function(n,e,r,i){return Vae[n]};function z0(t){return function(n,e){var r=e!=null&&e.context?String(e.context):"standalone",i;if(r==="formatting"&&t.formattingValues){var a=t.defaultFormattingWidth||t.defaultWidth,s=e!=null&&e.width?String(e.width):a;i=t.formattingValues[s]||t.formattingValues[a]}else{var o=t.defaultWidth,u=e!=null&&e.width?String(e.width):t.defaultWidth;i=t.values[u]||t.values[o]}var c=t.argumentCallback?t.argumentCallback(n):n;return i[c]}}var jae={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},qae={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},$ae={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Kae={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Yae={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Wae={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Qae=function(n,e){var r=Number(n),i=r%100;if(i>20||i<10)switch(i%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Xae={ordinalNumber:Qae,era:z0({values:jae,defaultWidth:"wide"}),quarter:z0({values:qae,defaultWidth:"wide",argumentCallback:function(n){return n-1}}),month:z0({values:$ae,defaultWidth:"wide"}),day:z0({values:Kae,defaultWidth:"wide"}),dayPeriod:z0({values:Yae,defaultWidth:"wide",formattingValues:Wae,defaultFormattingWidth:"wide"})};function j0(t){return function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=n.match(i);if(!a)return null;var s=a[0],o=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(o)?Jae(o,function(p){return p.test(s)}):Zae(o,function(p){return p.test(s)}),c;c=t.valueCallback?t.valueCallback(u):u,c=e.valueCallback?e.valueCallback(c):c;var h=n.slice(s.length);return{value:c,rest:h}}}function Zae(t,n){for(var e in t)if(t.hasOwnProperty(e)&&n(t[e]))return e}function Jae(t,n){for(var e=0;e<t.length;e++)if(n(t[e]))return e}function ese(t){return function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.match(t.matchPattern);if(!r)return null;var i=r[0],a=n.match(t.parsePattern);if(!a)return null;var s=t.valueCallback?t.valueCallback(a[0]):a[0];s=e.valueCallback?e.valueCallback(s):s;var o=n.slice(i.length);return{value:s,rest:o}}}var tse=/^(\d+)(th|st|nd|rd)?/i,nse=/\d+/i,rse={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},ise={any:[/^b/i,/^(a|c)/i]},ase={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},sse={any:[/1/i,/2/i,/3/i,/4/i]},ose={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},lse={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},use={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},cse={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},dse={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},hse={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},fse={ordinalNumber:ese({matchPattern:tse,parsePattern:nse,valueCallback:function(n){return parseInt(n,10)}}),era:j0({matchPatterns:rse,defaultMatchWidth:"wide",parsePatterns:ise,defaultParseWidth:"any"}),quarter:j0({matchPatterns:ase,defaultMatchWidth:"wide",parsePatterns:sse,defaultParseWidth:"any",valueCallback:function(n){return n+1}}),month:j0({matchPatterns:ose,defaultMatchWidth:"wide",parsePatterns:lse,defaultParseWidth:"any"}),day:j0({matchPatterns:use,defaultMatchWidth:"wide",parsePatterns:cse,defaultParseWidth:"any"}),dayPeriod:j0({matchPatterns:dse,defaultMatchWidth:"any",parsePatterns:hse,defaultParseWidth:"any"})},EF={code:"en-US",formatDistance:Pae,formatLong:Gae,formatRelative:zae,localize:Xae,match:fse,options:{weekStartsOn:0,firstWeekContainsDate:1}},bF={stringSet:JS("en"),dateLocale:EF},gi=E.createContext(bF),vse=function(t){var n=t.children;return E.createElement(gi.Provider,{value:J(J({},bF),t)},n)},Un=function(){var t=E.useContext(gi);if(!t)throw new Error("`useLocalization` hook must be used within `SendbirdProvider` that includes `LocalizationProvider`.");return t},Mr=function(){},jg=function(t){var n={};return Object.entries(t).forEach(function(e){var r=e[0],i=e[1];i!=null&&(n[r]=i)}),n};function TE(t){var n=t;n&&(!n.startsWith("http://")&&!n.startsWith("https://")&&(n="https://"+n),window.open(n,"_blank","noopener,noreferrer"))}function Hn(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")}var pse=!1,CF="sendbird--mobile-mode",SF=E.createContext({breakpoint:pse,isMobile:!1}),AU=function(){try{var t=document.querySelector("body");t?.classList.add(CF)}catch{}},MU=function(){try{var t=document.querySelector("body");t?.classList.remove(CF)}catch{}},mse=function(t){var n=t.children,e=t.logger,r=t?.breakpoint||!1,i=R.useState(!1),a=i[0],s=i[1];return R.useEffect(function(){var o,u=function(){var c;if(typeof r=="boolean")s(r),r?AU():MU();else{var h=window.matchMedia("(max-width: ".concat(r,")"));(c=e?.info)===null||c===void 0||c.call(e,"MediaQueryProvider: Screensize updated to ".concat(r)),h.matches?(s(!0),AU()):(s(!1),MU())}};return u(),window.addEventListener("resize",u),(o=e?.info)===null||o===void 0||o.call(e,"MediaQueryProvider: addEventListener",{updateSize:u}),function(){var c;window.removeEventListener("resize",u),(c=e?.info)===null||c===void 0||c.call(e,"MediaQueryProvider: removeEventListener",{updateSize:u})}},[r]),E.createElement(SF.Provider,{value:{breakpoint:r,isMobile:a}},n)},Ea=function(){return E.useContext(SF)},Su=E.forwardRef(function(t,n){var e=t.className,r=e===void 0?"":e,i=t.children,a=t.disabled,s=a===void 0?!1:a,o=t.width,u=o===void 0?"56px":o,c=t.height,h=c===void 0?"56px":c,p=t.type,m=p===void 0?"button":p,_=t.style,b=_===void 0?{}:_,C=t.onBlur,N=C===void 0?function(){}:C,S=t.onClick,M=S===void 0?function(){}:S,w=t.testID,U=R.useState(!1),L=U[0],P=U[1];return E.createElement("button",{"data-testid":w,className:Xe(Xe([],Array.isArray(r)?r:[r],!0),["sendbird-iconbutton",L?"sendbird-iconbutton--pressed":""],!1).join(" "),disabled:s,ref:n,type:m,style:J(J({},b),{height:h,width:u}),onClick:function(x){s||(P(!0),M?.(x))},onBlur:function(x){P(!1),N?.(x)}},E.createElement("span",{className:"sendbird-iconbutton__inner"},i))}),jo={H_1:"H_1",H_2:"H_2",SUBTITLE_1:"SUBTITLE_1",SUBTITLE_2:"SUBTITLE_2",BODY_1:"BODY_1",BODY_2:"BODY_2",BUTTON_1:"BUTTON_1",BUTTON_2:"BUTTON_2",BUTTON_3:"BUTTON_3",CAPTION_1:"CAPTION_1",CAPTION_2:"CAPTION_2",CAPTION_3:"CAPTION_3"},qo={ONBACKGROUND_1:"ONBACKGROUND_1",ONBACKGROUND_2:"ONBACKGROUND_2",ONBACKGROUND_3:"ONBACKGROUND_3",ONBACKGROUND_4:"ONBACKGROUND_4",ONCONTENT_1:"ONCONTENT_1",ONCONTENT_2:"ONCONTENT_2",ONCONTENT_3:"ONCONTENT_3",ONCONTENT_INVERSE_1:"ONCONTENT_INVERSE_1",ONCONTENT_INVERSE_3:"ONCONTENT_INVERSE_3",PRIMARY:"PRIMARY",ERROR:"ERROR",SECONDARY_3:"SECONDARY_3"};function gse(t){switch(t){case jo.H_1:return"sendbird-label--h-1";case jo.H_2:return"sendbird-label--h-2";case jo.SUBTITLE_1:return"sendbird-label--subtitle-1";case jo.SUBTITLE_2:return"sendbird-label--subtitle-2";case jo.BODY_1:return"sendbird-label--body-1";case jo.BODY_2:return"sendbird-label--body-2";case jo.BUTTON_1:return"sendbird-label--button-1";case jo.BUTTON_2:return"sendbird-label--button-2";case jo.BUTTON_3:return"sendbird-label--button-3";case jo.CAPTION_1:return"sendbird-label--caption-1";case jo.CAPTION_2:return"sendbird-label--caption-2";case jo.CAPTION_3:return"sendbird-label--caption-3";default:return""}}function TF(t){switch(t){case qo.ONBACKGROUND_1:return"sendbird-label--color-onbackground-1";case qo.ONBACKGROUND_2:return"sendbird-label--color-onbackground-2";case qo.ONBACKGROUND_3:return"sendbird-label--color-onbackground-3";case qo.ONBACKGROUND_4:return"sendbird-label--color-onbackground-4";case qo.ONCONTENT_1:return"sendbird-label--color-oncontent-1";case qo.ONCONTENT_2:return"sendbird-label--color-oncontent-2";case qo.ONCONTENT_3:return"sendbird-label--color-oncontent-3";case qo.ONCONTENT_INVERSE_1:return"sendbird-label--color-oncontent-inverse-1";case qo.ONCONTENT_INVERSE_3:return"sendbird-label--color-oncontent-inverse-3";case qo.PRIMARY:return"sendbird-label--color-primary";case qo.ERROR:return"sendbird-label--color-error";case qo.SECONDARY_3:return"sendbird-label--color-secondary-3";default:return""}}var $e=R.forwardRef(function(t,n){var e=t.className,r=e===void 0?[]:e,i=t.type,a=t.color,s=t.children,o=s===void 0?null:s,u=t.testID;return E.createElement("span",{className:Xe(Xe([],Array.isArray(r)?r:[r],!0),["sendbird-label",gse(i),TF(a)],!1).join(" "),ref:n,"data-testid":u},o)}),Ge=jo,De=qo,Ww=JS("en"),mi;(function(t){t.PRIMARY="PRIMARY",t.SECONDARY="SECONDARY",t.DANGER="DANGER",t.DISABLED="DISABLED",t.WARNING="WARNING"})(mi||(mi={}));var of;(function(t){t.BIG="BIG",t.SMALL="SMALL"})(of||(of={}));function _se(t){switch(t){case mi.PRIMARY:return"sendbird-button--primary";case mi.SECONDARY:return"sendbird-button--secondary";case mi.DANGER:return"sendbird-button--danger";case mi.DISABLED:return"sendbird-button--disabled";case mi.WARNING:return"sendbird-button--warning";default:return""}}function yse(t){switch(t){case of.BIG:return"sendbird-button--big";case of.SMALL:return"sendbird-button--small";default:return""}}function Tu(t){var n=t.className,e=t.type,r=e===void 0?mi.PRIMARY:e,i=t.size,a=i===void 0?of.BIG:i,s=t.children,o=s===void 0?"Button":s,u=t.disabled,c=u===void 0?!1:u,h=t.onClick,p=h===void 0?function(){}:h,m=t.labelType,_=m===void 0?Ge.BUTTON_1:m,b=t.labelColor,C=b===void 0?De.ONCONTENT_1:b,N=Xe(Xe([],Array.isArray(n)?n:[n],!0),["sendbird-button",c?"sendbird-button__disabled":"",_se(r),yse(a)],!1).join(" ");return E.createElement("button",{className:N,type:"button",onClick:p,disabled:c},E.createElement($e,{className:"sendbird-button__text",type:_,color:C},o))}var Ve={ADD:"ADD",ARROW_LEFT:"ARROW_LEFT",ATTACH:"ATTACH",AUDIO_ON_LINED:"AUDIO_ON_LINED",BAN:"BAN",BROADCAST:"BROADCAST",CAMERA:"CAMERA",CHANNELS:"CHANNELS",CHAT:"CHAT",CHAT_FILLED:"CHAT_FILLED",CHEVRON_DOWN:"CHEVRON_DOWN",CHEVRON_RIGHT:"CHEVRON_RIGHT",CLOSE:"CLOSE",COLLAPSE:"COLLAPSE",COPY:"COPY",CREATE:"CREATE",DELETE:"DELETE",DISCONNECTED:"DISCONNECTED",DOCUMENT:"DOCUMENT",DONE:"DONE",DONE_ALL:"DONE_ALL",DOWNLOAD:"DOWNLOAD",EDIT:"EDIT",EMOJI_MORE:"EMOJI_MORE",ERROR:"ERROR",EXPAND:"EXPAND",FILE_AUDIO:"FILE_AUDIO",FILE_DOCUMENT:"FILE_DOCUMENT",FREEZE:"FREEZE",GIF:"GIF",INFO:"INFO",LEAVE:"LEAVE",MARK_AS_UNREAD:"MARK_AS_UNREAD",MEMBERS:"MEMBERS",MESSAGE:"MESSAGE",MODERATIONS:"MODERATIONS",MORE:"MORE",MUTE:"MUTE",NOTIFICATIONS:"NOTIFICATIONS",NOTIFICATIONS_OFF_FILLED:"NOTIFICATIONS_OFF_FILLED",OPERATOR:"OPERATOR",PHOTO:"PHOTO",PLAY:"PLAY",PLUS:"PLUS",QUESTION:"QUESTION",REFRESH:"REFRESH",REPLY:"REPLY",REMOVE:"REMOVE",SEARCH:"SEARCH",SEND:"SEND",SETTINGS_FILLED:"SETTINGS_FILLED",SLIDE_LEFT:"SLIDE_LEFT",SPINNER:"SPINNER",SUPERGROUP:"SUPERGROUP",THREAD:"THREAD",THUMBNAIL_NONE:"THUMBNAIL_NONE",TOGGLE_OFF:"TOGGLE_OFF",TOGGLE_ON:"TOGGLE_ON",USER:"USER",FEEDBACK_LIKE:"FEEDBACK_LIKE",FEEDBACK_DISLIKE:"FEEDBACK_DISLIKE",FLOATING_BUTTON_CLOSE:"FLOATING_BUTTON_CLOSE"},ua={DEFAULT:"DEFAULT",PRIMARY:"PRIMARY",PRIMARY_2:"PRIMARY_2",SECONDARY:"SECONDARY",SECONDARY_2:"SECONDARY_2",CONTENT:"CONTENT",CONTENT_INVERSE:"CONTENT_INVERSE",CONTENT_INVERSE_3:"CONTENT_INVERSE_3",WHITE:"WHITE",GRAY:"GRAY",THUMBNAIL_ICON:"THUMBNAIL_ICON",SENT:"SENT",READ:"READ",ON_BACKGROUND_1:"ON_BACKGROUND_1",ON_BACKGROUND_2:"ON_BACKGROUND_2",ON_BACKGROUND_3:"ON_BACKGROUND_3",ON_BACKGROUND_4:"ON_BACKGROUND_4",BACKGROUND_3:"BACKGROUND_3",ERROR:"ERROR"};function Ese(t){switch(t){case ua.PRIMARY:return"sendbird-icon-color--primary";case ua.PRIMARY_2:return"sendbird-icon-color--primary-2";case ua.SECONDARY:return"sendbird-icon-color--secondary";case ua.SECONDARY_2:return"sendbird-icon-color--secondary-2";case ua.CONTENT:return"sendbird-icon-color--content";case ua.CONTENT_INVERSE:return"sendbird-icon-color--content-inverse";case ua.CONTENT_INVERSE_3:return"sendbird-icon-color--content-inverse-3";case ua.WHITE:return"sendbird-icon-color--white";case ua.GRAY:return"sendbird-icon-color--gray";case ua.THUMBNAIL_ICON:return"sendbird-icon-color--thumbnail-icon";case ua.SENT:return"sendbird-icon-color--sent";case ua.READ:return"sendbird-icon-color--read";case ua.ON_BACKGROUND_1:return"sendbird-icon-color--on-background-1";case ua.ON_BACKGROUND_2:return"sendbird-icon-color--on-background-2";case ua.ON_BACKGROUND_3:return"sendbird-icon-color--on-background-3";case ua.ON_BACKGROUND_4:return"sendbird-icon-color--on-background-4";case ua.BACKGROUND_3:return"sendbird-icon-color--background-3";case ua.ERROR:return"sendbird-icon-color--error";default:return""}}function bse(t){switch(t){case Ve.ADD:return"sendbird-icon-add";case Ve.ARROW_LEFT:return"sendbird-icon-arrow-left";case Ve.ATTACH:return"sendbird-icon-attach";case Ve.AUDIO_ON_LINED:return"sendbird-icon-audio-on-lined";case Ve.BAN:return"sendbird-icon-ban";case Ve.BROADCAST:return"sendbird-icon-broadcast";case Ve.CAMERA:return"sendbird-icon-camera";case Ve.CHANNELS:return"sendbird-icon-channels";case Ve.CHAT:return"sendbird-icon-chat";case Ve.CHAT_FILLED:return"sendbird-icon-chat-filled";case Ve.CHEVRON_DOWN:return"sendbird-icon-chevron-down";case Ve.CHEVRON_RIGHT:return"sendbird-icon-chevron-right";case Ve.CLOSE:return"sendbird-icon-close";case Ve.COLLAPSE:return"sendbird-icon-collapse";case Ve.COPY:return"sendbird-icon-copy";case Ve.CREATE:return"sendbird-icon-create";case Ve.DELETE:return"sendbird-icon-delete";case Ve.DISCONNECTED:return"sendbird-icon-disconnected";case Ve.DOCUMENT:return"sendbird-icon-document";case Ve.DONE:return"sendbird-icon-done";case Ve.DONE_ALL:return"sendbird-icon-done-all";case Ve.DOWNLOAD:return"sendbird-icon-down-load";case Ve.EDIT:return"sendbird-icon-edit";case Ve.EMOJI_MORE:return"sendbird-icon-emoji-more";case Ve.ERROR:return"sendbird-icon-error";case Ve.EXPAND:return"sendbird-icon-expand";case Ve.FILE_AUDIO:return"sendbird-icon-file-audio";case Ve.FILE_DOCUMENT:return"sendbird-icon-file-document";case Ve.FREEZE:return"sendbird-icon-freeze";case Ve.GIF:return"sendbird-icon-gif";case Ve.INFO:return"sendbird-icon-info";case Ve.LEAVE:return"sendbird-icon-leave";case Ve.MARK_AS_UNREAD:return"sendbird-icon-mark-as-unread";case Ve.MEMBERS:return"sendbird-icon-members";case Ve.MESSAGE:return"sendbird-icon-message";case Ve.MODERATIONS:return"sendbird-icon-moderations";case Ve.MORE:return"sendbird-icon-more";case Ve.MUTE:return"sendbird-icon-mute";case Ve.NOTIFICATIONS:return"sendbird-icon-notifications";case Ve.NOTIFICATIONS_OFF_FILLED:return"sendbird-icon-notifications-off-filled";case Ve.OPERATOR:return"sendbird-icon-operator";case Ve.PHOTO:return"sendbird-icon-photo";case Ve.PLAY:return"sendbird-icon-play";case Ve.PLUS:return"sendbird-iconn-plus";case Ve.QUESTION:return"sendbird-icon-question";case Ve.REFRESH:return"sendbird-icon-refresh";case Ve.REMOVE:return"sendbird-icon-remove";case Ve.REPLY:return"sendbird-icon-reply";case Ve.SEARCH:return"sendbird-icon-search";case Ve.SEND:return"sendbird-icon-send";case Ve.SETTINGS_FILLED:return"sendbird-icon-settings-filled";case Ve.SPINNER:return"sendbird-icon-spinner";case Ve.SUPERGROUP:return"sendbird-icon-supergroup";case Ve.THREAD:return"sendbird-icon-thread";case Ve.THUMBNAIL_NONE:return"sendbird-icon-thumbnail-none";case Ve.TOGGLE_OFF:return"sendbird-icon-toggle-off";case Ve.TOGGLE_ON:return"sendbird-icon-toggle-on";case Ve.USER:return"sendbird-icon-user";case Ve.FEEDBACK_LIKE:return"sendbird-icon-feedback-like";case Ve.FEEDBACK_DISLIKE:return"sendbird-icon-feedback-dislike";default:return"sendbird-icon-unknown"}}var IU;function tM(){return tM=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},tM.apply(null,arguments)}const Cse=t=>R.createElement("svg",tM({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),IU||(IU=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M50.667 5.333a8 8 0 0 1 8 8v37.334a8 8 0 0 1-8 8H13.333a8 8 0 0 1-8-8V13.333a8 8 0 0 1 8-8zm0 5.334H13.333a2.667 2.667 0 0 0-2.666 2.666v37.334a2.667 2.667 0 0 0 2.666 2.666h37.334a2.667 2.667 0 0 0 2.666-2.666V13.333a2.667 2.667 0 0 0-2.666-2.666m-18.667 8a2.667 2.667 0 0 1 2.649 2.355l.018.311v8h8a2.667 2.667 0 0 1 .311 5.316l-.311.018h-8v8a2.667 2.667 0 0 1-5.316.311l-.018-.311v-8h-8a2.667 2.667 0 0 1-.311-5.316l.311-.018h8v-8A2.667 2.667 0 0 1 32 18.667",className:"icon-add_svg__fill"})));var wU;function nM(){return nM=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},nM.apply(null,arguments)}const Sse=t=>R.createElement("svg",nM({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),wU||(wU=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M33.886 8.781a2.67 2.67 0 0 1 .221 3.52l-.221.251-16.78 16.781H56a2.667 2.667 0 0 1 .311 5.316l-.311.018-38.895-.001 16.78 16.782a2.666 2.666 0 0 1 .222 3.52l-.221.251a2.67 2.67 0 0 1-3.52.222l-.252-.222L8.781 33.886a2.67 2.67 0 0 1-.222-3.52l.222-.252L30.114 8.781a2.67 2.67 0 0 1 3.772 0",className:"icon-arrow-left_svg__fill"})));var RU;function rM(){return rM=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},rM.apply(null,arguments)}const Tse=t=>R.createElement("svg",rM({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),RU||(RU=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"m55.334 28.926-24.506 23.34c-5.222 4.973-13.74 4.973-18.962 0-5.149-4.903-5.149-12.797 0-17.7l24.506-23.34c3.138-2.988 8.278-2.988 11.416 0 3.064 2.919 3.064 7.594 0 10.513L23.255 45.077c-1.055 1.005-2.815 1.005-3.87.001-.98-.933-.98-2.39 0-3.325l22.64-21.535a2.667 2.667 0 0 0-3.676-3.864L15.709 37.89a7.58 7.58 0 0 0-.001 11.05c3.113 2.966 8.11 2.966 11.224 0l24.533-23.338c5.272-5.021 5.272-13.217 0-18.238-5.197-4.95-13.573-4.95-18.77 0L8.187 30.704c-7.356 7.005-7.356 18.419 0 25.424 7.281 6.935 19.036 6.935 26.318 0l24.506-23.34a2.666 2.666 0 1 0-3.678-3.862z",className:"icon-attach_svg__fill"})));var OU,DU;function iM(){return iM=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},iM.apply(null,arguments)}const Nse=t=>R.createElement("svg",iM({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 64 64"},t),OU||(OU=R.createElement("g",{clipPath:"url(#icon-audio-on-lined_svg__a)"},R.createElement("path",{d:"M32 0C26.11 0 21.333 4.776 21.333 10.667V32c0 5.891 4.776 10.667 10.667 10.667S42.667 37.89 42.667 32V10.667C42.667 4.776 37.89 0 32 0m-5.333 10.667a5.333 5.333 0 0 1 10.666 0V32a5.333 5.333 0 0 1-10.666 0z",className:"icon-audio-on-lined_svg__fill",clipRule:"evenodd"}),R.createElement("path",{d:"M16 26.667a2.667 2.667 0 1 0-5.333 0V32c0 10.879 8.143 19.856 18.666 21.168v5.499h-8a2.667 2.667 0 0 0 0 5.333h21.334a2.667 2.667 0 1 0 0-5.333h-8v-5.499C45.19 51.856 53.333 42.88 53.333 32v-5.333a2.667 2.667 0 1 0-5.333 0V32c0 8.837-7.163 16-16 16s-16-7.163-16-16z",className:"icon-audio-on-lined_svg__fill"}))),DU||(DU=R.createElement("defs",null,R.createElement("clipPath",{id:"icon-audio-on-lined_svg__a"},R.createElement("path",{fill:"#fff",d:"M0 0h64v64H0z"})))));var UU;function aM(){return aM=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},aM.apply(null,arguments)}const Ase=t=>R.createElement("svg",aM({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),UU||(UU=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333 2.667 48.2 2.667 32 15.8 2.667 32 2.667M32 8C18.745 8 8 18.745 8 32s10.745 24 24 24 24-10.745 24-24S45.255 8 32 8m12.333 21.333a1 1 0 0 1 1 1v3.334a1 1 0 0 1-1 1H19.667a1 1 0 0 1-1-1v-3.334a1 1 0 0 1 1-1z",className:"icon-ban_svg__fill"})));var xU;function sM(){return sM=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},sM.apply(null,arguments)}const Mse=t=>R.createElement("svg",sM({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),xU||(xU=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M58.545 5.498q.121.389.122.796v46.079a2.666 2.666 0 0 1-3.462 2.546l-17.951-5.61c-.645 5.273-5.14 9.358-10.587 9.358C20.776 58.667 16 53.89 16 48v-5.334h-5.333a8 8 0 0 1-7.997-7.75l-.003-.25V24a8 8 0 0 1 8-8H16L55.205 3.749a2.665 2.665 0 0 1 3.34 1.75zM21.333 44.587V48a5.333 5.333 0 0 0 10.652.398L32 47.92zm32-34.667-32 9.997v18.83l32 9.997zM16 21.333h-5.333a2.67 2.67 0 0 0-2.65 2.356L8 24v10.667a2.667 2.667 0 0 0 2.667 2.666H16z",className:"icon-broadcast_svg__fill"})));var LU;function oM(){return oM=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},oM.apply(null,arguments)}const Ise=t=>R.createElement("svg",oM({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),LU||(LU=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M40 5.333c.892 0 1.724.446 2.219 1.188l4.541 6.812H56a8 8 0 0 1 7.986 7.53l.014.47v29.334a8 8 0 0 1-8 8H8a8 8 0 0 1-8-8V21.333a8 8 0 0 1 8-8h9.237l4.544-6.812a2.67 2.67 0 0 1 1.888-1.167l.331-.02zm-1.43 5.334H25.428l-4.542 6.812a2.66 2.66 0 0 1-1.887 1.167l-.331.02H8a2.67 2.67 0 0 0-2.667 2.667v29.334A2.667 2.667 0 0 0 8 53.333h48a2.667 2.667 0 0 0 2.667-2.666V21.333A2.667 2.667 0 0 0 56 18.667H45.333a2.67 2.67 0 0 1-2.218-1.188zM32 21.333c7.364 0 13.333 5.97 13.333 13.334S39.363 48 32 48s-13.333-5.97-13.333-13.333S24.637 21.333 32 21.333m0 5.334a8 8 0 1 0 0 16 8 8 0 0 0 0-16",className:"icon-camera_svg__fill"})));var kU;function lM(){return lM=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},lM.apply(null,arguments)}const wse=t=>R.createElement("svg",lM({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),kU||(kU=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"m42.65 5.333.311.017a2.666 2.666 0 0 1 2.373 2.633l-.017.311-1.45 13.04h9.466a2.667 2.667 0 0 1 .311 5.315l-.31.018H43.271l-1.184 10.666h11.245a2.667 2.667 0 0 1 .312 5.316l-.31.018H41.495l-1.512 13.627a2.667 2.667 0 0 1-5.318-.277l.017-.311 1.448-13.04H25.496l-1.512 13.628a2.667 2.667 0 0 1-5.318-.277l.017-.311 1.448-13.04h-9.464a2.667 2.667 0 0 1-.311-5.315l.31-.018h10.057l1.186-10.667H10.667a2.667 2.667 0 0 1-.311-5.315l.31-.018h11.835l1.515-13.627a2.67 2.67 0 0 1 2.634-2.373l.311.017a2.666 2.666 0 0 1 2.373 2.633l-.017.311-1.45 13.04H38.5l1.515-13.628a2.67 2.67 0 0 1 2.634-2.373zm-5.927 32 1.186-10.667H27.272l-1.184 10.667z",className:"icon-channels_svg__fill"})));var PU;function uM(){return uM=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},uM.apply(null,arguments)}const Rse=t=>R.createElement("svg",uM({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),PU||(PU=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58q-8.947 2.868-12.504 1.981-4.198-1.047-1.657-3.663 1.757-2.094 2.928-5.234.934-2.502-.737-7A29.15 29.15 0 0 1 2.666 32C2.667 15.8 15.8 2.667 32 2.667M32 8C18.745 8 8 18.745 8 32c0 3.5.747 6.88 2.168 9.978l.405.837.137.271.106.285c1.517 4.085 1.89 7.622.734 10.72l-.382.972-.192.433.235-.05a62 62 0 0 0 4.886-1.363l1.721-.568 2.04-.696 1.95.917A23.9 23.9 0 0 0 32 56c13.255 0 24-10.745 24-24S45.255 8 32 8",className:"icon-chat_svg__fill"})));var FU;function cM(){return cM=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},cM.apply(null,arguments)}const Ose=t=>R.createElement("svg",cM({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),FU||(FU=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58q-8.947 2.868-12.504 1.981-4.198-1.047-1.657-3.663 1.757-2.094 2.928-5.234.934-2.502-.737-7A29.15 29.15 0 0 1 2.666 32C2.667 15.8 15.8 2.667 32 2.667",className:"icon-chat-filled_svg__fill"})));var BU;function dM(){return dM=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},dM.apply(null,arguments)}const Dse=t=>R.createElement("svg",dM({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),BU||(BU=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M16.121 21.879a3 3 0 0 0-4.242 0 3 3 0 0 0 0 4.242l18 18a3 3 0 0 0 4.242 0l18-18a3 3 0 0 0 0-4.242 3 3 0 0 0-4.242 0L32 37.757z",className:"icon-chevron-down_svg__fill"})));var HU;function hM(){return hM=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},hM.apply(null,arguments)}const Use=t=>R.createElement("svg",hM({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),HU||(HU=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M22.114 46.114a2.668 2.668 0 0 0 3.772 3.772l16-16a2.67 2.67 0 0 0 0-3.772l-16-16a2.668 2.668 0 0 0-3.772 3.772L36.23 32z",className:"icon-chevron-right_svg__fill"})));var GU;function fM(){return fM=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},fM.apply(null,arguments)}const xse=t=>R.createElement("svg",fM({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),GU||(GU=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M52.552 11.448a2.666 2.666 0 0 1 .222 3.52l-.222.251-16.781 16.78 16.781 16.782a2.665 2.665 0 0 1 0 3.771 2.666 2.666 0 0 1-3.52.222l-.251-.222L32 35.771 15.219 52.552a2.665 2.665 0 0 1-3.771 0 2.666 2.666 0 0 1-.222-3.52l.222-.251L28.228 32l-16.78-16.781a2.665 2.665 0 0 1 0-3.771 2.666 2.666 0 0 1 3.52-.222l.251.222 16.78 16.78 16.782-16.78a2.665 2.665 0 0 1 3.771 0",className:"icon-close_svg__fill"})));var VU;function vM(){return vM=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},vM.apply(null,arguments)}const Lse=t=>R.createElement("svg",vM({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),VU||(VU=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M16 8a2.667 2.667 0 0 0-2.649 2.356l-.018.31v42.667a2.667 2.667 0 0 0 5.316.311l.018-.31V34.666h25.56l-6.113 6.114a2.67 2.67 0 0 0-.221 3.52l.221.251a2.666 2.666 0 0 0 3.52.222l.252-.222 10.666-10.666a2.666 2.666 0 0 0 .222-3.52l-.222-.252-10.666-10.666a2.666 2.666 0 0 0-3.993 3.52l.221.251 6.113 6.114h-25.56V10.667A2.667 2.667 0 0 0 16 8",className:"icon-collapse_svg__fill"})));var zU;function pM(){return pM=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},pM.apply(null,arguments)}const kse=t=>R.createElement("svg",pM({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),zU||(zU=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M53.333 21.333a8 8 0 0 1 8 8v24a8 8 0 0 1-8 8h-24a8 8 0 0 1-8-8v-24a8 8 0 0 1 8-8zm0 5.334h-24a2.667 2.667 0 0 0-2.666 2.666v24A2.667 2.667 0 0 0 29.333 56h24A2.667 2.667 0 0 0 56 53.333v-24a2.667 2.667 0 0 0-2.667-2.666m-18.666-24a8 8 0 0 1 7.986 7.53l.014.47v2.666a2.667 2.667 0 0 1-5.316.311l-.018-.31v-2.667a2.67 2.67 0 0 0-2.355-2.65L34.667 8h-24a2.67 2.67 0 0 0-2.65 2.356l-.017.31v24a2.67 2.67 0 0 0 2.356 2.65l.31.017h2.667a2.667 2.667 0 0 1 .311 5.316l-.31.018h-2.667a8 8 0 0 1-7.987-7.53l-.013-.47v-24c0-4.26 3.33-7.743 7.53-7.987l.47-.013z",className:"icon-copy_svg__fill"})));var jU;function mM(){return mM=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},mM.apply(null,arguments)}const Pse=t=>R.createElement("svg",mM({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),jU||(jU=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58q-8.947 2.868-12.504 1.981-4.198-1.047-1.657-3.663 1.757-2.094 2.928-5.234.934-2.502-.737-7A29.15 29.15 0 0 1 2.666 32C2.667 15.8 15.8 2.667 32 2.667M32 8C18.745 8 8 18.745 8 32c0 3.5.747 6.88 2.168 9.978l.405.837.137.271.106.285c1.517 4.085 1.89 7.622.734 10.72l-.382.972-.192.433.235-.05a62 62 0 0 0 4.886-1.363l1.721-.568 2.04-.696 1.95.917A23.9 23.9 0 0 0 32 56c13.255 0 24-10.745 24-24S45.255 8 32 8m2.667 16v5.333H40c3.556 0 3.556 5.334 0 5.334h-5.333V40c0 3.556-5.334 3.556-5.334 0v-5.333H24c-3.556 0-3.556-5.334 0-5.334h5.333V24c0-3.556 5.334-3.556 5.334 0",className:"icon-create_svg__fill"})));var qU;function gM(){return gM=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},gM.apply(null,arguments)}const Fse=t=>R.createElement("svg",gM({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),qU||(qU=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M37.333 2.667c4.26 0 7.743 3.33 7.987 7.53l.013.47v2.666H56a2.667 2.667 0 0 1 .311 5.316l-.311.018h-2.668l.001 34.666c0 4.26-3.33 7.743-7.53 7.987l-.47.013H18.667a8 8 0 0 1-7.987-7.53l-.013-.47V18.667H8a2.667 2.667 0 0 1-.311-5.316L8 13.333h10.666v-2.666a8 8 0 0 1 7.53-7.987l.47-.013zm10.666 16H16v34.666a2.67 2.67 0 0 0 2.356 2.65l.31.017h26.667a2.67 2.67 0 0 0 2.65-2.356l.017-.31zm-21.332 8a2.667 2.667 0 0 1 2.648 2.355l.018.311v16a2.667 2.667 0 0 1-5.316.311l-.017-.31v-16a2.667 2.667 0 0 1 2.667-2.667m10.666 0a2.67 2.67 0 0 1 2.65 2.355l.017.311v16a2.667 2.667 0 0 1-5.315.311l-.018-.31v-16a2.667 2.667 0 0 1 2.666-2.667m0-18.667H26.667a2.67 2.67 0 0 0-2.65 2.356l-.017.31v2.667h16v-2.666a2.67 2.67 0 0 0-2.356-2.65L37.334 8z",className:"icon-delete_svg__fill"})));var $U;function _M(){return _M=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},_M.apply(null,arguments)}const Bse=t=>R.createElement("svg",_M({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),$U||($U=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"m54.534 6.069-.248.217-9.736 9.735-.04.04-9.573 9.573q-.226.178-.405.404L6.286 54.286a2.423 2.423 0 0 0 3.18 3.645l.248-.217 13.374-13.373a2.42 2.42 0 0 0 1.88-.401 12.12 12.12 0 0 1 14.04 0 2.424 2.424 0 1 0 2.808-3.952 16.95 16.95 0 0 0-11.303-3.072l6.743-6.744a24.1 24.1 0 0 1 10.159 5.021 2.424 2.424 0 0 0 3.11-3.719 29 29 0 0 0-9.34-5.23l5.633-5.634a36.2 36.2 0 0 1 9.225 5.934 2.425 2.425 0 0 0 3.211-3.633 41 41 0 0 0-8.796-5.941l7.256-7.256a2.423 2.423 0 0 0-3.18-3.645m-35.04 21.474a29 29 0 0 0-6.032 3.942 2.424 2.424 0 0 0 3.137 3.697 24 24 0 0 1 5.022-3.282 2.425 2.425 0 0 0-2.127-4.357M4.748 22.909a2.424 2.424 0 0 0 3.207 3.636 36.36 36.36 0 0 1 26.978-8.977 2.424 2.424 0 0 0 .389-4.832A41.2 41.2 0 0 0 4.748 22.909",className:"icon-disconnected_svg__fill"})));var KU;function yM(){return yM=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},yM.apply(null,arguments)}const Hse=t=>R.createElement("svg",yM({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),KU||(KU=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M37.333 2.667a3 3 0 0 1 .274.014l.085.01.058.008q.07.01.141.026l.029.007q.075.016.146.037l.034.01q.357.107.663.303l.034.022q.053.034.104.072l.057.043q.045.033.085.068.091.075.176.16l-.126-.117q.075.065.143.135L55.21 19.438q.07.07.134.143l.035.04q.04.047.076.096l.04.054.07.1.024.038c.16.253.279.535.347.836l.01.048q.014.064.024.13l.006.048.007.051.004.041q.014.135.014.27v32a8 8 0 0 1-8 8H16a8 8 0 0 1-8-8V10.667a8 8 0 0 1 8-8zM34.666 8H16a2.667 2.667 0 0 0-2.667 2.667v42.666A2.667 2.667 0 0 0 16 56h32a2.667 2.667 0 0 0 2.667-2.667L50.666 24H37.333a2.667 2.667 0 0 1-2.648-2.356l-.018-.31zm12.227 10.667-6.894-6.894.001 6.894z",className:"icon-document_svg__fill"})));var YU;function EM(){return EM=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},EM.apply(null,arguments)}const Gse=t=>R.createElement("svg",EM({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),YU||(YU=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M12.552 31.448a2.665 2.665 0 1 0-3.771 3.771l13.333 13.333a2.666 2.666 0 0 0 3.772 0L55.219 19.22a2.667 2.667 0 0 0-3.771-3.771L24 42.895z",className:"icon-done_svg__fill"})));var WU;function bM(){return bM=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},bM.apply(null,arguments)}const Vse=t=>R.createElement("svg",bM({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),WU||(WU=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M5.886 31.448 19.219 44.78a2.667 2.667 0 0 1-3.771 3.771L2.114 35.22a2.667 2.667 0 0 1 3.772-3.771zm52.228-16a2.666 2.666 0 1 1 3.772 3.771L32.552 48.552a2.665 2.665 0 0 1-3.771 0L15.448 35.22a2.665 2.665 0 0 1 0-3.771 2.665 2.665 0 0 1 3.771 0l11.448 11.447zm-9.562 0a2.665 2.665 0 0 1 0 3.771L32.556 35.215a2.665 2.665 0 0 1-3.771 0 2.664 2.664 0 0 1 0-3.77L44.78 15.447a2.665 2.665 0 0 1 3.771 0z",className:"icon-done-all_svg__fill"})));var QU;function CM(){return CM=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},CM.apply(null,arguments)}const zse=t=>R.createElement("svg",CM({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),QU||(QU=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M56 42.667a2.667 2.667 0 0 1 2.649 2.355l.018.311v8c0 4.26-3.33 7.743-7.53 7.987l-.47.013H13.333a8 8 0 0 1-7.986-7.53l-.014-.47v-8a2.667 2.667 0 0 1 5.316-.311l.018.311v8a2.67 2.67 0 0 0 2.355 2.65l.311.017h37.334a2.667 2.667 0 0 0 2.648-2.356l.018-.31v-8A2.667 2.667 0 0 1 56 42.667m-36.552-8.781a2.666 2.666 0 0 1 3.52-3.993l.251.221 6.114 6.114V5.333a2.667 2.667 0 0 1 5.316-.311l.018.311v30.894l6.114-6.113a2.67 2.67 0 0 1 3.52-.221l.251.221a2.666 2.666 0 0 1 .222 3.52l-.222.252-10.658 10.657a2 2 0 0 1-.135.128l.127-.119a3 3 0 0 1-.195.176l-.056.045-.086.064-.056.04-.086.056-.06.036-.081.046-.079.04a3 3 0 0 1-.14.065l-.09.036q-.034.014-.067.025l-.09.03-.063.019q-.064.018-.13.034l-.013.003-.144.028-.064.01q-.045.008-.092.012l-.084.008-.103.006-.069.002h-.095q-.042 0-.082-.003l.139.003q-.126 0-.249-.011l-.061-.007-.092-.012-.09-.015-.118-.025-.04-.01a3 3 0 0 1-.34-.11l-.015-.006q-.074-.03-.145-.063l-.042-.02L30.71 45l-.067-.039q-.045-.026-.087-.054l-.062-.041q-.045-.03-.088-.063l-.04-.03-.008-.007a3 3 0 0 1-.251-.223z",className:"icon-download_svg__fill"})));var XU;function SM(){return SM=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},SM.apply(null,arguments)}const jse=t=>R.createElement("svg",SM({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 65 65"},t),XU||(XU=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M56 56a2.667 2.667 0 0 1 .311 5.315l-.311.018H8a2.667 2.667 0 0 1-.311-5.316L8 56zM35.448 3.448a2.665 2.665 0 0 1 3.771 0l10.667 10.666a2.67 2.67 0 0 1 0 3.772L20.552 47.219c-.5.5-1.178.781-1.885.781H8a2.667 2.667 0 0 1-2.667-2.667V34.667c0-.708.281-1.386.781-1.886zm1.885 5.659L10.667 35.77v6.896h6.89L44.227 16z",className:"icon-edit_svg__fill"})));var ZU;function TM(){return TM=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},TM.apply(null,arguments)}const qse=t=>R.createElement("svg",TM({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),ZU||(ZU=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32.097 3.22c2.65 0 5.255.357 7.763 1.054a2.134 2.134 0 0 1-1.144 4.111 24.7 24.7 0 0 0-6.619-.899c-13.603 0-24.63 11.027-24.63 24.63s11.027 24.63 24.63 24.63 24.63-11.027 24.63-24.63c0-2.227-.295-4.413-.87-6.518a2.13 2.13 0 0 1 1.494-2.62 2.13 2.13 0 0 1 2.62 1.494 29 29 0 0 1 1.023 7.644c0 15.96-12.938 28.897-28.897 28.897-15.96 0-28.897-12.937-28.897-28.897S16.138 3.22 32.097 3.22m10.705 34.792a2.133 2.133 0 0 1 2.024 2.808c-1.873 5.623-6.937 9.488-12.729 9.488s-10.856-3.865-12.73-9.488a2.134 2.134 0 0 1 1.875-2.803l.15-.005zm-3.477 4.266H24.867l.294.382c1.539 1.887 3.718 3.113 6.115 3.342l.314.024.507.015c2.617 0 5.037-1.188 6.743-3.151l.193-.23zM21.392 21.954c1.087 0 1.985.814 2.116 1.866l.017.267v5.353a2.133 2.133 0 0 1-4.25.268l-.017-.268v-5.353c0-1.178.955-2.133 2.134-2.133m21.41 0c1.088 0 1.985.814 2.117 1.866l.017.267v5.353a2.133 2.133 0 0 1-4.25.268l-.017-.268v-5.353c0-1.178.955-2.133 2.133-2.133M54.853 0a.8.8 0 0 1 .8.8v7.786h7.76a.8.8 0 0 1 .8.8v2.667a.8.8 0 0 1-.8.8h-7.76v7.758a.8.8 0 0 1-.8.8h-2.666a.8.8 0 0 1-.8-.8v-7.758h-7.785a.8.8 0 0 1-.8-.8V9.387a.8.8 0 0 1 .8-.8l7.784-.001V.8a.8.8 0 0 1 .8-.8z",className:"icon-emoji-more_svg__fill"})));var JU;function NM(){return NM=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},NM.apply(null,arguments)}const $se=t=>R.createElement("svg",NM({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),JU||(JU=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 5.06a8 8 0 0 1 6.561 3.424l.287.439 22.608 37.744a8 8 0 0 1 .022 7.962 8 8 0 0 1-6.356 4.014l-.535.024H9.384a8 8 0 0 1-6.862-4.038 8.01 8.01 0 0 1-.226-7.493l.27-.506L25.16 8.91A8 8 0 0 1 32 5.06m0 5.333c-.816 0-1.58.372-2.076.99l-.196.28-22.565 37.67a2.67 2.67 0 0 0 1.909 3.973l.341.027h45.144a2.67 2.67 0 0 0 2.45-3.659l-.148-.304L34.28 11.676A2.67 2.67 0 0 0 32 10.393m0 32.274A2.667 2.667 0 1 1 32 48a2.667 2.667 0 0 1 0-5.333m0-21.334a2.667 2.667 0 0 1 2.649 2.356l.018.311v10.667a2.667 2.667 0 0 1-5.316.311l-.018-.311V24A2.667 2.667 0 0 1 32 21.333",className:"icon-error_svg__fill"})));var ex;function AM(){return AM=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},AM.apply(null,arguments)}const Kse=t=>R.createElement("svg",AM({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),ex||(ex=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M48 8a2.667 2.667 0 0 1 2.649 2.356l.018.31V32l-.001.027v21.306a2.667 2.667 0 0 1-5.315.311l-.018-.31V34.665H19.772l6.114 6.115a2.67 2.67 0 0 1 .221 3.52l-.221.251a2.666 2.666 0 0 1-3.52.222l-.252-.222-10.666-10.666a2.666 2.666 0 0 1-.222-3.52l.222-.252 10.666-10.666a2.666 2.666 0 0 1 3.993 3.52l-.221.251-6.113 6.114h25.56V10.667A2.667 2.667 0 0 1 48 8",className:"icon-expand_svg__fill"})));var tx;function MM(){return MM=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},MM.apply(null,arguments)}const Yse=t=>R.createElement("svg",MM({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),tx||(tx=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M30.52 12.51c1.685-1.226 4.139-.103 4.139 1.893v35.194c0 1.996-2.454 3.119-4.138 1.893l-12.45-9.909H7.898c-1.416 0-2.564-1.074-2.564-2.399V24.818c0-1.325 1.148-2.4 2.564-2.4h10.175zm20.427.163c10.293 10.667 10.293 27.987 0 38.654a2.137 2.137 0 0 1-3.156-.047c-.86-.942-.84-2.448.044-3.364 8.49-8.799 8.49-23.033 0-31.832-.884-.916-.904-2.422-.044-3.364a2.137 2.137 0 0 1 3.156-.047m-8.492 8.799c5.597 5.8 5.597 15.231 0 21.031a2.136 2.136 0 0 1-3.156-.046c-.86-.942-.84-2.448.044-3.364 3.794-3.932 3.794-10.279 0-14.211-.884-.916-.904-2.422-.044-3.363a2.136 2.136 0 0 1 3.156-.047",className:"icon-file-audio_svg__fill"})));var nx;function IM(){return IM=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},IM.apply(null,arguments)}const Wse=t=>R.createElement("svg",IM({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),nx||(nx=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M39.414 6.4a2.4 2.4 0 0 1 1.71.701l12.642 12.75c.407.41.634.953.634 1.516v29.765c0 3.542-4.342 6.468-8 6.468H16.16c-3.658 0-6.4-2.926-6.4-6.468L9.6 12.868c0-3.542 2.902-6.468 6.56-6.468zm3.331 35.173-21.49.027-.147.005c-1.066.08-1.908 1.014-1.908 2.155 0 1.193.92 2.16 2.055 2.16l21.49-.027.147-.005c1.066-.08 1.908-1.014 1.908-2.155 0-1.193-.92-2.16-2.055-2.16m0-8.533-21.49.027-.147.005c-1.066.08-1.908 1.014-1.908 2.155 0 1.193.92 2.16 2.055 2.16l21.49-.027.147-.005c1.066-.08 1.908-1.014 1.908-2.155 0-1.193-.92-2.16-2.055-2.16m-11.807-8.507h-9.6l-.153.006a2.15 2.15 0 0 0-1.985 2.154c0 1.193.957 2.16 2.138 2.16h9.6l.152-.005a2.15 2.15 0 0 0 1.985-2.155c0-1.193-.957-2.16-2.137-2.16",className:"icon-file-document_svg__fill"})));var rx;function wM(){return wM=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},wM.apply(null,arguments)}const Qse=t=>R.createElement("svg",wM({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),rx||(rx=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"m41.636 3.226.251.222a2.67 2.67 0 0 1 .222 3.52l-.222.251-7.219 7.218V27.38l11.209-6.472 2.643-9.86a2.667 2.667 0 0 1 5.218 1.051l-.067.329-2.237 8.35 8.352 2.24a2.67 2.67 0 0 1 1.952 2.938l-.067.328a2.67 2.67 0 0 1-2.937 1.952l-.329-.066-9.861-2.643L37.334 32l11.209 6.47 9.862-2.64.329-.067a2.67 2.67 0 0 1 2.937 1.952l.067.328a2.67 2.67 0 0 1-1.952 2.938l-8.353 2.237 2.238 8.353.067.329a2.666 2.666 0 0 1-5.218 1.052l-2.643-9.861-11.209-6.472v12.944l7.219 7.218a2.667 2.667 0 0 1-3.52 3.993l-.251-.222L32 54.437l-6.114 6.115a2.666 2.666 0 0 1-3.52.222l-.251-.222a2.666 2.666 0 0 1-.222-3.52l.222-.251 7.218-7.22V36.62l-11.209 6.47-2.642 9.863a2.666 2.666 0 0 1-5.218-1.052l.067-.329 2.236-8.351-8.35-2.24a2.665 2.665 0 0 1-1.953-2.937l.067-.328a2.665 2.665 0 0 1 2.937-1.952l.329.066 9.861 2.642L26.667 32l-11.209-6.472-9.86 2.643-.329.066a2.665 2.665 0 0 1-2.937-1.952l-.067-.328a2.67 2.67 0 0 1 1.952-2.938l8.35-2.239-2.235-8.351-.067-.329a2.667 2.667 0 0 1 5.218-1.052l2.642 9.862 11.209 6.47V14.439L22.116 7.22a2.665 2.665 0 0 1 0-3.771 2.666 2.666 0 0 1 3.52-.222l.251.222 6.114 6.112 6.115-6.112a2.666 2.666 0 0 1 3.52-.222z",className:"icon-freeze_svg__fill"})));var ix;function RM(){return RM=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},RM.apply(null,arguments)}const Xse=t=>R.createElement("svg",RM({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),ix||(ix=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M16.664 45.333q3.233 0 5.89-.953 2.658-.954 4.113-2.683V31.34h-10.29v3.94h4.902v4.474q-1.292 1.284-4.327 1.283-3.017 0-4.58-2.085-1.561-2.085-1.562-6.168v-1.657q.018-4.047 1.455-6.097t4.184-2.05q2.155 0 3.385 1.034t1.59 3.262h5.243q-.486-4.206-3.107-6.408t-7.273-2.201q-3.34 0-5.827 1.506t-3.807 4.35q-1.32 2.843-1.32 6.728v1.765q.036 3.78 1.428 6.578 1.392 2.797 3.95 4.269 2.56 1.47 5.953 1.47m20.67 0V18.667H32v26.666h5.333zm10.396 0V34.436h9.721v-4.432H47.73v-6.887h10.937v-4.45h-16v26.666z",className:"icon-gif_svg__fill"})));var ax;function OM(){return OM=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},OM.apply(null,arguments)}const Zse=t=>R.createElement("svg",OM({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),ax||(ax=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333 2.667 48.2 2.667 32 15.8 2.667 32 2.667M32 8C18.745 8 8 18.745 8 32s10.745 24 24 24 24-10.745 24-24S45.255 8 32 8m1.667 21.333a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1h-3.334a1 1 0 0 1-1-1v-14a1 1 0 0 1 1-1zm-1.667-8a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334",className:"icon-info_svg__fill"})));var sx;function DM(){return DM=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},DM.apply(null,arguments)}const Jse=t=>R.createElement("svg",DM({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),sx||(sx=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 5.333a2.667 2.667 0 0 1 .311 5.316l-.311.018H10.667a2.67 2.67 0 0 0-2.65 2.355L8 13.333v37.334a2.667 2.667 0 0 0 2.356 2.648l.31.018H32a2.667 2.667 0 0 1 .311 5.316l-.311.018H10.667a8 8 0 0 1-7.987-7.53l-.013-.47V13.333a8 8 0 0 1 7.53-7.986l.47-.014zm17.634 13.893.252.222 10.666 10.666a2.666 2.666 0 0 1 .222 3.52l-.222.252-10.666 10.666a2.666 2.666 0 0 1-3.993-3.52l.221-.251 4.78-4.782L20 36a2.667 2.667 0 0 1-.311-5.315l.311-.018h33.56l-7.446-7.448a2.67 2.67 0 0 1-.221-3.52l.221-.251a2.666 2.666 0 0 1 3.52-.222",className:"icon-leave_svg__fill"})));var ox;function UM(){return UM=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},UM.apply(null,arguments)}const eoe=t=>R.createElement("svg",UM({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),ox||(ox=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M34.667 37.333c7.17 0 13.018 5.66 13.32 12.755l.013.579V56a2.667 2.667 0 0 1-5.315.311L42.667 56v-5.333c0-4.26-3.33-7.743-7.53-7.987l-.47-.013H13.333a8 8 0 0 0-7.986 7.53l-.014.47V56a2.667 2.667 0 0 1-5.316.311L0 56v-5.333c0-7.17 5.66-13.019 12.755-13.321l.578-.013zM54 37.765a13.33 13.33 0 0 1 9.986 12.297l.014.605V56a2.667 2.667 0 0 1-5.315.311L58.667 56v-5.331a8 8 0 0 0-6-7.74A2.667 2.667 0 1 1 54 37.765M24 5.333c7.364 0 13.333 5.97 13.333 13.334S31.363 32 24 32s-13.333-5.97-13.333-13.333S16.637 5.333 24 5.333m19.328.43a13.333 13.333 0 0 1 0 25.834 2.667 2.667 0 1 1-1.323-5.167 8 8 0 0 0 0-15.5 2.667 2.667 0 1 1 1.323-5.167M24 10.667a8 8 0 1 0 0 16 8 8 0 0 0 0-16",className:"icon-members_svg__fill"})));var lx;function xM(){return xM=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},xM.apply(null,arguments)}const toe=t=>R.createElement("svg",xM({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),lx||(lx=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58q-8.947 2.868-12.504 1.981-4.198-1.047-1.657-3.663 1.757-2.094 2.928-5.234.934-2.502-.737-7A29.15 29.15 0 0 1 2.666 32C2.667 15.8 15.8 2.667 32 2.667M32 8C18.745 8 8 18.745 8 32c0 3.5.747 6.88 2.168 9.978l.405.837.137.271.106.285c1.517 4.085 1.89 7.622.734 10.72l-.382.972-.192.433.235-.05a62 62 0 0 0 4.886-1.363l1.721-.568 2.04-.696 1.95.917A23.9 23.9 0 0 0 32 56c13.255 0 24-10.745 24-24S45.255 8 32 8M18.667 29.333a2.667 2.667 0 1 1-.001 5.333 2.667 2.667 0 0 1 .001-5.333m13.333 0a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334m13.333 0a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334",className:"icon-message_svg__fill"})));var ux;function LM(){return LM=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},LM.apply(null,arguments)}const noe=t=>R.createElement("svg",LM({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),ux||(ux=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M18.667 34.667a2.667 2.667 0 0 1 .311 5.316l-.311.017h-5.334v16a2.667 2.667 0 0 1-5.316.311L8 56V40H2.667a2.667 2.667 0 0 1-.311-5.315l.31-.018h16zM32 29.333a2.667 2.667 0 0 1 2.649 2.356l.018.311v24a2.667 2.667 0 0 1-5.316.311L29.333 56V32A2.667 2.667 0 0 1 32 29.333M61.333 40a2.667 2.667 0 0 1 .311 5.315l-.31.018h-5.335L56 56a2.667 2.667 0 0 1-5.315.311L50.667 56l-.001-10.668-5.333.001a2.667 2.667 0 0 1-.311-5.316l.311-.017zm-8-34.667a2.67 2.67 0 0 1 2.65 2.356L56 8v24a2.667 2.667 0 0 1-5.315.311L50.667 32V8a2.667 2.667 0 0 1 2.666-2.667m-42.666 0a2.667 2.667 0 0 1 2.648 2.356l.018.311v18.667a2.667 2.667 0 0 1-5.316.311L8 26.667V8a2.667 2.667 0 0 1 2.667-2.667m21.333 0a2.667 2.667 0 0 1 2.649 2.356l.018.311-.001 10.666H40a2.668 2.668 0 0 1 .311 5.317L40 24H24a2.667 2.667 0 0 1-.311-5.315l.311-.018h5.333V8A2.667 2.667 0 0 1 32 5.333",className:"icon-moderations_svg__fill"})));var cx;function kM(){return kM=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},kM.apply(null,arguments)}const roe=t=>R.createElement("svg",kM({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),cx||(cx=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 45.333a5.333 5.333 0 1 1 0 10.666 5.333 5.333 0 0 1 0-10.666M32 28a5.333 5.333 0 1 1 0 10.668A5.333 5.333 0 0 1 32 28m0-17.333c2.946 0 5.333 2.387 5.333 5.333S34.946 21.333 32 21.333 26.667 18.946 26.667 16s2.387-5.333 5.333-5.333",className:"icon-more_svg__fill"})));var dx;function PM(){return PM=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},PM.apply(null,arguments)}const ioe=t=>R.createElement("svg",PM({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),dx||(dx=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"m55.62 19.616.067.123A26.55 26.55 0 0 1 58.667 32c0 4.326-1.03 8.41-2.864 12.025q-1.518 4.089-.67 6.363 1.066 2.855 2.662 4.758 2.31 2.379-1.506 3.33-3.135.782-10.879-1.646l-.488-.155-1.594-.527A26.6 26.6 0 0 1 32 58.667a26.55 26.55 0 0 1-12.326-3.014l-.059-.03 4-4A21.2 21.2 0 0 0 32 53.333c2.993 0 5.89-.614 8.562-1.786l.498-.226 1.925-.905 3.613 1.196.695.219q1.093.337 2.054.595l.472.125.485.121-.167-.42-.2-.594c-.814-2.685-.484-5.681.713-9.065l.154-.425.106-.284.528-1.084a21.2 21.2 0 0 0 1.895-8.8 21.2 21.2 0 0 0-1.71-8.385zm2.266-13.502a2.67 2.67 0 0 1 .221 3.52l-.221.252-48 48a2.668 2.668 0 0 1-3.993-3.52l.221-.252 5.238-5.237a26.56 26.56 0 0 1-6.015-16.412L5.333 32C5.333 17.272 17.273 5.333 32 5.333a26.55 26.55 0 0 1 16.877 6.02l5.237-5.239a2.67 2.67 0 0 1 3.772 0M32 10.667c-11.782 0-21.333 9.55-21.333 21.333 0 4.836 1.614 9.401 4.48 13.084l29.936-29.938A21.25 21.25 0 0 0 32 10.666z",className:"icon-mute_svg__fill"})));var hx;function FM(){return FM=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},FM.apply(null,arguments)}const aoe=t=>R.createElement("svg",FM({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),hx||(hx=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M36.613 53.333c2.056 0 3.338 2.227 2.307 4.005a8 8 0 0 1-13.84 0c-.98-1.689.129-3.783 2.004-3.988l.303-.017zM32 2.667c11.56 0 20.972 9.194 21.323 20.669l.01.664v13.333a5.334 5.334 0 0 0 4.936 5.319l.753.033c2.963.318 3.077 4.616.342 5.24l-.342.056-.355.019H5.333l-.355-.019c-3.082-.33-3.082-4.965 0-5.296l.753-.033a5.335 5.335 0 0 0 4.92-4.9l.016-.419V24c0-11.782 9.55-21.333 21.333-21.333M32 8c-8.636 0-15.674 6.842-15.989 15.4L16 24v13.333c0 1.562-.336 3.046-.939 4.383l-.275.564-.218.387h34.861l-.215-.387a10.6 10.6 0 0 1-1.146-3.74l-.055-.674-.013-.533V24c0-8.837-7.163-16-16-16",className:"icon-notifications_svg__fill"})));var fx;function BM(){return BM=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},BM.apply(null,arguments)}const soe=t=>R.createElement("svg",BM({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),fx||(fx=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M36.613 53.333c2.056 0 3.338 2.227 2.307 4.005a8 8 0 0 1-13.84 0c-.98-1.689.129-3.783 2.004-3.988l.303-.017zM32 2.667c7.173 0 13.52 3.54 17.387 8.97l5.686-5.687a2.105 2.105 0 0 1 2.85-.117l.127.117a2.105 2.105 0 0 1 0 2.977L8.927 58.05c-.78.781-2.023.82-2.85.117l-.127-.117a2.105 2.105 0 0 1 0-2.977L13.023 48h-7.69l-.355-.019c-3.082-.33-3.082-4.965 0-5.296l.753-.033a5.335 5.335 0 0 0 4.92-4.9l.016-.419V24c0-11.782 9.55-21.333 21.333-21.333m20.85 16.795c.271 1.253.433 2.548.473 3.874l.01.664v13.333a5.334 5.334 0 0 0 4.936 5.319l.753.033c2.963.318 3.077 4.616.342 5.24l-.342.056-.355.019H24.31z",className:"icon-notifications-off-filled_svg__fill"})));var vx;function HM(){return HM=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},HM.apply(null,arguments)}const ooe=t=>R.createElement("svg",HM({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),vx||(vx=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M29.83 6.45a2.667 2.667 0 0 1 4.34 0l11.697 16.374L57 13.918c1.88-1.504 4.573.054 4.32 2.35l-.047.29-8 37.334A2.666 2.666 0 0 1 50.666 56H13.333a2.666 2.666 0 0 1-2.607-2.108l-8-37.333c-.525-2.452 2.315-4.207 4.273-2.641l11.132 8.906zM32 12.587l-11.163 15.63a2.667 2.667 0 0 1-3.836.532l-7.497-5.997 5.984 27.915h33.021l5.984-27.915L47 28.749a2.667 2.667 0 0 1-3.632-.281l-.204-.251zM32 32a5.333 5.333 0 1 1 0 10.668A5.333 5.333 0 0 1 32 32",className:"icon-operator_svg__fill"})));var px;function GM(){return GM=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},GM.apply(null,arguments)}const loe=t=>R.createElement("svg",GM({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),px||(px=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M50.667 5.333a8 8 0 0 1 8 8v37.334a8 8 0 0 1-8 8H13.333a8 8 0 0 1-8-8V13.333a8 8 0 0 1 8-8zm-8 25.107L19.77 53.332l30.896.001a2.667 2.667 0 0 0 2.661-2.498l.005-.168v-9.564L42.666 30.44zm8-19.773H13.333a2.667 2.667 0 0 0-2.666 2.666v37.334c0 1.143.72 2.119 1.731 2.498L40.781 24.78a2.67 2.67 0 0 1 3.52-.222l.251.222 8.78 8.78.001-20.228a2.667 2.667 0 0 0-2.498-2.661zm-28 5.333a6.666 6.666 0 1 1 0 13.333 6.666 6.666 0 0 1 0-13.333m0 5.333a1.334 1.334 0 1 0 0 2.667 1.334 1.334 0 0 0 0-2.667",className:"icon-photo_svg__fill"})));var mx;function VM(){return VM=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},VM.apply(null,arguments)}const uoe=t=>R.createElement("svg",VM({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),mx||(mx=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M51.908 34.75c1.9-1.233 1.896-3.26.013-4.514L19.376 8.577c-1.893-1.26-3.404-.391-3.376 1.968l.522 42.888c.028 2.347 1.596 3.247 3.493 2.016z",className:"icon-play_svg__fill"})));var gx;function zM(){return zM=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},zM.apply(null,arguments)}const coe=t=>R.createElement("svg",zM({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),gx||(gx=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M34.667 29.333h18.666c3.556 0 3.556 5.334 0 5.334H34.667v18.666c0 3.556-5.334 3.556-5.334 0V34.667H10.667c-3.556 0-3.556-5.334 0-5.334h18.666V10.667c0-3.556 5.334-3.556 5.334 0z",className:"icon-plus_svg__fill"})));var _x;function jM(){return jM=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},jM.apply(null,arguments)}const doe=t=>R.createElement("svg",jM({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),_x||(_x=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 61.333C15.8 61.333 2.667 48.2 2.667 32S15.8 2.667 32 2.667 61.333 15.8 61.333 32 48.2 61.333 32 61.333M32 56c13.255 0 24-10.745 24-24S45.255 8 32 8 8 18.745 8 32s10.745 24 24 24m2.213-18.63a2.667 2.667 0 1 1-5.333 0v-2.69c0-1.148.734-2.168 1.823-2.53.173-.058.532-.195 1.01-.407.809-.36 1.616-.79 2.354-1.282 1.835-1.223 2.813-2.528 2.813-3.786a5.333 5.333 0 0 0-10.364-1.777 2.667 2.667 0 0 1-5.032-1.77 10.668 10.668 0 0 1 20.729 3.551c0 3.413-2.022 6.109-5.187 8.22a21 21 0 0 1-2.813 1.578zm-5.333 7.523a2.667 2.667 0 1 1 5.333 0v.44a2.667 2.667 0 1 1-5.333 0v-.44",className:"icon-question_svg__fill"})));var yx;function qM(){return qM=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},qM.apply(null,arguments)}const hoe=t=>R.createElement("svg",qM({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),yx||(yx=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"m46.14 14.43.562.537 6.631 6.167v-7.8a2.67 2.67 0 0 1 2.356-2.65l.311-.017a2.667 2.667 0 0 1 2.649 2.355l.018.311v16a2.67 2.67 0 0 1-2.356 2.65L56 32H40a2.667 2.667 0 0 1-.311-5.315l.311-.018h11.452l-8.44-7.85c-5.964-5.893-15.168-7.182-22.563-3.156-7.38 4.018-11.172 12.357-9.314 20.455 1.859 8.107 8.935 14.032 17.362 14.518 8.43.487 16.162-4.585 18.967-12.426a2.667 2.667 0 0 1 5.022 1.797C48.88 50.082 38.973 56.582 28.19 55.959c-10.785-.623-19.862-8.222-22.254-18.65C3.542 26.872 8.426 16.135 17.9 10.977c9.227-5.024 20.65-3.579 28.241 3.453z",className:"icon-refresh_svg__fill"})));var Ex;function $M(){return $M=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},$M.apply(null,arguments)}const foe=t=>R.createElement("svg",$M({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),Ex||(Ex=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333 2.667 48.2 2.667 32 15.8 2.667 32 2.667m9.886 19.447a2.67 2.67 0 0 0-3.772 0L32 28.23l-6.114-6.115-.134-.124a2.667 2.667 0 0 0-3.638.124l-.124.134a2.667 2.667 0 0 0 .124 3.638L28.23 32l-6.115 6.114-.124.134a2.667 2.667 0 0 0 .124 3.638l.134.124a2.667 2.667 0 0 0 3.638-.124L32 35.77l6.114 6.115.134.124a2.667 2.667 0 0 0 3.638-.124l.124-.134a2.667 2.667 0 0 0-.124-3.638L35.77 32l6.115-6.114.124-.134a2.667 2.667 0 0 0-.124-3.638z",className:"icon-remove_svg__fill"})));var bx;function KM(){return KM=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},KM.apply(null,arguments)}const voe=t=>R.createElement("svg",KM({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 12"},t),bx||(bx=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M11.774 10.5c.062 0 .12-.025.164-.07a.22.22 0 0 0 .062-.164c-.069-1.447-.495-2.678-1.268-3.66-.618-.785-1.455-1.409-2.49-1.855a9.3 9.3 0 0 0-2.406-.655 10 10 0 0 0-.862-.078V2.225a.23.23 0 0 0-.128-.203.23.23 0 0 0-.24.028L.084 5.692A.22.22 0 0 0 0 5.865c0 .068.03.132.082.175l4.523 3.737c.067.056.16.068.24.03a.22.22 0 0 0 .13-.202v-1.95c1.134-.08 2.178.003 3.107.25a6.4 6.4 0 0 1 2.087.96c1.018.724 1.398 1.5 1.401 1.507a.23.23 0 0 0 .204.128",className:"icon-reply-filled_svg__fill"})));var Cx;function YM(){return YM=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},YM.apply(null,arguments)}const poe=t=>R.createElement("svg",YM({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),Cx||(Cx=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M26.667 48C14.885 48 5.333 38.449 5.333 26.667S14.885 5.333 26.667 5.333 48 14.885 48 26.667c0 4.93-1.672 9.469-4.48 13.081l13.67 13.67a2.668 2.668 0 0 1-3.772 3.772l-13.67-13.67A21.24 21.24 0 0 1 26.667 48m0-5.333c8.836 0 16-7.164 16-16s-7.164-16-16-16-16 7.163-16 16 7.163 16 16 16",className:"icon-search_svg__fill"})));var Sx;function WM(){return WM=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},WM.apply(null,arguments)}const moe=t=>R.createElement("svg",WM({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),Sx||(Sx=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M59.795 29.43 7.329 2.979C4.691 1.802 1.76 4.153 2.932 6.798l6.925 18.609a2 2 0 0 0 1.544 1.275l32.273 5.394L11.4 37.47a2 2 0 0 0-1.544 1.275L2.932 57.353c-.879 2.645 1.76 4.997 4.397 3.527l52.466-26.453c2.051-.882 2.051-3.82 0-4.996z",className:"icon-send_svg__fill"})));var Tx;function QM(){return QM=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},QM.apply(null,arguments)}const goe=t=>R.createElement("svg",QM({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),Tx||(Tx=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 2.667A5.33 5.33 0 0 1 37.333 8v.24A4.4 4.4 0 0 0 40 12.267a4.4 4.4 0 0 0 4.853-.88l.16-.16a5.33 5.33 0 0 1 7.547 0 5.333 5.333 0 0 1 0 7.546l-.16.16a4.4 4.4 0 0 0-.88 4.854V24a4.4 4.4 0 0 0 4.027 2.667H56c2.946 0 5.333 2.387 5.333 5.333S58.946 37.333 56 37.333h-.24A4.4 4.4 0 0 0 51.733 40a4.4 4.4 0 0 0 .88 4.853l.16.16a5.33 5.33 0 0 1 0 7.547 5.333 5.333 0 0 1-7.546 0l-.16-.16a4.4 4.4 0 0 0-4.854-.88 4.4 4.4 0 0 0-2.666 4.027V56a5.333 5.333 0 0 1-10.667 0v-.24A4.4 4.4 0 0 0 24 51.733a4.4 4.4 0 0 0-4.853.88l-.16.16a5.33 5.33 0 0 1-7.547 0 5.333 5.333 0 0 1 0-7.546l.16-.16a4.4 4.4 0 0 0 .88-4.854 4.4 4.4 0 0 0-4.027-2.666H8A5.333 5.333 0 0 1 8 26.88h.24A4.4 4.4 0 0 0 12.267 24a4.4 4.4 0 0 0-.88-4.853l-.16-.16a5.33 5.33 0 0 1 0-7.547 5.333 5.333 0 0 1 7.546 0l.16.16a4.4 4.4 0 0 0 4.854.88H24a4.4 4.4 0 0 0 2.667-4.027V8A5.33 5.33 0 0 1 32 2.667M32 24a8 8 0 1 0 0 16 8 8 0 0 0 0-16",className:"icon-settings-filled_svg__fill"})));var Nx;function XM(){return XM=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},XM.apply(null,arguments)}const _oe=t=>R.createElement("svg",XM({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 32"},t),Nx||(Nx=R.createElement("path",{d:"M21.943 24.39a1.333 1.333 0 0 1-1.886 1.886l-9.333-9.333a1.333 1.333 0 0 1 0-1.886l9.333-9.333a1.333 1.333 0 1 1 1.886 1.885L13.553 16z",className:"icon-slide-left_svg__fill",clipRule:"evenodd"})));var Ax;function ZM(){return ZM=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},ZM.apply(null,arguments)}const yoe=t=>R.createElement("svg",ZM({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),Ax||(Ax=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 61.333C48.2 61.333 61.333 48.2 61.333 32S48.2 2.667 32 2.667 2.667 15.8 2.667 32a2.838 2.838 0 1 0 5.678 0C8.344 18.935 18.934 8.344 32 8.344c13.065 0 23.656 10.591 23.656 23.656S45.065 55.656 32 55.656a2.838 2.838 0 1 0 0 5.677",className:"icon-spinner_svg__fill"})));var Mx;function JM(){return JM=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},JM.apply(null,arguments)}const Eoe=t=>R.createElement("svg",JM({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),Mx||(Mx=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M36.889 43.013c6.608 0 12.121 4.685 12.43 10.734l.014.537V58a2.667 2.667 0 0 1-5.316.311L44 58v-3.716c0-3.07-2.87-5.718-6.636-5.925l-.475-.013H27.11c-3.838 0-6.86 2.525-7.096 5.557l-.015.381V58a2.667 2.667 0 0 1-5.315.311L14.667 58v-3.716c0-6.126 5.324-10.986 11.864-11.26l.58-.011zm18.578-17.291q.401 0 .784.118c4.632 1.426 7.518 4.801 7.736 9.688l.013.594v12.8a2.667 2.667 0 0 1-5.315.311l-.018-.311V36.124c-.002-2.595-1.163-4.171-3.528-5.034l-.104-.037-2.502.002a2.667 2.667 0 0 1-2.648-2.356l-.018-.31a2.67 2.67 0 0 1 2.355-2.65l.311-.017zm-44 0 .31.018a2.666 2.666 0 0 1 2.356 2.648l-.018.311a2.666 2.666 0 0 1-2.648 2.356l-2.51-.002-.119.042c-2.246.85-3.503 2.574-3.505 5.147v12.68l-.018.31A2.666 2.666 0 0 1 0 48.922V36.24l.014-.591c.225-4.874 3.203-8.415 7.712-9.809q.384-.117.788-.118zM32 19.958c5.512 0 10 4.409 10 9.871s-4.488 9.872-10 9.872-10-4.41-10-9.872 4.488-9.871 10-9.871m0 5.333c-2.588 0-4.667 2.043-4.667 4.538s2.08 4.538 4.667 4.538c2.588 0 4.667-2.042 4.667-4.538 0-2.495-2.08-4.538-4.667-4.538M17.333 2.667c5.513 0 10 4.409 10 9.871s-4.487 9.871-10 9.871c-5.512 0-10-4.409-10-9.871s4.488-9.871 10-9.871m29.334 0c5.512 0 10 4.409 10 9.871s-4.488 9.871-10 9.871c-5.513 0-10-4.409-10-9.871s4.487-9.871 10-9.871M17.333 8c-2.587 0-4.666 2.042-4.666 4.538s2.079 4.538 4.666 4.538S22 15.034 22 12.538 19.921 8 17.333 8m29.334 0C44.079 8 42 10.042 42 12.538s2.079 4.538 4.667 4.538 4.666-2.042 4.666-4.538S49.254 8 46.667 8",className:"icon-supergroup_svg__fill"})));var Ix,wx;function eI(){return eI=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},eI.apply(null,arguments)}const boe=t=>R.createElement("svg",eI({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 64 64"},t),Ix||(Ix=R.createElement("path",{d:"M38.824 25.895a2.95 2.95 0 0 1 4.16-.074L57.1 39.378a2.92 2.92 0 0 1 .002 4.213L42.985 57.177a2.95 2.95 0 0 1-4.158-.07 2.92 2.92 0 0 1 .07-4.14l11.928-11.48-11.926-11.451a2.92 2.92 0 0 1-.075-4.14",className:"icon-thread_svg__fill",clipRule:"evenodd"})),wx||(wx=R.createElement("path",{d:"M8.866 6c1.583 0 2.866 1.216 2.866 2.716V25.5c0 7.672 6.846 14.068 15.475 14.068h22.927c1.583 0 2.866 1.216 2.866 2.716S51.717 45 50.134 45H27.207C15.604 45 6 36.35 6 25.5V8.716C6 7.216 7.283 6 8.866 6",className:"icon-thread_svg__fill",clipRule:"evenodd"})));var Rx;function tI(){return tI=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},tI.apply(null,arguments)}const Coe=t=>R.createElement("svg",tI({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),Rx||(Rx=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M34.667 5.333a2.667 2.667 0 0 1 0 5.334H13.333a2.667 2.667 0 0 0-2.666 2.666v37.334c0 1.143.72 2.118 1.73 2.497l28.384-28.383a2.667 2.667 0 0 1 3.771 0l8.781 8.78v-4.228a2.667 2.667 0 0 1 2.498-2.661l.169-.005a2.667 2.667 0 0 1 2.667 2.666v21.334a8 8 0 0 1-8 8H13.33a8 8 0 0 1-7.998-8V13.333a8 8 0 0 1 8-8zm8 25.105L19.77 53.333h30.897a2.667 2.667 0 0 0 2.661-2.498l.005-.168v-9.563zM22.667 16a6.666 6.666 0 1 1 0 13.333 6.666 6.666 0 0 1 0-13.333m0 5.333a1.334 1.334 0 1 0 0 2.667 1.334 1.334 0 0 0 0-2.667M56.78 3.448a2.665 2.665 0 0 1 3.771 0 2.665 2.665 0 0 1 0 3.771l-4.782 4.78 4.782 4.782c.998.998 1.04 2.59.125 3.638l-.125.133a2.665 2.665 0 0 1-3.771 0l-4.782-4.781-4.78 4.781a2.667 2.667 0 0 1-3.638.125l-.133-.125a2.665 2.665 0 0 1 0-3.771L48.228 12l-4.78-4.781a2.667 2.667 0 0 1-.125-3.638l.125-.133a2.665 2.665 0 0 1 3.771 0l4.78 4.78z",className:"icon-thumbnail-none_svg__fill"})));var Ox;function nI(){return nI=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},nI.apply(null,arguments)}const Soe=t=>R.createElement("svg",nI({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 88 48"},t),Ox||(Ox=R.createElement("g",{fill:"none",fillRule:"evenodd"},R.createElement("rect",{width:80,height:40,x:4,y:4,fill:"#000",className:"icon-toggleoff_svg__fill",rx:20}),R.createElement("circle",{cx:24,cy:24,r:12,fill:"#FFF"}),R.createElement("path",{fill:"#FFF",d:"M64 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4zm0 2H24C14.059 6 6 14.059 6 24c0 9.764 7.774 17.712 17.47 17.992L24 42h40c9.941 0 18-8.059 18-18 0-9.764-7.774-17.712-17.47-17.992z"}),R.createElement("path",{fill:"#000",d:"M64 0H24C10.745 0 0 10.745 0 24s10.745 24 24 24h40c13.255 0 24-10.745 24-24S77.255 0 64 0m0 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4z",className:"icon-toggleoff_svg__fill"}))));var Dx;function rI(){return rI=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},rI.apply(null,arguments)}const Toe=t=>R.createElement("svg",rI({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 88 48"},t),Dx||(Dx=R.createElement("g",{fill:"none",fillRule:"evenodd"},R.createElement("rect",{width:80,height:40,x:4,y:4,fill:"#000",className:"icon-toggleon_svg__fill",rx:20}),R.createElement("circle",{cx:64,cy:24,r:12,fill:"#FFF"}),R.createElement("path",{fill:"#FFF",d:"M64 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4zm0 2H24C14.059 6 6 14.059 6 24c0 9.764 7.774 17.712 17.47 17.992L24 42h40c9.941 0 18-8.059 18-18 0-9.764-7.774-17.712-17.47-17.992z"}),R.createElement("path",{fill:"#000",d:"M64 0H24C10.745 0 0 10.745 0 24s10.745 24 24 24h40c13.255 0 24-10.745 24-24S77.255 0 64 0m0 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4z",className:"icon-toggleon_svg__fill"}))));var Ux;function iI(){return iI=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},iI.apply(null,arguments)}const Noe=t=>R.createElement("svg",iI({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),Ux||(Ux=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M42.667 37.333c7.17 0 13.018 5.66 13.32 12.755l.013.579V56a2.667 2.667 0 0 1-5.315.311L50.667 56v-5.333c0-4.26-3.33-7.743-7.53-7.987l-.47-.013H21.333a8 8 0 0 0-7.986 7.53l-.014.47V56a2.667 2.667 0 0 1-5.316.311L8 56v-5.333c0-7.17 5.66-13.019 12.755-13.321l.578-.013zM32 5.333c7.364 0 13.333 5.97 13.333 13.334S39.363 32 32 32s-13.333-5.97-13.333-13.333S24.637 5.333 32 5.333m0 5.334a8 8 0 1 0 0 16 8 8 0 0 0 0-16",className:"icon-user_svg__fill"})));var xx;function aI(){return aI=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},aI.apply(null,arguments)}const Aoe=t=>R.createElement("svg",aI({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},t),xx||(xx=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M12.346 5.336v-.001c.405-.523 1.182-.524 1.58-.037.162.2.25.443.25.69v3.678c0 .518.42.938.938.938H18.6c.359 0 .7.179.911.488l.001.001.369.548.003.004c.174.256.226.583.134.895l-1.532 5.316c-.131.459-.559.782-1.044.782h-7.075c-.3 0-.593-.127-.8-.345l-1.13-1.222v-6.647zm-4.73 3.078 3.245-4.223.002-.002c1.125-1.456 3.339-1.521 4.517-.075.421.52.671 1.177.671 1.874v2.74h2.55c.99 0 1.908.496 2.462 1.31l.002.004.368.547.002.002a2.93 2.93 0 0 1 .382 2.475v.003l-1.528 5.302a2.96 2.96 0 0 1-2.847 2.142h-7.075a2.99 2.99 0 0 1-2.166-.935l-.007-.007-.066-.072a2.13 2.13 0 0 1-1.821 1.025H4.192a2.13 2.13 0 0 1-2.13-2.13v-8.3a2.13 2.13 0 0 1 2.13-2.13h2.115c.493 0 .948.168 1.31.45m-3.678 1.68c0-.141.114-.255.254-.255h2.115c.14 0 .254.114.254.255v8.3c0 .14-.114.255-.254.255H4.192a.255.255 0 0 1-.255-.255z",clipRule:"evenodd"})));var Lx;function sI(){return sI=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},sI.apply(null,arguments)}const Moe=t=>R.createElement("svg",sI({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},t),Lx||(Lx=R.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M11.654 18.664v.001c-.405.523-1.182.524-1.58.037-.162-.2-.25-.444-.25-.69v-3.678a.94.94 0 0 0-.938-.938H5.4c-.359 0-.7-.179-.911-.488l-.001-.001-.369-.548-.003-.004a1.05 1.05 0 0 1-.134-.895l1.532-5.316c.131-.459.559-.782 1.044-.782h7.075c.3 0 .593.127.8.345l1.13 1.222v6.647zm4.73-3.078-3.245 4.223-.002.002c-1.125 1.456-3.339 1.521-4.517.075a2.98 2.98 0 0 1-.671-1.874v-2.74h-2.55c-.99 0-1.908-.496-2.462-1.31l-.002-.004-.368-.547-.002-.002a2.93 2.93 0 0 1-.382-2.475v-.003L3.711 5.63a2.96 2.96 0 0 1 2.847-2.142h7.075c.823 0 1.608.345 2.166.935l.007.007.066.072a2.13 2.13 0 0 1 1.821-1.025h2.115a2.13 2.13 0 0 1 2.13 2.13v8.3a2.13 2.13 0 0 1-2.13 2.13h-2.115a2.12 2.12 0 0 1-1.31-.45m3.678-1.68c0 .141-.114.255-.254.255h-2.115a.255.255 0 0 1-.255-.255v-8.3c0-.14.115-.255.255-.255h2.115c.14 0 .255.114.255.255z",clipRule:"evenodd"})));var kx;function oI(){return oI=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},oI.apply(null,arguments)}const Ioe=t=>R.createElement("svg",oI({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),kx||(kx=R.createElement("g",{fill:"#000",fillRule:"evenodd"},R.createElement("path",{d:"M40 5.333C38.835 6.879 37.003 8.33 36.266 9.6H12c-.597 0-1.067.469-1.067 1.067v36.458l2.863-4.458H52c.597 0 1.067-.469 1.067-1.067V26.398c1.917-.402 3.779-1.178 5.333-2.398v17.6c0 3.542-2.891 6.4-6.4 6.4H16L5.333 58.667V12c0-3.542 2.891-6.4 6.4-6.4H40Z",className:"icon-mark-as-unread_svg__fill"}),R.createElement("circle",{cx:50.667,cy:13.333,r:9.333,className:"icon-mark-as-unread_svg__fill"}))));var Px;function lI(){return lI=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},lI.apply(null,arguments)}const woe=t=>R.createElement("svg",lI({xmlns:"http://www.w3.org/2000/svg",width:14,height:16,fill:"none"},t),Px||(Px=R.createElement("path",{fill:"#742DDD",fillRule:"evenodd",d:"M11.496 4.504c.21.21.226.541.048.77l-.048.055L7.825 9l3.671 3.672a.583.583 0 0 1-.77.873l-.055-.048-3.67-3.671-3.672 3.67a.583.583 0 0 1-.873-.77l.048-.054L6.175 9l-3.67-3.67a.583.583 0 0 1 .77-.874l.054.048L7 8.174l3.671-3.67a.583.583 0 0 1 .825 0",clipRule:"evenodd"})));function Roe(t){switch(t){case Ve.ADD:return E.createElement(Cse,null);case Ve.ARROW_LEFT:return E.createElement(Sse,null);case Ve.ATTACH:return E.createElement(Tse,null);case Ve.AUDIO_ON_LINED:return E.createElement(Nse,null);case Ve.BAN:return E.createElement(Ase,null);case Ve.BROADCAST:return E.createElement(Mse,null);case Ve.CAMERA:return E.createElement(Ise,null);case Ve.CHANNELS:return E.createElement(wse,null);case Ve.CHAT:return E.createElement(Rse,null);case Ve.CHAT_FILLED:return E.createElement(Ose,null);case Ve.CHEVRON_DOWN:return E.createElement(Dse,null);case Ve.CHEVRON_RIGHT:return E.createElement(Use,null);case Ve.CLOSE:return E.createElement(xse,null);case Ve.COLLAPSE:return E.createElement(Lse,null);case Ve.COPY:return E.createElement(kse,null);case Ve.CREATE:return E.createElement(Pse,null);case Ve.DELETE:return E.createElement(Fse,null);case Ve.DISCONNECTED:return E.createElement(Bse,null);case Ve.DOCUMENT:return E.createElement(Hse,null);case Ve.DONE:return E.createElement(Gse,null);case Ve.DONE_ALL:return E.createElement(Vse,null);case Ve.DOWNLOAD:return E.createElement(zse,null);case Ve.EDIT:return E.createElement(jse,null);case Ve.EMOJI_MORE:return E.createElement(qse,null);case Ve.ERROR:return E.createElement($se,null);case Ve.EXPAND:return E.createElement(Kse,null);case Ve.FILE_AUDIO:return E.createElement(Yse,null);case Ve.FILE_DOCUMENT:return E.createElement(Wse,null);case Ve.FREEZE:return E.createElement(Qse,null);case Ve.GIF:return E.createElement(Xse,null);case Ve.INFO:return E.createElement(Zse,null);case Ve.LEAVE:return E.createElement(Jse,null);case Ve.MEMBERS:return E.createElement(eoe,null);case Ve.MESSAGE:return E.createElement(toe,null);case Ve.MODERATIONS:return E.createElement(noe,null);case Ve.MORE:return E.createElement(roe,null);case Ve.MUTE:return E.createElement(ioe,null);case Ve.NOTIFICATIONS:return E.createElement(aoe,null);case Ve.NOTIFICATIONS_OFF_FILLED:return E.createElement(soe,null);case Ve.OPERATOR:return E.createElement(ooe,null);case Ve.PHOTO:return E.createElement(loe,null);case Ve.PLAY:return E.createElement(uoe,null);case Ve.PLUS:return E.createElement(coe,null);case Ve.QUESTION:return E.createElement(doe,null);case Ve.REFRESH:return E.createElement(hoe,null);case Ve.REMOVE:return E.createElement(foe,null);case Ve.REPLY:return E.createElement(voe,null);case Ve.SEARCH:return E.createElement(poe,null);case Ve.SEND:return E.createElement(moe,null);case Ve.SETTINGS_FILLED:return E.createElement(goe,null);case Ve.SLIDE_LEFT:return E.createElement(_oe,null);case Ve.SPINNER:return E.createElement(yoe,null);case Ve.SUPERGROUP:return E.createElement(Eoe,null);case Ve.THREAD:return E.createElement(boe,null);case Ve.THUMBNAIL_NONE:return E.createElement(Coe,null);case Ve.TOGGLE_OFF:return E.createElement(Soe,null);case Ve.TOGGLE_ON:return E.createElement(Toe,null);case Ve.USER:return E.createElement(Noe,null);case Ve.FEEDBACK_LIKE:return E.createElement(Aoe,null);case Ve.FEEDBACK_DISLIKE:return E.createElement(Moe,null);case Ve.MARK_AS_UNREAD:return E.createElement(Ioe,null);case Ve.FLOATING_BUTTON_CLOSE:return E.createElement(woe,null);default:return"icon"}}function lt(t){var n=t.className,e=n===void 0?"":n,r=t.type,i=t.fillColor,a=i===void 0?ua.DEFAULT:i,s=t.width,o=s===void 0?26:s,u=t.height,c=u===void 0?26:u,h=t.onClick,p=h===void 0?Mr:h,m=t.children,_=m===void 0?null:m,b=t.testID,C={width:typeof o=="string"?o:"".concat(o,"px"),minWidth:typeof o=="string"?o:"".concat(o,"px"),height:typeof c=="string"?c:"".concat(c,"px"),minHeight:typeof c=="string"?c:"".concat(c,"px")};return E.createElement("div",{className:Xe(Xe([],Array.isArray(e)?e:[e],!0),["sendbird-icon",bse(r),Ese(a)],!1).join(" "),"data-testid":b,role:"button",onClick:p,onKeyDown:p,tabIndex:0,style:C},_||Roe(r))}var qe=Ve,rt=ua,Ll=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=Math.random()*16|0,e=t==="x"?n:n&3|8;return e.toString(16)})},Ep="sendbird-modal-root",Ooe=function(){return E.createElement("div",{id:Ep,className:Ep})},Doe=function(t){var n=t.titleText,e=t.onCloseClick;return E.createElement("div",{className:"sendbird-modal__header"},E.createElement($e,{type:Ge.H_1,color:De.ONBACKGROUND_1},n),E.createElement("div",{className:"sendbird-modal__close"},E.createElement(Su,{width:"32px",height:"32px",onClick:e},E.createElement(lt,{type:qe.CLOSE,fillColor:rt.DEFAULT,width:"24px",height:"24px"}))))},Uoe=function(t){var n=t.children;return E.createElement("div",{className:"sendbird-modal__body"},E.createElement($e,{type:Ge.SUBTITLE_1,color:De.ONBACKGROUND_2},n))},Mg=function(t){var n=t.submitText,e=t.disabled,r=e===void 0?!1:e,i=t.hideCancelButton,a=i===void 0?!1:i,s=t.type,o=s===void 0?mi.DANGER:s,u=t.onSubmit,c=t.onCancel,h=R.useContext(gi).stringSet;return E.createElement("div",{className:"sendbird-modal__footer"},!a&&E.createElement(Tu,{type:mi.SECONDARY,onClick:c},E.createElement($e,{type:Ge.BUTTON_1,color:De.ONBACKGROUND_1},h.BUTTON__CANCEL)),E.createElement(Tu,{type:o,disabled:r,onClick:u},n))};function Ud(t){var n,e=t.children,r=e===void 0?null:e,i=t.className,a=i===void 0?"":i,s=t.contentClassName,o=s===void 0?"":s,u=t.isCloseOnClickOutside,c=u===void 0?!1:u,h=t.isFullScreenOnMobile,p=h===void 0?!1:h,m=t.titleText,_=t.submitText,b=t.disabled,C=b===void 0?!1:b,N=t.hideFooter,S=N===void 0?!1:N,M=t.type,w=M===void 0?mi.DANGER:M,U=t.renderHeader,L=t.onSubmit,P=L===void 0?Mr:L,x=t.onClose,H=t.onCancel,F=t.customFooter,Q=(n=x??H)!==null&&n!==void 0?n:Mr,$=Zn().state.eventHandlers,q=R.useState(function(){return"sbu-modal-".concat(Ll())})[0];R.useEffect(function(){var V,ee;return(ee=(V=$?.modal)===null||V===void 0?void 0:V.onMounted)===null||ee===void 0?void 0:ee.call(V,{close:Q,id:q})},[]);var X=Ea().isMobile;return Lg.createPortal(E.createElement("div",{className:Hn("sendbird-modal",a,p&&X&&"sendbird-modal--full-mobile")},E.createElement("div",{className:Hn.apply(void 0,Xe(["sendbird-modal__content"],Array.isArray(o)?o:[o],!1))},U?.()||E.createElement(Doe,{titleText:m??"",onCloseClick:Q}),E.createElement(Uoe,null,r),!S&&(F??E.createElement(Mg,{disabled:C,onCancel:Q,onSubmit:P,submitText:_??"",type:w}))),E.createElement("div",{className:Hn("sendbird-modal__backdrop",c&&"sendbird-modal__backdrop--clickoutside"),onClick:function(V){V?.stopPropagation(),c&&Q()}})),document.getElementById(Ep))}var NF=R.createContext({start:Mr,stop:Mr,isRecordable:!1}),xoe=function(t){var n,e=t.children,r=Zn().state,i=r.config,a=i.logger,s=i.groupChannel,o=R.useState(null),u=o[0],c=o[1],h=R.useState(!1),p=h[0],m=h[1],_=R.useState(!1),b=_[0],C=_[1],N=Un().stringSet,S=s.enableVoiceMessage,M=R.useState(null),w=M[0],U=M[1],L=(n=YD.find(function(H){return MediaRecorder.isTypeSupported(H)}))!==null&&n!==void 0?n:"";S&&!L&&a.error("VoiceRecorder: Browser does not support mimeType",{mimmeTypes:YD}),R.useEffect(function(){S&&!w&&hy(()=>import("./bundle-B-0NnLOm-C4ZLGRxw.js"),[]).then(function(H){return U(H)})},[S,w]);var P=R.useCallback(function(H){var F,Q;if(S&&!w){a.error("VoiceRecorder: Recording audio processor is being loaded.");return}var $=function(){try{navigator.permissions.query({name:"microphone"}).then(function(q){q.state==="denied"&&(a.warning("VoiceRecorder: Permission denied."),C(!0))})}catch(q){a.warning("VoiceRecorder: Failed to check permission.",q)}};a.info("VoiceRecorder: Start recording."),u&&(x(),a.info("VoiceRecorder: Previous mediaRecorder is stopped.")),$(),(Q=(F=navigator?.mediaDevices)===null||F===void 0?void 0:F.getUserMedia)===null||Q===void 0||Q.call(F,{audio:!0}).then(function(q){var X;a.info("VoiceRecorder: Succeeded getting media stream.",q),m(!0);var V=new MediaRecorder(q,{mimeType:L,audioBitsPerSecond:CZ});V.ondataavailable=function(ee){a.info("VoiceRecorder: Succeeded getting an available data.",ee.data);var z=new File([ee.data],Xy,{lastModified:new Date().getTime(),type:tf});w?.downsampleToWav(z,function(se){var he,pe=w?.encodeMp3(se),K=new Blob(pe,{type:tf}),ce=new File([K],Xy,{lastModified:new Date().getTime(),type:tf});(he=H?.onRecordingEnded)===null||he===void 0||he.call(H,ce),a.info("VoiceRecorder: Succeeded converting audio file.",ce)});var ie=q.getAudioTracks();ie.forEach(function(se){return se.stop()}),m(!1)},V.onstart=(X=H?.onRecordingStarted)!==null&&X!==void 0?X:Mr,V?.start(),c(V)}).catch(function(q){a.error("VoiceRecorder: Failed getting media stream.",q),c(null)})},[u,w]),x=R.useCallback(function(){u?.stop(),c(null),m(!1),a.info("VoiceRecorder: Stop recording.")},[u]);return E.createElement(NF.Provider,{value:{start:P,stop:x,isRecordable:p}},e,b&&E.createElement(Ud,{hideFooter:!0,onClose:function(){return C(!1)}},E.createElement(E.Fragment,null,N.VOICE_RECORDING_PERMISSION_DENIED)))},AF=function(){return R.useContext(NF)},Mu=Symbol("@ts-pattern/matcher"),mS="@ts-pattern/anonymous-select-key",uI=function(t){return!!(t&&typeof t=="object")},RC=function(t){return t&&!!t[Mu]},Mp=function t(n,e,r){if(uI(n)){if(RC(n)){var i=n[Mu]().match(e),a=i.matched,s=i.selections;return a&&s&&Object.keys(s).forEach(function(u){return r(u,s[u])}),a}if(!uI(e))return!1;if(Array.isArray(n))return!!Array.isArray(e)&&n.length===e.length&&n.every(function(u,c){return t(u,e[c],r)});if(n instanceof Map)return e instanceof Map&&Array.from(n.keys()).every(function(u){return t(n.get(u),e.get(u),r)});if(n instanceof Set){if(!(e instanceof Set))return!1;if(n.size===0)return e.size===0;if(n.size===1){var o=Array.from(n.values())[0];return RC(o)?Array.from(e.values()).every(function(u){return t(o,u,r)}):e.has(o)}return Array.from(n.values()).every(function(u){return e.has(u)})}return Object.keys(n).every(function(u){var c,h=n[u];return(u in e||RC(c=h)&&c[Mu]().matcherType==="optional")&&t(h,e[u],r)})}return Object.is(e,n)},lf=function t(n){var e,r,i;return uI(n)?RC(n)?(e=(r=(i=n[Mu]()).getSelectionKeys)==null?void 0:r.call(i))!=null?e:[]:Array.isArray(n)?Zy(n,t):Zy(Object.values(n),t):[]},Zy=function(t,n){return t.reduce(function(e,r){return e.concat(n(r))},[])};function Fx(t){var n;return(n={})[Mu]=function(){return{match:function(e){var r={},i=function(a,s){r[a]=s};return e===void 0?(lf(t).forEach(function(a){return i(a,void 0)}),{matched:!0,selections:r}):{matched:Mp(t,e,i),selections:r}},getSelectionKeys:function(){return lf(t)},matcherType:"optional"}},n}function Bx(t){var n;return(n={})[Mu]=function(){return{match:function(e){if(!Array.isArray(e))return{matched:!1};var r={};if(e.length===0)return lf(t).forEach(function(a){r[a]=[]}),{matched:!0,selections:r};var i=function(a,s){r[a]=(r[a]||[]).concat([s])};return{matched:e.every(function(a){return Mp(t,a,i)}),selections:r}},getSelectionKeys:function(){return lf(t)}}},n}function Hx(){var t,n=[].slice.call(arguments);return(t={})[Mu]=function(){return{match:function(e){var r={},i=function(a,s){r[a]=s};return{matched:n.every(function(a){return Mp(a,e,i)}),selections:r}},getSelectionKeys:function(){return Zy(n,lf)},matcherType:"and"}},t}function Gx(){var t,n=[].slice.call(arguments);return(t={})[Mu]=function(){return{match:function(e){var r={},i=function(a,s){r[a]=s};return Zy(n,lf).forEach(function(a){return i(a,void 0)}),{matched:n.some(function(a){return Mp(a,e,i)}),selections:r}},getSelectionKeys:function(){return Zy(n,lf)},matcherType:"or"}},t}function Vx(t){var n;return(n={})[Mu]=function(){return{match:function(e){return{matched:!Mp(t,e,function(){})}},getSelectionKeys:function(){return[]},matcherType:"not"}},n}function Cc(t){var n;return(n={})[Mu]=function(){return{match:function(e){return{matched:!!t(e)}}}},n}function zx(){var t,n=[].slice.call(arguments),e=typeof n[0]=="string"?n[0]:void 0,r=n.length===2?n[1]:typeof n[0]=="string"?void 0:n[0];return(t={})[Mu]=function(){return{match:function(i){var a,s=((a={})[e??mS]=i,a);return{matched:r===void 0||Mp(r,i,function(o,u){s[o]=u}),selections:s}},getSelectionKeys:function(){return[e??mS].concat(r===void 0?[]:lf(r))}}},t}var MF=Cc(function(t){return!0}),Loe=MF,koe=Cc(function(t){return typeof t=="string"}),Poe=Cc(function(t){return typeof t=="number"}),Foe=Cc(function(t){return typeof t=="boolean"}),Boe=Cc(function(t){return typeof t=="bigint"}),Hoe=Cc(function(t){return typeof t=="symbol"}),Goe=Cc(function(t){return t==null}),Voe={__proto__:null,optional:Fx,array:Bx,intersection:Hx,union:Gx,not:Vx,when:Cc,select:zx,any:MF,_:Loe,string:koe,number:Poe,boolean:Foe,bigint:Boe,symbol:Hoe,nullish:Goe,instanceOf:function(t){return Cc((function(n){return function(e){return e instanceof n}})(t))},typed:function(){return{array:Bx,optional:Fx,intersection:Hx,union:Gx,not:Vx,select:zx,when:Cc}}};function sl(t){return new zoe(t,[])}var zoe=(function(){function t(e,r){this.value=void 0,this.cases=void 0,this.value=e,this.cases=r}var n=t.prototype;return n.with=function(){var e=[].slice.call(arguments),r=e[e.length-1],i=[e[0]],a=[];return e.length===3&&typeof e[1]=="function"?(i.push(e[0]),a.push(e[1])):e.length>2&&i.push.apply(i,e.slice(1,e.length-1)),new t(this.value,this.cases.concat([{match:function(s){var o={},u=!!(i.some(function(c){return Mp(c,s,function(h,p){o[h]=p})})&&a.every(function(c){return c(s)}));return{matched:u,value:u&&Object.keys(o).length?mS in o?o[mS]:o:s}},handler:r}]))},n.when=function(e,r){return new t(this.value,this.cases.concat([{match:function(i){return{matched:!!e(i),value:i}},handler:r}]))},n.otherwise=function(e){return new t(this.value,this.cases.concat([{match:function(r){return{matched:!0,value:r}},handler:e}])).run()},n.exhaustive=function(){return this.run()},n.run=function(){for(var e=this.value,r=void 0,i=0;i<this.cases.length;i++){var a=this.cases[i],s=a.match(this.value);if(s.matched){e=s.value,r=a.handler;break}}if(!r){var o;try{o=JSON.stringify(this.value)}catch{o=this.value}throw new Error("Pattern matching error: no pattern matches value "+o)}return r(e,this.value)},t})(),IF=R.createContext({openModal:Mr}),joe=function(t){var n=t.children,e=R.useState([]),r=e[0],i=e[1],a=R.useCallback(function(u){i(function(c){return Xe(Xe([],c,!0),[u],!1)})},[]),s=R.useCallback(function(){i(function(u){return u.slice(1)})},[]),o=R.useMemo(function(){return function(){return sl(r).when(function(u){return u.length===0},function(){return E.createElement(E.Fragment,null)}).otherwise(function(){var u=r[0],c=u.modalProps,h=u.childElement;return E.createElement(Ud,J({},c,{className:Hn("sendbird-global-modal",c?.className),onClose:function(){var p;(p=c?.onClose)===null||p===void 0||p.call(c),s()}}),h({closeModal:s}))})}},[r]);return E.createElement(IF.Provider,{value:{openModal:a}},E.createElement(o,null),n)},Qw=function(){return R.useContext(IF)},qoe=function(t){var n={};return{__getTopics:function(){return n},subscribe:function(e,r){var i;return(i=n[e])!==null&&i!==void 0||(n[e]=new Set),n[e].add(r),{remove:function(){n[e].delete(r)}}},publish:function(e,r){n[e]&&n[e].forEach(function(i){setTimeout(function(){return i(r!==void 0?r:{})},0)})}}},$oe=(function(){function t(n){var e=this,r,i=n.sdk,a=n.logger;(r=i?.getAllEmoji)===null||r===void 0||r.call(i).then(function(s){e._emojiContainer=s,a?.info("EmojiManager | Succeeded getting all emojis. ",s)}).catch(function(){a?.warning("EmojiManager | Failed getting all emojis.")})}return Object.defineProperty(t.prototype,"AllEmojisAsArray",{get:function(){return this._emojiContainer.emojiCategories.flatMap(function(n){return n.emojis})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"AllEmojisAsMap",{get:function(){return this._emojiContainer.emojiCategories.flatMap(function(n){return n.emojis}).reduce(function(n,e){return n.set(e.key,e.url),n},new Map)},enumerable:!1,configurable:!0}),t.prototype.getAllEmojis=function(n){var e=this;return sl(n).when(function(r){return["array","arr"].includes(r)},function(){return e.AllEmojisAsArray}).when(function(r){return["map"].includes(r)},function(){return e.AllEmojisAsMap}).otherwise(function(){return e.AllEmojisAsArray})},t.prototype.getEmojiUrl=function(n){var e,r;return(r=(e=this.AllEmojisAsArray.find(function(i){return i.key===n}))===null||e===void 0?void 0:e.url)!==null&&r!==void 0?r:""},Object.defineProperty(t.prototype,"emojiContainer",{get:function(){return this._emojiContainer},enumerable:!1,configurable:!0}),t})(),wF={100:"extra-light",200:"light",300:"main",400:"dark",500:"extra-dark","overlay-01":"overlay-dark","overlay-02":"overlay-light","onlight-01":"onlight-text-high-emphasis","onlight-02":"onlight-text-mid-emphasis","onlight-03":"onlight-text-low-emphasis","onlight-04":"onlight-text-disabled","ondark-01":"ondark-text-high-emphasis","ondark-02":"ondark-text-mid-emphasis","ondark-03":"ondark-text-low-emphasis","ondark-04":"ondark-text-disabled"},Koe=Object.values(wF).sort(function(t,n){return n.length-t.length}),Yoe=new Map(Object.entries(wF).map(function(t){var n=t[0],e=t[1];return[e,n]})),Woe=function(t){var n={};return Object.entries(t).forEach(function(e){for(var r=e[0],i=e[1],a=r,s=0,o=Koe;s<o.length;s++){var u=o[s],c=new RegExp("-".concat(u,"$"));if(c.test(r)){var h=Yoe.get(u);if(h){a=r.replace(c,"-".concat(h));break}}}n[a]=i}),n};function mo(){return mo=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},mo.apply(this,arguments)}function jx(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e={mimeType:n.mimeType||null,onBeforeSend:n.onBeforeSend||Function.prototype,onSuccess:n.onSuccess||Function.prototype,onError:n.onError||Function.prototype,onComplete:n.onComplete||Function.prototype},r=Array.isArray(t)?t:[t],i=Array.apply(null,Array(r.length)).map((function(c){return null}));function a(c){var h=typeof c=="string",p=h&&c.trim().charAt(0)==="<";return h&&!p}function s(c,h){e.onError(c,r[h],h)}function o(c,h){var p=e.onSuccess(c,r[h],h);c=p===!1?"":p||c,i[h]=c,i.indexOf(null)===-1&&e.onComplete(i)}var u=document.createElement("a");r.forEach((function(c,h){u.setAttribute("href",c),u.href=String(u.href);var p=!!(document.all&&!window.atob),m=p&&u.host.split(":")[0]!==location.host.split(":")[0];if(m){var _=u.protocol===location.protocol;if(_){var b=new XDomainRequest;b.open("GET",c),b.timeout=0,b.onprogress=Function.prototype,b.ontimeout=Function.prototype,b.onload=function(){var N=b.responseText;a(N)?o(N,h):s(b,h)},b.onerror=function(N){s(b,h)},setTimeout((function(){b.send()}),0)}else console.warn("Internet Explorer 9 Cross-Origin (CORS) requests must use the same protocol (".concat(c,")")),s(null,h)}else{var C=new XMLHttpRequest;C.open("GET",c),e.mimeType&&C.overrideMimeType&&C.overrideMimeType(e.mimeType),e.onBeforeSend(C,c,h),C.onreadystatechange=function(){if(C.readyState===4){var N=C.responseText;C.status<400&&a(N)||C.status===0&&a(N)?o(N,h):s(C,h)}},C.send()}}))}function qx(t){var n={cssComments:/\/\*[\s\S]+?\*\//g,cssImports:/(?:@import\s*)(?:url\(\s*)?(?:['"])([^'"]*)(?:['"])(?:\s*\))?(?:[^;]*;)/g},e={rootElement:t.rootElement||document,include:t.include||'style,link[rel="stylesheet"]',exclude:t.exclude||null,filter:t.filter||null,skipDisabled:t.skipDisabled!==!1,useCSSOM:t.useCSSOM||!1,onBeforeSend:t.onBeforeSend||Function.prototype,onSuccess:t.onSuccess||Function.prototype,onError:t.onError||Function.prototype,onComplete:t.onComplete||Function.prototype},r=Array.apply(null,e.rootElement.querySelectorAll(e.include)).filter((function(c){return!Qoe(c,e.exclude)})),i=Array.apply(null,Array(r.length)).map((function(c){return null}));function a(){var c=i.indexOf(null)===-1;if(c){i.reduce((function(p,m,_){return m===""&&p.push(_),p}),[]).reverse().forEach((function(p){return[r,i].forEach((function(m){return m.splice(p,1)}))}));var h=i.join("");e.onComplete(h,i,r)}}function s(c,h,p,m){var _=e.onSuccess(c,p,m);c=_!==void 0&&!_?"":_||c,u(c,p,m,(function(b,C){i[h]===null&&(C.forEach((function(N){return e.onError(N.xhr,p,N.url)})),!e.filter||e.filter.test(b)?i[h]=b:i[h]="",a())}))}function o(c,h){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],m={};return m.rules=(c.replace(n.cssComments,"").match(n.cssImports)||[]).filter((function(_){return p.indexOf(_)===-1})),m.urls=m.rules.map((function(_){return _.replace(n.cssImports,"$1")})),m.absoluteUrls=m.urls.map((function(_){return SN(_,h)})),m.absoluteRules=m.rules.map((function(_,b){var C=m.urls[b],N=SN(m.absoluteUrls[b],h);return _.replace(C,N)})),m}function u(c,h,p,m){var _=arguments.length>4&&arguments[4]!==void 0?arguments[4]:[],b=arguments.length>5&&arguments[5]!==void 0?arguments[5]:[],C=o(c,p,b);C.rules.length?jx(C.absoluteUrls,{onBeforeSend:function(S,M,w){e.onBeforeSend(S,h,M)},onSuccess:function(S,M,w){var U=e.onSuccess(S,h,M);S=U===!1?"":U||S;var L=o(S,M,b);return L.rules.forEach((function(P,x){S=S.replace(P,L.absoluteRules[x])})),S},onError:function(S,M,w){_.push({xhr:S,url:M}),b.push(C.rules[w]),u(c,h,p,m,_,b)},onComplete:function(S){S.forEach((function(M,w){c=c.replace(C.rules[w],M)})),u(c,h,p,m,_,b)}}):m(c,_)}r.length?r.forEach((function(c,h){var p=c.getAttribute("href"),m=c.getAttribute("rel"),_=c.nodeName.toLowerCase()==="link"&&p&&m&&m.toLowerCase().indexOf("stylesheet")!==-1,b=e.skipDisabled===!1?!1:c.disabled,C=c.nodeName.toLowerCase()==="style";if(_&&!b){var N=p.indexOf("data:text/css")!==-1;if(N){var S=decodeURIComponent(p.substring(p.indexOf(",")+1));e.useCSSOM&&(S=Array.apply(null,c.sheet.cssRules).map((function(w){return w.cssText})).join("")),s(S,h,c,location.href)}else jx(p,{mimeType:"text/css",onBeforeSend:function(U,L,P){e.onBeforeSend(U,c,L)},onSuccess:function(U,L,P){var x=SN(p);s(U,h,c,x)},onError:function(U,L,P){i[h]="",e.onError(U,c,L),a()}})}else if(C&&!b){var M=c.textContent;e.useCSSOM&&(M=Array.apply(null,c.sheet.cssRules).map((function(w){return w.cssText})).join("")),s(M,h,c,location.href)}else i[h]="",a()})):e.onComplete("",[])}function SN(t,n){var e=document.implementation.createHTMLDocument(""),r=e.createElement("base"),i=e.createElement("a");return e.head.appendChild(r),e.body.appendChild(i),r.href=n||document.baseURI||(document.querySelector("base")||{}).href||location.href,i.href=t,i.href}function Qoe(t,n){var e=t.matches||t.matchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector;return e.call(t,n)}var RF=OF;function OF(t,n,e){t instanceof RegExp&&(t=$x(t,e)),n instanceof RegExp&&(n=$x(n,e));var r=DF(t,n,e);return r&&{start:r[0],end:r[1],pre:e.slice(0,r[0]),body:e.slice(r[0]+t.length,r[1]),post:e.slice(r[1]+n.length)}}function $x(t,n){var e=n.match(t);return e?e[0]:null}OF.range=DF;function DF(t,n,e){var r,i,a,s,o,u=e.indexOf(t),c=e.indexOf(n,u+1),h=u;if(u>=0&&c>0){if(t===n)return[u,c];for(r=[],a=e.length;h>=0&&!o;)h==u?(r.push(h),u=e.indexOf(t,h+1)):r.length==1?o=[r.pop(),c]:(i=r.pop(),i<a&&(a=i,s=c),c=e.indexOf(n,h+1)),h=u<c&&u>=0?u:c;r.length&&(o=[a,s])}return o}function Xw(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e={preserveStatic:!0,removeComments:!1},r=mo({},e,n),i=[];function a(X){throw new Error("CSS parse error: ".concat(X))}function s(X){var V=X.exec(t);if(V)return t=t.slice(V[0].length),V}function o(){return s(/^{\s*/)}function u(){return s(/^}/)}function c(){s(/^\s*/)}function h(){if(c(),!(t[0]!=="/"||t[1]!=="*")){for(var X=2;t[X]&&(t[X]!=="*"||t[X+1]!=="/");)X++;if(!t[X])return a("end of comment is missing");var V=t.slice(2,X);return t=t.slice(X+2),{type:"comment",comment:V}}}function p(){for(var X=[],V;V=h();)X.push(V);return r.removeComments?[]:X}function m(){for(c();t[0]==="}";)a("extra closing bracket");var X=s(/^(("(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^{])+)/);if(X){var V=X[0].trim(),ee,z=/\/\*/.test(V);z&&(V=V.replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,""));var ie=/["']\w*,\w*["']/.test(V);ie&&(V=V.replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,(function(he){return he.replace(/,/g,"")})));var se=/,/.test(V);return se?ee=V.split(/\s*(?![^(]*\)),\s*/):ee=[V],ie&&(ee=ee.map((function(he){return he.replace(/\u200C/g,",")}))),ee}}function _(){if(t[0]==="@")return Q();s(/^([;\s]*)+/);var X=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,V=s(/^(\*?[-#/*\\\w.]+(\[[0-9a-z_-]+\])?)\s*/);if(V){if(V=V[0].trim(),!s(/^:\s*/))return a("property missing ':'");var ee=s(/^((?:\/\*.*?\*\/|'(?:\\'|.)*?'|"(?:\\"|.)*?"|\((\s*'(?:\\'|.)*?'|"(?:\\"|.)*?"|[^)]*?)\s*\)|[^};])+)/),z={type:"declaration",property:V.replace(X,""),value:ee?ee[0].replace(X,"").trim():""};return s(/^[;\s]*/),z}}function b(){if(!o())return a("missing '{'");for(var X,V=p();X=_();)V.push(X),V=V.concat(p());return u()?V:a("missing '}'")}function C(){c();for(var X=[],V;V=s(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)X.push(V[1]),s(/^,\s*/);if(X.length)return{type:"keyframe",values:X,declarations:b()}}function N(){var X=s(/^@([-\w]+)?keyframes\s*/);if(X){var V=X[1];if(X=s(/^([-\w]+)\s*/),!X)return a("@keyframes missing name");var ee=X[1];if(!o())return a("@keyframes missing '{'");for(var z,ie=p();z=C();)ie.push(z),ie=ie.concat(p());return u()?{type:"keyframes",name:ee,vendor:V,keyframes:ie}:a("@keyframes missing '}'")}}function S(){var X=s(/^@page */);if(X){var V=m()||[];return{type:"page",selectors:V,declarations:b()}}}function M(){var X=s(/@(top|bottom|left|right)-(left|center|right|top|middle|bottom)-?(corner)?\s*/);if(X){var V="".concat(X[1],"-").concat(X[2])+(X[3]?"-".concat(X[3]):"");return{type:"page-margin-box",name:V,declarations:b()}}}function w(){var X=s(/^@font-face\s*/);if(X)return{type:"font-face",declarations:b()}}function U(){var X=s(/^@supports *([^{]+)/);if(X)return{type:"supports",supports:X[1].trim(),rules:q()}}function L(){var X=s(/^@host\s*/);if(X)return{type:"host",rules:q()}}function P(){var X=s(/^@media([^{]+)*/);if(X)return{type:"media",media:(X[1]||"").trim(),rules:q()}}function x(){var X=s(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);if(X)return{type:"custom-media",name:X[1].trim(),media:X[2].trim()}}function H(){var X=s(/^@([-\w]+)?document *([^{]+)/);if(X)return{type:"document",document:X[2].trim(),vendor:X[1]?X[1].trim():null,rules:q()}}function F(){var X=s(/^@(import|charset|namespace)\s*([^;]+);/);if(X)return{type:X[1],name:X[2].trim()}}function Q(){if(c(),t[0]==="@"){var X=F()||w()||P()||N()||U()||H()||x()||L()||S()||M();if(X&&!r.preserveStatic){var V=!1;if(X.declarations)V=X.declarations.some((function(z){return/var\(/.test(z.value)}));else{var ee=X.keyframes||X.rules||[];V=ee.some((function(z){return(z.declarations||[]).some((function(ie){return/var\(/.test(ie.value)}))}))}return V?X:{}}return X}}function $(){if(!r.preserveStatic){var X=RF("{","}",t);if(X){var V=/:(?:root|host)(?![.:#(])/.test(X.pre)&&/--\S*\s*:/.test(X.body),ee=/var\(/.test(X.body);if(!V&&!ee)return t=t.slice(X.end+1),{}}}var z=m()||[],ie=r.preserveStatic?b():b().filter((function(se){var he=z.some((function(K){return/:(?:root|host)(?![.:#(])/.test(K)}))&&/^--\S/.test(se.property),pe=/var\(/.test(se.value);return he||pe}));return z.length||a("selector missing"),{type:"rule",selectors:z,declarations:ie}}function q(X){if(!X&&!o())return a("missing '{'");for(var V,ee=p();t.length&&(X||t[0]!=="}")&&(V=Q()||$());)V.type&&ee.push(V),ee=ee.concat(p());return!X&&!u()?a("missing '}'"):ee}return{type:"stylesheet",stylesheet:{rules:q(!0),errors:i}}}function Kx(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e={parseHost:!1,store:{},onWarning:function(){}},r=mo({},e,n),i=new RegExp(":".concat(r.parseHost?"host":"root","$"));return typeof t=="string"&&(t=Xw(t,r)),t.stylesheet.rules.forEach((function(a){a.type!=="rule"||!a.selectors.some((function(s){return i.test(s)}))||a.declarations.forEach((function(s,o){var u=s.property,c=s.value;u&&u.indexOf("--")===0&&(r.store[u]=c)}))})),r.store}function UF(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",e=arguments.length>2?arguments[2]:void 0,r={charset:function(s){return"@charset "+s.name+";"},comment:function(s){return s.comment.indexOf("__CSSVARSPONYFILL")===0?"/*"+s.comment+"*/":""},"custom-media":function(s){return"@custom-media "+s.name+" "+s.media+";"},declaration:function(s){return s.property+":"+s.value+";"},document:function(s){return"@"+(s.vendor||"")+"document "+s.document+"{"+i(s.rules)+"}"},"font-face":function(s){return"@font-face{"+i(s.declarations)+"}"},host:function(s){return"@host{"+i(s.rules)+"}"},import:function(s){return"@import "+s.name+";"},keyframe:function(s){return s.values.join(",")+"{"+i(s.declarations)+"}"},keyframes:function(s){return"@"+(s.vendor||"")+"keyframes "+s.name+"{"+i(s.keyframes)+"}"},media:function(s){return"@media "+s.media+"{"+i(s.rules)+"}"},namespace:function(s){return"@namespace "+s.name+";"},page:function(s){return"@page "+(s.selectors.length?s.selectors.join(", "):"")+"{"+i(s.declarations)+"}"},"page-margin-box":function(s){return"@"+s.name+"{"+i(s.declarations)+"}"},rule:function(s){var o=s.declarations;if(o.length)return s.selectors.join(",")+"{"+i(o)+"}"},supports:function(s){return"@supports "+s.supports+"{"+i(s.rules)+"}"}};function i(a){for(var s="",o=0;o<a.length;o++){var u=a[o];e&&e(u);var c=r[u.type](u);c&&(s+=c,c.length&&u.selectors&&(s+=n))}return s}return i(t.stylesheet.rules)}function xF(t,n){t.rules.forEach((function(e){if(e.rules){xF(e,n);return}if(e.keyframes){e.keyframes.forEach((function(r){r.type==="keyframe"&&n(r.declarations,e)}));return}e.declarations&&n(e.declarations,t)}))}var Xoe="--",Zoe="var";function Joe(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e={preserveStatic:!0,preserveVars:!1,variables:{},onWarning:function(){}},r=mo({},e,n);return typeof t=="string"&&(t=Xw(t,r)),xF(t.stylesheet,(function(i,a){for(var s=0;s<i.length;s++){var o=i[s],u=o.type,c=o.property,h=o.value;if(u==="declaration"){if(!r.preserveVars&&c&&c.indexOf(Xoe)===0){i.splice(s,1),s--;continue}if(h.indexOf(Zoe+"(")!==-1){var p=iy(h,r);p!==o.value&&(p=ele(p),r.preserveVars?(i.splice(s,0,{type:u,property:c,value:p}),s++):o.value=p)}}}})),UF(t)}function ele(t){var n=/calc\(([^)]+)\)/g;return(t.match(n)||[]).forEach((function(e){var r="calc".concat(e.split("calc").join(""));t=t.replace(e,r)})),t}function iy(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=arguments.length>2?arguments[2]:void 0;if(t.indexOf("var(")===-1)return t;var r=RF("(",")",t);function i(s){var o=s.split(",")[0].replace(/[\s\n\t]/g,""),u=(s.match(/(?:\s*,\s*){1}(.*)?/)||[])[1],c=Object.prototype.hasOwnProperty.call(n.variables,o)?String(n.variables[o]):void 0,h=c||(u?String(u):void 0),p=e||s;return c||n.onWarning('variable "'.concat(o,'" is undefined')),h&&h!=="undefined"&&h.length>0?iy(h,n,p):"var(".concat(p,")")}if(r)if(r.pre.slice(-3)==="var"){var a=r.body.trim().length===0;return a?(n.onWarning("var() must contain a non-whitespace string"),t):r.pre.slice(0,-3)+i(r.body)+iy(r.post,n)}else return r.pre+"(".concat(iy(r.body,n),")")+iy(r.post,n);else return t.indexOf("var(")!==-1&&n.onWarning('missing closing ")" in the value "'.concat(t,'"')),t}var eT=typeof window<"u",Yx=eT&&window.CSS&&window.CSS.supports&&window.CSS.supports("(--a: 0)"),$v={group:0,job:0},rC={rootElement:eT?document:null,shadowDOM:!1,include:"style,link[rel=stylesheet]",exclude:"",variables:{},onlyLegacy:!0,preserveStatic:!0,preserveVars:!1,silent:!1,updateDOM:!0,updateURLs:!0,watch:null,onBeforeSend:function(){},onError:function(){},onWarning:function(){},onSuccess:function(){},onComplete:function(){},onFinally:function(){}},fc={cssComments:/\/\*[\s\S]+?\*\//g,cssKeyframes:/@(?:-\w*-)?keyframes/,cssMediaQueries:/@media[^{]+\{([\s\S]+?})\s*}/g,cssUrls:/url\((?!['"]?(?:data|http|\/\/):)['"]?([^'")]*)['"]?\)/g,cssVarDeclRules:/(?::(?:root|host)(?![.:#(])[\s,]*[^{]*{\s*[^}]*})/g,cssVarDecls:/(?:[\s;]*)(-{2}\w[\w-]*)(?:\s*:\s*)([^;]*);/g,cssVarFunc:/var\(\s*--[\w-]/,cssVars:/(?:(?::(?:root|host)(?![.:#(])[\s,]*[^{]*{\s*[^;]*;*\s*)|(?:var\(\s*))(--[^:)]+)(?:\s*[:)])/},ea={dom:{},job:{},user:{}},OC=!1,tl=null,ay=0,cI=null,dI=!1;function hd(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n="cssVars(): ",e=mo({},rC,t);function r(h,p,m,_){!e.silent&&window.console&&console.error("".concat(n).concat(h,`
`),p),e.onError(h,p,m,_)}function i(h){!e.silent&&window.console&&console.warn("".concat(n).concat(h)),e.onWarning(h)}function a(h){e.onFinally(!!h,Yx,TN()-e.__benchmark)}if(eT){if(e.watch){e.watch=rC.watch,tle(e),hd(e);return}else e.watch===!1&&tl&&(tl.disconnect(),tl=null);if(!e.__benchmark){if(OC===e.rootElement){nle(t);return}var s=[].slice.call(e.rootElement.querySelectorAll('[data-cssvars]:not([data-cssvars="out"])'));if(e.__benchmark=TN(),e.exclude=[tl?'[data-cssvars]:not([data-cssvars=""])':'[data-cssvars="out"]',"link[disabled]:not([data-cssvars])",e.exclude].filter((function(h){return h})).join(","),e.variables=ale(e.variables),s.forEach((function(h){var p=h.nodeName.toLowerCase()==="style"&&h.__cssVars.text,m=p&&h.textContent!==h.__cssVars.text;p&&m&&(h.sheet&&(h.sheet.disabled=!1),h.setAttribute("data-cssvars",""))})),!tl){var o=[].slice.call(e.rootElement.querySelectorAll('[data-cssvars="out"]'));o.forEach((function(h){var p=h.getAttribute("data-cssvars-group"),m=p?e.rootElement.querySelector('[data-cssvars="src"][data-cssvars-group="'.concat(p,'"]')):null;m||h.parentNode.removeChild(h)})),ay&&s.length<ay&&(ay=s.length,ea.dom={})}}if(document.readyState!=="loading")if(Yx&&e.onlyLegacy){var u=!1;if(e.updateDOM){var c=e.rootElement.host||(e.rootElement===document?document.documentElement:e.rootElement);Object.keys(e.variables).forEach((function(h){var p=e.variables[h];u=u||p!==getComputedStyle(c).getPropertyValue(h),c.style.setProperty(h,p)}))}a(u)}else!dI&&(e.shadowDOM||e.rootElement.shadowRoot||e.rootElement.host)?qx({rootElement:rC.rootElement,include:rC.include,exclude:e.exclude,skipDisabled:!1,onSuccess:function(p,m,_){var b=(m.sheet||{}).disabled&&!m.__cssVars;return b?!1:(p=p.replace(fc.cssComments,"").replace(fc.cssMediaQueries,""),p=(p.match(fc.cssVarDeclRules)||[]).join(""),p||!1)},onComplete:function(p,m,_){Kx(p,{store:ea.dom,onWarning:i}),dI=!0,hd(e)}}):(OC=e.rootElement,qx({rootElement:e.rootElement,include:e.include,exclude:e.exclude,skipDisabled:!1,onBeforeSend:e.onBeforeSend,onError:function(p,m,_){var b=p.responseURL||LF(_,location.href),C=p.statusText?"(".concat(p.statusText,")"):"Unspecified Error"+(p.status===0?" (possibly CORS related)":""),N="CSS XHR Error: ".concat(b," ").concat(p.status," ").concat(C);r(N,m,p,b)},onSuccess:function(p,m,_){var b=(m.sheet||{}).disabled&&!m.__cssVars;if(b)return!1;var C=m.nodeName.toLowerCase()==="link",N=m.nodeName.toLowerCase()==="style"&&p!==m.textContent,S=e.onSuccess(p,m,_);return p=S!==void 0&&!S?"":S||p,e.updateURLs&&(C||N)&&(p=ile(p,_)),p},onComplete:function(p,m){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],b=mo({},ea.dom,ea.user),C=!1;if(ea.job={},_.forEach((function(x,H){var F=m[H];if(x.__cssVars=x.__cssVars||{},x.__cssVars.text=F,fc.cssVars.test(F))try{var Q=Xw(F,{preserveStatic:e.preserveStatic,removeComments:!0});Kx(Q,{parseHost:!!e.rootElement.host,store:ea.dom,onWarning:i}),x.__cssVars.tree=Q}catch($){r($.message,x)}})),mo(ea.job,ea.dom),e.updateDOM?(mo(ea.user,e.variables),mo(ea.job,ea.user)):(mo(ea.job,ea.user,e.variables),mo(b,e.variables)),C=$v.job>0&&!!(Object.keys(ea.job).length>Object.keys(b).length||Object.keys(b).length&&Object.keys(ea.job).some((function(x){return ea.job[x]!==b[x]}))),C)hI(e.rootElement),hd(e);else{var N=[],S=[],M=!1;if(e.updateDOM&&$v.job++,_.forEach((function(x,H){var F=!x.__cssVars.tree;if(x.__cssVars.tree)try{Joe(x.__cssVars.tree,mo({},e,{variables:ea.job,onWarning:i}));var Q=UF(x.__cssVars.tree);if(e.updateDOM){var $=m[H],q=fc.cssVarFunc.test($);if(x.getAttribute("data-cssvars")||x.setAttribute("data-cssvars","src"),Q.length&&q){var X=x.getAttribute("data-cssvars-group")||++$v.group,V=Q.replace(/\s/g,""),ee=e.rootElement.querySelector('[data-cssvars="out"][data-cssvars-group="'.concat(X,'"]'))||document.createElement("style");M=M||fc.cssKeyframes.test(Q),e.preserveStatic&&x.sheet&&(x.sheet.disabled=!0),ee.hasAttribute("data-cssvars")||ee.setAttribute("data-cssvars","out"),V===x.textContent.replace(/\s/g,"")?(F=!0,ee&&ee.parentNode&&(x.removeAttribute("data-cssvars-group"),ee.parentNode.removeChild(ee))):V!==ee.textContent.replace(/\s/g,"")&&([x,ee].forEach((function(z){z.setAttribute("data-cssvars-job",$v.job),z.setAttribute("data-cssvars-group",X)})),ee.textContent=Q,N.push(Q),S.push(ee),ee.parentNode||x.parentNode.insertBefore(ee,x.nextSibling))}}else x.textContent.replace(/\s/g,"")!==Q&&N.push(Q)}catch(z){r(z.message,x)}F&&x.setAttribute("data-cssvars","skip"),x.hasAttribute("data-cssvars-job")||x.setAttribute("data-cssvars-job",$v.job)})),ay=e.rootElement.querySelectorAll('[data-cssvars]:not([data-cssvars="out"])').length,e.shadowDOM){for(var w=[].concat(e.rootElement).concat([].slice.call(e.rootElement.querySelectorAll("*"))),U=0,L;L=w[U];++U)if(L.shadowRoot&&L.shadowRoot.querySelector("style")){var P=mo({},e,{rootElement:L.shadowRoot});hd(P)}}e.updateDOM&&M&&rle(e.rootElement),OC=!1,e.onComplete(N.join(""),S,JSON.parse(JSON.stringify(ea.job)),TN()-e.__benchmark),a(S.length)}}}));else document.addEventListener("DOMContentLoaded",(function h(p){hd(t),document.removeEventListener("DOMContentLoaded",h)}))}}hd.reset=function(){$v.job=0,$v.group=0,OC=!1,tl&&(tl.disconnect(),tl=null),ay=0,cI=null,dI=!1;for(var t in ea)ea[t]={}};function tle(t){function n(u){var c=e(u)&&u.hasAttribute("disabled"),h=(u.sheet||{}).disabled;return c||h}function e(u){var c=u.nodeName.toLowerCase()==="link"&&(u.getAttribute("rel")||"").indexOf("stylesheet")!==-1;return c}function r(u){return u.nodeName.toLowerCase()==="style"}function i(u){var c=!1;if(u.type==="attributes"&&e(u.target)&&!n(u.target)){var h=u.attributeName==="disabled",p=u.attributeName==="href",m=u.target.getAttribute("data-cssvars")==="skip",_=u.target.getAttribute("data-cssvars")==="src";h?c=!m&&!_:p&&(m?u.target.setAttribute("data-cssvars",""):_&&hI(t.rootElement,!0),c=!0)}return c}function a(u){var c=!1;if(u.type==="childList"){var h=r(u.target),p=u.target.getAttribute("data-cssvars")==="out";c=h&&!p}return c}function s(u){var c=!1;return u.type==="childList"&&(c=[].slice.call(u.addedNodes).some((function(h){var p=h.nodeType===1,m=p&&h.hasAttribute("data-cssvars"),_=r(h)&&fc.cssVars.test(h.textContent),b=!m&&(e(h)||_);return b&&!n(h)}))),c}function o(u){var c=!1;return u.type==="childList"&&(c=[].slice.call(u.removedNodes).some((function(h){var p=h.nodeType===1,m=p&&h.getAttribute("data-cssvars")==="out",_=p&&h.getAttribute("data-cssvars")==="src",b=_;if(_||m){var C=h.getAttribute("data-cssvars-group"),N=t.rootElement.querySelector('[data-cssvars-group="'.concat(C,'"]'));_&&hI(t.rootElement,!0),N&&N.parentNode.removeChild(N)}return b}))),c}window.MutationObserver&&(tl&&(tl.disconnect(),tl=null),tl=new MutationObserver((function(u){var c=u.some((function(h){return i(h)||a(h)||s(h)||o(h)}));c&&hd(t)})),tl.observe(document.documentElement,{attributes:!0,attributeFilter:["disabled","href"],childList:!0,subtree:!0}))}function nle(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;clearTimeout(cI),cI=setTimeout((function(){t.__benchmark=null,hd(t)}),n)}function rle(t){var n=["animation-name","-moz-animation-name","-webkit-animation-name"].filter((function(m){return getComputedStyle(document.body)[m]}))[0];if(n){for(var e=[].slice.call(t.querySelectorAll("*")),r=[],i="__CSSVARSPONYFILL-KEYFRAMES__",a=0,s=e.length;a<s;a++){var o=e[a],u=getComputedStyle(o)[n];u!=="none"&&(o.style[n]+=i,r.push(o))}document.body.offsetHeight;for(var c=0,h=r.length;c<h;c++){var p=r[c].style;p[n]=p[n].replace(i,"")}}}function ile(t,n){var e=t.replace(fc.cssComments,"").match(fc.cssUrls)||[];return e.forEach((function(r){var i=r.replace(fc.cssUrls,"$1"),a=LF(i,n);t=t.replace(r,r.replace(i,a))})),t}function ale(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=/^-{2}/;return Object.keys(t).reduce((function(e,r){var i=n.test(r)?r:"--".concat(r.replace(/^-+/,""));return e[i]=t[r],e}),{})}function LF(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:location.href,e=document.implementation.createHTMLDocument(""),r=e.createElement("base"),i=e.createElement("a");return e.head.appendChild(r),e.body.appendChild(i),r.href=n,i.href=t,i.href}function TN(){return eT&&(window.performance||{}).now?window.performance.now():new Date().getTime()}function hI(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,e=[].slice.call(t.querySelectorAll('[data-cssvars="skip"],[data-cssvars="src"]'));e.forEach((function(r){return r.setAttribute("data-cssvars","")})),n&&(ea.dom={})}function Zw(t){var n=R.useRef(t);n.current=t,R.useLayoutEffect(function(){return function(){n.current()}},[])}function sle(t,n){var e,r,i=R.useState(typeof window<"u"&&(r=(e=window?.navigator)===null||e===void 0?void 0:e.onLine)!==null&&r!==void 0?r:!0),a=i[0],s=i[1];return R.useEffect(function(){var o=Ll();try{n.warning("sdk changed",o);var u=new o5({onDisconnected:function(){s(!1),n.warning("onDisconnected",{isOnline:a})},onReconnectStarted:function(){s(!1),n.warning("onReconnectStarted",{isOnline:a})},onReconnectSucceeded:function(){s(!0),n.warning("onReconnectSucceeded",{isOnline:a})},onReconnectFailed:function(){t.reconnect(),n.warning("onReconnectFailed")}});t?.addConnectionHandler&&(t.addConnectionHandler(o,u),n.info("Added ConnectionHandler",o))}catch{}return function(){try{t.removeConnectionHandler(o),n.info("Removed ConnectionHandler",o)}catch{}}},[t]),R.useEffect(function(){var o=function(){try{n.warning("Try reconnecting SDK"),t.connectionState!=="OPEN"&&t.reconnect()}catch{}};return window.addEventListener("online",o),function(){window.removeEventListener("online",o)}},[t]),R.useEffect(function(){var o=document.querySelector("body");if(!a&&!t?.isCacheEnabled)try{o?.classList.add("sendbird__offline"),n.info("Added class sendbird__offline to body")}catch{}else try{o?.classList.remove("sendbird__offline"),n.info("Removed class sendbird__offline from body")}catch{}},[a,t?.isCacheEnabled]),a}var ole=2e3;function kF(t){var n=t.logger,e=t.timeout,r=t.cb,i=[],a=null,s=function(u){var c=i.find(function(p){return p.url===u.url});if(c?n.info("Channel: Mark as read already in queue",{channel:u}):i.push(u),!a){var h=i.shift();h&&r(h),a=setInterval(function(){if(i.length===0&&a){clearInterval(a),a=null;return}var p=i.shift();p&&r(p)},e||ole)}},o=function(){i=[],a&&(clearInterval(a),a=null)};return{push:s,clear:o,getQueue:function(){return i}}}function lle(t,n){var e=this,r=t.isConnected,i=n.logger,a=R.useMemo(function(){return kF({logger:i,cb:function(s){return si(e,void 0,void 0,function(){var o;return oi(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,s.markAsDelivered()];case 1:return u.sent(),[3,3];case 2:return o=u.sent(),i?.warning("Channel: Mark as delivered failed",{channel:s,error:o}),[3,3];case 3:return[2]}})})}})},[]);return R.useEffect(function(){r||a.clear()},[r]),Zw(function(){a.clear()}),a}var Wx="sendbird-sort-by-row";function ule(t){var n=t.className,e=n===void 0?"":n,r=t.maxItemCount,i=t.itemWidth,a=t.itemHeight,s=t.children;if(Array.isArray(s)&&s.length>r){for(var o=[],u=0;u<s.length;u+=r)o.push(E.createElement("div",{className:Xe(Xe([],Array.isArray(e)?e:[e],!0),[Wx],!1).join(" "),key:Ll(),style:{width:i*r,height:a}},s.slice(u,u+r)));return E.createElement(E.Fragment,null,o)}return E.createElement("div",{className:Xe(Xe([],Array.isArray(e)?e:[e],!0),[Wx],!1).join(" "),style:{width:i*(Array.isArray(s)?s.length:1),height:a}},s)}var Qr;(function(t){t.NONE="NONE",t.PENDING="PENDING",t.SENT="SENT",t.FAILED="FAILED",t.DELIVERED="DELIVERED",t.READ="READ"})(Qr||(Qr={}));var PF=function(t,n){var e,r,i,a,s;if(!n||!("sendingStatus"in n))return Qr.NONE;if(n.sendingStatus==="pending")return Qr.PENDING;if(n.sendingStatus==="failed")return Qr.FAILED;if(!((e=t?.isGroupChannel)===null||e===void 0)&&e.call(t)){if(((i=(r=t).getUnreadMemberCount)===null||i===void 0?void 0:i.call(r,n))===0)return Qr.READ;if(((s=(a=t).getUndeliveredMemberCount)===null||s===void 0?void 0:s.call(a,n))===0)return Qr.DELIVERED}return n.sendingStatus==="succeeded"?Qr.SENT:Qr.NONE};function gS(t){"@babel/helpers - typeof";return gS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},gS(t)}function Bi(t,n){if(n.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+n.length+" present")}function So(t){Bi(1,arguments);var n=Object.prototype.toString.call(t);return t instanceof Date||gS(t)==="object"&&n==="[object Date]"?new Date(t.getTime()):typeof t=="number"||n==="[object Number]"?new Date(t):((typeof t=="string"||n==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}var NN,qh={IMAGE:["image/jpeg","image/jpg","image/png","image/gif","image/svg+xml","image/webp","image/bmp"],VIDEO:["video/mpeg","video/ogg","video/webm","video/mp4"],AUDIO:["audio/aac","audio/midi","audio/x-midi","audio/mpeg","audio/ogg","audio/opus","audio/wav","audio/webm","audio/3gpp","audio/3gpp2","audio/mp3"],DOCUMENT:["text/plain","text/css","text/csv","text/html","text/calendar","text/javascript","text/xml","text/x-log","video/quicktime"],APPLICATION:["application/x-abiword","application/x-freearc","application/vnd.amazon.ebook","application/octet-stream","application/x-bzip","application/x-bzip2","application/x-cdf","application/x-csh","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-fontobject","application/epub+zip","application/gzip","application/java-archive","application/json","application/ld+json","application/vnd.apple.installer+xml","application/vnd.oasis.opendocument.presentation","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.text","application/ogg","application/pdf","application/x-httpd-php","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.rar","application/rtf","application/x-sh","application/x-tar","application/vnd.visio","application/xhtml+xml","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/xml","application/vnd.mozilla.xul+xml","application/zip","application/x-7z-compressed"],ARCHIVE:["application/zip","application/x-rar-compressed","application/x-7z-compressed","application/x-tar","application/gzip","application/x-bzip","application/x-bzip2","application/x-xz","application/x-iso9660-image"]},q0={IMAGE:[".apng",".avif",".gif",".jpg",".jpeg",".jfif",".pjpeg",".pjp",".png",".svg",".webp",".bmp",".ico",".cur",".tif",".tiff",".heic",".heif"],VIDEO:[".mp4",".webm",".ogv",".3gp",".3g2",".avi",".mov",".wmv",".mpg",".mpeg",".m4v",".mkv"],AUDIO:[".aac",".midi",".mp3",".oga",".opus",".wav",".weba",".3gp",".3g2"],DOCUMENT:[".txt",".log",".csv",".rtf",".pdf",".doc",".docx",".xls",".xlsx",".ppt",".pptx"],ARCHIVE:[".zip",".rar",".7z",".tar",".gz",".bz2",".xz",".iso"]},cle=function(t){if(Array.isArray(t)&&t.length>0){var n=t.reduce(function(e,r){var i=r.toLowerCase();switch(i){case"image":{e.push.apply(e,Xe(Xe([],qh.IMAGE,!1),q0.IMAGE,!1));break}case"video":{e.push.apply(e,Xe(Xe([],qh.VIDEO,!1),q0.VIDEO,!1));break}case"audio":{e.push.apply(e,Xe(Xe([],qh.AUDIO,!1),q0.AUDIO,!1));break}case"archive":{e.push.apply(e,Xe(Xe([],qh.ARCHIVE,!1),q0.ARCHIVE,!1));break}default:{e.push(r);break}}return e},[]);return Array.from(new Set(n)).join(",")}return Xe(Xe([],Object.values(qh).flat(),!0),Object.values(q0).flat(),!0).join(",")},dc={ADMIN:"ADMIN",TEXT:"TEXT",FILE:"FILE",MULTIPLE_FILES:"MULTIPLE_FILES",THUMBNAIL:"THUMBNAIL",OG:"OG",UNKNOWN:"UNKNOWN"},Kv={IMAGE:"IMAGE",AUDIO:"AUDIO",VIDEO:"VIDEO",GIF:"GIF",VOICE:"VOICE",OTHERS:"OTHERS"},dle=function(t){return t==="video/quicktime"},hle=function(t){return zw(navigator.userAgent)&&dle(t)},xd=function(t){return qh.IMAGE.indexOf(t)>=0},uf=function(t){return qh.VIDEO.indexOf(t)>=0||hle(t)},NE=function(t){return t==="image/gif"},Jy=function(t){return xd(t)||uf(t)},FF=function(t){return qh.AUDIO.indexOf(t)>=0},fle=function(){return J({},Kv)},BF=function(t){return NE(t)?Kv.GIF:xd(t)?Kv.IMAGE:uf(t)?Kv.VIDEO:FF(t)?Kv.AUDIO:Kv.OTHERS},eE=function(t){return t.sendingStatus==="succeeded"},Qx=function(t,n){return PF(t,n)===Qr.READ},hs=function(t){return t?.sendingStatus==="failed"},Eo=function(t){return t?.sendingStatus==="pending"},vle=function(t){return t===Qr.SENT||t===Qr.DELIVERED||t===Qr.READ},Jw=function(t){return t&&(t.isAdminMessage&&typeof t.isAdminMessage=="function"?t.isAdminMessage():t?.messageType==="admin")},Ks=function(t){return t&&(t.isUserMessage&&typeof t.isUserMessage=="function"?t.isUserMessage():t?.messageType==="user")},gs=function(t){return!!t&&(t.isFileMessage&&typeof t.isFileMessage=="function"?t.isFileMessage():t?.messageType==="file")},js=function(t){return t&&(t.isMultipleFilesMessage&&typeof t.isMultipleFilesMessage=="function"?t.isMultipleFilesMessage():t.messageType==="file"&&Object.prototype.hasOwnProperty.call(t,"fileInfoList"))},HF=function(t){return!!t.parentMessageId&&!!t.parentMessage},GF=function(t){return!!t.messageForm},fI=function(t){var n;return!!(t&&(!((n=t.extendedMessagePayload)===null||n===void 0)&&n[SE]))},VF=function(t){var n=t.type;return!(n&&!zF[n])},zF={default:"default"},ple=(NN={},NN[zF.default]="ui_container_type__default",NN),e3=function(t){return!t||!Ks(t)?!1:!!t.ogMetaData&&!!(t.ogMetaData.url||t.ogMetaData.title||t.ogMetaData.description||t.ogMetaData.defaultImage)},mle=function(t){return Ks(t)},pf=function(t){return!t||!gs(t)?!1:Jy(t.type)},jF=function(t){return!t||!gs(t)?!1:pf(t)&&xd(t.type)},pg=function(t){return!t||!gs(t)?!1:pf(t)&&uf(t.type)},vI=function(t){return!t||!gs(t)?!1:pf(t)&&NE(t.type)},gle=function(t){return!t||!gs(t)?!1:FF(t.type)},_le=function(t){return t?!!t.mimeType&&(xd(t.mimeType)||NE(t.mimeType)):!1},yle=function(t){return/^audio\//.test(t)},Ele=function(t){return/^voice\//.test(t)},cf=function(t){var n,e,r,i;if(!t||!gs(t)||!t.type)return!1;var a=t.type.split(";"),s=a[0],o=a[1];if(!yle(s))return!1;if(o){var u=o.split("="),c=u[0],h=u[1];return c==="sbu_type"&&h==="voice"}return Ele((i=(r=(e=(n=t?.metaArrays)===null||n===void 0?void 0:n.find(function(p){return p.key==="KEY_INTERNAL_MESSAGE_TYPE"}))===null||e===void 0?void 0:e.value)===null||r===void 0?void 0:r[0])!==null&&i!==void 0?i:"")},t3=function(t){return Ks(t)&&t?.updatedAt>0},ble=function(){return J({},dc)},n3=function(t){return Jw(t)?dc.ADMIN:Ks(t)?e3(t)?dc.OG:dc.TEXT:js(t)?dc.MULTIPLE_FILES:gs(t)?pf(t)?dc.THUMBNAIL:cf(t)?Kv.VOICE:dc.FILE:dc.UNKNOWN},Cle=function(t,n){return Array.isArray(n)?Xe(Xe([],t,!0),n,!0):(t.push(n),t)},Qs=function(t){return Array.isArray(t)?t.reduce(Cle,[]).join(" "):t},qF=function(t,n){return n.userIds.some(function(e){return e===t})},Sle=function(t,n,e,r){var i="";return qF(n,t)&&(i=t.userIds.length===1?r.TOOLTIP__YOU:r.TOOLTIP__AND_YOU),"".concat(t.userIds.filter(function(a){return a!==n}).map(function(a){return e.get(a)||r.TOOLTIP__UNKNOWN_USER}).join(", ")).concat(i)};function $F(t){var n;return t?.extendedMessagePayload&&Array.isArray((n=t?.extendedMessagePayload)===null||n===void 0?void 0:n.suggested_replies)?t.extendedMessagePayload.suggested_replies:[]}var KF=function(t,n){if(n||(n=40),t==null)return"";if(t.length<=n)return t;var e="...",r=e.length,i=n-r,a=Math.ceil(i/2),s=Math.floor(i/2);return t.substr(0,a)+e+t.substr(t.length-s)},r3=function(t){if(window.clipboardData&&window.clipboardData.setData)return window.clipboardData.setData("Text",t);if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var n=document.createElement("textarea");n.textContent=t,n.style.position="fixed",document.body.appendChild(n),n.select();try{return document.execCommand("copy")}catch{return!1}finally{document.body.removeChild(n)}}return!1},i3=function(t){var n;return(n=t?.emojiCategories)===null||n===void 0?void 0:n.map(function(e){return e.emojis}).reduce(function(e,r){return e.concat(r)},[])},Tle=function(t){var n,e=new Map;return(n=t?.emojiCategories)===null||n===void 0||n.forEach(function(r){var i;(i=r?.emojis)===null||i===void 0||i.forEach(function(a){a&&a.key&&e.set(a.key,a)})}),e},pI=function(t,n){var e;return n?((e=t?.emojiCategories)===null||e===void 0?void 0:e.filter(function(r){return n.includes(r.id)}).flatMap(function(r){return r.emojis}))||[]:i3(t)||[]},Nle=function(t){return function(n){var e=n.key;return e===t}},Ale=function(t,n){var e,r,i=Nle(n??"");return((r=(e=t?.emojiCategories.find(function(a){return a.emojis.some(i)}))===null||e===void 0?void 0:e.emojis.find(i))===null||r===void 0?void 0:r.url)||""},Mle=function(t){return t?.friendName||t?.nickname||t?.userId},Ile=function(t){return t?.sender&&Mle(t?.sender)},Xx=function(t,n){var e,r,i,a,s=t.customTypesFilter,o=s===void 0?[]:s;if(t?.messageTypeFilter&&t.messageTypeFilter!==n.messageType)return!1;if(o?.length>0){var u=o.filter(function(h){return h!=="*"});if(u.length>0&&!u.includes(n.customType))return!1}if(t?.senderUserIdsFilter&&((e=t?.senderUserIdsFilter)===null||e===void 0?void 0:e.length)>0)if(!((r=n?.isUserMessage)===null||r===void 0)&&r.call(n)||!((i=n?.isFileMessage)===null||i===void 0)&&i.call(n)){var c=n.sender||n._sender;if(!(!((a=t?.senderUserIdsFilter)===null||a===void 0)&&a.includes(c?.userId)))return!1}else return!1;return!(!t?.includeParentMessageInfo&&(n?.parentMessageId||n?.parentMessage))},Zx;(function(t){t.normal="normal",t.mention="mention",t.url="url"})(Zx||(Zx={}));var wle=function(t,n){if(Array.isArray(t)&&Array.isArray(n)&&t.length===n.length){for(var e=0;e<t.length;e++)if(t[e]!==n[e])return!1;return!0}return!1},AE=function(t){return!!t&&"sender"in t},Rle=function(t,n){return n?"ltr":t},Ole="Group Channel",Dle="AI Chatbot Widget Channel",Ule=function(t){return!t?.name||t.name===Ole||t.name===Dle},YF="sendbird-app__layout",xle=60,Lle=(function(t){Dk(n,t);function n(e){var r=t.call(this,e)||this;return r.menuRef=E.createRef(),r.setupEvents=function(){var i=r.props.closeDropdown,a=r.menuRef,s=function(o){var u,c;a?.current&&!(!((c=(u=a?.current)===null||u===void 0?void 0:u.contains)===null||c===void 0)&&c.call(u,o.target))&&i?.()};r.setState({handleClickOutside:s}),document.addEventListener("mousedown",s)},r.cleanUpEvents=function(){var i=r.state.handleClickOutside;document.removeEventListener("mousedown",i)},r.getMenuPosition=function(){var i,a,s,o=r.props,u=o.parentRef,c=o.openLeft,h=document.getElementById(YF),p=((i=h?.getBoundingClientRect)===null||i===void 0?void 0:i.call(h))||{top:0,left:0,width:window.innerWidth,height:window.innerHeight},m=(s=(a=u?.current)===null||a===void 0?void 0:a.getBoundingClientRect)===null||s===void 0?void 0:s.call(a),_=(m?.x||m?.left||0)-p.left,b=(m?.y||m?.top||0)-p.top,C={top:b,left:_};if(!r.menuRef.current)return C;var N=r.menuRef.current.getBoundingClientRect();if(b+N.height+xle>p.height&&(C.top-=N.height),_+N.width>p.width&&!c&&(C.left-=N.width),C.top<0&&(C.top=N.height<p.height?(p.height-N.height)/2:0),C.top+=32,c){var S=Number.isNaN(N.width-30)?108:N.width-30;C.left-=S}return C.left<0&&(C.left=N.width<p.width?(p.width-N.width)/2:0),r.setState({menuStyle:C}),C},r.state={menuStyle:{top:0,left:0},handleClickOutside:function(){}},r}return n.prototype.componentDidMount=function(){this.setupEvents(),this.getMenuPosition()},n.prototype.componentWillUnmount=function(){this.cleanUpEvents()},n.prototype.render=function(){var e=document.getElementById(_S);if(!e)return E.createElement(E.Fragment,null);var r=this.state.menuStyle,i=this.props,a=i.children,s=i.style,o=i.className,u=o===void 0?"":o,c=i.testID,h=i.id;return Lg.createPortal(E.createElement("div",{className:Hn(s3,u),"data-testid":c,id:h},E.createElement("div",{className:"sendbird-dropdown__menu-backdrop"}),E.createElement("ul",{className:"".concat(u," sendbird-dropdown__menu"),ref:this.menuRef,style:J({display:"inline-block",position:"fixed",left:"".concat(Math.round(r.left),"px"),top:"".concat(Math.round(r.top),"px")},s),"data-testid":"sendbird-dropdown-menu"},a)),e)},n})(E.Component),kle={x:0,y:0,left:0,top:0,height:0},Ple=function(t){var n=t.id,e=t.children,r=t.parentRef,i=t.parentContainRef,a=t.spaceFromTrigger,s=a===void 0?{x:0,y:0}:a,o=t.closeDropdown,u=R.useState({left:0,top:0}),c=u[0],h=u[1],p=R.useRef(null);R.useEffect(function(){return i&&i?.current&&i.current.classList.add("sendbird-reactions--pressed"),function(){i&&i?.current&&i.current.classList.remove("sendbird-reactions--pressed")}},[]),R.useEffect(function(){var _=function(b){var C,N;p?.current&&!(!((N=(C=p?.current)===null||C===void 0?void 0:C.contains)===null||N===void 0)&&N.call(C,b.target))&&o()};return document.addEventListener("mousedown",_),function(){document.removeEventListener("mousedown",_)}},[]),R.useEffect(function(){var _,b,C,N,S=s?.x||0,M=s?.y||0,w=document.getElementById(YF),U=((_=w?.getBoundingClientRect)===null||_===void 0?void 0:_.call(w))||{top:0,left:0,width:window.innerWidth},L=(C=(b=r?.current)===null||b===void 0?void 0:b.getBoundingClientRect())!==null&&C!==void 0?C:kle,P=(L?.x||L?.left||0)-U.left,x=(L?.y||L?.top||0)-U.top,H={top:x,left:P};if(!p?.current)h(H);else{var F=(N=p?.current)===null||N===void 0?void 0:N.getBoundingClientRect();H.top<F.height?(H.top+=L.height,H.top+=M):(H.top-=F.height,H.top-=M),H.left-=F.width/2,H.left+=L.height/2-2,H.left+=S;var Q=U.width-F.width;Q<H.left&&(H.left=Q),H.left<0&&(H.left=0),h(H)}},[e]);var m=document.getElementById(l3);return m?Lg.createPortal(E.createElement("div",{className:s3,id:n},E.createElement("div",{className:"sendbird-dropdown__menu-backdrop"}),E.createElement("ul",{className:"sendbird-dropdown__reaction-bar","data-testid":"sendbird-dropdown__reaction-bar",ref:p,style:{display:"inline-block",position:"fixed",left:"".concat(Math.round(c.left),"px"),top:"".concat(Math.round(c.top),"px")}},R.Children.count(e)<=0?E.createElement($e,{className:"sendbird-dropdown__reaction-bar__emptyLabel",type:Ge.BODY_1,color:De.ONBACKGROUND_1},"Emojis is not loaded yet."):E.createElement(ule,{className:"sendbird-dropdown__reaction-bar__row",maxItemCount:8,itemWidth:44,itemHeight:40},e))),m):null},WF=R.createContext(void 0),a3=function(t){var n=t.children,e=t.value;return E.createElement(WF.Provider,{value:e},n)},Ri=function(){var t=R.useContext(WF);if(!t)throw new Error("useMessageMenuContext must be used within a MessageMenuProvider.");return t},Wa=function(t){var n=t.className,e=t.disabled,r=t.tabIndex,i=r===void 0?0:r,a=t.testID,s=t.onClick,o=t.children,u=function(c){!e&&s&&s(c)};return E.createElement("li",{className:Hn("sendbird-menu-item",n),role:"menuitem","aria-disabled":e,"data-testid":a,tabIndex:i,onClick:u,onKeyDown:function(c){c.code==="Enter"&&u(c)}},E.createElement($e,{className:"sendbird-menu-item__text",type:Ge.SUBTITLE_2,color:e?De.ONBACKGROUND_4:De.ONBACKGROUND_1},o))},mf=function(t){var n=t.className,e=t.disabled,r=e===void 0?!1:e,i=t.tabIndex,a=i===void 0?0:i,s=t.testID,o=t.onClick,u=t.children;return E.createElement("div",{className:Hn("sendbird-message__bottomsheet--action",n),role:"menuitem",tabIndex:a,"aria-disabled":r,onClick:o,"data-testid":s},u)},s3="sendbird-observing-message-menu",o3=function(t){return"m_".concat(t)},To=Lle,QF=Ple,Ka=function(t){var n=t.className,e=n===void 0?"":n,r=t.children,i=t.onClick,a=t.disable,s=a===void 0?!1:a,o=t.dataSbId,u=o===void 0?"":o,c=t.testID;return E.createElement(Wa,{className:Hn.apply(void 0,Xe(Xe([],Array.isArray(e)?e:[e],!1),["sendbird-dropdown__menu-item",s?"disable":""],!1)),disabled:s,testID:c??u,onClick:i},r)},_S="sendbird-dropdown-portal",Fle=function(){return E.createElement("div",{id:_S,className:_S})},l3="sendbird-emoji-list-portal",Ble=function(){return E.createElement("div",{id:l3})};function No(t){var n=t.menuTrigger,e=t.menuItems,r=t.isOpen,i=t.onClick,a=R.useState(!1),s=a[0],o=a[1];return E.createElement("div",{className:"sendbird-context-menu",onClick:i},n?.(function(){return o(!s)}),(s||r)&&e(function(){return o(!1)}))}function Hle(t){var n=R.useRef(t);return uF(t,n.current)||(n.current=t),n.current}function Gle(t,n){R.useEffect(t,n.map(Hle))}function Vle(t){var n,e,r,i,a,s,o,u,c,h,p,m,_,b,C,N,S,M,w,U,L,P,x,H,F,Q,$,q,X,V,ee,z,ie,se=t.legacyConfig,he=t.uikitOptions,pe=he===void 0?{}:he,K=se.replyType,ce=se.isMentionEnabled,me=se.isReactionEnabled,Le=se.disableUserProfile,ge=se.isVoiceMessageEnabled,Ee=se.isTypingIndicatorEnabledOnChannelList,Ye=se.isMessageReceiptStatusEnabledOnChannelList,tt=se.showSearchIcon;return{common:{enableUsingDefaultUserProfile:(e=(n=pe.common)===null||n===void 0?void 0:n.enableUsingDefaultUserProfile)!==null&&e!==void 0?e:typeof Le=="boolean"?!Le:void 0},groupChannel:{enableOgtag:(r=pe.groupChannel)===null||r===void 0?void 0:r.enableOgtag,enableMention:(a=(i=pe.groupChannel)===null||i===void 0?void 0:i.enableMention)!==null&&a!==void 0?a:ce,enableReactions:(o=(s=pe.groupChannel)===null||s===void 0?void 0:s.enableReactions)!==null&&o!==void 0?o:me,enableReactionsSupergroup:(u=pe.groupChannel)===null||u===void 0?void 0:u.enableReactionsSupergroup,enableTypingIndicator:(c=pe.groupChannel)===null||c===void 0?void 0:c.enableTypingIndicator,enableVoiceMessage:(p=(h=pe.groupChannel)===null||h===void 0?void 0:h.enableVoiceMessage)!==null&&p!==void 0?p:ge,replyType:(_=(m=pe.groupChannel)===null||m===void 0?void 0:m.replyType)!==null&&_!==void 0?_:K!=null?Gw(K).lowerCase:void 0,threadReplySelectType:(b=pe.groupChannel)===null||b===void 0?void 0:b.threadReplySelectType,input:{enableDocument:(N=(C=pe.groupChannel)===null||C===void 0?void 0:C.input)===null||N===void 0?void 0:N.enableDocument},typingIndicatorTypes:(S=pe.groupChannel)===null||S===void 0?void 0:S.typingIndicatorTypes,enableFeedback:(M=pe.groupChannel)===null||M===void 0?void 0:M.enableFeedback,enableSuggestedReplies:(w=pe.groupChannel)===null||w===void 0?void 0:w.enableSuggestedReplies,showSuggestedRepliesFor:(U=pe.groupChannel)===null||U===void 0?void 0:U.showSuggestedRepliesFor,suggestedRepliesDirection:(L=pe.groupChannel)===null||L===void 0?void 0:L.suggestedRepliesDirection,enableMarkdownForUserMessage:(P=pe.groupChannel)===null||P===void 0?void 0:P.enableMarkdownForUserMessage,enableFormTypeMessage:(x=pe.groupChannel)===null||x===void 0?void 0:x.enableFormTypeMessage,enableMarkAsUnread:(H=pe.groupChannel)===null||H===void 0?void 0:H.enableMarkAsUnread},groupChannelList:{enableTypingIndicator:(Q=(F=pe.groupChannelList)===null||F===void 0?void 0:F.enableTypingIndicator)!==null&&Q!==void 0?Q:Ee,enableMessageReceiptStatus:(q=($=pe.groupChannelList)===null||$===void 0?void 0:$.enableMessageReceiptStatus)!==null&&q!==void 0?q:Ye},groupChannelSettings:{enableMessageSearch:(V=(X=pe.groupChannelSettings)===null||X===void 0?void 0:X.enableMessageSearch)!==null&&V!==void 0?V:tt},openChannel:{enableOgtag:(ee=pe.openChannel)===null||ee===void 0?void 0:ee.enableOgtag,input:{enableDocument:(ie=(z=pe.openChannel)===null||z===void 0?void 0:z.input)===null||ie===void 0?void 0:ie.enableDocument}}}}var zle=function(t){var n=t.children;return E.createElement(Uae,null,E.createElement(xoe,null,n))},Ko={DEBUG:"debug",WARNING:"warning",ERROR:"error",INFO:"info",ALL:"all"},jle=function(t){switch(t){case Ko.WARNING:return"color: Orange";case Ko.ERROR:return"color: Red";default:return"color: Gray"}},qle=function(t){var n=t.level,e=t.title,r=t.description,i=r===void 0?"":r,a=t.payload,s=a===void 0?[]:a;console.log.apply(console,Xe(["%c SendbirdUIKit | ".concat(n," | ").concat(new Date().toISOString()," | ").concat(e," ").concat(i&&"|"),jle(n),i],s,!1))},$le=function(){return{info:Mr,error:Mr,warning:Mr}},Jx=function(t,n){var e=qle,r=Array.isArray(t)?t:[t],i=function(a){return function(s,o){for(var u=[],c=2;c<arguments.length;c++)u[c-2]=arguments[c];return e({level:a,title:s,description:o,payload:u})}};return r.reduce(function(a,s){return s===Ko.DEBUG||s===Ko.ALL?J(J({},a),{info:i(Ko.INFO),error:i(Ko.ERROR),warning:i(Ko.WARNING)}):s===Ko.INFO?J(J({},a),{info:i(Ko.INFO)}):s===Ko.ERROR?J(J({},a),{error:i(Ko.ERROR)}):s===Ko.WARNING?J(J({},a),{warning:i(Ko.WARNING)}):J({},a)},$le())},Kle={"--sendbird-dark-primary-500":"#4d2aa6","--sendbird-dark-primary-400":"#6440C4","--sendbird-dark-primary-300":"#7B53EF","--sendbird-dark-primary-200":"#9E8CF5","--sendbird-dark-primary-100":"#E2DFFF","--sendbird-dark-secondary-500":"#007A7A","--sendbird-dark-secondary-400":"#189A8D","--sendbird-dark-secondary-300":"#2EBA9F","--sendbird-dark-secondary-200":"#6FD6BE","--sendbird-dark-secondary-100":"#AEF2DC","--sendbird-dark-information-100":"#b2d9ff","--sendbird-dark-error-500":"#A30E2D","--sendbird-dark-error-400":"#C11F41","--sendbird-dark-error-300":"#E53157","--sendbird-dark-error-200":"#FF6183","--sendbird-dark-error-100":"#FFABBD","--sendbird-dark-background-700":"#000000","--sendbird-dark-background-600":"#161616","--sendbird-dark-background-500":"#2C2C2C","--sendbird-dark-background-400":"#393939","--sendbird-dark-background-300":"#A8A8A8","--sendbird-dark-background-200":"#D9D9D9","--sendbird-dark-background-100":"#F0F0F0","--sendbird-dark-background-50":"#FFFFFF","--sendbird-dark-overlay":"rgba(0, 0, 0, 0.32)","--sendbird-dark-onlight-01":"rgba(0, 0, 0, 0.88)","--sendbird-dark-onlight-02":"rgba(0, 0, 0, 0.50)","--sendbird-dark-onlight-03":"rgba(0, 0, 0, 0.38)","--sendbird-dark-onlight-04":"rgba(0, 0, 0, 0.12)","--sendbird-dark-ondark-01":"rgba(255, 255, 255, 0.88)","--sendbird-dark-ondark-02":"rgba(255, 255, 255, 0.50)","--sendbird-dark-ondark-03":"rgba(255, 255, 255, 0.38)","--sendbird-dark-ondark-04":"rgba(255, 255, 255, 0.12)","--sendbird-dark-shadow-01":"0 1px 5px 0 rgba(33, 34, 66, 0.04), 0 0 3px 0 rgba(0, 0, 0, 0.08), 0 2px 1px 0 rgba(0, 0, 0, 0.12)","--sendbird-dark-shadow-02":"0 3px 5px -3px rgba(33, 34, 66, 0.04), 0 3px 14px 2px rgba(0, 0, 0, 0.08), 0 8px 10px 1px rgba(0, 0, 0, 0.12)","--sendbird-dark-shadow-03":"0 6px 10px -5px rgba(0, 0, 0, 0.04), 0 6px 30px 5px rgba(0, 0, 0, 0.08), 0 16px 24px 2px rgba(0, 0, 0, 0.12)","--sendbird-dark-shadow-04":"0 9px 15px -7px rgba(0, 0, 0, 0.04), 0 9px 46px 8px rgba(0, 0, 0, 0.08), 0 24px 38px 3px rgba(0, 0, 0, 0.12)","--sendbird-dark-shadow-message-input":"0 1px 5px 0 rgba(33, 34, 66, 0.12), 0 0 1px 0 rgba(33, 34, 66, 0.16), 0 2px 1px 0 rgba(33, 34, 66, 0.08), 0 1px 5px 0 rgba(0, 0, 0, 0.12)","--sendbird-light-primary-500":"#4d2aa6","--sendbird-light-primary-400":"#6440C4","--sendbird-light-primary-300":"#7B53EF","--sendbird-light-primary-200":"#9E8CF5","--sendbird-light-primary-100":"#E2DFFF","--sendbird-light-secondary-500":"#007A7A","--sendbird-light-secondary-400":"#189A8D","--sendbird-light-secondary-300":"#2EBA9F","--sendbird-light-secondary-200":"#6FD6BE","--sendbird-light-secondary-100":"#AEF2DC","--sendbird-light-information-100":"#b2d9ff","--sendbird-light-error-500":"#A30E2D","--sendbird-light-error-400":"#C11F41","--sendbird-light-error-300":"#E53157","--sendbird-light-error-200":"#FF6183","--sendbird-light-error-100":"#FFABBD","--sendbird-light-background-700":"#000000","--sendbird-light-background-600":"#161616","--sendbird-light-background-500":"#2C2C2C","--sendbird-light-background-400":"#393939","--sendbird-light-background-300":"#A8A8A8","--sendbird-light-background-200":"#D9D9D9","--sendbird-light-background-100":"#F0F0F0","--sendbird-light-background-50":" #FFFFFF","--sendbird-light-overlay":"rgba(0, 0, 0, 0.32)","--sendbird-light-onlight-01":"rgba(0, 0, 0, 0.88)","--sendbird-light-onlight-02":"rgba(0, 0, 0, 0.50)","--sendbird-light-onlight-03":"rgba(0, 0, 0, 0.38)","--sendbird-light-onlight-04":"rgba(0, 0, 0, 0.12)","--sendbird-light-ondark-01":"rgba(255, 255, 255, 0.88)","--sendbird-light-ondark-02":"rgba(255, 255, 255, 0.50)","--sendbird-light-ondark-03":"rgba(255, 255, 255, 0.38)","--sendbird-light-ondark-04":"rgba(255, 255, 255, 0.12)","--sendbird-light-shadow-01":"0 1px 5px 0 rgba(33, 34, 66, 0.04), 0 0 3px 0 rgba(0, 0, 0, 0.08), 0 2px 1px 0 rgba(0, 0, 0, 0.12)","--sendbird-light-shadow-02":"0 3px 5px -3px rgba(33, 34, 66, 0.04), 0 3px 14px 2px rgba(0, 0, 0, 0.08), 0 8px 10px 1px rgba(0, 0, 0, 0.12)","--sendbird-light-shadow-03":"0 6px 10px -5px rgba(0, 0, 0, 0.04), 0 6px 30px 5px rgba(0, 0, 0, 0.08), 0 16px 24px 2px rgba(0, 0, 0, 0.12)","--sendbird-light-shadow-04":"0 9px 15px -7px rgba(0, 0, 0, 0.04), 0 9px 46px 8px rgba(0, 0, 0, 0.08), 0 24px 38px 3px rgba(0, 0, 0, 0.12)","--sendbird-light-shadow-message-input":"0 1px 5px 0 rgba(33, 34, 66, 0.12), 0 0 1px 0 rgba(33, 34, 66, 0.16), 0 2px 1px 0 rgba(33, 34, 66, 0.08), 0 1px 5px 0 rgba(0, 0, 0, 0.12)"},Yle=function(t){if(t==null)return!0;for(var n in t)if(t.hasOwnProperty(n))return!1;return JSON.stringify(t)===JSON.stringify({})},Wle=function(t){R.useLayoutEffect(function(){if(!Yle(t)){var n=J(J({},Kle),Woe(t));hd({variables:n})}},[t])},Qle=20,XF=function(t){return{version:Number(t.ui_template.version),uiTemplate:JSON.stringify(t.ui_template.body.items),colorVariables:t.color_variables}},eL=function(t){var n={};return t.forEach(function(e){n[e.key]=XF(e)}),n};function Xle(t){var n=this,e,r=t.sdk,i=t.logger,a=t.appInfoStore,s=t.actions,o=a?.messageTemplatesInfo,u=R.useCallback(function(m){var _,b;if(!o)return null;var C=null,N=(_=o?.templatesMap)!==null&&_!==void 0?_:null;return N&&(C=(b=N[m])!==null&&b!==void 0?b:null),C},[a?.messageTemplatesInfo]),c=function(m){return si(n,void 0,void 0,function(){var _,b,C,N;return oi(this,function(S){switch(S.label){case 0:_=!0,b=null,C=[],S.label=1;case 1:return _?[4,m.message.getMessageTemplatesByToken(b,{limit:Qle})]:[3,3];case 2:return N=S.sent(),_=N.hasMore,b=N.token,N.templates.forEach(function(M){C.push(JSON.parse(M.template))}),[3,1];case 3:return[2,C]}})})},h=function(m){return si(n,void 0,void 0,function(){var _,b,C,N,S,N,S,M;return oi(this,function(w){switch(w.label){case 0:return _=(M=m.appInfo)===null||M===void 0?void 0:M.messageTemplateInfo.token,_?(b=localStorage.getItem(fN),C=localStorage.getItem(Zm),!b||b!==_?[4,c(m)]:[3,2]):(localStorage.removeItem(fN),localStorage.removeItem(Zm),[2]);case 1:return N=w.sent(),S={token:_,templatesMap:eL(N)},s.initMessageTemplateInfo({payload:S}),localStorage.setItem(fN,_),localStorage.setItem(Zm,JSON.stringify(N)),[3,3];case 2:b&&b===_&&C&&(N=JSON.parse(C),S={token:_,templatesMap:eL(N)},s.initMessageTemplateInfo({payload:S})),w.label=3;case 3:return[2]}})})},p=R.useCallback(function(m,_,b){return si(n,void 0,void 0,function(){var C,N,S,M,w,U,L,P,x;return oi(this,function(H){switch(H.label){case 0:s.upsertWaitingTemplateKeys({keys:m,requestedAt:b}),C=[],H.label=1;case 1:H.trys.push([1,5,,6]),N=!0,S=null,H.label=2;case 2:return N?[4,r.message.getMessageTemplatesByToken(S,{keys:m})]:[3,4];case 3:return M=H.sent(),M.templates.forEach(function(F){C.push(JSON.parse(F.template))}),N=M.hasMore,S=M.token,[3,2];case 4:return[3,6];case 5:return w=H.sent(),(x=i?.error)===null||x===void 0||x.call(i,"Sendbird | fetchProcessedMessageTemplates failed",w,m),[3,6];case 6:return C.length>0?(U=localStorage.getItem(Zm),U?(L=JSON.parse(U),P=L.map(function(F){return F.key}),C.forEach(function(F){P.includes(F.key)||L.push(F)}),localStorage.setItem(Zm,JSON.stringify(L))):localStorage.setItem(Zm,JSON.stringify([C])),s.upsertMessageTemplates({payload:C.map(function(F){return{key:F.key,template:XF(F)}})})):s.markErrorWaitingTemplateKeys({keys:m,messageId:_}),[2]}})})},[s.upsertMessageTemplates,s.upsertWaitingTemplateKeys,(e=r?.message)===null||e===void 0?void 0:e.getMessageTemplatesByToken]);return{getCachedTemplate:u,updateMessageTemplatesInfo:p,initializeMessageTemplatesInfo:h}}var Zle=function(t){R.useEffect(function(){var n=document.getElementById(wC);n.parentElement.dir=t},[t])};function Jle(t,n){var e=t.isConnected,r=n.logger,i=R.useMemo(function(){return kF({logger:r,cb:function(a){try{a.markAsRead()}catch(s){r.warning("Channel: Mark as delivered failed",{channel:a,error:s})}}})},[]);return R.useEffect(function(){e||i.clear()},[e]),Zw(function(){i.clear()}),i}var eue=function(t){var n,e=t.appId,r=t.userId,i=t.accessToken,a=t.customApiHost,s=t.customWebSocketHost,o=t.configureSession,u=t.theme,c=u===void 0?"light":u,h=t.logger,p=t.config,m=p===void 0?{}:p,_=t.nickname,b=_===void 0?"":_,C=t.colorSet,N=t.profileUrl,S=N===void 0?"":N,M=t.voiceRecord,w=t.userListQuery,U=t.imageCompression,L=U===void 0?{}:U,P=t.allowProfileEdit,x=P===void 0?!1:P,H=t.disableMarkAsDelivered,F=H===void 0?!1:H,Q=t.renderUserProfile,$=t.onUserProfileMessage,q=t.onStartDirectMessage,X=t.isUserIdUsedForNickname,V=X===void 0?!0:X,ee=t.sdkInitParams,z=t.customExtensionParams,ie=t.isMultipleFilesMessageEnabled,se=ie===void 0?!1:ie,he=t.eventHandlers,pe=t.htmlTextDirection,K=pe===void 0?"ltr":pe,ce=t.forceLeftToRightMessageLayout,me=ce===void 0?!1:ce,Le=q??$,ge=m.userMention,Ee=ge===void 0?{}:ge,Ye=m.isREMUnitEnabled,tt=Ye===void 0?!1:Ye,yt=m.pubSub,Ht=Ea().isMobile,zt=R.useState(yt??qoe())[0],Xt=uae(),Jt=Xt.state,Mt=Xt.updateState,jt=Zn().actions,en=Jt.stores,Dt=en.sdkStore,ln=en.appInfoStore,Yt=H5(),st=Yt.configs,ft=Yt.configsWithAppAttr,un=Yt.initDashboardConfigs,vt=Dt.initialized,_t=Dt?.sdk,Pt=(n=_t?.appInfo)!==null&&n!==void 0?n:{},Et=Pt.uploadSizeLimit,Ft=Pt.multipleFilesMessageFileCountLimit;Wle(C);var vn=Xle({sdk:_t,logger:h,appInfoStore:ln,actions:jt}),Je=vn.getCachedTemplate,Nn=vn.updateMessageTemplatesInfo,An=vn.initializeMessageTemplatesInfo;R.useEffect(function(){jt.connect({appId:e,userId:r,accessToken:i,isUserIdUsedForNickname:V,isMobile:Ht,logger:h,nickname:b,profileUrl:S,configureSession:o,customApiHost:a,customWebSocketHost:s,sdkInitParams:ee,customExtensionParams:z,initDashboardConfigs:un,eventHandlers:he,initializeMessageTemplatesInfo:An})},[e,r]),Zw(function(){jt.disconnect({logger:h})});var Mn=R.useState(c),Zt=Mn[0],Gt=Mn[1];R.useEffect(function(){Gt(c)},[c]),R.useEffect(function(){var ct=document.querySelector("body");ct?.classList.remove("sendbird-experimental__rem__units"),tt&&ct?.classList.add("sendbird-experimental__rem__units")},[tt]),R.useEffect(function(){h.info("Setup theme","Theme: ".concat(Zt));try{var ct=document.querySelector("body");ct?.classList.remove("sendbird-theme--light"),ct?.classList.remove("sendbird-theme--dark"),ct?.classList.add("sendbird-theme--".concat(Zt||"light")),h.info("Finish setup theme")}catch(En){h.warning("Setup theme failed","".concat(En))}return function(){try{var En=document.querySelector("body");En?.classList.remove("sendbird-theme--light"),En?.classList.remove("sendbird-theme--dark")}catch{}}},[Zt]),Zle(K);var xt=sle(Dt.sdk,h),Lt=Jle({isConnected:xt},{logger:h}),Cn=lle({isConnected:xt},{logger:h}),ir=R.useMemo(function(){return Math.min(K5,Ft??Number.MAX_SAFE_INTEGER)},[Ft]),It=R.useMemo(function(){if(Dt.initialized)return new $oe({sdk:_t,logger:h})},[Dt.initialized]),Rt=R.useMemo(function(){return{common:{enableUsingDefaultUserProfile:st.common.enableUsingDefaultUserProfile},groupChannel:{enableOgtag:vt&&ft(_t).groupChannel.channel.enableOgtag,enableTypingIndicator:st.groupChannel.channel.enableTypingIndicator,enableReactions:vt&&ft(_t).groupChannel.channel.enableReactions,enableMention:st.groupChannel.channel.enableMention,replyType:st.groupChannel.channel.replyType,threadReplySelectType:st.groupChannel.channel.threadReplySelectType,enableVoiceMessage:st.groupChannel.channel.enableVoiceMessage,enableDocument:st.groupChannel.channel.input.enableDocument,typingIndicatorTypes:st.groupChannel.channel.typingIndicatorTypes,enableFeedback:st.groupChannel.channel.enableFeedback,enableSuggestedReplies:st.groupChannel.channel.enableSuggestedReplies,showSuggestedRepliesFor:st.groupChannel.channel.showSuggestedRepliesFor,suggestedRepliesDirection:st.groupChannel.channel.suggestedRepliesDirection,enableMarkdownForUserMessage:st.groupChannel.channel.enableMarkdownForUserMessage,enableFormTypeMessage:st.groupChannel.channel.enableFormTypeMessage,enableMarkAsUnread:st.groupChannel.channel.enableMarkAsUnread,enableReactionsSupergroup:vt&&ft(_t).groupChannel.channel.enableReactionsSupergroup},groupChannelList:{enableTypingIndicator:st.groupChannel.channelList.enableTypingIndicator,enableMessageReceiptStatus:st.groupChannel.channelList.enableMessageReceiptStatus},groupChannelSettings:{enableMessageSearch:vt&&ft(_t).groupChannel.setting.enableMessageSearch},openChannel:{enableOgtag:vt&&ft(_t).openChannel.channel.enableOgtag,enableDocument:st.openChannel.channel.input.enableDocument}}},[vt,st.common,st.groupChannel.channel,st.groupChannel.channelList,st.groupChannel.setting,st.openChannel.channel]),Ct=R.useMemo(function(){return Et??YA},[Et,YA]),nt=R.useMemo(function(){return J({compressionRate:.7,outputFormat:"preserve"},L)},[L]),Te=R.useMemo(function(){var ct,En;return{maxRecordingTime:(ct=M?.maxRecordingTime)!==null&&ct!==void 0?ct:z5,minRecordingTime:(En=M?.minRecordingTime)!==null&&En!==void 0?En:Vw}},[M?.maxRecordingTime,M?.minRecordingTime]),it=R.useMemo(function(){return{maxMentionCount:Ee?.maxMentionCount||10,maxSuggestionCount:Ee?.maxSuggestionCount||15}},[Ee?.maxMentionCount,Ee?.maxSuggestionCount]),St=R.useMemo(function(){return{disableUserProfile:!st.common.enableUsingDefaultUserProfile,isReactionEnabled:vt&&ft(_t).groupChannel.channel.enableReactions,isMentionEnabled:st.groupChannel.channel.enableMention,isVoiceMessageEnabled:st.groupChannel.channel.enableVoiceMessage,replyType:Gw(st.groupChannel.channel.replyType).upperCase,isTypingIndicatorEnabledOnChannelList:st.groupChannel.channelList.enableTypingIndicator,isMessageReceiptStatusEnabledOnChannelList:st.groupChannel.channelList.enableMessageReceiptStatus,showSearchIcon:vt&&ft(_t).groupChannel.setting.enableMessageSearch}},[vt,ft,st.common.enableUsingDefaultUserProfile,st.groupChannel.channel.enableReactions,st.groupChannel.channel.enableMention,st.groupChannel.channel.enableVoiceMessage,st.groupChannel.channel.replyType,st.groupChannel.channelList.enableTypingIndicator,st.groupChannel.channelList.enableMessageReceiptStatus,st.groupChannel.setting.enableMessageSearch]),bt=R.useMemo(function(){return{config:J(J({disableMarkAsDelivered:F,renderUserProfile:Q,onStartDirectMessage:Le,onUserProfileMessage:Le,allowProfileEdit:x,isOnline:xt,userId:r,appId:e,accessToken:i,theme:Zt,setCurrentTheme:Gt,setCurrenttheme:Gt,isMultipleFilesMessageEnabled:se,uikitMultipleFilesMessageLimit:ir,logger:h,pubSub:zt,userListQuery:w,htmlTextDirection:K,forceLeftToRightMessageLayout:me,markAsReadScheduler:Lt,markAsDeliveredScheduler:Cn,uikitUploadSizeLimit:Ct,imageCompression:nt,voiceRecord:Te,userMention:it},Rt),St)}},[F,Q,Le,x,xt,r,e,i,Zt,Gt,se,ir,h,zt,w,K,me,Lt,Cn,Ct,nt,Te,it,Rt,St]),gn=R.useMemo(function(){return{utils:{updateMessageTemplatesInfo:Nn,getCachedTemplate:Je}}},[Nn,Je]);return Gle(function(){Mt(J(J(J({},gn),bt),{eventHandlers:he,emojiManager:It}))},[bt,he,It,gn]),null},tue=function(t){var n,e,r,i,a,s,o,u,c,h=t.children,p=t.stringSet,m=t.breakpoint,_=t.dateLocale,b=jg({config:{renderUserProfile:t?.renderUserProfile,onStartDirectMessage:t?.onStartDirectMessage,allowProfileEdit:t?.allowProfileEdit,appId:t?.appId,userId:t?.userId,accessToken:t?.accessToken,theme:t?.theme,htmlTextDirection:t?.htmlTextDirection,forceLeftToRightMessageLayout:t?.forceLeftToRightMessageLayout,pubSub:(n=t?.config)===null||n===void 0?void 0:n.pubSub,logger:t?.logger,userListQuery:t?.userListQuery,voiceRecord:{maxRecordingTime:(r=(e=t?.voiceRecord)===null||e===void 0?void 0:e.maxRecordingTime)!==null&&r!==void 0?r:z5,minRecordingTime:(a=(i=t?.voiceRecord)===null||i===void 0?void 0:i.minRecordingTime)!==null&&a!==void 0?a:Vw},userMention:{maxMentionCount:((o=(s=t?.config)===null||s===void 0?void 0:s.userMention)===null||o===void 0?void 0:o.maxMentionCount)||10,maxSuggestionCount:((c=(u=t?.config)===null||u===void 0?void 0:u.userMention)===null||c===void 0?void 0:c.maxSuggestionCount)||15},imageCompression:J({compressionRate:.7,outputFormat:"preserve"},t?.imageCompression),disableMarkAsDelivered:t?.disableMarkAsDelivered,isMultipleFilesMessageEnabled:t?.isMultipleFilesMessageEnabled},eventHandlers:t?.eventHandlers}),C=R.useRef(lae(b)),N=R.useMemo(function(){return J(J({},JS("en")),p)},[p]);return E.createElement(Yw.Provider,{value:C.current},E.createElement(mse,{logger:C.current.getState().config.logger,breakpoint:m},E.createElement(vse,{stringSet:N,dateLocale:_},E.createElement(zle,null,E.createElement(joe,null,h)))),E.createElement(Ble,null),E.createElement(Ooe,null),E.createElement(Fle,null))},nue=function(t){var n=t.children,e=t.config,r=e?.logLevel,i=R.useState(Jx(r)),a=i[0],s=i[1];return R.useEffect(function(){s(Jx(r))},[r]),E.createElement(tue,J({},t,{logger:a}),E.createElement(eue,J({},t,{logger:a})),n)},rue=function(t){var n=Vle({legacyConfig:{replyType:t.replyType,isMentionEnabled:t.isMentionEnabled,isReactionEnabled:t.isReactionEnabled,disableUserProfile:t.disableUserProfile,isVoiceMessageEnabled:t.isVoiceMessageEnabled,isTypingIndicatorEnabledOnChannelList:t.isTypingIndicatorEnabledOnChannelList,isMessageReceiptStatusEnabledOnChannelList:t.isMessageReceiptStatusEnabledOnChannelList,showSearchIcon:t.showSearchIcon},uikitOptions:t.uikitOptions});return E.createElement(B5,{storage:G5,localConfigs:{common:n?.common,groupChannel:{channel:n?.groupChannel,channelList:n?.groupChannelList,setting:n?.groupChannelSettings},openChannel:{channel:n?.openChannel}}},E.createElement(nue,J({},t)))},ZF=E.createContext({disableUserProfile:!0,isOpenChannel:!1}),Ip=function(){return R.useContext(ZF)},iue=function(t){var n,e=t.isOpenChannel,r=e===void 0?!1:e,i=t.disableUserProfile,a=i===void 0?!1:i,s=t.renderUserProfile,o=t.onUserProfileMessage,u=t.onStartDirectMessage,c=t.children,h=Zn().state,p=h.config,m=(n=u??o)!==null&&n!==void 0?n:p.onStartDirectMessage;return E.createElement(ZF.Provider,{value:{isOpenChannel:r,disableUserProfile:a??!p.common.enableUsingDefaultUserProfile,renderUserProfile:s??p.renderUserProfile,onStartDirectMessage:m,onUserProfileMessage:m}},c)},JF=10,e8=15,Uy="@",aue=1,gu;(function(t){t.PARENT="PARENT",t.THREAD="THREAD"})(gu||(gu={}));var yS=function(t){return t?t.isFrozen&&t.myRole!=="operator":!1},tE=function(t){return t?t.myMutedState==="muted":!1},tL=function(t,n){var e,r,i,a;return n&&Array.isArray((r=(e=t?.lastMessage)===null||e===void 0?void 0:e.extendedMessagePayload)===null||r===void 0?void 0:r.suggested_replies)&&!!(!((a=(i=t?.lastMessage)===null||i===void 0?void 0:i.extendedMessagePayload)===null||a===void 0)&&a.disable_chat_input)},t8=function(t){return t<=aue},nL=function(t,n){return n&&t.some(function(e){var r;return!!e.messageForm&&!e.messageForm.isSubmitted&&!!(!((r=e.extendedMessagePayload)===null||r===void 0)&&r.disable_chat_input)&&t8(e.messageForm.version)})};function n8(t){var n=t.channel,e=t.config,r=t.moduleLevel;return!n||n.isBroadcast||n.isEphemeral?!1:n.isSuper?r??e.groupChannel.enableReactionsSupergroup:r??e.groupChannel.enableReactions}var ya;(function(t){t.CHANNEL="CHANNEL",t.THREAD="THREAD"})(ya||(ya={}));var r8=function(t,n){return!n||n.length===0?!0:n.includes(t)};function DC(t){return r8(ya.CHANNEL,t)}function sue(t){return r8(ya.THREAD,t)}var Ga;(function(t){t.USER_UPDATED="USER_UPDATED",t.SEND_MESSAGE_START="SEND_MESSAGE_START",t.SEND_MESSAGE_FAILED="SEND_MESSAGE_FAILED",t.SEND_USER_MESSAGE="SEND_USER_MESSAGE",t.SEND_FILE_MESSAGE="SEND_FILE_MESSAGE",t.ON_FILE_INFO_UPLOADED="ON_FILE_INFO_UPLOADED",t.UPDATE_USER_MESSAGE="UPDATE_USER_MESSAGE",t.DELETE_MESSAGE="DELETE_MESSAGE",t.LEAVE_CHANNEL="LEAVE_CHANNEL",t.CREATE_CHANNEL="CREATE_CHANNEL",t.UPDATE_OPEN_CHANNEL="UPDATE_OPEN_CHANNEL"})(Ga||(Ga={}));var wa=Ga;R.createContext(null);var oue=function(t){var n=t.members;function e(){var r=R.useContext(gi).stringSet;return!n||n.length===0?"":n&&n.length===1?"".concat(n[0].nickname," ").concat(r.TYPING_INDICATOR__IS_TYPING):n&&n.length===2?"".concat(n[0].nickname," ").concat(r.TYPING_INDICATOR__AND," ").concat(n[1].nickname," ").concat(r.TYPING_INDICATOR__ARE_TYPING):r.TYPING_INDICATOR__MULTIPLE_TYPING}return E.createElement(E.Fragment,null,e())},lue=function(t){var n,e,r,i=t.channelUrl,a=Zn().state,s=(e=(n=a?.stores)===null||n===void 0?void 0:n.sdkStore)===null||e===void 0?void 0:e.sdk,o=(r=a?.config)===null||r===void 0?void 0:r.logger,u=R.useState(Ll()),c=u[0],h=u[1],p=R.useState([]),m=p[0],_=p[1];return R.useEffect(function(){var b;if(!((b=s?.groupChannel)===null||b===void 0)&&b.addGroupChannelHandler){s.groupChannel.removeGroupChannelHandler(c);var C=Ll(),N=new Bw({onTypingStatusUpdated:function(S){if(o.info("Channel > Typing Indicator: onTypingStatusUpdated",S),S.url===i){var M=S.getTypingUsers();_(M)}}});s.groupChannel.addGroupChannelHandler(C,N),h(C)}return function(){var S;_([]),!((S=s?.groupChannel)===null||S===void 0)&&S.removeGroupChannelHandler&&s.groupChannel.removeGroupChannelHandler(c)}},[i]),E.createElement($e,{className:"sendbird-conversation__footer__typing-indicator__text",type:Ge.CAPTION_2,color:De.ONBACKGROUND_2},E.createElement(oue,{members:m}))},ES;(function(t){t.Text="text",t.Bubble="bubble"})(ES||(ES={}));function uue(){var t=R.useContext(gi).stringSet;return E.createElement("div",{className:"sendbird-connection-status"},E.createElement($e,{type:Ge.BODY_2,color:De.ONBACKGROUND_2},t.TRYING_TO_CONNECT),E.createElement(lt,{type:qe.DISCONNECTED,fillColor:rt.SENT,width:"14px",height:"14px"}))}function gf(t){var n=t.className,e=n===void 0?"":n,r=t.width,i=r===void 0?"26px":r,a=t.height,s=a===void 0?"26px":a,o=t.children,u=t.testID;return E.createElement("div",{className:Xe(Xe([],Array.isArray(e)?e:[e],!0),["sendbird-loader"],!1).join(" "),"data-testid":u,style:{width:typeof i=="string"?i:"".concat(i,"px"),height:typeof s=="string"?s:"".concat(s,"px")}},o||E.createElement(lt,{type:qe.SPINNER,width:"26px",height:"26px"}))}var Ti={LOADING:"LOADING",NO_CHANNELS:"NO_CHANNELS",NO_MESSAGES:"NO_MESSAGES",WRONG:"WRONG",SEARCH_IN:"SEARCH_IN",SEARCHING:"SEARCHING",NO_RESULTS:"NO_RESULTS"};function Yh(t){var n=t.className,e=n===void 0?"":n,r=t.type,i=t.iconSize,a=t.searchInString,s=a===void 0?"":a,o=t.retryToConnect,u=R.useContext(gi).stringSet;return E.createElement("div",{className:Xe(Xe([],Array.isArray(e)?e:[e],!0),["sendbird-place-holder"],!1).join(" ")},r===Ti.LOADING&&E.createElement(gf,{width:i||"48px",height:i||"48px"},E.createElement(lt,{type:qe.SPINNER,fillColor:rt.PRIMARY,width:i||"48px",height:i||"48px"})),(r===Ti.NO_CHANNELS||r===Ti.NO_MESSAGES||r===Ti.WRONG)&&E.createElement("div",{className:"sendbird-place-holder__body"},r===Ti.NO_CHANNELS&&E.createElement(lt,{className:"sendbird-place-holder__body__icon",type:qe.CHAT,fillColor:rt.ON_BACKGROUND_3,width:i||"64px",height:i||"64px"}),r===Ti.WRONG&&E.createElement(lt,{className:"sendbird-place-holder__body__icon",type:qe.ERROR,fillColor:rt.ON_BACKGROUND_3,width:i||"64px",height:i||"64px"}),r===Ti.NO_MESSAGES&&E.createElement(lt,{className:"sendbird-place-holder__body__icon",type:qe.MESSAGE,fillColor:rt.ON_BACKGROUND_3,width:i||"64px",height:i||"64px"}),E.createElement($e,{className:"sendbird-place-holder__body__text",type:Ge.BODY_1,color:De.ONBACKGROUND_2},r===Ti.NO_CHANNELS&&u.PLACE_HOLDER__NO_CHANNEL,r===Ti.WRONG&&u.PLACE_HOLDER__WRONG,r===Ti.NO_MESSAGES&&u.PLACE_HOLDER__NO_MESSAGES),o&&E.createElement("div",{className:"sendbird-place-holder__body__reconnect",role:"button",onClick:o,onKeyPress:o,tabIndex:0},E.createElement(lt,{className:"sendbird-place-holder__body__reconnect__icon",type:qe.REFRESH,fillColor:rt.PRIMARY,width:"20px",height:"20px"}),E.createElement($e,{className:"sendbird-place-holder__body__reconnect__text",type:Ge.BUTTON_1,color:De.PRIMARY},u.PLACE_HOLDER__RETRY_TO_CONNECT))),(r===Ti.NO_RESULTS||r===Ti.SEARCH_IN||r===Ti.SEARCHING)&&E.createElement("div",{className:"sendbird-place-holder__body--align-top"},r===Ti.SEARCH_IN&&E.createElement("div",{className:"sendbird-place-holder__body--align-top__text"},E.createElement($e,{className:"sendbird-place-holder__body--align-top__text__search-in",type:Ge.BUTTON_2,color:De.ONBACKGROUND_2},u.SEARCH_IN),E.createElement($e,{className:"sendbird-place-holder__body--align-top__text__channel-name",type:Ge.BUTTON_2,color:De.PRIMARY},"'".concat(s)),E.createElement($e,{className:"sendbird-place-holder__body--align-top__text__quote",type:Ge.BUTTON_2,color:De.PRIMARY},"'")),r===Ti.SEARCHING&&E.createElement($e,{className:"sendbird-place-hlder__body--align-top__searching",type:Ge.BODY_1,color:De.ONBACKGROUND_2},u.SEARCHING),r===Ti.NO_RESULTS&&E.createElement($e,{className:"sendbird-place-hlder__body--align-top__no-result",type:Ge.BODY_1,color:De.ONBACKGROUND_2},u.NO_SEARCHED_MESSAGE)))}var cue=function(t){var n,e,r,i,a=t.isLoading,s=t.isInvalid,o=t.channelUrl,u=jg(t),c=u.renderChannelHeader,h=u.renderMessageList,p=u.renderMessageInput,m=u.renderTypingIndicator,_=u.renderPlaceholderLoader,b=u.renderPlaceholderInvalid,C=Zn().state,N=C.stores,S=C.config,M=(n=N?.sdkStore)===null||n===void 0?void 0:n.error,w=S.logger,U=S.isOnline;return a?E.createElement("div",{className:"sendbird-conversation"},_?.()||E.createElement(Yh,{type:Ti.LOADING})):o?s?E.createElement("div",{className:"sendbird-conversation"},b?.()||E.createElement(Yh,{type:Ti.WRONG})):M?E.createElement("div",{className:"sendbird-conversation"},b?.()||E.createElement(Yh,{type:Ti.WRONG,retryToConnect:function(){w.info("Channel: reconnecting")}})):E.createElement("div",{className:"sendbird-conversation"},c?.({className:"sendbird-conversation__channel-header"}),h?.(t),E.createElement("div",{className:"sendbird-conversation__footer"},p?.(),E.createElement("div",{className:"sendbird-conversation__footer__typing-indicator"},m?.()||((e=S?.groupChannel)===null||e===void 0?void 0:e.enableTypingIndicator)&&((i=(r=S?.groupChannel)===null||r===void 0?void 0:r.typingIndicatorTypes)===null||i===void 0?void 0:i.has(ES.Text))&&E.createElement(lue,{channelUrl:o}),!U&&E.createElement(uue,null)))):E.createElement("div",{className:"sendbird-conversation"},b?.()||E.createElement(Yh,{type:Ti.NO_CHANNELS}))},i8=(function(t){if(t!==null)return typeof t=="number"?"".concat(t,"px"):t});function rL(t,n,e){var r;return"min(".concat(n??e,", ").concat((r=i8(t))!==null&&r!==void 0?r:e,")")}function due(t){var n=t.width,e=t.height,r=t.maxSideLength,i=t.defaultMinLength,a=R.useMemo(function(){return rL(n,r,i)},[n]),s=R.useMemo(function(){return rL(e,r,i)},[e]);return[a,s]}var hue=function(){var t=R.useState(!1),n=t[0],e=t[1],r=R.useState(null),i=r[0],a=r[1],s=R.useCallback(function(o){o!==null&&a(o)},[]);return R.useEffect(function(){if(i){var o=new IntersectionObserver(function(u){var c=u[0];e(c.isIntersecting)});return o.observe(i),function(){o.disconnect()}}},[i]),[s,n]},fue=function(){var t=R.useRef(!1),n=hue(),e=n[0],r=n[1];return r&&(t.current=!0),[e,t.current]};function iL(t,n){return t===void 0&&(t=!1),n===void 0&&(n=null),t?"50%":i8(n)}function vue(t,n,e){var r=typeof t=="string"?parseInt(t,10):t,i=e-1,a=n===0?r*2:r,s=n===1?r*2:r,o=n===i?r*2:r,u=n===i-1?r*2:r;return"".concat(a,"px ").concat(s,"px ").concat(o,"px ").concat(u,"px")}var Ni=function(t){var n=t.className,e=n===void 0?"":n,r=t.url,i=t.alt,a=i===void 0?"":i,s=t.width,o=s===void 0?null:s,u=t.maxSideLength,c=u===void 0?null:u,h=t.height,p=h===void 0?null:h,m=t.circle,_=m===void 0?!1:m,b=t.fixedSize,C=b===void 0?!1:b,N=t.placeHolder,S=N===void 0?null:N,M=t.defaultComponent,w=M===void 0?null:M,U=t.borderRadius,L=U===void 0?null:U,P=t.onLoad,x=P===void 0?Mr:P,H=t.onError,F=H===void 0?Mr:H,Q=t.shadeOnHover,$=t.isUploaded,q=$===void 0?!0:$,X=fue(),V=X[0],ee=X[1],z=ee?r:null,ie=R.useState(!1),se=ie[0],he=ie[1],pe=R.useState(!0),K=pe[0],ce=pe[1],me=due({width:o,height:p,maxSideLength:c,defaultMinLength:"400px"}),Le=me[0],ge=me[1],Ee=function(){return typeof S=="function"?S({style:{width:"100%",minWidth:Le,maxWidth:C?Le:"400px",height:ge,position:"absolute",display:"flex",justifyContent:"center",alignItems:"center"}}):S},Ye=function(){return typeof w=="function"?w():w},tt=function(){var yt=z?{backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"cover",backgroundImage:"url(".concat(z,")")}:{};return E.createElement("div",{className:"sendbird-image-renderer__image",style:J({width:"100%",minWidth:Le,maxWidth:C?Le:"400px",height:ge,position:"absolute",borderRadius:iL(_,L)},yt)})};return Le&&ge&&E.createElement("div",{ref:V,className:Xe(Xe([],Array.isArray(e)?e:[e],!0),["sendbird-image-renderer"],!1).join(" "),style:{width:"100%",minWidth:Le,maxWidth:C?Le:"400px",height:ge}},K&&Ee(),!z||se?Ye():tt(),Q&&E.createElement("div",{className:"sendbird-multiple-files-image-renderer__image-cover",style:J({borderRadius:iL(_,L)},q?{}:{display:"inline-flex"})}),z&&E.createElement(pue,{src:z,alt:a,onLoadStart:function(){ce(!0),he(!1)},onLoad:function(){ce(!1),he(!1),x()},onError:function(){ce(!1),he(!0),F()}}))},pue=function(t){var n=t.src,e=t.alt,r=t.onLoadStart,i=r===void 0?Mr:r,a=t.onLoad,s=a===void 0?Mr:a,o=t.onError,u=o===void 0?Mr:o,c=R.useRef({currSrc:n,prevSrc:n,loadFailure:!1});return c.current.currSrc!==n&&(c.current.prevSrc=c.current.currSrc,c.current.currSrc=n),R.useLayoutEffect(function(){if(n){var h=c.current.prevSrc!==c.current.currSrc,p=c.current.loadFailure;(h||p)&&i()}},[n,navigator.onLine]),E.createElement("img",{className:"sendbird-image-renderer__hidden-image-loader",src:n,alt:e,onLoad:function(){c.current.loadFailure=!1,s()},onError:function(){c.current.loadFailure=!0,u()}})},Ig=function(t){if(typeof t=="number")return t;if(typeof t=="string"){var n=Number.parseFloat(t);if(!Number.isNaN(n))return n}return NaN},a8=function(t){var n=t.width,e=t.height,r=t.text,i=Ig(n),a=Ig(e);return typeof i=="number"&&!Number.isNaN(i)&&(i*=.575),typeof a=="number"&&!Number.isNaN(a)&&(a*=.575),E.createElement("div",{className:Hn("sendbird-avatar-img--default",r&&"text"),style:{width:n,height:e}},r?E.createElement("div",{className:"sendbird-avatar-text"},r):E.createElement(lt,{type:qe.USER,fillColor:rt.CONTENT,width:i,height:a}))},td="sendbird-avatar-img",mue=function(t){var n=t.src,e=n===void 0?"":n,r=t.alt,i=r===void 0?"":r,a=t.height,s=t.width,o=t.customDefaultComponent,u=function(){return o?o({width:s,height:a}):E.createElement(a8,{width:s,height:a})};return typeof e=="string"?E.createElement(Ni,{className:td,url:e,height:a,width:s,alt:i,defaultComponent:u}):e&&e.length?e.length===1?E.createElement(Ni,{className:td,url:e[0],height:a,width:s,alt:i,defaultComponent:u}):e.length===2?E.createElement("div",{className:"sendbird-avatar--inner__two-child"},E.createElement(Ni,{className:td,url:e[0],height:a,width:s,alt:i,defaultComponent:u}),E.createElement(Ni,{className:td,url:e[1],height:a,width:s,alt:i,defaultComponent:u})):e.length===3?E.createElement(E.Fragment,null,E.createElement("div",{className:"sendbird-avatar--inner__three-child--upper"},E.createElement(Ni,{className:td,url:e[0],height:a,width:s,alt:i,defaultComponent:u})),E.createElement("div",{className:"sendbird-avatar--inner__three-child--lower"},E.createElement(Ni,{className:td,url:e[1],height:a,width:s,alt:i,defaultComponent:u}),E.createElement(Ni,{className:td,url:e[2],height:a,width:s,alt:i,defaultComponent:u}))):E.createElement("div",{className:"sendbird-avatar--inner__four-child"},e.slice(0,4).map(function(c,h){return E.createElement(Ni,{className:td,url:c,height:a,width:s,alt:i,key:"".concat(c,"-").concat(h),defaultComponent:u})})):E.createElement(Ni,{className:td,url:"",height:a,width:s,alt:i,defaultComponent:u})};function gue(t,n){var e=t.className,r=e===void 0?"":e,i=t.src,a=i===void 0?"":i,s=t.alt,o=s===void 0?"":s,u=t.width,c=u===void 0?"56px":u,h=t.height,p=h===void 0?"56px":h,m=t.zIndex,_=m===void 0?0:m,b=t.left,C=b===void 0?"":b,N=t.bottom,S=N===void 0?"":N,M=t.onClick,w=t.customDefaultComponent;return E.createElement("div",{className:Xe(Xe([],Array.isArray(r)?r:[r],!0),["sendbird-avatar"],!1).join(" "),role:"button",ref:n,style:{height:p,width:c,zIndex:_,left:C,bottom:S},onClick:M,onKeyDown:M,tabIndex:0},E.createElement(mue,{src:a,width:c,height:p,alt:o,customDefaultComponent:w}))}var ms=E.forwardRef(gue),s8="https://static.sendbird.com/sample/cover/cover_",AN=function(t,n){return t?.coverUrl&&!new RegExp("^".concat(s8)).test(t.coverUrl)?t.coverUrl:(t?.members||[]).filter(function(e){return e.userId!==n}).map(function(e){var r=e.profileUrl;return r})},_ue=function(t){return t?.coverUrl?!!new RegExp("^".concat(s8)).test(t.coverUrl):!0};function yue(t){var n=t.channel,e=t.userId,r=t.theme,i=t.width,a=i===void 0?56:i,s=t.height,o=s===void 0?56:s,u=n?.isBroadcast,c=R.useMemo(function(){return u?_ue(n)?E.createElement("div",{className:"sendbird-chat-header--default-avatar",style:{width:a,height:o,display:"flex",justifyContent:"center",alignItems:"center"}},E.createElement(lt,{type:qe.BROADCAST,fillColor:rt.CONTENT,width:a*.575,height:o*.575})):E.createElement(ms,{className:"sendbird-chat-header--avatar--broadcast-channel",src:AN(n,e),width:a,height:o,alt:n?.name}):E.createElement(ms,{className:"sendbird-chat-header--avatar--group-channel",src:AN(n,e),width:"".concat(a,"px"),height:"".concat(o,"px"),alt:n?.name})},[AN(n,e),r]);return E.createElement(E.Fragment,null,c)}var Eue=function(t,n,e){var r,i=e||Ww;return!t?.name&&!t?.members?i.NO_TITLE:Ule(t)?((r=t?.members)===null||r===void 0?void 0:r.length)===1?i.NO_MEMBERS:t?.members.filter(function(a){var s=a.userId;return s!==n}).map(function(a){var s=a.nickname;return s||i.NO_NAME}).join(", "):t.name},go;(function(t){t.ONBACKGROUND_1="ONBACKGROUND_1",t.ONBACKGROUND_2="ONBACKGROUND_2",t.ONBACKGROUND_3="ONBACKGROUND_3",t.ONBACKGROUND_4="ONBACKGROUND_4",t.ONCONTENT_1="ONCONTENT_1",t.PRIMARY="PRIMARY",t.ERROR="ERROR"})(go||(go={}));var nE=function(t){switch(t){case go.ONBACKGROUND_1:return"sendbird-color--onbackground-1";case go.ONBACKGROUND_2:return"sendbird-color--onbackground-2";case go.ONBACKGROUND_3:return"sendbird-color--onbackground-3";case go.ONBACKGROUND_4:return"sendbird-color--onbackground-4";case go.ONCONTENT_1:return"sendbird-color--oncontent-1";case go.PRIMARY:return"sendbird-color--primary";case go.ERROR:return"sendbird-color--error";default:return""}},tT=function(t){var n=t.className,e=n===void 0?"":n,r=t.color,i=r===void 0?go.ONBACKGROUND_1:r,a=t.disabled,s=a===void 0?!1:a,o=t.disableUnderline,u=o===void 0?!1:o,c=t.onClick,h=c===void 0?function(){}:c,p=t.children;return E.createElement("div",{className:Xe(Xe([],Array.isArray(e)?e:[e],!0),[nE(i),u?"sendbird-textbutton--not-underline":"sendbird-textbutton",s?"sendbird-textbutton--disabled":""],!1).join(" "),role:"button",tabIndex:0,onClick:function(m){return h(m)},onKeyPress:function(m){return h(m)}},p)},bue=function(t){var n,e=t.className,r=t.renderLeft,i=t.renderRight,a=t.renderMiddle,s=!1;try{s=(n=Ea?.())===null||n===void 0?void 0:n.isMobile}catch{}return E.createElement("div",{className:Hn("sendbird-ui-header",e),"data-testid":"sendbird-ui-header"},r?E.createElement("div",{className:Hn("sendbird-ui-header__left",s?"sendbird-ui-header--is-mobile":"sendbird-ui-header--is-desktop")},r?.()):null,E.createElement("div",{className:"sendbird-ui-header__middle"},a?.()),i?E.createElement("div",{className:Hn("sendbird-ui-header__right",s?"sendbird-ui-header--is-mobile":"sendbird-ui-header--is-desktop")},i?.()):null)},Cue=function(t){var n=t.title,e=t.subtitle,r=t.onClickSubtitle;return E.createElement("div",{className:"sendbird-ui-header__middle"},n&&E.createElement($e,{className:"sendbird-ui-header__middle__title",type:Ge.H_2,color:De.ONBACKGROUND_1},n),e&&(r?E.createElement(tT,{className:"sendbird-ui-header__middle__subtitle__container",onClick:r,disableUnderline:!0},E.createElement($e,{className:"sendbird-ui-header__middle__subtitle",type:Ge.CAPTION_3,color:De.ONBACKGROUND_2},e)):E.createElement($e,{className:"sendbird-ui-header__middle__subtitle",type:Ge.BODY_1,color:De.ONBACKGROUND_2},e)))},Sue=function(t){var n=t.className,e=t.onClick,r=t.type,i=t.color,a=t.width,s=a===void 0?"32px":a,o=t.height,u=o===void 0?"32px":o,c=t.renderIcon,h=c===void 0?function(p){return E.createElement(o8,J({},p))}:c;return E.createElement(Su,{className:n,width:s,height:u,onClick:e},h({type:r,color:i}))},o8=function(t){var n=t.className,e=t.type,r=t.color,i=t.width,a=i===void 0?"22px":i,s=t.height,o=s===void 0?"22px":s,u=t.onClick,c=u===void 0?Mr:u;return E.createElement(lt,{className:n,type:e,fillColor:r,width:a,height:o,onClick:function(h){return c?.(h)}})},Lh=Object.assign(bue,{Title:Cue,IconButton:Sue,Icon:o8}),Tue=function(t){var n=t.className,e=t.currentChannel,r=t.showSearchIcon,i=t.onBackClick,a=t.onSearchClick,s=t.onChatHeaderActionClick,o=t.renderLeft,u=t.renderMiddle,c=t.renderRight,h=Zn().state,p=h.config,m=p.userId,_=p.theme,b=Ea().isMobile,C=Un().stringSet,N=e?.myMutedState==="muted",S=Eue(e,m,C);return E.createElement(Lh,{className:Hn("sendbird-chat-header",n),renderLeft:o??(function(){return E.createElement(E.Fragment,null,b&&E.createElement(Lh.Icon,{className:"sendbird-chat-header__icon_back",onClick:i,type:qe.ARROW_LEFT,color:rt.PRIMARY,width:"24px",height:"24px"}),E.createElement(yue,{theme:_,channel:e,userId:m,height:32,width:32}))}),renderMiddle:u??(function(){return E.createElement(Lh.Title,{title:S})}),renderRight:c??(function(){return E.createElement(E.Fragment,null,N&&E.createElement(Lh.Icon,{className:"sendbird-chat-header__right__mute",type:qe.NOTIFICATIONS_OFF_FILLED,color:rt.ON_BACKGROUND_2,width:"24px",height:"24px"}),r&&!e?.isEphemeral&&E.createElement(Lh.IconButton,{className:"sendbird-chat-header__right__search",onClick:a,type:qe.SEARCH,color:rt.PRIMARY,renderIcon:function(M){return E.createElement(Lh.Icon,J({},M,{width:"24px",height:"24px"}))}}),E.createElement(Lh.IconButton,{className:"sendbird-chat-header__right__info",onClick:s,type:qe.INFO,color:rt.PRIMARY,renderIcon:function(M){return E.createElement(Lh.Icon,J({},M,{width:"24px",height:"24px"}))}}))})})};function Nue(t){return Bi(1,arguments),t instanceof Date||gS(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Aue(t){if(Bi(1,arguments),!Nue(t)&&typeof t!="number")return!1;var n=So(t);return!isNaN(Number(n))}function Nd(t){if(t===null||t===!0||t===!1)return NaN;var n=Number(t);return isNaN(n)?n:n<0?Math.ceil(n):Math.floor(n)}function Mue(t,n){Bi(2,arguments);var e=So(t).getTime(),r=Nd(n);return new Date(e+r)}function Iue(t,n){Bi(2,arguments);var e=Nd(n);return Mue(t,-e)}var wue=864e5;function Rue(t){Bi(1,arguments);var n=So(t),e=n.getTime();n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0);var r=n.getTime(),i=e-r;return Math.floor(i/wue)+1}function bS(t){Bi(1,arguments);var n=1,e=So(t),r=e.getUTCDay(),i=(r<n?7:0)+r-n;return e.setUTCDate(e.getUTCDate()-i),e.setUTCHours(0,0,0,0),e}function l8(t){Bi(1,arguments);var n=So(t),e=n.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(e+1,0,4),r.setUTCHours(0,0,0,0);var i=bS(r),a=new Date(0);a.setUTCFullYear(e,0,4),a.setUTCHours(0,0,0,0);var s=bS(a);return n.getTime()>=i.getTime()?e+1:n.getTime()>=s.getTime()?e:e-1}function Oue(t){Bi(1,arguments);var n=l8(t),e=new Date(0);e.setUTCFullYear(n,0,4),e.setUTCHours(0,0,0,0);var r=bS(e);return r}var Due=6048e5;function Uue(t){Bi(1,arguments);var n=So(t),e=bS(n).getTime()-Oue(n).getTime();return Math.round(e/Due)+1}var xue={};function nT(){return xue}function CS(t,n){var e,r,i,a,s,o,u,c;Bi(1,arguments);var h=nT(),p=Nd((e=(r=(i=(a=n?.weekStartsOn)!==null&&a!==void 0?a:n==null||(s=n.locale)===null||s===void 0||(o=s.options)===null||o===void 0?void 0:o.weekStartsOn)!==null&&i!==void 0?i:h.weekStartsOn)!==null&&r!==void 0?r:(u=h.locale)===null||u===void 0||(c=u.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&e!==void 0?e:0);if(!(p>=0&&p<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=So(t),_=m.getUTCDay(),b=(_<p?7:0)+_-p;return m.setUTCDate(m.getUTCDate()-b),m.setUTCHours(0,0,0,0),m}function u8(t,n){var e,r,i,a,s,o,u,c;Bi(1,arguments);var h=So(t),p=h.getUTCFullYear(),m=nT(),_=Nd((e=(r=(i=(a=n?.firstWeekContainsDate)!==null&&a!==void 0?a:n==null||(s=n.locale)===null||s===void 0||(o=s.options)===null||o===void 0?void 0:o.firstWeekContainsDate)!==null&&i!==void 0?i:m.firstWeekContainsDate)!==null&&r!==void 0?r:(u=m.locale)===null||u===void 0||(c=u.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&e!==void 0?e:1);if(!(_>=1&&_<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var b=new Date(0);b.setUTCFullYear(p+1,0,_),b.setUTCHours(0,0,0,0);var C=CS(b,n),N=new Date(0);N.setUTCFullYear(p,0,_),N.setUTCHours(0,0,0,0);var S=CS(N,n);return h.getTime()>=C.getTime()?p+1:h.getTime()>=S.getTime()?p:p-1}function Lue(t,n){var e,r,i,a,s,o,u,c;Bi(1,arguments);var h=nT(),p=Nd((e=(r=(i=(a=n?.firstWeekContainsDate)!==null&&a!==void 0?a:n==null||(s=n.locale)===null||s===void 0||(o=s.options)===null||o===void 0?void 0:o.firstWeekContainsDate)!==null&&i!==void 0?i:h.firstWeekContainsDate)!==null&&r!==void 0?r:(u=h.locale)===null||u===void 0||(c=u.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&e!==void 0?e:1),m=u8(t,n),_=new Date(0);_.setUTCFullYear(m,0,p),_.setUTCHours(0,0,0,0);var b=CS(_,n);return b}var kue=6048e5;function Pue(t,n){Bi(1,arguments);var e=So(t),r=CS(e,n).getTime()-Lue(e,n).getTime();return Math.round(r/kue)+1}function Wr(t,n){for(var e=t<0?"-":"",r=Math.abs(t).toString();r.length<n;)r="0"+r;return e+r}var kh={y:function(n,e){var r=n.getUTCFullYear(),i=r>0?r:1-r;return Wr(e==="yy"?i%100:i,e.length)},M:function(n,e){var r=n.getUTCMonth();return e==="M"?String(r+1):Wr(r+1,2)},d:function(n,e){return Wr(n.getUTCDate(),e.length)},a:function(n,e){var r=n.getUTCHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(n,e){return Wr(n.getUTCHours()%12||12,e.length)},H:function(n,e){return Wr(n.getUTCHours(),e.length)},m:function(n,e){return Wr(n.getUTCMinutes(),e.length)},s:function(n,e){return Wr(n.getUTCSeconds(),e.length)},S:function(n,e){var r=e.length,i=n.getUTCMilliseconds(),a=Math.floor(i*Math.pow(10,r-3));return Wr(a,e.length)}},Jm={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Fue={G:function(n,e,r){var i=n.getUTCFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(i,{width:"abbreviated"});case"GGGGG":return r.era(i,{width:"narrow"});case"GGGG":default:return r.era(i,{width:"wide"})}},y:function(n,e,r){if(e==="yo"){var i=n.getUTCFullYear(),a=i>0?i:1-i;return r.ordinalNumber(a,{unit:"year"})}return kh.y(n,e)},Y:function(n,e,r,i){var a=u8(n,i),s=a>0?a:1-a;if(e==="YY"){var o=s%100;return Wr(o,2)}return e==="Yo"?r.ordinalNumber(s,{unit:"year"}):Wr(s,e.length)},R:function(n,e){var r=l8(n);return Wr(r,e.length)},u:function(n,e){var r=n.getUTCFullYear();return Wr(r,e.length)},Q:function(n,e,r){var i=Math.ceil((n.getUTCMonth()+1)/3);switch(e){case"Q":return String(i);case"QQ":return Wr(i,2);case"Qo":return r.ordinalNumber(i,{unit:"quarter"});case"QQQ":return r.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(i,{width:"wide",context:"formatting"})}},q:function(n,e,r){var i=Math.ceil((n.getUTCMonth()+1)/3);switch(e){case"q":return String(i);case"qq":return Wr(i,2);case"qo":return r.ordinalNumber(i,{unit:"quarter"});case"qqq":return r.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(i,{width:"wide",context:"standalone"})}},M:function(n,e,r){var i=n.getUTCMonth();switch(e){case"M":case"MM":return kh.M(n,e);case"Mo":return r.ordinalNumber(i+1,{unit:"month"});case"MMM":return r.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(i,{width:"wide",context:"formatting"})}},L:function(n,e,r){var i=n.getUTCMonth();switch(e){case"L":return String(i+1);case"LL":return Wr(i+1,2);case"Lo":return r.ordinalNumber(i+1,{unit:"month"});case"LLL":return r.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(i,{width:"wide",context:"standalone"})}},w:function(n,e,r,i){var a=Pue(n,i);return e==="wo"?r.ordinalNumber(a,{unit:"week"}):Wr(a,e.length)},I:function(n,e,r){var i=Uue(n);return e==="Io"?r.ordinalNumber(i,{unit:"week"}):Wr(i,e.length)},d:function(n,e,r){return e==="do"?r.ordinalNumber(n.getUTCDate(),{unit:"date"}):kh.d(n,e)},D:function(n,e,r){var i=Rue(n);return e==="Do"?r.ordinalNumber(i,{unit:"dayOfYear"}):Wr(i,e.length)},E:function(n,e,r){var i=n.getUTCDay();switch(e){case"E":case"EE":case"EEE":return r.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(i,{width:"short",context:"formatting"});case"EEEE":default:return r.day(i,{width:"wide",context:"formatting"})}},e:function(n,e,r,i){var a=n.getUTCDay(),s=(a-i.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return Wr(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(n,e,r,i){var a=n.getUTCDay(),s=(a-i.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return Wr(s,e.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(n,e,r){var i=n.getUTCDay(),a=i===0?7:i;switch(e){case"i":return String(a);case"ii":return Wr(a,e.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(i,{width:"short",context:"formatting"});case"iiii":default:return r.day(i,{width:"wide",context:"formatting"})}},a:function(n,e,r){var i=n.getUTCHours(),a=i/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(n,e,r){var i=n.getUTCHours(),a;switch(i===12?a=Jm.noon:i===0?a=Jm.midnight:a=i/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(n,e,r){var i=n.getUTCHours(),a;switch(i>=17?a=Jm.evening:i>=12?a=Jm.afternoon:i>=4?a=Jm.morning:a=Jm.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(n,e,r){if(e==="ho"){var i=n.getUTCHours()%12;return i===0&&(i=12),r.ordinalNumber(i,{unit:"hour"})}return kh.h(n,e)},H:function(n,e,r){return e==="Ho"?r.ordinalNumber(n.getUTCHours(),{unit:"hour"}):kh.H(n,e)},K:function(n,e,r){var i=n.getUTCHours()%12;return e==="Ko"?r.ordinalNumber(i,{unit:"hour"}):Wr(i,e.length)},k:function(n,e,r){var i=n.getUTCHours();return i===0&&(i=24),e==="ko"?r.ordinalNumber(i,{unit:"hour"}):Wr(i,e.length)},m:function(n,e,r){return e==="mo"?r.ordinalNumber(n.getUTCMinutes(),{unit:"minute"}):kh.m(n,e)},s:function(n,e,r){return e==="so"?r.ordinalNumber(n.getUTCSeconds(),{unit:"second"}):kh.s(n,e)},S:function(n,e){return kh.S(n,e)},X:function(n,e,r,i){var a=i._originalDate||n,s=a.getTimezoneOffset();if(s===0)return"Z";switch(e){case"X":return sL(s);case"XXXX":case"XX":return Bv(s);case"XXXXX":case"XXX":default:return Bv(s,":")}},x:function(n,e,r,i){var a=i._originalDate||n,s=a.getTimezoneOffset();switch(e){case"x":return sL(s);case"xxxx":case"xx":return Bv(s);case"xxxxx":case"xxx":default:return Bv(s,":")}},O:function(n,e,r,i){var a=i._originalDate||n,s=a.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+aL(s,":");case"OOOO":default:return"GMT"+Bv(s,":")}},z:function(n,e,r,i){var a=i._originalDate||n,s=a.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+aL(s,":");case"zzzz":default:return"GMT"+Bv(s,":")}},t:function(n,e,r,i){var a=i._originalDate||n,s=Math.floor(a.getTime()/1e3);return Wr(s,e.length)},T:function(n,e,r,i){var a=i._originalDate||n,s=a.getTime();return Wr(s,e.length)}};function aL(t,n){var e=t>0?"-":"+",r=Math.abs(t),i=Math.floor(r/60),a=r%60;if(a===0)return e+String(i);var s=n;return e+String(i)+s+Wr(a,2)}function sL(t,n){if(t%60===0){var e=t>0?"-":"+";return e+Wr(Math.abs(t)/60,2)}return Bv(t,n)}function Bv(t,n){var e=n||"",r=t>0?"-":"+",i=Math.abs(t),a=Wr(Math.floor(i/60),2),s=Wr(i%60,2);return r+a+e+s}var oL=function(n,e){switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},c8=function(n,e){switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Bue=function(n,e){var r=n.match(/(P+)(p+)?/)||[],i=r[1],a=r[2];if(!a)return oL(n,e);var s;switch(i){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",oL(i,e)).replace("{{time}}",c8(a,e))},Hue={p:c8,P:Bue};function Gue(t){var n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),t.getTime()-n.getTime()}var Vue=["D","DD"],zue=["YY","YYYY"];function jue(t){return Vue.indexOf(t)!==-1}function que(t){return zue.indexOf(t)!==-1}function lL(t,n,e){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(n,"`) for formatting years to the input `").concat(e,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(n,"`) for formatting years to the input `").concat(e,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(n,"`) for formatting days of the month to the input `").concat(e,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(n,"`) for formatting days of the month to the input `").concat(e,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var $ue=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Kue=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Yue=/^'([^]*?)'?$/,Wue=/''/g,Que=/[a-zA-Z]/;function qs(t,n,e){var r,i,a,s,o,u,c,h,p,m,_,b,C,N,S,M,w,U;Bi(2,arguments);var L=String(n),P=nT(),x=(r=(i=e?.locale)!==null&&i!==void 0?i:P.locale)!==null&&r!==void 0?r:EF,H=Nd((a=(s=(o=(u=e?.firstWeekContainsDate)!==null&&u!==void 0?u:e==null||(c=e.locale)===null||c===void 0||(h=c.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&o!==void 0?o:P.firstWeekContainsDate)!==null&&s!==void 0?s:(p=P.locale)===null||p===void 0||(m=p.options)===null||m===void 0?void 0:m.firstWeekContainsDate)!==null&&a!==void 0?a:1);if(!(H>=1&&H<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var F=Nd((_=(b=(C=(N=e?.weekStartsOn)!==null&&N!==void 0?N:e==null||(S=e.locale)===null||S===void 0||(M=S.options)===null||M===void 0?void 0:M.weekStartsOn)!==null&&C!==void 0?C:P.weekStartsOn)!==null&&b!==void 0?b:(w=P.locale)===null||w===void 0||(U=w.options)===null||U===void 0?void 0:U.weekStartsOn)!==null&&_!==void 0?_:0);if(!(F>=0&&F<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!x.localize)throw new RangeError("locale must contain localize property");if(!x.formatLong)throw new RangeError("locale must contain formatLong property");var Q=So(t);if(!Aue(Q))throw new RangeError("Invalid time value");var $=Gue(Q),q=Iue(Q,$),X={firstWeekContainsDate:H,weekStartsOn:F,locale:x,_originalDate:Q},V=L.match(Kue).map(function(ee){var z=ee[0];if(z==="p"||z==="P"){var ie=Hue[z];return ie(ee,x.formatLong)}return ee}).join("").match($ue).map(function(ee){if(ee==="''")return"'";var z=ee[0];if(z==="'")return Xue(ee);var ie=Fue[z];if(ie)return!(e!=null&&e.useAdditionalWeekYearTokens)&&que(ee)&&lL(ee,n,String(t)),!(e!=null&&e.useAdditionalDayOfYearTokens)&&jue(ee)&&lL(ee,n,String(t)),ie(q,ee,x.localize,X);if(z.match(Que))throw new RangeError("Format string contains an unescaped latin alphabet character `"+z+"`");return ee}).join("");return V}function Xue(t){var n=t.match(Yue);return n?n[1].replace(Wue,"'"):t}function uL(t){if(t){var n=t.querySelectorAll("[data-sb-mention='true']"),e=Array.from(n);return e}return[]}function u3(t,n){var e=t.ref,r=n.logger,i=e.current,a=R.useState([]),s=a[0],o=a[1];return R.useLayoutEffect(function(){if(i){var u=uL(i);o(u)}},[i]),R.useEffect(function(){var u={childList:!0,subtree:!0},c=function(p){var m=p.length>0;m&&o(uL(i))},h=new MutationObserver(c);return i&&h.observe(i,u),function(){try{h.disconnect()}catch{r.error("useDirtyGetMentions: observer disconnect failed",{observer:h})}}},[i]),s}var d8=function(t){var n=t.children,e=n===void 0?void 0:n,r=t.className,i=r===void 0?"":r,a=t.separatorColor,s=a===void 0?go.ONBACKGROUND_4:a;return E.createElement("div",{className:Xe(Xe([],Array.isArray(i)?i:[i],!0),["sendbird-separator"],!1).join(" ")},E.createElement("div",{className:["sendbird-separator__left","".concat(nE(s),"--background-color")].join(" ")}),E.createElement("div",{className:"sendbird-separator__text"},e||E.createElement($e,{type:Ge.CAPTION_2,color:De.ONBACKGROUND_2},"Date Separator")),E.createElement("div",{className:["sendbird-separator__right","".concat(nE(s),"--background-color")].join(" ")}))},Co={Enter:"Enter",ArrowUp:"ArrowUp",ArrowDown:"ArrowDown",Backspace:"Backspace"},mI={ElementNode:1,TextNode:3},MN={Span:"SPAN",Br:"BR",Div:"DIV"};const{entries:h8,setPrototypeOf:cL,isFrozen:Zue,getPrototypeOf:Jue,getOwnPropertyDescriptor:ece}=Object;let{freeze:Ys,seal:kl,create:gI}=Object,{apply:_I,construct:yI}=typeof Reflect<"u"&&Reflect;Ys||(Ys=function(n){return n});kl||(kl=function(n){return n});_I||(_I=function(n,e){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];return n.apply(e,i)});yI||(yI=function(n){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];return new n(...r)});const iC=Ws(Array.prototype.forEach),tce=Ws(Array.prototype.lastIndexOf),dL=Ws(Array.prototype.pop),$0=Ws(Array.prototype.push),nce=Ws(Array.prototype.splice),UC=Ws(String.prototype.toLowerCase),IN=Ws(String.prototype.toString),wN=Ws(String.prototype.match),K0=Ws(String.prototype.replace),rce=Ws(String.prototype.indexOf),ice=Ws(String.prototype.trim),mu=Ws(Object.prototype.hasOwnProperty),Ps=Ws(RegExp.prototype.test),Y0=ace(TypeError);function Ws(t){return function(n){n instanceof RegExp&&(n.lastIndex=0);for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];return _I(t,n,r)}}function ace(t){return function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return yI(t,e)}}function mr(t,n){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:UC;cL&&cL(t,null);let r=n.length;for(;r--;){let i=n[r];if(typeof i=="string"){const a=e(i);a!==i&&(Zue(n)||(n[r]=a),i=a)}t[i]=!0}return t}function sce(t){for(let n=0;n<t.length;n++)mu(t,n)||(t[n]=null);return t}function rd(t){const n=gI(null);for(const[e,r]of h8(t))mu(t,e)&&(Array.isArray(r)?n[e]=sce(r):r&&typeof r=="object"&&r.constructor===Object?n[e]=rd(r):n[e]=r);return n}function W0(t,n){for(;t!==null;){const r=ece(t,n);if(r){if(r.get)return Ws(r.get);if(typeof r.value=="function")return Ws(r.value)}t=Jue(t)}function e(){return null}return e}const hL=Ys(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),RN=Ys(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),ON=Ys(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),oce=Ys(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),DN=Ys(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),lce=Ys(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),fL=Ys(["#text"]),vL=Ys(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),UN=Ys(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),pL=Ys(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),aC=Ys(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),uce=kl(/\{\{[\w\W]*|[\w\W]*\}\}/gm),cce=kl(/<%[\w\W]*|[\w\W]*%>/gm),dce=kl(/\$\{[\w\W]*/gm),hce=kl(/^data-[\-\w.\u00B7-\uFFFF]+$/),fce=kl(/^aria-[\-\w]+$/),f8=kl(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),vce=kl(/^(?:\w+script|data):/i),pce=kl(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),v8=kl(/^html$/i),mce=kl(/^[a-z][.\w]*(-[.\w]+)+$/i);var mL=Object.freeze({__proto__:null,ARIA_ATTR:fce,ATTR_WHITESPACE:pce,CUSTOM_ELEMENT:mce,DATA_ATTR:hce,DOCTYPE_NAME:v8,ERB_EXPR:cce,IS_ALLOWED_URI:f8,IS_SCRIPT_OR_DATA:vce,MUSTACHE_EXPR:uce,TMPLIT_EXPR:dce});const Q0={element:1,text:3,progressingInstruction:7,comment:8,document:9},gce=function(){return typeof window>"u"?null:window},_ce=function(n,e){if(typeof n!="object"||typeof n.createPolicy!="function")return null;let r=null;const i="data-tt-policy-suffix";e&&e.hasAttribute(i)&&(r=e.getAttribute(i));const a="dompurify"+(r?"#"+r:"");try{return n.createPolicy(a,{createHTML(s){return s},createScriptURL(s){return s}})}catch{return console.warn("TrustedTypes policy "+a+" could not be created."),null}},gL=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function p8(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:gce();const n=mt=>p8(mt);if(n.version="3.3.0",n.removed=[],!t||!t.document||t.document.nodeType!==Q0.document||!t.Element)return n.isSupported=!1,n;let{document:e}=t;const r=e,i=r.currentScript,{DocumentFragment:a,HTMLTemplateElement:s,Node:o,Element:u,NodeFilter:c,NamedNodeMap:h=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:p,DOMParser:m,trustedTypes:_}=t,b=u.prototype,C=W0(b,"cloneNode"),N=W0(b,"remove"),S=W0(b,"nextSibling"),M=W0(b,"childNodes"),w=W0(b,"parentNode");if(typeof s=="function"){const mt=e.createElement("template");mt.content&&mt.content.ownerDocument&&(e=mt.content.ownerDocument)}let U,L="";const{implementation:P,createNodeIterator:x,createDocumentFragment:H,getElementsByTagName:F}=e,{importNode:Q}=r;let $=gL();n.isSupported=typeof h8=="function"&&typeof w=="function"&&P&&P.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:q,ERB_EXPR:X,TMPLIT_EXPR:V,DATA_ATTR:ee,ARIA_ATTR:z,IS_SCRIPT_OR_DATA:ie,ATTR_WHITESPACE:se,CUSTOM_ELEMENT:he}=mL;let{IS_ALLOWED_URI:pe}=mL,K=null;const ce=mr({},[...hL,...RN,...ON,...DN,...fL]);let me=null;const Le=mr({},[...vL,...UN,...pL,...aC]);let ge=Object.seal(gI(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ee=null,Ye=null;const tt=Object.seal(gI(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let yt=!0,Ht=!0,zt=!1,Xt=!0,Jt=!1,Mt=!0,jt=!1,en=!1,Dt=!1,ln=!1,Yt=!1,st=!1,ft=!0,un=!1;const vt="user-content-";let _t=!0,Pt=!1,Et={},Ft=null;const vn=mr({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Je=null;const Nn=mr({},["audio","video","img","source","image","track"]);let An=null;const Mn=mr({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Zt="http://www.w3.org/1998/Math/MathML",Gt="http://www.w3.org/2000/svg",xt="http://www.w3.org/1999/xhtml";let Lt=xt,Cn=!1,ir=null;const It=mr({},[Zt,Gt,xt],IN);let Rt=mr({},["mi","mo","mn","ms","mtext"]),Ct=mr({},["annotation-xml"]);const nt=mr({},["title","style","font","a","script"]);let Te=null;const it=["application/xhtml+xml","text/html"],St="text/html";let bt=null,gn=null;const ct=e.createElement("form"),En=function(oe){return oe instanceof RegExp||oe instanceof Function},ur=function(){let oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(gn&&gn===oe)){if((!oe||typeof oe!="object")&&(oe={}),oe=rd(oe),Te=it.indexOf(oe.PARSER_MEDIA_TYPE)===-1?St:oe.PARSER_MEDIA_TYPE,bt=Te==="application/xhtml+xml"?IN:UC,K=mu(oe,"ALLOWED_TAGS")?mr({},oe.ALLOWED_TAGS,bt):ce,me=mu(oe,"ALLOWED_ATTR")?mr({},oe.ALLOWED_ATTR,bt):Le,ir=mu(oe,"ALLOWED_NAMESPACES")?mr({},oe.ALLOWED_NAMESPACES,IN):It,An=mu(oe,"ADD_URI_SAFE_ATTR")?mr(rd(Mn),oe.ADD_URI_SAFE_ATTR,bt):Mn,Je=mu(oe,"ADD_DATA_URI_TAGS")?mr(rd(Nn),oe.ADD_DATA_URI_TAGS,bt):Nn,Ft=mu(oe,"FORBID_CONTENTS")?mr({},oe.FORBID_CONTENTS,bt):vn,Ee=mu(oe,"FORBID_TAGS")?mr({},oe.FORBID_TAGS,bt):rd({}),Ye=mu(oe,"FORBID_ATTR")?mr({},oe.FORBID_ATTR,bt):rd({}),Et=mu(oe,"USE_PROFILES")?oe.USE_PROFILES:!1,yt=oe.ALLOW_ARIA_ATTR!==!1,Ht=oe.ALLOW_DATA_ATTR!==!1,zt=oe.ALLOW_UNKNOWN_PROTOCOLS||!1,Xt=oe.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Jt=oe.SAFE_FOR_TEMPLATES||!1,Mt=oe.SAFE_FOR_XML!==!1,jt=oe.WHOLE_DOCUMENT||!1,ln=oe.RETURN_DOM||!1,Yt=oe.RETURN_DOM_FRAGMENT||!1,st=oe.RETURN_TRUSTED_TYPE||!1,Dt=oe.FORCE_BODY||!1,ft=oe.SANITIZE_DOM!==!1,un=oe.SANITIZE_NAMED_PROPS||!1,_t=oe.KEEP_CONTENT!==!1,Pt=oe.IN_PLACE||!1,pe=oe.ALLOWED_URI_REGEXP||f8,Lt=oe.NAMESPACE||xt,Rt=oe.MATHML_TEXT_INTEGRATION_POINTS||Rt,Ct=oe.HTML_INTEGRATION_POINTS||Ct,ge=oe.CUSTOM_ELEMENT_HANDLING||{},oe.CUSTOM_ELEMENT_HANDLING&&En(oe.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ge.tagNameCheck=oe.CUSTOM_ELEMENT_HANDLING.tagNameCheck),oe.CUSTOM_ELEMENT_HANDLING&&En(oe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ge.attributeNameCheck=oe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),oe.CUSTOM_ELEMENT_HANDLING&&typeof oe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ge.allowCustomizedBuiltInElements=oe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Jt&&(Ht=!1),Yt&&(ln=!0),Et&&(K=mr({},fL),me=[],Et.html===!0&&(mr(K,hL),mr(me,vL)),Et.svg===!0&&(mr(K,RN),mr(me,UN),mr(me,aC)),Et.svgFilters===!0&&(mr(K,ON),mr(me,UN),mr(me,aC)),Et.mathMl===!0&&(mr(K,DN),mr(me,pL),mr(me,aC))),oe.ADD_TAGS&&(typeof oe.ADD_TAGS=="function"?tt.tagCheck=oe.ADD_TAGS:(K===ce&&(K=rd(K)),mr(K,oe.ADD_TAGS,bt))),oe.ADD_ATTR&&(typeof oe.ADD_ATTR=="function"?tt.attributeCheck=oe.ADD_ATTR:(me===Le&&(me=rd(me)),mr(me,oe.ADD_ATTR,bt))),oe.ADD_URI_SAFE_ATTR&&mr(An,oe.ADD_URI_SAFE_ATTR,bt),oe.FORBID_CONTENTS&&(Ft===vn&&(Ft=rd(Ft)),mr(Ft,oe.FORBID_CONTENTS,bt)),_t&&(K["#text"]=!0),jt&&mr(K,["html","head","body"]),K.table&&(mr(K,["tbody"]),delete Ee.tbody),oe.TRUSTED_TYPES_POLICY){if(typeof oe.TRUSTED_TYPES_POLICY.createHTML!="function")throw Y0('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof oe.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Y0('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');U=oe.TRUSTED_TYPES_POLICY,L=U.createHTML("")}else U===void 0&&(U=_ce(_,i)),U!==null&&typeof L=="string"&&(L=U.createHTML(""));Ys&&Ys(oe),gn=oe}},Xn=mr({},[...RN,...ON,...oce]),ar=mr({},[...DN,...lce]),xn=function(oe){let Pe=w(oe);(!Pe||!Pe.tagName)&&(Pe={namespaceURI:Lt,tagName:"template"});const ut=UC(oe.tagName),rn=UC(Pe.tagName);return ir[oe.namespaceURI]?oe.namespaceURI===Gt?Pe.namespaceURI===xt?ut==="svg":Pe.namespaceURI===Zt?ut==="svg"&&(rn==="annotation-xml"||Rt[rn]):!!Xn[ut]:oe.namespaceURI===Zt?Pe.namespaceURI===xt?ut==="math":Pe.namespaceURI===Gt?ut==="math"&&Ct[rn]:!!ar[ut]:oe.namespaceURI===xt?Pe.namespaceURI===Gt&&!Ct[rn]||Pe.namespaceURI===Zt&&!Rt[rn]?!1:!ar[ut]&&(nt[ut]||!Xn[ut]):!!(Te==="application/xhtml+xml"&&ir[oe.namespaceURI]):!1},Pn=function(oe){$0(n.removed,{element:oe});try{w(oe).removeChild(oe)}catch{N(oe)}},cr=function(oe,Pe){try{$0(n.removed,{attribute:Pe.getAttributeNode(oe),from:Pe})}catch{$0(n.removed,{attribute:null,from:Pe})}if(Pe.removeAttribute(oe),oe==="is")if(ln||Yt)try{Pn(Pe)}catch{}else try{Pe.setAttribute(oe,"")}catch{}},at=function(oe){let Pe=null,ut=null;if(Dt)oe="<remove></remove>"+oe;else{const an=wN(oe,/^[\r\n\t ]+/);ut=an&&an[0]}Te==="application/xhtml+xml"&&Lt===xt&&(oe='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+oe+"</body></html>");const rn=U?U.createHTML(oe):oe;if(Lt===xt)try{Pe=new m().parseFromString(rn,Te)}catch{}if(!Pe||!Pe.documentElement){Pe=P.createDocument(Lt,"template",null);try{Pe.documentElement.innerHTML=Cn?L:rn}catch{}}const wn=Pe.body||Pe.documentElement;return oe&&ut&&wn.insertBefore(e.createTextNode(ut),wn.childNodes[0]||null),Lt===xt?F.call(Pe,jt?"html":"body")[0]:jt?Pe.documentElement:wn},Nt=function(oe){return x.call(oe.ownerDocument||oe,oe,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},pt=function(oe){return oe instanceof p&&(typeof oe.nodeName!="string"||typeof oe.textContent!="string"||typeof oe.removeChild!="function"||!(oe.attributes instanceof h)||typeof oe.removeAttribute!="function"||typeof oe.setAttribute!="function"||typeof oe.namespaceURI!="string"||typeof oe.insertBefore!="function"||typeof oe.hasChildNodes!="function")},At=function(oe){return typeof o=="function"&&oe instanceof o};function Tt(mt,oe,Pe){iC(mt,ut=>{ut.call(n,oe,Pe,gn)})}const We=function(oe){let Pe=null;if(Tt($.beforeSanitizeElements,oe,null),pt(oe))return Pn(oe),!0;const ut=bt(oe.nodeName);if(Tt($.uponSanitizeElement,oe,{tagName:ut,allowedTags:K}),Mt&&oe.hasChildNodes()&&!At(oe.firstElementChild)&&Ps(/<[/\w!]/g,oe.innerHTML)&&Ps(/<[/\w!]/g,oe.textContent)||oe.nodeType===Q0.progressingInstruction||Mt&&oe.nodeType===Q0.comment&&Ps(/<[/\w]/g,oe.data))return Pn(oe),!0;if(!(tt.tagCheck instanceof Function&&tt.tagCheck(ut))&&(!K[ut]||Ee[ut])){if(!Ee[ut]&&Vn(ut)&&(ge.tagNameCheck instanceof RegExp&&Ps(ge.tagNameCheck,ut)||ge.tagNameCheck instanceof Function&&ge.tagNameCheck(ut)))return!1;if(_t&&!Ft[ut]){const rn=w(oe)||oe.parentNode,wn=M(oe)||oe.childNodes;if(wn&&rn){const an=wn.length;for(let _r=an-1;_r>=0;--_r){const Cr=C(wn[_r],!0);Cr.__removalCount=(oe.__removalCount||0)+1,rn.insertBefore(Cr,S(oe))}}}return Pn(oe),!0}return oe instanceof u&&!xn(oe)||(ut==="noscript"||ut==="noembed"||ut==="noframes")&&Ps(/<\/no(script|embed|frames)/i,oe.innerHTML)?(Pn(oe),!0):(Jt&&oe.nodeType===Q0.text&&(Pe=oe.textContent,iC([q,X,V],rn=>{Pe=K0(Pe,rn," ")}),oe.textContent!==Pe&&($0(n.removed,{element:oe.cloneNode()}),oe.textContent=Pe)),Tt($.afterSanitizeElements,oe,null),!1)},tn=function(oe,Pe,ut){if(ft&&(Pe==="id"||Pe==="name")&&(ut in e||ut in ct))return!1;if(!(Ht&&!Ye[Pe]&&Ps(ee,Pe))){if(!(yt&&Ps(z,Pe))){if(!(tt.attributeCheck instanceof Function&&tt.attributeCheck(Pe,oe))){if(!me[Pe]||Ye[Pe]){if(!(Vn(oe)&&(ge.tagNameCheck instanceof RegExp&&Ps(ge.tagNameCheck,oe)||ge.tagNameCheck instanceof Function&&ge.tagNameCheck(oe))&&(ge.attributeNameCheck instanceof RegExp&&Ps(ge.attributeNameCheck,Pe)||ge.attributeNameCheck instanceof Function&&ge.attributeNameCheck(Pe,oe))||Pe==="is"&&ge.allowCustomizedBuiltInElements&&(ge.tagNameCheck instanceof RegExp&&Ps(ge.tagNameCheck,ut)||ge.tagNameCheck instanceof Function&&ge.tagNameCheck(ut))))return!1}else if(!An[Pe]){if(!Ps(pe,K0(ut,se,""))){if(!((Pe==="src"||Pe==="xlink:href"||Pe==="href")&&oe!=="script"&&rce(ut,"data:")===0&&Je[oe])){if(!(zt&&!Ps(ie,K0(ut,se,"")))){if(ut)return!1}}}}}}}return!0},Vn=function(oe){return oe!=="annotation-xml"&&wN(oe,he)},qn=function(oe){Tt($.beforeSanitizeAttributes,oe,null);const{attributes:Pe}=oe;if(!Pe||pt(oe))return;const ut={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:me,forceKeepAttr:void 0};let rn=Pe.length;for(;rn--;){const wn=Pe[rn],{name:an,namespaceURI:_r,value:Cr}=wn,Ot=bt(an),on=Cr;let kt=an==="value"?on:ice(on);if(ut.attrName=Ot,ut.attrValue=kt,ut.keepAttr=!0,ut.forceKeepAttr=void 0,Tt($.uponSanitizeAttribute,oe,ut),kt=ut.attrValue,un&&(Ot==="id"||Ot==="name")&&(cr(an,oe),kt=vt+kt),Mt&&Ps(/((--!?|])>)|<\/(style|title|textarea)/i,kt)){cr(an,oe);continue}if(Ot==="attributename"&&wN(kt,"href")){cr(an,oe);continue}if(ut.forceKeepAttr)continue;if(!ut.keepAttr){cr(an,oe);continue}if(!Xt&&Ps(/\/>/i,kt)){cr(an,oe);continue}Jt&&iC([q,X,V],Xr=>{kt=K0(kt,Xr," ")});const pn=bt(oe.nodeName);if(!tn(pn,Ot,kt)){cr(an,oe);continue}if(U&&typeof _=="object"&&typeof _.getAttributeType=="function"&&!_r)switch(_.getAttributeType(pn,Ot)){case"TrustedHTML":{kt=U.createHTML(kt);break}case"TrustedScriptURL":{kt=U.createScriptURL(kt);break}}if(kt!==on)try{_r?oe.setAttributeNS(_r,an,kt):oe.setAttribute(an,kt),pt(oe)?Pn(oe):dL(n.removed)}catch{cr(an,oe)}}Tt($.afterSanitizeAttributes,oe,null)},In=function mt(oe){let Pe=null;const ut=Nt(oe);for(Tt($.beforeSanitizeShadowDOM,oe,null);Pe=ut.nextNode();)Tt($.uponSanitizeShadowNode,Pe,null),We(Pe),qn(Pe),Pe.content instanceof a&&mt(Pe.content);Tt($.afterSanitizeShadowDOM,oe,null)};return n.sanitize=function(mt){let oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Pe=null,ut=null,rn=null,wn=null;if(Cn=!mt,Cn&&(mt="<!-->"),typeof mt!="string"&&!At(mt))if(typeof mt.toString=="function"){if(mt=mt.toString(),typeof mt!="string")throw Y0("dirty is not a string, aborting")}else throw Y0("toString is not a function");if(!n.isSupported)return mt;if(en||ur(oe),n.removed=[],typeof mt=="string"&&(Pt=!1),Pt){if(mt.nodeName){const Cr=bt(mt.nodeName);if(!K[Cr]||Ee[Cr])throw Y0("root node is forbidden and cannot be sanitized in-place")}}else if(mt instanceof o)Pe=at("<!---->"),ut=Pe.ownerDocument.importNode(mt,!0),ut.nodeType===Q0.element&&ut.nodeName==="BODY"||ut.nodeName==="HTML"?Pe=ut:Pe.appendChild(ut);else{if(!ln&&!Jt&&!jt&&mt.indexOf("<")===-1)return U&&st?U.createHTML(mt):mt;if(Pe=at(mt),!Pe)return ln?null:st?L:""}Pe&&Dt&&Pn(Pe.firstChild);const an=Nt(Pt?mt:Pe);for(;rn=an.nextNode();)We(rn),qn(rn),rn.content instanceof a&&In(rn.content);if(Pt)return mt;if(ln){if(Yt)for(wn=H.call(Pe.ownerDocument);Pe.firstChild;)wn.appendChild(Pe.firstChild);else wn=Pe;return(me.shadowroot||me.shadowrootmode)&&(wn=Q.call(r,wn,!0)),wn}let _r=jt?Pe.outerHTML:Pe.innerHTML;return jt&&K["!doctype"]&&Pe.ownerDocument&&Pe.ownerDocument.doctype&&Pe.ownerDocument.doctype.name&&Ps(v8,Pe.ownerDocument.doctype.name)&&(_r="<!DOCTYPE "+Pe.ownerDocument.doctype.name+`>
`+_r),Jt&&iC([q,X,V],Cr=>{_r=K0(_r,Cr," ")}),U&&st?U.createHTML(_r):_r},n.setConfig=function(){let mt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ur(mt),en=!0},n.clearConfig=function(){gn=null,en=!1},n.isValidAttribute=function(mt,oe,Pe){gn||ur({});const ut=bt(mt),rn=bt(oe);return tn(ut,rn,Pe)},n.addHook=function(mt,oe){typeof oe=="function"&&$0($[mt],oe)},n.removeHook=function(mt,oe){if(oe!==void 0){const Pe=tce($[mt],oe);return Pe===-1?void 0:nce($[mt],Pe,1)[0]}return dL($[mt])},n.removeHooks=function(mt){$[mt]=[]},n.removeAllHooks=function(){$=gL()},n}var m8=p8(),yce="sendbird-mention-user-label",c3="sendbird-text-message-item-body",g8="sendbird-og-message-item-body__text-bubble";function EI(t){var n=t.userId,e=t.nickname,r='<span data-userid="'.concat(n,'" data-sb-mention="true" class="').concat(yce,'">').concat(e,"</span>"),i=m8(window),a=i.sanitize(r),s=a.split(" "),o=s[0],u=s.slice(1),c=Xe([o,'contenteditable="false"'],u,!0).join(" ");return c}var rE=function(t){return t===void 0&&(t=""),t?t.replace(/[<>]/g,function(n){return n==="<"?"&#60;":"&#62;"}):""},xC=function(t){return t?Array.from(t):[]};function Ece(t){var n;return t&&((n=t.isGroupChannel)===null||n===void 0?void 0:n.call(t))&&!t.isBroadcast&&!t.isSuper}function xN(t){return t.nodeType===mI.ElementNode}function _L(t){var n="",e="",r=!1;return t.forEach(function(i){if(xN(i)&&i.nodeName===MN.Span){var a=i.innerText,s=i.dataset,o=s===void 0?{}:s,u=o.userid,c=u===void 0?"":u;c&&(r=!0),n+=a,e+="".concat(Uy,"{").concat(c,"}")}else if(xN(i)&&i.nodeName===MN.Br)n+=`
`,e+=`
`;else if(xN(i)&&i.nodeName===MN.Div){var h=i.textContent,p=h===void 0?"":h;n+=`
`.concat(p),e+=`
`.concat(p)}else{var m=i.textContent,p=m===void 0?"":m;n+=p,e+=p}}),{messageText:n,mentionTemplate:e,isMentionedMessage:r}}function bce(t){var n=t.map(function(e){var r=e.text,i=e.userId;return i?EI({userId:i,nickname:r}):rE(r)}).join(" ").concat(" ");document.execCommand("insertHTML",!1,n)}var _8="sendbird-word__mention",y8="sendbird-mention-user-label",E8=".".concat(_8,", .").concat(y8);function yL(t,n){var e=Xe([t],Array.from(t.querySelectorAll(n)),!0).find(function(r){return r.matches(n)});return e}function Cce(t){var n=yL(t,".".concat(g8));if(n)return xC(n.childNodes);var e=yL(t,".".concat(c3));return xC(e?e.childNodes:t.childNodes)}function Sce(t){return!!t?.querySelector(E8)}function Tce(t){var n=t?.reduce(function(e,r){var i,a,s,o=r?.innerText;if(r instanceof Text&&(s=!1,o=(i=r.textContent)!==null&&i!==void 0?i:""),r instanceof HTMLElement&&(s=r.classList.contains(_8)||r.classList.contains(y8)?r:r.querySelector(E8)),s){var u=r?.innerText,c=(a=s.dataset)===null||a===void 0?void 0:a.userid;return Xe(Xe([],e,!0),[{text:u,userId:c}],!1)}return Xe(Xe([],e,!0),[{text:o}],!1)},[]);return n}function Nce(t,n){var e={},r=n.members;return t.forEach(function(i){if(i.userId){var a=r.find(function(s){return s.userId===i.userId});a&&(e[i.userId]=a)}}),Object.values(e)}function EL(t){var n=window.getSelection();if(n&&n.rangeCount>0){var e=n.getRangeAt(n.rangeCount-1);e.deleteContents();var r=document.createTextNode(t+"");e.insertNode(r),e.setStart(r,r.length),e.collapse(!0),n.removeAllRanges(),n.addRange(e)}}function Ace(t){var n=document.createElement("div");return n.innerHTML=t,n}function Mce(t){var n=t.ref,e=t.setIsInput,r=t.channel,i=t.setMentionedUsers;return R.useCallback(function(a){a.preventDefault();var s=a.clipboardData.getData("text/html"),o=a.clipboardData.getData("text")||Ice(a);if(!s){EL(rE(o)),e(!0);return}var u=m8(window),c=u.sanitize(s),h=Ace(c);if(!Sce(h)){EL(rE(o)),h.remove(),e(!0);return}var p=Cce(h),m=Tce(p),_=r.isGroupChannel()?Nce(m,r):[];i(_),bce(m),h.remove(),e(!0)},[n,e,r,i])}function Ice(t){var n=t.clipboardData.getData("text/uri-list");return n.length===0?"":n.split(`
`).reduce(function(e,r){var i=r.trim();return i!==""&&!i.startsWith("#")&&(e+=i+`
`),e},"")}var ME="@",ia={string:"string",mention:"mention",url:"url",undetermined:"undetermined",markdown:"markdown"},wce=/\[(.*?)\]\((.*?)\)|\*\*(.*?)\*\*/g;function Rce(t,n){var e=n||ME;return RegExp("(".concat(t.map(function(r){var i=r.userId.replace(/([.*+?^${}()|[\]\\])/g,"\\$1");return"".concat(e,"\\{").concat(i,"\\}")}).join("|"),")"),"g")}function Oce(t){var n=t.tokens,e=t.mentionedUsers,r=e===void 0?[]:e,i=t.templatePrefix,a=i===void 0?ME:i;if(!r?.length)return n;var s=Rce(r,a),o=n.map(function(u){if(u.type!==ia.undetermined)return u;var c=u.value,h=c.split(s),p=h.map(function(m){if(m.match(s)){var _=r.find(function(C){return"@{".concat(C?.userId,"}")===m}),b=_?.nickname||"(No name)";return{value:b,type:ia.mention,userId:_?.userId}}else return{value:m,type:ia.undetermined}});return p}).flat();return o}function Dce(t){var n=/(?:https?:\/\/|www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.(xn--)?[a-z]{2,20}\b([-a-zA-Z0-9@:%_+[\],.~#?&/=]*[-a-zA-Z0-9@:%_+~#?&/=])*/g,e=t.map(function(r){if(r.type!==ia.undetermined)return r;var i=r.value,a=i===void 0?"":i,s=Array.from(a.matchAll(n)),o=s.map(function(h){var p,m=h[0],_=(p=h.index)!==null&&p!==void 0?p:0,b=_+m.length;return{text:m,start:_,end:b}}),u=[{value:a,type:ia.string}],c=0;return o.forEach(function(h){var p=h.text,m=h.start,_=h.end,b=u.pop().value,C=b.slice(0,m-c),N=p,S=b.slice(_-c);C.length>0&&u.push({value:C,type:ia.string}),u.push({value:N,type:ia.url}),S.length>0&&u.push({value:S,type:ia.string}),c=_}),u}).flat();return e}function b8(t){var n=t,e=[];return n.forEach(function(r){if(r.type===ia.mention||r.type===ia.markdown){e.push(r);return}var i=r.value,a=Array.from(i.matchAll(wce)),s=a.map(function(h){var p,m=h[0],_=(p=h.index)!==null&&p!==void 0?p:0,b=_+m.length;return{text:m,start:_,end:b,groups:h.filter(function(C){return typeof C=="string"})}}),o=i,u=0;if(s.forEach(function(h){var p=h.text,m=h.start,_=h.end,b=h.groups,C={type:ia.undetermined,value:o.slice(0,m-u)};e.push(C);var N;p.startsWith("[")?N="url":p.startsWith("**")&&(N="bold");var S={type:ia.markdown,markdownType:N,value:p,groups:b};e.push(S),o=i.slice(_),u=_}),o){var c={type:ia.undetermined,value:o};e.push(c)}}),e}function C8(t){var n=t.reduce(function(e,r){var i=e[e.length-1];return i?.type===ia.string&&r.type===ia.string?(i.value="".concat(i.value).concat(r.value),e):Xe(Xe([],e,!0),[r],!1)},[]);return n}function wg(t){var n=t.messageText,e=t.mentionedUsers,r=e===void 0?[]:e,i=t.templatePrefix,a=i===void 0?ME:i,s=t.includeMarkdown,o=s===void 0?!1:s,u=[{type:ia.undetermined,value:n}],c=Oce({tokens:u,mentionedUsers:r,templatePrefix:a}),h=Dce(o?b8(c):c),p=C8(h);return p}function bL(t){var n=t.messageText,e=[{type:ia.undetermined,value:n}],r=C8(b8(e));return r}function Uce(t){var n="",e=t.split(`
`),r=e.map(function(a){var s,o,u=((s=a.match(/^\s*/))===null||s===void 0?void 0:s[0])||"",c=((o=a.match(/\s*$/))===null||o===void 0?void 0:o[0])||"",h=u.replace(/ /g,n),p=c.replace(/ /g,n);return h+a.trim()+p}),i=r.join(`
`);return i}var SS;(function(t){t.BASE="base",t.GROUP="group",t.OPEN="open"})(SS||(SS={}));var xce=function(t){var n=t.channel,e=t.config,r=sl(n?.channelType).with(SS.GROUP,function(){var i;return(i=e?.groupChannel)===null||i===void 0?void 0:i.enableDocument}).with(SS.OPEN,function(){var i;return(i=e?.openChannel)===null||i===void 0?void 0:i.enableDocument}).otherwise(function(){return!0});return r},Lce="sendbird-message-input-text-field",Fs=function(){return null},LN=function(t){t&&t.current&&(t.current.innerHTML="")},CL={targetString:"",startNodeIndex:null,startOffsetIndex:null,endNodeIndex:null,endOffsetIndex:null},IE=E.forwardRef(function(t,n){var e,r,i,a,s,o=t.channel,u=t.className,c=u===void 0?"":u,h=t.messageFieldId,p=h===void 0?"":h,m=t.isEdit,_=m===void 0?!1:m,b=t.isMobile,C=b===void 0?!1:b,N=t.isMentionEnabled,S=N===void 0?!1:N,M=t.isVoiceMessageEnabled,w=M===void 0?!0:M,U=t.isSelectingMultipleFilesEnabled,L=U===void 0?!1:U,P=t.disabled,x=P===void 0?!1:P,H=t.message,F=H===void 0?null:H,Q=t.placeholder,$=Q===void 0?"":Q,q=t.maxLength,X=q===void 0?5e3:q,V=t.onFileUpload,ee=V===void 0?Fs:V,z=t.onSendMessage,ie=z===void 0?Fs:z,se=t.onUpdateMessage,he=se===void 0?Fs:se,pe=t.onCancelEdit,K=pe===void 0?Fs:pe,ce=t.onStartTyping,me=ce===void 0?Fs:ce,Le=t.channelUrl,ge=Le===void 0?"":Le,Ee=t.mentionSelectedUser,Ye=Ee===void 0?null:Ee,tt=t.onUserMentioned,yt=tt===void 0?Fs:tt,Ht=t.onMentionStringChange,zt=Ht===void 0?Fs:Ht,Xt=t.onMentionedUserIdsUpdated,Jt=Xt===void 0?Fs:Xt,Mt=t.onVoiceMessageIconClick,jt=Mt===void 0?Fs:Mt,en=t.onKeyUp,Dt=en===void 0?Fs:en,ln=t.onKeyDown,Yt=ln===void 0?Fs:ln,st=t.renderFileUploadIcon,ft=st===void 0?Fs:st,un=t.renderVoiceMessageIcon,vt=un===void 0?Fs:un,_t=t.renderSendMessageIcon,Pt=_t===void 0?Fs:_t,Et=t.setMentionedUsers,Ft=Et===void 0?Fs:Et,vn=t.acceptableMimeTypes,Je=n&&"current"in n?n:R.useRef(null),Nn=R.useRef(null),An=p||Lce,Mn=Un().stringSet,Zt=Zn().state,Gt=Zt.config,xt=Zt.eventHandlers,Lt=xce({channel:o,config:Gt}),Cn=R.useRef(),ir=R.useState(!1),It=ir[0],Rt=ir[1],Ct=R.useState([]),nt=Ct[0],Te=Ct[1],it=R.useState(J({},CL)),St=it[0],bt=it[1],gn=t?.value;R.useEffect(function(){var at=Je?.current;Te([]),Rt(at?.textContent?at.textContent.trim().length>0:!1)},[gn]),R.useEffect(function(){_||(Rt(!1),LN(Je))},[ge]),R.useEffect(function(){var at,Nt;if(_&&F?.messageId){var pt=Je?.current;if(S&&F?.mentionedUsers&&F.mentionedUsers.length>0&&F?.mentionedMessageTemplate&&F.mentionedMessageTemplate.length>0){var At=F.mentionedUsers,Tt=At===void 0?[]:At,We=wg({messageText:F?.mentionedMessageTemplate,mentionedUsers:Tt,includeMarkdown:o.isGroupChannel()&&Gt.groupChannel.enableMarkdownForUserMessage});pt&&(pt.innerHTML=We.map(function(tn){if(tn.type===ia.mention){var Vn=Tt.find(function(In){return In.userId===tn.userId}),qn="".concat(ME).concat(Vn?.nickname||tn.value||Mn.MENTION_NAME__NO_NAME);return EI({userId:tn.userId,nickname:qn})}return rE(tn.value)}).join(""))}else{try{pt&&(pt.innerHTML=(at=rE(F?.message))!==null&&at!==void 0?at:"")}catch{}Te([])}Rt(pt?.textContent?((Nt=pt?.textContent)===null||Nt===void 0?void 0:Nt.trim().length)>0:!1)}},[_,F]);var ct=R.useCallback(function(){var at,Nt=Je?.current;if(S&&Nt){var pt=Array.from(Nt.getElementsByClassName("sendbird-mention-user-label")).map(function(At){var Tt;return(Tt=At?.dataset)===null||Tt===void 0?void 0:Tt.userid});(!wle(nt,pt)||pt.length===0)&&(Jt(pt),Te(pt))}Rt(Nt?.textContent?((at=Nt.textContent)===null||at===void 0?void 0:at.trim().length)>0:!1)},[St,S]);R.useEffect(function(){var at,Nt,pt,At;if(S&&Ye){var Tt=St.targetString,We=St.startNodeIndex,tn=St.startOffsetIndex,Vn=St.endNodeIndex,qn=St.endOffsetIndex,In=Je?.current;if(Tt&&We!==null&&tn!==null&&qn!==null&&Vn!==null&&In){var mt=xC(In?.childNodes),oe=(Nt=(at=mt[We])===null||at===void 0?void 0:at.textContent)!==null&&Nt!==void 0?Nt:"",Pe=document.createTextNode(oe.slice(0,tn)),ut=(At=(pt=mt[Vn])===null||pt===void 0?void 0:pt.textContent)!==null&&At!==void 0?At:"",rn=qn&&document.createTextNode("".concat(ut.slice(qn))),wn=EI({userId:Ye?.userId,nickname:"".concat(Uy).concat(Ye?.nickname||Mn.MENTION_NAME__NO_NAME)}),an=document.createElement("div");an.innerHTML=wn;var _r=Xe(Xe(Xe([],mt.slice(0,We),!0),[Pe,an.childNodes[0],rn],!1),mt.slice(Vn+1),!0);if(In&&(In.innerHTML="",_r.forEach(function(on){on&&In.appendChild(on)})),yt(Ye),window.getSelection||document.getSelection){var Cr=window.getSelection()||document.getSelection();Cr?.removeAllRanges();var Ot=new Range;Ot.selectNodeContents(In),Ot.setStart(In.childNodes[We+2],1),Ot.setEnd(In.childNodes[We+2],1),Ot.collapse(!1),Cr?.addRange(Ot),In.focus()}bt(J({},CL)),ct()}}},[Ye,S]);var En=R.useCallback(function(){var at,Nt,pt=((at=window?.getSelection)===null||at===void 0?void 0:at.call(window))||((Nt=document?.getSelection)===null||Nt===void 0?void 0:Nt.call(document)),At=Je?.current;if(pt?.anchorNode===At&&zt(""),S&&At&&pt&&pt.anchorNode===pt.focusNode&&pt.anchorOffset===pt.focusOffset)for(var Tt="",We=null,tn=null,Vn=function(mt){var oe=At.childNodes[mt];if(oe.nodeType===mI.TextNode){var Pe=(function(){var an;return oe===pt.anchorNode?oe?.textContent?oe?.textContent.slice(0,pt.anchorOffset):"":(an=oe?.textContent)!==null&&an!==void 0?an:""})();if(Tt.length>0)Tt+=Pe;else{for(var ut=Pe.lastIndexOf(Uy),rn=ut-1;rn>-1&&Pe[rn]===Uy;rn-=1)ut=rn;ut>-1&&(Tt=Pe,We=mt,tn=ut)}}else Tt="",We=null,tn=null;if(oe===pt.anchorNode){var wn=Tt&&tn!==null?Tt.slice(tn):"";return bt({targetString:wn,startNodeIndex:We,startOffsetIndex:tn,endNodeIndex:mt,endOffsetIndex:pt.anchorOffset}),zt(wn),{value:void 0}}},qn=0;qn<At.childNodes.length;qn+=1){var In=Vn(qn);if(typeof In=="object")return In.value}},[S]),ur=function(){var at,Nt;try{var pt=Je?.current;if(!_&&pt?.textContent){var At=_L(pt.childNodes),Tt=At.messageText,We=At.mentionTemplate,tn=At.isMentionedMessage,Vn={message:Tt,mentionTemplate:We};tn||(Vn.mentionTemplate=""),ie(Vn),LN(Je),WD(navigator.userAgent)?(Nn.current&&Nn.current.focus(),requestAnimationFrame(function(){return pt.focus()})):pt.focus(),Rt(!1)}}catch(qn){(Nt=(at=xt?.message)===null||at===void 0?void 0:at.onSendMessageFailed)===null||Nt===void 0||Nt.call(at,F,qn)}},Xn=!(!((r=(e=Je?.current)===null||e===void 0?void 0:e.textContent)===null||r===void 0)&&r.trim()),ar=function(){var at,Nt;try{var pt=Je?.current,At=F?.messageId;if(_&&At&&pt){var Tt=_L(pt.childNodes),We=Tt.messageText,tn=Tt.mentionTemplate,Vn={messageId:At,message:We,mentionTemplate:tn};he(Vn),LN(Je)}}catch(qn){(Nt=(at=xt?.message)===null||at===void 0?void 0:at.onUpdateMessageFailed)===null||Nt===void 0||Nt.call(at,F,qn)}},xn=Mce({ref:Je,setMentionedUsers:Ft,channel:o,setIsInput:Rt}),Pn=function(at){var Nt,pt,At=at.currentTarget.files;try{At&&ee(Array.from(At))}catch(Tt){(pt=(Nt=xt?.message)===null||Nt===void 0?void 0:Nt.onFileUploadFailed)===null||pt===void 0||pt.call(Nt,Tt)}finally{at.target.value=""}},cr=function(){var at,Nt=Je,pt=window.getSelection();if(!(!pt||pt.rangeCount===0)){var At=pt.getRangeAt(pt.rangeCount-1),Tt=At.getBoundingClientRect(),We=(at=Nt.current)===null||at===void 0?void 0:at.getBoundingClientRect();if(!(!We||!Nt.current)){if(Tt.bottom>We.bottom){var tn=Math.min(Tt.bottom-We.bottom,Nt.current.scrollHeight-Nt.current.clientHeight);Nt.current.scrollTop+=tn}else if(Tt.top<We.top){var tn=Math.min(We.top-Tt.top,Nt.current.scrollTop);Nt.current.scrollTop-=tn}}}};return E.createElement("form",{className:Hn.apply(void 0,Xe(Xe([],Array.isArray(c)?c:[c],!1),[_&&"sendbird-message-input__edit",x&&"sendbird-message-input-form__disabled"],!1))},E.createElement("div",{className:Hn("sendbird-message-input",x&&"sendbird-message-input__disabled"),"data-testid":"sendbird-message-input"},WD(navigator.userAgent)&&E.createElement("input",{id:"ghost-input-reset-ime-cjk",ref:Nn,style:{opacity:0,padding:0,margin:0,height:0,border:"none",position:"absolute",top:-9999},defaultValue:"_"}),E.createElement("div",{id:"".concat(An).concat(_?F?.messageId:""),className:"sendbird-message-input--textarea ".concat(An),contentEditable:!x,role:"textbox","aria-label":"Text Input",ref:Je,disabled:x,maxLength:X,onKeyDown:function(at){var Nt,pt,At,Tt,We=Yt(at);We?at.preventDefault():(!at.shiftKey&&at.key===Co.Enter&&!C&&(!((Nt=Je?.current)===null||Nt===void 0)&&Nt.textContent)&&Je.current.textContent.trim().length>0&&((pt=at?.nativeEvent)===null||pt===void 0?void 0:pt.isComposing)!==!0&&(at.preventDefault(),ur()),at.key===Co.Backspace&&((Tt=(At=Je?.current)===null||At===void 0?void 0:At.childNodes)===null||Tt===void 0?void 0:Tt.length)===2&&!Je.current.childNodes[0].textContent&&Je.current.childNodes[1].nodeType===mI.ElementNode&&Je.current.removeChild(Je.current.childNodes[1]))},onKeyUp:function(at){var Nt=Dt(at);Nt?at.preventDefault():En()},onClick:function(){En()},onInput:function(){var at;me(),Rt(!((at=Je?.current)===null||at===void 0)&&at.textContent?Je.current.textContent.trim().length>0:!1),ct()},onPaste:function(at){xn(at),setTimeout(cr)}}),((s=(a=(i=Je?.current)===null||i===void 0?void 0:i.textContent)===null||a===void 0?void 0:a.length)!==null&&s!==void 0?s:0)===0&&E.createElement($e,{className:"sendbird-message-input--placeholder",type:Ge.BODY_1,color:x?De.ONBACKGROUND_4:De.ONBACKGROUND_3},$||Mn.MESSAGE_INPUT__PLACE_HOLDER),!_&&It&&E.createElement(Su,{className:"sendbird-message-input--send",height:"32px",width:"32px",onClick:function(){return ur()},testID:"sendbird-message-input-send-button"},Pt?.()||E.createElement(lt,{type:qe.SEND,fillColor:x?rt.ON_BACKGROUND_4:rt.PRIMARY,width:"20px",height:"20px"})),!_&&!It&&(ft?.()||Lt&&E.createElement(Su,{className:Hn("sendbird-message-input--attach",w&&"is-voice-message-enabled"),height:"32px",width:"32px",onClick:function(){var at,Nt;(Nt=(at=Cn?.current)===null||at===void 0?void 0:at.click)===null||Nt===void 0||Nt.call(at)}},E.createElement(lt,{type:qe.ATTACH,fillColor:x?rt.ON_BACKGROUND_4:rt.CONTENT_INVERSE,width:"20px",height:"20px"}),E.createElement("input",{className:"sendbird-message-input--attach-input",type:"file",ref:Cn,onChange:function(at){return Pn(at)},accept:cle(vn),multiple:L&&Ece(o)}))),w&&!_&&!It&&E.createElement(Su,{className:"sendbird-message-input--voice-message",width:"32px",height:"32px",onClick:jt},vt?.()||E.createElement(lt,{type:qe.AUDIO_ON_LINED,fillColor:x?rt.ON_BACKGROUND_4:rt.CONTENT_INVERSE,width:"20px",height:"20px"}))),_&&E.createElement("div",{className:"sendbird-message-input--edit-action","data-testid":"sendbird-message-input--edit-action"},E.createElement(Tu,{className:"sendbird-message-input--edit-action__cancel",type:mi.SECONDARY,size:of.SMALL,onClick:K},Mn.BUTTON__CANCEL),E.createElement(Tu,{className:"sendbird-message-input--edit-action__save",type:mi.PRIMARY,size:of.SMALL,disabled:Xn,onClick:function(){return ar()}},Mn.BUTTON__SAVE)))});function SL(t){Bi(1,arguments);var n=So(t);return n.setHours(0,0,0,0),n}function rT(t,n){Bi(2,arguments);var e=SL(t),r=SL(n);return e.getTime()===r.getTime()}function kce(t){return Bi(1,arguments),rT(t,Date.now())}function Pce(t,n){Bi(2,arguments);var e=So(t),r=So(n);return e.getFullYear()===r.getFullYear()}function Fce(t){return Bi(1,arguments),Pce(t,Date.now())}function Bce(t,n){Bi(2,arguments);var e=So(t),r=Nd(n);return isNaN(r)?new Date(NaN):(r&&e.setDate(e.getDate()+r),e)}function Hce(t,n){Bi(2,arguments);var e=Nd(n);return Bce(t,-e)}function Gce(t){return Bi(1,arguments),rT(t,Hce(Date.now(),1))}var Vce=function(t){var n,e=t.channel,r=t.locale,i=t.stringSet,a=i===void 0?Ww:i,s=(n=e?.lastMessage)===null||n===void 0?void 0:n.createdAt,o=r?{locale:r}:null;return s?kce(s)?qs(s,a.DATE_FORMAT__LAST_MESSAGE_CREATED_AT__TODAY,o):Gce(s)?a.MESSAGE_STATUS__YESTERDAY||"Yesterday":Fce(s)?qs(s,a.DATE_FORMAT__LAST_MESSAGE_CREATED_AT__THIS_YEAR,o):qs(s,a.DATE_FORMAT__LAST_MESSAGE_CREATED_AT__PREVIOUS_YEAR,o):""},Ph,Fh,zce=(Ph={},Ph[Qr.SENT]=qe.DONE,Ph[Qr.DELIVERED]=qe.DONE_ALL,Ph[Qr.READ]=qe.DONE_ALL,Ph[Qr.FAILED]=qe.ERROR,Ph[Qr.PENDING]=void 0,Ph[Qr.NONE]=void 0,Ph),jce=(Fh={},Fh[Qr.SENT]=rt.SENT,Fh[Qr.DELIVERED]=rt.SENT,Fh[Qr.READ]=rt.READ,Fh[Qr.FAILED]=rt.ERROR,Fh[Qr.PENDING]=void 0,Fh[Qr.NONE]=void 0,Fh);function qce(t){var n,e=t.className,r=t.message,i=t.channel,a=t.isDateSeparatorConsidered,s=a===void 0?!0:a,o=Un(),u=o.stringSet,c=o.dateLocale,h=PF(i,r),p=((n=i?.isGroupChannel)===null||n===void 0?void 0:n.call(i))&&(i.isSuper||i.isBroadcast)&&!(h===Qr.PENDING||h===Qr.FAILED);return E.createElement("div",{className:Xe(Xe([],Array.isArray(e)?e:[e],!0),["sendbird-message-status"],!1).join(" ")},h===Qr.PENDING?E.createElement(gf,{className:"sendbird-message-status__icon",testID:"sendbird-message-status-icon",width:"16px",height:"16px"},E.createElement(lt,{type:qe.SPINNER,fillColor:rt.PRIMARY,width:"16px",height:"16px"})):E.createElement(lt,{className:Hn("sendbird-message-status__icon",p&&"hide-icon",h!==Qr.FAILED&&"sendbird-message-status--sent"),testID:"sendbird-message-status-icon",type:zce[h]||qe.ERROR,fillColor:jce[h],width:"16px",height:"16px"}),vle(h)&&E.createElement($e,{className:"sendbird-message-status__text",testID:"sendbird-message-status-text",type:Ge.CAPTION_3,color:De.ONBACKGROUND_2},s?qs(r?.createdAt||0,u.DATE_FORMAT__MESSAGE_CREATED_AT,{locale:c}):Vce({channel:i,locale:c,stringSet:u})))}var $ce=function(t){var n=t.ref,e=t.onClick,r=e===void 0?Mr:e,i=t.onBlur,a=i===void 0?Mr:i,s=t.renderIcon,o=s===void 0?function(u){return E.createElement(lt,J({},u))}:s;return E.createElement(Su,{ref:n,width:"32px",height:"32px",onClick:r,onBlur:a},o({type:qe.MORE,fillColor:rt.CONTENT_INVERSE,width:"24px",height:"24px"}))},TL=function(t){var n,e=Un().stringSet,r=Ri(),i=r.message,a=r.hideMenu;return E.createElement(Wa,J({},t,{onClick:function(s){var o;Ks(i)&&r3(i.message),a(),(o=t.onClick)===null||o===void 0||o.call(t,s)}}),(n=t.children)!==null&&n!==void 0?n:e.MESSAGE_MENU__COPY)},NL=function(t){var n,e=Un().stringSet,r=Ri(),i=r.message,a=r.hideMenu,s=r.setQuoteMessage;return E.createElement(Wa,J({},t,{disabled:i.parentMessageId>0,onClick:function(o){var u;s(i),a(),(u=t.onClick)===null||u===void 0||u.call(t,o)}}),(n=t.children)!==null&&n!==void 0?n:e.MESSAGE_MENU__REPLY)},AL=function(t){var n,e=Un().stringSet,r=Ri(),i=r.message,a=r.hideMenu,s=r.onReplyInThread;return E.createElement(Wa,J({},t,{onClick:function(o){var u;s({message:i}),a(),(u=t.onClick)===null||u===void 0||u.call(t,o)}}),(n=t.children)!==null&&n!==void 0?n:e.MESSAGE_MENU__THREAD)},ML=function(t){var n,e=Un().stringSet,r=Ri(),i=r.hideMenu,a=r.onMoveToParentMessage;return E.createElement(Wa,J({},t,{onClick:function(s){var o;a(),i(),(o=t.onClick)===null||o===void 0||o.call(t,s)}}),(n=t.children)!==null&&n!==void 0?n:e.MESSAGE_MENU__OPEN_IN_CHANNEL)},IL=function(t){var n,e=Un().stringSet,r=Ri(),i=r.hideMenu,a=r.showEdit,s=r.isOnline;return E.createElement(Wa,J({},t,{onClick:function(o){var u;s&&(a(!0),i(),(u=t.onClick)===null||u===void 0||u.call(t,o))}}),(n=t.children)!==null&&n!==void 0?n:e.MESSAGE_MENU__EDIT)},wL=function(t){var n,e=Un().stringSet,r=Ri(),i=r.message,a=r.hideMenu,s=r.resendMessage,o=r.isOnline;return E.createElement(Wa,J({},t,{onClick:function(u){var c;o&&(s(i),a(),(c=t.onClick)===null||c===void 0||c.call(t,u))}}),(n=t.children)!==null&&n!==void 0?n:e.MESSAGE_MENU__RESEND)},RL=function(t){var n,e,r,i=Un().stringSet,a=Ri(),s=a.message,o=a.hideMenu,u=a.deleteMessage,c=a.showRemove,h=a.isOnline,p=a.disableDeleteMessage;return E.createElement(Wa,J({},t,{disabled:typeof p=="boolean"?p:((e=(n=s.threadInfo)===null||n===void 0?void 0:n.replyCount)!==null&&e!==void 0?e:0)>0,onClick:function(m){var _;hs(s)?u(s):h&&(c(!0),o(),(_=t.onClick)===null||_===void 0||_.call(t,m))}}),(r=t.children)!==null&&r!==void 0?r:i.MESSAGE_MENU__DELETE)},OL=function(t){var n,e=Un().stringSet,r=Ri(),i=r.message,a=r.hideMenu,s=r.markAsUnread;return E.createElement(Wa,J({},t,{onClick:function(o){var u;s&&s(i,"manual"),a(),(u=t.onClick)===null||u===void 0||u.call(t,o)}}),(n=t.children)!==null&&n!==void 0?n:e.MESSAGE_MENU__MARK_AS_UNREAD)},S8=function(t){var n,e=t.channel,r=t.message;if(hs(r)||Eo(r)||!(!((n=e?.isGroupChannel)===null||n===void 0)&&n.call(e))||e?.isEphemeral)return!1;var i=e?.isBroadcast,a=e?.myRole===nl.OPERATOR;return i?a:!0},Kce=function(t){var n=t.message;return Ks(n)},Yce=function(t){var n=t.message,e=t.channel,r=t.isByMe;return!e?.isEphemeral&&Ks(n)&&eE(n)&&r},Wce=function(t){var n=t.message,e=t.isByMe;return hs(n)&&n?.isResendable&&e},Qce=function(t){var n=t.message,e=t.channel,r=t.isByMe;return!e?.isEphemeral&&!Eo(n)&&r},Xce=function(t){var n=t.onMoveToParentMessage,e=n===void 0?void 0:n;return!!e},Zce=function(t){var n=t.channel,e=t.message,r=t.replyType;return S8({channel:n,message:e})&&r==="QUOTE_REPLY"},Jce=function(t){var n=t.channel,e=t.message,r=t.replyType,i=t.onReplyInThread;return S8({channel:n,message:e})&&r==="THREAD"&&!e?.parentMessageId&&typeof i=="function"},ede=function(t){var n,e=t.message,r=t.channel,i=t.replyType;return!hs(e)&&!Eo(e)&&((n=r?.isGroupChannel)===null||n===void 0?void 0:n.call(r))&&i!=="THREAD"},tde=function(t){var n,e=t.className,r=t.message,i=t.channel,a=t.isByMe,s=t.replyType,o=t.renderTrigger,u=o===void 0?$ce:o,c=t.renderMenuItems,h=t.disableDeleteMessage,p=h===void 0?null:h,m=t.showEdit,_=m===void 0?Mr:m,b=t.showRemove,C=b===void 0?Mr:b,N=t.deleteMessage,S=t.resendMessage,M=t.markAsUnread,w=t.setQuoteMessage,U=t.onReplyInThread,L=t.onMoveToParentMessage,P=Zn().state.config,x=P.isOnline,H=P.groupChannel.enableMarkAsUnread,F=R.useRef(null),Q=R.useRef(null),$=R.useState(!1),q=$[0],X=$[1],V=function(){return X(!1)},ee=function(){return X(!0)},z=function(){return X(function(se){return!se})},ie={message:r,channel:i,isByMe:a,replyType:s,onReplyInThread:U,onMoveToParentMessage:L};return E.createElement("div",{className:Hn("sendbird-message-menu",e),ref:Q},E.createElement(a3,{value:{message:r,hideMenu:V,showMenu:ee,toggleMenu:z,setQuoteMessage:w,onReplyInThread:U,onMoveToParentMessage:L,showEdit:_,showRemove:C,deleteMessage:N,resendMessage:S,markAsUnread:M,isOnline:x,disableDeleteMessage:p,triggerRef:F,containerRef:Q}},u({ref:F,onClick:z}),q&&E.createElement(To,{id:o3(r.messageId),parentRef:F,parentContainRef:Q,closeDropdown:V,openLeft:a},(n=c?.({items:{CopyMenuItem:TL,ReplyMenuItem:NL,ThreadMenuItem:AL,OpenInChannelMenuItem:ML,EditMenuItem:IL,MarkAsUnreadMenuItem:OL,ResendMenuItem:wL,DeleteMenuItem:RL}}))!==null&&n!==void 0?n:E.createElement(E.Fragment,null,Kce(ie)&&E.createElement(TL,null),Zce(ie)&&E.createElement(NL,null),Jce(ie)&&E.createElement(AL,null),Xce(ie)&&E.createElement(ML,null),Yce(ie)&&E.createElement(IL,null),H&&ede(ie)&&E.createElement(OL,null),Wce(ie)&&E.createElement(wL,null),Qce(ie)&&E.createElement(RL,null)))))},nde=300;function DL(t){rde(t)&&t.touches.length<2&&t.preventDefault&&t.preventDefault()}function rde(t){return t&&"touches"in t}function Ld(t,n){var e=t.onLongPress,r=t.onClick,i=n===void 0?{}:n,a=i.delay,s=a===void 0?nde:a,o=i.shouldPreventDefault,u=o===void 0?!0:o,c=i.shouldStopPropagation,h=c===void 0?!1:c,p=Ea().isMobile,m=R.useState(!1),_=m[0],b=m[1],C=R.useState(!1),N=C[0],S=C[1],M=R.useRef(),w=R.useRef(),U=R.useCallback(function(P){P.persist();var x=J({},P);S(!1),h&&P.stopPropagation(),u&&P.target&&(P.target.addEventListener("touchend",DL,{passive:!1}),w.current=P.target),M.current=setTimeout(function(){e(x),b(!0)},s)},[e,s,u,h,p]),L=R.useCallback(function(P,x,H){x===void 0&&(x=!0),H===void 0&&(H=!1),S(!!H),M?.current&&clearTimeout(M.current),x&&!_&&!N&&r?.(P),b(!1),u&&w.current&&w.current.removeEventListener("touchend",DL)},[u,r,_,N]);return{onMouseDown:function(P){return U(P)},onMouseUp:function(P){return L(P)},onMouseLeave:function(P){return L(P,!1)},onTouchStart:function(P){return U(P)},onTouchMove:function(P){return L(P,!1,!0)},onTouchEnd:function(P){return L(P)}}}var iE=E.forwardRef(function(t,n){var e=t.className,r=t.width,i=t.height,a=t.selected,s=t.dataSbId,o=s===void 0?"":s,u=t.testID,c=t.onClick,h=t.children,p=Ld({onLongPress:Mr,onClick:c},{shouldPreventDefault:!0,shouldStopPropagation:!0});return E.createElement("div",J({className:Xe(Xe([],Array.isArray(e)?e:[e],!0),["sendbird-reaction-button".concat(a?"--selected":"")],!1).join(" "),ref:n,role:"button",style:{width:r,height:i}},p,{tabIndex:0,"data-sb-id":u??o,"data-testid":u??o}),E.createElement("div",{className:"sendbird-reaction-button__inner"},h))});function ide(t){var n=t.className,e=t.message,r=t.userId,i=t.spaceFromTrigger,a=i===void 0?{x:0,y:0}:i,s=t.emojiContainer,o=t.filterEmojiCategoryIds,u=t.toggleReaction,c=R.useRef(null),h=R.useRef(null),p=R.useMemo(function(){return pI(s,o?.(e))},[s,o]);return Eo(e)||hs(e)?null:E.createElement("div",{className:Qs([n??"","sendbird-message-item-reaction-menu"]),ref:h},E.createElement(No,{menuTrigger:function(m){return E.createElement(Su,{className:"sendbird-message-item-reaction-menu__trigger",ref:c,width:"32px",height:"32px",onClick:function(){m()}},E.createElement(lt,{className:"sendbird-message-item-reaction-menu__trigger__icon",testID:"sendbird-message-item-reaction-menu__trigger__icon",type:qe.EMOJI_MORE,fillColor:rt.CONTENT_INVERSE,width:"24px",height:"24px"}))},menuItems:function(m){return E.createElement(QF,{id:o3(e.messageId),parentRef:c,parentContainRef:h,closeDropdown:m,spaceFromTrigger:a},p.map(function(_){var b,C,N,S=((N=(C=(b=e?.reactions)===null||b===void 0?void 0:b.find(function(M){return M.key===_.key}))===null||C===void 0?void 0:C.userIds)===null||N===void 0?void 0:N.some(function(M){return M===r}))||!1;return E.createElement(iE,{key:_.key,width:"36px",height:"36px",selected:S,onClick:function(){m(),u?.(e,_.key,S)},testID:"ui_emoji_reactions_menu_".concat(_.key)},E.createElement(Ni,{url:_.url,width:"28px",height:"28px",placeHolder:function(M){var w=M.style;return E.createElement("div",{style:w},E.createElement(lt,{type:qe.QUESTION,fillColor:rt.ON_BACKGROUND_3,width:"28px",height:"28px"}))}}))}))}}))}var d3=E.forwardRef(function(t,n){var e=t.className,r=e===void 0?"":e,i=t.testID,a=t.children,s=t.count,o=s===void 0?"":s,u=t.isAdd,c=u===void 0?!1:u,h=t.selected,p=h===void 0?!1:h,m=t.onClick,_=m===void 0?function(){}:m,b=function(){return p&&!c?"--selected":c?"--is-add":""};return E.createElement("div",{className:Xe(Xe([],Array.isArray(r)?r:[r],!0),["sendbird-reaction-badge".concat(b())],!1).join(" "),"data-testid":i,role:"button",ref:n,onClick:_,onKeyDown:_,onTouchEnd:_,tabIndex:0},E.createElement("div",{className:"sendbird-reaction-badge__inner"},E.createElement("div",{className:"sendbird-reaction-badge__inner__icon"},a),E.createElement($e,{className:a&&o?"sendbird-reaction-badge__inner__count":"",type:Ge.CAPTION_3,color:De.ONBACKGROUND_1},o)))}),iT=function(t){var n,e=t.className,r=e===void 0?"":e,i=t.children,a=t.onBackdropClick,s=Zn().state.config.logger,o=R.useRef();return o.current=document.getElementById(Ep),o.current||(o.current=document.createElement("div"),o.current.setAttribute("id",Ep),document.body.appendChild(o.current),(n=s?.warning)===null||n===void 0||n.call(s,"@sendbird/uikit-react/ui/BottomSheet | Should put a ModalRoot to use the BottomSheet.")),Lg.createPortal(E.createElement("div",{className:"".concat(r," sendbird-bottomsheet")},E.createElement("div",{className:"sendbird-bottomsheet__content",role:"dialog","aria-modal":"true","aria-expanded":"true"},i),E.createElement("div",{className:"sendbird-bottomsheet__backdrop",onClick:function(u){u?.stopPropagation(),a?.()}})),o.current)};function ade(t){var n=t.height,e=n===void 0?24:n,r=t.width,i=r===void 0?24:r;return E.createElement("div",{className:"sendbird-muted-avatar",style:{height:"".concat(e,"px"),width:"".concat(i,"px")}},E.createElement("div",{className:"sendbird-muted-avatar__icon"},E.createElement("div",{className:"sendbird-muted-avatar__bg",style:{height:"".concat(e,"px"),width:"".concat(i,"px")}}),E.createElement(lt,{type:qe.MUTE,fillColor:rt.WHITE,width:"".concat(e-8,"px"),height:"".concat(i-8,"px")})))}function sde(t){var n=t.id,e=t.checked,r=e===void 0?!1:e,i=t.disabled,a=t.onChange,s=R.useState(r),o=s[0],u=s[1];return E.createElement("label",{className:["sendbird-checkbox",i?"disabled":""].join(" "),htmlFor:n},E.createElement("input",{disabled:i,id:n,type:"checkbox",checked:o,onClick:function(){i||u(!o)},onChange:a}),E.createElement("span",{className:["sendbird-checkbox--checkmark",i?"disabled":""].join(" ")}))}var ode=function(t){var n=t.stores,e=n===void 0?{}:n,r=e.sdkStore,i=r===void 0?{}:r,a=i.sdk;return a},lde=function(t){var n=t.config,e=n===void 0?{}:n,r=e.pubSub;return r},ude=function(t){return(function(n){return new Promise(function(e,r){var i=ode(t),a=lde(t);i||r(new Error("Sdk not found")),i.groupChannel||r(new Error("Not found GroupChannelModule")),i.groupChannel.createChannel&&typeof i.groupChannel.createChannel=="function"||r(new Error('Not found the function "createChannel"')),i.groupChannel.createChannel(n).then(function(s){e(s),a.publish(wa.CREATE_CHANNEL,{channel:s})}).catch(r)})})};function wp(t){var n,e,r=t.user,i=t.currentUserId,a=t.disableMessaging,s=a===void 0?!1:a,o=t.onSuccess,u=Zn().state,c=ude(u),h=(n=u?.config)===null||n===void 0?void 0:n.logger,p=R.useContext(gi).stringSet,m=i||((e=u?.config)===null||e===void 0?void 0:e.userId),_=Ip().onStartDirectMessage;return E.createElement("div",{className:"sendbird__user-profile"},E.createElement("section",{className:"sendbird__user-profile-avatar"},E.createElement(ms,{height:"80px",width:"80px",src:r?.profileUrl})),E.createElement("section",{className:"sendbird__user-profile-name"},E.createElement($e,{type:Ge.H_2,color:De.ONBACKGROUND_1},r?.nickname||p.NO_NAME)),r?.userId!==m&&!s&&E.createElement("section",{className:"sendbird__user-profile-message"},E.createElement(Tu,{type:mi.SECONDARY,onClick:function(){var b={isDistinct:!1,invitedUserIds:r?.userId?[r?.userId]:[],operatorUserIds:[m]};o?.(),c(b).then(function(C){h.info("UserProfile, channel create",C),_?.(C)})}},p.USER_PROFILE__MESSAGE)),E.createElement("div",{className:"sendbird__user-profile-separator"}),E.createElement("section",{className:"sendbird__user-profile-userId"},E.createElement($e,{className:"sendbird__user-profile-userId--label",type:Ge.CAPTION_2,color:De.ONBACKGROUND_2},p.USER_PROFILE__USER_ID),E.createElement($e,{className:"sendbird__user-profile-userId--value",type:Ge.BODY_1,color:De.ONBACKGROUND_1},r?.userId)))}function cde(t){var n=t.user,e=t.channel,r=t.className,i=r===void 0?void 0:r,a=t.checked,s=t.checkBox,o=t.isOperator,u=t.disabled,c=t.disableMessaging,h=t.action,p=t.onChange,m=t.avatarSize,_=m===void 0?"40px":m,b=t.onClick,C=t.onUserAvatarClick,N=t.renderListItemMenu,S=t.size,M=S===void 0?"normal":S,w=o??n?.role==="operator",U=n.userId,L=R.useRef(null),P=R.useRef(null),x=R.useRef(null),H=Ip(),F=H.disableUserProfile,Q=H.renderUserProfile,$=Un().stringSet,q=Zn().state.config,X=q.userId,V=M==="small"?"sendbird-user-list-item--small":"sendbird-user-list-item",ee=M==="small"?"sendbird-user-list-item--small__avatar":"sendbird-user-list-item__avatar",z=M==="small"?"sendbird-user-list-item--small__title":"sendbird-user-list-item__title",ie=M==="small"?"sendbird-user-list-item--small__subtitle":"sendbird-user-list-item__subtitle",se=M==="small"?"sendbird-user-list-item--small__checkbox":"sendbird-user-list-item__checkbox",he=M==="small"?"sendbird-user-list-item--small__action":"sendbird-user-list-item__action",pe=M==="small"?"sendbird-user-list-item--small__operator":"sendbird-user-list-item__operator";return E.createElement("div",{className:Hn.apply(void 0,Xe([V],Array.isArray(i)?i:[i],!1)),ref:P},E.createElement(No,{menuTrigger:function(K){return E.createElement(E.Fragment,null,E.createElement(ms,{className:ee,ref:x,src:n?.profileUrl||n?.plainProfileUrl||"",width:_,height:_,onClick:function(){var ce;F||(K(),(ce=C??b)===null||ce===void 0||ce())}}),n?.isMuted&&E.createElement(ade,{height:Ig(_),width:Ig(_)}))},menuItems:function(K){return Q?Q({user:n,currentUserId:X??"",close:K,avatarRef:x}):E.createElement(To,{openLeft:!0,parentRef:x,parentContainRef:x,closeDropdown:K,style:{paddingTop:"0px",paddingBottom:"0px"}},E.createElement(wp,{disableMessaging:c,user:n,currentUserId:X,onSuccess:K}))}}),E.createElement($e,{className:z,type:Ge.SUBTITLE_1,color:De.ONBACKGROUND_1},n.nickname||$.NO_NAME,X===n.userId&&$.CHANNEL_SETTING__MEMBERS__YOU),!n.nickname&&E.createElement($e,{className:ie,type:Ge.CAPTION_3,color:De.ONBACKGROUND_2},n.userId),s&&E.createElement("label",{className:se,htmlFor:U},E.createElement(sde,{id:U,checked:a,disabled:u,onChange:function(K){return p?.(K)}})),w&&E.createElement($e,{className:Hn(pe,s&&"checkbox"),type:Ge.SUBTITLE_2,color:De.ONBACKGROUND_2},$.LABEL__OPERATOR),!s&&!N&&h&&E.createElement("div",{className:he,ref:L},h({actionRef:L,parentRef:P})),!s&&N&&E.createElement("div",{className:he,ref:L},N({channel:e,user:n})))}function dde(t){var n=t.className,e=n===void 0?"":n,r=t.children,i=r===void 0?"":r;return E.createElement("div",{className:Xe(Xe([],Array.isArray(e)?e:[e],!0),["sendbird-tooltip"],!1).join(" ")},E.createElement($e,{className:"sendbird-tooltip__text",type:Ge.CAPTION_2,color:De.ONCONTENT_1},i))}var hde=8;function fde(t){var n=t.className,e=n===void 0?"":n,r=t.children,i=t.hoverTooltip,a=R.useState(!1),s=a[0],o=a[1],u=R.useRef();return E.createElement("div",{className:Xe(Xe([],Array.isArray(e)?e:[e],!0),["sendbird-tooltip-wrapper"],!1).join(" "),onMouseOver:function(){o(!0)},onFocus:function(){o(!0)},onMouseOut:function(){o(!1)},onBlur:function(){o(!1)}},E.createElement("div",{className:"sendbird-tooltip-wrapper__children",ref:u},r),s&&E.createElement("div",{className:"sendbird-tooltip-wrapper__hover-tooltip",style:{bottom:"calc(100% + ".concat(hde,"px)")}},E.createElement("div",{className:"sendbird-tooltip-wrapper__hover-tooltip__inner"},E.createElement("div",{className:"sendbird-tooltip-wrapper__hover-tooltip__inner__tooltip-container",style:{left:u.current?"calc(".concat(u.current.offsetWidth/2,"px - 50%)"):void 0}},i))))}var vde={message:{},isByMe:!1},T8=E.createContext(vde),bI=function(t){var n=t.children,e=t.message,r=t.isByMe,i=r===void 0?!1:r;return E.createElement(T8.Provider,{value:{message:e,isByMe:i}},n)},N8=function(){var t=E.useContext(T8);if(t===void 0)throw new Error("useMessageContext must be used within a MessageProvider");return t},pde=function(t){var n,e,r,i=t.message,a=t.channel,s=t.emojiKey,o=s===void 0?"":s,u=t.hideMenu,c=t.emojiContainer,h=t.onPressUserProfileHandler,p=a.members,m=p===void 0?[]:p,_=R.useState(o),b=_[0],C=_[1];function N(){if(h&&i){var S=i?.sender;h(S)}}return E.createElement(iT,{onBackdropClick:u},E.createElement("div",{className:"sendbird-message__bottomsheet"},E.createElement("div",{className:"sendbird-message__bottomsheet__reacted-members"},(n=i.reactions)===null||n===void 0?void 0:n.map(function(S){var M=Ale(c,S.key);return E.createElement("div",{key:S.key,className:Hn("sendbird-message__bottomsheet__reacted-members__item",b===S.key&&"sendbird-message__bottomsheet__reacted-members__item__selected"),onClick:function(){C(S.key)}},E.createElement(Ni,{url:M,width:"28px",height:"28px",placeHolder:function(w){var U=w.style;return E.createElement("div",{style:U},E.createElement(lt,{type:qe.QUESTION,fillColor:rt.ON_BACKGROUND_3,width:"28px",height:"28px"}))}}),E.createElement($e,{type:Ge.BUTTON_2,color:b===S.key?De.PRIMARY:De.ONBACKGROUND_3},S.userIds.length))})),E.createElement("div",{className:"sendbird-message__bottomsheet__reactor-list"},((r=(e=i.reactions)===null||e===void 0?void 0:e.find(function(S){return S.key===b}))===null||r===void 0?void 0:r.userIds.map(function(S){return m.find(function(M){return M.userId===S})}).filter(function(S){return S!==void 0})).map(function(S){return E.createElement(cde,{key:S.userId,className:"sendbird-message__bottomsheet__reactor-list__item",user:S,avatarSize:"36px",onUserAvatarClick:N})}))))};function mde(t){var n,e=t.reaction,r=t.memberNicknamesMap,i=t.setEmojiKey,a=t.toggleReaction,s=t.emojisMap,o=t.channel,u=t.message,c=t.isFiltered,h=Qw().openModal,p=Zn().state.config.userId,m=Ea().isMobile,_=N8(),b=R.useContext(gi).stringSet,C=qF(p,e),N=e.userIds.length>0&&o?.isGroupChannel()&&!o.isSuper,S=function(){if(c&&!C){h({modalProps:{titleText:"Add reaction failed",hideFooter:!0,isCloseOnClickOutside:!0},childElement:function(w){var U=w.closeModal;return E.createElement(Mg,{type:mi.PRIMARY,submitText:b.BUTTON__OK,hideCancelButton:!0,onCancel:U,onSubmit:U})}});return}i(""),a?.(u??_?.message,e.key,C)},M=Ld({onLongPress:function(){i(e.key)},onClick:S},{shouldPreventDefault:!0,shouldStopPropagation:!0});return E.createElement(fde,{className:"sendbird-emoji-reactions__reaction-badge",hoverTooltip:N?E.createElement(dde,null,Sle(e,p,r,b)):E.createElement(E.Fragment,null)},E.createElement("div",J({},m?M:{onClick:S}),E.createElement(d3,{count:e.userIds.length,selected:C},E.createElement(Ni,{circle:!0,url:((n=s.get(e?.key))===null||n===void 0?void 0:n.url)||"",width:"20px",height:"20px",defaultComponent:E.createElement(lt,{width:"20px",height:"20px",type:qe.QUESTION})}))))}var gde=function(t){var n=t.onClick,e=Ld({onLongPress:function(){},onClick:n},{shouldPreventDefault:!0,shouldStopPropagation:!0});return E.createElement("div",J({className:"sendbird-emoji-reactions__add-reaction-badge","data-testid":"sendbird-emoji-reactions__add-reaction-badge"},e),E.createElement(d3,{isAdd:!0},E.createElement(lt,{type:qe.EMOJI_MORE,fillColor:rt.ON_BACKGROUND_3,width:"20px",height:"20px"})))},_de=function(t){var n=t.userId,e=t.message,r=t.emojiContainer,i=t.hideMenu,a=t.toggleReaction,s=R.useMemo(function(){return i3(r)},[r]);return E.createElement(iT,{onBackdropClick:i},E.createElement("div",{className:"sendbird-message__bottomsheet sendbird-message__emojis-bottomsheet"},s.map(function(o){var u,c,h,p,m=(p=(h=(c=(u=e?.reactions)===null||u===void 0?void 0:u.find(function(_){return _.key===o.key}))===null||c===void 0?void 0:c.userIds)===null||h===void 0?void 0:h.some(function(_){return _===n}))!==null&&p!==void 0?p:!1;return E.createElement(iE,{key:o.key,width:"44px",height:"44px",selected:m,onClick:function(_){_?.stopPropagation(),a?.(e,o.key,m),i()},testID:"ui_mobile_emoji_reactions_menu_".concat(o.key)},E.createElement(Ni,{url:o.url,width:"38px",height:"38px",placeHolder:function(_){var b=_.style;return E.createElement("div",{style:b},E.createElement(lt,{type:qe.QUESTION,fillColor:rt.ON_BACKGROUND_3,width:"28px",height:"28px"}))}}))})))},yde=function(t){var n,e,r,i,a,s=t.className,o=s===void 0?"":s,u=t.userId,c=t.message,h=t.channel,p=t.emojiContainer,m=t.memberNicknamesMap,_=t.spaceFromTrigger,b=_===void 0?{x:0,y:0}:_,C=t.isByMe,N=C===void 0?!1:C,S=t.toggleReaction,M=t.onPressUserProfile,w=t.filterEmojiCategoryIds,U=!1;try{var L=Zn().state.config;U=h?n8({channel:h,config:L}):!1}catch{}var P=Ea().isMobile,x=R.useRef(null),H=R.useState(!1),F=H[0],Q=H[1],$=R.useState(""),q=$[0],X=$[1],V=Tle(p),ee=R.useMemo(function(){return pI(p,w?.(c))},[p,w]),z=((e=(n=c.reactions)===null||n===void 0?void 0:n.length)!==null&&e!==void 0?e:0)<V.size;return E.createElement("div",{className:Qs([o,"sendbird-emoji-reactions",N?"outgoing":"incoming"])},((i=(r=c.reactions)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0)>0&&((a=c.reactions)===null||a===void 0?void 0:a.map(function(ie){return E.createElement(mde,{key:ie?.key,reaction:ie,memberNicknamesMap:m,setEmojiKey:X,toggleReaction:S,emojisMap:V,channel:h,message:c,isFiltered:pI(p,w?.(c)).every(function(se){return se.key!==ie?.key})})})),!P&&z&&E.createElement(No,{menuTrigger:function(ie){return E.createElement(d3,{className:"sendbird-emoji-reactions__add-reaction-badge",testID:"sendbird-emoji-reactions__add-reaction-badge",ref:x,isAdd:!0,onClick:function(se){var he;ie(),(he=se?.stopPropagation)===null||he===void 0||he.call(se)}},E.createElement(lt,{type:qe.EMOJI_MORE,fillColor:rt.ON_BACKGROUND_3,width:"20px",height:"20px"}))},menuItems:function(ie){return E.createElement(QF,{parentRef:x,parentContainRef:x,closeDropdown:ie,spaceFromTrigger:b},ee.map(function(se){var he,pe,K,ce=((K=(pe=(he=c?.reactions)===null||he===void 0?void 0:he.find(function(me){return me.key===se.key}))===null||pe===void 0?void 0:pe.userIds)===null||K===void 0?void 0:K.some(function(me){return me===u}))||!1;return E.createElement(iE,{key:se.key,width:"36px",height:"36px",selected:ce,onClick:function(me){ie(),S?.(c,se.key,ce),me?.stopPropagation()},testID:"ui_emoji_reactions_menu_".concat(se.key)},E.createElement(Ni,{url:se?.url||"",width:"28px",height:"28px",placeHolder:function(me){var Le=me.style;return E.createElement("div",{style:Le},E.createElement(lt,{type:qe.QUESTION,fillColor:rt.ON_BACKGROUND_3,width:"28px",height:"28px"}))}}))}))}}),P&&z&&E.createElement(gde,{onClick:function(){Q(!0)}}),P&&F&&E.createElement(_de,{userId:u,message:c,emojiContainer:p,hideMenu:function(){Q(!1)},toggleReaction:S}),P&&q&&h!==null&&U&&E.createElement(pde,{message:c,channel:h,emojiKey:q,hideMenu:function(){X("")},emojiContainer:p,onPressUserProfileHandler:M}))};function Ede(t){var n,e=t.className,r=e===void 0?"":e,i=t.message;return!(i?.isAdminMessage||i?.messageType)||!(!((n=i?.isAdminMessage)===null||n===void 0)&&n.call(i))||i?.messageType!=="admin"?null:E.createElement("div",{className:Xe(Xe([],Array.isArray(r)?r:[r],!0),["sendbird-admin-message"],!1).join(" ")},E.createElement($e,{className:"sendbird-admin-message__text",type:Ge.CAPTION_2,color:De.ONBACKGROUND_2},i?.message))}function TS(t){return sl(t).when(gs,function(){var n;return(n=t?.type)!==null&&n!==void 0?n:""}).when(js,function(){var n,e;return(e=(n=aT(t))===null||n===void 0?void 0:n.mimeType)!==null&&e!==void 0?e:""}).otherwise(function(){return""})}function aT(t){var n=t.fileInfoList;return n.length>0?n[0]:null}function A8(t){return sl(t).when(gs,function(){var n;return(n=t?.name)!==null&&n!==void 0?n:""}).when(js,function(){var n,e;return(e=(n=aT(t))===null||n===void 0?void 0:n.fileName)!==null&&e!==void 0?e:""}).otherwise(function(){return""})}function NS(t){return sl(t).when(gs,function(){var n;return(n=t?.url)!==null&&n!==void 0?n:""}).when(js,function(){var n,e;return(e=(n=aT(t))===null||n===void 0?void 0:n.url)!==null&&e!==void 0?e:""}).otherwise(function(){return""})}function bde(t){return sl(t).when(gs,function(){return t.thumbnails}).when(js,function(){var n,e;return(e=(n=aT(t))===null||n===void 0?void 0:n.thumbnails)!==null&&e!==void 0?e:[]}).otherwise(function(){return[]})}function M8(t){var n=bde(t);return n&&n.length>0?n[0].url:""}function Cde(t){var n,e,r,i,a,s,o,u=t.message,c=t.userId,h=c===void 0?"":c,p=t.isByMe,m=p===void 0?!1:p,_=t.className,b=_===void 0?"":_,C=t.isUnavailable,N=C===void 0?!1:C,S=t.onClick,M=R.useContext(gi).stringSet,w=u.parentMessage,U=w?.sender,L=h===U?.userId?M.QUOTED_MESSAGE__CURRENT_USER:U?.nickname,P=NS(w),x=TS(w),H=h===((e=u?.sender)===null||e===void 0?void 0:e.userId)?M.QUOTED_MESSAGE__CURRENT_USER:(r=u?.sender)===null||r===void 0?void 0:r.nickname,F=R.useState(!1),Q=F[0],$=F[1],q=fle(),X=(a=(i=A8(w))===null||i===void 0?void 0:i.split("/"))!==null&&a!==void 0?a:P.split("/");return E.createElement("div",{className:Qs([b,"sendbird-quote-message",m?"outgoing":"incoming",N?"unavailable":""]),key:w?.messageId,onClick:function(){!N&&S&&S()},onTouchEnd:function(){!N&&S&&S()}},E.createElement("div",{className:"sendbird-quote-message__replied-to"},E.createElement(lt,{className:"sendbird-quote-message__replied-to__icon",type:qe.REPLY,fillColor:rt.ON_BACKGROUND_3,width:"12px",height:"12px"}),E.createElement($e,{className:"sendbird-quote-message__replied-to__text",testID:"sendbird-quote-message__replied-to__text",type:Ge.CAPTION_2,color:De.ONBACKGROUND_3},E.createElement("span",{className:"sendbird-quote-message__replied-to__text__nickname"},H),E.createElement("span",{className:"sendbird-quote-message__replied-to__text__text"},M.QUOTED_MESSAGE__REPLIED_TO),E.createElement("span",{className:"sendbird-quote-message__replied-to__text__nickname"},L))),E.createElement("div",{className:"sendbird-quote-message__replied-message"},N&&E.createElement("div",{className:"sendbird-quote-message__replied-message__text-message"},E.createElement($e,{className:"sendbird-quote-message__replied-message__text-message__word",testID:"sendbird-quote-message__replied-message__text-message__word",type:Ge.BODY_2,color:De.ONBACKGROUND_1},M.QUOTED_MESSAGE__UNAVAILABLE)),Ks(w)&&((s=w?.message)===null||s===void 0?void 0:s.length)>0&&!N&&E.createElement("div",{className:"sendbird-quote-message__replied-message__text-message"},E.createElement($e,{className:"sendbird-quote-message__replied-message__text-message__word",testID:"sendbird-quote-message__replied-message__text-message__word",type:Ge.BODY_2,color:De.ONBACKGROUND_1},w?.message)),cf(w)&&P&&!N&&E.createElement("div",{className:"sendbird-quote-message__replied-message__text-message"},E.createElement($e,{className:"sendbird-quote-message__replied-message__text-message__word",testID:"sendbird-quote-message__replied-message__text-message__word",type:Ge.BODY_2,color:De.ONBACKGROUND_1},M.VOICE_MESSAGE)),(pf(w)||js(w))&&P&&!N&&E.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message"},E.createElement(Ni,{className:"sendbird-quote-message__replied-message__thumbnail-message__image",url:P,alt:x,width:"144px",height:"108px",onLoad:function(){return $(!0)},defaultComponent:E.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message__placeholder"},E.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message__placeholder__icon"},E.createElement(lt,{type:uf(x)?qe.PLAY:qe.PHOTO,fillColor:rt.ON_BACKGROUND_2,width:"22px",height:"22px"})))}),uf(x)&&!(((o=w?.thumbnails)===null||o===void 0?void 0:o.length)>0)&&E.createElement(E.Fragment,null,E.createElement("video",{className:"sendbird-quote-message__replied-message__thumbnail-message__video"},E.createElement("source",{src:P,type:x})),E.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message__cover"},E.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message__cover__icon"},E.createElement(lt,{type:qe.PLAY,fillColor:rt.ON_BACKGROUND_2,width:"14px",height:"14px"})))),Q&&NE(x)&&E.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message__cover"},E.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message__cover__icon"},E.createElement(lt,{type:qe.GIF,fillColor:rt.THUMBNAIL_ICON,width:"14px",height:"14px"})))),n3(w)===dc.FILE&&P&&!N&&E.createElement("div",{className:"sendbird-quote-message__replied-message__file-message"},E.createElement(lt,{className:"sendbird-quote-message__replied-message__file-message__type-icon",type:(n={},n[q.IMAGE]=qe.PHOTO,n[q.VIDEO]=qe.PLAY,n[q.AUDIO]=qe.FILE_AUDIO,n[q.GIF]=qe.GIF,n[q.OTHERS]=qe.FILE_DOCUMENT,n)[BF(x)],fillColor:rt.ON_BACKGROUND_3,width:"16px",height:"16px"}),E.createElement($e,{className:"sendbird-quote-message__replied-message__file-message__file-name",type:Ge.BODY_2,color:De.ONBACKGROUND_3},KF(X[X.length-1])))))}var UL=function(t){var n,e=Un().stringSet,r=Ri(),i=r.message,a=r.hideMenu;return E.createElement(Wa,J({},t,{onClick:function(s){var o;Ks(i)&&r3(i.message),a(),(o=t.onClick)===null||o===void 0||o.call(t,s)}}),(n=t.children)!==null&&n!==void 0?n:E.createElement(E.Fragment,null,E.createElement($e,{type:Ge.SUBTITLE_1,color:De.ONBACKGROUND_1},e.MESSAGE_MENU__COPY),E.createElement(lt,{type:qe.COPY,fillColor:rt.PRIMARY,width:"24px",height:"24px"})))},xL=function(t){var n,e,r,i=Un().stringSet,a=Ri(),s=a.message,o=a.hideMenu,u=a.setQuoteMessage;return E.createElement(Wa,J({},t,{disabled:s.parentMessageId>0,onClick:function(c){var h;u(s),o(),(h=t.onClick)===null||h===void 0||h.call(t,c)}}),(n=t.children)!==null&&n!==void 0?n:E.createElement(E.Fragment,null,E.createElement($e,{type:Ge.SUBTITLE_1,color:((e=s.parentMessageId)!==null&&e!==void 0?e:0)>0?De.ONBACKGROUND_4:De.ONBACKGROUND_1},i.MESSAGE_MENU__REPLY),E.createElement(lt,{type:qe.REPLY,fillColor:((r=s.parentMessageId)!==null&&r!==void 0?r:0)>0?rt.ON_BACKGROUND_4:rt.PRIMARY,width:"24px",height:"24px"})))},LL=function(t){var n,e=Un().stringSet,r=Ri(),i=r.message,a=r.hideMenu,s=r.onReplyInThread;return E.createElement(Wa,J({},t,{onClick:function(o){var u;s({message:i}),a(),(u=t.onClick)===null||u===void 0||u.call(t,o)}}),(n=t.children)!==null&&n!==void 0?n:E.createElement(E.Fragment,null,E.createElement($e,{type:Ge.SUBTITLE_1,color:De.ONBACKGROUND_1},e.MESSAGE_MENU__THREAD),E.createElement(lt,{type:qe.THREAD,fillColor:rt.PRIMARY,width:"24px",height:"24px"})))},kL=function(t){var n,e=Un().stringSet,r=Ri(),i=r.hideMenu,a=r.showEdit,s=r.isOnline;return E.createElement(Wa,J({},t,{onClick:function(o){var u;s&&(a(!0),i(),(u=t.onClick)===null||u===void 0||u.call(t,o))}}),(n=t.children)!==null&&n!==void 0?n:E.createElement(E.Fragment,null,E.createElement($e,{type:Ge.SUBTITLE_1,color:De.ONBACKGROUND_1},e.MESSAGE_MENU__EDIT),E.createElement(lt,{type:qe.EDIT,fillColor:rt.PRIMARY,width:"24px",height:"24px"})))},PL=function(t){var n,e=Un().stringSet,r=Ri(),i=r.message,a=r.hideMenu,s=r.resendMessage,o=r.isOnline;return E.createElement(Wa,J({},t,{onClick:function(u){var c;o&&(s(i),a(),(c=t.onClick)===null||c===void 0||c.call(t,u))}}),(n=t.children)!==null&&n!==void 0?n:E.createElement(E.Fragment,null,E.createElement($e,{type:Ge.SUBTITLE_1,color:De.ONBACKGROUND_1},e.MESSAGE_MENU__RESEND),E.createElement(lt,{type:qe.REFRESH,fillColor:rt.PRIMARY,width:"24px",height:"24px"})))},FL=function(t){var n,e,r,i=Un().stringSet,a=Ri(),s=a.message,o=a.hideMenu,u=a.deleteMessage,c=a.showRemove,h=a.isOnline,p=a.disableDeleteMessage;return E.createElement(Wa,J({},t,{disabled:typeof p=="boolean"?p:((e=(n=s.threadInfo)===null||n===void 0?void 0:n.replyCount)!==null&&e!==void 0?e:0)>0,onClick:function(m){var _;hs(s)?u(s):h&&(c(!0),o(),(_=t.onClick)===null||_===void 0||_.call(t,m))}}),(r=t.children)!==null&&r!==void 0?r:E.createElement(E.Fragment,null,E.createElement($e,{type:Ge.SUBTITLE_1,color:p?De.ONBACKGROUND_4:De.ONBACKGROUND_1},i.MESSAGE_MENU__DELETE),E.createElement(lt,{type:qe.DELETE,fillColor:rt.PRIMARY,width:"24px",height:"24px"})))},Sde=function(t){var n,e=Un().stringSet,r=Ri(),i=r.hideMenu,a=r.message,s=r.onDownloadClick,o=a.url;return E.createElement(Wa,J({},t,{onClick:function(){i()}}),(n=t.children)!==null&&n!==void 0?n:E.createElement("a",{className:"sendbird-message__contextmenu--hyperlink",rel:"noopener noreferrer",href:o,target:"_blank",onClick:s},E.createElement($e,{type:Ge.SUBTITLE_1,color:De.ONBACKGROUND_1},e.MESSAGE_MENU__SAVE),E.createElement(lt,{type:qe.DOWNLOAD,fillColor:rt.PRIMARY,width:"24px",height:"24px"})))},BL=function(t){var n,e=Un().stringSet,r=Ri(),i=r.message,a=r.hideMenu,s=r.markAsUnread;return E.createElement(Wa,J({},t,{onClick:function(o){var u;s&&s(i,"manual"),a(),(u=t.onClick)===null||u===void 0||u.call(t,o)}}),(n=t.children)!==null&&n!==void 0?n:E.createElement(E.Fragment,null,E.createElement($e,{type:Ge.SUBTITLE_1,color:De.ONBACKGROUND_1},e.MESSAGE_MENU__MARK_AS_UNREAD),E.createElement(lt,{type:qe.MARK_AS_UNREAD,fillColor:rt.PRIMARY,width:"24px",height:"24px"})))},Tde=function(t){var n,e,r,i,a,s=t.channel,o=t.message,u=t.replyType,c=t.userId,h=t.resendMessage,p=t.showEdit,m=t.showRemove,_=t.deleteMenuState,b=t.deleteMessage,C=t.setQuoteMessage,N=t.parentRef,S=t.onReplyInThread,M=t.isOpenedFromThread,w=M===void 0?!1:M,U=t.onDownloadClick,L=U===void 0?null:U,P=t.renderMenuItems,x=t.hideMenu,H=((n=o?.sender)===null||n===void 0?void 0:n.userId)===c,F=Zn().state.config,Q=F.isOnline,$=F.groupChannel.enableMarkAsUnread,q=Ks(o),X=Ks(o)&&eE(o)&&H,V=hs(o)&&o?.isResendable&&H,ee=!Eo(o)&&H,z=H&&(_===void 0||_!=="HIDE"),ie=z&&ee,se=!Eo(o)&&gs(o)&&!(cf(o)&&s?.isSuper||s?.isBroadcast),he=u==="QUOTE_REPLY"&&!hs(o)&&!Eo(o)&&s?.isGroupChannel(),pe=u==="THREAD"&&!w&&!hs(o)&&!Eo(o)&&!HF(o)&&s?.isGroupChannel(),K=!hs(o)&&!Eo(o)&&o.parentMessageId<=0&&((e=s?.isGroupChannel)===null||e===void 0?void 0:e.call(s)),ce=_!==void 0&&_==="DISABLE"||((i=(r=o?.threadInfo)===null||r===void 0?void 0:r.replyCount)!==null&&i!==void 0?i:0)>0,me={message:o,hideMenu:x,setQuoteMessage:C,onReplyInThread:S,onMoveToParentMessage:Mr,showEdit:p,showRemove:m,deleteMessage:b,resendMessage:h,markAsUnread:t.markAsUnread,isOnline:Q,disableDeleteMessage:ce,triggerRef:N,containerRef:N,onDownloadClick:L};return E.createElement(a3,{value:me},E.createElement(To,{className:"sendbird-message__mobile-context-menu",parentRef:N,parentContainRef:N,closeDropdown:x},(a=P?.({items:{CopyMenuItem:UL,ReplyMenuItem:xL,ThreadMenuItem:LL,EditMenuItem:kL,MarkAsUnreadMenuItem:BL,ResendMenuItem:PL,DeleteMenuItem:FL}}))!==null&&a!==void 0?a:E.createElement(E.Fragment,null,q&&E.createElement(UL,null),he&&E.createElement(xL,null),pe&&E.createElement(LL,null),X&&E.createElement(kL,null),$&&K&&E.createElement(BL,null),V&&E.createElement(PL,null),ie&&E.createElement(FL,null),se&&E.createElement(Sde,null))))},HL=function(t){var n,e=Un().stringSet,r=Ri(),i=r.message,a=r.hideMenu;return E.createElement(mf,J({},t,{onClick:function(s){var o;Ks(i)&&r3(i.message),a(),(o=t.onClick)===null||o===void 0||o.call(t,s)}}),(n=t.children)!==null&&n!==void 0?n:E.createElement(E.Fragment,null,E.createElement(lt,{type:qe.COPY,fillColor:rt.PRIMARY,width:"24px",height:"24px"}),E.createElement($e,{type:Ge.SUBTITLE_1,color:De.ONBACKGROUND_1},e.MESSAGE_MENU__COPY)))},GL=function(t){var n,e=Un().stringSet,r=Ri(),i=r.hideMenu,a=r.showEdit,s=r.isOnline;return E.createElement(mf,J({},t,{onClick:function(o){var u;s&&(a(!0),i(),(u=t.onClick)===null||u===void 0||u.call(t,o))}}),(n=t.children)!==null&&n!==void 0?n:E.createElement(E.Fragment,null,E.createElement(lt,{type:qe.EDIT,fillColor:rt.PRIMARY,width:"24px",height:"24px"}),E.createElement($e,{type:Ge.SUBTITLE_1,color:De.ONBACKGROUND_1},e.MESSAGE_MENU__EDIT)))},VL=function(t){var n,e=Un().stringSet,r=Ri(),i=r.message,a=r.hideMenu,s=r.resendMessage,o=r.isOnline;return E.createElement(mf,J({},t,{onClick:function(u){var c;o&&(s(i),a(),(c=t.onClick)===null||c===void 0||c.call(t,u))}}),(n=t.children)!==null&&n!==void 0?n:E.createElement(E.Fragment,null,E.createElement(lt,{type:qe.REFRESH,fillColor:rt.PRIMARY,width:"24px",height:"24px"}),E.createElement($e,{type:Ge.SUBTITLE_1,color:De.ONBACKGROUND_1},e.MESSAGE_MENU__RESEND)))},zL=function(t){var n,e,r,i=Un().stringSet,a=Ri(),s=a.message,o=a.hideMenu,u=a.setQuoteMessage;return E.createElement(mf,J({},t,{disabled:s.parentMessageId>0,onClick:function(c){var h;u(s),o(),(h=t.onClick)===null||h===void 0||h.call(t,c)}}),(n=t.children)!==null&&n!==void 0?n:E.createElement(E.Fragment,null,E.createElement(lt,{type:qe.REPLY,fillColor:((e=s.parentMessageId)!==null&&e!==void 0?e:0)>0?rt.ON_BACKGROUND_3:rt.PRIMARY,width:"24px",height:"24px"}),E.createElement($e,{type:Ge.SUBTITLE_1,color:((r=s.parentMessageId)!==null&&r!==void 0?r:0)>0?De.ONBACKGROUND_4:De.ONBACKGROUND_1},i.MESSAGE_MENU__REPLY)))},jL=function(t){var n,e=Un().stringSet,r=Ri(),i=r.message,a=r.hideMenu,s=r.onReplyInThread;return E.createElement(mf,J({},t,{onClick:function(o){var u;s({message:i}),a(),(u=t.onClick)===null||u===void 0||u.call(t,o)}}),(n=t.children)!==null&&n!==void 0?n:E.createElement(E.Fragment,null,E.createElement(lt,{type:qe.THREAD,fillColor:rt.PRIMARY,width:"24px",height:"24px"}),E.createElement($e,{type:Ge.SUBTITLE_1,color:De.ONBACKGROUND_1},e.MESSAGE_MENU__THREAD)))},qL=function(t){var n,e,r,i=Un().stringSet,a=Ri(),s=a.message,o=a.hideMenu,u=a.deleteMessage,c=a.showRemove,h=a.isOnline,p=a.disableDeleteMessage;return E.createElement(mf,J({},t,{disabled:typeof p=="boolean"?p:((e=(n=s.threadInfo)===null||n===void 0?void 0:n.replyCount)!==null&&e!==void 0?e:0)>0,onClick:function(m){var _;hs(s)?u(s):h&&(c(!0),o(),(_=t.onClick)===null||_===void 0||_.call(t,m))}}),(r=t.children)!==null&&r!==void 0?r:E.createElement(E.Fragment,null,E.createElement(lt,{type:qe.DELETE,fillColor:rt.PRIMARY,width:"24px",height:"24px"}),E.createElement($e,{type:Ge.SUBTITLE_1,color:p?De.ONBACKGROUND_4:De.ONBACKGROUND_1},i.MESSAGE_MENU__DELETE)))},Nde=function(t){var n,e=Un().stringSet,r=Ri(),i=r.hideMenu,a=r.message,s=r.onDownloadClick,o=a.url;return E.createElement(mf,{onClick:function(){return i()}},(n=t.children)!==null&&n!==void 0?n:E.createElement("a",{className:"sendbird-message__bottomsheet--hyperlink",rel:"noopener noreferrer",href:o,target:"_blank",onClick:s},E.createElement(lt,{type:qe.DOWNLOAD,fillColor:rt.PRIMARY,width:"24px",height:"24px"}),E.createElement($e,{type:Ge.SUBTITLE_1,color:De.ONBACKGROUND_1},e.MESSAGE_MENU__SAVE)))},$L=function(t){var n,e=Un().stringSet,r=Ri(),i=r.message,a=r.hideMenu,s=r.markAsUnread;return E.createElement(mf,J({},t,{onClick:function(o){var u;s&&s(i,"manual"),a(),(u=t.onClick)===null||u===void 0||u.call(t,o)}}),(n=t.children)!==null&&n!==void 0?n:E.createElement(E.Fragment,null,E.createElement(lt,{type:qe.MARK_AS_UNREAD,fillColor:rt.PRIMARY,width:"24px",height:"24px"}),E.createElement($e,{type:Ge.SUBTITLE_1,color:De.ONBACKGROUND_1},e.MESSAGE_MENU__MARK_AS_UNREAD)))},kN=38,Ade=function(t){var n,e,r,i,a,s=t.hideMenu,o=t.channel,u=t.emojiContainer,c=t.message,h=t.replyType,p=t.userId,m=t.resendMessage,_=t.deleteMessage,b=t.toggleReaction,C=t.isReactionEnabled,N=C===void 0?!1:C,S=t.showEdit,M=t.showRemove,w=t.deleteMenuState,U=t.setQuoteMessage,L=t.onReplyInThread,P=t.isOpenedFromThread,x=P===void 0?!1:P,H=t.onDownloadClick,F=t.renderMenuItems,Q=((n=c?.sender)===null||n===void 0?void 0:n.userId)===p,$=Zn().state.config,q=$.isOnline,X=$.groupChannel.enableMarkAsUnread,V=Ks(c),ee=Ks(c)&&eE(c)&&Q,z=q&&hs(c)&&c?.isResendable&&Q,ie=!Eo(c)&&Q,se=Q&&(w===void 0||w!=="HIDE"),he=se&&ie,pe=w!==void 0&&w==="DISABLE"||((r=(e=c?.threadInfo)===null||e===void 0?void 0:e.replyCount)!==null&&r!==void 0?r:0)>0,K=eE(c)&&gs(c)&&!cf(c),ce=!hs(c)&&!Eo(c)&&N,me=h==="QUOTE_REPLY"&&!hs(c)&&!Eo(c)&&o?.isGroupChannel()&&!o?.isBroadcast,Le=h==="THREAD"&&!x&&!hs(c)&&!Eo(c)&&!HF(c)&&o?.isGroupChannel()&&!o?.isBroadcast,ge=!hs(c)&&!Eo(c)&&((i=o?.isGroupChannel)===null||i===void 0?void 0:i.call(o))&&h!=="THREAD",Ee=Math.floor(window.innerWidth/kN)-1,Ye=R.useState(!1),tt=Ye[0],yt=Ye[1],Ht=u&&i3(u),zt=tt?Ht:Ht?.slice(0,Ee),Xt=Ht&&Ht.length>Ee,Jt={message:c,hideMenu:s,setQuoteMessage:U,onReplyInThread:L,onMoveToParentMessage:function(){},showEdit:S,showRemove:M,deleteMessage:_,resendMessage:m,markAsUnread:t.markAsUnread,isOnline:q,disableDeleteMessage:pe,triggerRef:null,containerRef:null,onDownloadClick:H};return E.createElement(a3,{value:Jt},E.createElement(iT,{onBackdropClick:s},E.createElement("div",{className:"sendbird-message__bottomsheet"},ce&&E.createElement("div",{className:"sendbird-message__bottomsheet-reactions"},E.createElement("ul",{className:"sendbird-message__bottomsheet-reaction-bar"},E.createElement("div",{className:Hn("sendbird-message__bottomsheet-reaction-bar__row",tt&&"sendbird-message__bottomsheet-reaction-bar__all")},zt.map(function(Mt){var jt,en,Dt,ln=(Dt=(en=(jt=c?.reactions)===null||jt===void 0?void 0:jt.filter(function(Yt){return Yt.key===Mt.key})[0])===null||en===void 0?void 0:en.userIds)===null||Dt===void 0?void 0:Dt.some(function(Yt){return Yt===p});return E.createElement(iE,{key:Mt.key,width:"".concat(kN,"px"),height:"".concat(kN,"px"),selected:ln,onClick:function(){s(),b?.(c,Mt.key,ln)},testID:"ui_mobile_emoji_reactions_menu_".concat(Mt.key)},E.createElement(Ni,{url:Mt?.url||"",width:"28px",height:"28px",placeHolder:function(Yt){var st=Yt.style;return E.createElement("div",{style:st},E.createElement(lt,{type:qe.QUESTION,fillColor:rt.ON_BACKGROUND_3,width:"28px",height:"28px"}))}}))}),Xt&&!tt&&E.createElement(iE,{key:"emoji_more",width:"38px",height:"38px",onClick:function(){return yt(!0)},testID:"ui_mobile_emoji_reactions_menu_emojiadd"},E.createElement(Ni,{url:"",width:"28px",height:"28px",placeHolder:function(Mt){var jt=Mt.style;return E.createElement("div",{style:jt},E.createElement(lt,{type:qe.EMOJI_MORE,fillColor:rt.ON_BACKGROUND_3,width:"28px",height:"28px"}))}}))))),!tt&&E.createElement("div",{className:"sendbird-message__bottomsheet--actions"},(a=F?.({items:{CopyMenuItem:HL,EditMenuItem:GL,ResendMenuItem:VL,ReplyMenuItem:zL,ThreadMenuItem:jL,DeleteMenuItem:qL,MarkAsUnreadMenuItem:$L}}))!==null&&a!==void 0?a:E.createElement(E.Fragment,null,V&&E.createElement(HL,null),ee&&E.createElement(GL,null),X&&ge&&E.createElement($L,null),z&&E.createElement(VL,null),me&&E.createElement(zL,null),Le&&E.createElement(jL,null),he&&E.createElement(qL,null),K&&E.createElement(Nde,null))))))},Mde=function(t){return E.createElement(E.Fragment,null,t?.isReactionEnabled?E.createElement(Ade,J({},t)):E.createElement(Tde,J({},t)))};function Ide(t,n){var e,r=t.className,i=t.threadInfo,a=t.onClick,s=i.mostRepliedUsers,o=s===void 0?[]:s,u=i.replyCount,c=Un().stringSet;return E.createElement("div",{className:"sendbird-ui-thread-replies ".concat(r),role:"button",onClick:function(h){a?.(h),h?.stopPropagation()},onKeyDown:function(h){a?.(h),h?.stopPropagation()},ref:n},E.createElement("div",{className:"sendbird-ui-thread-replies__user-profiles"},o.slice(0,4).map(function(h){return E.createElement(ms,{key:h.userId,className:"sendbird-ui-thread-replies__user-profiles__avatar",src:h?.profileUrl,alt:"user profile",width:"20px",height:"20px"})}),o?.length>=5&&E.createElement("div",{className:"sendbird-ui-thread-replies__user-profiles__avatar"},E.createElement(ms,{className:"sendbird-ui-thread-replies__user-profiles__avatar__image",src:(e=o?.[4])===null||e===void 0?void 0:e.profileUrl,alt:"user profile",width:"20px",height:"20px"}),E.createElement("div",{className:"sendbird-ui-thread-replies__user-profiles__avatar__cover"}),E.createElement("div",{className:"sendbird-ui-thread-replies__user-profiles__avatar__plus"},E.createElement(lt,{type:qe.PLUS,fillColor:rt.WHITE,width:"16px",height:"16px"})))),u>0&&E.createElement($e,{className:"sendbird-ui-thread-replies__reply-counts",type:Ge.CAPTION_2,color:De.PRIMARY},u===1?"".concat(u," ").concat(c.CHANNEL__THREAD_REPLY):"".concat(u>99?c.CHANNEL__THREAD_OVER_MAX:u," ").concat(c.CHANNEL__THREAD_REPLIES)),E.createElement(lt,{className:"sendbird-ui-thread-replies__icon",type:qe.CHEVRON_RIGHT,fillColor:rt.PRIMARY,width:"16px",height:"16px"}))}var wde=E.forwardRef(Ide);function Rde(t){var n,e,r,i=t.mentionTemplate,a=t.mentionedUserId,s=t.mentionedUserNickname,o=t.isByMe,u=R.useRef(),c=Zn().state,h=(n=c?.config)===null||n===void 0?void 0:n.userId,p=(r=(e=c?.stores)===null||e===void 0?void 0:e.sdkStore)===null||r===void 0?void 0:r.sdk,m=h===a,_=R.useState(),b=_[0],C=_[1],N=R.useCallback(function(S){if(b||!p?.createApplicationUserListQuery){S();return}var M=p?.createApplicationUserListQuery({userIdsFilter:[a]});M.next().then(function(w){w?.length>0&&C(w[0]),S()})},[p,a]);return E.createElement(No,{menuTrigger:function(S){return E.createElement("a",{className:Hn("sendbird-word__mention",m&&"sendbird-word__mention--me"),onClick:function(){return N(S)},ref:u,"data-userid":a,"data-nickname":s,"data-sb-mention":!0},E.createElement($e,{type:Ge.CAPTION_1,color:o?De.ONCONTENT_1:De.ONBACKGROUND_1},"".concat(i).concat(s)))},menuItems:function(S){return E.createElement(To,{parentRef:u,parentContainRef:u,closeDropdown:S,style:{paddingTop:"0px",paddingBottom:"0px"}},E.createElement(wp,{user:b,onSuccess:S,currentUserId:h}))}})}var Ode=/https?:\/\//;function I8(t){var n=t.className,e=n===void 0?"":n,r=t.src,i=t.type,a=t.color,s=t.children,o=Ode.test(r)?r:"http://".concat(r);return E.createElement("a",{className:Xe(Xe([],Array.isArray(e)?e:[e],!0),["sendbird-link-label",TF(a)],!1).join(" "),href:o,target:"_blank",rel:"noopener noreferrer",onTouchEnd:function(u){u.preventDefault(),u.nativeEvent.stopImmediatePropagation(),TE(o)}},E.createElement($e,{className:"sendbird-link-label__label",testID:"sendbird-link-label__label",type:i,color:a},s))}function Dde(t,n,e){return"sb-msg_".concat(t,"_").concat(n,"_").concat(e)}var Ude=["https:","http:","tel:","mailto:"];function xde(t){var n=decodeURIComponent(t);try{var e=new URL(n).protocol;return Ude.some(function(r){return r===e.toLowerCase()})?n:"#"}catch{!n.startsWith("http://")&&!n.startsWith("https://")&&(n="https://"+n)}return n}function aE(t){var n=t.tokens,e=N8(),r=e?.message,i=e?.isByMe,a=r.updatedAt,s=r.createdAt;return E.createElement(E.Fragment,null,n?.map(function(o,u){var c=Dde(s,a,u);return sl(o.type).with(ia.markdown,function(){var h=o,p=h.groups;return E.createElement("span",{className:"sendbird-word",key:c,"data-testid":"sendbird-ui-word"},sl(h.markdownType).with("bold",function(){return E.createElement("span",{style:{fontWeight:"bold"}},E.createElement(aE,{tokens:bL({messageText:p[1]})}))}).with("url",function(){return E.createElement("a",{className:i?"sendbird-label--color-oncontent-1":"sendbird-label--color-onbackground-1",href:xde(p[2]),target:"_blank",rel:"noopener noreferrer"},E.createElement(aE,{tokens:bL({messageText:p[1]})}))}).otherwise(function(){return E.createElement(E.Fragment,null)}))}).with(ia.mention,function(){return E.createElement("span",{className:"sendbird-word",key:c,"data-testid":"sendbird-ui-word"},E.createElement(Rde,{mentionTemplate:ME,mentionedUserId:o.userId,mentionedUserNickname:o.value,isByMe:i}))}).with(ia.url,function(){return E.createElement("span",{className:"sendbird-word",key:c,"data-testid":"sendbird-ui-word"},E.createElement(I8,{src:o.value,type:Ge.BODY_1,color:i?De.ONCONTENT_1:De.ONBACKGROUND_1},o.value))}).otherwise(function(){return E.createElement(E.Fragment,{key:c},Uce(o.value))})}))}function Lde(t){var n,e,r,i,a=t.className,s=t.message,o=t.isByMe,u=o===void 0?!1:o,c=t.mouseHover,h=c===void 0?!1:c,p=t.isMentionEnabled,m=p===void 0?!1:p,_=t.isReactionEnabled,b=_===void 0?!1:_,C=t.isMarkdownEnabled,N=C===void 0?!1:C,S=t.onMessageHeightChange,M=S===void 0?function(){}:S,w=R.useContext(gi).stringSet,U=m&&((n=s?.mentionedMessageTemplate)===null||n===void 0?void 0:n.length)>0&&s?.mentionedUsers&&((e=s?.mentionedUsers)===null||e===void 0?void 0:e.length)>0,L=R.useMemo(function(){var x;return wg(U?{mentionedUsers:(x=s?.mentionedUsers)!==null&&x!==void 0?x:void 0,messageText:s?.mentionedMessageTemplate,includeMarkdown:N}:{messageText:s?.message,includeMarkdown:N})},[s?.updatedAt,s?.message]),P=function(){var x;return TE((x=s?.ogMetaData)===null||x===void 0?void 0:x.url)};return E.createElement("div",{className:Qs([a??"","sendbird-og-message-item-body",u?"outgoing":"incoming",h?"mouse-hover":"",b&&((r=s?.reactions)===null||r===void 0?void 0:r.length)>0?"reactions":""])},E.createElement($e,{type:Ge.BODY_1,color:u?De.ONCONTENT_1:De.ONBACKGROUND_1},E.createElement("div",{className:g8},E.createElement(aE,{tokens:L}),t3(s)&&E.createElement($e,{className:"sendbird-og-message-item-body__text-bubble__message",type:Ge.BODY_1,color:u?De.ONCONTENT_2:De.ONBACKGROUND_2}," ".concat(w.MESSAGE_EDITED," ")))),((i=s.ogMetaData)===null||i===void 0?void 0:i.defaultImage)&&E.createElement(kde,{onClick:P,ogImage:s.ogMetaData.defaultImage,onMessageHeightChange:M}),s.ogMetaData&&E.createElement(Pde,{onClick:P,ogMetaData:s.ogMetaData,onMessageHeightChange:M}),E.createElement("div",{className:"sendbird-og-message-item-body__cover"}))}var kde=function(t){var n=t.onClick,e=t.ogImage,r=t.onMessageHeightChange,i=R.useRef(null),a=Ea().isMobile;return E.createElement("div",{ref:i,className:Hn("sendbird-og-message-item-body__og-thumbnail",!e.url&&"sendbird-og-message-item-body__og-thumbnail__empty"),onClick:function(){return n()}},E.createElement(Ni,{className:"sendbird-og-message-item-body__og-thumbnail__image",url:e.url||"",alt:e.alt||"",width:"100%",height:a?"136px":"240px",onLoad:r,onError:function(){var s,o;try{(o=(s=i?.current)===null||s===void 0?void 0:s.classList)===null||o===void 0||o.add("sendbird-og-message-item-body__og-thumbnail__empty")}catch{}},defaultComponent:E.createElement("div",{className:"sendbird-og-message-item-body__og-thumbnail__place-holder"},E.createElement(lt,{className:"sendbird-og-message-item-body__og-thumbnail__place-holder__icon",type:qe.THUMBNAIL_NONE,width:"56px",height:"56px"}))}))},Pde=function(t){var n=t.onClick,e=t.ogMetaData,r=t.onMessageHeightChange;return R.useEffect(function(){r()},[e.title,e.description,e.url]),E.createElement("div",{className:"sendbird-og-message-item-body__description",onClick:function(){return n()}},e.title&&E.createElement($e,{className:"sendbird-og-message-item-body__description__title",type:Ge.SUBTITLE_2,color:De.ONBACKGROUND_1},e.title),e.description&&E.createElement($e,{className:"sendbird-og-message-item-body__description__description",type:Ge.BODY_2,color:De.ONBACKGROUND_1},e.description),e.url&&E.createElement($e,{className:"sendbird-og-message-item-body__description__url",type:Ge.CAPTION_3,color:De.ONBACKGROUND_2},e.url))};function Fde(t){var n,e=t.className,r=e===void 0?"":e,i=t.message,a=t.isByMe,s=a===void 0?!1:a,o=t.mouseHover,u=o===void 0?!1:o,c=t.isMentionEnabled,h=c===void 0?!1:c,p=t.isReactionEnabled,m=p===void 0?!1:p,_=t.isMarkdownEnabled,b=_===void 0?!1:_,C=R.useContext(gi).stringSet,N=h&&i?.mentionedMessageTemplate&&i.mentionedMessageTemplate.length>0&&i?.mentionedUsers&&i.mentionedUsers.length>0,S=R.useMemo(function(){var M;return wg(N?{mentionedUsers:(M=i?.mentionedUsers)!==null&&M!==void 0?M:void 0,messageText:i?.mentionedMessageTemplate,includeMarkdown:b}:{messageText:i?.message,includeMarkdown:b})},[i?.updatedAt,i?.message]);return E.createElement($e,{type:Ge.BODY_1,color:s?De.ONCONTENT_1:De.ONBACKGROUND_1},E.createElement("div",{className:Qs([r,c3,s?"outgoing":"incoming",u?"mouse-hover":"",m&&((n=i?.reactions)===null||n===void 0?void 0:n.length)>0?"reactions":""])},E.createElement(aE,{tokens:S}),t3(i)&&E.createElement($e,{className:"sendbird-text-message-item-body__message edited",type:Ge.BODY_1,color:s?De.ONCONTENT_2:De.ONBACKGROUND_2}," ".concat(C.MESSAGE_EDITED," "))))}function Bde(t){var n=this,e,r=t.className,i=r===void 0?"":r,a=t.message,s=t.isByMe,o=s===void 0?!1:s,u=t.mouseHover,c=u===void 0?!1:u,h=t.isReactionEnabled,p=h===void 0?!1:h,m=t.truncateLimit,_=t.onBeforeDownloadFileMessage,b=null;try{var C=Zn().state.config.logger;b=C}catch{}var N=Ea().isMobile,S=m??(N?20:void 0),M=function(){return TE(a?.url)},w=_?function(){return si(n,void 0,void 0,function(){var U,L,P,x;return oi(this,function(H){switch(H.label){case 0:return H.trys.push([0,2,,3]),[4,_({message:a})];case 1:return U=H.sent(),U?M():(P=b?.info)===null||P===void 0||P.call(b,"FileMessageItemBody: Not allowed to download."),[3,3];case 2:return L=H.sent(),(x=b?.error)===null||x===void 0||x.call(b,"FileMessageItemBody: Error occurred while determining download continuation:",L),[3,3];case 3:return[2]}})})}:M;return E.createElement("div",{className:Qs([i,"sendbird-file-message-item-body",o?"outgoing":"incoming",c?"mouse-hover":"",p&&((e=a?.reactions)===null||e===void 0?void 0:e.length)>0?"reactions":""])},E.createElement("div",{className:"sendbird-file-message-item-body__file-icon"},E.createElement(lt,{className:"sendbird-file-message-item-body__file-icon__icon",type:{IMAGE:qe.PHOTO,VIDEO:qe.PLAY,AUDIO:qe.FILE_AUDIO,GIF:qe.GIF,OTHERS:qe.FILE_DOCUMENT}[BF(a?.type)],fillColor:rt.PRIMARY,width:"24px",height:"24px"})),E.createElement(tT,{className:"sendbird-file-message-item-body__file-name",onClick:w,color:o?go.ONCONTENT_1:go.ONBACKGROUND_1},E.createElement($e,{className:"sendbird-file-message-item-body__file-name__text",testID:"sendbird-file-message-item-body__file-name__text",type:Ge.BODY_1,color:o?De.ONCONTENT_1:De.ONBACKGROUND_1},KF(a?.name||a?.url,S))))}function h3(t,n){R.useLayoutEffect(function(){var r;(r=t.current)===null||r===void 0||r.focus()},[t.current]);var e=CE(function(r){var i=n[r.key];i?.(r),r.stopPropagation()});return e}var wE={MULTI:"MULTI"};function Hde(t){var n=t.props;if(n.viewerType===wE.MULTI){var e=n,r=e.fileInfoList,i=e.currentIndex;return r[i]}var a=n;return{name:a.name,type:a.type,url:a.url}}function Gde(t){if(t.viewerType!==wE.MULTI){var n=t.onDelete,e=t.isByMe,r=t.disableDelete,i=t.className;return e?E.createElement("div",{className:"sendbird-fileviewer__header__right__actions__delete ".concat(i)},E.createElement(lt,{className:r?"disabled":"",type:qe.DELETE,fillColor:r?rt.GRAY:rt.ON_BACKGROUND_1,height:"24px",width:"24px",onClick:function(a){r||n?.(a)}})):E.createElement(E.Fragment,null)}return E.createElement(E.Fragment,null)}function Vde(t){if(t.viewerType===wE.MULTI){var n=t.onClickLeft,e=t.onClickRight;return E.createElement("div",{className:"sendbird-file-viewer-slider"},E.createElement("div",{className:"sendbird-file-viewer-arrow--left"},E.createElement(lt,{type:qe.SLIDE_LEFT,fillColor:rt.ON_BACKGROUND_1,height:J1,width:J1,onClick:function(r){n?.(),r.stopPropagation()}})),E.createElement("div",{className:"sendbird-file-viewer-arrow--right"},E.createElement(lt,{type:qe.SLIDE_LEFT,fillColor:rt.ON_BACKGROUND_1,height:J1,width:J1,onClick:function(r){r.stopPropagation(),e?.()}})))}return E.createElement(E.Fragment,null)}var KL=function(t){var n=t.profileUrl,e=t.nickname,r=t.onClose,i=t.onDownloadClick,a=t,s=a.onClickLeft,o=a.onClickRight,u=R.useRef(null),c=h3(u,{Escape:function(C){return r?.(C)},ArrowLeft:function(){return s?.()},ArrowRight:function(){return o?.()}}),h=Hde({props:t}),p=h.name,m=h.type,_=h.url,b=R.useContext(gi).stringSet;return E.createElement(Ud,{onClose:r},E.createElement("div",{className:"sendbird-fileviewer","data-testid":"sendbird-fileviewer",onKeyDown:c,tabIndex:1,ref:u},E.createElement("div",{className:"sendbird-fileviewer__header"},E.createElement("div",{className:"sendbird-fileviewer__header__left"},E.createElement("div",{className:"sendbird-fileviewer__header__left__avatar"},E.createElement(ms,{height:"32px",width:"32px",src:n})),E.createElement("div",{className:"sendbird-fileviewer__header__left__text-container"},E.createElement($e,{className:"sendbird-fileviewer__header__left__filename",type:Ge.H_2,color:De.ONBACKGROUND_1},p),E.createElement($e,{className:"sendbird-fileviewer__header__left__sender-name",type:Ge.BODY_1,color:De.ONBACKGROUND_2},e))),E.createElement("div",{className:"sendbird-fileviewer__header__right"},Jy(m)&&E.createElement("div",{className:"sendbird-fileviewer__header__right__actions"},E.createElement("a",{className:"sendbird-fileviewer__header__right__actions__download",rel:"noopener noreferrer",href:_,target:"_blank",onClick:i},E.createElement(lt,{type:qe.DOWNLOAD,fillColor:rt.ON_BACKGROUND_1,height:"24px",width:"24px"})),E.createElement(Gde,J({className:"sendbird-fileviewer__header__right__actions__delete"},t))),E.createElement("div",{className:"sendbird-fileviewer__header__right__actions__close"},E.createElement(lt,{type:qe.CLOSE,fillColor:rt.ON_BACKGROUND_1,height:"24px",width:"24px",onClick:function(C){return r?.(C)}})))),E.createElement("div",{className:"sendbird-fileviewer__content"},uf(m)&&E.createElement("video",{controls:!0,className:"sendbird-fileviewer__content__video"},E.createElement("source",{src:_,type:m})),xd(m)&&E.createElement("img",{src:_,alt:p,className:t.viewerType===wE.MULTI?"sendbird-fileviewer__content__img__multi":"sendbird-fileviewer__content__img"}),!Jy(m)&&E.createElement("div",{className:"sendbird-fileviewer__content__unsupported"},E.createElement($e,{type:Ge.H_1,color:De.ONBACKGROUND_1},b?.UI__FILE_VIEWER__UNSUPPORT||"Unsupported message")),E.createElement(Vde,J({},t)))))};function w8(t){var n,e,r,i=t.message,a=t.statefulFileInfoList,s=a===void 0?[]:a,o=t.onClose,u=t.isByMe,c=u===void 0?!1:u,h=t.onDelete,p=t.currentIndex,m=t.onClickLeft,_=t.onClickRight,b=t.onDownloadClick;if(js(i)){var C=i;return E.createElement(KL,{profileUrl:C.sender.profileUrl,nickname:C.sender.nickname,viewerType:wE.MULTI,fileInfoList:s.filter(function(N){return N.url}).map(function(N){return{name:N.fileName||"",type:N.mimeType||"",url:N.url||""}}),currentIndex:p||0,onClickLeft:m||Mr,onClickRight:_||Mr,onClose:o,onDownloadClick:b})}else if(gs(i)){var C=i;return Lg.createPortal(E.createElement(KL,{profileUrl:(n=C.sender)===null||n===void 0?void 0:n.profileUrl,nickname:(e=C.sender)===null||e===void 0?void 0:e.nickname,name:C.name,type:C.type,url:C?.url,isByMe:c,disableDelete:(((r=C.threadInfo)===null||r===void 0?void 0:r.replyCount)||0)>0,onClose:o,onDelete:h||Mr,onDownloadClick:b}),document.getElementById(Ep))}return E.createElement(E.Fragment,null)}function zde(t){var n,e=t.children,r=t.className,i=t.message,a=t.isReactionEnabled;return E.createElement("div",{className:"sendbird-image-grid-wrap"},E.createElement("div",{className:Qs([r??"","sendbird-image-grid",a&&((n=i?.reactions)===null||n===void 0?void 0:n.length)>0?"reactions":""])},e))}var jde=400,PN=8,eg=4,qde=54,sC=40,$de=48,Kde=320,YL=28,WL=12,Yde=200,Wde=8,Qde=32,Xde=60,FN={CHAT_WEB:"calc(".concat(jde/2,"px - ").concat((PN+eg)/2,"px)"),CHAT_MOBILE:"calc(50vw - ".concat(($de+sC+qde+PN+eg)/2,"px)"),THREAD_PARENT_WEB:"calc(".concat((Kde-(YL+sC+WL+eg))/2,"px)"),THREAD_PARENT_MOBILE:"calc(50vw - ".concat((YL+sC+WL+eg)/2,"px)"),THREAD_CHILD_WEB:"calc(".concat((Yde-Wde-eg)/2,"px)"),THREAD_CHILD_MOBILE:"calc(50vw - ".concat((Qde+sC+Xde+PN+eg)/2,"px)")},Zde={CHAT_WEB:"6px",CHAT_MOBILE:"6px",THREAD_PARENT_WEB:"6px",THREAD_PARENT_MOBILE:"6px",THREAD_CHILD_WEB:"6px",THREAD_CHILD_MOBILE:"6px"},tg="34px",QL={PARENT:"parent",CHILD:"child"};function Jde(t){var n=this,e=t.className,r=t.message,i=t.isReactionEnabled,a=i===void 0?!1:i,s=t.threadMessageKindKey,o=t.statefulFileInfoList,u=o===void 0?[]:o,c=t.onBeforeDownloadFileMessage,h=c===void 0?null:c,p=Zn().state.config.logger,m=R.useState(-1),_=m[0],b=m[1];function C(){b(-1)}function N(){b(_===0?u.length-1:_-1)}function S(){b(_===u.length-1?0:_+1)}return s?E.createElement(E.Fragment,null,_>-1&&E.createElement(w8,{message:r,statefulFileInfoList:u,currentIndex:_,onClickLeft:N,onClickRight:S,onClose:C,onDownloadClick:function(M){return si(n,void 0,void 0,function(){var w,U,L,P;return oi(this,function(x){switch(x.label){case 0:if(!h)return[2];x.label=1;case 1:return x.trys.push([1,3,,4]),[4,h({message:r,index:_})];case 2:return w=x.sent(),w||(M.preventDefault(),(L=p?.info)===null||L===void 0||L.call(p,"MultipleFilesMessageItemBody: Not allowed to download.")),[3,4];case 3:return U=x.sent(),(P=p?.error)===null||P===void 0||P.call(p,"MultipleFilesMessageItemBody: Error occurred while determining download continuation:",U),[3,4];case 4:return[2]}})})}}),E.createElement(zde,{className:e,message:r,isReactionEnabled:a},u.map(function(M,w){var U,L,P,x;return E.createElement("div",{className:"sendbird-multiple-files-image-renderer-wrapper",onClick:r.sendingStatus===Tn.SUCCEEDED?function(){return b(w)}:void 0,key:"sendbird-multiple-files-image-renderer-".concat(w,"-").concat(M.url)},E.createElement(Ni,{url:(x=(P=(L=(U=M.thumbnails)===null||U===void 0?void 0:U[0])===null||L===void 0?void 0:L.url)!==null&&P!==void 0?P:M.url)!==null&&x!==void 0?x:"",fixedSize:!1,width:FN[s],maxSideLength:FN.CHAT_WEB,height:FN[s],borderRadius:vue(Zde[s],w,u.length),shadeOnHover:!0,isUploaded:!!M.isUploaded,placeHolder:function(H){var F=H.style;return M.mimeType&&NE(M.mimeType)?E.createElement(BN.GIF,{style:F}):E.createElement(BN.Default,{style:F})},defaultComponent:E.createElement(BN.LoadError,null)}))}))):E.createElement(E.Fragment,null)}var BN={Default:function(t){var n=t.style;return E.createElement("div",{className:"sendbird-multiple-files-image-renderer__thumbnail__placeholder",style:n},E.createElement(lt,{type:qe.PHOTO,fillColor:rt.ON_BACKGROUND_2,width:tg,height:tg}))},GIF:function(t){var n=t.style;return E.createElement("div",{className:"sendbird-multiple-files-image-renderer__thumbnail__placeholder",style:n},E.createElement("div",{className:"sendbird-multiple-files-image-renderer__thumbnail__placeholder__icon"},E.createElement(lt,{type:qe.GIF,fillColor:rt.THUMBNAIL_ICON,width:tg,height:tg})))},LoadError:function(){return E.createElement("div",{className:"sendbird-multiple-files-image-renderer__thumbnail__placeholder"},E.createElement(lt,{type:qe.THUMBNAIL_NONE,fillColor:rt.ON_BACKGROUND_2,width:tg,height:tg}))}};function ehe(t){var n=t.threadMessageKind,e=t.isMobile,r=R.useMemo(function(){return sl(n).with(QL.PARENT,function(){return e?"THREAD_PARENT_MOBILE":"THREAD_PARENT_WEB"}).with(QL.CHILD,function(){return e?"THREAD_CHILD_MOBILE":"THREAD_CHILD_WEB"}).otherwise(function(){return e?"CHAT_MOBILE":"CHAT_WEB"})},[e,n]);return r}var the=function(t){var n,e,r=R.useRef(new Map),i=function(s,o){return!r.current.has(s)&&o&&r.current.set(s,URL.createObjectURL(o)),r.current.get(s)},a=function(){r.current.size>0&&(r.current.forEach(function(s){return URL.revokeObjectURL(s)}),r.current.clear())};return R.useEffect(function(){return function(){return a()}},[]),!t||!t.isMultipleFilesMessage||!t.isMultipleFilesMessage()?[]:t.sendingStatus===Tn.SUCCEEDED?(a(),t.fileInfoList.map(function(s){var o,u;return J(J({},s),{url:s.url,isUploaded:!0,mimeType:(o=s.mimeType)!==null&&o!==void 0?o:void 0,fileName:(u=s.fileName)!==null&&u!==void 0?u:void 0})})):(e=(n=t?.messageParams)===null||n===void 0?void 0:n.fileInfoList.map(function(s,o){var u,c;return J(J({},s),{url:(c=(u=i(o))!==null&&u!==void 0?u:s.fileUrl)!==null&&c!==void 0?c:s.file instanceof Blob?i(o,s.file):void 0,isUploaded:!s.file&&typeof s.fileUrl=="string"&&s.fileUrl.length>0})}))!==null&&e!==void 0?e:[]},CI={PRIMARY:"progress-bar-color--primary",GRAY:"progress-bar-color--gray"},R8=function(t){var n=t.className,e=n===void 0?"":n,r=t.disabled,i=r===void 0?!1:r,a=t.maxSize,s=t.currentSize,o=s===void 0?0:s,u=t.colorType,c=u===void 0?CI.PRIMARY:u,h=R.useMemo(function(){return"".concat(o/a*100,"%")},[o,a]);return E.createElement("div",{className:Hn("sendbird-progress-bar",e,c,i&&"progress-bar--disabled")},E.createElement("div",{className:"sendbird-progress-bar__fill",style:{width:h}}))},O8=function(t){var n,e=t.key,r=e===void 0?"":e,i=t.channelUrl,a=i===void 0?"":i,s=t.audioFile,o=t.audioFileUrl,u=o===void 0?"":o,c=t.audioFileMimeType,h=c===void 0?tf:c,p=Rae(a,r),m=xae(),_=m.play,b=m.pause,C=m.stop,N=m.voicePlayerStore,S=AF().isRecordable,M=((n=N?.audioStorage)===null||n===void 0?void 0:n[p])||qv(),w=function(){S||_?.({groupKey:p,audioFile:s,audioFileUrl:u,audioFileMimeType:h})},U=function(){b?.(p)},L=function(P){P===void 0&&(P=""),C?.(P)};return R.useEffect(function(){return function(){var P;if(s||u){var x=document.getElementById(KA);(P=x?.pause)===null||P===void 0||P.call(x)}}},[]),{play:w,pause:U,stop:L,playbackTime:(M?.playbackTime||0)*1e3,duration:(M?.duration||0)*1e3,playingStatus:M.playingStatus}},D8=function(t){var n=t.className,e=t.time,r=e===void 0?0:e,i=t.labelType,a=i===void 0?Ge.CAPTION_2:i,s=t.labelColor,o=s===void 0?De.ONCONTENT_1:s,u=r<0?0:r,c=Math.floor(u/36e5),h=Math.floor(u%36e5/6e4),p=Math.floor(u%36e5%6e4/1e3);return E.createElement("div",{className:"sendbird-ui-play-time ".concat(n)},E.createElement($e,{type:a,color:o},"".concat(c?c+":":"").concat(h<10?"0":"").concat(h||"0",":").concat(p<10?"0":"").concat(p)))},nhe=function(t){var n,e=t.className,r=t.message,i=t.channelUrl,a=t.isByMe,s=a===void 0?!1:a,o=t.isReactionEnabled,u=o===void 0?!1:o,c=R.useState(!1),h=c[0],p=c[1],m=O8({channelUrl:i,key:"".concat(r?.messageId),audioFileUrl:r?.url,audioFileMimeType:r?.type}),_=m.play,b=m.pause,C=m.playbackTime,N=C===void 0?0:C,S=m.duration,M=m.playingStatus,w=M===void 0?bu.IDLE:M;R.useEffect(function(){var L;u&&((L=r?.reactions)===null||L===void 0?void 0:L.length)>0?p(!0):p(!1)},[u,(n=r?.reactions)===null||n===void 0?void 0:n.length]);var U=R.useMemo(function(){var L,P=1;if(r?.metaArrays){var x=(L=r?.metaArrays.find(function(H){return H.key==="KEY_VOICE_MESSAGE_DURATION"}))===null||L===void 0?void 0:L.value[0];return x?parseInt(x):P}return P},[r?.metaArrays]);return E.createElement("div",{className:Hn("sendbird-voice-message-item-body",e,h&&"is-reactions-contained")},E.createElement(R8,{className:"sendbird-voice-message-item-body__progress-bar",maxSize:S||U,currentSize:N,colorType:s?CI.PRIMARY:CI.GRAY}),E.createElement("div",{className:"sendbird-voice-message-item-body__status-button"},(w===bu.IDLE||w===bu.PAUSED)&&E.createElement("div",{className:"sendbird-voice-message-item-body__status-button__button",onClick:_},E.createElement(lt,{width:"18px",height:"18px",type:qe.PLAY,fillColor:rt.PRIMARY})),w===bu.PREPARING&&E.createElement(gf,{width:"22.2px",height:"22.2px"},E.createElement(lt,{width:"22.2px",height:"22.2px",type:qe.SPINNER,fillColor:rt.PRIMARY_2})),w===bu.PLAYING&&E.createElement("div",{className:"sendbird-voice-message-item-body__status-button__button",onClick:function(){b()}},E.createElement("div",{className:"sendbird-voice-message-item-body__status-button__button__pause"},E.createElement("div",{className:"sendbird-voice-message-item-body__status-button__button__pause__inner"}),E.createElement("div",{className:"sendbird-voice-message-item-body__status-button__button__pause__inner"})))),E.createElement(D8,{className:"sendbird-voice-message-item-body__playback-time",time:U-N,labelType:Ge.BODY_1,labelColor:s?De.ONCONTENT_1:De.ONBACKGROUND_1}))};function rhe(t){var n,e,r=t.className,i=r===void 0?"":r,a=t.message,s=t.isByMe,o=s===void 0?!1:s,u=t.mouseHover,c=u===void 0?!1:u,h=t.isReactionEnabled,p=h===void 0?!1:h,m=t.showFileViewer,_=m===void 0?Mr:m,b=t.style,C=b===void 0?{}:b,N=M8(a),S=R.useState(!1),M=S[0],w=S[1],U=Ld({onLongPress:Mr,onClick:function(){eE(a)&&_?.(!0)}});return E.createElement("div",J({className:Qs([i,"sendbird-thumbnail-message-item-body",o?"outgoing":"incoming",c?"mouse-hover":"",p&&((e=(n=a.reactions)===null||n===void 0?void 0:n.length)!==null&&e!==void 0?e:0)>0?"reactions":""])},U),E.createElement(Ni,{className:"sendbird-thumbnail-message-item-body__thumbnail",url:N||NS(a),alt:TS(a),width:C?.width||"360px",height:C?.height||"270px",onLoad:function(){w(!0)},placeHolder:function(L){var P=L.style;return E.createElement("div",{className:"sendbird-thumbnail-message-item-body__placeholder",style:P})}}),pg(a)&&!N&&!M&&E.createElement("video",{className:"sendbird-thumbnail-message-item-body__video"},E.createElement("source",{src:NS(a),type:TS(a)})),E.createElement("div",{className:"sendbird-thumbnail-message-item-body__image-cover"}),(pg(a)||vI(a))&&E.createElement("div",{className:"sendbird-thumbnail-message-item-body__icon-wrapper"},E.createElement("div",{className:"sendbird-thumbnail-message-item-body__icon-wrapper__icon"},E.createElement(lt,{type:pg(a)?qe.PLAY:qe.GIF,fillColor:rt.THUMBNAIL_ICON,width:"34px",height:"34px"}))))}function ihe(t){var n,e=t.className,r=t.message,i=t.isByMe,a=i===void 0?!1:i,s=t.mouseHover,o=s===void 0?!1:s,u=t.isReactionEnabled,c=u===void 0?!1:u,h=R.useContext(gi).stringSet;return E.createElement("div",{className:Qs([e??"","sendbird-unknown-message-item-body",a?"outgoing":"incoming",o?"mouse-hover":"",c&&((n=r?.reactions)===null||n===void 0?void 0:n.length)>0?"reactions":""])},E.createElement($e,{className:"sendbird-unknown-message-item-body__header",type:Ge.BODY_1,color:a?De.ONCONTENT_1:De.ONBACKGROUND_1},h.UNKNOWN__UNKNOWN_MESSAGE_TYPE),E.createElement($e,{className:"sendbird-unknown-message-item-body__description",type:Ge.BODY_1,color:a?De.ONCONTENT_2:De.ONBACKGROUND_2},h.UNKNOWN__CANNOT_READ_MESSAGE))}var ahe=Object.defineProperty,she=Object.defineProperties,ohe=Object.getOwnPropertyDescriptors,AS=Object.getOwnPropertySymbols,U8=Object.prototype.hasOwnProperty,x8=Object.prototype.propertyIsEnumerable,XL=(t,n,e)=>n in t?ahe(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e,Kt=(t,n)=>{for(var e in n||(n={}))U8.call(n,e)&&XL(t,e,n[e]);if(AS)for(var e of AS(n))x8.call(n,e)&&XL(t,e,n[e]);return t},hp=(t,n)=>she(t,ohe(n)),lhe=(t,n)=>{var e={};for(var r in t)U8.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&AS)for(var r of AS(t))n.indexOf(r)<0&&x8.call(t,r)&&(e[r]=t[r]);return e},sT=(t=>(t.Box="box",t.Text="text",t.Image="image",t.TextButton="textButton",t.ImageButton="imageButton",t.Carousel="carouselView",t.Cascade="cascadeView",t))(sT||{}),MS=(t,n)=>typeof n[t]!="string"?{}:{[t]:uhe(n[t])};function uhe(t){return t.startsWith("#")?t.length===9?`#${t.slice(3)}${t[1]}${t[2]}`:t.length===5?`#${t.slice(2)}${t[1]}`:t:t}var HN=t=>t?{viewStyle:Kt(Kt(Kt({},t),MS("backgroundColor",t)),MS("borderColor",t))}:{},che=t=>t?{textStyle:Kt(Kt({},t),MS("color",t))}:{},dhe=t=>t?{imageStyle:Kt(Kt({},t),MS("tintColor",t))}:{},hhe={run(t){return t.type==="text"||t.type==="textButton"?Kt(Kt(Kt({},t),HN(t.viewStyle)),che(t.textStyle)):t.type==="imageButton"||t.type==="image"?Kt(Kt(Kt({},t),HN(t.viewStyle)),dhe(t.imageStyle)):Kt(Kt({},t),HN(t.viewStyle))}},Wh=t=>typeof t=="string"?!Number.isNaN(Number(t)):typeof t=="number"&&!Number.isNaN(t),df=(t,n)=>n[t]===void 0||n[t]===null?{}:Wh(n[t])?{[t]:Number(n[t])}:{},ZL=(t,n)=>n?{[t]:{left:Wh(n.left)?Number(n.left):n.left,right:Wh(n.right)?Number(n.right):n.right,top:Wh(n.top)?Number(n.top):n.top,bottom:Wh(n.bottom)?Number(n.bottom):n.bottom}}:{},JL=(t,n)=>n?{[t]:{type:n.type,value:Wh(n.value)?Number(n.value):n.value}}:{},fhe=t=>t?{metaData:{pixelWidth:Wh(t.pixelWidth)?Number(t.pixelWidth):t.pixelWidth,pixelHeight:Wh(t.pixelHeight)?Number(t.pixelHeight):t.pixelHeight}}:{},vhe=t=>t?{viewStyle:Kt(Kt(Kt(Kt(Kt({},t),df("borderWidth",t)),df("radius",t)),ZL("margin",t.margin)),ZL("padding",t.padding))}:{},phe=t=>t?{textStyle:Kt(Kt(Kt({},t),df("size",t)),df("weight",t))}:{},mhe=t=>t?{carouselStyle:Kt(Kt(Kt({},t),df("spacing",t)),df("maxChildWidth",t))}:{},ghe=t=>t?{cascadeStyle:Kt(Kt({},t),df("spacing",t))}:{},RE=t=>Kt(Kt(Kt({},JL("width",t.width)),JL("height",t.height)),vhe(t.viewStyle)),_he=t=>Kt(Kt(Kt({},RE(t)),phe(t.textStyle)),df("maxTextLines",t)),yhe=t=>Kt(Kt({},RE(t)),fhe(t.metaData)),Ehe=t=>hp(Kt(Kt({},RE(t)),mhe(t.carouselStyle)),{items:t.items.map(n=>hp(Kt({},n),{body:hp(Kt({},n.body),{items:n.body.items.map(e=>f3.run(e))})}))}),bhe=t=>hp(Kt(Kt({},RE(t)),ghe(t.cascadeStyle)),{items:t.items.map(n=>hp(Kt({},n),{body:hp(Kt({},n.body),{items:n.body.items.map(e=>f3.run(e))})}))}),f3={run(t){return t.type==="text"||t.type==="textButton"?Kt(Kt({},t),_he(t)):t.type==="imageButton"||t.type==="image"?Kt(Kt({},t),yhe(t)):t.type==="carouselView"?Kt(Kt({},t),Ehe(t)):t.type==="cascadeView"?Kt(Kt({},t),bhe(t)):Kt(Kt({},t),RE(t))}},Che=()=>{},L8=t=>{var n;let e=t?.defaultMapper||Che,r={defaultMapper:e,mapBoxProps:t?.mapBoxProps||e,mapTextProps:t?.mapTextProps||e,mapImageProps:t?.mapImageProps||e,mapTextButtonProps:t?.mapTextButtonProps||e,mapImageButtonProps:t?.mapImageButtonProps||e,mapCarouselProps:t?.mapCarouselProps||e,mapCascadeProps:t?.mapCascadeProps||e},i=[hhe,f3,...(n=t?.transforms)!=null?n:[]];return{setTransforms(a){i.length=0,i.push(...a)},addTransforms(a){i.push(...a)},parse(a,s){let o=i.reduce((u,c)=>c.run(u),a);switch(o.type){case"box":return{transformed:o,properties:r.mapBoxProps(o,s)};case"text":return{transformed:o,properties:r.mapTextProps(o,s)};case"image":return{transformed:o,properties:r.mapImageProps(o,s)};case"textButton":return{transformed:o,properties:r.mapTextButtonProps(o,s)};case"imageButton":return{transformed:o,properties:r.mapImageButtonProps(o,s)};case"carouselView":return{transformed:o,properties:r.mapCarouselProps(o,s)};case"cascadeView":return{transformed:o,properties:r.mapCascadeProps(o,s)};default:return{transformed:o,properties:void 0}}}}},Dv=({children:t})=>E.createElement(E.Fragment,null,t);function k8(t){var n,e,r,i,a,s,o;return{box:((n=t?.views)==null?void 0:n.box)||Dv,text:((e=t?.views)==null?void 0:e.text)||Dv,image:((r=t?.views)==null?void 0:r.image)||Dv,imageButton:((i=t?.views)==null?void 0:i.imageButton)||Dv,textButton:((a=t?.views)==null?void 0:a.textButton)||Dv,carouselView:((s=t?.views)==null?void 0:s.carouselView)||Dv,cascadeView:((o=t?.views)==null?void 0:o.cascadeView)||Dv}}var P8=R.createContext({sizes:{},updateSize:()=>{}}),She=({children:t})=>{let[n,e]=R.useState({}),r=R.useCallback(i=>{var a=i,{id:s}=a,o=lhe(a,["id"]);s&&e(u=>hp(Kt({},u),{[s]:o}))},[]);return E.createElement(P8.Provider,{value:{sizes:n,updateSize:r}},t)},The=()=>R.useContext(P8),yo=(t=>(t.Row="row",t.Column="column",t))(yo||{}),LC=(t=>(t.Center="center",t.Left="left",t.Right="right",t.Top="top",t.Bottom="bottom",t))(LC||{}),Ol=(t=>(t[t.FillParent=0]="FillParent",t[t.WrapContent=1]="WrapContent",t))(Ol||{}),Nhe=(t=>(t.Normal="normal",t.Bold="bold",t))(Nhe||{}),sy=(t=>(t.AspectFit="aspectFit",t.AspectFill="aspectFill",t.ScalesToFill="scalesToFill",t))(sy||{}),F8=[1,2],oC=t=>{switch(t){case"right":case"bottom":return"flex-end";case"center":return"center";case"left":case"top":default:return"flex-start"}},Ahe=t=>t?F8.includes(Number(t)):!0,Mhe=t=>{let n=new Map,e=function(r){return(n.has(r)||n.set(r,t.call(this,r)))&&n.get(r)};return e.cache=n,e},Ihe=Mhe(t=>{let n=(e,r)=>{"items"in e&&e?.items!=null&&e.items.forEach((i,a)=>{let s=`${r}-${a}`;i.id=s,n(i,s)})};return t.forEach((e,r)=>{let i=`${r}`;e.id=i,n(e,i)}),t}),$s={rootLayout:"column",view:{size:{width:{type:"flex",value:0},height:{type:"flex",value:1}}},box:{layout:"row",align:{vertical:"top",horizontal:"left"}},textButton:{maxTextLines:1},carousel:{style:{spacing:10,maxChildWidth:240}},cascade:{layout:"column",style:{spacing:10}}},B8=t=>{let n=t.Container||E.Fragment,e=t.UnknownMessage||(()=>null),r=t.parser||L8(),i=t.renderer||k8(),a=({templateItems:s,templateVersion:o,parentLayout:u=$s.box.layout,depth:c=0})=>{if(!Ahe(o))throw new Error(`Cannot parse template item due to unsupported template version: ${o}, ${F8}`);return E.createElement(E.Fragment,null,s.map((h,p,m)=>{let _=r.parse(h,{parentLayout:u,depth:c,elemIdx:p,siblings:m}),b=_.transformed,C={key:p,siblings:m,parentLayout:u,parsedProperties:_.properties,rawProperties:h};switch(b.type){case"carouselView":{if(!Array.isArray(b.items))throw new Error("Cannot parse template item as Carousel if carousel has no items.");return E.createElement(i.carouselView,Kt(Kt({},b),C),b.items.map((N,S)=>E.createElement(a,{key:S,templateItems:N.body.items||[],depth:c+1,templateVersion:N.version})))}case"cascadeView":{if(!Array.isArray(b.items))throw new Error("Cannot parse template item as Cascade if cascade has no items.");return E.createElement(i.cascadeView,Kt(Kt({},b),C),b.items.map((N,S)=>E.createElement(a,{key:S,templateItems:N.body.items||[],depth:c+1,templateVersion:N.version})))}case"box":return E.createElement(i.box,Kt(Kt({},b),C),E.createElement(a,{templateItems:b.items||[],parentLayout:b.layout,depth:c+1,templateVersion:o}));case"text":return E.createElement(i.text,Kt(Kt({},b),C));case"image":return E.createElement(i.image,Kt(Kt({},b),C));case"textButton":return E.createElement(i.textButton,Kt(Kt({},b),C));case"imageButton":return E.createElement(i.imageButton,Kt(Kt({},b),C));default:return E.createElement(e,{item:b})}}))};return{MessageTemplate:({templateVersion:s,templateItems:o,parentLayout:u=$s.rootLayout})=>{let c=Ihe(o);return E.createElement(She,null,E.createElement(n,{className:"sb-message-template__parent"},E.createElement(a,{isRoot:!0,parentLayout:u,templateItems:c,templateVersion:s})))},MessageTemplateBase:a}},whe=(t=>(t.Web="web",t.Custom="custom",t.UIKit="uikit",t.Internal="internal",t))(whe||{}),Rhe=Object.defineProperty,Ohe=Object.defineProperties,Dhe=Object.getOwnPropertyDescriptors,IS=Object.getOwnPropertySymbols,H8=Object.prototype.hasOwnProperty,G8=Object.prototype.propertyIsEnumerable,e6=(t,n,e)=>n in t?Rhe(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e,Mi=(t,n)=>{for(var e in n||(n={}))H8.call(n,e)&&e6(t,e,n[e]);if(IS)for(var e of IS(n))G8.call(n,e)&&e6(t,e,n[e]);return t},bp=(t,n)=>Ohe(t,Dhe(n)),Cp=(t,n)=>{var e={};for(var r in t)H8.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&IS)for(var r of IS(t))n.indexOf(r)<0&&G8.call(t,r)&&(e[r]=t[r]);return e};function Uhe(t){var n;return t.type===sT.Text&&((n=t.width)==null?void 0:n.value)==Ol.WrapContent}var t6=({size:t,option:n})=>n==="wrap"?t.type==="flex"&&t.value==Ol.WrapContent:n==="fill"?t.type==="flex"&&t.value==Ol.FillParent:t.type==="fixed",xhe=t=>{var n;return typeof t!="string"?!1:((n=t.split(".").pop())==null?void 0:n.toLowerCase())==="gif"},od=(...t)=>t.filter(n=>!!n).join(" "),Lhe=(t="")=>["http://","https://","ftp://"].some(n=>t.startsWith(n)),n6=(t="")=>Lhe(t)?t:`https://${t}`;function Uv(t){return Mi({display:"flex",overflow:"hidden",boxSizing:"border-box"},t)}function xv(t,n,e){Bhe(t,n,e),Phe(t,n)}function khe(t,n,e,r){n&&(t["--border-width"]=`${n}px`,t["--border-color"]=e||"transparent"),r&&(t.borderRadius=r,t["--border-radius"]=`${r}px`)}function Phe(t,n){var e,r,i,a,s,o,u,c,h,p,m,_;let{viewStyle:b}=n;t.paddingBlockStart=(e=b?.padding)==null?void 0:e.top,t.paddingBlockEnd=(r=b?.padding)==null?void 0:r.bottom,t.paddingInlineStart=(i=b?.padding)==null?void 0:i.left,t.paddingInlineEnd=(a=b?.padding)==null?void 0:a.right,t.marginBlockStart=(s=b?.margin)==null?void 0:s.top,t.marginBlockEnd=(o=b?.margin)==null?void 0:o.bottom,t.marginInlineStart=(u=b?.margin)==null?void 0:u.left,t.marginInlineEnd=(c=b?.margin)==null?void 0:c.right;let C=((p=(h=b?.margin)==null?void 0:h.left)!=null?p:0)+((_=(m=b?.margin)==null?void 0:m.right)!=null?_:0);C>0&&t.width==="100%"&&(t.width=`calc(100% - ${C}px)`),b!=null&&b.backgroundColor&&(t.backgroundColor=b.backgroundColor),b!=null&&b.backgroundImageUrl&&(t.backgroundImage=`url(${JSON.stringify(b.backgroundImageUrl)})`,t.backgroundSize="100% 100%",t.backgroundPosition="center"),khe(t,b?.borderWidth,b?.borderColor,b?.radius)}function Fhe(t,n,e){let r={};return t.type==="flex"&&t.value==Ol.FillParent?(r.width="100%",e===yo.Row&&(r.flex=1)):t.type==="flex"&&t.value==Ol.WrapContent?(r.width="fit-content",e===yo.Row&&(r.flexShrink=0)):t.type==="fixed"&&t.value>=0&&(r.width=t.value,e===yo.Row&&(r.flexShrink=0)),n.type==="flex"&&n.value==Ol.FillParent?(r.height="100%",e===yo.Column&&(r.flex=1)):n.type==="flex"&&n.value==Ol.WrapContent?(r.height="fit-content",e===yo.Column&&(r.flexShrink=0)):n.type==="fixed"&&n.value>=0&&(r.height=n.value,e===yo.Column&&(r.flexShrink=0)),r}function Bhe(t,n,e){var r,i;let{width:a,height:s}=$s.view.size,{parentLayout:o}=e,u=Fhe((r=n.width)!=null?r:a,(i=n.height)!=null?i:s,o);Object.assign(t,u)}function GN(t,n=$s.box.layout,e=$s.box.align){n===yo.Row&&(t.flexDirection="row",t.alignItems=oC(e.vertical),t.justifyContent=oC(e.horizontal)),n===yo.Column&&(t.flexDirection="column",t.alignItems=oC(e.horizontal),t.justifyContent=oC(e.vertical))}function Hhe(t,n=$s.box.align.horizontal){switch(n){case LC.Left:t.textAlign="start";break;case LC.Right:t.textAlign="end";break;case LC.Center:t.textAlign="center";break;default:t.textAlign="start";break}}function r6(t,n){let{contentMode:e=sy.AspectFit}=n||{};if(e)switch(e){case sy.AspectFill:t.objectFit="cover";break;case sy.AspectFit:t.objectFit="contain";break;case sy.ScalesToFill:t.objectFit="fill";break}}function i6(t,n){var e,r,i,a;let s=n?.metaData;!(s!=null&&s.pixelHeight)||!(s!=null&&s.pixelWidth)||((e=n?.width)==null?void 0:e.type)==="fixed"||((r=n?.height)==null?void 0:r.type)==="fixed"||(t.aspectRatio=`${(i=n?.metaData)==null?void 0:i.pixelWidth} / ${(a=n?.metaData)==null?void 0:a.pixelHeight}`)}function a6(t){return{WebkitLineClamp:t,WebkitBoxOrient:"vertical",display:"-webkit-box",overflow:"hidden",overflowWrap:"anywhere",flex:1}}function s6(t,n,e){let{textStyle:r,width:i}=n,{size:a,color:s,weight:o}=r||{};if(a&&(t.fontSize=a),s&&(t.color=s),o&&(t.fontWeight=o),i?.type==="flex"&&i?.value==Ol.WrapContent&&(t.width="fit-content",t.maxWidth="100%"),n.type===sT.Text){let{siblings:u,elemIdx:c}=e;u!=null&&u.length>=2&&u.every(Uhe)&&(t.flexShrink=u.length-1===c?1:0)}}var V8=L8({mapBoxProps(t,n){let e=Uv();return xv(e,t,n),GN(e,t.layout,t.align),e},mapTextProps(t,n){var e;let r=Uv({whiteSpace:"pre-line",wordBreak:"break-word"});return xv(r,t,n),s6(r,t,n),GN(r,yo.Row,t.align),Hhe(r,(e=t.align)==null?void 0:e.horizontal),r},mapImageProps(t,n){let e=Uv();return xv(e,t,n),r6(e,t.imageStyle),i6(e,t),e},mapTextButtonProps(t,n){let e=Uv({whiteSpace:"pre-line",alignItems:"center",justifyContent:"center"});return xv(e,t,n),s6(e,t,n),e},mapImageButtonProps(t,n){let e=Uv();return xv(e,t,n),r6(e,t.imageStyle),i6(e,t),e},mapCarouselProps(t,n){let e=Uv();return xv(e,t,n),e},mapCascadeProps(t,n){var e,r;let i=Uv();return xv(i,t,n),GN(i,$s.cascade.layout),i.gap=(r=(e=t.cascadeStyle)==null?void 0:e.spacing)!=null?r:$s.cascade.style.spacing,i}}),Ghe=24,o6=5;function Vhe({spacing:t,childrenLength:n,paddingInlineStart:e,paddingInlineEnd:r}){let i=R.useRef(null),a=R.useRef(Array.from({length:n},()=>E.createRef())),s=R.useRef(!1),o=R.useRef(!1),u=R.useRef(null),c=R.useRef({sx:null,sy:null,offset:0,translateX:0,currentIndex:0,didMove:!1}),[h,p]=R.useState(()=>a.current.map(()=>0)),[m,_]=R.useState(!1),b=m?-1:1,C=R.useMemo(()=>{let F=e;return h.map((Q,$)=>{let q=$>0?t:0,X=F-q,V=X-Q;return F=V,{start:X,end:V}})},[h,t,e]),N=R.useMemo(()=>{let F=h.reduce(($,q)=>$+q,0),Q=t*(n-1);return F+Q},[h,t,n]);R.useLayoutEffect(()=>{if(i.current){let F=getComputedStyle(i.current).direction;_(F==="rtl")}},[]),R.useLayoutEffect(()=>{p(a.current.map(F=>{var Q,$;return($=(Q=F.current)==null?void 0:Q.clientWidth)!=null?$:0}))},[n]),R.useLayoutEffect(()=>{C.length>0&&(c.current.translateX=C[0].start,P())},[C]);let S=()=>{i.current&&(s.current=!0,i.current.style.cursor="grabbing",i.current.style.transition="none",u.current=requestAnimationFrame(P))},M=()=>{i.current&&(s.current=!1,i.current.style.cursor="grab",i.current.style.transition="transform 0.5s ease",u.current&&(cancelAnimationFrame(u.current),u.current=null))},w=()=>{let{offset:F,currentIndex:Q}=c.current,$=Math.abs(F)>=Ghe,q=F<0&&Q<n-1,X=F>0&&Q>0,V=Q;$&&q?V=Q+1:$&&X&&(V=Q-1);function ee(z){var ie,se;let he=(se=(ie=i.current)==null?void 0:ie.clientWidth)!=null?se:0,pe=e,K=Math.min(0,he-N)-r;return Math.min(pe,Math.max(z,K))}c.current.currentIndex=V,c.current.translateX=ee(C[V].start),c.current.offset=0},U=()=>{o.current=!0},L=()=>{o.current=!1},P=()=>{if(i.current){let F=(c.current.translateX+c.current.offset)*b;i.current.style.transform=`translateX(${F}px)`}u.current&&(u.current=requestAnimationFrame(P))},x=()=>{i.current&&(i.current.style.touchAction="pan-x")},H=()=>{i.current&&(i.current.style.touchAction="pan-y")};return{carouselRef:i,childrenRefs:a,handlers:{onMouseDown:F=>{S(),L(),c.current.sx=F.clientX,c.current.sy=F.clientY,c.current.offset=0,c.current.didMove=!1,u.current=requestAnimationFrame(P)},onMouseMove:F=>{!s.current||c.current.sx===null||(c.current.offset=(F.clientX-c.current.sx)*b,Math.abs(c.current.offset)>o6&&(c.current.didMove=!0))},onMouseUp:F=>{s.current&&(L(),w(),M(),c.current.didMove&&(F.preventDefault(),F.stopPropagation()))},onMouseLeave:F=>{s.current&&(L(),w(),M(),c.current.didMove&&(F.preventDefault(),F.stopPropagation()))},onTouchStart:F=>{L(),M();let Q=F.touches[0];c.current.sx=Q.clientX,c.current.sy=Q.clientY,c.current.offset=0,c.current.didMove=!1,u.current=requestAnimationFrame(P)},onTouchMove:F=>{if(c.current.sx===null||c.current.sy===null||o.current)return;let{clientX:Q,clientY:$}=F.touches[0],{sx:q,sy:X}=c.current;if(s.current){c.current.offset=(Q-q)*b,Math.abs(c.current.offset)>o6&&(c.current.didMove=!0);return}Math.abs($-X)>Math.abs(Q-q)?U():(c.current.offset=(Q-q)*b,x(),S())},onTouchEnd:F=>{H(),L(),w(),M(),c.current.didMove&&(F.preventDefault(),F.stopPropagation())},onClickCapture:F=>{c.current.didMove&&(F.preventDefault(),F.stopPropagation())}}}}var zhe=t=>{var n=t,{children:e,style:r,spacing:i=$s.carousel.style.spacing,maxChildWidth:a=$s.carousel.style.maxChildWidth,inlineStyle:s}=n,o=Cp(n,["children","style","spacing","maxChildWidth","inlineStyle"]);let u=r??{},{paddingInlineStart:c=0,paddingInlineEnd:h=0}=u,p=Cp(u,["paddingInlineStart","paddingInlineEnd"]),{carouselRef:m,childrenRefs:_,handlers:b}=Vhe({spacing:i,childrenLength:e.length,paddingInlineStart:Number(c),paddingInlineEnd:Number(h)});return E.createElement("div",Mi(bp(Mi({},b),{ref:m,style:Mi(bp(Mi({},p),{gap:i,width:"100%",overflow:"visible"}),s)}),o),e.map((C,N)=>E.createElement(jhe,{ref:_.current[N],key:N,maxChildWidth:a},C)))},jhe=E.forwardRef(function({maxChildWidth:t,children:n},e){let r=qhe(n.props,t)?t:"fit-content";return E.createElement("div",{ref:e,style:{maxWidth:r,width:"100%",flexShrink:0,overflow:"hidden",userSelect:"none"}},n)});function qhe(t,n){return!!t.templateItems.find(e=>{var r;let i=(r=e.width)!=null?r:$s.view.size.width,a=i.type==="flex"&&i.value===Ol.FillParent,s=i.type==="fixed"&&i.value>=n;return a||s})}var $he=t=>{let{imageSize:n,canvasRef:e,canvasProps:r}=Khe(t);return E.createElement("canvas",bp(Mi({},r),{ref:e,width:n?.width,height:n?.height,onError:t.onError}))},Khe=t=>{var n=t,{metaData:e,tintColor:r}=n,i=Cp(n,["metaData","tintColor"]);let a=R.useRef(null),[s,o]=R.useState(),u=R.useMemo(()=>e!=null&&e.pixelHeight&&e!=null&&e.pixelWidth?{width:e.pixelWidth,height:e.pixelHeight}:s,[s,e?.pixelHeight,e?.pixelWidth]);return R.useEffect(()=>{if(u==null&&a.current){a.current.style.width="100%",a.current.style.height="100%";let c=a.current.getBoundingClientRect();o(c)}},[u]),R.useEffect(()=>{if(i.src){let c=new Image,h=()=>{if(a.current&&r&&u){let m=a.current.getContext("2d");if(m){let{width:_,height:b}=u;m.clearRect(0,0,_,b),m.beginPath(),m.globalCompositeOperation="source-over",m.fillStyle="#000",m.drawImage(c,0,0,_,b),m.globalCompositeOperation="source-atop",m.fillStyle=r,m.fillRect(0,0,_,b)}}},p=m=>{var _;(_=i.onError)==null||_.call(i,m)};return c.addEventListener("load",h),c.addEventListener("error",p),c.src=i.src,()=>{c.removeEventListener("load",h),c.removeEventListener("error",p)}}},[i.src,u,r]),{canvasRef:a,canvasProps:i,imageSize:u}},Yhe=t=>E.createElement("img",bp(Mi({},t),{onError:t.onError,draggable:!1,referrerPolicy:"no-referrer"})),Whe=t=>E.createElement("div",{style:bp(Mi({},t.style),{backgroundColor:"transparent"})}),l6=t=>{var n=t,{tintColor:e,metaData:r}=n,i=Cp(n,["tintColor","metaData"]);let{hasError:a,onError:s}=Qhe(i.src);return i.onError&&console.warn("`onError` is intercepted and not executed in the ReactMessageTemplateImage."),a?E.createElement(Whe,Mi({},i)):e&&!xhe(i.src)?E.createElement($he,bp(Mi({},i),{onError:s,tintColor:e,metaData:r})):E.createElement(Yhe,bp(Mi({},i),{onError:s}))},Qhe=t=>{let[n,e]=R.useState(!1);return R.useEffect(()=>e(!1),[t]),{hasError:n,onError:R.useCallback(()=>e(!0),[])}},z8=E.createContext(null),Xhe=({handleWebAction:t,handleCustomAction:n,handleUIKitAction:e,handleInternalAction:r,highlight:i,children:a})=>E.createElement(z8.Provider,{value:{handleWebAction:t,handleCustomAction:n,handleUIKitAction:e,handleInternalAction:r,highlight:i}},a),j8=()=>{let t=E.useContext(z8);if(!t)throw new Error("useMessageContext must be used within a MessageProvider");return t};function Lv(t){let{highlight:n}=j8();return{className:n!=null&&n.getContainerClassName?n.getContainerClassName(t):void 0,style:n!=null&&n.getContainerInlineStyle?n.getContainerInlineStyle(t):void 0,renderText:n!=null&&n.renderText?n.renderText:e=>e}}function q8(t){let n=R.useRef(t);return R.useEffect(()=>{n.current=t},[t]),R.useCallback((...e)=>n.current(...e),[n])}function Zhe(t,n){let e=q8(t),r=R.useRef(u6);return R.useCallback(i=>{if(r.current(),r.current=u6,i!=null){let a=t(i);typeof a=="function"&&(r.current=a)}},[e,...n])}function u6(){}function Jhe(t){let n=q8(t);return Zhe(e=>{let r=new ResizeObserver(i=>{i[0]!=null&&n(i[0])});return r.observe(e),()=>{r.unobserve(e)}},[n])}function efe(){let[t,n]=R.useState(-1),[e,r]=R.useState(-1),[i,a]=R.useState(-1),[s,o]=R.useState(-1),[u,c]=R.useState(-1),[h,p]=R.useState(-1);return{ref:Jhe(m=>{let{width:_,height:b}=m.contentRect,C=m.target,{width:N,height:S}=C.getBoundingClientRect();n(N),r(S),a(_),o(b),c(N-_),p(S-b)}),width:t,height:e,contentWidth:i,contentHeight:s,paddingWidth:u,paddingHeight:h}}function lC({width:t=$s.view.size.width,height:n=$s.view.size.height,parentLayout:e=$s.box.layout,option:r}){return e===yo.Row?t6({size:t,option:r}):t6({size:n,option:r})}function tfe(t){let{style:n,props:e}=t,r=efe(),{ref:i}=r,a=Cp(r,["ref"]),{updateSize:s,sizes:o}=The(),{id:u,siblings:c,parentLayout:h}=e,{width:p,height:m,paddingWidth:_,paddingHeight:b,contentWidth:C,contentHeight:N}=a;return R.useEffect(()=>{s({id:e.id,width:p,height:m,paddingWidth:_,paddingHeight:b,contentWidth:C,contentHeight:N})},[e.id,p,m,_,b,C,N,s]),{recalculatedStyle:R.useMemo(()=>{let S=(M=0,w)=>{var U,L,P,x;return h===yo.Row?M+((L=(U=o[w.id])==null?void 0:U.contentWidth)!=null?L:0):M+((x=(P=o[w.id])==null?void 0:P.contentHeight)!=null?x:0)};if(lC({width:e.width,height:e.height,parentLayout:h,option:"fill"})){let M=c.filter(({width:L,height:P})=>!lC({width:L,height:P,parentLayout:h,option:"fill"})).reduce(S,0),w=c.filter(({width:L,height:P})=>lC({width:L,height:P,parentLayout:h,option:"fill"})).length,U=h===yo.Row?{maxWidth:`calc((100% - ${M}px) / ${w})`}:{maxHeight:`calc((100% - ${M}px) / ${w})`};return Mi(Mi(Mi({},n),U),p==0&&{height:0})}else{let M=c.findIndex(U=>U.id===u),w=c.slice(0,M).filter(({width:U,height:L})=>lC({width:U,height:L,parentLayout:h,option:"wrap"})).reduce(S,0);return Mi(Mi(Mi({},n),p===0&&{height:0}),h===yo.Row?{maxWidth:`calc(100% - ${w}px)`}:{maxHeight:`calc(100% - ${w}px)`})}},[e.width,e.height,h,o,c,n,p,u]),elemRef:i}}var ng=({children:t,props:n,className:e,style:r,inlineStyle:i})=>{var a;let s=r??{},{paddingBlockStart:o,paddingBlockEnd:u,paddingInlineStart:c,paddingInlineEnd:h}=s,p=Cp(s,["paddingBlockStart","paddingBlockEnd","paddingInlineStart","paddingInlineEnd"]),{recalculatedStyle:m,elemRef:_}=tfe({style:p,props:n}),{handleWebAction:b,handleCustomAction:C,handleUIKitAction:N,handleInternalAction:S}=j8(),M=(a=n.viewStyle)!=null&&a.borderWidth?"sb-message-template__border":"",w=n.action?"sb-message-template__action":"",U=q=>{var X,V,ee,z,ie,se,he,pe;((X=n.action)==null?void 0:X.type)==="web"?b?b(q,n.action):(ee=window?.open(n6((V=n?.action)==null?void 0:V.data),"_blank","noopener noreferrer"))==null||ee.focus():((z=n.action)==null?void 0:z.type)==="custom"?C?C(q,n.action):(se=window?.open(n6((ie=n?.action)==null?void 0:ie.data),"_blank","noopener noreferrer"))==null||se.focus():((he=n.action)==null?void 0:he.type)==="uikit"?N?.(q,n.action):((pe=n.action)==null?void 0:pe.type)==="internal"&&S?.(q,n.action)};if(n.type===sT.TextButton)return E.createElement("button",{className:od(e,M,w),"data-sb-template-id":n.elementId,style:Mi(Mi({},r),i),onClick:U},t);let L=m,{display:P,flexDirection:x,justifyContent:H,alignItems:F,objectFit:Q}=L,$=Cp(L,["display","flexDirection","justifyContent","alignItems","objectFit"]);return E.createElement("div",{ref:_,className:od(e,M,w),"data-sb-template-id":n.elementId,style:Mi(Mi({},$),i),onClick:U},E.createElement("div",{style:{display:P,flexDirection:x,justifyContent:H,alignItems:F,objectFit:Q,width:"100%",height:"100%",paddingBlockStart:o,paddingBlockEnd:u,paddingInlineStart:c,paddingInlineEnd:h,gap:r?.gap}},t))},$8=k8({views:{box(t){let n=Lv(t.rawProperties);return E.createElement(ng,{className:od("sb-message-template__box",n.className),inlineStyle:n.style,elementId:t.elementId,style:t.parsedProperties,props:t},t.children)},text(t){let n=Lv(t.rawProperties);return E.createElement(ng,{className:od("sb-message-template__text",n.className),inlineStyle:n.style,elementId:t.elementId,style:t.parsedProperties,props:t},c6(t,n.renderText))},image(t){var n;let e=Lv(t.rawProperties);return E.createElement(ng,{className:od("sb-message-template__image-container",e.className),inlineStyle:e.style,elementId:t.elementId,style:t.parsedProperties,props:t},E.createElement(l6,{className:"sb-message-template__image",alt:"image",src:t.imageUrl,style:{width:"100%",height:"100%",aspectRatio:"inherit",objectFit:"inherit"},tintColor:(n=t.imageStyle)==null?void 0:n.tintColor,metaData:t.metaData}))},textButton(t){let n=Lv(t.rawProperties);return E.createElement(ng,{className:od("sb-message-template__text-button",n.className),inlineStyle:n.style,elementId:t.elementId,style:t.parsedProperties,props:t},c6(Mi({maxTextLines:$s.textButton.maxTextLines},t),n.renderText))},imageButton(t){var n;let e=Lv(t.rawProperties);return E.createElement(ng,{className:od("sb-message-template__image-container","sb-message-template__image-button",e.className),inlineStyle:e.style,elementId:t.elementId,style:t.parsedProperties,props:t},E.createElement(l6,{className:"sb-message-template__image",alt:"image-button",src:t.imageUrl,style:{width:"100%",height:"100%",aspectRatio:"inherit",objectFit:"inherit"},tintColor:(n=t.imageStyle)==null?void 0:n.tintColor,metaData:t.metaData}))},carouselView(t){var n,e;let r=Lv(t.rawProperties);return E.createElement(zhe,{className:od("sb-message-template__carousel",r.className),inlineStyle:r.style,maxChildWidth:(n=t.carouselStyle)==null?void 0:n.maxChildWidth,spacing:(e=t.carouselStyle)==null?void 0:e.spacing,style:t.parsedProperties},t.children)},cascadeView(t){let n=Lv(t.rawProperties);return E.createElement(ng,{className:od("sb-message-template__cascade",n.className),inlineStyle:n.style,elementId:t.elementId,style:t.parsedProperties,props:t},t.children)}}});function nfe(t,n){return t.split(`
`).map((e,r)=>E.createElement(E.Fragment,{key:r},n(e),E.createElement("br",null)))}function c6(t,n){let{text:e,maxTextLines:r}=t,i=rfe(t),a=typeof r=="number"&&r>0,s=nfe(e,n);if(a||i){let o=Mi(Mi({},(a||i)&&{maxWidth:"100%"}),i&&{maxHeight:"100%",overflow:"hidden"});return E.createElement("div",{style:o},a?E.createElement("div",{style:a6(r)},s):s)}return a?E.createElement("div",{style:a6(r)},s):s}function rfe(t){var n,e,r,i;let a=(n=t?.height)==null?void 0:n.type,s=(e=t?.width)==null?void 0:e.type,o=a==="fixed"||s==="fixed",u=a==="flex"&&((r=t?.height)==null?void 0:r.value)===Ol.FillParent||s==="flex"&&((i=t?.width)==null?void 0:i.value)===Ol.FillParent;return o||u}B8({renderer:$8,parser:V8,Container:({children:t,className:n})=>E.createElement("div",{className:`sb-message-template__parent ${n}`,style:{display:"flex",flexDirection:"column",maxWidth:400,marginBlockEnd:24}},t)});var ife=B8({parser:V8,renderer:$8,Container:function(t){var n=t.children,e=t.className;return E.createElement("div",{className:["sb-message-template__parent ".concat(e),"sendbird-message-template__root"].join(" ")},n)}}).MessageTemplate;function afe(t){var n=t.templateItems,e=t.templateVersion;return E.createElement(ife,{templateItems:n,templateVersion:e})}function d6(t){var n=t.className,e=t.message,r=t.isByMe,i=R.useContext(gi).stringSet,a=e.message;return E.createElement("div",{className:Qs([n??"",r?"outgoing":"incoming","sendbird-template-message-item-body__fallback_message"])},a?E.createElement(E.Fragment,null,E.createElement($e,{type:Ge.BODY_1,color:De.ONCONTENT_INVERSE_1},a)):E.createElement(E.Fragment,null,E.createElement($e,{className:"sendbird-template-message-item-body__fallback_message__header",type:Ge.BODY_1,color:De.ONCONTENT_INVERSE_1},i.UNKNOWN__TEMPLATE_ERROR),E.createElement($e,{className:"sendbird-template-message-item-body__fallback_message__description",type:Ge.BODY_1,color:De.ONCONTENT_INVERSE_3},i.UNKNOWN__CANNOT_READ_TEMPLATE)))}var uC="40px";function sfe(t){var n=t.className,e=t.isByMe;return E.createElement("div",{className:Hn(n,e?"outgoing":"incoming","sendbird-template-loading-message-item-body")},E.createElement(gf,{className:"sendbird-message-status__icon",testID:"sendbird-message-status-icon",width:uC,height:uC},E.createElement(lt,{type:qe.SPINNER,fillColor:rt.CONTENT_INVERSE_3,width:uC,height:uC})))}var ofe=function(t){var n=t.message,e=t.templateVersion,r=t.templateItems;return E.createElement(Xhe,{message:n},E.createElement(afe,{templateVersion:e,templateItems:r}))},K8=function(t){var n={},e={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var i=t[r];if(typeof i=="object"&&i!==null){var a=K8(i),s=a[0],o=a[1];n[r]=s,e[r]=o}else if(typeof i=="string"){var u=i.split(","),c=u[0],h=u[1];n[r]=c,e[r]=h||c}else n[r]=i,e[r]=i}return[n,e]};function lfe(t){var n=t.colorVariables,e=t.theme,r=K8(n),i=r[0],a=r[1];return e==="light"?i:a}var ufe=(function(t){Dk(n,t);function n(e){var r=t.call(this,e)||this;return r.state={hasError:!1},r}return n.getDerivedStateFromError=function(){return{hasError:!0}},n.prototype.componentDidCatch=function(e,r){var i;(i=this.props.logger)===null||i===void 0||i.error("Error caught by ErrorBoundary: ",e,r)},n.prototype.render=function(){return this.state.hasError?this.props.fallbackMessage:this.props.children},n})(R.Component),Y8=function(t,n,e){e===void 0&&(e="");for(var r=0,i=Object.entries(t);r<i.length;r++){var a=i[r],s=a[0],o=a[1],u=e?"".concat(e,".").concat(s):s;o&&typeof o=="object"?Y8(o,n,u):n[u]=o}};function cfe(t){var n={};return Y8(t,n),n}var dfe=500,h6=function(t){var n=t.template,e=t.templateData,r=e===void 0?{}:e,i=t.colorVariables,a=t.theme,s={};i&&a&&(s=lfe({colorVariables:i,theme:a}));var o=J(J({},r),s),u=cfe(o),c=n;return Object.entries(u).forEach(function(h){var p=h[0],m=h[1],_="\\{".concat(p,"\\}"),b=new RegExp(_,"g");c=c.replace(b,m)}),c};function hfe(t){var n,e=t.className,r=e===void 0?"":e,i=t.message,a=t.isByMe,s=a===void 0?!1:a,o=t.theme,u=o===void 0?"light":o,c=(n=i.extendedMessagePayload)===null||n===void 0?void 0:n[SE],h=function(){return E.createElement(d6,{className:r,message:i,isByMe:s})};if(!c?.key)return h();var p=c.key,m=Zn().state;if(!m)return h();var _=m.config.logger,b=m.utils,C=b.getCachedTemplate,N=b.updateMessageTemplatesInfo,S=m.stores.appInfoStore.waitingTemplateKeysMap,M=Object.entries(S).map(function(q){var X=q[0],V=q[1];return[X,V.requestedAt,V.erroredMessageIds.join(",")].join("-")}).join("_"),w=R.useState(Q()),U=w[0],L=w[1];function P(q,X){for(var V=[],ee=0;(ee=q.indexOf(X,ee))!==-1;)V.push({start:ee,end:ee+X.length}),ee+=X.length;return V}function x(q,X,V){var ee="",z=0;return X.forEach(function(ie){var se=ie.start,he=ie.end;ee+=q.slice(z,se)+V,z=he}),ee+=q.slice(z),ee}function H(q,X,V){var ee=P(q,X);return x(q,ee,V)}function F(q){var X=h6({template:q.uiTemplate,templateData:c.variables,colorVariables:q.colorVariables,theme:u});if(c.view_variables){var V={};Object.entries(c.view_variables).forEach(function(ee){var z=ee[0],ie=ee[1],se=[];ie.forEach(function(he){var pe=he?.key;if(pe){var K=C(pe);K||_.error("TemplateMessageItemBody | simple template is expected to be cached: ",pe);var ce=h6({template:K.uiTemplate,templateData:he.variables,colorVariables:K.colorVariables,theme:u});se.push({version:K.version,body:{items:JSON.parse(ce)}}),V[z]=JSON.stringify(se)}})}),Object.entries(V).forEach(function(ee){var z=ee[0],ie=ee[1];X=H(X,'"@{'.concat(z,'}"'),ie)})}return JSON.parse(X)}function Q(){var q={filledMessageTemplateItemsList:[],isErrored:!1},X=[],V=C(p);if(V||X.push(p),c?.view_variables)try{Object.entries(c.view_variables).forEach(function(z){var ie=z[0],se=z[1];se.forEach(function(he){var pe=he?.key;pe&&!C(pe)&&!X.includes(pe)&&X.push(pe)})})}catch{return _.error("TemplateMessageItemBody | received view_variables is malformed: ",c),q.isErrored=!0,q}try{if(X.length>0)$(X);else if(V){var ee=F(V);q.filledMessageTemplateItemsList.push({version:V.version,items:ee})}}catch(z){_.error("TemplateMessageItemBody | fetching non-cached templates by given template keys failed: ",z),q.isErrored=!0}return q}R.useEffect(function(){if(!U.isErrored&&U.filledMessageTemplateItemsList.length===0){var q=Q();L(q)}},[c.key,M]);function $(q){if(q.length>0){var X=[];q.forEach(function(z){var ie=S[z];X.push([z,ie])});var V=Date.now(),ee=[];X.forEach(function(z){var ie=z[0],se=z[1];if(!se||se.erroredMessageIds.indexOf(i.messageId)===-1&&V>se.requestedAt+dfe)ee.push(ie);else if(se.erroredMessageIds.indexOf(i.messageId)>-1)throw new Error("TemplateMessageItemBody | fetching template key ".concat(ie," for messageId: ").concat(i.messageId," has failed."))}),ee.length>0&&N(ee,i.messageId,V)}}return U.isErrored?h():U.filledMessageTemplateItemsList.length===0?E.createElement(sfe,{className:r,isByMe:s}):E.createElement("div",{className:Qs([r,s?"outgoing":"incoming","sendbird-template-message-item-body"])},E.createElement(ufe,{fallbackMessage:E.createElement(d6,{className:r,message:i,isByMe:s}),logger:_},U.filledMessageTemplateItemsList.map(function(q,X){var V;return E.createElement(ofe,{key:X,message:i,templateVersion:(V=q.version)!==null&&V!==void 0?V:0,templateItems:q.items})})))}function W8(t){var n=t.text,e=t.onCancel,r=R.useContext(gi).stringSet,i=R.useRef(null),a=h3(i,{Enter:function(){return e?.()},Escape:function(){return e?.()}});return E.createElement("div",{onKeyDown:a},E.createElement(Ud,{contentClassName:"sendbird-message-feedback-modal-content__mobile",type:mi.PRIMARY,onSubmit:e,onClose:e,submitText:r.BUTTON__OK,renderHeader:function(){return E.createElement("div",{className:"sendbird-modal__header"},E.createElement($e,{type:Ge.H_1,color:De.ONBACKGROUND_1,className:"sendbird-message-feedback-modal-header"},n))},customFooter:E.createElement("div",{className:"sendbird-message-feedback-modal-footer__root_failed"},E.createElement(Tu,{onClick:e},E.createElement($e,{type:Ge.BUTTON_3,color:De.ONCONTENT_1},r.BUTTON__OK)))}))}function ffe(t){var n=t.className,e=n===void 0?"":n,r=t.isByMe,i=t.displayThreadReplies,a=t.bottom,s=t.message,o=t.channel,u=t.userId,c=t.chainBottom,h=c===void 0?!1:c,p=R.useRef(null),m=Ip(),_=m.disableUserProfile,b=m.renderUserProfile;return r||h||!AE(s)?null:E.createElement(No,{menuTrigger:function(C){var N,S;return E.createElement(ms,{className:Hn(e,i&&"use-thread-replies"),src:((S=(N=o?.members)===null||N===void 0?void 0:N.find(function(M){return M?.userId===s.sender.userId}))===null||S===void 0?void 0:S.profileUrl)||s.sender.profileUrl||"",ref:p,width:"28px",height:"28px",bottom:a,onClick:function(){_||C()}})},menuItems:function(C){return b?b({user:s.sender,close:C,currentUserId:u,avatarRef:p}):E.createElement(To,{parentRef:p,parentContainRef:p,closeDropdown:C,style:{paddingTop:"0px",paddingBottom:"0px"}},E.createElement(wp,{user:s.sender,onSuccess:C}))}})}var vfe=function(t){var n=t.children;return E.createElement($e,{className:"sendbird-form-message__input__label",type:Ge.CAPTION_2,color:De.ONBACKGROUND_2},n)},pfe=function(t){var n=t.name,e=t.required,r=t.errorMessage,i=t.isValid,a=t.values,s=t.isInvalidated,o=t.isSubmitTried,u=t.style,c=t.onFocused,h=t.onChange,p=t.placeHolder,m=t.isSubmitted,_=u.layout,b=u.options,C=b===void 0?[]:b,N=u.resultCount,S=N??{},M=S.min,w=M===void 0?1:M,U=S.max,L=U===void 0?1:U,P=Q(),x=R.useContext(gi).stringSet,H=function(){c?.(!0)},F=function(){c?.(!1)};function Q(){return m?C.map(function(q){return{state:a.includes(q)?"submittedSelected":"submittedDefault",option:q}}):C.map(function(q){return{state:a.includes(q)?"selected":"default",option:q}})}var $=function(q){if(!m){var X;w===1&&L===1?X=P[q].state==="selected"?[]:[P[q].option]:X=P.reduce(function(V,ee,z){return z===q?ee.state==="default"&&a.length<L&&V.push(ee.option):ee.state==="selected"&&V.push(ee.option),V},[]),h(X)}};return E.createElement("div",{className:"sendbird-form-message__input__root"},E.createElement(vfe,null,E.createElement("div",{className:"sendbird-form-message__input__title-container"},n," ",!e&&E.createElement("span",{className:"sendbird-form-message__input__title-optional"},"(optional)"))),E.createElement("div",{className:"sendbird-input_for_form"},(function(){switch(_){case"chip":return E.createElement("div",{className:"sendbird-form-message__input__chip-container"},P.map(function(X,V){return E.createElement("div",{className:"sendbird-form-message__input__chip ".concat(X.state),key:V,onClick:function(){return $(V)}},E.createElement("div",{className:"sendbird-form-message__input__chip-text"},X.option),m&&X.state==="submittedSelected"&&E.createElement(lt,{className:"sendbird-form-message__submitted-check-icon-chip",type:qe.DONE,fillColor:rt.SECONDARY_2,width:"20px",height:"20px"}))}));case"textarea":{var q=a.length>0?a[0]:"";return E.createElement("div",{className:"sendbird-form-message__input__container"},m?E.createElement("div",{className:"sendbird-form-message__submitted-input-box textarea"},E.createElement("div",{className:"sendbird-form-message__submitted-input-box-text"},q),i&&E.createElement("div",{className:"sendbird-form-message__submitted-check-icon-container"},E.createElement(lt,{type:qe.DONE,fillColor:rt.SECONDARY_2,width:"20px",height:"20px"})),!q&&E.createElement($e,{className:"sendbird-input__placeholder",type:Ge.BODY_1,color:De.ONBACKGROUND_3},x.FORM_ITEM_OPTIONAL_EMPTY)):E.createElement(E.Fragment,null,E.createElement("textarea",{className:Hn("sendbird-input__input",!!r&&"error","sendbird-form-message__input__textarea"),required:e,disabled:m,value:q,onFocus:H,onBlur:F,onChange:function(X){var V=X.target.value;h(V?[V]:[])}}),p&&!q&&E.createElement($e,{className:"sendbird-input__placeholder textarea",type:Ge.BODY_1,color:De.ONBACKGROUND_3},p)))}case"text":case"number":case"phone":case"email":{var q=a.length>0?a[0]:"";return E.createElement("div",{className:"sendbird-form-message__input__container"},m?E.createElement("div",{className:"sendbird-form-message__submitted-input-box"},E.createElement("div",{className:"sendbird-form-message__submitted-input-box-text"},q),i&&E.createElement("div",{className:"sendbird-form-message__submitted-check-icon-container"},E.createElement(lt,{type:qe.DONE,fillColor:rt.SECONDARY_2,width:"20px",height:"20px"})),!q&&E.createElement($e,{className:"sendbird-input__placeholder",type:Ge.BODY_1,color:De.ONBACKGROUND_3},x.FORM_ITEM_OPTIONAL_EMPTY)):E.createElement(E.Fragment,null,E.createElement("input",{type:_==="number"?"text":_,inputMode:_==="number"?"numeric":"text",className:"sendbird-input__input ".concat(r?"error":""),name:n,required:e,disabled:m,value:q,onFocus:H,onBlur:F,onChange:function(V){var ee=V.target.value;h(ee?[ee]:[])}}),p&&!q&&E.createElement($e,{className:"sendbird-input__placeholder",type:Ge.BODY_1,color:De.ONBACKGROUND_3},p)))}default:return E.createElement(E.Fragment,null)}})(),r&&(o||s)&&E.createElement($e,{className:"sendbird-form-message__error-label",type:Ge.CAPTION_3},r)))},mfe=function(t){var n=t.isByMe,e=t.text;return E.createElement("div",{className:Qs(["sendbird-unknown-message-item-body",n?"outgoing":"incoming"])},E.createElement($e,{className:"sendbird-unknown-message-item-body__description",type:Ge.BODY_1,color:n?De.ONCONTENT_3:De.ONBACKGROUND_3},e))};function gfe(t){var n=this,e=t.message,r=t.form,i=t.isByMe,a=t.logger,s=r.items,o=r.id,u=R.useContext(gi).stringSet,c=R.useState(!1),h=c[0],p=c[1],m=R.useState(!1),_=m[0],b=m[1],C=R.useState(function(){var x=[];return s.forEach(function(H){var F=H.required,Q=H.style,$=Q===void 0?{}:Q,q=$.layout,X=$.defaultOptions,V=X===void 0?[]:X;x.push({draftValues:q==="chip"?V:[],required:F,errorMessage:null,isInvalidated:!1})}),x}),N=C[0],S=C[1],M=r.isSubmitted,w=N.some(function(x){var H=x.errorMessage;return!!H}),U=N.some(function(x){var H=x.isInvalidated;return H}),L=w&&(_||U)||M,P=R.useCallback(function(){return si(n,void 0,void 0,function(){var x,H,F;return oi(this,function(Q){switch(Q.label){case 0:b(!0),Q.label=1;case 1:return Q.trys.push([1,3,,4]),x=N.some(function($){var q=$.errorMessage;return q}),x?[2]:(H=N.some(function($){return $.required&&(!$.draftValues||$.draftValues.length===0)}),H?(S(function($){return $.map(function(q){return q.required&&q.draftValues.length===0?J(J({},q),{errorMessage:u.FORM_ITEM_REQUIRED}):q})}),[2]):(N.forEach(function($,q){s[q].draftValues=$.draftValues}),[4,e.submitMessageForm()]));case 2:return Q.sent(),[3,4];case 3:return F=Q.sent(),p(!0),a?.error(F),[3,4];case 4:return[2]}})})},[N,e.messageId,e.submitMessageForm,o]);return t8(r.version)?E.createElement("div",{className:Qs(["".concat(c3," disable-hover"),"sendbird-form-message__root","incoming"])},s.map(function(x,H){var F,Q=x.name,$=x.placeholder,q=x.id,X=x.required,V=x.style,ee=N[H],z=ee.draftValues,ie=z===void 0?[]:z,se=ee.errorMessage;return E.createElement(pfe,{key:q,style:V,placeHolder:$,values:(F=x.submittedValues)!==null&&F!==void 0?F:ie,isInvalidated:N[H].isInvalidated,isSubmitTried:_,errorMessage:se,isValid:M,isSubmitted:M,name:Q,required:X,onFocused:function(he){se&&!he&&!N[H].isInvalidated?S(function(pe){var K=pe.slice(0);return K[H]=J(J({},K[H]),{isInvalidated:!0}),K}):se||S(function(pe){var K=pe.slice(0);return K[H]=J(J({},K[H]),{isInvalidated:!1}),K})},onChange:function(he){S(function(pe){var K=pe.slice(0);return K[H]=J(J({},K[H]),{draftValues:he,errorMessage:(function(){return x.isValid(he)?X&&he.length===0?u.FORM_ITEM_REQUIRED:null:u.FORM_ITEM_INVALID})()}),K})}})}),E.createElement(Tu,{className:"sendbird-form-message__submit-button",onClick:P,disabled:L,labelType:Ge.BUTTON_2,labelColor:De.ONCONTENT_1},M?"Submitted successfully":"Submit"),h&&E.createElement(W8,{text:"Submit failed.",onCancel:function(){p(!1)}})):E.createElement(mfe,{isByMe:i,text:u.FORM_VERSION_ERROR})}var _fe="sendbird-message-content__middle__message-item-body",yfe=function(t){var n,e=t.className,r=e===void 0?_fe:e,i=t.message,a=t.channel,s=t.showFileViewer,o=t.onMessageHeightChange,u=t.onBeforeDownloadFileMessage,c=t.mouseHover,h=t.isMobile,p=t.config,m=t.isReactionEnabledInChannel,_=t.isByMe,b=(n=t.customSubcomponentsProps)!==null&&n!==void 0?n:{},C=ehe({isMobile:h}),N=the(i),S=ble(),M=a?.isGroupChannel()&&p.groupChannel.enableOgtag,w=a?.isGroupChannel()&&p.groupChannel.enableFormTypeMessage,U=function(){return E.createElement(ihe,{className:r,message:i,isByMe:_,mouseHover:c,isReactionEnabled:m})};return sl(i).when(function(L){return w&&GF(L)},function(){return E.createElement(gfe,{isByMe:_,message:i,form:i.messageForm,logger:p.logger})}).when(fI,function(){var L,P,x=i.extendedMessagePayload[SE];return VF(x)?E.createElement(hfe,{className:r,message:i,isByMe:_,theme:p?.theme}):((P=(L=p.logger)===null||L===void 0?void 0:L.error)===null||P===void 0||P.call(L,"TemplateMessageItemBody: invalid type value in message.extendedMessagePayload.message_template.",x),U())}).when(function(L){return M&&AE(L)&&e3(L)},function(){var L;return E.createElement(Lde,{className:r,message:i,isByMe:_,mouseHover:c,isMentionEnabled:(L=p.groupChannel.enableMention)!==null&&L!==void 0?L:!1,isReactionEnabled:m,onMessageHeightChange:o,isMarkdownEnabled:p.groupChannel.enableMarkdownForUserMessage})}).when(mle,function(){var L;return E.createElement(Fde,{className:r,message:i,isByMe:_,mouseHover:c,isMentionEnabled:(L=p.groupChannel.enableMention)!==null&&L!==void 0?L:!1,isReactionEnabled:m,isMarkdownEnabled:p.groupChannel.enableMarkdownForUserMessage})}).when(function(L){return n3(L)===S.FILE},function(){return E.createElement(Bde,{className:r,message:i,isByMe:_,mouseHover:c,isReactionEnabled:m,onBeforeDownloadFileMessage:u})}).when(js,function(){var L;return E.createElement(Jde,J({className:r,message:i,isByMe:_,mouseHover:c,isReactionEnabled:m,threadMessageKindKey:C,statefulFileInfoList:N,onBeforeDownloadFileMessage:u},(L=b.MultipleFilesMessageItemBody)!==null&&L!==void 0?L:{}))}).when(cf,function(){var L;return E.createElement(nhe,{className:r,message:i,channelUrl:(L=a?.url)!==null&&L!==void 0?L:"",isByMe:_,isReactionEnabled:m})}).when(pf,function(){var L;return E.createElement(rhe,J({className:r,message:i,isByMe:_,mouseHover:c,isReactionEnabled:m,showFileViewer:s,style:h?{width:"100%"}:{}},(L=b.ThumbnailMessageItemBody)!==null&&L!==void 0?L:{}))}).otherwise(function(){return U()})},Efe=function(t){var n,e,r=t.channel,i=t.message;return E.createElement($e,{className:"sendbird-message-content__middle__sender-name",type:Ge.CAPTION_2,color:De.ONBACKGROUND_2},((e=(n=r?.members)===null||n===void 0?void 0:n.find(function(a){var s;return a?.userId===((s=i?.sender)===null||s===void 0?void 0:s.userId)}))===null||e===void 0?void 0:e.nickname)||Ile(i))},f6=E.forwardRef(function(t,n){var e=t.children,r=t.isSelected,i=t.onClick,a=i===void 0?function(){}:i,s=t.disabled,o=s===void 0?!1:s;return E.createElement("button",{className:["sendbird-iconbutton__feedback",r?"sendbird-iconbutton__feedback__pressed":"",o?"sendbird-iconbutton__feedback__disabled":""].join(" "),ref:n,type:"button",onClick:function(u){a?.(u)},disabled:o},E.createElement("span",{className:["sendbird-iconbutton__feedback__inner",r?"sendbird-iconbutton__feedback__inner__pressed":"",o?"sendbird-iconbutton__feedback__inner__disabled":""].join(" ")},e))});function bfe(t){var n=t.hideMenu,e=t.onEditFeedback,r=t.onRemoveFeedback,i=Un().stringSet;return E.createElement(iT,{onBackdropClick:n},E.createElement("div",{className:"sendbird-message__bottomsheet--feedback-options-menu"},E.createElement("div",{className:"sendbird-message__bottomsheet--feedback-option",onClick:function(){n(),e()}},E.createElement($e,{type:Ge.BODY_1,color:De.ONBACKGROUND_1},i.EDIT_COMMENT)),E.createElement("div",{className:"sendbird-message__bottomsheet--feedback-option",onClick:function(){n(),r()}},E.createElement($e,{type:Ge.BODY_1,color:De.ERROR},i.REMOVE_FEEDBACK))))}var Cfe=E.forwardRef(function(t,n){var e=t.name,r=t.required,i=t.disabled,a=t.value,s=t.placeHolder,o=t.autoFocus,u=o===void 0?!1:o,c=R.useState(a),h=c[0],p=c[1];return E.createElement("div",{className:"sendbird-input"},E.createElement("input",{className:"sendbird-input__input",ref:n,name:e,required:r,disabled:i,value:h,onChange:function(m){p(m.target.value)},autoFocus:u}),s&&!h&&E.createElement($e,{className:"sendbird-input__placeholder",type:Ge.BODY_1,color:De.ONBACKGROUND_3},s))});function Sfe(t){var n,e,r=t.selectedFeedback,i=t.message,a=t.onClose,s=t.onSubmit,o=t.onUpdate,u=t.onRemove,c=R.useContext(gi).stringSet,h=Ea().isMobile,p=i?.myFeedback&&r===i.myFeedback.rating,m=(n=i?.myFeedback)===null||n===void 0?void 0:n.comment,_=function(){var S,M,w;if(r){var U=(M=(S=C.current)===null||S===void 0?void 0:S.value)!==null&&M!==void 0?M:"";p?U!==((w=i.myFeedback)===null||w===void 0?void 0:w.comment)?o?.(r,U):a?.():i.myFeedback||s?.(r,U)}},b=R.useRef(),C=R.useRef(),N=h3(b,{Enter:function(){return _()},Escape:function(){return a?.()}});return E.createElement("div",{onKeyDown:N},E.createElement(Ud,{contentClassName:"sendbird-message-feedback-modal-content__mobile",type:mi.PRIMARY,onCancel:a,onSubmit:function(){_()},submitText:c.BUTTON__SUBMIT,renderHeader:function(){return E.createElement("div",{className:"sendbird-modal__header"},E.createElement($e,{type:Ge.H_1,color:De.ONBACKGROUND_1,className:"sendbird-message-feedback-modal-header"},c.FEEDBACK_MODAL_TITLE))},customFooter:E.createElement("div",{className:"sendbird-message-feedback-modal-footer__root"},!h&&i?.myFeedback&&r===i.myFeedback.rating?E.createElement(Tu,{type:mi.WARNING,onClick:u,labelType:Ge.BUTTON_3},c.BUTTON__REMOVE_FEEDBACK):E.createElement("div",null),E.createElement("div",{className:"sendbird-message-feedback-modal-footer__right-content"},E.createElement(Tu,{type:mi.SECONDARY,onClick:a},E.createElement($e,{type:Ge.BUTTON_3,color:De.ONBACKGROUND_1},c.BUTTON__CANCEL)),E.createElement(Tu,{onClick:function(){return _()}},E.createElement($e,{type:Ge.BUTTON_3,color:De.ONCONTENT_1},m?c.BUTTON__SAVE:c.BUTTON__SUBMIT))))},E.createElement("div",{className:"sendbird-message-feedback-modal-body__root"},E.createElement(Cfe,{name:"sendbird-message-feedback-modal-body__root",ref:C,value:p?(e=i.myFeedback)===null||e===void 0?void 0:e.comment:void 0,placeHolder:c.FEEDBACK_CONTENT_PLACEHOLDER,autoFocus:!0}))))}function Tfe(t,n){var e=R.useState(!1),r=e[0],i=e[1];return R.useEffect(function(){var a=Array.isArray(n)?n:[n],s=function(){var h,p=a?.map(function(m){return m?.querySelector(t)});i((h=p?.some(function(m){return!!m}))!==null&&h!==void 0?h:!1)};s();var o=function(h){h.forEach(function(p){(p.addedNodes.length||p.removedNodes.length)&&(Array.from(p.addedNodes).forEach(function(m){m.nodeType===Node.ELEMENT_NODE&&m.matches(t)&&i(!0)}),Array.from(p.removedNodes).forEach(function(m){m.nodeType===Node.ELEMENT_NODE&&m.matches(t)&&i(!1)}))})},u=new MutationObserver(o),c={childList:!0,subtree:!0};return a?.forEach(function(h){h&&u.observe(h,c)}),function(){u.disconnect()}},[t,n]),r}var SI;(function(t){t.NOT_APPLICABLE="NOT_APPLICABLE",t.NO_FEEDBACK="NO_FEEDBACK",t.SUBMITTED="SUBMITTED"})(SI||(SI={}));function Nfe(t){var n,e,r,i=t.channel,a=t.message,s=t.showFileViewer,o=t.onMessageHeightChange,u=t.onBeforeDownloadFileMessage,c=t.renderSenderProfile,h=t.renderMessageHeader,p=t.renderMessageBody,m=t.isByMe,_=t.displayThreadReplies,b=t.mouseHover,C=t.isMobile,N=t.isReactionEnabledInChannel,S=t.hoveredMenuClassName,M=t.templateType,w=t.useReplying,U=Zn().state.config,L=Un().dateLocale,P=(n=ple[M])!==null&&n!==void 0?n:"",x=c(J(J({},t),{chainBottom:!1,className:"",isByMe:m,displayThreadReplies:_})),H=h(t),F=p({message:a,channel:i,showFileViewer:s,onMessageHeightChange:o,mouseHover:b,isMobile:C,config:U,isReactionEnabledInChannel:N,isByMe:m,onBeforeDownloadFileMessage:u}),Q=E.createElement($e,{className:Hn("sendbird-message-content__middle__body-container__created-at","right",S,P),type:Ge.CAPTION_3,color:De.ONBACKGROUND_2},qs(a?.createdAt||0,"p",{locale:L})),$=(e=a.extendedMessagePayload)===null||e===void 0?void 0:e[SE],q=(r=$?.container_options)!==null&&r!==void 0?r:{},X=q.profile,V=X===void 0?!0:X,ee=q.time,z=ee===void 0?!0:ee,ie=q.nickname,se=ie===void 0?!0:ie,he=V||se;return E.createElement("div",{className:"sendbird-message-content__sendbird-ui-container-type__default__root"},!m&&he&&!w&&E.createElement("div",{className:"sendbird-message-content__sendbird-ui-container-type__default__header-container"},E.createElement("div",{className:"sendbird-message-content__sendbird-ui-container-type__default__header-container__left__profile"},V&&x),se&&H),F,!m&&z&&E.createElement("div",{className:"sendbird-message-content__sendbird-ui-container-type__default__bottom"},Q))}function Afe(t){var n=this,e,r,i,a,s,o,u,c,h,p,m,_,b=t.className,C=t.userId,N=t.channel,S=t.message,M=t.disabled,w=M===void 0?!1:M,U=t.chainTop,L=U===void 0?!1:U,P=t.chainBottom,x=P===void 0?!1:P,H=t.isReactionEnabled,F=H===void 0?!1:H,Q=t.disableQuoteMessage,$=Q===void 0?!1:Q,q=t.replyType,X=t.threadReplySelectType,V=t.nicknamesMap,ee=t.emojiContainer,z=t.scrollToMessage,ie=t.showEdit,se=t.showRemove,he=t.showFileViewer,pe=t.resendMessage,K=t.deleteMessage,ce=t.toggleReaction,me=t.setQuoteMessage,Le=t.markAsUnread,ge=t.onReplyInThread,Ee=t.onQuoteMessageClick,Ye=t.onMessageHeightChange,tt=t.onBeforeDownloadFileMessage,yt=t.filterEmojiCategoryIds,Ht=jg(t),zt=Ht.renderSenderProfile,Xt=zt===void 0?function(Ot){return E.createElement(ffe,J({},Ot))}:zt,Jt=Ht.renderMessageBody,Mt=Jt===void 0?function(Ot){return E.createElement(yfe,J({},Ot))}:Jt,jt=Ht.renderMessageHeader,en=jt===void 0?function(Ot){return E.createElement(Efe,J({},Ot))}:jt,Dt=Ht.renderMessageMenu,ln=Dt===void 0?function(Ot){return E.createElement(tde,J({},Ot))}:Dt,Yt=Ht.renderEmojiMenu,st=Yt===void 0?function(Ot){return E.createElement(ide,J({},Ot))}:Yt,ft=Ht.renderEmojiReactions,un=ft===void 0?function(Ot){return E.createElement(yde,J({},Ot))}:ft,vt=Ht.renderMobileMenuOnLongPress,_t=vt===void 0?function(Ot){return E.createElement(Mde,J({},Ot))}:vt,Pt=Un(),Et=Pt.dateLocale,Ft=Pt.stringSet,vn=Zn().state,Je=vn.config,Nn=vn.eventHandlers,An=Je.logger,Mn=(e=Nn?.reaction)===null||e===void 0?void 0:e.onPressUserProfile,Zt=R.useRef(),Gt=R.useRef(),xt=R.useRef(),Lt=Ea().isMobile,Cn=R.useState(!1),ir=Cn[0],It=Cn[1],Rt=R.useState(!1),Ct=Rt[0],nt=Rt[1],Te=Tfe("#".concat(o3(S.messageId),".").concat(s3),[document.getElementById(_S),document.getElementById(l3)]),it=R.useState(!1),St=it[0],bt=it[1],gn=R.useState(!1),ct=gn[0],En=gn[1],ur=R.useState(""),Xn=ur[0],ar=ur[1],xn=C===((r=S?.sender)===null||r===void 0?void 0:r.userId)||S?.sendingStatus==="pending"||S?.sendingStatus==="failed",Pn=xn?"outgoing":"incoming",cr=L?"chain-top":"",at=F&&!N?.isEphemeral,Nt=at?"use-reactions":"",pt=Te?"sendbird-mouse-hover":"",At=!!((q==="QUOTE_REPLY"||q==="THREAD")&&S?.parentMessageId&&S?.parentMessage&&!$),Tt=At?"use-quote":"";R.useEffect(function(){At&&Ye?.()},[At]);var We=S?.threadInfo&&S.threadInfo.replyCount>0&&q==="THREAD",tn=!xn&&!!S?.myFeedbackStatus&&S.myFeedbackStatus!==SI.NOT_APPLICABLE,Vn=!!(!((i=Je?.groupChannel)===null||i===void 0)&&i.enableFeedback)&&tn,qn=(a=S?.myFeedback)===null||a===void 0?void 0:a.rating,In=!fI(S)&&!GF(S),mt=In&&Lt,oe=In&&xn&&!Lt,Pe=In&&We,ut=In&&!xn&&!Lt,rn=function(){var Ot=2;return Gt.current&&(Ot+=4+Gt.current.clientHeight),xt.current&&(Ot+=4+xt.current.clientHeight),Ot>0?Ot+"px":""},wn=function(){En(!1)},an=function(Ot){Ot===void 0&&(Ot=!1),Lt&&Ot?bt(!0):En(!0)},_r=Ld({onLongPress:function(){mt&&It(!0)},onClick:Mr},{delay:300,shouldPreventDefault:!1});if(Jw(S))return E.createElement(Ede,{message:S});if(fI(S)){var Cr=S.extendedMessagePayload[SE];if(VF(Cr))return E.createElement(Nfe,J({},t,{renderSenderProfile:Xt,renderMessageHeader:en,renderMessageBody:Mt,isByMe:xn,displayThreadReplies:We,mouseHover:Ct,isMobile:Lt,isReactionEnabledInChannel:at,hoveredMenuClassName:pt,templateType:Cr.type,useReplying:At}))}return E.createElement("div",{className:Qs([b??"","sendbird-message-content",Pn]),onMouseOver:function(){return nt(!0)},onMouseLeave:function(){return nt(!1)}},E.createElement("div",{className:Hn("sendbird-message-content__left",Nt,Pn,Tt),"data-testid":"sendbird-message-content__left"},Xt(J(J({},t),{className:"sendbird-message-content__left__avatar",isByMe:xn,displayThreadReplies:We,bottom:rn()})),oe&&E.createElement("div",{className:Hn("sendbird-message-content-menu",Nt,pt,Pn)},ln({channel:N,message:S,isByMe:xn,replyType:q,showEdit:ie,showRemove:se,resendMessage:pe,setQuoteMessage:me,markAsUnread:Le,onReplyInThread:function(Ot){var on,kt,pn=Ot.message;X===gu.THREAD?ge?.({message:pn}):X===gu.PARENT&&z?.((kt=(on=pn.parentMessage)===null||on===void 0?void 0:on.createdAt)!==null&&kt!==void 0?kt:0,pn.parentMessageId)},deleteMessage:K}),at&&st({message:S,userId:C,emojiContainer:ee,toggleReaction:ce,filterEmojiCategoryIds:yt}))),E.createElement("div",J({className:Hn("sendbird-message-content__middle"),"data-testid":"sendbird-message-content__middle"},Lt?J({},_r):{},{ref:Zt}),!xn&&!L&&!At&&en(t),At?E.createElement("div",{className:Hn("sendbird-message-content__middle__quote-message",xn?"outgoing":"incoming",Tt),"data-testid":"sendbird-message-content__middle__quote-message"},E.createElement(Cde,{className:"sendbird-message-content__middle__quote-message__quote",message:S,userId:C,isByMe:xn,isUnavailable:((s=N?.messageOffsetTimestamp)!==null&&s!==void 0?s:0)>((u=(o=S.parentMessage)===null||o===void 0?void 0:o.createdAt)!==null&&u!==void 0?u:0),onClick:function(){var Ot;q==="THREAD"&&X===gu.THREAD&&Ee?.({message:S}),(q==="QUOTE_REPLY"||q==="THREAD"&&X===gu.PARENT)&&(!((Ot=S?.parentMessage)===null||Ot===void 0)&&Ot.createdAt)&&S?.parentMessageId&&z?.(S.parentMessage.createdAt,S.parentMessageId)}})):null,E.createElement("div",{className:Hn("sendbird-message-content__middle__body-container")},xn&&!x&&E.createElement("div",{className:Hn("sendbird-message-content__middle__body-container__created-at","left",pt)},E.createElement("div",{className:"sendbird-message-content__middle__body-container__created-at__component-container"},E.createElement(qce,{message:S,channel:N}))),Mt({message:S,channel:N,showFileViewer:he,onMessageHeightChange:Ye,mouseHover:Ct,isMobile:Lt,config:Je,isReactionEnabledInChannel:at,isByMe:xn,onBeforeDownloadFileMessage:tt}),at&&((c=S?.reactions)===null||c===void 0?void 0:c.length)>0&&E.createElement("div",{className:Hn("sendbird-message-content-reactions",js(S)?"image-grid":xn&&!pf(S)&&!e3(S)&&"primary",Ct&&"mouse-hover")},un({userId:C,message:S,channel:N,isByMe:xn,emojiContainer:ee,memberNicknamesMap:V??new Map,toggleReaction:ce,onPressUserProfile:Mn,filterEmojiCategoryIds:yt})),!xn&&!x&&E.createElement($e,{className:Hn("sendbird-message-content__middle__body-container__created-at","right",pt),type:Ge.CAPTION_3,color:De.ONBACKGROUND_2},qs(S?.createdAt||0,Ft.DATE_FORMAT__MESSAGE_CREATED_AT,{locale:Et}))),Pe&&S?.threadInfo&&E.createElement(wde,{className:"sendbird-message-content__middle__thread-replies",threadInfo:S?.threadInfo,onClick:function(){return ge?.({message:S})},ref:Gt}),Vn&&E.createElement("div",{className:"sendbird-message-content__middle__body-container__feedback-buttons-container",ref:xt},E.createElement(f6,{isSelected:((h=S?.myFeedback)===null||h===void 0?void 0:h.rating)===Vh.GOOD,onClick:function(){return si(n,void 0,void 0,function(){var Ot,on,kt;return oi(this,function(pn){switch(pn.label){case 0:if(qn)return[3,5];pn.label=1;case 1:return pn.trys.push([1,3,,4]),[4,S.submitFeedback({rating:Vh.GOOD})];case 2:return pn.sent(),an(),[3,4];case 3:return Ot=pn.sent(),(kt=(on=Je?.logger)===null||on===void 0?void 0:on.error)===null||kt===void 0||kt.call(on,"Channel: Submit feedback failed.",Ot),ar(Ft.FEEDBACK_FAILED_SUBMIT),[3,4];case 4:return[3,6];case 5:an(!0),pn.label=6;case 6:return[2]}})})},disabled:!!S?.myFeedback&&S.myFeedback.rating!==Vh.GOOD},E.createElement(lt,{type:qe.FEEDBACK_LIKE,width:"24px",height:"24px"})),E.createElement(f6,{isSelected:((p=S?.myFeedback)===null||p===void 0?void 0:p.rating)===Vh.BAD,onClick:function(){return si(n,void 0,void 0,function(){var Ot,on,kt;return oi(this,function(pn){switch(pn.label){case 0:if(qn)return[3,5];pn.label=1;case 1:return pn.trys.push([1,3,,4]),[4,S.submitFeedback({rating:Vh.BAD})];case 2:return pn.sent(),an(),[3,4];case 3:return Ot=pn.sent(),(kt=(on=Je?.logger)===null||on===void 0?void 0:on.error)===null||kt===void 0||kt.call(on,"Channel: Submit feedback failed.",Ot),ar(Ft.FEEDBACK_FAILED_SUBMIT),[3,4];case 4:return[3,6];case 5:an(!0),pn.label=6;case 6:return[2]}})})},disabled:!!S?.myFeedback&&S.myFeedback.rating!==Vh.BAD},E.createElement(lt,{type:qe.FEEDBACK_DISLIKE,width:"24px",height:"24px"})))),ut&&E.createElement("div",{className:Hn("sendbird-message-content__right",cr,Nt,Tt),"data-testid":"sendbird-message-content__right"},E.createElement("div",{className:Hn("sendbird-message-content-menu",cr,pt,Pn)},at&&st({className:"sendbird-message-content-menu__reaction-menu",message:S,userId:C,emojiContainer:ee,toggleReaction:ce,filterEmojiCategoryIds:yt}),ln({className:"sendbird-message-content-menu__normal-menu",channel:N,message:S,isByMe:xn,replyType:q,showRemove:se,resendMessage:pe,setQuoteMessage:me,markAsUnread:Le,onReplyInThread:function(Ot){var on,kt,pn=Ot.message;X===gu.THREAD?ge?.({message:pn}):X===gu.PARENT&&z?.((kt=(on=pn.parentMessage)===null||on===void 0?void 0:on.createdAt)!==null&&kt!==void 0?kt:0,pn.parentMessageId)},deleteMessage:K}))),ir&&AE(S)&&N&&_t({parentRef:Zt,channel:N,hideMenu:function(){It(!1)},message:S,isReactionEnabled:at,isByMe:xn,userId:C,replyType:q,disabled:w,showRemove:se,emojiContainer:ee,resendMessage:pe,deleteMessage:K,setQuoteMessage:me,toggleReaction:ce,showEdit:ie,markAsUnread:Le,onReplyInThread:function(Ot){var on,kt=Ot.message;X===gu.THREAD?ge?.({message:kt}):X===gu.PARENT&&z?.(((on=kt?.parentMessage)===null||on===void 0?void 0:on.createdAt)||0,kt?.parentMessageId||0)},onDownloadClick:function(Ot){return si(n,void 0,void 0,function(){var on,kt,pn,Xr;return oi(this,function(Oi){switch(Oi.label){case 0:if(!tt)return[2];Oi.label=1;case 1:return Oi.trys.push([1,3,,4]),[4,tt({message:S})];case 2:return on=Oi.sent(),on||(Ot.preventDefault(),(pn=An?.info)===null||pn===void 0||pn.call(An,"MessageContent: Not allowed to download.")),[3,4];case 3:return kt=Oi.sent(),(Xr=An?.error)===null||Xr===void 0||Xr.call(An,"MessageContent: Error occurred while determining download continuation:",kt),[3,4];case 4:return[2]}})})}}),((m=S?.myFeedback)===null||m===void 0?void 0:m.rating)&&St&&E.createElement(bfe,{hideMenu:function(){bt(!1)},onEditFeedback:function(){bt(!1),En(!0)},onRemoveFeedback:function(){return si(n,void 0,void 0,function(){var Ot,on,kt;return oi(this,function(pn){switch(pn.label){case 0:return pn.trys.push([0,3,,4]),S.myFeedback===null?[3,2]:[4,S.deleteFeedback(S.myFeedback.id)];case 1:pn.sent(),pn.label=2;case 2:return[3,4];case 3:return Ot=pn.sent(),(kt=(on=Je?.logger)===null||on===void 0?void 0:on.error)===null||kt===void 0||kt.call(on,"Channel: Delete feedback failed.",Ot),ar(Ft.FEEDBACK_FAILED_DELETE),[3,4];case 4:return bt(!1),[2]}})})}}),((_=S?.myFeedback)===null||_===void 0?void 0:_.rating)&&ct&&E.createElement(Sfe,{selectedFeedback:S.myFeedback.rating,message:S,onUpdate:function(Ot,on){return si(n,void 0,void 0,function(){var kt,pn,Xr,Oi;return oi(this,function(Di){switch(Di.label){case 0:if(S.myFeedback===null)return[3,4];kt=new cd({id:S.myFeedback.id,rating:Ot,comment:on}),Di.label=1;case 1:return Di.trys.push([1,3,,4]),[4,S.updateFeedback(kt)];case 2:return Di.sent(),[3,4];case 3:return pn=Di.sent(),(Oi=(Xr=Je?.logger)===null||Xr===void 0?void 0:Xr.error)===null||Oi===void 0||Oi.call(Xr,"Channel: Update feedback failed.",pn),ar(Ft.FEEDBACK_FAILED_SAVE),[3,4];case 4:return wn(),[2]}})})},onClose:wn,onRemove:function(){return si(n,void 0,void 0,function(){var Ot,on,kt;return oi(this,function(pn){switch(pn.label){case 0:return pn.trys.push([0,3,,4]),S.myFeedback===null?[3,2]:[4,S.deleteFeedback(S.myFeedback.id)];case 1:pn.sent(),pn.label=2;case 2:return[3,4];case 3:return Ot=pn.sent(),(kt=(on=Je?.logger)===null||on===void 0?void 0:on.error)===null||kt===void 0||kt.call(on,"Channel: Delete feedback failed.",Ot),ar(Ft.FEEDBACK_FAILED_DELETE),[3,4];case 4:return wn(),[2]}})})}}),Xn&&E.createElement(W8,{text:Xn,onCancel:function(){ar("")}}))}var Mfe=function(t){var n=t.value,e=t.onClickReply,r=t.type,i=r===void 0?"vertical":r;return E.createElement("div",{className:"sendbird-suggested-replies__option ".concat(i),id:n,onClick:function(a){return e(a,n)}},n)},Ife=function(t){var n=t.replyOptions,e=t.onSendMessage,r=t.type,i=r===void 0?"vertical":r,a=R.useState(!1),s=a[0],o=a[1],u=function(h,p){h.preventDefault(),e({message:p}),o(!0)};if(s)return null;var c=n.map(function(h,p){return E.createElement(Mfe,{key:p,value:h,onClickReply:u,type:i})});return E.createElement("div",{className:"sendbird-suggested-replies ".concat(i)},c)};function wfe(t){var n=t.member,e=t.isFocused,r=e===void 0?!1:e,i=t.parentScrollRef,a=t.onClick,s=t.onMouseOver,o=t.onMouseMove,u=t.renderUserMentionItem,c=R.useRef(null),h=R.useContext(gi).stringSet;R.useEffect(function(){r&&i?.current!=null&&c?.current!=null&&(i.current.scrollTop>=c.current.offsetTop||i.current.scrollTop+i.current.clientHeight<=c.current.offsetTop)&&c.current.scrollIntoView({block:"nearest",inline:"nearest"})},[r]);var p=R.useMemo(function(){if(u)return E.createElement("div",{className:"sendbird-mention-suggest-list__user-item",onClick:function(m){return a?.({event:m,member:n,itemRef:c})},onMouseOver:function(m){return s?.({event:m,member:n,itemRef:c})},onMouseMove:function(m){return o?.({event:m,member:n,itemRef:c})},key:n?.userId||Ll(),ref:c},u({user:n}))},[u]);return p||E.createElement("div",{className:Hn("sendbird-mention-suggest-list__user-item",r&&"focused"),onClick:function(m){return a?.({event:m,member:n,itemRef:c})},onMouseOver:function(m){return s?.({event:m,member:n,itemRef:c})},onMouseMove:function(m){return o?.({event:m,member:n,itemRef:c})},key:n?.userId||Ll(),ref:c},E.createElement(ms,{className:"sendbird-mention-suggest-list__user-item__avatar",src:n?.profileUrl,alt:"user-profile",width:"24px",height:"24px"}),E.createElement($e,{className:"sendbird-mention-suggest-list__user-item__nickname",testID:"sendbird-mention-suggest-list__user-item__nickname",type:Ge.SUBTITLE_2,color:n?.nickname?De.ONBACKGROUND_1:De.ONBACKGROUND_3},n?.nickname||h?.MENTION_NAME__NO_NAME),E.createElement($e,{className:"sendbird-mention-suggest-list__user-item__user-id",testID:"sendbird-mention-suggest-list__user-item__user-id",type:Ge.SUBTITLE_2,color:De.ONBACKGROUND_2},n?.userId))}function Rfe(t,n,e,r){return si(this,void 0,void 0,function(){return oi(this,function(i){return[2,n.members.sort(function(a,s){var o;return(o=a.nickname)===null||o===void 0?void 0:o.localeCompare(s.nickname)}).filter(function(a){var s;return((s=a.nickname)===null||s===void 0?void 0:s.toLowerCase().startsWith(r.toLowerCase()))&&a.userId!==t&&a.isActive}).slice(0,e)]})})}function Ofe(t,n,e,r){return si(this,void 0,void 0,function(){var i;return oi(this,function(a){return i=n.createMemberListQuery({limit:e+1,nicknameStartsWithFilter:r}),[2,i.next().then(function(s){return s.filter(function(o){return t!==o?.userId}).slice(0,e)})]})})}var Dfe=300,v3=function(t){var n,e,r,i=t.className,a=t.currentChannel,s=t.targetNickname,o=s===void 0?"":s,u=t.onUserItemClick,c=t.onFocusItemChange,h=t.onFetchUsers,p=t.renderUserMentionItem,m=t.inputEvent,_=t.ableAddMention,b=_===void 0?!0:_,C=t.maxMentionCount,N=C===void 0?JF:C,S=t.maxSuggestionCount,M=S===void 0?e8:S,w=Zn().state,U=w.config,L=w.stores,P=U.logger,x=((r=(e=(n=L?.sdkStore)===null||n===void 0?void 0:n.sdk)===null||e===void 0?void 0:e.currentUser)===null||r===void 0?void 0:r.userId)||"",H=R.useRef(null),F=Un().stringSet,Q=R.useState(null),$=Q[0],q=Q[1],X=R.useState(""),V=X[0],ee=X[1],z=R.useState(""),ie=z[0],se=z[1],he=R.useState(null),pe=he[0],K=he[1],ce=R.useState([]),me=ce[0],Le=ce[1];return R.useEffect(function(){clearTimeout($??void 0),q(setTimeout(function(){ee(o)},Dfe))},[o]),R.useEffect(function(){if(m?.key===Co.Enter&&pe&&me.length>0&&u?.(pe),m?.key===Co.ArrowUp){var ge=me.findIndex(function(Ee){return Ee?.userId===pe?.userId});0<ge&&(K(me[ge-1]),c?.(me[ge-1]))}if(m?.key===Co.ArrowDown){var ge=me.findIndex(function(Ye){return Ye?.userId===pe?.userId});ge<me.length-1&&(K(me[ge+1]),c?.(me[ge+1]))}},[m]),R.useEffect(function(){if(!(ie&&V.indexOf(ie)===0&&me.length===0)){if(a?.isSuper&&!a?.createMemberListQuery){P.warning("SuggestedMentionList: Creating member list query failed");return}var ge=a?.isSuper?Ofe:Rfe;ge(x,a,M,V.slice(Uy.length)).then(function(Ee){Ee.length<1?P.info("SuggestedMentionList: Fetched member list is empty"):(P.info("SuggestedMentionList: Fetching member list succeeded",{memberList:Ee}),K(Ee[0])),se(V),h?.(Ee),Le(Ee)}).catch(function(Ee){Ee&&P.error("SuggestedMentionList: Fetching member list failed",Ee)})}},[a?.url,a?.members.map(function(ge){return ge.nickname}).join(),a?.members.map(function(ge){return ge.isActive}).join(),V,M,x,me.length,ie]),!b&&me.length===0?null:E.createElement("div",{className:Hn("sendbird-mention-suggest-list",i),"data-testid":"sendbird-mention-suggest-list",key:"sendbird-mention-suggest-list",ref:H},b&&me?.map(function(ge){return E.createElement(wfe,{key:ge?.userId||Ll(),member:ge,isFocused:ge?.userId===pe?.userId,parentScrollRef:H,onClick:function(Ee){var Ye=Ee.member;u?.(Ye)},onMouseOver:function(Ee){var Ye=Ee.member;K(Ye)},renderUserMentionItem:p})}),!b&&E.createElement("div",{className:"sendbird-mention-suggest-list__notice-item"},E.createElement(lt,{className:"sendbird-mention-suggest-list__notice-item__icon",type:qe.INFO,fillColor:rt.ON_BACKGROUND_2,width:"20px",height:"20px"}),E.createElement($e,{className:"sendbird-mention-suggest-list__notice-item__text",type:Ge.SUBTITLE_2,color:De.ONBACKGROUND_2},F.MENTION_COUNT__OVER_LIMIT.replace("%d",String(N)))))},v6=function(t,n){var e=R.useState(!1),r=e[0],i=e[1];R.useEffect(function(){r?t():i(!0)},n)},Ufe=function(t){var n=t.children,e=n===void 0?void 0:n,r=t.className,i=r===void 0?"":r,a=t.onVisibilityChange,s=t.separatorColor,o=s===void 0?go.PRIMARY:s,u=R.useRef(null),c=R.useCallback(function(h){a?.(h)},[a]);return R.useLayoutEffect(function(){var h=u.current;if(!(!h||!a)){var p=new IntersectionObserver(function(m){m.forEach(function(_){var b=_.isIntersecting;c(b)})},{threshold:1,rootMargin:"0px",root:null});return p.observe(h),function(){p.disconnect()}}},[c,a]),E.createElement("div",{ref:u,className:Xe(Xe([],Array.isArray(i)?i:[i],!0),["sendbird-separator"],!1).join(" ")},E.createElement("div",{className:["sendbird-separator__left","".concat(nE(o),"--background-color")].join(" ")}),E.createElement("div",{className:"sendbird-separator__text"},e||E.createElement($e,{type:Ge.CAPTION_2,color:De.PRIMARY},"New Messages")),E.createElement("div",{className:["sendbird-separator__right","".concat(nE(o),"--background-color")].join(" ")}))},xfe=function(t){var n,e,r=t.message,i=t.children,a=t.hasSeparator,s=t.hasNewMessageSeparator,o=t.chainTop,u=t.chainBottom,c=t.handleScroll,h=t.onNewMessageSeparatorVisibilityChange,p=t.channel,m=t.emojiContainer,_=t.editInputDisabled,b=t.shouldRenderSuggestedReplies,C=t.isReactionEnabled,N=t.replyType,S=t.threadReplySelectType,M=t.nicknamesMap,w=t.scrollToMessage,U=t.toggleReaction,L=t.setQuoteMessage,P=t.onQuoteMessageClick,x=t.onReplyInThreadClick,H=t.onBeforeDownloadFileMessage,F=t.sendUserMessage,Q=t.updateUserMessage,$=t.resendMessage,q=t.deleteMessage,X=t.markAsUnread,V=t.setAnimatedMessageId,ee=t.animatedMessageId,z=t.onMessageAnimated,ie=t.usedInLegacy,se=ie===void 0?!0:ie,he=jg(t),pe=he.renderUserMentionItem,K=he.renderMessage,ce=he.renderMessageContent,me=ce===void 0?function(We){return E.createElement(Afe,J({},We))}:ce,Le=he.renderSuggestedReplies,ge=Le===void 0?function(We){return E.createElement(Ife,J({},We))}:Le,Ee=he.renderCustomSeparator,Ye=he.renderEditInput,tt=he.renderFileViewer,yt=he.renderRemoveMessageModal,Ht=he.filterEmojiCategoryIds,zt=Un(),Xt=zt.dateLocale,Jt=zt.stringSet,Mt=Zn().state,jt=Mt.config,en=jt.userId,Dt=jt.isOnline,ln=jt.userMention,Yt=jt.logger,st=jt.groupChannel,ft=ln?.maxMentionCount||JF,un=ln?.maxSuggestionCount||e8,vt=R.useState(!1),_t=vt[0],Pt=vt[1],Et=R.useState(!1),Ft=Et[0],vn=Et[1],Je=R.useState(!1),Nn=Je[0],An=Je[1],Mn=R.useState(!1),Zt=Mn[0],Gt=Mn[1],xt=R.useState(""),Lt=xt[0],Cn=xt[1],ir=R.useState([]),It=ir[0],Rt=ir[1],Ct=R.useState([]),nt=Ct[0],Te=Ct[1],it=R.useState(null),St=it[0],bt=it[1],gn=R.useState(null),ct=gn[0],En=gn[1],ur=R.useState([]),Xn=ur[0],ar=ur[1],xn=R.useRef(null),Pn=R.useRef(null),cr=Dt&&st.enableMention&&Lt.length>0&&!yS(p)&&!tE(p),at=u3({ref:xn},{logger:Yt}),Nt=at?.length<ft;R.useEffect(function(){Rt(It.filter(function(We){var tn=We.userId,Vn=nt.indexOf(tn);return Vn<0?!1:(nt.splice(Vn,1),!0)}))},[nt]),v6(function(){c?.()},[_t,(n=r?.reactions)===null||n===void 0?void 0:n.length]),v6(function(){c?.(!0)},[r?.updatedAt,r?.message]);var pt=R.useRef(b);R.useEffect(function(){pt.current!==b?c?.():pt.current=b},[b]),R.useLayoutEffect(function(){se&&c?.(!0)},[]),R.useLayoutEffect(function(){var We=[];return ee===r.messageId&&Pn?.current?(We.push(setTimeout(function(){Gt(!0)},500)),We.push(setTimeout(function(){V(null),z?.()},1600))):Gt(!1),function(){We.forEach(function(tn){return clearTimeout(tn)})}},[ee,Pn.current,r.messageId]);var At=R.useMemo(function(){var We;return(We=Ee?.({message:r}))!==null&&We!==void 0?We:null},[r,Ee]),Tt=function(){if(i)return i;if(K){var We=J(J({},t),{renderMessage:void 0});return K(We)}return E.createElement(E.Fragment,null,me({className:"sendbird-message-hoc__message-content",userId:en,scrollToMessage:w,channel:p,message:r,disabled:!Dt,chainTop:o,chainBottom:u,isReactionEnabled:C,replyType:N,threadReplySelectType:S,nicknamesMap:M,emojiContainer:m,showEdit:Pt,showRemove:vn,showFileViewer:An,resendMessage:$,deleteMessage:q,toggleReaction:U,setQuoteMessage:L,onReplyInThread:x,onQuoteMessageClick:P,onMessageHeightChange:c,onBeforeDownloadFileMessage:H,filterEmojiCategoryIds:Ht,markAsUnread:X}),b&&ge({replyOptions:$F(r),onSendMessage:F,type:st?.suggestedRepliesDirection}),Ft&&yt?.({message:r,onCancel:function(){return vn(!1)}}),Nn&&tt({message:r,onCancel:function(){return An(!1)}}))};return _t&&(!((e=r?.isUserMessage)===null||e===void 0)&&e.call(r))?Ye?.()||E.createElement(E.Fragment,null,cr&&E.createElement(v3,{currentChannel:p,targetNickname:Lt,inputEvent:St??void 0,renderUserMentionItem:pe,onUserItemClick:function(We){We&&Rt(Xe(Xe([],It,!0),[We],!1)),Cn(""),En(We),bt(null)},onFocusItemChange:function(){bt(null)},onFetchUsers:function(We){ar(We)},ableAddMention:Nt,maxMentionCount:ft,maxSuggestionCount:un}),E.createElement(IE,{isEdit:!0,channel:p,disabled:_,ref:xn,mentionSelectedUser:ct,isMentionEnabled:st.enableMention,message:r,onStartTyping:function(){var We;(We=p?.startTyping)===null||We===void 0||We.call(p)},onUpdateMessage:function(We){var tn,Vn=We.messageId,qn=We.message,In=We.mentionTemplate;Q(Vn,{message:qn,mentionedUsers:It,mentionedMessageTemplate:In}),Pt(!1),(tn=p?.endTyping)===null||tn===void 0||tn.call(p)},onCancelEdit:function(){var We;Cn(""),Rt([]),Te([]),ar([]),Pt(!1),(We=p?.endTyping)===null||We===void 0||We.call(p)},onUserMentioned:function(We){ct?.userId===We?.userId&&(En(null),Cn(""))},onMentionStringChange:function(We){Cn(We)},onMentionedUserIdsUpdated:function(We){Te(We)},onKeyDown:function(We){return cr&&Xn?.length>0&&(We.key===Co.Enter&&Nt||We.key===Co.ArrowUp||We.key===Co.ArrowDown)?(bt(We),!0):!1}})):E.createElement("div",{className:Hn("sendbird-msg-hoc sendbird-msg--scroll-ref",Zt&&"sendbird-msg-hoc__animated"),"data-testid":"sendbird-message-view",style:i||K?void 0:{marginBottom:"2px"},"data-sb-message-id":r.messageId,"data-sb-created-at":r.createdAt,ref:Pn},a&&(At||E.createElement(d8,null,E.createElement($e,{type:Ge.CAPTION_2,color:De.ONBACKGROUND_2},qs(r.createdAt,Jt.DATE_FORMAT__MESSAGE_LIST__DATE_SEPARATOR,{locale:Xt})))),s&&E.createElement(Ufe,{onVisibilityChange:h},E.createElement($e,{type:Ge.CAPTION_2,color:De.PRIMARY},"New Messages")),Tt())},Lfe=function(t){var n=t.message,e=t.onCancel,r=t.deleteMessage,i=t.onDownloadClick,a=n.sender,s=n.type,o=n.url,u=n.name,c=u===void 0?"":u,h=n.threadInfo,p=a.profileUrl,m=a.nickname,_=a.userId,b=Zn().state,C=b.config;return Lg.createPortal(E.createElement(kfe,{profileUrl:p,nickname:m,type:s,url:o,name:c,onCancel:e,onDelete:function(){return r(n).then(function(){return e()})},isByMe:C.userId===_,disableDelete:h?.replyCount?h.replyCount>0:!1,onDownloadClick:i}),document.getElementById(Ep))},kfe=function(t){var n=t.profileUrl,e=t.nickname,r=t.name,i=t.type,a=t.url,s=t.isByMe,o=t.onCancel,u=t.onDelete,c=t.disableDelete,h=t.onDownloadClick;return E.createElement(Ud,{onClose:o},E.createElement("div",{className:"sendbird-fileviewer","data-testid":"sendbird-fileviewer"},E.createElement("div",{className:"sendbird-fileviewer__header"},E.createElement("div",{className:"sendbird-fileviewer__header__left"},E.createElement("div",{className:"sendbird-fileviewer__header__left__avatar"},E.createElement(ms,{height:"32px",width:"32px",src:n})),E.createElement("div",{className:"sendbird-fileviewer__header__left__text-container"},E.createElement($e,{className:"sendbird-fileviewer__header__left__filename",type:Ge.H_2,color:De.ONBACKGROUND_1},r),E.createElement($e,{className:"sendbird-fileviewer__header__left__sender-name",type:Ge.BODY_1,color:De.ONBACKGROUND_2},e))),E.createElement("div",{className:"sendbird-fileviewer__header__right"},Jy(i)&&E.createElement("div",{className:"sendbird-fileviewer__header__right__actions"},E.createElement("a",{className:"sendbird-fileviewer__header__right__actions__download",rel:"noopener noreferrer",href:a,target:"_blank",onClick:h},E.createElement(lt,{type:qe.DOWNLOAD,fillColor:rt.ON_BACKGROUND_1,height:"24px",width:"24px"})),u&&s&&E.createElement("div",{className:"sendbird-fileviewer__header__right__actions__delete"},E.createElement(lt,{className:c?"disabled":"",type:qe.DELETE,fillColor:c?rt.GRAY:rt.ON_BACKGROUND_1,height:"24px",width:"24px",onClick:function(){c||u()}}))),E.createElement("div",{className:"sendbird-fileviewer__header__right__actions__close"},E.createElement(lt,{type:qe.CLOSE,fillColor:rt.ON_BACKGROUND_1,height:"24px",width:"24px",onClick:o})))),E.createElement("div",{className:"sendbird-fileviewer__content"},uf(i)&&E.createElement("video",{controls:!0,className:"sendbird-fileviewer__content__video"},E.createElement("source",{src:a,type:i})),xd(i)&&E.createElement("img",{src:a,alt:r,className:"sendbird-fileviewer__content__img"}),!Jy(i)&&E.createElement("div",{className:"sendbird-fileviewer__content__unsupported"},E.createElement($e,{type:Ge.H_1,color:De.ONBACKGROUND_1},Ww.UI__FILE_VIEWER__UNSUPPORT)))))};function Q8(t,n){return sl(n).when(js,function(){var e=n.fileInfoList.length;return"Do you want to delete all ".concat(e," photos?")}).otherwise(function(){return t.MODAL__DELETE_MESSAGE__TITLE})}var Pfe=function(t){var n,e=t.onSubmit,r=e===void 0?function(){}:e,i=t.onCancel,a=t.message,s=t.deleteMessage,o=R.useContext(gi).stringSet;return E.createElement(Ud,{type:mi.DANGER,disabled:!((n=a?.threadInfo)===null||n===void 0)&&n.replyCount?a.threadInfo.replyCount>0:void 0,onCancel:i,onSubmit:function(){(a.isUserMessage()||a.isFileMessage()||a.isMultipleFilesMessage())&&s(a).then(function(){r(),i()})},submitText:o.MESSAGE_MENU__DELETE,titleText:Q8(o,a)})},Ffe=function(t){var n=t.className,e=n===void 0?"":n,r=t.count,i=r===void 0?0:r,a=t.time,s=a===void 0?"":a,o=t.onClick,u=t.lastReadAt,c=R.useContext(gi),h=c.stringSet,p=c.dateLocale,m=R.useMemo(function(){var _,b;if(h.CHANNEL__MESSAGE_LIST__NOTIFICATION__ON!=="on"){var C=((b=(_=s?.toString)===null||_===void 0?void 0:_.call(s))===null||b===void 0?void 0:b.split(" "))||[];return C?.splice(-2,0,h.CHANNEL__MESSAGE_LIST__NOTIFICATION__ON),C.join(" ")}else if(u)return qs(u,h.DATE_FORMAT__MESSAGE_LIST__NOTIFICATION__UNREAD_SINCE,{locale:p})},[s,u]);return E.createElement("div",{className:Hn(i<1?"sendbird-notification--hide":"sendbird-notification",e),"data-testid":"sendbird-notification",onClick:o},E.createElement($e,{className:"sendbird-notification__text",testID:"sendbird-notification__text",color:De.ONCONTENT_1,type:Ge.CAPTION_2},"".concat(i," "),h.CHANNEL__MESSAGE_LIST__NOTIFICATION__NEW_MESSAGE," ".concat(m)),E.createElement(lt,{width:"24px",height:"24px",type:qe.CHEVRON_DOWN,fillColor:rt.CONTENT}))},Bfe=function(t){var n=t.className,e=n===void 0?"":n,r=R.useContext(gi).stringSet;return E.createElement("div",{className:Hn("sendbird-notification","sendbird-notification--frozen",e),"data-testid":"sendbird-notification"},E.createElement($e,{className:"sendbird-notification__text",testID:"sendbird-notification__text",type:Ge.CAPTION_2},r.CHANNEL_FROZEN))},Hfe=function(){return E.createElement("div",{className:"typing-dots-container"},E.createElement("span",null),E.createElement("span",null),E.createElement("span",null))},X8=2,sE=28,p6=sE+X8*2,TI=24,cC=3,Gfe=X8,Vfe=function(t){var n=t.sources,e=t.max;return E.createElement(E.Fragment,null," ",n.slice(0,e).map(function(r,i){return E.createElement(ms,{className:"sendbird-message-content__left__avatar multiple",src:r||"",key:"avatar_stack_item_".concat(r),width:"".concat(sE,"px"),height:"".concat(sE,"px"),zIndex:i,left:"".concat(i*TI-Gfe,"px")})})," ")},zfe=function(t){var n=t.typingMembers,e=n.length,r=Math.min(e,4),i=e-cC,a=(r-1)*(p6-TI),s=12;return E.createElement("div",{className:"sendbird-message-content__left incoming",style:{minWidth:r*p6-a+s}},E.createElement(Vfe,{sources:n.map(function(o){return o.profileUrl}),max:cC}),i>0?E.createElement(ms,{className:"sendbird-message-content__left__avatar multiple",width:"".concat(sE,"px"),height:"".concat(sE,"px"),zIndex:cC,left:"".concat(cC*TI,"px"),customDefaultComponent:function(o){var u=o.width,c=o.height;return E.createElement(a8,{width:u,height:c,text:"+".concat(i)})}}):null)},jfe=function(t){var n=t.typingMembers,e=t.handleScroll;return R.useLayoutEffect(function(){e?.(!0)},[]),n.length===0?null:E.createElement("div",{className:"sendbird-message-content incoming",style:{marginBottom:"2px"}},E.createElement(zfe,{typingMembers:n}),E.createElement("div",{className:"sendbird-message-content__middle"},E.createElement(Hfe,null)))},Z8=function(t,n,e,r,i,a){if(!i||i.channelType!=="group")return[dC(t,n,r),dC(n,e,r)];if(a==="THREAD"&&n?.threadInfo)return[!1,!1];var s=n?.sendingStatus||"",o=s!=="pending"&&s!=="failed";return[dC(t,n,r,i)&&o,dC(n,e,r,i)&&o]},m6=function(t,n){return qs(t.createdAt,n.DATE_FORMAT__MESSAGE_CREATED_AT)},dC=function(t,n,e,r){var i,a;return t&&n&&t.messageType&&t.messageType!=="admin"&&n.messageType&&n?.messageType!=="admin"&&"sender"in t&&"sender"in n&&t.createdAt&&n.createdAt&&t.sender.userId&&n.sender.userId?t?.sendingStatus===n?.sendingStatus&&((i=t?.sender)===null||i===void 0?void 0:i.userId)===((a=n?.sender)===null||a===void 0?void 0:a.userId)&&m6(t,e)===m6(n,e)&&(r?Qx(r,t)===Qx(r,n):!0):!1},g6=function(t){var n=t.allMessages,e=t.stringSet,r=t.isMessageGroupingEnabled,i=r===void 0?!0:r,a=t.currentIndex,s=a===void 0?0:a,o=t.currentMessage,u=t.currentChannel,c=u===void 0?null:u,h=t.replyType,p=h===void 0?"":h,m=t.firstUnreadMessageId,_=t.isUnreadMessageExistInChannel,b=n[s-1],C=n[s+1],N=i?Z8(b,o,C,e,c,p):[!1,!1],S=N[0],M=N[1],w=b?.createdAt,U=o.createdAt,L="sendingStatus"in o&&o.sendingStatus!=="succeeded",P=L?!1:!(w&&rT(U,w)),x=L||!_?.current?!1:!Jw(o)&&m===o.messageId;return{chainTop:S,chainBottom:M,hasSeparator:P,hasNewMessageSeparator:x}},J8=function(t,n,e){var r;try{var i=t.current,a=(r=i?.querySelectorAll('[data-sb-created-at="'.concat(n,'"]')))===null||r===void 0?void 0:r[0];i&&a instanceof HTMLElement&&(i.scrollTop=a.offsetTop)}catch{}finally{e?.(!0)}},Tc=function(t,n,e){t===void 0&&(t=0);var r=10,i=t;if(i>r){e?.(!0);return}try{var a=n?.current||document.querySelector(".sendbird-conversation__messages-padding");a&&(a.scrollTop=a.scrollHeight),e?.(!0)}catch{setTimeout(function(){Tc(i+1,n,e)},500*i)}},qfe=function(t){var n=t?.myRole;return n==="operator"},e7=function(t){var n=t?.isFrozen;return n&&!qfe(t)},t7=function(t){var n=t?.myMutedState;return n==="muted"},$fe=function(t){for(var n=t.emojiCategories,e=n===void 0?[]:n,r=new Map,i=0;i<e.length;i+=1)for(var a=e[i].emojis,s=0;s<a.length;s+=1){var o=a[s],u=o.key,c=o.url;r.set(u,c)}return r},Kfe=function(t){t===void 0&&(t=[]);for(var n=new Map,e=0;e<t.length;e+=1){var r=t[e],i=r.userId,a=r.nickname;n.set(i,a)}return n},Yfe=function(t,n){var e=t.map(function(r){return[r[n],r]});return Array.from(new Map(e).values())},Wfe=function(t){return Yfe(t,"messageId")},Qfe=function(t){return t.sort(function(n,e){return n.createdAt-e.createdAt})},Xfe=function(t,n){var e=t[t.length-1],r=n[0];if(e?.createdAt<r?.createdAt)return Xe(Xe([],t,!0),n,!0);var i=Xe(Xe([],t,!0),n,!0),a=Wfe(i);return Qfe(a)},_6=function(t,n){if("sendingStatus"in n&&(n.sendingStatus===Tn.SUCCEEDED||n.sendingStatus===Tn.PENDING)){var e=t.map(function(i){return"sendingStatus"in i&&i.sendingStatus?i.sendingStatus:i.isAdminMessage()?Tn.SUCCEEDED:null}).lastIndexOf(Tn.SUCCEEDED);if(e+1<t.length){var r=Xe([],t,!0);return r.splice(e+1,0,n),r}}return Xe(Xe([],t,!0),[n],!1)},yd=function(t,n,e){return Math.abs(t-n)<=e};R.forwardRef(function(t,n){var e=t.messages,r=t.renderMessage,i=t.scrollPositionRef,a=t.scrollDistanceFromBottomRef,s=t.onLoadPrevious,o=t.onLoadNext,u=t.loadThreshold,c=u===void 0?.05:u,h=t.typingIndicator,p=t.onScrollPosition,m=p===void 0?Mr:p,_=t.initDeps,b=E.useRef(!1),C=E.useRef(),N=R.useRef(0);R.useLayoutEffect(function(){n.current&&(n.current.scrollTop=n.current.scrollHeight)},_),R.useLayoutEffect(function(){n.current&&(C.current==="top"&&(n.current.scrollTop=n.current.scrollHeight-i.current),C.current==="bottom"&&(n.current.scrollTop=N.current),C.current=void 0)},[n.current,e.length]);var S=R.useCallback(function(){return si(void 0,void 0,void 0,function(){var M,w;return oi(this,function(U){switch(U.label){case 0:return n.current?(M=n.current,m(Zfe(M)),i.current=M.scrollHeight-M.scrollTop,a.current=i.current-M.clientHeight,N.current=M.scrollTop,b.current?[2]:(w=M.clientHeight*Math.min(Math.max(0,c),1),M.scrollTop<=w?(b.current=!0,C.current="top",[4,s()]):[3,2])):[2];case 1:return U.sent(),b.current=!1,[3,5];case 2:return M.scrollHeight-M.scrollTop-M.clientHeight<=w?(b.current=!0,C.current="bottom",[4,o()]):[3,4];case 3:return U.sent(),b.current=!1,[3,5];case 4:C.current=void 0,U.label=5;case 5:return[2]}})})},[e.length]);return E.createElement("div",{className:"sendbird-conversation__scroll-container"},E.createElement("div",{className:"sendbird-conversation__padding"}),E.createElement("div",{ref:n,className:"sendbird-conversation__messages-padding","data-testid":"sendbird-message-list-container",onScroll:S},e.map(function(M,w){return r({message:M,index:w})}),h))});function Zfe(t){return yd(t.scrollTop,0,mc)?"top":yd(t.scrollHeight,t.clientHeight+t.scrollTop,mc)?"bottom":"middle"}var Jfe=function(t){return E.createElement(v3,J({},t))},hC="sendbird-quote_message_input__avatar";function eve(t){var n,e=t.message;if(!gs(e)&&!js(e)||cf(e))return E.createElement(E.Fragment,null);var r=M8(e);return r||(jF(e)||pg(e)?r=NS(e):js(e)&&_le((n=e.fileInfoList)===null||n===void 0?void 0:n[0])&&(r=e.fileInfoList[0].url)),pg(e)&&r?E.createElement("div",{className:hC},E.createElement("video",{style:{width:"44px",height:"44px"},src:r})):(pf(e)||js(e))&&r?E.createElement(Ni,{className:hC,url:r,alt:TS(e),width:"44px",height:"44px",fixedSize:!0}):gle(e)?E.createElement("div",{className:hC},E.createElement(lt,{type:qe.FILE_AUDIO,fillColor:rt.ON_BACKGROUND_2,width:"24px",height:"24px"})):E.createElement("div",{className:hC},E.createElement(lt,{type:qe.FILE_DOCUMENT,fillColor:rt.ON_BACKGROUND_2,width:"24px",height:"24px"}))}function tve(t){var n=t.className,e=t.replyingMessage,r=t.onClose,i=R.useContext(gi).stringSet,a=e,s=e?.sender,o=(gs(e)||js(e))&&!cf(e);return E.createElement("div",{className:Qs(["sendbird-quote_message_input",n??""])},o&&E.createElement(eve,{message:a}),E.createElement("div",{className:"sendbird-quote_message_input__body",style:{width:"calc(100% - ".concat(o?"164px":"120px",")"),left:o?"92px":"40px"}},E.createElement($e,{className:"sendbird-quote_message_input__body__sender-name",type:Ge.CAPTION_1,color:De.ONBACKGROUND_1},"".concat(i.QUOTE_MESSAGE_INPUT__REPLY_TO," ").concat(s&&s.nickname?s.nickname:i.NO_NAME)),E.createElement($e,{className:"sendbird-quote_message_input__body__message-content",type:Ge.BODY_2,color:De.ONBACKGROUND_3},jF(a)&&!vI(a)&&i.QUOTE_MESSAGE_INPUT__FILE_TYPE_IMAGE,pg(a)&&i.QUOTE_MESSAGE_INPUT__FILE_TYPE__VIDEO,vI(a)&&i.QUOTE_MESSAGE_INPUT__FILE_TYPE_GIF,Ks(e)&&e.message,n3(e)===dc.FILE&&A8(a),js(e)&&"".concat(a.fileInfoList.length," Photos"),cf(e)&&i.VOICE_MESSAGE)),E.createElement(lt,{className:"sendbird-quote_message_input__close-button",type:qe.CLOSE,fillColor:rt.ON_BACKGROUND_2,width:"24px",height:"24px",onClick:function(){return r?.(e)}}))}var Yv={PREPARING:"PREPARING",READY_TO_RECORD:"READY_TO_RECORD",RECORDING:"RECORDING",COMPLETED:"COMPLETED"},nve=function(t){var n=t.onRecordingStarted,e=n===void 0?Mr:n,r=t.onRecordingEnded,i=r===void 0?Mr:r,a=Zn().state,s=a.config,o=s.voiceRecord,u=o?.maxRecordingTime,c=AF(),h=c.isRecordable,p=R.useState(null),m=p[0],_=p[1],b=R.useState(Yv.PREPARING),C=b[0],N=b[1];R.useEffect(function(){h&&C===Yv.PREPARING&&N(Yv.READY_TO_RECORD)},[h]);var S=R.useCallback(function(){c?.start({onRecordingStarted:function(){N(Yv.RECORDING),e(),H()},onRecordingEnded:function(Q){N(Yv.COMPLETED),i(Q),_(Q),F()}})},[e,i]),M=R.useCallback(function(){c?.stop(),F()},[c]),w=R.useCallback(function(){M(),_(null)},[c]),U=R.useState(0),L=U[0],P=U[1],x=R.useRef(null);function H(){F(),P(0),x.current=setInterval(function(){P(function(Q){var $=Q+100;return $>u&&F(),$})},100)}function F(){x.current&&(clearInterval(x.current),x.current=null)}return R.useEffect(function(){L>u&&M()},[L,u,M]),{start:S,stop:M,cancel:w,recordingStatus:C,recordingTime:L,recordedFile:m,recordingLimit:u}},qi={READY_TO_RECORD:"READY_TO_RECORD",RECORDING:"RECORDING",READY_TO_PLAY:"READY_TO_PLAY",PLAYING:"PLAYING"},rve=function(t){var n=t.inputState;switch(n){case qi.READY_TO_RECORD:return E.createElement("div",{className:"sendbird-controler-icon record-icon"});case qi.RECORDING:return E.createElement("div",{className:"sendbird-controler-icon stop-icon"});case qi.READY_TO_PLAY:return E.createElement(lt,{className:"sendbird-controler-icon play-icon",width:"20px",height:"20px",type:qe.PLAY,fillColor:rt.ON_BACKGROUND_1});case qi.PLAYING:return E.createElement("div",{className:"sendbird-controler-icon pause-icon"},E.createElement("div",{className:"sendbird-controler-icon pause-icon-inner"}),E.createElement("div",{className:"sendbird-controler-icon pause-icon-inner"}));default:return E.createElement(E.Fragment,null)}},ive=function(t){var n=t.minRecordTime,e=n===void 0?Vw:n,r=t.maximumValue,i=t.currentValue,a=i===void 0?0:i,s=t.currentType,o=t.onCancelClick,u=t.onControlClick,c=t.onSubmitClick,h=t.renderCancelButton,p=t.renderControlButton,m=t.renderSubmitButton,_=R.useState(0),b=_[0],C=_[1],N=R.useMemo(function(){return s===qi.READY_TO_RECORD},[s]),S=R.useMemo(function(){return s===qi.RECORDING},[s]),M=R.useMemo(function(){return s===qi.READY_TO_RECORD||s===qi.RECORDING?e>a:!1},[s,e,a]),w=R.useMemo(function(){return s===qi.READY_TO_PLAY||s===qi.PLAYING},[s]),U=Un().stringSet,L=function(){var H=Date.now();H-b>hN&&(o?.(),C(H))},P=function(){var H=Date.now();H-b>hN&&(u?.(s),C(H))},x=function(){var H=Date.now();H-b>hN&&(M||c?.(),C(H))};return E.createElement("div",{className:"sendbird-voice-message-input"},E.createElement("div",{className:"sendbird-voice-message-input__indicator"},E.createElement("div",{className:"sendbird-voice-message-input__indicator__progress-bar"},E.createElement(R8,{className:"sendbird-voice-message-input__indicator__progress-bar__bar",disabled:N,maxSize:r,currentSize:a})),S?E.createElement("div",{className:"sendbird-voice-message-input__indicator__on-rec"}):null,E.createElement(D8,{className:"sendbird-voice-message-input__indicator__playback-time",time:w?r-a:a,labelColor:N?De.ONBACKGROUND_4:De.ONCONTENT_1})),E.createElement("div",{className:"sendbird-voice-message-input__controler"},h?.()||E.createElement(tT,{className:"sendbird-voice-message-input__controler__cancel",onClick:L,disableUnderline:!0},E.createElement($e,{type:Ge.BUTTON_1,color:De.PRIMARY},U.BUTTON__CANCEL)),p?.(s)||E.createElement("div",{className:"sendbird-voice-message-input__controler__main",onClick:P},E.createElement(rve,{inputState:s})),m?.()||E.createElement("div",{className:Hn("sendbird-voice-message-input__controler__submit",M&&"voice-message--disabled"),onClick:x},E.createElement(lt,{width:"19px",height:"19px",type:qe.SEND,fillColor:M?rt.ON_BACKGROUND_4:rt.CONTENT}))))},ave=function(t){var n=t.imageFile,e=t.compressionRate,r=t.resizingWidth,i=t.resizingHeight,a=t.outputFormat,s=document.createElement("img");return new Promise(function(o,u){s.src=URL.createObjectURL(n),s.onerror=u,s.onload=function(){URL.revokeObjectURL(s.src);var c=document.createElement("canvas"),h=s.width,p=s.height,m=!r||r>h?h:r,_=!i||i>p?p:i,b=h/m,C=p/_;b>C?_=p/(r?b:1):C>b&&(m=h/(i?C:1)),c.width=m,c.height=_;var N=c.getContext("2d");if(!N){u(new Error("Failed to get canvas 2d context"));return}N.drawImage(s,0,0,m,_);var S=a==="preserve"?n.type:"image/".concat(a),M=S.split("/").pop(),w=n.name.lastIndexOf("."),U="".concat(w===-1?n.name:n.name.substring(0,w),".").concat(M);N.canvas.toBlob(function(L){if(L){var P=new File([L],U,{type:S});o(P)}else u(new Error("Failed to compress image"))},S,e)}})},n7=function(t){return si(void 0,[t],void 0,function(n){var e,r,i,a,s,o,u=n.files,c=n.logger,h=n.imageCompression;return oi(this,function(p){switch(p.label){case 0:return e=h.compressionRate,r=h.outputFormat,i=r===void 0?"preserve":r,a=h.resizingWidth?Ig(h.resizingWidth):void 0,s=h.resizingHeight?Ig(h.resizingHeight):void 0,o={failedIndexes:[],compressedFiles:[]},Array.isArray(u)&&u.length>0?!e||e<0||1<e?(c?.warning("utils - compressImages: The compressionRate is not acceptable.",e),[2,o]):[4,Promise.all(u.map(function(m,_){return si(void 0,void 0,void 0,function(){var b,C;return oi(this,function(N){switch(N.label){case 0:if(!(m.type==="image/jpg"||m.type==="image/png"||m.type==="image/jpeg"))return c?.warning("utils - compressImages: The fileType is not compressible.",{file:m,index:_}),o.failedIndexes.push(_),o.compressedFiles.push(m),[2];N.label=1;case 1:return N.trys.push([1,3,,4]),[4,ave({imageFile:m,compressionRate:e,resizingWidth:a,resizingHeight:s,outputFormat:i})];case 2:return b=N.sent(),o.compressedFiles.push(b),[3,4];case 3:return C=N.sent(),o.compressedFiles.push(m),o.failedIndexes.push(_),c?.warning("utils - compressImages: Failed to compress image file",{file:m,err:C}),[3,4];case 4:return[2]}})})}))]:(c?.warning("utils - compressImages: There are no files.",u),[2,o]);case 1:return p.sent(),c?.info("utils - compressImages: Finished compressing images",o),[2,o]}})})},r7=function(t){var n=t.channel,e=t.onCancelClick,r=t.onSubmitClick,i=R.useRef(Ll()).current,a=R.useState(null),s=a[0],o=a[1],u=R.useState(qi.READY_TO_RECORD),c=u[0],h=u[1],p=R.useState(!1),m=p[0],_=p[1],b=R.useState(!1),C=b[0],N=b[1],S=R.useState(!1),M=S[0],w=S[1],U=Un().stringSet,L=Zn().state,P=L.config,x=nve({onRecordingStarted:function(){h(qi.RECORDING)},onRecordingEnded:function(pe){o(pe)}}),H=x.start,F=x.stop,Q=x.cancel,$=x.recordingTime,q=x.recordingStatus,X=x.recordingLimit,V=O8({channelUrl:n?.url,key:i,audioFile:s??void 0}),ee=V.play,z=V.pause,ie=V.playbackTime,se=V.playingStatus,he=V.stop;return R.useEffect(function(){yS(n)||tE(n)?N(!0):N(!1)},[n?.myRole,n?.isFrozen,n?.myMutedState]),R.useEffect(function(){m&&s&&(r?.(s,$),_(!1),o(null))},[m,s,$]),R.useEffect(function(){s&&($<P.voiceRecord.minRecordingTime?(h(qi.READY_TO_RECORD),o(null)):se===bu.PLAYING?h(qi.PLAYING):h(qi.READY_TO_PLAY))},[s,$,se]),E.createElement("div",{className:"sendbird-voice-message-input-wrapper"},E.createElement(ive,{currentValue:q===Yv.COMPLETED?ie:$,maximumValue:q===Yv.COMPLETED?$:X,currentType:c,onCancelClick:function(){e?.(),Q(),he()},onSubmitClick:function(){C?(w(!0),h(qi.READY_TO_RECORD)):(F(),z(),_(!0))},onControlClick:function(pe){switch(pe){case qi.READY_TO_RECORD:{he(),H();break}case qi.RECORDING:{$>=P.voiceRecord.minRecordingTime&&!C?F():C?(Q(),w(!0),h(qi.READY_TO_RECORD)):(Q(),h(qi.READY_TO_RECORD));break}case qi.READY_TO_PLAY:{ee();break}case qi.PLAYING:{z();break}}}}),M&&E.createElement(Ud,{className:"sendbird-voice-message-input-wrapper-alert",titleText:tE(n)?U.MODAL__VOICE_MESSAGE_INPUT_DISABLED__TITLE_MUTED:U.MODAL__VOICE_MESSAGE_INPUT_DISABLED__TITLE_FROZEN,hideFooter:!0,isCloseOnClickOutside:!0,onClose:function(){w(!1),e?.()}},E.createElement("div",{className:"sendbird-voice-message-input-wrapper-alert__body"},E.createElement(Tu,{className:"sendbird-voice-message-input-wrapper-alert__body__ok-button",type:mi.PRIMARY,size:of.BIG,onClick:function(){w(!1),e?.()}},U.BUTTON__OK))))},sve=function(t,n){var e=t.sendFileMessage,r=t.sendMultipleFilesMessage,i=t.quoteMessage,a=n.logger,s=Un().stringSet,o=Zn().state,u=o.config,c=u.imageCompression,h=u?.uikitUploadSizeLimit,p=u?.uikitMultipleFilesMessageLimit,m=Qw().openModal;return R.useCallback(function(_){return si(void 0,void 0,void 0,function(){var b,C,N,S,M,w;return oi(this,function(U){switch(U.label){case 0:return _.length===0?(a.warning("Channel|useHandleUploadFiles: given file list is empty.",{files:_}),[2]):_.length>p?(a.info("Channel|useHandleUploadFiles: Cannot upload files more than ".concat(p)),m({modalProps:{titleText:s.FILE_UPLOAD_NOTIFICATION__COUNT_LIMIT.replace("%d","".concat(h)),hideFooter:!0},childElement:function(L){var P=L.closeModal;return E.createElement(Mg,{type:mi.PRIMARY,submitText:s.BUTTON__OK,hideCancelButton:!0,onCancel:P,onSubmit:P})}}),[2]):_.some(function(L){return L.size>h})?(a.info("Channel|useHandleUploadFiles: Cannot upload file size exceeding ".concat(h)),b=1024*1024,m({modalProps:{titleText:s.FILE_UPLOAD_NOTIFICATION__SIZE_LIMIT.replace("%d","".concat(Math.floor(h/b))),hideFooter:!0},childElement:function(L){var P=L.closeModal;return E.createElement(Mg,{type:mi.PRIMARY,submitText:s.BUTTON__OK,hideCancelButton:!0,onCancel:P,onSubmit:P})}}),[2]):[4,n7({files:_,imageCompression:c,logger:a})];case 1:return C=U.sent().compressedFiles,N=C,N.length===1?(a.info("Channel|useHandleUploadFiles: sending one file."),S=N[0],[2,e({file:S,parentMessageId:i?.messageId})]):N.length>1?(a.info("Channel|useHandleUploadFiles: sending multiple files."),M=[],w=[],N.forEach(function(L){xd(L.type)?M.push(L):w.push(L)}),[2,w.reduce(function(L,P){return L.then(function(){return e({file:P,parentMessageId:i?.messageId})})},(function(){return M.length===0?Promise.resolve():M.length===1?e({file:M[0]}):r({fileInfoList:M.map(function(L){return{file:L,fileName:L.name,fileSize:L.size,mimeType:L.type}}),parentMessageId:i?.messageId})})())]):[2]}})})},[e,r,i])},ove=E.forwardRef(function(t,n){var e,r=t.currentChannel,i=t.messages,a=t.loading,s=t.quoteMessage,o=t.setQuoteMessage,u=t.messageInputRef,c=t.sendUserMessage,h=t.sendFileMessage,p=t.sendVoiceMessage,m=t.sendMultipleFilesMessage,_=t.renderUserMentionItem,b=t.renderFileUploadIcon,C=t.renderVoiceMessageIcon,N=t.renderSendMessageIcon,S=t.acceptableMimeTypes,M=t.disabled,w=Un().stringSet,U=Ea().isMobile,L=Zn().state,P=L.stores,x=L.config,H=x.isOnline,F=x.userMention,Q=x.logger,$=x.groupChannel,q=P.sdkStore.sdk,X=F.maxMentionCount,V=F.maxSuggestionCount,ee=r?.isBroadcast,z=r?.myRole==="operator",ie=(e=t.isMultipleFilesMessageEnabled)!==null&&e!==void 0?e:x.isMultipleFilesMessageEnabled,se=$.enableMention,he=$.enableVoiceMessage,pe=R.useState(""),K=pe[0],ce=pe[1],me=R.useState([]),Le=me[0],ge=me[1],Ee=R.useState([]),Ye=Ee[0],tt=Ee[1],yt=R.useState(null),Ht=yt[0],zt=yt[1],Xt=R.useState([]),Jt=Xt[0],Mt=Xt[1],jt=R.useState(null),en=jt[0],Dt=jt[1],ln=R.useState(!1),Yt=ln[0],st=ln[1],ft=a||!r||!q||!q.isCacheEnabled&&!H||yS(r)||tE(r)||tL(r,x.groupChannel.enableSuggestedReplies)||nL(i,x.groupChannel.enableFormTypeMessage)||M,un=!ft&&se&&K.length>0&&!ee,vt=u3({ref:n||u},{logger:Q}),_t=vt?.length<X;R.useEffect(function(){ce(""),ge([]),tt([]),zt(null),Mt([]),Dt(null),st(!1)},[r?.url]),R.useEffect(function(){ge(Le.filter(function(Et){var Ft=Et.userId,vn=Ye.indexOf(Ft);return vn<0?!1:(Ye.splice(vn,1),!0)}))},[Ye]);var Pt=sve({sendFileMessage:h,sendMultipleFilesMessage:m,quoteMessage:s??void 0},{logger:Q});return ee&&!z?null:E.createElement("div",{className:Yt?"sendbird-message-input-wrapper--voice-message":"sendbird-message-input-wrapper"},un&&E.createElement(Jfe,{currentChannel:r,targetNickname:K,inputEvent:en??void 0,renderUserMentionItem:_,onUserItemClick:function(Et){Et&&ge(Xe(Xe([],Le,!0),[Et],!1)),ce(""),zt(Et),Dt(null)},onFocusItemChange:function(){Dt(null)},onFetchUsers:function(Et){Mt(Et)},ableAddMention:_t,maxMentionCount:X,maxSuggestionCount:V}),s&&E.createElement("div",{className:"sendbird-message-input-wrapper__quote-message-input"},E.createElement(tve,{replyingMessage:s,onClose:function(){o(null)}})),Yt?E.createElement(r7,{channel:r??void 0,onSubmitClick:function(Et,Ft){p({file:Et,parentMessageId:s?.messageId},Ft),o(null),st(!1)},onCancelClick:function(){st(!1)}}):E.createElement(IE,{className:"sendbird-message-input-wrapper__message-input",channel:r,channelUrl:r?.url,isMobile:U,acceptableMimeTypes:S,mentionSelectedUser:Ht,isMentionEnabled:se,isVoiceMessageEnabled:he,isSelectingMultipleFilesEnabled:ie,onVoiceMessageIconClick:function(){st(!0)},setMentionedUsers:ge,placeholder:s&&w.MESSAGE_INPUT__QUOTE_REPLY__PLACE_HOLDER||yS(r)&&w.MESSAGE_INPUT__PLACE_HOLDER__FROZEN||tE(r)&&(U?w.MESSAGE_INPUT__PLACE_HOLDER__MUTED_SHORT:w.MESSAGE_INPUT__PLACE_HOLDER__MUTED)||tL(r,x.groupChannel.enableSuggestedReplies)&&w.MESSAGE_INPUT__PLACE_HOLDER__SUGGESTED_REPLIES||nL(i,x.groupChannel.enableFormTypeMessage)&&w.MESSAGE_INPUT__PLACE_HOLDER__MESSAGE_FORM||M&&w.MESSAGE_INPUT__PLACE_HOLDER__DISABLED||void 0,ref:n||u,disabled:ft,renderFileUploadIcon:b,renderSendMessageIcon:N,renderVoiceMessageIcon:C,onStartTyping:function(){r?.startTyping()},onSendMessage:function(Et){var Ft,vn=Et.message,Je=Et.mentionTemplate;c({message:vn,mentionedUsers:Le,mentionedMessageTemplate:Je,parentMessageId:s?.messageId}),ce(""),ge([]),o(null),(Ft=r?.endTyping)===null||Ft===void 0||Ft.call(r)},onFileUpload:function(Et){Pt(Et),o(null)},onUserMentioned:function(Et){Ht?.userId===Et?.userId&&(zt(null),ce(""))},onMentionStringChange:function(Et){ce(Et)},onMentionedUserIdsUpdated:function(Et){tt(Et)},onKeyDown:function(Et){return un&&Jt?.length>0&&(Et.key===Co.Enter&&_t||Et.key===Co.ArrowUp||Et.key===Co.ArrowDown)?(Dt(Et),!0):!1}}))});E.createContext(null);E.createContext(null);function p3(t,n,e){e===void 0&&(e={leading:!0,trailing:!1});var r=R.useRef(null),i=R.useRef(null);return R.useEffect(function(){return function(){r.current&&clearTimeout(r.current)}},[]),CE(function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];if(r.current){i.current=a;return}e.leading?t.apply(void 0,a):i.current=a;var o=function(){e.trailing&&i.current?(t.apply(void 0,i.current),i.current=null,r.current=setTimeout(o,n)):r.current=null};r.current=setTimeout(o,n)})}var lve=100;function uve(t){var n=t.onReachedTop,e=t.onReachedBottom,r=t.onInBetween,i=CE(function(a){if(a?.target){var s=a.target,o=s.scrollTop,u=s.scrollHeight,c=s.clientHeight,h={distanceFromBottom:u-o-c};n&&yd(o,0,mc)?n(h):e&&yd(u,c+o,mc)?e(h):r&&r(h)}});return p3(i,lve,{trailing:!0})}var oT=30,lT=15,m3="RESET_MESSAGES",uT="FETCH_INITIAL_MESSAGES_START",cT="FETCH_INITIAL_MESSAGES_SUCCESS",oE="FETCH_INITIAL_MESSAGES_FAILURE",g3="FETCH_PREV_MESSAGES_SUCCESS",_3="FETCH_PREV_MESSAGES_FAILURE",y3="FETCH_NEXT_MESSAGES_SUCCESS",E3="FETCH_NEXT_MESSAGES_FAILURE",b3="SEND_MESSAGE_START",Sc="SEND_MESSAGE_SUCCESS",Ed="SEND_MESSAGE_FAILURE",xy="RESEND_MESSAGE_START",C3="ON_MESSAGE_RECEIVED",OE="ON_MESSAGE_UPDATED",S3="ON_MESSAGE_THREAD_INFO_UPDATED",DE="ON_MESSAGE_DELETED",T3="ON_MESSAGE_DELETED_BY_REQ_ID",Wo="SET_CURRENT_CHANNEL",N3="SET_CHANNEL_INVALID",A3="MARK_AS_READ",i7="MARK_AS_UNREAD",M3="ON_REACTION_UPDATED",I3="SET_EMOJI_CONTAINER",w3="MESSAGE_LIST_PARAMS_CHANGED",R3="ON_FILE_INFO_UPLOADED",O3="ON_TYPING_STATUS_UPDATED",cve=Object.freeze({__proto__:null,FETCH_INITIAL_MESSAGES_FAILURE:oE,FETCH_INITIAL_MESSAGES_START:uT,FETCH_INITIAL_MESSAGES_SUCCESS:cT,FETCH_NEXT_MESSAGES_FAILURE:E3,FETCH_NEXT_MESSAGES_SUCCESS:y3,FETCH_PREV_MESSAGES_FAILURE:_3,FETCH_PREV_MESSAGES_SUCCESS:g3,MARK_AS_READ:A3,MARK_AS_UNREAD:i7,MESSAGE_LIST_PARAMS_CHANGED:w3,ON_FILE_INFO_UPLOADED:R3,ON_MESSAGE_DELETED:DE,ON_MESSAGE_DELETED_BY_REQ_ID:T3,ON_MESSAGE_RECEIVED:C3,ON_MESSAGE_THREAD_INFO_UPDATED:S3,ON_MESSAGE_UPDATED:OE,ON_REACTION_UPDATED:M3,ON_TYPING_STATUS_UPDATED:O3,RESEND_MESSAGE_START:xy,RESET_MESSAGES:m3,SEND_MESSAGE_FAILURE:Ed,SEND_MESSAGE_START:b3,SEND_MESSAGE_SUCCESS:Sc,SET_CHANNEL_INVALID:N3,SET_CURRENT_CHANNEL:Wo,SET_EMOJI_CONTAINER:I3});function dve(t,n){var e=t.currentGroupChannel,r=t.initialTimeStamp,i=t.userFilledMessageListQuery,a=t.replyType,s=t.setIsScrolled,o=n.logger,u=n.scrollRef,c=n.messagesDispatcher,h=e?.url,p=R.useCallback(function(){if(o.info("Channel useInitialMessagesFetch: Setup started",e),s(!1),c({type:m3,payload:null}),e&&e?.getMessagesByTimestamp){var m={prevResultSize:oT,isInclusive:!0,includeReactions:!0,includeMetaArray:!0};r&&(m.nextResultSize=lT),(a==="QUOTE_REPLY"||a==="THREAD")&&(m.includeThreadInfo=!0,m.includeParentMessageInfo=!0,m.replyType=Yi.ONLY_REPLY_TO_CHANNEL),i&&Object.keys(i).forEach(function(_){m[_]=i[_]}),(a&&(a==="QUOTE_REPLY"||a==="THREAD")||i)&&(o.info("Channel useInitialMessagesFetch: Setup messageListParams",m),c({type:w3,payload:m})),o.info("Channel: Fetching messages",{currentGroupChannel:e,userFilledMessageListQuery:i}),c({type:uT,payload:null}),e.getMessagesByTimestamp(r||new Date().getTime(),m).then(function(_){c({type:cT,payload:{currentGroupChannel:e,messages:_}})}).catch(function(_){o.error("Channel: Fetching messages failed",_),c({type:oE,payload:{currentGroupChannel:e}})}).finally(function(){r?setTimeout(function(){J8(u,r,s)},500):setTimeout(function(){return Tc(0,u,s)},V5)})}},[h,i,r]);return R.useEffect(function(){p()},[p]),p}var y6=function(t){return t==null};function Er(t,n){if(y6(t)||y6(n))return!1;var e=t.toString(),r=n.toString();return e===r}function hve(t,n,e){e===void 0&&(e=!0);var r=R.useState(!1),i=r[0],a=r[1],s=!t;R.useEffect(function(){var u=function(){e&&a(document.hidden)};return document.addEventListener("visibilitychange",u),function(){document.removeEventListener("visibilitychange",u)}},[e,document.hidden]);var o=s&&!!n&&!i;return{shouldReconnect:o}}var E6=function(t){return t==null};function Bh(t,n){if(E6(t)||E6(n))return!1;var e=t.toString(),r=n.toString();return e===r}var dT=function(t){t===void 0&&(t=0);var n=10,e=t;if(!(e>n))try{var r=document.querySelector(".sendbird-thread-ui--scroll");r&&(r.scrollTop=r.scrollHeight)}catch{setTimeout(function(){dT(e+1)},500*e)}},a7=function(t,n){var e=t.currentChannel,r=t.onBeforeSendMultipleFilesMessage,i=t.publishingModules,a=n.logger,s=n.pubSub,o=n.scrollRef,u=R.useCallback(function(c,h){return new Promise(function(p,m){e||(a.warning("Channel: Sending MFm failed, because currentChannel is null.",{currentChannel:e}),m()),c.length<=1&&(a.warning("Channel: Sending MFM failed, because there are no multiple files.",{files:c}),m());var _={fileInfoList:c.map(function(b){return{file:b,fileName:b.name,fileSize:b.size,mimeType:b.type}})};h&&(_.isReplyToChannel=!0,_.parentMessageId=h.messageId),typeof r=="function"&&(_=r(c,h)),a.info("Channel: Start sending MFM",{messageParams:_});try{e?.sendMultipleFilesMessage(_).onFileUploaded(function(b,C,N,S){a.info("Channel: onFileUploaded during sending MFM",{requestId:b,index:C,error:S,uploadableFileInfo:N}),s.publish(wa.ON_FILE_INFO_UPLOADED,{response:{channelUrl:e.url,requestId:b,index:C,uploadableFileInfo:N,error:S},publishingModules:i})}).onPending(function(b){a.info("Channel: in progress of sending MFM",{pendingMessage:b,fileInfoList:_.fileInfoList}),s.publish(wa.SEND_MESSAGE_START,{message:b,channel:e,publishingModules:i}),setTimeout(function(){o&&DC(i)&&Tc(0,o),sue(i)&&dT(0)},sf)}).onFailed(function(b,C){a.error("Channel: Sending MFM failed.",{error:b,failedMessage:C}),s.publish(wa.SEND_MESSAGE_FAILED,{channel:e,message:C,publishingModules:i}),m(b)}).onSucceeded(function(b){a.info("Channel: Sending voice message success!",{succeededMessage:b}),s.publish(wa.SEND_FILE_MESSAGE,{channel:e,message:b,publishingModules:i}),p(b)})}catch(b){a.error("Channel: Sending MFM failed.",{error:b}),m(b)}})},[e,r,i]);return[u]},fve={initialized:!1,loading:!0,allMessages:[],localMessages:[],stringSet:JS(),currentGroupChannel:null,hasMorePrev:!1,oldestMessageTimeStamp:0,hasMoreNext:!1,latestMessageTimeStamp:0,emojiContainer:{emojiCategories:[],emojiHash:""},unreadSince:null,unreadSinceDate:null,isInvalid:!1,readStatus:null,messageListParams:null,typingMembers:[]},b6=function(t){t===void 0&&(t=[]);var n=t[0];return n&&n.createdAt||null},C6=function(t){t===void 0&&(t=[]);var n=t[t.length-1];return n&&n.createdAt||null};function rg(t){return"reqId"in t}function vve(t,n){return sl(n).with({type:m3},function(){return J(J({},t),{hasMorePrev:!1,hasMoreNext:!1,allMessages:[],localMessages:[]})}).with({type:uT},function(){return J(J({},t),{loading:!0,allMessages:t.allMessages.filter(function(e){return AE(e)?e.sendingStatus!==Tn.SUCCEEDED:!0}),localMessages:[]})}).with({type:cT},function(e){var r,i=e.payload,a=i.currentGroupChannel,s=i.messages;if(a?.url!==((r=t.currentGroupChannel)===null||r===void 0?void 0:r.url))return t;var o=b6(s),u=C6(s);return J(J({},t),{loading:!1,initialized:!0,hasMorePrev:!0,hasMoreNext:!0,oldestMessageTimeStamp:o,latestMessageTimeStamp:u,allMessages:Xe([],s,!0)})}).with({type:g3},function(e){var r,i,a,s,o=e.payload,u=o.currentGroupChannel,c=o.messages;if(u?.url!==((r=t.currentGroupChannel)===null||r===void 0?void 0:r.url))return t;var h=((i=c?.length)!==null&&i!==void 0?i:0)>=((s=(a=t?.messageListParams)===null||a===void 0?void 0:a.prevResultSize)!==null&&s!==void 0?s:oT)+1,p=b6(c),m=[],_=t.allMessages.map(function(C){var N=c.find(function(S){var M=S.messageId;return Er(M,C.messageId)});return N?(m.push(N.messageId),N.updatedAt>C.updatedAt?N:C):C}),b=m.length>0?c.filter(function(C){return!m.find(function(N){return Er(N,C.messageId)})}):c;return J(J({},t),{hasMorePrev:h,oldestMessageTimeStamp:p,allMessages:Xe(Xe([],b,!0),_,!0)})}).with({type:y3},function(e){var r,i,a,s,o=e.payload,u=o.currentGroupChannel,c=o.messages;if(u?.url!==((r=t.currentGroupChannel)===null||r===void 0?void 0:r.url))return t;var h=((i=c?.length)!==null&&i!==void 0?i:0)===((s=(a=t?.messageListParams)===null||a===void 0?void 0:a.nextResultSize)!==null&&s!==void 0?s:lT)+1,p=C6(c),m=Xfe(t.allMessages,c);return J(J({},t),{hasMoreNext:h,latestMessageTimeStamp:p,allMessages:m})}).with({type:Voe.union(oE,_3,E3)},function(e){var r,i=e.payload.currentGroupChannel;if(i?.url!==((r=t?.currentGroupChannel)===null||r===void 0?void 0:r.url))return t;var a=[oE].includes(e.type);return J(J({},t),{loading:!1,isInvalid:a,initialized:!1,allMessages:[],hasMorePrev:!1,hasMoreNext:!1,oldestMessageTimeStamp:null,latestMessageTimeStamp:null})}).with({type:b3},function(e){return J(J({},t),{localMessages:Xe(Xe([],t.localMessages,!0),[e.payload],!1)})}).with({type:Sc},function(e){var r=e.payload,i=t.allMessages.filter(function(a){return!rg(a)||a?.reqId!==r?.reqId});return J(J({},t),{allMessages:Xe(Xe([],i,!0),[r],!1),localMessages:t.localMessages.filter(function(a){return rg(a)&&a?.reqId!==r?.reqId})})}).with({type:Ed},function(e){return e.payload.failed=!0,J(J({},t),{localMessages:t.localMessages.map(function(r){return Er(rg(r)&&r.reqId,e.payload.reqId)?e.payload:r})})}).with({type:Wo},function(e){return J(J({},t),{currentGroupChannel:e.payload,isInvalid:!1})}).with({type:N3},function(){return J(J({},t),{currentGroupChannel:null,allMessages:[],localMessages:[],isInvalid:!0})}).with({type:C3},function(e){var r,i,a=e.payload,s=a.channel,o=a.message,u=s.members,c=o.sender,h=t.currentGroupChannel,p=t.stringSet,m=h?.url;if(!Er(s?.url,m)||t.allMessages.some(function(b){return b.messageId===o.messageId})||t.messageListParams&&!Xx(t.messageListParams,o))return t;if(o.isAdminMessage&&o.isAdminMessage())return J(J({},t),{allMessages:_6(t.allMessages,o)});var _=u?.find(function(b){return b?.userId===c?.userId});return(_?.profileUrl!==c?.profileUrl||_?.friendName!==c?.friendName||_?.nickname!==c?.nickname)&&(s.members=u.map(function(b){return b.userId===c.userId?c:b})),J(J({},t),{currentGroupChannel:s,unreadSince:(r=t.unreadSince)!==null&&r!==void 0?r:qs(new Date,p.DATE_FORMAT__UNREAD_SINCE),unreadSinceDate:(i=t.unreadSinceDate)!==null&&i!==void 0?i:new Date,allMessages:_6(t.allMessages,o)})}).with({type:OE},function(e){var r,i=e.payload,a=i.channel,s=i.message,o=((r=t?.currentGroupChannel)===null||r===void 0?void 0:r.url)||"";return Er(a?.url,o)?t.messageListParams&&!Xx(t.messageListParams,s)?J(J({},t),{allMessages:t.allMessages.filter(function(u){return!Er(u.messageId,s?.messageId)})}):J(J({},t),{allMessages:t.allMessages.map(function(u){return Er(u.messageId,s.messageId)?s:(Er(u.parentMessageId,s.messageId)&&(u.parentMessage=s),u)})}):t}).with({type:S3},function(e){var r,i=e.payload,a=i.channel,s=i.event,o=s.channelUrl,u=s.threadInfo,c=s.targetMessageId,h=((r=t?.currentGroupChannel)===null||r===void 0?void 0:r.url)||"";return!Er(a?.url,h)||!Er(a?.url,o)?t:J(J({},t),{allMessages:t.allMessages.map(function(p){return Er(p.messageId,c)&&(p.threadInfo=u),p})})}).with({type:xy},function(e){return J(J({},t),{localMessages:t.localMessages.map(function(r){return Er(rg(r)&&r.reqId,e.payload.reqId)?e.payload:r})})}).with({type:A3},function(e){var r,i,a;return((r=t.currentGroupChannel)===null||r===void 0?void 0:r.url)!==((a=(i=e.payload)===null||i===void 0?void 0:i.channel)===null||a===void 0?void 0:a.url)?t:J(J({},t),{unreadSince:null,unreadSinceDate:null})}).with({type:DE},function(e){return J(J({},t),{allMessages:t.allMessages.filter(function(r){return!Er(r.messageId,e.payload)})})}).with({type:T3},function(e){return J(J({},t),{localMessages:t.localMessages.filter(function(r){return!Er(rg(r)&&r.reqId,e.payload)})})}).with({type:I3},function(e){return J(J({},t),{emojiContainer:e.payload})}).with({type:M3},function(e){return J(J({},t),{allMessages:t.allMessages.map(function(r){return Er(r.messageId,e.payload.messageId)&&r.applyReactionEvent&&typeof r.applyReactionEvent=="function"&&r.applyReactionEvent(e.payload),r})})}).with({type:w3},function(e){return J(J({},t),{messageListParams:e.payload})}).with({type:R3},function(e){var r,i,a=e.payload,s=a.channelUrl,o=a.requestId,u=a.index,c=a.uploadableFileInfo,h=a.error;if(!Er(s,(r=t?.currentGroupChannel)===null||r===void 0?void 0:r.url)||h)return t;var p=t.localMessages,m=p.find(function(b){return Er(rg(b)&&b.reqId,o)}),_=(i=m.messageParams)===null||i===void 0?void 0:i.fileInfoList;return Array.isArray(_)&&(_[u]=c),J(J({},t),{localMessages:p})}).with({type:O3},function(e){var r,i=e.payload,a=i.channel,s=i.typingMembers;return Er(a.url,(r=t?.currentGroupChannel)===null||r===void 0?void 0:r.url)?J(J({},t),{typingMembers:s}):t}).otherwise(function(){return t})}var pve="delivery_receipt";function mve(t,n){var e,r,i,a=t.sdkInit,s=t.currentGroupChannel,o=t.disableMarkAsRead,u=n.sdk,c=n.logger,h=n.scrollRef,p=n.setQuoteMessage,m=n.messagesDispatcher,_=Zn().state,b=_.config,C=b.markAsReadScheduler,N=b.markAsDeliveredScheduler,S=b.disableMarkAsDelivered,M=(i=(r=(e=_.stores.sdkStore.sdk)===null||e===void 0?void 0:e.appInfo)===null||r===void 0?void 0:r.premiumFeatureList)===null||i===void 0?void 0:i.find(function(w){return w===pve});R.useEffect(function(){var w,U=s?.url,L=Ll();if(U&&a){var P={onMessageReceived:function(x,H){var F,Q;if(x.isGroupChannel()&&Er(x?.url,U)){var $=!1;try{var q=h.current;q&&($=q.offsetHeight+q.scrollTop>=q.scrollHeight-10)}catch{}if(c.info("Channel | useHandleChannelEvents: onMessageReceived",H),m({type:C3,payload:{channel:x,message:H}}),$&&((F=document.getElementById("sendbird-dropdown-portal"))===null||F===void 0?void 0:F.childElementCount)===0&&((Q=document.getElementById("sendbird-emoji-list-portal"))===null||Q===void 0?void 0:Q.childElementCount)===0)try{setTimeout(function(){return Tc(0,h)}),o||C.push(s),M&&!S&&N.push(s)}catch{c.warning("Channel | onMessageReceived | scroll to end failed")}}},onUnreadMemberStatusUpdated:function(x){c.info("Channel | useHandleChannelEvents: onUnreadMemberStatusUpdated",x),Er(x?.url,U)&&m({type:Wo,payload:x})},onUserMarkedRead:function(x,H){c.info("Channel | useHandleChannelEvents: onUserMarkedAsRead",x,H),Er(x?.url,U)&&m({type:A3,payload:{channel:x,userIds:H}})},onUserMarkedUnread:function(x,H){c.info("Channel | useHandleChannelEvents: onUserMarkedUnread",x,H),Er(x?.url,U)&&m({type:i7,payload:{channel:x,userIds:H}})},onUndeliveredMemberStatusUpdated:function(x){Er(x?.url,U)&&(c.info("Channel | useHandleChannelEvents: onDeliveryReceiptUpdated",x),m({type:Wo,payload:x}))},onMessageUpdated:function(x,H){x.isGroupChannel()&&Er(x?.url,U)&&(c.info("Channel | useHandleChannelEvents: onMessageUpdated",H),m({type:OE,payload:{channel:x,message:H}}))},onThreadInfoUpdated:function(x,H){x.isGroupChannel()&&Er(x?.url,U)&&(c.info("Channel | useHandleChannelEvents: onThreadInfoUpdated",{channel:x,threadInfoUpdateEvent:H}),m({type:S3,payload:{channel:x,event:H}}))},onMessageDeleted:function(x,H){c.info("Channel | useHandleChannelEvents: onMessageDeleted",{channel:x,messageId:H}),p(null),m({type:DE,payload:H})},onReactionUpdated:function(x,H){x.isGroupChannel()&&Er(x?.url,U)&&(c.info("Channel | useHandleChannelEvents: onReactionUpdated",{channel:x,reactionEvent:H}),m({type:M3,payload:H}))},onChannelChanged:function(x){x.isGroupChannel()&&Er(x?.url,U)&&(c.info("Channel | useHandleChannelEvents: onChannelChanged",x),m({type:Wo,payload:x}))},onChannelFrozen:function(x){x.isGroupChannel()&&Er(x?.url,U)&&(c.info("Channel | useHandleChannelEvents: onChannelFrozen",x),m({type:Wo,payload:x}))},onChannelUnfrozen:function(x){x.isGroupChannel()&&Er(x?.url,U)&&(c.info("Channel | useHandleChannelEvents: onChannelUnFrozen",x),m({type:Wo,payload:x}))},onUserMuted:function(x,H){x.isGroupChannel()&&Er(x?.url,U)&&(c.info("Channel | useHandleChannelEvents: onUserMuted",{channel:x,user:H}),m({type:Wo,payload:x}))},onUserUnmuted:function(x,H){x.isGroupChannel()&&Er(x?.url,U)&&(c.info("Channel | useHandleChannelEvents: onUserUnmuted",{channel:x,user:H}),m({type:Wo,payload:x}))},onUserBanned:function(x,H){var F;if(Er(x?.url,U)&&x.isGroupChannel()){c.info("Channel | useHandleChannelEvents: onUserBanned",{channel:x,user:H});var Q=H?.userId===((F=u?.currentUser)===null||F===void 0?void 0:F.userId);m({type:Wo,payload:Q?null:x})}},onOperatorUpdated:function(x,H){x.isGroupChannel()&&Er(x?.url,U)&&(c.info("Channel | useHandleChannelEvents: onOperatorUpdated",{channel:x,users:H}),m({type:Wo,payload:x}))},onUserLeft:function(x,H){var F;if(Er(x?.url,U)){c.info("Channel | useHandleChannelEvents: onUserLeft",{channel:x,user:H});var Q=H?.userId===((F=u?.currentUser)===null||F===void 0?void 0:F.userId);m({type:Wo,payload:Q?null:x})}},onTypingStatusUpdated:function(x){if(Er(x?.url,U)){c.info("Channel | onTypingStatusUpdated",{channel:x});var H=x.getTypingUsers();m({type:O3,payload:{channel:x,typingMembers:H}})}}};c.info("Channel | useHandleChannelEvents: Setup event handler",{channelHandlerId:L,channelHandler:P}),(w=u.groupChannel)===null||w===void 0||w.addGroupChannelHandler(L,new Bw(P))}return function(){var x;!((x=u?.groupChannel)===null||x===void 0)&&x.removeGroupChannelHandler?(c.info("Channel | useHandleChannelEvents: Removing message reciver handler",L),u.groupChannel.removeGroupChannelHandler(L)):u?.groupChannel&&c.error("Channel | useHandleChannelEvents: Not found the removeGroupChannelHandler")}},[s?.url,a])}function gve(t,n){var e=t.channelUrl,r=t.sdkInit,i=t.disableMarkAsRead,a=n.messagesDispatcher,s=n.sdk,o=n.logger,u=n.markAsReadScheduler;R.useEffect(function(){e&&r&&s&&s.groupChannel&&(o.info("Channel | useSetChannel fetching channel",e),s.groupChannel.getChannel(e).then(function(c){o.info("Channel | useSetChannel fetched channel",c),a({type:Wo,payload:c}),o.info("Channel: Mark as read",c),i||u.push(c)}).catch(function(c){o.warning("Channel | useSetChannel fetch channel failed",{channelUrl:e,e:c}),a({type:N3})}),s.getAllEmoji().then(function(c){o.info("Channel: Getting emojis success",c),a({type:I3,payload:c})}).catch(function(c){o.error("Channel: Getting emojis failed",c)}))},[e,r])}function _ve(t,n){var e=t.isOnline,r=t.replyType,i=t.disableMarkAsRead,a=t.reconnectOnIdle,s=n.logger,o=n.sdk,u=n.scrollRef,c=n.currentGroupChannel,h=n.messagesDispatcher,p=n.markAsReadScheduler,m=n.userFilledMessageListQuery,_=hve(e,c,a).shouldReconnect;R.useEffect(function(){return function(){var b,C,N;if(_){s.info("Refreshing conversation state");var S=((b=o?.appInfo)===null||b===void 0?void 0:b.useReaction)||!1,M={prevResultSize:oT,isInclusive:!0,includeReactions:S,includeMetaArray:!0,nextResultSize:lT};r&&r==="QUOTE_REPLY"&&(M.includeThreadInfo=!0,M.includeParentMessageInfo=!0,M.replyType=Yi.ONLY_REPLY_TO_CHANNEL),m&&Object.keys(m).forEach(function(w){M[w]=m[w]}),s.info("Channel: Fetching messages",{currentGroupChannel:c,userFilledMessageListQuery:m}),h({type:uT,payload:null}),(C=o?.groupChannel)===null||C===void 0||C.getChannel((N=c?.url)!==null&&N!==void 0?N:"").then(function(w){var U=new Date().getTime();w.getMessagesByTimestamp(U,M).then(function(L){h({type:cT,payload:{currentGroupChannel:w,messages:L}}),setTimeout(function(){return Tc(0,u)},V5)}).catch(function(L){s.error("Channel: Fetching messages failed",L),h({type:oE,payload:{currentGroupChannel:w}})}),i||p.push(w)})}}},[_,r])}function yve(t,n){var e=t.currentGroupChannel,r=t.oldestMessageTimeStamp,i=t.userFilledMessageListQuery,a=t.replyType,s=n.hasMorePrev,o=n.logger,u=n.messagesDispatcher,c=n.sdk;return R.useCallback(function(h){var p,m;if(s){var _={prevResultSize:oT,isInclusive:!0,includeMetaArray:!0,includeReactions:(m=(p=c?.appInfo)===null||p===void 0?void 0:p.useReaction)!==null&&m!==void 0?m:!1};(a==="QUOTE_REPLY"||a==="THREAD")&&(_.includeThreadInfo=!0,_.includeParentMessageInfo=!0,_.replyType=Yi.ONLY_REPLY_TO_CHANNEL),i&&Object.keys(i).forEach(function(b){_[b]=i[b]}),o.info("Channel: Fetching messages",{currentGroupChannel:e,userFilledMessageListQuery:i}),e?.getMessagesByTimestamp(r||new Date().getTime(),_).then(function(b){u({type:g3,payload:{currentGroupChannel:e,messages:b}}),h&&setTimeout(function(){return h()})}).catch(function(){u({type:_3,payload:{currentGroupChannel:e}})})}},[e,r,a])}function Eve(t,n){var e=t.currentGroupChannel,r=t.latestMessageTimeStamp,i=t.userFilledMessageListQuery,a=t.hasMoreNext,s=t.replyType,o=n.logger,u=n.messagesDispatcher,c=n.sdk;return R.useCallback(function(h){var p,m;if(a){var _=(m=(p=c?.appInfo)===null||p===void 0?void 0:p.useReaction)!==null&&m!==void 0?m:!1,b={nextResultSize:lT,isInclusive:!0,includeReactions:_,includeMetaArray:!0};s&&(s==="QUOTE_REPLY"||s==="THREAD")&&(b.includeThreadInfo=!0,b.includeParentMessageInfo=!0,b.replyType=Yi.ONLY_REPLY_TO_CHANNEL),i&&Object.keys(i).forEach(function(C){b[C]=i[C]}),o.info("Channel: Fetching later messages",{currentGroupChannel:e,userFilledMessageListQuery:i}),e?.getMessagesByTimestamp(r||new Date().getTime(),b).then(function(C){u({type:y3,payload:{currentGroupChannel:e,messages:C}}),setTimeout(function(){return h([C,null])})}).catch(function(C){o.error("Channel: Fetching later messages failed",C),u({type:E3,payload:{currentGroupChannel:e}}),setTimeout(function(){return h([null,C])})})}},[e,r,a,s])}function bve(t,n){var e=t.currentGroupChannel,r=t.messagesDispatcher,i=n.logger;return R.useCallback(function(a){i.info("Channel | useDeleteMessageCallback: Deleting message",a);var s=AE(a)?a.sendingStatus:void 0;return new Promise(function(o,u){i.info("Channel | useDeleteMessageCallback: Deleting message requestState:",s),(s===Tn.FAILED||s===Tn.PENDING)&&"reqId"in a?(i.info("Channel | useDeleteMessageCallback: Deleted message from local:",a),r({type:T3,payload:a.reqId}),o()):(i.info("Channel | useDeleteMessageCallback: Deleting message from remote:",s),e?.deleteMessage(a).then(function(){i.info("Channel | useDeleteMessageCallback: Deleting message success!",a),r({type:DE,payload:a.messageId}),o()}).catch(function(c){i.warning("Channel | useDeleteMessageCallback: Deleting message failed!",c),u(c)}))})},[e,r])}function Cve(t,n){var e=t.currentGroupChannel,r=t.messagesDispatcher,i=t.onBeforeUpdateUserMessage,a=t.isMentionEnabled,s=n.logger,o=n.pubSub;return R.useCallback(function(u,c){var h=u.messageId,p=u.message,m=u.mentionedUsers,_=u.mentionTemplate,b=function(S){var M={message:S};return a&&m&&m.length>0&&(M.mentionedUsers=m),a&&_?M.mentionedMessageTemplate=_:M.mentionedMessageTemplate=S,M},C=i&&typeof i=="function";C&&s.info("Channel: creating params using onBeforeUpdateUserMessage",i);var N=C?i(p):b(p);s.info("Channel: Updating message!",N),e?.updateUserMessage(h,N).then(function(S){c&&c(null,S),s.info("Channel: Updating message success!",S),r({type:OE,payload:{channel:e,message:S}}),o.publish(wa.UPDATE_USER_MESSAGE,{message:S,channel:e,publishingModules:[ya.CHANNEL]})}).catch(function(S){c&&c(S,null)})},[e?.url,r,i])}function Sve(t,n){var e=t.currentGroupChannel,r=t.messagesDispatcher,i=n.logger,a=n.pubSub;return R.useCallback(function(s){i.info("Channel: Resending message has started",s),s?.isResendable?s.isUserMessage()?e?.resendMessage(s).onPending(function(o){i.info("Channel: Resending message start!",o),r({type:xy,payload:o})}).onSucceeded(function(o){i.info("Channel: Resending message success!",o),r({type:Sc,payload:o})}).onFailed(function(o,u){i.warning("Channel: Resending message failed!",o),r({type:Ed,payload:u})}):s.isFileMessage()?e?.resendMessage(s).onPending(function(o){i.info("Channel: Resending file message start!",o),r({type:xy,payload:o})}).onSucceeded(function(o){i.info("Channel: Resending file message success!",o),r({type:Sc,payload:o})}).onFailed(function(o,u){i.warning("Channel: Resending file message failed!",o),r({type:Ed,payload:u})}):s.isMultipleFilesMessage()&&e?.resendMessage(s).onPending(function(o){i.info("Channel: Resending multiple files message start!",o),r({type:xy,payload:o})}).onFileUploaded(function(o,u,c,h){var p;i.info("Channel: Resending multiple files message file uploaded!",{requestId:o,index:u,error:h,uploadableFileInfo:c}),a.publish(wa.ON_FILE_INFO_UPLOADED,{response:{channelUrl:(p=e?.url)!==null&&p!==void 0?p:"",requestId:o,index:u,uploadableFileInfo:c,error:h},publishingModules:[ya.CHANNEL]})}).onSucceeded(function(o){i.info("Channel: Resending multiple files message success!",o),r({type:Sc,payload:o})}).onFailed(function(o,u){i.warning("Channel: Resending multiple files message failed!",o),r({type:Ed,payload:u})}):i.error("Message is not resendable",s)},[e,r])}function Tve(t,n){var e=t.isMentionEnabled,r=t.currentGroupChannel,i=t.onBeforeSendUserMessage,a=n.logger,s=n.pubSub,o=n.scrollRef,u=n.messagesDispatcher,c=R.useRef(null),h=R.useCallback(function(p){var m=p.quoteMessage,_=p.message,b=p.mentionTemplate,C=p.mentionedUsers,N=function(){var w={message:_};return e&&C&&C.length>0&&(w.mentionedUsers=C),e&&b&&C&&C.length>0&&(w.mentionedMessageTemplate=b),m&&(w.isReplyToChannel=!0,w.parentMessageId=m.messageId),w},S=i&&typeof i=="function";S&&a.info("Channel: creating params using onBeforeSendUserMessage",i);var M=S?i(_,m):N();a.info("Channel: Sending message has started",M),r?.sendUserMessage(M).onPending(function(w){s.publish(wa.SEND_MESSAGE_START,{message:w,channel:r,publishingModules:[ya.CHANNEL]}),setTimeout(function(){return Tc(0,o)},sf)}).onFailed(function(w,U){a.warning("Channel: Sending message failed!",{message:U,error:w}),u({type:Ed,payload:U})}).onSucceeded(function(w){a.info("Channel: Sending message success!",w),u({type:Sc,payload:w})})},[r,i]);return[c,h]}function Nve(t,n){var e=t.currentGroupChannel,r=t.onBeforeSendFileMessage,i=t.imageCompression,a=n.logger,s=n.pubSub,o=n.scrollRef,u=n.messagesDispatcher,c=R.useCallback(function(h,p){return new Promise(function(m,_){var b=r?.(h,p);b||(b={file:h},p&&(b.isReplyToChannel=!0,b.parentMessageId=p.messageId)),a.info("Channel: Uploading file message start!",b),e?.sendFileMessage(b).onPending(function(C){s.publish(wa.SEND_MESSAGE_START,{message:J(J({},C),{url:URL.createObjectURL(h),requestState:"pending",isUserMessage:C.isUserMessage,isFileMessage:C.isFileMessage,isAdminMessage:C.isAdminMessage,isMultipleFilesMessage:C.isMultipleFilesMessage}),channel:e,publishingModules:[ya.CHANNEL]}),setTimeout(function(){return Tc(0,o)},sf)}).onFailed(function(C,N){a.error("Channel: Sending file message failed!",{failedMessage:N,err:C}),N.localUrl=URL.createObjectURL(h),N.file=h,u({type:Ed,payload:N}),_(C)}).onSucceeded(function(C){a.info("Channel: Sending file message success!",C),u({type:Sc,payload:C}),m(C)})})},[e,r,i]);return[c]}var X0="useToggleReactionCallback:";function Ave(t,n){return R.useCallback(function(e,r,i){if(!t){n?.warning("".concat(X0," currentChannel doesn't exist"),t);return}i?t.deleteReaction(e,r).then(function(a){n?.info("".concat(X0," Delete reaction success"),a)}).catch(function(a){n?.warning("".concat(X0," Delete reaction failed"),a)}):t.addReaction(e,r).then(function(a){n?.info("".concat(X0," Add reaction success"),a)}).catch(function(a){n?.warning("".concat(X0," Add reaction failed"),a)})},[t])}function Mve(t){var n=t.current,e=n?.parentNode;n&&e&&(n.style.pointerEvents="none",e.style.cursor="wait")}function Ive(t){var n=t.current,e=n?.parentNode;n&&e&&(n.style.pointerEvents="auto",e.style.cursor="auto")}function wve(t,n){var e=t.setInitialTimeStamp,r=t.setAnimatedMessageId,i=t.allMessages,a=t.scrollRef,s=n.logger;return R.useCallback(function(o,u){var c=i.find(function(h){return h.messageId===u});r(null),setTimeout(function(){try{s.info("Channel: scroll to message - disabling mouse events"),Mve(a),c?(s.info("Channel: scroll to message - message is present"),r(u),J8(a,o)):(s.info("Channel: scroll to message - fetching older messages"),e(null),e(o),r(u))}finally{s.info("Channel: scroll to message - enabled mouse events"),Ive(a)}})},[e,r,i])}var Rve=function(t,n){var e=t.currentGroupChannel,r=t.onBeforeSendVoiceMessage,i=n.logger,a=n.pubSub,s=n.scrollRef,o=n.messagesDispatcher,u=R.useCallback(function(c,h,p){return new Promise(function(m,_){if(e){var b=r&&typeof r=="function"?r(c,p):{file:c,fileName:Xy,mimeType:tf,metaArrays:[new _a({key:j5,value:["".concat(h)]}),new _a({key:q5,value:[$5]})]};p&&(b.isReplyToChannel=!0,b.parentMessageId=p.messageId),i.info("Channel: Start sending voice message",b),e.sendFileMessage(b).onPending(function(C){a.publish(wa.SEND_MESSAGE_START,{message:C,channel:e,publishingModules:[ya.CHANNEL]}),setTimeout(function(){return Tc(0,s)},sf)}).onFailed(function(C,N){i.error("Channel: Sending voice message failed!",{failedMessage:N,err:C}),o({type:Ed,payload:N}),_(C)}).onSucceeded(function(C){i.info("Channel: Sending voice message success!",C),o({type:Sc,payload:C}),m(C)})}})},[e,r]);return[u]},Ove=function(t){var n=t.channelUrl,e=t.sdkInit,r=t.pubSub,i=t.dispatcher,a=t.scrollRef;R.useEffect(function(){var s=new Map;return r?.subscribe&&(s.set(Ga.SEND_USER_MESSAGE,r.subscribe(Ga.SEND_USER_MESSAGE,function(o){var u=o.channel,c=o.message;n===u?.url&&(i({type:Sc,payload:c}),setTimeout(function(){return Tc(0,a)},sf))})),s.set(Ga.SEND_MESSAGE_START,r.subscribe(Ga.SEND_MESSAGE_START,function(o){var u=o.channel,c=o.message,h=o.publishingModules;n===u?.url&&DC(h)&&i({type:b3,payload:c})})),s.set(Ga.ON_FILE_INFO_UPLOADED,r.subscribe(Ga.ON_FILE_INFO_UPLOADED,function(o){var u=o.response,c=o.publishingModules;n===u.channelUrl&&DC(c)&&i({type:R3,payload:u})})),s.set(Ga.SEND_MESSAGE_FAILED,r.subscribe(Ga.SEND_MESSAGE_FAILED,function(o){var u=o.channel,c=o.message,h=o.publishingModules;n===u?.url&&DC(h)&&i({type:Ed,payload:c})})),s.set(Ga.SEND_FILE_MESSAGE,r.subscribe(Ga.SEND_FILE_MESSAGE,function(o){var u=o.channel,c=o.message;n===u?.url&&(i({type:Sc,payload:c}),setTimeout(function(){return Tc(0,a)},sf))})),s.set(Ga.UPDATE_USER_MESSAGE,r.subscribe(Ga.UPDATE_USER_MESSAGE,function(o){var u=o.channel,c=o.message,h=o.fromSelector;h&&n===u?.url&&u.isGroupChannel()&&i({type:OE,payload:{channel:u,message:c}})})),s.set(Ga.DELETE_MESSAGE,r.subscribe(Ga.DELETE_MESSAGE,function(o){var u=o.channel,c=o.messageId;n===u?.url&&i({type:DE,payload:c})}))),function(){s.forEach(function(o){try{o.remove()}catch{}})}},[n,e])},s7=E.createContext(null),Dve=function(t){var n,e,r,i,a,s,o=t.channelUrl,u=t.children,c=t.isReactionEnabled,h=t.isMessageGroupingEnabled,p=h===void 0?!0:h,m=t.isMultipleFilesMessageEnabled,_=t.showSearchIcon,b=t.animatedMessage,C=t.highlightedMessage,N=t.startingPoint,S=t.onBeforeSendUserMessage,M=t.onBeforeSendFileMessage,w=t.onBeforeUpdateUserMessage,U=t.onBeforeSendVoiceMessage,L=t.onBeforeSendMultipleFilesMessage,P=t.onChatHeaderActionClick,x=t.onSearchClick,H=t.onBackClick,F=t.threadReplySelectType,Q=t.queries,$=t.filterMessageList,q=t.disableMarkAsRead,X=q===void 0?!1:q,V=t.onReplyInThread,ee=t.onQuoteMessageClick,z=t.onMessageAnimated,ie=t.onMessageHighlighted,se=t.scrollBehavior,he=se===void 0?"auto":se,pe=t.reconnectOnIdle,K=pe===void 0?!0:pe,ce=Zn().state,me=ce.config,Le=(n=t.replyType)!==null&&n!==void 0?n:Gw(me.groupChannel.replyType).upperCase,ge=me.pubSub,Ee=me.logger;me.userId;var Ye=me.isOnline,tt=me.imageCompression,yt=me.markAsReadScheduler,Ht=me.groupChannel,zt=(r=(e=ce?.stores)===null||e===void 0?void 0:e.sdkStore)===null||r===void 0?void 0:r.sdk,Xt=(a=(i=ce?.stores)===null||i===void 0?void 0:i.sdkStore)===null||a===void 0?void 0:a.initialized,Jt=ce?.config,Mt=H5().configs,jt=R.useState(N),en=jt[0],Dt=jt[1];R.useEffect(function(){Dt(N)},[N,o]);var ln=R.useState(null),Yt=ln[0],st=ln[1],ft=R.useState(C),un=ft[0],vt=ft[1];R.useEffect(function(){vt(C)},[C]);var _t=Q?.messageListParams,Pt=R.useState(null),Et=Pt[0],Ft=Pt[1],vn=R.useState(!1),Je=vn[0],Nn=vn[1],An=Un().stringSet,Mn=R.useReducer(vve,J(J({},fve),{stringSet:An})),Zt=Mn[0],Gt=Mn[1],xt=R.useRef(null),Lt=Ht.enableMention,Cn=Zt.allMessages,ir=Zt.localMessages,It=Zt.loading,Rt=Zt.initialized,Ct=Zt.unreadSince,nt=Zt.unreadSinceDate,Te=Zt.isInvalid,it=Zt.currentGroupChannel,St=Zt.hasMorePrev,bt=Zt.oldestMessageTimeStamp,gn=Zt.hasMoreNext,ct=Zt.latestMessageTimeStamp,En=Zt.emojiContainer,ur=Zt.readStatus,Xn=Zt.typingMembers,ar=n8({channel:it,config:me,moduleLevel:c}),xn=R.useMemo(function(){return ar?$fe(En):new Map},[En]),Pn=R.useMemo(function(){return ar&&it?Kfe(it?.members):new Map},[it?.members]);R.useEffect(function(){b&&st(b)},[b]);var cr=yve({currentGroupChannel:it,oldestMessageTimeStamp:bt,userFilledMessageListQuery:_t,replyType:Le},{hasMorePrev:St,logger:Ee,messagesDispatcher:Gt,sdk:zt}),at=wve({setInitialTimeStamp:Dt,setAnimatedMessageId:st,allMessages:Cn,scrollRef:xt},{logger:Ee}),Nt=Eve({currentGroupChannel:it,latestMessageTimeStamp:ct,userFilledMessageListQuery:_t,hasMoreNext:gn,replyType:Le},{logger:Ee,messagesDispatcher:Gt,sdk:zt}),pt=Ave(it,Ee);gve({channelUrl:o,sdkInit:Xt,disableMarkAsRead:X},{messagesDispatcher:Gt,sdk:zt,logger:Ee,markAsReadScheduler:yt}),R.useEffect(function(){Ft(null)},[o]),mve({currentGroupChannel:it,sdkInit:Xt,disableMarkAsRead:X},{messagesDispatcher:Gt,sdk:zt,logger:Ee,scrollRef:xt,setQuoteMessage:Ft}),dve({currentGroupChannel:it,userFilledMessageListQuery:_t,initialTimeStamp:en,replyType:Le,setIsScrolled:Nn},{logger:Ee,scrollRef:xt,messagesDispatcher:Gt}),Ove({channelUrl:o,sdkInit:Xt,pubSub:ge,dispatcher:Gt,scrollRef:xt}),_ve({isOnline:Ye,replyType:Le,disableMarkAsRead:X,reconnectOnIdle:K},{logger:Ee,sdk:zt,scrollRef:xt,currentGroupChannel:it,messagesDispatcher:Gt,userFilledMessageListQuery:_t,markAsReadScheduler:yt});var At=bve({currentGroupChannel:it,messagesDispatcher:Gt},{logger:Ee}),Tt=Cve({currentGroupChannel:it,messagesDispatcher:Gt,onBeforeUpdateUserMessage:w,isMentionEnabled:Lt},{logger:Ee,pubSub:ge}),We=Sve({currentGroupChannel:it,messagesDispatcher:Gt},{logger:Ee,pubSub:ge}),tn=Tve({currentGroupChannel:it,isMentionEnabled:Lt,onBeforeSendUserMessage:S},{logger:Ee,pubSub:ge,scrollRef:xt,messagesDispatcher:Gt}),Vn=tn[0],qn=tn[1],In=Nve({currentGroupChannel:it,imageCompression:tt,onBeforeSendFileMessage:M},{logger:Ee,pubSub:ge,scrollRef:xt,messagesDispatcher:Gt})[0],mt=Rve({currentGroupChannel:it,onBeforeSendVoiceMessage:U},{logger:Ee,pubSub:ge,scrollRef:xt,messagesDispatcher:Gt})[0],oe=a7({currentChannel:it,onBeforeSendMultipleFilesMessage:L,publishingModules:[ya.CHANNEL]},{logger:Ee,pubSub:ge,scrollRef:xt})[0];return E.createElement(B5,{storage:G5,localConfigs:J(J({},Mt),{groupChannel:J(J({},Mt.groupChannel),{channel:J(J({},Mt.groupChannel.channel),{enableMarkAsUnread:!1})})})},E.createElement(s7.Provider,{value:{channelUrl:o,isReactionEnabled:ar,isMessageGroupingEnabled:p,isMultipleFilesMessageEnabled:m,showSearchIcon:_??Jt.groupChannelSettings.enableMessageSearch,highlightedMessage:C,startingPoint:N,onBeforeSendUserMessage:S,onBeforeSendFileMessage:M,onBeforeUpdateUserMessage:w,onChatHeaderActionClick:P,onSearchClick:x,onBackClick:H,replyType:Le,threadReplySelectType:(s=F??EZ(Ht.threadReplySelectType).upperCase)!==null&&s!==void 0?s:gu.THREAD,queries:Q,filterMessageList:$,disableMarkAsRead:X,onReplyInThread:V,onQuoteMessageClick:ee,onMessageAnimated:z,onMessageHighlighted:ie,allMessages:Cn,localMessages:ir,loading:It,initialized:Rt,unreadSince:Ct,unreadSinceDate:nt,isInvalid:Te,currentGroupChannel:it,hasMorePrev:St,hasMoreNext:gn,oldestMessageTimeStamp:bt,latestMessageTimeStamp:ct,emojiContainer:En,readStatus:ur,typingMembers:Xn,scrollToMessage:at,quoteMessage:Et,setQuoteMessage:Ft,deleteMessage:At,updateMessage:Tt,resendMessage:We,messageInputRef:Vn,sendMessage:qn,sendFileMessage:In,sendVoiceMessage:mt,sendMultipleFilesMessage:oe,initialTimeStamp:en,messageActionTypes:cve,messagesDispatcher:Gt,setInitialTimeStamp:Dt,setAnimatedMessageId:st,setHighLightedMessageId:vt,animatedMessageId:Yt,highLightedMessageId:un,nicknamesMap:Pn,emojiAllMap:xn,onScrollCallback:cr,onScrollDownCallback:Nt,scrollRef:xt,scrollBehavior:he,toggleReaction:pt,isScrolled:Je,setIsScrolled:Nn}},E.createElement(iue,J({},t),u)))},_f=function(){var t=E.useContext(s7);if(!t)throw new Error("ChannelContext not found. Use within the Channel module.");return t};E.createContext(null);R.createContext(null);R.createContext(void 0);var VN=function(){},Uve={checked:null,defaultChecked:!1,disabled:!1,onChange:VN,onFocus:VN,onBlur:VN};E.createContext(Uve);var S6;(function(t){t.SCORE="score",t.TIMESTAMP="ts"})(S6||(S6={}));R.createContext(null);var Wv;(function(t){t.NIL="NIL",t.LOADING="LOADING",t.INVALID="INVALID",t.INITIALIZED="INITIALIZED"})(Wv||(Wv={}));var zh;(function(t){t.NIL="NIL",t.LOADING="LOADING",t.INVALID="INVALID",t.INITIALIZED="INITIALIZED"})(zh||(zh={}));var fd;(function(t){t.NIL="NIL",t.LOADING="LOADING",t.INVALID="INVALID",t.INITIALIZED="INITIALIZED"})(fd||(fd={}));var NI=30,AI=30;function xve(t,n){var e=t.currentChannel,r=n.logger;return R.useCallback(function(i,a,s){var o,u;if(s){(o=e?.deleteReaction)===null||o===void 0||o.call(e,i,a).then(function(c){r.info("Thread | useToggleReactionsCallback: Delete reaction succeeded.",c)}).catch(function(c){r.warning("Thread | useToggleReactionsCallback: Delete reaction failed.",c)});return}(u=e?.addReaction)===null||u===void 0||u.call(e,i,a).then(function(c){r.info("Thread | useToggleReactionsCallback: Add reaction succeeded.",c)}).catch(function(c){r.warning("Thread | useToggleReactionsCallback: Add reaction failed.",c)})},[e])}function Lve(t,n){var e=t.isMentionEnabled,r=t.currentChannel,i=t.onBeforeSendUserMessage,a=t.sendMessageStart,s=t.sendMessageFailure,o=n.logger,u=n.pubSub,c=R.useCallback(function(h){var p,m=h.message,_=h.quoteMessage,b=h.mentionTemplate,C=h.mentionedUsers,N=function(){var M={};M.message=m;var w=C?.length||0;return e&&w&&(M.mentionedUsers=C),e&&b&&w&&(M.mentionedMessageTemplate=b),_&&(M.isReplyToChannel=!0,M.parentMessageId=_.messageId),M},S=(p=i?.(m,_))!==null&&p!==void 0?p:N();o.info("Thread | useSendUserMessageCallback: Sending user message start.",S),r?.sendUserMessage&&r?.sendUserMessage(S).onPending(function(M){a(M)}).onFailed(function(M,w){o.info("Thread | useSendUserMessageCallback: Sending user message failed.",{message:w,error:M}),s(w)}).onSucceeded(function(M){o.info("Thread | useSendUserMessageCallback: Sending user message succeeded.",M),u.publish(wa.SEND_USER_MESSAGE,{channel:r,message:M,publishingModules:[ya.THREAD]})})},[e,r,i,a,s]);return c}function kve(t,n){var e=t.currentChannel,r=t.onBeforeSendFileMessage,i=t.sendMessageStart,a=t.sendMessageFailure,s=n.logger,o=n.pubSub;return R.useCallback(function(u,c){return new Promise(function(h,p){var m,_=function(){var C={};return C.file=u,c&&(C.isReplyToChannel=!0,C.parentMessageId=c.messageId),C},b=(m=r?.(u,c))!==null&&m!==void 0?m:_();s.info("Thread | useSendFileMessageCallback: Sending file message start.",b),e==null?(s.warning("Thread | useSendFileMessageCallback: currentChannel is null. Skipping file message send."),h(null)):e.sendFileMessage(b).onPending(function(C){i(J(J({},C),{url:URL.createObjectURL(u),sendingStatus:Tn.PENDING,isUserMessage:C.isUserMessage,isFileMessage:C.isFileMessage,isAdminMessage:C.isAdminMessage,isMultipleFilesMessage:C.isMultipleFilesMessage})),setTimeout(function(){return dT()},sf)}).onFailed(function(C,N){N.localUrl=URL.createObjectURL(u),N.file=u,s.info("Thread | useSendFileMessageCallback: Sending file message failed.",{message:N,error:C}),a(N),p(C)}).onSucceeded(function(C){s.info("Thread | useSendFileMessageCallback: Sending file message succeeded.",C),o.publish(wa.SEND_FILE_MESSAGE,{channel:e,message:C,publishingModules:[ya.THREAD]}),h(C)})})},[e,r,i,a])}var Pve=function(t,n){var e=t.currentChannel,r=t.onBeforeSendVoiceMessage,i=t.sendMessageStart,a=t.sendMessageFailure,s=n.logger,o=n.pubSub,u=R.useCallback(function(c,h,p){var m=r&&typeof r=="function"?r(c,p):{file:c,fileName:Xy,mimeType:tf,metaArrays:[new _a({key:j5,value:["".concat(h)]}),new _a({key:q5,value:[$5]})]};p&&(m.isReplyToChannel=!0,m.parentMessageId=p.messageId),s.info("Thread | useSendVoiceMessageCallback:  Start sending voice message",m),e?.sendFileMessage(m).onPending(function(_){i(J(J({},_),{url:URL.createObjectURL(c),sendingStatus:Tn.PENDING,isUserMessage:_.isUserMessage,isFileMessage:_.isFileMessage,isAdminMessage:_.isAdminMessage,isMultipleFilesMessage:_.isMultipleFilesMessage})),setTimeout(function(){return dT()},sf)}).onFailed(function(_,b){b.localUrl=URL.createObjectURL(c),b.file=c,s.info("Thread | useSendVoiceMessageCallback: Sending voice message failed.",{message:b,error:_}),a(b)}).onSucceeded(function(_){s.info("Thread | useSendVoiceMessageCallback: Sending voice message succeeded.",_),o.publish(wa.SEND_FILE_MESSAGE,{channel:e,message:_,publishingModules:[ya.THREAD]})})},[e,r,i,a]);return u};function Fve(t,n){var e=t.currentChannel,r=t.resendMessageStart,i=t.sendMessageSuccess,a=t.sendMessageFailure,s=n.logger,o=n.pubSub;return R.useCallback(function(u){var c,h,p,m,_;if(!u?.isResendable){s.warning("Thread | useResendMessageCallback: Message is not resendable.",u);return}if(s.info("Thread | useResendMessageCallback: Resending failedMessage start.",u),!((c=u?.isUserMessage)===null||c===void 0)&&c.call(u)||u?.messageType===br.USER)try{e?.resendMessage(u).onPending(function(b){s.info("Thread | useResendMessageCallback: Resending user message started.",b),r(b)}).onSucceeded(function(b){s.info("Thread | useResendMessageCallback: Resending user message succeeded.",b),i(b),o.publish(wa.SEND_USER_MESSAGE,{channel:e,message:b,publishingModules:[ya.THREAD]})}).onFailed(function(b){s.warning("Thread | useResendMessageCallback: Resending user message failed.",b),u.sendingStatus=Tn.FAILED,a(u)})}catch(b){s.warning("Thread | useResendMessageCallback: Resending user message failed.",b),u.sendingStatus=Tn.FAILED,a(u)}else if(!((h=u?.isFileMessage)===null||h===void 0)&&h.call(u))try{(p=e?.resendMessage)===null||p===void 0||p.call(e,u).onPending(function(b){s.info("Thread | useResendMessageCallback: Resending file message started.",b),r(b)}).onSucceeded(function(b){s.info("Thread | useResendMessageCallback: Resending file message succeeded.",b),i(b),o.publish(wa.SEND_FILE_MESSAGE,{channel:e,message:u,publishingModules:[ya.THREAD]})}).onFailed(function(b){s.warning("Thread | useResendMessageCallback: Resending file message failed.",b),u.sendingStatus=Tn.FAILED,a(u)})}catch(b){s.warning("Thread | useResendMessageCallback: Resending file message failed.",b),u.sendingStatus=Tn.FAILED,a(u)}else if(!((m=u?.isMultipleFilesMessage)===null||m===void 0)&&m.call(u))try{(_=e?.resendMessage)===null||_===void 0||_.call(e,u).onPending(function(b){s.info("Thread | useResendMessageCallback: Resending multiple files message started.",b),r(b)}).onFileUploaded(function(b,C,N,S){s.info("Thread | useResendMessageCallback: onFileUploaded during resending multiple files message.",{requestId:b,index:C,error:S,uploadableFileInfo:N}),o.publish(wa.ON_FILE_INFO_UPLOADED,{response:{channelUrl:e.url,requestId:b,index:C,uploadableFileInfo:N,error:S},publishingModules:[ya.THREAD]})}).onSucceeded(function(b){s.info("Thread | useResendMessageCallback: Resending MFM succeeded.",b),i(b),o.publish(wa.SEND_FILE_MESSAGE,{channel:e,message:b,publishingModules:[ya.THREAD]})}).onFailed(function(b,C){s.warning("Thread | useResendMessageCallback: Resending MFM failed.",b),a(C)})}catch(b){s.warning("Thread | useResendMessageCallback: Resending MFM failed.",b),a(u)}else s.warning("Thread | useResendMessageCallback: Message is not resendable.",u),u.sendingStatus=Tn.FAILED,a(u)},[e,r,i,a])}function Bve(t,n){var e=t.currentChannel,r=t.isMentionEnabled,i=t.onMessageUpdated,a=n.logger,s=n.pubSub;return R.useCallback(function(o){var u,c=o.messageId,h=o.message,p=o.mentionedUsers,m=o.mentionTemplate,_=function(){var C={};return C.message=h,r&&p&&p?.length>0&&(C.mentionedUsers=p),r&&m?C.mentionedMessageTemplate=m:C.mentionedMessageTemplate=h,C},b=_();if(a.info("Thread | useUpdateMessageCallback: Message update start.",b),e==null){a.warning("Thread | useUpdateMessageCallback: currentChannel is null.");return}(u=e.updateUserMessage)===null||u===void 0||u.call(e,c,b).then(function(C){a.info("Thread | useUpdateMessageCallback: Message update succeeded.",C),i(e,C),s.publish(wa.UPDATE_USER_MESSAGE,{fromSelector:!0,channel:e,message:C,publishingModules:[ya.THREAD]})})},[e,r,i])}function Hve(t,n){var e=t.currentChannel,r=t.onMessageDeletedByReqId,i=t.onMessageDeleted,a=n.logger;return R.useCallback(function(s){a.info("Thread | useDeleteMessageCallback: Deleting message.",s);var o=s.sendingStatus;return new Promise(function(u,c){var h;a.info("Thread | useDeleteMessageCallback: Deleting message requestState:",o),(o==="failed"||o==="pending")&&(a.info("Thread | useDeleteMessageCallback: Deleted message from local:",s),r(s.reqId),u()),e==null&&(a.info("Thread | useDeleteMessageCallback: No current channel"),u()),a.info("Thread | useDeleteMessageCallback: Deleting message from remote:",o),(h=e.deleteMessage)===null||h===void 0||h.call(e,s).then(function(){a.info("Thread | useDeleteMessageCallback: Deleting message success!",s),i(e,s.messageId),u()}).catch(function(p){a.warning("Thread | useDeleteMessageCallback: Deleting message failed!",p),c(p)})})},[e,r,i])}function zN(t){return J({prevResultSize:NI,nextResultSize:AI,includeMetaArray:!0,isInclusive:!0},t)}var Gve=function(t){var n=t.isReactionEnabled,e=t.anchorMessage,r=t.parentMessage,i=t.logger,a=t.oldestMessageTimeStamp,s=t.latestMessageTimeStamp,o=t.threadListState,u=t.initializeThreadListStart,c=t.initializeThreadListSuccess,h=t.initializeThreadListFailure,p=t.getPrevMessagesStart,m=t.getPrevMessagesSuccess,_=t.getPrevMessagesFailure,b=t.getNextMessagesStart,C=t.getNextMessagesSuccess,N=t.getNextMessagesFailure,S=Zn().state.stores,M=e?.createdAt||0,w=R.useCallback(function(P){return si(void 0,void 0,void 0,function(){var x,H,F,Q,$;return oi(this,function(q){switch(q.label){case 0:if(!S.sdkStore.initialized||!r)return[2];u(),q.label=1;case 1:return q.trys.push([1,3,,4]),x=zN({includeReactions:n}),i.info("Thread | useGetThreadList: Initialize thread list start.",{timestamp:M,params:x}),[4,r.getThreadedMessagesByTimestamp(M,x)];case 2:return H=q.sent(),F=H.threadedMessages,Q=H.parentMessage,i.info("Thread | useGetThreadList: Initialize thread list succeeded.",{staleParentMessage:r,threadedMessages:F}),c(Q,e,F),setTimeout(function(){return P?.(F)}),[3,4];case 3:return $=q.sent(),i.info("Thread | useGetThreadList: Initialize thread list failed.",$),h(),[3,4];case 4:return[2]}})})},[S.sdkStore.initialized,r,e,n,u,c,h]),U=R.useCallback(function(P){return si(void 0,void 0,void 0,function(){var x,H,F,Q,$;return oi(this,function(q){switch(q.label){case 0:if(o!==fd.INITIALIZED||a===0||!r)return[2];p(),q.label=1;case 1:return q.trys.push([1,3,,4]),x=zN({nextResultSize:0,includeReactions:n}),[4,r.getThreadedMessagesByTimestamp(a,x)];case 2:return H=q.sent(),F=H.threadedMessages,Q=H.parentMessage,i.info("Thread | useGetPrevThreadsCallback: Fetch prev threads succeeded.",{parentMessage:Q,threadedMessages:F}),m(F),setTimeout(function(){return P?.(F)}),[3,4];case 3:return $=q.sent(),i.info("Thread | useGetPrevThreadsCallback: Fetch prev threads failed.",$),_(),[3,4];case 4:return[2]}})})},[o,a,n,r,p,m,_]),L=R.useCallback(function(P){return si(void 0,void 0,void 0,function(){var x,H,F,Q,$;return oi(this,function(q){switch(q.label){case 0:if(o!==fd.INITIALIZED||s===0||!r)return[2];b(),q.label=1;case 1:return q.trys.push([1,3,,4]),x=zN({prevResultSize:0,includeReactions:n}),[4,r.getThreadedMessagesByTimestamp(s,x)];case 2:return H=q.sent(),F=H.threadedMessages,Q=H.parentMessage,i.info("Thread | useGetNextThreadsCallback: Fetch next threads succeeded.",{parentMessage:Q,threadedMessages:F}),C(F),setTimeout(function(){return P?.(F)}),[3,4];case 3:return $=q.sent(),i.info("Thread | useGetNextThreadsCallback: Fetch next threads failed.",$),N(),[3,4];case 4:return[2]}})})},[o,s,n,r,b,C,N]);return{initializeThreadFetcher:w,fetchPrevThreads:U,fetchNextThreads:L}},wS={exports:{}};wS.exports;(function(t,n){(function(){var e,r="4.17.21",i=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",o="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",c=500,h="__lodash_placeholder__",p=1,m=2,_=4,b=1,C=2,N=1,S=2,M=4,w=8,U=16,L=32,P=64,x=128,H=256,F=512,Q=30,$="...",q=800,X=16,V=1,ee=2,z=3,ie=1/0,se=9007199254740991,he=17976931348623157e292,pe=NaN,K=4294967295,ce=K-1,me=K>>>1,Le=[["ary",x],["bind",N],["bindKey",S],["curry",w],["curryRight",U],["flip",F],["partial",L],["partialRight",P],["rearg",H]],ge="[object Arguments]",Ee="[object Array]",Ye="[object AsyncFunction]",tt="[object Boolean]",yt="[object Date]",Ht="[object DOMException]",zt="[object Error]",Xt="[object Function]",Jt="[object GeneratorFunction]",Mt="[object Map]",jt="[object Number]",en="[object Null]",Dt="[object Object]",ln="[object Promise]",Yt="[object Proxy]",st="[object RegExp]",ft="[object Set]",un="[object String]",vt="[object Symbol]",_t="[object Undefined]",Pt="[object WeakMap]",Et="[object WeakSet]",Ft="[object ArrayBuffer]",vn="[object DataView]",Je="[object Float32Array]",Nn="[object Float64Array]",An="[object Int8Array]",Mn="[object Int16Array]",Zt="[object Int32Array]",Gt="[object Uint8Array]",xt="[object Uint8ClampedArray]",Lt="[object Uint16Array]",Cn="[object Uint32Array]",ir=/\b__p \+= '';/g,It=/\b(__p \+=) '' \+/g,Rt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ct=/&(?:amp|lt|gt|quot|#39);/g,nt=/[&<>"']/g,Te=RegExp(Ct.source),it=RegExp(nt.source),St=/<%-([\s\S]+?)%>/g,bt=/<%([\s\S]+?)%>/g,gn=/<%=([\s\S]+?)%>/g,ct=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,En=/^\w*$/,ur=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Xn=/[\\^$.*+?()[\]{}|]/g,ar=RegExp(Xn.source),xn=/^\s+/,Pn=/\s/,cr=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,at=/\{\n\/\* \[wrapped with (.+)\] \*/,Nt=/,? & /,pt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,At=/[()=,{}\[\]\/\s]/,Tt=/\\(\\)?/g,We=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,tn=/\w*$/,Vn=/^[-+]0x[0-9a-f]+$/i,qn=/^0b[01]+$/i,In=/^\[object .+?Constructor\]$/,mt=/^0o[0-7]+$/i,oe=/^(?:0|[1-9]\d*)$/,Pe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ut=/($^)/,rn=/['\n\r\u2028\u2029\\]/g,wn="\\ud800-\\udfff",an="\\u0300-\\u036f",_r="\\ufe20-\\ufe2f",Cr="\\u20d0-\\u20ff",Ot=an+_r+Cr,on="\\u2700-\\u27bf",kt="a-z\\xdf-\\xf6\\xf8-\\xff",pn="\\xac\\xb1\\xd7\\xf7",Xr="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Oi="\\u2000-\\u206f",Di=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Zr="A-Z\\xc0-\\xd6\\xd8-\\xde",Wi="\\ufe0e\\ufe0f",di=pn+Xr+Oi+Di,Xs="[']",Mc="["+wn+"]",Pl="["+di+"]",Mo="["+Ot+"]",ol="\\d+",wu="["+on+"]",aa="["+kt+"]",Zs="[^"+wn+di+ol+on+kt+Zr+"]",Fl="\\ud83c[\\udffb-\\udfff]",Ic="(?:"+Mo+"|"+Fl+")",Io="[^"+wn+"]",Ru="(?:\\ud83c[\\udde6-\\uddff]){2}",Bl="[\\ud800-\\udbff][\\udc00-\\udfff]",Ua="["+Zr+"]",Qa="\\u200d",Ou="(?:"+aa+"|"+Zs+")",ll="(?:"+Ua+"|"+Zs+")",Js="(?:"+Xs+"(?:d|ll|m|re|s|t|ve))?",ul="(?:"+Xs+"(?:D|LL|M|RE|S|T|VE))?",cl=Ic+"?",dl="["+Wi+"]?",xa="(?:"+Qa+"(?:"+[Io,Ru,Bl].join("|")+")"+dl+cl+")*",Hl="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Gl="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",da=dl+cl+xa,wo="(?:"+[wu,Ru,Bl].join("|")+")"+da,kd="(?:"+[Io+Mo+"?",Mo,Ru,Bl,Mc].join("|")+")",Pd=RegExp(Xs,"g"),yf=RegExp(Mo,"g"),Jr=RegExp(Fl+"(?="+Fl+")|"+kd+da,"g"),_s=RegExp([Ua+"?"+aa+"+"+Js+"(?="+[Pl,Ua,"$"].join("|")+")",ll+"+"+ul+"(?="+[Pl,Ua+Ou,"$"].join("|")+")",Ua+"?"+Ou+"+"+Js,Ua+"+"+ul,Gl,Hl,ol,wo].join("|"),"g"),wc=RegExp("["+Qa+wn+Ot+Wi+"]"),Vl=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ys=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Du=-1,Sr={};Sr[Je]=Sr[Nn]=Sr[An]=Sr[Mn]=Sr[Zt]=Sr[Gt]=Sr[xt]=Sr[Lt]=Sr[Cn]=!0,Sr[ge]=Sr[Ee]=Sr[Ft]=Sr[tt]=Sr[vn]=Sr[yt]=Sr[zt]=Sr[Xt]=Sr[Mt]=Sr[jt]=Sr[Dt]=Sr[st]=Sr[ft]=Sr[un]=Sr[Pt]=!1;var Ir={};Ir[ge]=Ir[Ee]=Ir[Ft]=Ir[vn]=Ir[tt]=Ir[yt]=Ir[Je]=Ir[Nn]=Ir[An]=Ir[Mn]=Ir[Zt]=Ir[Mt]=Ir[jt]=Ir[Dt]=Ir[st]=Ir[ft]=Ir[un]=Ir[vt]=Ir[Gt]=Ir[xt]=Ir[Lt]=Ir[Cn]=!0,Ir[zt]=Ir[Xt]=Ir[Pt]=!1;var Rc={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Uu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ef={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},sa={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},hl=parseFloat,xu=parseInt,zl=typeof dd=="object"&&dd&&dd.Object===Object&&dd,bf=typeof self=="object"&&self&&self.Object===Object&&self,_i=zl||bf||Function("return this")(),jl=n&&!n.nodeType&&n,Xa=jl&&!0&&t&&!t.nodeType&&t,ql=Xa&&Xa.exports===jl,Oc=ql&&zl.process,ba=(function(){try{var ye=Xa&&Xa.require&&Xa.require("util").types;return ye||Oc&&Oc.binding&&Oc.binding("util")}catch{}})(),Cf=ba&&ba.isArrayBuffer,Fd=ba&&ba.isDate,Dc=ba&&ba.isMap,Bd=ba&&ba.isRegExp,Sf=ba&&ba.isSet,Jn=ba&&ba.isTypedArray;function $t(ye,Be,Oe){switch(Oe.length){case 0:return ye.call(Be);case 1:return ye.call(Be,Oe[0]);case 2:return ye.call(Be,Oe[0],Oe[1]);case 3:return ye.call(Be,Oe[0],Oe[1],Oe[2])}return ye.apply(Be,Oe)}function Re(ye,Be,Oe,qt){for(var Fn=-1,sr=ye==null?0:ye.length;++Fn<sr;){var li=ye[Fn];Be(qt,li,Oe(li),ye)}return qt}function _e(ye,Be){for(var Oe=-1,qt=ye==null?0:ye.length;++Oe<qt&&Be(ye[Oe],Oe,ye)!==!1;);return ye}function nn(ye,Be){for(var Oe=ye==null?0:ye.length;Oe--&&Be(ye[Oe],Oe,ye)!==!1;);return ye}function Vt(ye,Be){for(var Oe=-1,qt=ye==null?0:ye.length;++Oe<qt;)if(!Be(ye[Oe],Oe,ye))return!1;return!0}function Qt(ye,Be){for(var Oe=-1,qt=ye==null?0:ye.length,Fn=0,sr=[];++Oe<qt;){var li=ye[Oe];Be(li,Oe,ye)&&(sr[Fn++]=li)}return sr}function Or(ye,Be){var Oe=ye==null?0:ye.length;return!!Oe&&Hd(ye,Be,0)>-1}function er(ye,Be,Oe){for(var qt=-1,Fn=ye==null?0:ye.length;++qt<Fn;)if(Oe(Be,ye[qt]))return!0;return!1}function ei(ye,Be){for(var Oe=-1,qt=ye==null?0:ye.length,Fn=Array(qt);++Oe<qt;)Fn[Oe]=Be(ye[Oe],Oe,ye);return Fn}function Lu(ye,Be){for(var Oe=-1,qt=Be.length,Fn=ye.length;++Oe<qt;)ye[Fn+Oe]=Be[Oe];return ye}function qg(ye,Be,Oe,qt){var Fn=-1,sr=ye==null?0:ye.length;for(qt&&sr&&(Oe=ye[++Fn]);++Fn<sr;)Oe=Be(Oe,ye[Fn],Fn,ye);return Oe}function LE(ye,Be,Oe,qt){var Fn=ye==null?0:ye.length;for(qt&&Fn&&(Oe=ye[--Fn]);Fn--;)Oe=Be(Oe,ye[Fn],Fn,ye);return Oe}function $g(ye,Be){for(var Oe=-1,qt=ye==null?0:ye.length;++Oe<qt;)if(Be(ye[Oe],Oe,ye))return!0;return!1}var gT=Uc("length");function _T(ye){return ye.split("")}function yT(ye){return ye.match(pt)||[]}function kE(ye,Be,Oe){var qt;return Oe(ye,function(Fn,sr,li){if(Be(Fn,sr,li))return qt=sr,!1}),qt}function Rp(ye,Be,Oe,qt){for(var Fn=ye.length,sr=Oe+(qt?1:-1);qt?sr--:++sr<Fn;)if(Be(ye[sr],sr,ye))return sr;return-1}function Hd(ye,Be,Oe){return Be===Be?ST(ye,Be,Oe):Rp(ye,PE,Oe)}function ET(ye,Be,Oe,qt){for(var Fn=Oe-1,sr=ye.length;++Fn<sr;)if(qt(ye[Fn],Be))return Fn;return-1}function PE(ye){return ye!==ye}function Op(ye,Be){var Oe=ye==null?0:ye.length;return Oe?Dp(ye,Be)/Oe:pe}function Uc(ye){return function(Be){return Be==null?e:Be[ye]}}function Kg(ye){return function(Be){return ye==null?e:ye[Be]}}function Yg(ye,Be,Oe,qt,Fn){return Fn(ye,function(sr,li,Lr){Oe=qt?(qt=!1,sr):Be(Oe,sr,li,Lr)}),Oe}function FE(ye,Be){var Oe=ye.length;for(ye.sort(Be);Oe--;)ye[Oe]=ye[Oe].value;return ye}function Dp(ye,Be){for(var Oe,qt=-1,Fn=ye.length;++qt<Fn;){var sr=Be(ye[qt]);sr!==e&&(Oe=Oe===e?sr:Oe+sr)}return Oe}function Up(ye,Be){for(var Oe=-1,qt=Array(ye);++Oe<ye;)qt[Oe]=Be(Oe);return qt}function BE(ye,Be){return ei(Be,function(Oe){return[Oe,ye[Oe]]})}function xc(ye){return ye&&ye.slice(0,Vd(ye)+1).replace(xn,"")}function Es(ye){return function(Be){return ye(Be)}}function Wg(ye,Be){return ei(Be,function(Oe){return ye[Oe]})}function Tf(ye,Be){return ye.has(Be)}function Qg(ye,Be){for(var Oe=-1,qt=ye.length;++Oe<qt&&Hd(Be,ye[Oe],0)>-1;);return Oe}function Xg(ye,Be){for(var Oe=ye.length;Oe--&&Hd(Be,ye[Oe],0)>-1;);return Oe}function Nf(ye,Be){for(var Oe=ye.length,qt=0;Oe--;)ye[Oe]===Be&&++qt;return qt}var Af=Kg(Rc),bT=Kg(Uu);function xp(ye){return"\\"+sa[ye]}function HE(ye,Be){return ye==null?e:ye[Be]}function Lc(ye){return wc.test(ye)}function Zg(ye){return Vl.test(ye)}function Jg(ye){for(var Be,Oe=[];!(Be=ye.next()).done;)Oe.push(Be.value);return Oe}function Lp(ye){var Be=-1,Oe=Array(ye.size);return ye.forEach(function(qt,Fn){Oe[++Be]=[Fn,qt]}),Oe}function e_(ye,Be){return function(Oe){return ye(Be(Oe))}}function $l(ye,Be){for(var Oe=-1,qt=ye.length,Fn=0,sr=[];++Oe<qt;){var li=ye[Oe];(li===Be||li===h)&&(ye[Oe]=h,sr[Fn++]=Oe)}return sr}function kp(ye){var Be=-1,Oe=Array(ye.size);return ye.forEach(function(qt){Oe[++Be]=qt}),Oe}function CT(ye){var Be=-1,Oe=Array(ye.size);return ye.forEach(function(qt){Oe[++Be]=[qt,qt]}),Oe}function ST(ye,Be,Oe){for(var qt=Oe-1,Fn=ye.length;++qt<Fn;)if(ye[qt]===Be)return qt;return-1}function TT(ye,Be,Oe){for(var qt=Oe+1;qt--;)if(ye[qt]===Be)return qt;return qt}function Gd(ye){return Lc(ye)?VE(ye):gT(ye)}function hi(ye){return Lc(ye)?zE(ye):_T(ye)}function Vd(ye){for(var Be=ye.length;Be--&&Pn.test(ye.charAt(Be)););return Be}var GE=Kg(Ef);function VE(ye){for(var Be=Jr.lastIndex=0;Jr.test(ye);)++Be;return Be}function zE(ye){return ye.match(Jr)||[]}function jE(ye){return ye.match(_s)||[]}var t_=(function ye(Be){Be=Be==null?_i:zd.defaults(_i.Object(),Be,zd.pick(_i,ys));var Oe=Be.Array,qt=Be.Date,Fn=Be.Error,sr=Be.Function,li=Be.Math,Lr=Be.Object,Pp=Be.RegExp,kc=Be.String,bs=Be.TypeError,Mf=Oe.prototype,qE=sr.prototype,jd=Lr.prototype,Fp=Be["__core-js_shared__"],Bp=qE.toString,Dr=jd.hasOwnProperty,$E=0,Hp=(function(){var v=/[^.]+$/.exec(Fp&&Fp.keys&&Fp.keys.IE_PROTO||"");return v?"Symbol(src)_1."+v:""})(),Za=jd.toString,Gp=Bp.call(Lr),eo=_i._,qd=Pp("^"+Bp.call(Dr).replace(Xn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$d=ql?Be.Buffer:e,Ro=Be.Symbol,Pc=Be.Uint8Array,Vp=$d?$d.allocUnsafe:e,fl=e_(Lr.getPrototypeOf,Lr),n_=Lr.create,If=jd.propertyIsEnumerable,Kl=Mf.splice,KE=Ro?Ro.isConcatSpreadable:e,ha=Ro?Ro.iterator:e,Yl=Ro?Ro.toStringTag:e,to=(function(){try{var v=Yu(Lr,"defineProperty");return v({},"",{}),v}catch{}})(),YE=Be.clearTimeout!==_i.clearTimeout&&Be.clearTimeout,zp=qt&&qt.now!==_i.Date.now&&qt.now,Fc=Be.setTimeout!==_i.setTimeout&&Be.setTimeout,Kd=li.ceil,wf=li.floor,Rf=Lr.getOwnPropertySymbols,WE=$d?$d.isBuffer:e,Cs=Be.isFinite,Yd=Mf.join,Wd=e_(Lr.keys,Lr),yi=li.max,Hi=li.min,no=qt.now,ro=Be.parseInt,Wl=li.random,vl=Mf.reverse,io=Yu(Be,"DataView"),Ss=Yu(Be,"Map"),jp=Yu(Be,"Promise"),ku=Yu(Be,"Set"),Bc=Yu(Be,"WeakMap"),Qd=Yu(Lr,"create"),Gi=Bc&&new Bc,Ur={},vr=Ta(io),Pu=Ta(Ss),ao=Ta(jp),r_=Ta(ku),Fu=Ta(Bc),Of=Ro?Ro.prototype:e,Xd=Of?Of.valueOf:e,Hc=Of?Of.toString:e;function W(v){if(Ci(v)&&!Bn(v)&&!(v instanceof $n)){if(v instanceof Ja)return v;if(Dr.call(v,"__wrapped__"))return bm(v)}return new Ja(v)}var Bu=(function(){function v(){}return function(y){if(!ci(y))return{};if(n_)return n_(y);v.prototype=y;var A=new v;return v.prototype=e,A}})();function Hu(){}function Ja(v,y){this.__wrapped__=v,this.__actions__=[],this.__chain__=!!y,this.__index__=0,this.__values__=e}W.templateSettings={escape:St,evaluate:bt,interpolate:gn,variable:"",imports:{_:W}},W.prototype=Hu.prototype,W.prototype.constructor=W,Ja.prototype=Bu(Hu.prototype),Ja.prototype.constructor=Ja;function $n(v){this.__wrapped__=v,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=K,this.__views__=[]}function Ql(){var v=new $n(this.__wrapped__);return v.__actions__=ka(this.__actions__),v.__dir__=this.__dir__,v.__filtered__=this.__filtered__,v.__iteratees__=ka(this.__iteratees__),v.__takeCount__=this.__takeCount__,v.__views__=ka(this.__views__),v}function Gu(){if(this.__filtered__){var v=new $n(this);v.__dir__=-1,v.__filtered__=!0}else v=this.clone(),v.__dir__*=-1;return v}function Xl(){var v=this.__wrapped__.value(),y=this.__dir__,A=Bn(v),k=y<0,j=A?v.length:0,ne=UT(0,j,this.__views__),le=ne.start,fe=ne.end,Ce=fe-le,Qe=k?fe:le-1,Ze=this.__iteratees__,ot=Ze.length,Ut=0,cn=Hi(Ce,this.__takeCount__);if(!A||!k&&j==Ce&&cn==Ce)return __(v,this.__actions__);var On=[];e:for(;Ce--&&Ut<cn;){Qe+=y;for(var tr=-1,Dn=v[Qe];++tr<ot;){var pr=Ze[tr],yr=pr.iteratee,Vo=pr.type,Ls=yr(Dn);if(Vo==ee)Dn=Ls;else if(!Ls){if(Vo==V)continue e;break e}}On[Ut++]=Dn}return On}$n.prototype=Bu(Hu.prototype),$n.prototype.constructor=$n;function Zl(v){var y=-1,A=v==null?0:v.length;for(this.clear();++y<A;){var k=v[y];this.set(k[0],k[1])}}function i_(){this.__data__=Qd?Qd(null):{},this.size=0}function Zd(v){var y=this.has(v)&&delete this.__data__[v];return this.size-=y?1:0,y}function qp(v){var y=this.__data__;if(Qd){var A=y[v];return A===u?e:A}return Dr.call(y,v)?y[v]:e}function Gc(v){var y=this.__data__;return Qd?y[v]!==e:Dr.call(y,v)}function fa(v,y){var A=this.__data__;return this.size+=this.has(v)?0:1,A[v]=Qd&&y===e?u:y,this}Zl.prototype.clear=i_,Zl.prototype.delete=Zd,Zl.prototype.get=qp,Zl.prototype.has=Gc,Zl.prototype.set=fa;function so(v){var y=-1,A=v==null?0:v.length;for(this.clear();++y<A;){var k=v[y];this.set(k[0],k[1])}}function QE(){this.__data__=[],this.size=0}function NT(v){var y=this.__data__,A=pl(y,v);if(A<0)return!1;var k=y.length-1;return A==k?y.pop():Kl.call(y,A,1),--this.size,!0}function AT(v){var y=this.__data__,A=pl(y,v);return A<0?e:y[A][1]}function MT(v){return pl(this.__data__,v)>-1}function Vi(v,y){var A=this.__data__,k=pl(A,v);return k<0?(++this.size,A.push([v,y])):A[k][1]=y,this}so.prototype.clear=QE,so.prototype.delete=NT,so.prototype.get=AT,so.prototype.has=MT,so.prototype.set=Vi;function Oo(v){var y=-1,A=v==null?0:v.length;for(this.clear();++y<A;){var k=v[y];this.set(k[0],k[1])}}function Df(){this.size=0,this.__data__={hash:new Zl,map:new(Ss||so),string:new Zl}}function Uf(v){var y=Xf(this,v).delete(v);return this.size-=y?1:0,y}function a_(v){return Xf(this,v).get(v)}function Jd(v){return Xf(this,v).has(v)}function eh(v,y){var A=Xf(this,v),k=A.size;return A.set(v,y),this.size+=A.size==k?0:1,this}Oo.prototype.clear=Df,Oo.prototype.delete=Uf,Oo.prototype.get=a_,Oo.prototype.has=Jd,Oo.prototype.set=eh;function Vc(v){var y=-1,A=v==null?0:v.length;for(this.__data__=new Oo;++y<A;)this.add(v[y])}function XE(v){return this.__data__.set(v,u),this}function IT(v){return this.__data__.has(v)}Vc.prototype.add=Vc.prototype.push=XE,Vc.prototype.has=IT;function oo(v){var y=this.__data__=new so(v);this.size=y.size}function zc(){this.__data__=new so,this.size=0}function s_(v){var y=this.__data__,A=y.delete(v);return this.size=y.size,A}function $p(v){return this.__data__.get(v)}function ZE(v){return this.__data__.has(v)}function th(v,y){var A=this.__data__;if(A instanceof so){var k=A.__data__;if(!Ss||k.length<i-1)return k.push([v,y]),this.size=++A.size,this;A=this.__data__=new Oo(k)}return A.set(v,y),this.size=A.size,this}oo.prototype.clear=zc,oo.prototype.delete=s_,oo.prototype.get=$p,oo.prototype.has=ZE,oo.prototype.set=th;function Kp(v,y){var A=Bn(v),k=!A&&Xc(v),j=!A&&!k&&tc(v),ne=!A&&!k&&!j&&nc(v),le=A||k||j||ne,fe=le?Up(v.length,kc):[],Ce=fe.length;for(var Qe in v)(y||Dr.call(v,Qe))&&!(le&&(Qe=="length"||j&&(Qe=="offset"||Qe=="parent")||ne&&(Qe=="buffer"||Qe=="byteLength"||Qe=="byteOffset")||Fo(Qe,Ce)))&&fe.push(Qe);return fe}function xf(v){var y=v.length;return y?v[uh(0,y-1)]:e}function Yp(v,y){return av(ka(v),Uo(y,0,v.length))}function JE(v){return av(ka(v))}function Wp(v,y,A){(A!==e&&!Ds(v[y],A)||A===e&&!(y in v))&&Ts(v,y,A)}function Do(v,y,A){var k=v[y];(!(Dr.call(v,y)&&Ds(k,A))||A===e&&!(y in v))&&Ts(v,y,A)}function pl(v,y){for(var A=v.length;A--;)if(Ds(v[A][0],y))return A;return-1}function eb(v,y,A,k){return ml(v,function(j,ne,le){y(k,j,A(j),le)}),k}function o_(v,y){return v&&ho(y,la(y),v)}function nh(v,y){return v&&ho(y,us(y),v)}function Ts(v,y,A){y=="__proto__"&&to?to(v,y,{configurable:!0,enumerable:!0,value:A,writable:!0}):v[y]=A}function rh(v,y){for(var A=-1,k=y.length,j=Oe(k),ne=v==null;++A<k;)j[A]=ne?e:rc(v,y[A]);return j}function Uo(v,y,A){return v===v&&(A!==e&&(v=v<=A?v:A),y!==e&&(v=v>=y?v:y)),v}function La(v,y,A,k,j,ne){var le,fe=y&p,Ce=y&m,Qe=y&_;if(A&&(le=j?A(v,k,j,ne):A(v)),le!==e)return le;if(!ci(v))return v;var Ze=Bn(v);if(Ze){if(le=gb(v),!fe)return ka(v,le)}else{var ot=pa(v),Ut=ot==Xt||ot==Jt;if(tc(v))return b_(v,fe);if(ot==Dt||ot==ge||Ut&&!j){if(le=Ce||Ut?{}:L_(v),!fe)return Ce?hb(v,nh(le,v)):db(v,o_(le,v))}else{if(!Ir[ot])return j?v:{};le=_b(v,ot,fe)}}ne||(ne=new oo);var cn=ne.get(v);if(cn)return cn;ne.set(v,le),bv(v)?v.forEach(function(Dn){le.add(La(Dn,y,A,Dn,v,ne))}):e1(v)&&v.forEach(function(Dn,pr){le.set(pr,La(Dn,y,A,pr,v,ne))});var On=Qe?Ce?x_:fm:Ce?us:la,tr=Ze?e:On(v);return _e(tr||v,function(Dn,pr){tr&&(pr=Dn,Dn=v[pr]),Do(le,pr,La(Dn,y,A,pr,v,ne))}),le}function tb(v){var y=la(v);return function(A){return Vu(A,v,y)}}function Vu(v,y,A){var k=A.length;if(v==null)return!k;for(v=Lr(v);k--;){var j=A[k],ne=y[j],le=v[j];if(le===e&&!(j in v)||!ne(le))return!1}return!0}function l_(v,y,A){if(typeof v!="function")throw new bs(s);return iv(function(){v.apply(e,A)},y)}function lo(v,y,A,k){var j=-1,ne=Or,le=!0,fe=v.length,Ce=[],Qe=y.length;if(!fe)return Ce;A&&(y=ei(y,Es(A))),k?(ne=er,le=!1):y.length>=i&&(ne=Tf,le=!1,y=new Vc(y));e:for(;++j<fe;){var Ze=v[j],ot=A==null?Ze:A(Ze);if(Ze=k||Ze!==0?Ze:0,le&&ot===ot){for(var Ut=Qe;Ut--;)if(y[Ut]===ot)continue e;Ce.push(Ze)}else ne(y,ot,k)||Ce.push(Ze)}return Ce}var ml=N_(Lo),Qp=N_(Zp,!0);function zu(v,y){var A=!0;return ml(v,function(k,j,ne){return A=!!y(k,j,ne),A}),A}function xo(v,y,A){for(var k=-1,j=v.length;++k<j;){var ne=v[k],le=y(ne);if(le!=null&&(fe===e?le===le&&!ls(le):A(le,fe)))var fe=le,Ce=ne}return Ce}function Lf(v,y,A,k){var j=v.length;for(A=Rn(A),A<0&&(A=-A>j?0:j+A),k=k===e||k>j?j:Rn(k),k<0&&(k+=j),k=A>k?0:E0(k);A<k;)v[A++]=y;return v}function Xp(v,y){var A=[];return ml(v,function(k,j,ne){y(k,j,ne)&&A.push(k)}),A}function Qi(v,y,A,k,j){var ne=-1,le=v.length;for(A||(A=P_),j||(j=[]);++ne<le;){var fe=v[ne];y>0&&A(fe)?y>1?Qi(fe,y-1,A,k,j):Lu(j,fe):k||(j[j.length]=fe)}return j}var jc=A_(),ih=A_(!0);function Lo(v,y){return v&&jc(v,y,la)}function Zp(v,y){return v&&ih(v,y,la)}function Jl(v,y){return Qt(y,function(A){return Us(v[A])})}function gl(v,y){y=Is(y,v);for(var A=0,k=y.length;v!=null&&A<k;)v=v[ns(y[A++])];return A&&A==k?v:e}function u_(v,y,A){var k=y(v);return Bn(v)?k:Lu(k,A(v))}function va(v){return v==null?v===e?_t:en:Yl&&Yl in Lr(v)?Zf(v):B_(v)}function kf(v,y){return v>y}function Ns(v,y){return v!=null&&Dr.call(v,y)}function uo(v,y){return v!=null&&y in Lr(v)}function ju(v,y,A){return v>=Hi(y,A)&&v<yi(y,A)}function Pf(v,y,A){for(var k=A?er:Or,j=v[0].length,ne=v.length,le=ne,fe=Oe(ne),Ce=1/0,Qe=[];le--;){var Ze=v[le];le&&y&&(Ze=ei(Ze,Es(y))),Ce=Hi(Ze.length,Ce),fe[le]=!A&&(y||j>=120&&Ze.length>=120)?new Vc(le&&Ze):e}Ze=v[0];var ot=-1,Ut=fe[0];e:for(;++ot<j&&Qe.length<Ce;){var cn=Ze[ot],On=y?y(cn):cn;if(cn=A||cn!==0?cn:0,!(Ut?Tf(Ut,On):k(Qe,On,A))){for(le=ne;--le;){var tr=fe[le];if(!(tr?Tf(tr,On):k(v[le],On,A)))continue e}Ut&&Ut.push(On),Qe.push(cn)}}return Qe}function nb(v,y,A,k){return Lo(v,function(j,ne,le){y(k,A(j),ne,le)}),k}function co(v,y,A){y=Is(y,v),v=nv(v,y);var k=v==null?v:v[ns(ri(y))];return k==null?e:$t(k,v,A)}function es(v){return Ci(v)&&va(v)==ge}function Ui(v){return Ci(v)&&va(v)==Ft}function Jp(v){return Ci(v)&&va(v)==yt}function As(v,y,A,k,j){return v===y?!0:v==null||y==null||!Ci(v)&&!Ci(y)?v!==v&&y!==y:Kn(v,y,A,k,As,j)}function Kn(v,y,A,k,j,ne){var le=Bn(v),fe=Bn(y),Ce=le?Ee:pa(v),Qe=fe?Ee:pa(y);Ce=Ce==ge?Dt:Ce,Qe=Qe==ge?Dt:Qe;var Ze=Ce==Dt,ot=Qe==Dt,Ut=Ce==Qe;if(Ut&&tc(v)){if(!tc(y))return!1;le=!0,Ze=!1}if(Ut&&!Ze)return ne||(ne=new oo),le||nc(v)?Wf(v,y,A,k,j,ne):mb(v,y,Ce,A,k,j,ne);if(!(A&b)){var cn=Ze&&Dr.call(v,"__wrapped__"),On=ot&&Dr.call(y,"__wrapped__");if(cn||On){var tr=cn?v.value():v,Dn=On?y.value():y;return ne||(ne=new oo),j(tr,Dn,A,k,ne)}}return Ut?(ne||(ne=new oo),U_(v,y,A,k,j,ne)):!1}function Gr(v){return Ci(v)&&pa(v)==Mt}function Ei(v,y,A,k){var j=A.length,ne=j,le=!k;if(v==null)return!ne;for(v=Lr(v);j--;){var fe=A[j];if(le&&fe[2]?fe[1]!==v[fe[0]]:!(fe[0]in v))return!1}for(;++j<ne;){fe=A[j];var Ce=fe[0],Qe=v[Ce],Ze=fe[1];if(le&&fe[2]){if(Qe===e&&!(Ce in v))return!1}else{var ot=new oo;if(k)var Ut=k(Qe,Ze,Ce,v,y,ot);if(!(Ut===e?As(Ze,Qe,b|C,k,ot):Ut))return!1}}return!0}function Ff(v){if(!ci(v)||yb(v))return!1;var y=Us(v)?qd:In;return y.test(Ta(v))}function ah(v){return Ci(v)&&va(v)==st}function qc(v){return Ci(v)&&pa(v)==ft}function em(v){return Ci(v)&&xm(v.length)&&!!Sr[va(v)]}function sh(v){return typeof v=="function"?v:v==null?Fa:typeof v=="object"?Bn(v)?c_(v[0],v[1]):nm(v):Y(v)}function qu(v){if(!vh(v))return Wd(v);var y=[];for(var A in Lr(v))Dr.call(v,A)&&A!="constructor"&&y.push(A);return y}function wT(v){if(!ci(v))return tu(v);var y=vh(v),A=[];for(var k in v)k=="constructor"&&(y||!Dr.call(v,k))||A.push(k);return A}function ui(v,y){return v<y}function tm(v,y){var A=-1,k=os(v)?Oe(v.length):[];return ml(v,function(j,ne,le){k[++A]=y(j,ne,le)}),k}function nm(v){var y=vm(v);return y.length==1&&y[0][2]?ym(y[0][0],y[0][1]):function(A){return A===v||Ei(A,v,y)}}function c_(v,y){return ev(v)&&yl(y)?ym(ns(v),y):function(A){var k=rc(A,v);return k===e&&k===y?C0(A,v):As(y,k,b|C)}}function Bf(v,y,A,k,j){v!==y&&jc(y,function(ne,le){if(j||(j=new oo),ci(ne))RT(v,y,le,A,Bf,k,j);else{var fe=k?k(Kr(v,le),ne,le+"",v,y,j):e;fe===e&&(fe=ne),Wp(v,le,fe)}},us)}function RT(v,y,A,k,j,ne,le){var fe=Kr(v,A),Ce=Kr(y,A),Qe=le.get(Ce);if(Qe){Wp(v,A,Qe);return}var Ze=ne?ne(fe,Ce,A+"",v,y,le):e,ot=Ze===e;if(ot){var Ut=Bn(Ce),cn=!Ut&&tc(Ce),On=!Ut&&!cn&&nc(Ce);Ze=Ce,Ut||cn||On?Bn(fe)?Ze=fe:Li(fe)?Ze=ka(fe):cn?(ot=!1,Ze=b_(Ce,!0)):On?(ot=!1,Ze=C_(Ce,!0)):Ze=[]:yv(Ce)||Xc(Ce)?(Ze=fe,Xc(fe)?Ze=Lm(fe):(!ci(fe)||Us(fe))&&(Ze=L_(Ce))):ot=!1}ot&&(le.set(Ce,Ze),j(Ze,Ce,k,ne,le),le.delete(Ce)),Wp(v,A,Ze)}function rm(v,y){var A=v.length;if(A)return y+=y<0?A:0,Fo(y,A)?v[y]:e}function im(v,y,A){y.length?y=ei(y,function(ne){return Bn(ne)?function(le){return gl(le,ne.length===1?ne[0]:ne)}:ne}):y=[Fa];var k=-1;y=ei(y,Es(bn()));var j=tm(v,function(ne,le,fe){var Ce=ei(y,function(Qe){return Qe(ne)});return{criteria:Ce,index:++k,value:ne}});return FE(j,function(ne,le){return cb(ne,le,A)})}function d_(v,y){return Ca(v,y,function(A,k){return C0(v,k)})}function Ca(v,y,A){for(var k=-1,j=y.length,ne={};++k<j;){var le=y[k],fe=gl(v,le);A(fe,le)&&ch(ne,Is(le,v),fe)}return ne}function xi(v){return function(y){return gl(y,v)}}function oh(v,y,A,k){var j=k?ET:Hd,ne=-1,le=y.length,fe=v;for(v===y&&(y=ka(y)),A&&(fe=ei(v,Es(A)));++ne<le;)for(var Ce=0,Qe=y[ne],Ze=A?A(Qe):Qe;(Ce=j(fe,Ze,Ce,k))>-1;)fe!==v&&Kl.call(fe,Ce,1),Kl.call(v,Ce,1);return v}function lh(v,y){for(var A=v?y.length:0,k=A-1;A--;){var j=y[A];if(A==k||j!==ne){var ne=j;Fo(j)?Kl.call(v,j,1):Hf(v,j)}}return v}function uh(v,y){return v+wf(Wl()*(y-v+1))}function h_(v,y,A,k){for(var j=-1,ne=yi(Kd((y-v)/(A||1)),0),le=Oe(ne);ne--;)le[k?ne:++j]=v,v+=A;return le}function ko(v,y){var A="";if(!v||y<1||y>se)return A;do y%2&&(A+=v),y=wf(y/2),y&&(v+=v);while(y);return A}function Yn(v,y){return Em(H_(v,y,Fa),v+"")}function f_(v){return xf(Ih(v))}function v_(v,y){var A=Ih(v);return av(A,Uo(y,0,A.length))}function ch(v,y,A,k){if(!ci(v))return v;y=Is(y,v);for(var j=-1,ne=y.length,le=ne-1,fe=v;fe!=null&&++j<ne;){var Ce=ns(y[j]),Qe=A;if(Ce==="__proto__"||Ce==="constructor"||Ce==="prototype")return v;if(j!=le){var Ze=fe[Ce];Qe=k?k(Ze,Ce,fe):e,Qe===e&&(Qe=ci(Ze)?Ze:Fo(y[j+1])?[]:{})}Do(fe,Ce,Qe),fe=fe[Ce]}return v}var p_=Gi?function(v,y){return Gi.set(v,y),v}:Fa,rb=to?function(v,y){return to(v,"toString",{configurable:!0,enumerable:!1,value:Rh(y),writable:!0})}:Fa;function ib(v){return av(Ih(v))}function Ms(v,y,A){var k=-1,j=v.length;y<0&&(y=-y>j?0:j+y),A=A>j?j:A,A<0&&(A+=j),j=y>A?0:A-y>>>0,y>>>=0;for(var ne=Oe(j);++k<j;)ne[k]=v[k+y];return ne}function ab(v,y){var A;return ml(v,function(k,j,ne){return A=y(k,j,ne),!A}),!!A}function dh(v,y,A){var k=0,j=v==null?k:v.length;if(typeof y=="number"&&y===y&&j<=me){for(;k<j;){var ne=k+j>>>1,le=v[ne];le!==null&&!ls(le)&&(A?le<=y:le<y)?k=ne+1:j=ne}return j}return am(v,y,Fa,A)}function am(v,y,A,k){var j=0,ne=v==null?0:v.length;if(ne===0)return 0;y=A(y);for(var le=y!==y,fe=y===null,Ce=ls(y),Qe=y===e;j<ne;){var Ze=wf((j+ne)/2),ot=A(v[Ze]),Ut=ot!==e,cn=ot===null,On=ot===ot,tr=ls(ot);if(le)var Dn=k||On;else Qe?Dn=On&&(k||Ut):fe?Dn=On&&Ut&&(k||!cn):Ce?Dn=On&&Ut&&!cn&&(k||!tr):cn||tr?Dn=!1:Dn=k?ot<=y:ot<y;Dn?j=Ze+1:ne=Ze}return Hi(ne,ce)}function sb(v,y){for(var A=-1,k=v.length,j=0,ne=[];++A<k;){var le=v[A],fe=y?y(le):le;if(!A||!Ds(fe,Ce)){var Ce=fe;ne[j++]=le===0?0:le}}return ne}function m_(v){return typeof v=="number"?v:ls(v)?pe:+v}function ts(v){if(typeof v=="string")return v;if(Bn(v))return ei(v,ts)+"";if(ls(v))return Hc?Hc.call(v):"";var y=v+"";return y=="0"&&1/v==-ie?"-0":y}function eu(v,y,A){var k=-1,j=Or,ne=v.length,le=!0,fe=[],Ce=fe;if(A)le=!1,j=er;else if(ne>=i){var Qe=y?null:vb(v);if(Qe)return kp(Qe);le=!1,j=Tf,Ce=new Vc}else Ce=y?[]:fe;e:for(;++k<ne;){var Ze=v[k],ot=y?y(Ze):Ze;if(Ze=A||Ze!==0?Ze:0,le&&ot===ot){for(var Ut=Ce.length;Ut--;)if(Ce[Ut]===ot)continue e;y&&Ce.push(ot),fe.push(Ze)}else j(Ce,ot,A)||(Ce!==fe&&Ce.push(ot),fe.push(Ze))}return fe}function Hf(v,y){return y=Is(y,v),v=nv(v,y),v==null||delete v[ns(ri(y))]}function g_(v,y,A,k){return ch(v,y,A(gl(v,y)),k)}function Gf(v,y,A,k){for(var j=v.length,ne=k?j:-1;(k?ne--:++ne<j)&&y(v[ne],ne,v););return A?Ms(v,k?0:ne,k?ne+1:j):Ms(v,k?ne+1:0,k?j:ne)}function __(v,y){var A=v;return A instanceof $n&&(A=A.value()),qg(y,function(k,j){return j.func.apply(j.thisArg,Lu([k],j.args))},A)}function sm(v,y,A){var k=v.length;if(k<2)return k?eu(v[0]):[];for(var j=-1,ne=Oe(k);++j<k;)for(var le=v[j],fe=-1;++fe<k;)fe!=j&&(ne[j]=lo(ne[j]||le,v[fe],y,A));return eu(Qi(ne,1),y,A)}function y_(v,y,A){for(var k=-1,j=v.length,ne=y.length,le={};++k<j;){var fe=k<ne?y[k]:e;A(le,v[k],fe)}return le}function E_(v){return Li(v)?v:[]}function om(v){return typeof v=="function"?v:Fa}function Is(v,y){return Bn(v)?v:ev(v,y)?[v]:G_(xr(v))}var ob=Yn;function Po(v,y,A){var k=v.length;return A=A===e?k:A,!y&&A>=k?v:Ms(v,y,A)}var Vf=YE||function(v){return _i.clearTimeout(v)};function b_(v,y){if(y)return v.slice();var A=v.length,k=Vp?Vp(A):new v.constructor(A);return v.copy(k),k}function zf(v){var y=new v.constructor(v.byteLength);return new Pc(y).set(new Pc(v)),y}function OT(v,y){var A=y?zf(v.buffer):v.buffer;return new v.constructor(A,v.byteOffset,v.byteLength)}function lb(v){var y=new v.constructor(v.source,tn.exec(v));return y.lastIndex=v.lastIndex,y}function ub(v){return Xd?Lr(Xd.call(v)):{}}function C_(v,y){var A=y?zf(v.buffer):v.buffer;return new v.constructor(A,v.byteOffset,v.length)}function S_(v,y){if(v!==y){var A=v!==e,k=v===null,j=v===v,ne=ls(v),le=y!==e,fe=y===null,Ce=y===y,Qe=ls(y);if(!fe&&!Qe&&!ne&&v>y||ne&&le&&Ce&&!fe&&!Qe||k&&le&&Ce||!A&&Ce||!j)return 1;if(!k&&!ne&&!Qe&&v<y||Qe&&A&&j&&!k&&!ne||fe&&A&&j||!le&&j||!Ce)return-1}return 0}function cb(v,y,A){for(var k=-1,j=v.criteria,ne=y.criteria,le=j.length,fe=A.length;++k<le;){var Ce=S_(j[k],ne[k]);if(Ce){if(k>=fe)return Ce;var Qe=A[k];return Ce*(Qe=="desc"?-1:1)}}return v.index-y.index}function lm(v,y,A,k){for(var j=-1,ne=v.length,le=A.length,fe=-1,Ce=y.length,Qe=yi(ne-le,0),Ze=Oe(Ce+Qe),ot=!k;++fe<Ce;)Ze[fe]=y[fe];for(;++j<le;)(ot||j<ne)&&(Ze[A[j]]=v[j]);for(;Qe--;)Ze[fe++]=v[j++];return Ze}function T_(v,y,A,k){for(var j=-1,ne=v.length,le=-1,fe=A.length,Ce=-1,Qe=y.length,Ze=yi(ne-fe,0),ot=Oe(Ze+Qe),Ut=!k;++j<Ze;)ot[j]=v[j];for(var cn=j;++Ce<Qe;)ot[cn+Ce]=y[Ce];for(;++le<fe;)(Ut||j<ne)&&(ot[cn+A[le]]=v[j++]);return ot}function ka(v,y){var A=-1,k=v.length;for(y||(y=Oe(k));++A<k;)y[A]=v[A];return y}function ho(v,y,A,k){var j=!A;A||(A={});for(var ne=-1,le=y.length;++ne<le;){var fe=y[ne],Ce=k?k(A[fe],v[fe],fe,A,v):e;Ce===e&&(Ce=v[fe]),j?Ts(A,fe,Ce):Do(A,fe,Ce)}return A}function db(v,y){return ho(v,pm(v),y)}function hb(v,y){return ho(v,Jf(v),y)}function um(v,y){return function(A,k){var j=Bn(A)?Re:eb,ne=y?y():{};return j(A,v,bn(k,2),ne)}}function $u(v){return Yn(function(y,A){var k=-1,j=A.length,ne=j>1?A[j-1]:e,le=j>2?A[2]:e;for(ne=v.length>3&&typeof ne=="function"?(j--,ne):e,le&&Sa(A[0],A[1],le)&&(ne=j<3?e:ne,j=1),y=Lr(y);++k<j;){var fe=A[k];fe&&v(y,fe,k,ne)}return y})}function N_(v,y){return function(A,k){if(A==null)return A;if(!os(A))return v(A,k);for(var j=A.length,ne=y?j:-1,le=Lr(A);(y?ne--:++ne<j)&&k(le[ne],ne,le)!==!1;);return A}}function A_(v){return function(y,A,k){for(var j=-1,ne=Lr(y),le=k(y),fe=le.length;fe--;){var Ce=le[v?fe:++j];if(A(ne[Ce],Ce,ne)===!1)break}return y}}function M_(v,y,A){var k=y&N,j=jf(v);function ne(){var le=this&&this!==_i&&this instanceof ne?j:v;return le.apply(k?A:this,arguments)}return ne}function I_(v){return function(y){y=xr(y);var A=Lc(y)?hi(y):e,k=A?A[0]:y.charAt(0),j=A?Po(A,1).join(""):y.slice(1);return k[v]()+j}}function $c(v){return function(y){return qg(M1(wh(y).replace(Pd,"")),v,"")}}function jf(v){return function(){var y=arguments;switch(y.length){case 0:return new v;case 1:return new v(y[0]);case 2:return new v(y[0],y[1]);case 3:return new v(y[0],y[1],y[2]);case 4:return new v(y[0],y[1],y[2],y[3]);case 5:return new v(y[0],y[1],y[2],y[3],y[4]);case 6:return new v(y[0],y[1],y[2],y[3],y[4],y[5]);case 7:return new v(y[0],y[1],y[2],y[3],y[4],y[5],y[6])}var A=Bu(v.prototype),k=v.apply(A,y);return ci(k)?k:A}}function DT(v,y,A){var k=jf(v);function j(){for(var ne=arguments.length,le=Oe(ne),fe=ne,Ce=bi(j);fe--;)le[fe]=arguments[fe];var Qe=ne<3&&le[0]!==Ce&&le[ne-1]!==Ce?[]:$l(le,Ce);if(ne-=Qe.length,ne<A)return hm(v,y,fh,j.placeholder,e,le,Qe,e,e,A-ne);var Ze=this&&this!==_i&&this instanceof j?k:v;return $t(Ze,this,le)}return j}function w_(v){return function(y,A,k){var j=Lr(y);if(!os(y)){var ne=bn(A,3);y=la(y),A=function(fe){return ne(j[fe],fe,j)}}var le=v(y,A,k);return le>-1?j[ne?y[le]:le]:e}}function hh(v){return _l(function(y){var A=y.length,k=A,j=Ja.prototype.thru;for(v&&y.reverse();k--;){var ne=y[k];if(typeof ne!="function")throw new bs(s);if(j&&!le&&fi(ne)=="wrapper")var le=new Ja([],!0)}for(k=le?k:A;++k<A;){ne=y[k];var fe=fi(ne),Ce=fe=="wrapper"?Qf(ne):e;Ce&&tv(Ce[0])&&Ce[1]==(x|w|L|H)&&!Ce[4].length&&Ce[9]==1?le=le[fi(Ce[0])].apply(le,Ce[3]):le=ne.length==1&&tv(ne)?le[fe]():le.thru(ne)}return function(){var Qe=arguments,Ze=Qe[0];if(le&&Qe.length==1&&Bn(Ze))return le.plant(Ze).value();for(var ot=0,Ut=A?y[ot].apply(this,Qe):Ze;++ot<A;)Ut=y[ot].call(this,Ut);return Ut}})}function fh(v,y,A,k,j,ne,le,fe,Ce,Qe){var Ze=y&x,ot=y&N,Ut=y&S,cn=y&(w|U),On=y&F,tr=Ut?e:jf(v);function Dn(){for(var pr=arguments.length,yr=Oe(pr),Vo=pr;Vo--;)yr[Vo]=arguments[Vo];if(cn)var Ls=bi(Dn),zo=Nf(yr,Ls);if(k&&(yr=lm(yr,k,j,cn)),ne&&(yr=T_(yr,ne,le,cn)),pr-=zo,cn&&pr<Qe){var Zi=$l(yr,Ls);return hm(v,y,fh,Dn.placeholder,A,yr,Zi,fe,Ce,Qe-pr)}var cu=ot?A:this,Jc=Ut?cu[v]:v;return pr=yr.length,fe?yr=rv(yr,fe):On&&pr>1&&yr.reverse(),Ze&&Ce<pr&&(yr.length=Ce),this&&this!==_i&&this instanceof Dn&&(Jc=tr||jf(Jc)),Jc.apply(cu,yr)}return Dn}function qf(v,y){return function(A,k){return nb(A,v,y(k),{})}}function $f(v,y){return function(A,k){var j;if(A===e&&k===e)return y;if(A!==e&&(j=A),k!==e){if(j===e)return k;typeof A=="string"||typeof k=="string"?(A=ts(A),k=ts(k)):(A=m_(A),k=m_(k)),j=v(A,k)}return j}}function cm(v){return _l(function(y){return y=ei(y,Es(bn())),Yn(function(A){var k=this;return v(y,function(j){return $t(j,k,A)})})})}function Ku(v,y){y=y===e?" ":ts(y);var A=y.length;if(A<2)return A?ko(y,v):y;var k=ko(y,Kd(v/Gd(y)));return Lc(y)?Po(hi(k),0,v).join(""):k.slice(0,v)}function fb(v,y,A,k){var j=y&N,ne=jf(v);function le(){for(var fe=-1,Ce=arguments.length,Qe=-1,Ze=k.length,ot=Oe(Ze+Ce),Ut=this&&this!==_i&&this instanceof le?ne:v;++Qe<Ze;)ot[Qe]=k[Qe];for(;Ce--;)ot[Qe++]=arguments[++fe];return $t(Ut,j?A:this,ot)}return le}function dm(v){return function(y,A,k){return k&&typeof k!="number"&&Sa(y,A,k)&&(A=k=e),y=lu(y),A===e?(A=y,y=0):A=lu(A),k=k===e?y<A?1:-1:lu(k),h_(y,A,k,v)}}function Kf(v){return function(y,A){return typeof y=="string"&&typeof A=="string"||(y=xs(y),A=xs(A)),v(y,A)}}function hm(v,y,A,k,j,ne,le,fe,Ce,Qe){var Ze=y&w,ot=Ze?le:e,Ut=Ze?e:le,cn=Ze?ne:e,On=Ze?e:ne;y|=Ze?L:P,y&=~(Ze?P:L),y&M||(y&=-4);var tr=[v,y,j,cn,ot,On,Ut,fe,Ce,Qe],Dn=A.apply(e,tr);return tv(v)&&bb(Dn,tr),Dn.placeholder=k,ph(Dn,v,y)}function Yf(v){var y=li[v];return function(A,k){if(A=xs(A),k=k==null?0:Hi(Rn(k),292),k&&Cs(A)){var j=(xr(A)+"e").split("e"),ne=y(j[0]+"e"+(+j[1]+k));return j=(xr(ne)+"e").split("e"),+(j[0]+"e"+(+j[1]-k))}return y(A)}}var vb=ku&&1/kp(new ku([,-0]))[1]==ie?function(v){return new ku(v)}:f;function R_(v){return function(y){var A=pa(y);return A==Mt?Lp(y):A==ft?CT(y):BE(y,v(y))}}function Pa(v,y,A,k,j,ne,le,fe){var Ce=y&S;if(!Ce&&typeof v!="function")throw new bs(s);var Qe=k?k.length:0;if(Qe||(y&=-97,k=j=e),le=le===e?le:yi(Rn(le),0),fe=fe===e?fe:Rn(fe),Qe-=j?j.length:0,y&P){var Ze=k,ot=j;k=j=e}var Ut=Ce?e:Qf(v),cn=[v,y,A,k,j,Ze,ot,ne,le,fe];if(Ut&&Eb(cn,Ut),v=cn[0],y=cn[1],A=cn[2],k=cn[3],j=cn[4],fe=cn[9]=cn[9]===e?Ce?0:v.length:yi(cn[9]-Qe,0),!fe&&y&(w|U)&&(y&=-25),!y||y==N)var On=M_(v,y,A);else y==w||y==U?On=DT(v,y,fe):(y==L||y==(N|L))&&!j.length?On=fb(v,y,A,k):On=fh.apply(e,cn);var tr=Ut?p_:bb;return ph(tr(On,cn),v,y)}function O_(v,y,A,k){return v===e||Ds(v,jd[A])&&!Dr.call(k,A)?y:v}function D_(v,y,A,k,j,ne){return ci(v)&&ci(y)&&(ne.set(y,v),Bf(v,y,e,D_,ne),ne.delete(y)),v}function pb(v){return yv(v)?e:v}function Wf(v,y,A,k,j,ne){var le=A&b,fe=v.length,Ce=y.length;if(fe!=Ce&&!(le&&Ce>fe))return!1;var Qe=ne.get(v),Ze=ne.get(y);if(Qe&&Ze)return Qe==y&&Ze==v;var ot=-1,Ut=!0,cn=A&C?new Vc:e;for(ne.set(v,y),ne.set(y,v);++ot<fe;){var On=v[ot],tr=y[ot];if(k)var Dn=le?k(tr,On,ot,y,v,ne):k(On,tr,ot,v,y,ne);if(Dn!==e){if(Dn)continue;Ut=!1;break}if(cn){if(!$g(y,function(pr,yr){if(!Tf(cn,yr)&&(On===pr||j(On,pr,A,k,ne)))return cn.push(yr)})){Ut=!1;break}}else if(!(On===tr||j(On,tr,A,k,ne))){Ut=!1;break}}return ne.delete(v),ne.delete(y),Ut}function mb(v,y,A,k,j,ne,le){switch(A){case vn:if(v.byteLength!=y.byteLength||v.byteOffset!=y.byteOffset)return!1;v=v.buffer,y=y.buffer;case Ft:return!(v.byteLength!=y.byteLength||!ne(new Pc(v),new Pc(y)));case tt:case yt:case jt:return Ds(+v,+y);case zt:return v.name==y.name&&v.message==y.message;case st:case un:return v==y+"";case Mt:var fe=Lp;case ft:var Ce=k&b;if(fe||(fe=kp),v.size!=y.size&&!Ce)return!1;var Qe=le.get(v);if(Qe)return Qe==y;k|=C,le.set(v,y);var Ze=Wf(fe(v),fe(y),k,j,ne,le);return le.delete(v),Ze;case vt:if(Xd)return Xd.call(v)==Xd.call(y)}return!1}function U_(v,y,A,k,j,ne){var le=A&b,fe=fm(v),Ce=fe.length,Qe=fm(y),Ze=Qe.length;if(Ce!=Ze&&!le)return!1;for(var ot=Ce;ot--;){var Ut=fe[ot];if(!(le?Ut in y:Dr.call(y,Ut)))return!1}var cn=ne.get(v),On=ne.get(y);if(cn&&On)return cn==y&&On==v;var tr=!0;ne.set(v,y),ne.set(y,v);for(var Dn=le;++ot<Ce;){Ut=fe[ot];var pr=v[Ut],yr=y[Ut];if(k)var Vo=le?k(yr,pr,Ut,y,v,ne):k(pr,yr,Ut,v,y,ne);if(!(Vo===e?pr===yr||j(pr,yr,A,k,ne):Vo)){tr=!1;break}Dn||(Dn=Ut=="constructor")}if(tr&&!Dn){var Ls=v.constructor,zo=y.constructor;Ls!=zo&&"constructor"in v&&"constructor"in y&&!(typeof Ls=="function"&&Ls instanceof Ls&&typeof zo=="function"&&zo instanceof zo)&&(tr=!1)}return ne.delete(v),ne.delete(y),tr}function _l(v){return Em(H_(v,e,ni),v+"")}function fm(v){return u_(v,la,pm)}function x_(v){return u_(v,us,Jf)}var Qf=Gi?function(v){return Gi.get(v)}:f;function fi(v){for(var y=v.name+"",A=Ur[y],k=Dr.call(Ur,y)?A.length:0;k--;){var j=A[k],ne=j.func;if(ne==null||ne==v)return j.name}return y}function bi(v){var y=Dr.call(W,"placeholder")?W:v;return y.placeholder}function bn(){var v=W.iteratee||Mv;return v=v===Mv?sh:v,arguments.length?v(arguments[0],arguments[1]):v}function Xf(v,y){var A=v.__data__;return _m(y)?A[typeof y=="string"?"string":"hash"]:A.map}function vm(v){for(var y=la(v),A=y.length;A--;){var k=y[A],j=v[k];y[A]=[k,j,yl(j)]}return y}function Yu(v,y){var A=HE(v,y);return Ff(A)?A:e}function Zf(v){var y=Dr.call(v,Yl),A=v[Yl];try{v[Yl]=e;var k=!0}catch{}var j=Za.call(v);return k&&(y?v[Yl]=A:delete v[Yl]),j}var pm=Rf?function(v){return v==null?[]:(v=Lr(v),Qt(Rf(v),function(y){return If.call(v,y)}))}:Ke,Jf=Rf?function(v){for(var y=[];v;)Lu(y,pm(v)),v=fl(v);return y}:Ke,pa=va;(io&&pa(new io(new ArrayBuffer(1)))!=vn||Ss&&pa(new Ss)!=Mt||jp&&pa(jp.resolve())!=ln||ku&&pa(new ku)!=ft||Bc&&pa(new Bc)!=Pt)&&(pa=function(v){var y=va(v),A=y==Dt?v.constructor:e,k=A?Ta(A):"";if(k)switch(k){case vr:return vn;case Pu:return Mt;case ao:return ln;case r_:return ft;case Fu:return Pt}return y});function UT(v,y,A){for(var k=-1,j=A.length;++k<j;){var ne=A[k],le=ne.size;switch(ne.type){case"drop":v+=le;break;case"dropRight":y-=le;break;case"take":y=Hi(y,v+le);break;case"takeRight":v=yi(v,y-le);break}}return{start:v,end:y}}function mm(v){var y=v.match(at);return y?y[1].split(Nt):[]}function gm(v,y,A){y=Is(y,v);for(var k=-1,j=y.length,ne=!1;++k<j;){var le=ns(y[k]);if(!(ne=v!=null&&A(v,le)))break;v=v[le]}return ne||++k!=j?ne:(j=v==null?0:v.length,!!j&&xm(j)&&Fo(le,j)&&(Bn(v)||Xc(v)))}function gb(v){var y=v.length,A=new v.constructor(y);return y&&typeof v[0]=="string"&&Dr.call(v,"index")&&(A.index=v.index,A.input=v.input),A}function L_(v){return typeof v.constructor=="function"&&!vh(v)?Bu(fl(v)):{}}function _b(v,y,A){var k=v.constructor;switch(y){case Ft:return zf(v);case tt:case yt:return new k(+v);case vn:return OT(v,A);case Je:case Nn:case An:case Mn:case Zt:case Gt:case xt:case Lt:case Cn:return C_(v,A);case Mt:return new k;case jt:case un:return new k(v);case st:return lb(v);case ft:return new k;case vt:return ub(v)}}function k_(v,y){var A=y.length;if(!A)return v;var k=A-1;return y[k]=(A>1?"& ":"")+y[k],y=y.join(A>2?", ":" "),v.replace(cr,`{
/* [wrapped with `+y+`] */
`)}function P_(v){return Bn(v)||Xc(v)||!!(KE&&v&&v[KE])}function Fo(v,y){var A=typeof v;return y=y??se,!!y&&(A=="number"||A!="symbol"&&oe.test(v))&&v>-1&&v%1==0&&v<y}function Sa(v,y,A){if(!ci(A))return!1;var k=typeof y;return(k=="number"?os(A)&&Fo(y,A.length):k=="string"&&y in A)?Ds(A[y],v):!1}function ev(v,y){if(Bn(v))return!1;var A=typeof v;return A=="number"||A=="symbol"||A=="boolean"||v==null||ls(v)?!0:En.test(v)||!ct.test(v)||y!=null&&v in Lr(y)}function _m(v){var y=typeof v;return y=="string"||y=="number"||y=="symbol"||y=="boolean"?v!=="__proto__":v===null}function tv(v){var y=fi(v),A=W[y];if(typeof A!="function"||!(y in $n.prototype))return!1;if(v===A)return!0;var k=Qf(A);return!!k&&v===k[0]}function yb(v){return!!Hp&&Hp in v}var F_=Fp?Us:Me;function vh(v){var y=v&&v.constructor,A=typeof y=="function"&&y.prototype||jd;return v===A}function yl(v){return v===v&&!ci(v)}function ym(v,y){return function(A){return A==null?!1:A[v]===y&&(y!==e||v in Lr(A))}}function xT(v){var y=pv(v,function(k){return A.size===c&&A.clear(),k}),A=y.cache;return y}function Eb(v,y){var A=v[1],k=y[1],j=A|k,ne=j<(N|S|x),le=k==x&&A==w||k==x&&A==H&&v[7].length<=y[8]||k==(x|H)&&y[7].length<=y[8]&&A==w;if(!(ne||le))return v;k&N&&(v[2]=y[2],j|=A&N?0:M);var fe=y[3];if(fe){var Ce=v[3];v[3]=Ce?lm(Ce,fe,y[4]):fe,v[4]=Ce?$l(v[3],h):y[4]}return fe=y[5],fe&&(Ce=v[5],v[5]=Ce?T_(Ce,fe,y[6]):fe,v[6]=Ce?$l(v[5],h):y[6]),fe=y[7],fe&&(v[7]=fe),k&x&&(v[8]=v[8]==null?y[8]:Hi(v[8],y[8])),v[9]==null&&(v[9]=y[9]),v[0]=y[0],v[1]=j,v}function tu(v){var y=[];if(v!=null)for(var A in Lr(v))y.push(A);return y}function B_(v){return Za.call(v)}function H_(v,y,A){return y=yi(y===e?v.length-1:y,0),function(){for(var k=arguments,j=-1,ne=yi(k.length-y,0),le=Oe(ne);++j<ne;)le[j]=k[y+j];j=-1;for(var fe=Oe(y+1);++j<y;)fe[j]=k[j];return fe[y]=A(le),$t(v,this,fe)}}function nv(v,y){return y.length<2?v:gl(v,Ms(y,0,-1))}function rv(v,y){for(var A=v.length,k=Hi(y.length,A),j=ka(v);k--;){var ne=y[k];v[k]=Fo(ne,A)?j[ne]:e}return v}function Kr(v,y){if(!(y==="constructor"&&typeof v[y]=="function")&&y!="__proto__")return v[y]}var bb=nu(p_),iv=Fc||function(v,y){return _i.setTimeout(v,y)},Em=nu(rb);function ph(v,y,A){var k=y+"";return Em(v,k_(k,Cb(mm(k),A)))}function nu(v){var y=0,A=0;return function(){var k=no(),j=X-(k-A);if(A=k,j>0){if(++y>=q)return arguments[0]}else y=0;return v.apply(e,arguments)}}function av(v,y){var A=-1,k=v.length,j=k-1;for(y=y===e?k:y;++A<y;){var ne=uh(A,j),le=v[ne];v[ne]=v[A],v[A]=le}return v.length=y,v}var G_=xT(function(v){var y=[];return v.charCodeAt(0)===46&&y.push(""),v.replace(ur,function(A,k,j,ne){y.push(j?ne.replace(Tt,"$1"):k||A)}),y});function ns(v){if(typeof v=="string"||ls(v))return v;var y=v+"";return y=="0"&&1/v==-ie?"-0":y}function Ta(v){if(v!=null){try{return Bp.call(v)}catch{}try{return v+""}catch{}}return""}function Cb(v,y){return _e(Le,function(A){var k="_."+A[0];y&A[1]&&!Or(v,k)&&v.push(k)}),v.sort()}function bm(v){if(v instanceof $n)return v.clone();var y=new Ja(v.__wrapped__,v.__chain__);return y.__actions__=ka(v.__actions__),y.__index__=v.__index__,y.__values__=v.__values__,y}function Sb(v,y,A){(A?Sa(v,y,A):y===e)?y=1:y=yi(Rn(y),0);var k=v==null?0:v.length;if(!k||y<1)return[];for(var j=0,ne=0,le=Oe(Kd(k/y));j<k;)le[ne++]=Ms(v,j,j+=y);return le}function V_(v){for(var y=-1,A=v==null?0:v.length,k=0,j=[];++y<A;){var ne=v[y];ne&&(j[k++]=ne)}return j}function z_(){var v=arguments.length;if(!v)return[];for(var y=Oe(v-1),A=arguments[0],k=v;k--;)y[k-1]=arguments[k];return Lu(Bn(A)?ka(A):[A],Qi(y,1))}var Cm=Yn(function(v,y){return Li(v)?lo(v,Qi(y,1,Li,!0)):[]}),Tb=Yn(function(v,y){var A=ri(y);return Li(A)&&(A=e),Li(v)?lo(v,Qi(y,1,Li,!0),bn(A,2)):[]}),ru=Yn(function(v,y){var A=ri(y);return Li(A)&&(A=e),Li(v)?lo(v,Qi(y,1,Li,!0),e,A):[]});function zi(v,y,A){var k=v==null?0:v.length;return k?(y=A||y===e?1:Rn(y),Ms(v,y<0?0:y,k)):[]}function j_(v,y,A){var k=v==null?0:v.length;return k?(y=A||y===e?1:Rn(y),y=k-y,Ms(v,0,y<0?0:y)):[]}function Nb(v,y){return v&&v.length?Gf(v,bn(y,3),!0,!0):[]}function oa(v,y){return v&&v.length?Gf(v,bn(y,3),!0):[]}function LT(v,y,A,k){var j=v==null?0:v.length;return j?(A&&typeof A!="number"&&Sa(v,y,A)&&(A=0,k=j),Lf(v,y,A,k)):[]}function q_(v,y,A){var k=v==null?0:v.length;if(!k)return-1;var j=A==null?0:Rn(A);return j<0&&(j=yi(k+j,0)),Rp(v,bn(y,3),j)}function $_(v,y,A){var k=v==null?0:v.length;if(!k)return-1;var j=k-1;return A!==e&&(j=Rn(A),j=A<0?yi(k+j,0):Hi(j,k-1)),Rp(v,bn(y,3),j,!0)}function ni(v){var y=v==null?0:v.length;return y?Qi(v,1):[]}function rs(v){var y=v==null?0:v.length;return y?Qi(v,ie):[]}function iu(v,y){var A=v==null?0:v.length;return A?(y=y===e?1:Rn(y),Qi(v,y)):[]}function Ab(v){for(var y=-1,A=v==null?0:v.length,k={};++y<A;){var j=v[y];k[j[0]]=j[1]}return k}function K_(v){return v&&v.length?v[0]:e}function Mb(v,y,A){var k=v==null?0:v.length;if(!k)return-1;var j=A==null?0:Rn(A);return j<0&&(j=yi(k+j,0)),Hd(v,y,j)}function kT(v){var y=v==null?0:v.length;return y?Ms(v,0,-1):[]}var Sm=Yn(function(v){var y=ei(v,E_);return y.length&&y[0]===v[0]?Pf(y):[]}),is=Yn(function(v){var y=ri(v),A=ei(v,E_);return y===ri(A)?y=e:A.pop(),A.length&&A[0]===v[0]?Pf(A,bn(y,2)):[]}),Bo=Yn(function(v){var y=ri(v),A=ei(v,E_);return y=typeof y=="function"?y:e,y&&A.pop(),A.length&&A[0]===v[0]?Pf(A,e,y):[]});function Ib(v,y){return v==null?"":Yd.call(v,y)}function ri(v){var y=v==null?0:v.length;return y?v[y-1]:e}function wb(v,y,A){var k=v==null?0:v.length;if(!k)return-1;var j=k;return A!==e&&(j=Rn(A),j=j<0?yi(k+j,0):Hi(j,k-1)),y===y?TT(v,y,j):Rp(v,PE,j,!0)}function au(v,y){return v&&v.length?rm(v,Rn(y)):e}var Kc=Yn(El);function El(v,y){return v&&v.length&&y&&y.length?oh(v,y):v}function Y_(v,y,A){return v&&v.length&&y&&y.length?oh(v,y,bn(A,2)):v}function W_(v,y,A){return v&&v.length&&y&&y.length?oh(v,y,e,A):v}var Ho=_l(function(v,y){var A=v==null?0:v.length,k=rh(v,y);return lh(v,ei(y,function(j){return Fo(j,A)?+j:j}).sort(S_)),k});function Rb(v,y){var A=[];if(!(v&&v.length))return A;var k=-1,j=[],ne=v.length;for(y=bn(y,3);++k<ne;){var le=v[k];y(le,k,v)&&(A.push(le),j.push(k))}return lh(v,j),A}function Wu(v){return v==null?v:vl.call(v)}function sv(v,y,A){var k=v==null?0:v.length;return k?(A&&typeof A!="number"&&Sa(v,y,A)?(y=0,A=k):(y=y==null?0:Rn(y),A=A===e?k:Rn(A)),Ms(v,y,A)):[]}function ov(v,y){return dh(v,y)}function mh(v,y,A){return am(v,y,bn(A,2))}function Ob(v,y){var A=v==null?0:v.length;if(A){var k=dh(v,y);if(k<A&&Ds(v[k],y))return k}return-1}function Db(v,y){return dh(v,y,!0)}function lv(v,y,A){return am(v,y,bn(A,2),!0)}function Ub(v,y){var A=v==null?0:v.length;if(A){var k=dh(v,y,!0)-1;if(Ds(v[k],y))return k}return-1}function Tm(v){return v&&v.length?sb(v):[]}function xb(v,y){return v&&v.length?sb(v,bn(y,2)):[]}function PT(v){var y=v==null?0:v.length;return y?Ms(v,1,y):[]}function FT(v,y,A){return v&&v.length?(y=A||y===e?1:Rn(y),Ms(v,0,y<0?0:y)):[]}function wr(v,y,A){var k=v==null?0:v.length;return k?(y=A||y===e?1:Rn(y),y=k-y,Ms(v,y<0?0:y,k)):[]}function Yr(v,y){return v&&v.length?Gf(v,bn(y,3),!1,!0):[]}function or(v,y){return v&&v.length?Gf(v,bn(y,3)):[]}var dr=Yn(function(v){return eu(Qi(v,1,Li,!0))}),kr=Yn(function(v){var y=ri(v);return Li(y)&&(y=e),eu(Qi(v,1,Li,!0),bn(y,2))}),ws=Yn(function(v){var y=ri(v);return y=typeof y=="function"?y:e,eu(Qi(v,1,Li,!0),e,y)});function Qu(v){return v&&v.length?eu(v):[]}function gh(v,y){return v&&v.length?eu(v,bn(y,2)):[]}function Q_(v,y){return y=typeof y=="function"?y:e,v&&v.length?eu(v,e,y):[]}function Go(v){if(!(v&&v.length))return[];var y=0;return v=Qt(v,function(A){if(Li(A))return y=yi(A.length,y),!0}),Up(y,function(A){return ei(v,Uc(A))})}function vi(v,y){if(!(v&&v.length))return[];var A=Go(v);return y==null?A:ei(A,function(k){return $t(y,e,k)})}var Xu=Yn(function(v,y){return Li(v)?lo(v,y):[]}),Yc=Yn(function(v){return sm(Qt(v,Li))}),X_=Yn(function(v){var y=ri(v);return Li(y)&&(y=e),sm(Qt(v,Li),bn(y,2))}),Rs=Yn(function(v){var y=ri(v);return y=typeof y=="function"?y:e,sm(Qt(v,Li),e,y)}),_h=Yn(Go);function uv(v,y){return y_(v||[],y||[],Do)}function as(v,y){return y_(v||[],y||[],ch)}var Z_=Yn(function(v){var y=v.length,A=y>1?v[y-1]:e;return A=typeof A=="function"?(v.pop(),A):e,vi(v,A)});function cv(v){var y=W(v);return y.__chain__=!0,y}function Lb(v,y){return y(v),v}function Wc(v,y){return y(v)}var Nm=_l(function(v){var y=v.length,A=y?v[0]:0,k=this.__wrapped__,j=function(ne){return rh(ne,v)};return y>1||this.__actions__.length||!(k instanceof $n)||!Fo(A)?this.thru(j):(k=k.slice(A,+A+(y?1:0)),k.__actions__.push({func:Wc,args:[j],thisArg:e}),new Ja(k,this.__chain__).thru(function(ne){return y&&!ne.length&&ne.push(e),ne}))});function Zu(){return cv(this)}function Xi(){return new Ja(this.value(),this.__chain__)}function Ju(){this.__values__===e&&(this.__values__=a1(this.value()));var v=this.__index__>=this.__values__.length,y=v?e:this.__values__[this.__index__++];return{done:v,value:y}}function yh(){return this}function su(v){for(var y,A=this;A instanceof Hu;){var k=bm(A);k.__index__=0,k.__values__=e,y?j.__wrapped__=k:y=k;var j=k;A=A.__wrapped__}return j.__wrapped__=v,y}function J_(){var v=this.__wrapped__;if(v instanceof $n){var y=v;return this.__actions__.length&&(y=new $n(this)),y=y.reverse(),y.__actions__.push({func:Wc,args:[Wu],thisArg:e}),new Ja(y,this.__chain__)}return this.thru(Wu)}function e0(){return __(this.__wrapped__,this.__actions__)}var kb=um(function(v,y,A){Dr.call(v,A)?++v[A]:Ts(v,A,1)});function dv(v,y,A){var k=Bn(v)?Vt:zu;return A&&Sa(v,y,A)&&(y=e),k(v,bn(y,3))}function t0(v,y){var A=Bn(v)?Qt:Xp;return A(v,bn(y,3))}var Os=w_(q_),Pb=w_($_);function ss(v,y){return Qi(hv(v,y),1)}function Fb(v,y){return Qi(hv(v,y),ie)}function Bb(v,y,A){return A=A===e?1:Rn(A),Qi(hv(v,y),A)}function Hb(v,y){var A=Bn(v)?_e:ml;return A(v,bn(y,3))}function ou(v,y){var A=Bn(v)?nn:Qp;return A(v,bn(y,3))}var Am=um(function(v,y,A){Dr.call(v,A)?v[A].push(y):Ts(v,A,[y])});function n0(v,y,A,k){v=os(v)?v:Ih(v),A=A&&!k?Rn(A):0;var j=v.length;return A<0&&(A=yi(j+A,0)),Cv(v)?A<=j&&v.indexOf(y,A)>-1:!!j&&Hd(v,y,A)>-1}var Eh=Yn(function(v,y,A){var k=-1,j=typeof y=="function",ne=os(v)?Oe(v.length):[];return ml(v,function(le){ne[++k]=j?$t(y,le,A):co(le,y,A)}),ne}),Gb=um(function(v,y,A){Ts(v,A,y)});function hv(v,y){var A=Bn(v)?ei:tm;return A(v,bn(y,3))}function Vb(v,y,A,k){return v==null?[]:(Bn(y)||(y=y==null?[]:[y]),A=k?e:A,Bn(A)||(A=A==null?[]:[A]),im(v,y,A))}var zb=um(function(v,y,A){v[A?0:1].push(y)},function(){return[[],[]]});function Mm(v,y,A){var k=Bn(v)?qg:Yg,j=arguments.length<3;return k(v,bn(y,4),A,j,ml)}function r0(v,y,A){var k=Bn(v)?LE:Yg,j=arguments.length<3;return k(v,bn(y,4),A,j,Qp)}function BT(v,y){var A=Bn(v)?Qt:Xp;return A(v,Rm(bn(y,3)))}function HT(v){var y=Bn(v)?xf:f_;return y(v)}function GT(v,y,A){(A?Sa(v,y,A):y===e)?y=1:y=Rn(y);var k=Bn(v)?Yp:v_;return k(v,y)}function jb(v){var y=Bn(v)?JE:ib;return y(v)}function qb(v){if(v==null)return 0;if(os(v))return Cv(v)?Gd(v):v.length;var y=pa(v);return y==Mt||y==ft?v.size:qu(v).length}function bh(v,y,A){var k=Bn(v)?$g:ab;return A&&Sa(v,y,A)&&(y=e),k(v,bn(y,3))}var Im=Yn(function(v,y){if(v==null)return[];var A=y.length;return A>1&&Sa(v,y[0],y[1])?y=[]:A>2&&Sa(y[0],y[1],y[2])&&(y=[y[0]]),im(v,Qi(y,1),[])}),fv=zp||function(){return _i.Date.now()};function $b(v,y){if(typeof y!="function")throw new bs(s);return v=Rn(v),function(){if(--v<1)return y.apply(this,arguments)}}function i0(v,y,A){return y=A?e:y,y=v&&y==null?v.length:y,Pa(v,x,e,e,e,e,y)}function a0(v,y){var A;if(typeof y!="function")throw new bs(s);return v=Rn(v),function(){return--v>0&&(A=y.apply(this,arguments)),v<=1&&(y=e),A}}var wm=Yn(function(v,y,A){var k=N;if(A.length){var j=$l(A,bi(wm));k|=L}return Pa(v,k,y,A,j)}),s0=Yn(function(v,y,A){var k=N|S;if(A.length){var j=$l(A,bi(s0));k|=L}return Pa(y,k,v,A,j)});function vv(v,y,A){y=A?e:y;var k=Pa(v,w,e,e,e,e,e,y);return k.placeholder=vv.placeholder,k}function o0(v,y,A){y=A?e:y;var k=Pa(v,U,e,e,e,e,e,y);return k.placeholder=o0.placeholder,k}function l0(v,y,A){var k,j,ne,le,fe,Ce,Qe=0,Ze=!1,ot=!1,Ut=!0;if(typeof v!="function")throw new bs(s);y=xs(y)||0,ci(A)&&(Ze=!!A.leading,ot="maxWait"in A,ne=ot?yi(xs(A.maxWait)||0,y):ne,Ut="trailing"in A?!!A.trailing:Ut);function cn(Zi){var cu=k,Jc=j;return k=j=e,Qe=Zi,le=v.apply(Jc,cu),le}function On(Zi){return Qe=Zi,fe=iv(pr,y),Ze?cn(Zi):le}function tr(Zi){var cu=Zi-Ce,Jc=Zi-Qe,k3=y-cu;return ot?Hi(k3,ne-Jc):k3}function Dn(Zi){var cu=Zi-Ce,Jc=Zi-Qe;return Ce===e||cu>=y||cu<0||ot&&Jc>=ne}function pr(){var Zi=fv();if(Dn(Zi))return yr(Zi);fe=iv(pr,tr(Zi))}function yr(Zi){return fe=e,Ut&&k?cn(Zi):(k=j=e,le)}function Vo(){fe!==e&&Vf(fe),Qe=0,k=Ce=j=fe=e}function Ls(){return fe===e?le:yr(fv())}function zo(){var Zi=fv(),cu=Dn(Zi);if(k=arguments,j=this,Ce=Zi,cu){if(fe===e)return On(Ce);if(ot)return Vf(fe),fe=iv(pr,y),cn(Ce)}return fe===e&&(fe=iv(pr,y)),le}return zo.cancel=Vo,zo.flush=Ls,zo}var Pr=Yn(function(v,y){return l_(v,1,y)}),u0=Yn(function(v,y,A){return l_(v,xs(y)||0,A)});function VT(v){return Pa(v,F)}function pv(v,y){if(typeof v!="function"||y!=null&&typeof y!="function")throw new bs(s);var A=function(){var k=arguments,j=y?y.apply(this,k):k[0],ne=A.cache;if(ne.has(j))return ne.get(j);var le=v.apply(this,k);return A.cache=ne.set(j,le)||ne,le};return A.cache=new(pv.Cache||Oo),A}pv.Cache=Oo;function Rm(v){if(typeof v!="function")throw new bs(s);return function(){var y=arguments;switch(y.length){case 0:return!v.call(this);case 1:return!v.call(this,y[0]);case 2:return!v.call(this,y[0],y[1]);case 3:return!v.call(this,y[0],y[1],y[2])}return!v.apply(this,y)}}function zT(v){return a0(2,v)}var jT=ob(function(v,y){y=y.length==1&&Bn(y[0])?ei(y[0],Es(bn())):ei(Qi(y,1),Es(bn()));var A=y.length;return Yn(function(k){for(var j=-1,ne=Hi(k.length,A);++j<ne;)k[j]=y[j].call(this,k[j]);return $t(v,this,k)})}),Ch=Yn(function(v,y){var A=$l(y,bi(Ch));return Pa(v,L,e,y,A)}),Qc=Yn(function(v,y){var A=$l(y,bi(Qc));return Pa(v,P,e,y,A)}),c0=_l(function(v,y){return Pa(v,H,e,e,e,y)});function Om(v,y){if(typeof v!="function")throw new bs(s);return y=y===e?y:Rn(y),Yn(v,y)}function d0(v,y){if(typeof v!="function")throw new bs(s);return y=y==null?0:yi(Rn(y),0),Yn(function(A){var k=A[y],j=Po(A,0,y);return k&&Lu(j,k),$t(v,this,j)})}function ec(v,y,A){var k=!0,j=!0;if(typeof v!="function")throw new bs(s);return ci(A)&&(k="leading"in A?!!A.leading:k,j="trailing"in A?!!A.trailing:j),l0(v,y,{leading:k,maxWait:y,trailing:j})}function bl(v){return i0(v,1)}function mv(v,y){return Ch(om(y),v)}function qT(){if(!arguments.length)return[];var v=arguments[0];return Bn(v)?v:[v]}function Kb(v){return La(v,_)}function Yb(v,y){return y=typeof y=="function"?y:e,La(v,_,y)}function Wb(v){return La(v,p|_)}function Qb(v,y){return y=typeof y=="function"?y:e,La(v,p|_,y)}function $T(v,y){return y==null||Vu(v,y,la(y))}function Ds(v,y){return v===y||v!==v&&y!==y}var Xb=Kf(kf),Zb=Kf(function(v,y){return v>=y}),Xc=es((function(){return arguments})())?es:function(v){return Ci(v)&&Dr.call(v,"callee")&&!If.call(v,"callee")},Bn=Oe.isArray,h0=Cf?Es(Cf):Ui;function os(v){return v!=null&&xm(v.length)&&!Us(v)}function Li(v){return Ci(v)&&os(v)}function gv(v){return v===!0||v===!1||Ci(v)&&va(v)==tt}var tc=WE||Me,Jb=Fd?Es(Fd):Jp;function lr(v){return Ci(v)&&v.nodeType===1&&!yv(v)}function f0(v){if(v==null)return!0;if(os(v)&&(Bn(v)||typeof v=="string"||typeof v.splice=="function"||tc(v)||nc(v)||Xc(v)))return!v.length;var y=pa(v);if(y==Mt||y==ft)return!v.size;if(vh(v))return!qu(v).length;for(var A in v)if(Dr.call(v,A))return!1;return!0}function Dm(v,y){return As(v,y)}function v0(v,y,A){A=typeof A=="function"?A:e;var k=A?A(v,y):e;return k===e?As(v,y,e,A):!!k}function Um(v){if(!Ci(v))return!1;var y=va(v);return y==zt||y==Ht||typeof v.message=="string"&&typeof v.name=="string"&&!yv(v)}function p0(v){return typeof v=="number"&&Cs(v)}function Us(v){if(!ci(v))return!1;var y=va(v);return y==Xt||y==Jt||y==Ye||y==Yt}function _v(v){return typeof v=="number"&&v==Rn(v)}function xm(v){return typeof v=="number"&&v>-1&&v%1==0&&v<=se}function ci(v){var y=typeof v;return v!=null&&(y=="object"||y=="function")}function Ci(v){return v!=null&&typeof v=="object"}var e1=Dc?Es(Dc):Gr;function t1(v,y){return v===y||Ei(v,y,vm(y))}function n1(v,y,A){return A=typeof A=="function"?A:e,Ei(v,y,vm(y),A)}function Vr(v){return g0(v)&&v!=+v}function m0(v){if(F_(v))throw new Fn(a);return Ff(v)}function ma(v){return v===null}function KT(v){return v==null}function g0(v){return typeof v=="number"||Ci(v)&&va(v)==jt}function yv(v){if(!Ci(v)||va(v)!=Dt)return!1;var y=fl(v);if(y===null)return!0;var A=Dr.call(y,"constructor")&&y.constructor;return typeof A=="function"&&A instanceof A&&Bp.call(A)==Gp}var Ev=Bd?Es(Bd):ah;function _0(v){return _v(v)&&v>=-se&&v<=se}var bv=Sf?Es(Sf):qc;function Cv(v){return typeof v=="string"||!Bn(v)&&Ci(v)&&va(v)==un}function ls(v){return typeof v=="symbol"||Ci(v)&&va(v)==vt}var nc=Jn?Es(Jn):em;function y0(v){return v===e}function YT(v){return Ci(v)&&pa(v)==Pt}function r1(v){return Ci(v)&&va(v)==Et}var WT=Kf(ui),i1=Kf(function(v,y){return v<=y});function a1(v){if(!v)return[];if(os(v))return Cv(v)?hi(v):ka(v);if(ha&&v[ha])return Jg(v[ha]());var y=pa(v),A=y==Mt?Lp:y==ft?kp:Ih;return A(v)}function lu(v){if(!v)return v===0?v:0;if(v=xs(v),v===ie||v===-ie){var y=v<0?-1:1;return y*he}return v===v?v:0}function Rn(v){var y=lu(v),A=y%1;return y===y?A?y-A:y:0}function E0(v){return v?Uo(Rn(v),0,K):0}function xs(v){if(typeof v=="number")return v;if(ls(v))return pe;if(ci(v)){var y=typeof v.valueOf=="function"?v.valueOf():v;v=ci(y)?y+"":y}if(typeof v!="string")return v===0?v:+v;v=xc(v);var A=qn.test(v);return A||mt.test(v)?xu(v.slice(2),A?2:8):Vn.test(v)?pe:+v}function Lm(v){return ho(v,us(v))}function QT(v){return v?Uo(Rn(v),-se,se):v===0?v:0}function xr(v){return v==null?"":ts(v)}var s1=$u(function(v,y){if(vh(y)||os(y)){ho(y,la(y),v);return}for(var A in y)Dr.call(y,A)&&Do(v,A,y[A])}),km=$u(function(v,y){ho(y,us(y),v)}),Sh=$u(function(v,y,A,k){ho(y,us(y),v,k)}),XT=$u(function(v,y,A,k){ho(y,la(y),v,k)}),fo=_l(rh);function b0(v,y){var A=Bu(v);return y==null?A:o_(A,y)}var o1=Yn(function(v,y){v=Lr(v);var A=-1,k=y.length,j=k>2?y[2]:e;for(j&&Sa(y[0],y[1],j)&&(k=1);++A<k;)for(var ne=y[A],le=us(ne),fe=-1,Ce=le.length;++fe<Ce;){var Qe=le[fe],Ze=v[Qe];(Ze===e||Ds(Ze,jd[Qe])&&!Dr.call(v,Qe))&&(v[Qe]=ne[Qe])}return v}),l1=Yn(function(v){return v.push(e,D_),$t(Nh,e,v)});function u1(v,y){return kE(v,bn(y,3),Lo)}function Sv(v,y){return kE(v,bn(y,3),Zp)}function vo(v,y){return v==null?v:jc(v,bn(y,3),us)}function c1(v,y){return v==null?v:ih(v,bn(y,3),us)}function Pm(v,y){return v&&Lo(v,bn(y,3))}function uu(v,y){return v&&Zp(v,bn(y,3))}function ZT(v){return v==null?[]:Jl(v,la(v))}function JT(v){return v==null?[]:Jl(v,us(v))}function rc(v,y,A){var k=v==null?e:gl(v,y);return k===e?A:k}function d1(v,y){return v!=null&&gm(v,y,Ns)}function C0(v,y){return v!=null&&gm(v,y,uo)}var e2=qf(function(v,y,A){y!=null&&typeof y.toString!="function"&&(y=Za.call(y)),v[y]=A},Rh(Fa)),t2=qf(function(v,y,A){y!=null&&typeof y.toString!="function"&&(y=Za.call(y)),Dr.call(v,y)?v[y].push(A):v[y]=[A]},bn),n2=Yn(co);function la(v){return os(v)?Kp(v):qu(v)}function us(v){return os(v)?Kp(v,!0):wT(v)}function r2(v,y){var A={};return y=bn(y,3),Lo(v,function(k,j,ne){Ts(A,y(k,j,ne),k)}),A}function h1(v,y){var A={};return y=bn(y,3),Lo(v,function(k,j,ne){Ts(A,j,y(k,j,ne))}),A}var Th=$u(function(v,y,A){Bf(v,y,A)}),Nh=$u(function(v,y,A,k){Bf(v,y,A,k)}),f1=_l(function(v,y){var A={};if(v==null)return A;var k=!1;y=ei(y,function(ne){return ne=Is(ne,v),k||(k=ne.length>1),ne}),ho(v,x_(v),A),k&&(A=La(A,p|m|_,pb));for(var j=y.length;j--;)Hf(A,y[j]);return A});function i2(v,y){return Mh(v,Rm(bn(y)))}var Ah=_l(function(v,y){return v==null?{}:d_(v,y)});function Mh(v,y){if(v==null)return{};var A=ei(x_(v),function(k){return[k]});return y=bn(y),Ca(v,A,function(k,j){return y(k,j[0])})}function v1(v,y,A){y=Is(y,v);var k=-1,j=y.length;for(j||(j=1,v=e);++k<j;){var ne=v==null?e:v[ns(y[k])];ne===e&&(k=j,ne=A),v=Us(ne)?ne.call(v):ne}return v}function Fm(v,y,A){return v==null?v:ch(v,y,A)}function S0(v,y,A,k){return k=typeof k=="function"?k:e,v==null?v:ch(v,y,A,k)}var Bm=R_(la),Tv=R_(us);function p1(v,y,A){var k=Bn(v),j=k||tc(v)||nc(v);if(y=bn(y,4),A==null){var ne=v&&v.constructor;j?A=k?new ne:[]:ci(v)?A=Us(ne)?Bu(fl(v)):{}:A={}}return(j?_e:Lo)(v,function(le,fe,Ce){return y(A,le,fe,Ce)}),A}function m1(v,y){return v==null?!0:Hf(v,y)}function a2(v,y,A){return v==null?v:g_(v,y,om(A))}function g1(v,y,A,k){return k=typeof k=="function"?k:e,v==null?v:g_(v,y,om(A),k)}function Ih(v){return v==null?[]:Wg(v,la(v))}function T0(v){return v==null?[]:Wg(v,us(v))}function s2(v,y,A){return A===e&&(A=y,y=e),A!==e&&(A=xs(A),A=A===A?A:0),y!==e&&(y=xs(y),y=y===y?y:0),Uo(xs(v),y,A)}function Hm(v,y,A){return y=lu(y),A===e?(A=y,y=0):A=lu(A),v=xs(v),ju(v,y,A)}function Gm(v,y,A){if(A&&typeof A!="boolean"&&Sa(v,y,A)&&(y=A=e),A===e&&(typeof y=="boolean"?(A=y,y=e):typeof v=="boolean"&&(A=v,v=e)),v===e&&y===e?(v=0,y=1):(v=lu(v),y===e?(y=v,v=0):y=lu(y)),v>y){var k=v;v=y,y=k}if(A||v%1||y%1){var j=Wl();return Hi(v+j*(y-v+hl("1e-"+((j+"").length-1))),y)}return uh(v,y)}var Vm=$c(function(v,y,A){return y=y.toLowerCase(),v+(A?_1(y):y)});function _1(v){return Zc(xr(v).toLowerCase())}function wh(v){return v=xr(v),v&&v.replace(Pe,Af).replace(yf,"")}function o2(v,y,A){v=xr(v),y=ts(y);var k=v.length;A=A===e?k:Uo(Rn(A),0,k);var j=A;return A-=y.length,A>=0&&v.slice(A,j)==y}function y1(v){return v=xr(v),v&&it.test(v)?v.replace(nt,bT):v}function E1(v){return v=xr(v),v&&ar.test(v)?v.replace(Xn,"\\$&"):v}var b1=$c(function(v,y,A){return v+(A?"-":"")+y.toLowerCase()}),C1=$c(function(v,y,A){return v+(A?" ":"")+y.toLowerCase()}),N0=I_("toLowerCase");function S1(v,y,A){v=xr(v),y=Rn(y);var k=y?Gd(v):0;if(!y||k>=y)return v;var j=(y-k)/2;return Ku(wf(j),A)+v+Ku(Kd(j),A)}function T1(v,y,A){v=xr(v),y=Rn(y);var k=y?Gd(v):0;return y&&k<y?v+Ku(y-k,A):v}function zm(v,y,A){v=xr(v),y=Rn(y);var k=y?Gd(v):0;return y&&k<y?Ku(y-k,A)+v:v}function l2(v,y,A){return A||y==null?y=0:y&&(y=+y),ro(xr(v).replace(xn,""),y||0)}function u2(v,y,A){return(A?Sa(v,y,A):y===e)?y=1:y=Rn(y),ko(xr(v),y)}function A0(){var v=arguments,y=xr(v[0]);return v.length<3?y:y.replace(v[1],v[2])}var M0=$c(function(v,y,A){return v+(A?"_":"")+y.toLowerCase()});function jm(v,y,A){return A&&typeof A!="number"&&Sa(v,y,A)&&(y=A=e),A=A===e?K:A>>>0,A?(v=xr(v),v&&(typeof y=="string"||y!=null&&!Ev(y))&&(y=ts(y),!y&&Lc(v))?Po(hi(v),0,A):v.split(y,A)):[]}var I0=$c(function(v,y,A){return v+(A?" ":"")+Zc(y)});function N1(v,y,A){return v=xr(v),A=A==null?0:Uo(Rn(A),0,v.length),y=ts(y),v.slice(A,A+y.length)==y}function w0(v,y,A){var k=W.templateSettings;A&&Sa(v,y,A)&&(y=e),v=xr(v),y=Sh({},y,k,O_);var j=Sh({},y.imports,k.imports,O_),ne=la(j),le=Wg(j,ne),fe,Ce,Qe=0,Ze=y.interpolate||ut,ot="__p += '",Ut=Pp((y.escape||ut).source+"|"+Ze.source+"|"+(Ze===gn?We:ut).source+"|"+(y.evaluate||ut).source+"|$","g"),cn="//# sourceURL="+(Dr.call(y,"sourceURL")?(y.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Du+"]")+`
`;v.replace(Ut,function(Dn,pr,yr,Vo,Ls,zo){return yr||(yr=Vo),ot+=v.slice(Qe,zo).replace(rn,xp),pr&&(fe=!0,ot+=`' +
__e(`+pr+`) +
'`),Ls&&(Ce=!0,ot+=`';
`+Ls+`;
__p += '`),yr&&(ot+=`' +
((__t = (`+yr+`)) == null ? '' : __t) +
'`),Qe=zo+Dn.length,Dn}),ot+=`';
`;var On=Dr.call(y,"variable")&&y.variable;if(!On)ot=`with (obj) {
`+ot+`
}
`;else if(At.test(On))throw new Fn(o);ot=(Ce?ot.replace(ir,""):ot).replace(It,"$1").replace(Rt,"$1;"),ot="function("+(On||"obj")+`) {
`+(On?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(fe?", __e = _.escape":"")+(Ce?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ot+`return __p
}`;var tr=R0(function(){return sr(ne,cn+"return "+ot).apply(e,le)});if(tr.source=ot,Um(tr))throw tr;return tr}function ic(v){return xr(v).toLowerCase()}function ac(v){return xr(v).toUpperCase()}function sc(v,y,A){if(v=xr(v),v&&(A||y===e))return xc(v);if(!v||!(y=ts(y)))return v;var k=hi(v),j=hi(y),ne=Qg(k,j),le=Xg(k,j)+1;return Po(k,ne,le).join("")}function Nv(v,y,A){if(v=xr(v),v&&(A||y===e))return v.slice(0,Vd(v)+1);if(!v||!(y=ts(y)))return v;var k=hi(v),j=Xg(k,hi(y))+1;return Po(k,0,j).join("")}function Av(v,y,A){if(v=xr(v),v&&(A||y===e))return v.replace(xn,"");if(!v||!(y=ts(y)))return v;var k=hi(v),j=Qg(k,hi(y));return Po(k,j).join("")}function oc(v,y){var A=Q,k=$;if(ci(y)){var j="separator"in y?y.separator:j;A="length"in y?Rn(y.length):A,k="omission"in y?ts(y.omission):k}v=xr(v);var ne=v.length;if(Lc(v)){var le=hi(v);ne=le.length}if(A>=ne)return v;var fe=A-Gd(k);if(fe<1)return k;var Ce=le?Po(le,0,fe).join(""):v.slice(0,fe);if(j===e)return Ce+k;if(le&&(fe+=Ce.length-fe),Ev(j)){if(v.slice(fe).search(j)){var Qe,Ze=Ce;for(j.global||(j=Pp(j.source,xr(tn.exec(j))+"g")),j.lastIndex=0;Qe=j.exec(Ze);)var ot=Qe.index;Ce=Ce.slice(0,ot===e?fe:ot)}}else if(v.indexOf(ts(j),fe)!=fe){var Ut=Ce.lastIndexOf(j);Ut>-1&&(Ce=Ce.slice(0,Ut))}return Ce+k}function c2(v){return v=xr(v),v&&Te.test(v)?v.replace(Ct,GE):v}var A1=$c(function(v,y,A){return v+(A?" ":"")+y.toUpperCase()}),Zc=I_("toUpperCase");function M1(v,y,A){return v=xr(v),y=A?e:y,y===e?Zg(v)?jE(v):yT(v):v.match(y)||[]}var R0=Yn(function(v,y){try{return $t(v,e,y)}catch(A){return Um(A)?A:new Fn(A)}}),qm=_l(function(v,y){return _e(y,function(A){A=ns(A),Ts(v,A,wm(v[A],v))}),v});function I1(v){var y=v==null?0:v.length,A=bn();return v=y?ei(v,function(k){if(typeof k[1]!="function")throw new bs(s);return[A(k[0]),k[1]]}):[],Yn(function(k){for(var j=-1;++j<y;){var ne=v[j];if($t(ne[0],this,k))return $t(ne[1],this,k)}})}function d2(v){return tb(La(v,p))}function Rh(v){return function(){return v}}function $m(v,y){return v==null||v!==v?y:v}var w1=hh(),Oh=hh(!0);function Fa(v){return v}function Mv(v){return sh(typeof v=="function"?v:La(v,p))}function Km(v){return nm(La(v,p))}function R1(v,y){return c_(v,La(y,p))}var h2=Yn(function(v,y){return function(A){return co(A,v,y)}}),Ym=Yn(function(v,y){return function(A){return co(v,A,y)}});function l(v,y,A){var k=la(y),j=Jl(y,k);A==null&&!(ci(y)&&(j.length||!k.length))&&(A=y,y=v,v=this,j=Jl(y,la(y)));var ne=!(ci(A)&&"chain"in A)||!!A.chain,le=Us(v);return _e(j,function(fe){var Ce=y[fe];v[fe]=Ce,le&&(v.prototype[fe]=function(){var Qe=this.__chain__;if(ne||Qe){var Ze=v(this.__wrapped__),ot=Ze.__actions__=ka(this.__actions__);return ot.push({func:Ce,args:arguments,thisArg:v}),Ze.__chain__=Qe,Ze}return Ce.apply(v,Lu([this.value()],arguments))})}),v}function d(){return _i._===this&&(_i._=eo),this}function f(){}function g(v){return v=Rn(v),Yn(function(y){return rm(y,v)})}var T=cm(ei),I=cm(Vt),B=cm($g);function Y(v){return ev(v)?Uc(ns(v)):xi(v)}function de(v){return function(y){return v==null?e:gl(v,y)}}var Ae=dm(),He=dm(!0);function Ke(){return[]}function Me(){return!1}function ke(){return{}}function Wt(){return""}function Sn(){return!0}function zr(v,y){if(v=Rn(v),v<1||v>se)return[];var A=K,k=Hi(v,K);y=bn(y),v-=K;for(var j=Up(k,y);++A<v;)y(A);return j}function be(v){return Bn(v)?ei(v,ns):ls(v)?[v]:ka(G_(xr(v)))}function ve(v){var y=++$E;return xr(v)+y}var Ne=$f(function(v,y){return v+y},0),je=Yf("ceil"),_n=$f(function(v,y){return v/y},1),Tr=Yf("floor");function sn(v){return v&&v.length?xo(v,Fa,kf):e}function Qn(v,y){return v&&v.length?xo(v,bn(y,2),kf):e}function hr(v){return Op(v,Fa)}function Nr(v,y){return Op(v,bn(y,2))}function lc(v){return v&&v.length?xo(v,Fa,ui):e}function f2(v,y){return v&&v.length?xo(v,bn(y,2),ui):e}var u7=$f(function(v,y){return v*y},1),c7=Yf("round"),d7=$f(function(v,y){return v-y},0);function h7(v){return v&&v.length?Dp(v,Fa):0}function f7(v,y){return v&&v.length?Dp(v,bn(y,2)):0}return W.after=$b,W.ary=i0,W.assign=s1,W.assignIn=km,W.assignInWith=Sh,W.assignWith=XT,W.at=fo,W.before=a0,W.bind=wm,W.bindAll=qm,W.bindKey=s0,W.castArray=qT,W.chain=cv,W.chunk=Sb,W.compact=V_,W.concat=z_,W.cond=I1,W.conforms=d2,W.constant=Rh,W.countBy=kb,W.create=b0,W.curry=vv,W.curryRight=o0,W.debounce=l0,W.defaults=o1,W.defaultsDeep=l1,W.defer=Pr,W.delay=u0,W.difference=Cm,W.differenceBy=Tb,W.differenceWith=ru,W.drop=zi,W.dropRight=j_,W.dropRightWhile=Nb,W.dropWhile=oa,W.fill=LT,W.filter=t0,W.flatMap=ss,W.flatMapDeep=Fb,W.flatMapDepth=Bb,W.flatten=ni,W.flattenDeep=rs,W.flattenDepth=iu,W.flip=VT,W.flow=w1,W.flowRight=Oh,W.fromPairs=Ab,W.functions=ZT,W.functionsIn=JT,W.groupBy=Am,W.initial=kT,W.intersection=Sm,W.intersectionBy=is,W.intersectionWith=Bo,W.invert=e2,W.invertBy=t2,W.invokeMap=Eh,W.iteratee=Mv,W.keyBy=Gb,W.keys=la,W.keysIn=us,W.map=hv,W.mapKeys=r2,W.mapValues=h1,W.matches=Km,W.matchesProperty=R1,W.memoize=pv,W.merge=Th,W.mergeWith=Nh,W.method=h2,W.methodOf=Ym,W.mixin=l,W.negate=Rm,W.nthArg=g,W.omit=f1,W.omitBy=i2,W.once=zT,W.orderBy=Vb,W.over=T,W.overArgs=jT,W.overEvery=I,W.overSome=B,W.partial=Ch,W.partialRight=Qc,W.partition=zb,W.pick=Ah,W.pickBy=Mh,W.property=Y,W.propertyOf=de,W.pull=Kc,W.pullAll=El,W.pullAllBy=Y_,W.pullAllWith=W_,W.pullAt=Ho,W.range=Ae,W.rangeRight=He,W.rearg=c0,W.reject=BT,W.remove=Rb,W.rest=Om,W.reverse=Wu,W.sampleSize=GT,W.set=Fm,W.setWith=S0,W.shuffle=jb,W.slice=sv,W.sortBy=Im,W.sortedUniq=Tm,W.sortedUniqBy=xb,W.split=jm,W.spread=d0,W.tail=PT,W.take=FT,W.takeRight=wr,W.takeRightWhile=Yr,W.takeWhile=or,W.tap=Lb,W.throttle=ec,W.thru=Wc,W.toArray=a1,W.toPairs=Bm,W.toPairsIn=Tv,W.toPath=be,W.toPlainObject=Lm,W.transform=p1,W.unary=bl,W.union=dr,W.unionBy=kr,W.unionWith=ws,W.uniq=Qu,W.uniqBy=gh,W.uniqWith=Q_,W.unset=m1,W.unzip=Go,W.unzipWith=vi,W.update=a2,W.updateWith=g1,W.values=Ih,W.valuesIn=T0,W.without=Xu,W.words=M1,W.wrap=mv,W.xor=Yc,W.xorBy=X_,W.xorWith=Rs,W.zip=_h,W.zipObject=uv,W.zipObjectDeep=as,W.zipWith=Z_,W.entries=Bm,W.entriesIn=Tv,W.extend=km,W.extendWith=Sh,l(W,W),W.add=Ne,W.attempt=R0,W.camelCase=Vm,W.capitalize=_1,W.ceil=je,W.clamp=s2,W.clone=Kb,W.cloneDeep=Wb,W.cloneDeepWith=Qb,W.cloneWith=Yb,W.conformsTo=$T,W.deburr=wh,W.defaultTo=$m,W.divide=_n,W.endsWith=o2,W.eq=Ds,W.escape=y1,W.escapeRegExp=E1,W.every=dv,W.find=Os,W.findIndex=q_,W.findKey=u1,W.findLast=Pb,W.findLastIndex=$_,W.findLastKey=Sv,W.floor=Tr,W.forEach=Hb,W.forEachRight=ou,W.forIn=vo,W.forInRight=c1,W.forOwn=Pm,W.forOwnRight=uu,W.get=rc,W.gt=Xb,W.gte=Zb,W.has=d1,W.hasIn=C0,W.head=K_,W.identity=Fa,W.includes=n0,W.indexOf=Mb,W.inRange=Hm,W.invoke=n2,W.isArguments=Xc,W.isArray=Bn,W.isArrayBuffer=h0,W.isArrayLike=os,W.isArrayLikeObject=Li,W.isBoolean=gv,W.isBuffer=tc,W.isDate=Jb,W.isElement=lr,W.isEmpty=f0,W.isEqual=Dm,W.isEqualWith=v0,W.isError=Um,W.isFinite=p0,W.isFunction=Us,W.isInteger=_v,W.isLength=xm,W.isMap=e1,W.isMatch=t1,W.isMatchWith=n1,W.isNaN=Vr,W.isNative=m0,W.isNil=KT,W.isNull=ma,W.isNumber=g0,W.isObject=ci,W.isObjectLike=Ci,W.isPlainObject=yv,W.isRegExp=Ev,W.isSafeInteger=_0,W.isSet=bv,W.isString=Cv,W.isSymbol=ls,W.isTypedArray=nc,W.isUndefined=y0,W.isWeakMap=YT,W.isWeakSet=r1,W.join=Ib,W.kebabCase=b1,W.last=ri,W.lastIndexOf=wb,W.lowerCase=C1,W.lowerFirst=N0,W.lt=WT,W.lte=i1,W.max=sn,W.maxBy=Qn,W.mean=hr,W.meanBy=Nr,W.min=lc,W.minBy=f2,W.stubArray=Ke,W.stubFalse=Me,W.stubObject=ke,W.stubString=Wt,W.stubTrue=Sn,W.multiply=u7,W.nth=au,W.noConflict=d,W.noop=f,W.now=fv,W.pad=S1,W.padEnd=T1,W.padStart=zm,W.parseInt=l2,W.random=Gm,W.reduce=Mm,W.reduceRight=r0,W.repeat=u2,W.replace=A0,W.result=v1,W.round=c7,W.runInContext=ye,W.sample=HT,W.size=qb,W.snakeCase=M0,W.some=bh,W.sortedIndex=ov,W.sortedIndexBy=mh,W.sortedIndexOf=Ob,W.sortedLastIndex=Db,W.sortedLastIndexBy=lv,W.sortedLastIndexOf=Ub,W.startCase=I0,W.startsWith=N1,W.subtract=d7,W.sum=h7,W.sumBy=f7,W.template=w0,W.times=zr,W.toFinite=lu,W.toInteger=Rn,W.toLength=E0,W.toLower=ic,W.toNumber=xs,W.toSafeInteger=QT,W.toString=xr,W.toUpper=ac,W.trim=sc,W.trimEnd=Nv,W.trimStart=Av,W.truncate=oc,W.unescape=c2,W.uniqueId=ve,W.upperCase=A1,W.upperFirst=Zc,W.each=Hb,W.eachRight=ou,W.first=K_,l(W,(function(){var v={};return Lo(W,function(y,A){Dr.call(W.prototype,A)||(v[A]=y)}),v})(),{chain:!1}),W.VERSION=r,_e(["bind","bindKey","curry","curryRight","partial","partialRight"],function(v){W[v].placeholder=W}),_e(["drop","take"],function(v,y){$n.prototype[v]=function(A){A=A===e?1:yi(Rn(A),0);var k=this.__filtered__&&!y?new $n(this):this.clone();return k.__filtered__?k.__takeCount__=Hi(A,k.__takeCount__):k.__views__.push({size:Hi(A,K),type:v+(k.__dir__<0?"Right":"")}),k},$n.prototype[v+"Right"]=function(A){return this.reverse()[v](A).reverse()}}),_e(["filter","map","takeWhile"],function(v,y){var A=y+1,k=A==V||A==z;$n.prototype[v]=function(j){var ne=this.clone();return ne.__iteratees__.push({iteratee:bn(j,3),type:A}),ne.__filtered__=ne.__filtered__||k,ne}}),_e(["head","last"],function(v,y){var A="take"+(y?"Right":"");$n.prototype[v]=function(){return this[A](1).value()[0]}}),_e(["initial","tail"],function(v,y){var A="drop"+(y?"":"Right");$n.prototype[v]=function(){return this.__filtered__?new $n(this):this[A](1)}}),$n.prototype.compact=function(){return this.filter(Fa)},$n.prototype.find=function(v){return this.filter(v).head()},$n.prototype.findLast=function(v){return this.reverse().find(v)},$n.prototype.invokeMap=Yn(function(v,y){return typeof v=="function"?new $n(this):this.map(function(A){return co(A,v,y)})}),$n.prototype.reject=function(v){return this.filter(Rm(bn(v)))},$n.prototype.slice=function(v,y){v=Rn(v);var A=this;return A.__filtered__&&(v>0||y<0)?new $n(A):(v<0?A=A.takeRight(-v):v&&(A=A.drop(v)),y!==e&&(y=Rn(y),A=y<0?A.dropRight(-y):A.take(y-v)),A)},$n.prototype.takeRightWhile=function(v){return this.reverse().takeWhile(v).reverse()},$n.prototype.toArray=function(){return this.take(K)},Lo($n.prototype,function(v,y){var A=/^(?:filter|find|map|reject)|While$/.test(y),k=/^(?:head|last)$/.test(y),j=W[k?"take"+(y=="last"?"Right":""):y],ne=k||/^find/.test(y);j&&(W.prototype[y]=function(){var le=this.__wrapped__,fe=k?[1]:arguments,Ce=le instanceof $n,Qe=fe[0],Ze=Ce||Bn(le),ot=function(pr){var yr=j.apply(W,Lu([pr],fe));return k&&Ut?yr[0]:yr};Ze&&A&&typeof Qe=="function"&&Qe.length!=1&&(Ce=Ze=!1);var Ut=this.__chain__,cn=!!this.__actions__.length,On=ne&&!Ut,tr=Ce&&!cn;if(!ne&&Ze){le=tr?le:new $n(this);var Dn=v.apply(le,fe);return Dn.__actions__.push({func:Wc,args:[ot],thisArg:e}),new Ja(Dn,Ut)}return On&&tr?v.apply(this,fe):(Dn=this.thru(ot),On?k?Dn.value()[0]:Dn.value():Dn)})}),_e(["pop","push","shift","sort","splice","unshift"],function(v){var y=Mf[v],A=/^(?:push|sort|unshift)$/.test(v)?"tap":"thru",k=/^(?:pop|shift)$/.test(v);W.prototype[v]=function(){var j=arguments;if(k&&!this.__chain__){var ne=this.value();return y.apply(Bn(ne)?ne:[],j)}return this[A](function(le){return y.apply(Bn(le)?le:[],j)})}}),Lo($n.prototype,function(v,y){var A=W[y];if(A){var k=A.name+"";Dr.call(Ur,k)||(Ur[k]=[]),Ur[k].push({name:y,func:A})}}),Ur[fh(e,S).name]=[{name:"wrapper",func:e}],$n.prototype.clone=Ql,$n.prototype.reverse=Gu,$n.prototype.value=Xl,W.prototype.at=Nm,W.prototype.chain=Zu,W.prototype.commit=Xi,W.prototype.next=Ju,W.prototype.plant=su,W.prototype.reverse=J_,W.prototype.toJSON=W.prototype.valueOf=W.prototype.value=e0,W.prototype.first=W.prototype.head,ha&&(W.prototype[ha]=yh),W}),zd=t_();Xa?((Xa.exports=zd)._=zd,jl._=zd):_i._=zd}).call(dd)})(wS,wS.exports);var T6=wS.exports;function Vve(t){return"reqId"in t}var o7=function(){var t,n,e=R.useContext(zve);if(!e)throw new Error("useThread must be used within a ThreadProvider");var r=Zn().state.config,i=r.logger,a=r.pubSub,s=r.groupChannel.enableMention,o=r.groupChannel.enableReactions,u=jw.useSyncExternalStore(e.subscribe,e.getState),c=u.message,h=u.parentMessage,p=u.currentChannel,m=u.threadListState,_=u.allThreadMessages,b=u.onBeforeSendUserMessage,C=u.onBeforeSendFileMessage,N=u.onBeforeSendVoiceMessage,S=u.onBeforeSendMultipleFilesMessage,M={sendMessageStart:R.useCallback(function(V){return e.setState(function(ee){return"sendingStatus"in V&&(V.sendingStatus=Tn.PENDING),J(J({},ee),{localThreadMessages:Xe(Xe([],ee.localThreadMessages,!0),[V],!1)})})},[e]),sendMessageSuccess:R.useCallback(function(V){return e.setState(function(ee){return"sendingStatus"in V&&(V.sendingStatus=Tn.SUCCEEDED),J(J({},ee),{allThreadMessages:Xe(Xe([],ee.allThreadMessages.filter(function(z){return!Bh(z?.reqId,V?.reqId)}),!0),[V],!1),localThreadMessages:ee.localThreadMessages.filter(function(z){return!Bh(z?.reqId,V?.reqId)})})})},[e]),sendMessageFailure:R.useCallback(function(V){return e.setState(function(ee){return"sendingStatus"in V&&(V.sendingStatus=Tn.FAILED),J(J({},ee),{localThreadMessages:ee.localThreadMessages.map(function(z){return Bh(z?.reqId,V?.reqId)?V:z})})})},[e]),resendMessageStart:R.useCallback(function(V){return e.setState(function(ee){return"sendingStatus"in V&&(V.sendingStatus=Tn.PENDING),J(J({},ee),{localThreadMessages:ee.localThreadMessages.map(function(z){return Bh(z?.reqId,V?.reqId)?V:z})})})},[e])},w=xve({currentChannel:p},{logger:i}),U={sendMessage:Lve({isMentionEnabled:s,currentChannel:p,onBeforeSendUserMessage:b,sendMessageStart:M.sendMessageStart,sendMessageFailure:M.sendMessageFailure},{logger:i,pubSub:a}),sendFileMessage:kve({currentChannel:p,onBeforeSendFileMessage:C,sendMessageStart:M.sendMessageStart,sendMessageFailure:M.sendMessageFailure},{logger:i,pubSub:a}),sendVoiceMessage:Pve({currentChannel:p,onBeforeSendVoiceMessage:N,sendMessageStart:M.sendMessageStart,sendMessageFailure:M.sendMessageFailure},{logger:i,pubSub:a}),sendMultipleFilesMessage:a7({currentChannel:p,onBeforeSendMultipleFilesMessage:S,publishingModules:[ya.THREAD]},{logger:i,pubSub:a})[0],resendMessage:Fve({resendMessageStart:M.resendMessageStart,sendMessageSuccess:M.sendMessageSuccess,sendMessageFailure:M.sendMessageFailure,currentChannel:p},{logger:i,pubSub:a})},L={onMessageUpdated:R.useCallback(function(V,ee){e.setState(function(z){var ie,se,he;return((ie=z.currentChannel)===null||ie===void 0?void 0:ie.url)!==V?.url?z:J(J({},z),{parentMessage:((se=z.parentMessage)===null||se===void 0?void 0:se.messageId)===ee?.messageId?ee:z.parentMessage,allThreadMessages:(he=z.allThreadMessages)===null||he===void 0?void 0:he.map(function(pe){return pe?.messageId===ee?.messageId?ee:pe})})})},[e]),onMessageDeleted:R.useCallback(function(V,ee){e.setState(function(z){var ie,se,he,pe;return((ie=z.currentChannel)===null||ie===void 0?void 0:ie.url)!==V?.url?z:((se=z?.parentMessage)===null||se===void 0?void 0:se.messageId)===ee?J(J({},z),{parentMessage:null,parentMessageState:zh.NIL,allThreadMessages:[]}):J(J({},z),{allThreadMessages:(he=z.allThreadMessages)===null||he===void 0?void 0:he.filter(function(K){return K?.messageId!==ee}),localThreadMessages:(pe=z.localThreadMessages)===null||pe===void 0?void 0:pe.filter(function(K){return K?.messageId!==ee})})})},[e]),onMessageDeletedByReqId:R.useCallback(function(V){e.setState(function(ee){return J(J({},ee),{localThreadMessages:ee.localThreadMessages.filter(function(z){return!Bh(z.reqId,V)})})})},[e])},P={updateMessage:Bve({currentChannel:p,isMentionEnabled:s,onMessageUpdated:L.onMessageUpdated},{logger:i,pubSub:a}),deleteMessage:Hve({currentChannel:p,onMessageDeleted:L.onMessageDeleted,onMessageDeletedByReqId:L.onMessageDeletedByReqId},{logger:i})},x={initializeThreadListStart:R.useCallback(function(){return e.setState(function(V){return J(J({},V),{threadListState:fd.LOADING,allThreadMessages:[]})})},[e]),initializeThreadListSuccess:R.useCallback(function(V,ee,z){return e.setState(function(ie){var se=ee?.messageId?ee?.createdAt:V?.createdAt,he=z.findIndex(function(ce){return ce?.createdAt===se}),pe=he>-1?z.slice(0,he):z,K=he>-1?z.slice(he):[];return J(J({},ie),{threadListState:fd.INITIALIZED,hasMorePrev:he===-1||he===NI,hasMoreNext:z.length-he===AI,allThreadMessages:Xe(Xe([],pe,!0),K,!0)})})},[e]),initializeThreadListFailure:R.useCallback(function(){return e.setState(function(V){return J(J({},V),{threadListState:fd.LOADING,allThreadMessages:[]})})},[e]),getPrevMessagesStart:R.useCallback(function(){return e.setState(function(V){return J({},V)})},[e]),getPrevMessagesSuccess:R.useCallback(function(V){return e.setState(function(ee){return J(J({},ee),{hasMorePrev:V.length===NI,allThreadMessages:Xe(Xe([],V,!0),ee.allThreadMessages,!0)})})},[e]),getPrevMessagesFailure:R.useCallback(function(){return e.setState(function(V){return J(J({},V),{hasMorePrev:!1})})},[e]),getNextMessagesStart:R.useCallback(function(){return e.setState(function(V){return J({},V)})},[e]),getNextMessagesSuccess:R.useCallback(function(V){return e.setState(function(ee){return J(J({},ee),{hasMoreNext:V.length===AI,allThreadMessages:Xe(Xe([],ee.allThreadMessages,!0),V,!0)})})},[e]),getNextMessagesFailure:R.useCallback(function(){return e.setState(function(V){return J(J({},V),{hasMoreNext:!1})})},[e])},H=Gve({parentMessage:h,anchorMessage:c?.messageId!==h?.messageId&&c||void 0,logger:i,isReactionEnabled:o,threadListState:m,oldestMessageTimeStamp:((t=_[0])===null||t===void 0?void 0:t.createdAt)||0,latestMessageTimeStamp:((n=_[_.length-1])===null||n===void 0?void 0:n.createdAt)||0,initializeThreadListStart:x.initializeThreadListStart,initializeThreadListSuccess:x.initializeThreadListSuccess,initializeThreadListFailure:x.initializeThreadListFailure,getPrevMessagesStart:x.getPrevMessagesStart,getPrevMessagesSuccess:x.getPrevMessagesSuccess,getPrevMessagesFailure:x.getPrevMessagesFailure,getNextMessagesStart:x.getNextMessagesStart,getNextMessagesSuccess:x.getNextMessagesSuccess,getNextMessagesFailure:x.getNextMessagesFailure}),F=H.initializeThreadFetcher,Q=H.fetchPrevThreads,$=H.fetchNextThreads,q={setCurrentUserId:R.useCallback(function(V){return e.setState(function(ee){return J(J({},ee),{currentUserId:V})})},[e]),getChannelStart:R.useCallback(function(){return e.setState(function(V){return J(J({},V),{channelState:Wv.LOADING,currentChannel:null})})},[e]),getChannelSuccess:R.useCallback(function(V){return e.setState(function(ee){var z,ie;return J(J({},ee),{channelState:Wv.INITIALIZED,currentChannel:V,isMuted:((ie=(z=V?.members)===null||z===void 0?void 0:z.find(function(se){return se?.userId===ee.currentUserId}))===null||ie===void 0?void 0:ie.isMuted)||!1,isChannelFrozen:V?.isFrozen||!1})})},[e]),getChannelFailure:R.useCallback(function(){return e.setState(function(V){return J(J({},V),{channelState:Wv.INVALID,currentChannel:null})})},[e]),getParentMessageStart:R.useCallback(function(){return e.setState(function(V){return J(J({},V),{parentMessageState:zh.LOADING,parentMessage:null})})},[e]),getParentMessageSuccess:R.useCallback(function(V){return e.setState(function(ee){return J(J({},ee),{parentMessageState:zh.INITIALIZED,parentMessage:V})})},[e]),getParentMessageFailure:R.useCallback(function(){return e.setState(function(V){return J(J({},V),{parentMessageState:zh.INVALID,parentMessage:null})})},[e]),setEmojiContainer:R.useCallback(function(V){return e.setState(function(ee){return J(J({},ee),{emojiContainer:V})})},[e]),onMessageReceived:R.useCallback(function(V,ee){return e.setState(function(z){var ie,se,he,pe;if(((ie=z.currentChannel)===null||ie===void 0?void 0:ie.url)!==V?.url||z.hasMoreNext||((se=ee?.parentMessage)===null||se===void 0?void 0:se.messageId)!==((he=z?.parentMessage)===null||he===void 0?void 0:he.messageId))return z;var K=z.allThreadMessages.findIndex(function(ce){return ce.messageId===ee.messageId})>-1;return J(J({},z),{parentMessage:((pe=z.parentMessage)===null||pe===void 0?void 0:pe.messageId)===ee?.messageId?ee:z.parentMessage,allThreadMessages:K?z.allThreadMessages.map(function(ce){return ce.messageId===ee.messageId?ee:ce}):Xe(Xe([],z.allThreadMessages.filter(function(ce){return ce?.reqId!==ee?.reqId}),!0),[ee],!1)})})},[e]),onReactionUpdated:R.useCallback(function(V){return e.setState(function(ee){var z,ie=ee.parentMessage;((z=ee.parentMessage)===null||z===void 0?void 0:z.messageId)===V?.messageId&&(ie=T6.cloneDeep(ee.parentMessage),ie.applyReactionEvent(V));var se=ee.allThreadMessages.map(function(he){if(V?.messageId===he?.messageId){var pe=T6.cloneDeep(he);return pe.applyReactionEvent(V),pe}return he});return J(J({},ee),{parentMessage:ie,allThreadMessages:Xe([],se,!0)})})},[e]),onUserMuted:R.useCallback(function(V,ee){return e.setState(function(z){var ie;return((ie=z.currentChannel)===null||ie===void 0?void 0:ie.url)!==V?.url||z.currentUserId!==ee?.userId?z:J(J({},z),{isMuted:!0})})},[e]),onUserUnmuted:R.useCallback(function(V,ee){return e.setState(function(z){var ie;return((ie=z.currentChannel)===null||ie===void 0?void 0:ie.url)!==V?.url||z.currentUserId!==ee?.userId?z:J(J({},z),{isMuted:!1})})},[e]),onUserBanned:R.useCallback(function(){return e.setState(function(V){return J(J({},V),{channelState:Wv.NIL,threadListState:fd.NIL,parentMessageState:zh.NIL,currentChannel:null,parentMessage:null,allThreadMessages:[],hasMorePrev:!1,hasMoreNext:!1})})},[e]),onUserUnbanned:R.useCallback(function(){return e.setState(function(V){return J({},V)})},[e]),onUserLeft:R.useCallback(function(){return e.setState(function(V){return J(J({},V),{channelState:Wv.NIL,threadListState:fd.NIL,parentMessageState:zh.NIL,currentChannel:null,parentMessage:null,allThreadMessages:[],hasMorePrev:!1,hasMoreNext:!1})})},[e]),onChannelFrozen:R.useCallback(function(){return e.setState(function(V){return J(J({},V),{isChannelFrozen:!0})})},[e]),onChannelUnfrozen:R.useCallback(function(){return e.setState(function(V){return J(J({},V),{isChannelFrozen:!1})})},[e]),onOperatorUpdated:R.useCallback(function(V){return e.setState(function(ee){var z;return V?.url===((z=ee.currentChannel)===null||z===void 0?void 0:z.url)?J(J({},ee),{currentChannel:V}):ee})},[e]),onTypingStatusUpdated:R.useCallback(function(V,ee){return e.setState(function(z){var ie;return Bh(V.url,(ie=z.currentChannel)===null||ie===void 0?void 0:ie.url)?J(J({},z),{typingMembers:ee}):z})},[e]),onFileInfoUpdated:R.useCallback(function(V){var ee=V.channelUrl,z=V.requestId,ie=V.index,se=V.uploadableFileInfo,he=V.error;return e.setState(function(pe){var K,ce;if(!Bh(ee,(K=pe.currentChannel)===null||K===void 0?void 0:K.url)||he)return pe;var me=pe.localThreadMessages,Le=me.find(function(Ee){return Bh(Vve(Ee)&&Ee.reqId,z)}),ge=(ce=Le.messageParams)===null||ce===void 0?void 0:ce.fileInfoList;return Array.isArray(ge)&&(ge[ie]=se),J(J({},pe),{localThreadMessages:me})})},[e])},X=R.useMemo(function(){return J(J(J(J(J(J(J(J({},q),{toggleReaction:w}),M),U),L),P),x),{initializeThreadFetcher:F,fetchPrevThreads:Q,fetchNextThreads:$})},[q,w,M,U,L,P,x,F,Q,$]);return{state:u,actions:X}},zve=E.createContext(null),jve=function(t){var n=o7().state.currentChannel;return E.createElement(v3,J({},t,{currentChannel:n}))},jN={OPERATOR:"operator"},qve=function(t,n){var e=t.sendFileMessage,r=t.sendMultipleFilesMessage,i=t.quoteMessage,a=n.logger,s=Un().stringSet,o=Zn().state.config,u=o.imageCompression,c=o?.uikitUploadSizeLimit,h=o?.uikitMultipleFilesMessageLimit,p=Qw().openModal,m=R.useCallback(function(_){return si(void 0,void 0,void 0,function(){var b,C,N,S,M;return oi(this,function(w){switch(w.label){case 0:return!e||!r?(a.warning("Channel|useHandleUploadFiles: required functions are undefined",{sendFileMessage:e,sendMultipleFilesMessage:r}),[2]):_.length===0?(a.warning("Channel|useHandleUploadFiles: given file list is empty.",{files:_}),[2]):_.length>h?(a.info("Channel|useHandleUploadFiles: Cannot upload files more than ".concat(h)),p({modalProps:{titleText:s.FILE_UPLOAD_NOTIFICATION__COUNT_LIMIT.replace("%d","".concat(h)),hideFooter:!0},childElement:function(U){var L=U.closeModal;return E.createElement(Mg,{type:mi.PRIMARY,submitText:s.BUTTON__OK,hideCancelButton:!0,onCancel:L,onSubmit:L})}}),[2]):_.some(function(U){return U.size>c})?(a.info("Channel|useHandleUploadFiles: Cannot upload file size exceeding ".concat(c)),p({modalProps:{titleText:s.FILE_UPLOAD_NOTIFICATION__SIZE_LIMIT.replace("%d","".concat(Math.floor(c/bZ))),hideFooter:!0},childElement:function(U){var L=U.closeModal;return E.createElement(Mg,{type:mi.PRIMARY,submitText:s.BUTTON__OK,hideCancelButton:!0,onCancel:L,onSubmit:L})}}),[2]):[4,n7({files:_,imageCompression:u,logger:a})];case 1:if(b=w.sent().compressedFiles,C=b,C.length===1)a.info("Channel|useHandleUploadFiles: sending one file."),N=C[0],e(N,i);else if(C.length>1)return a.info("Channel|useHandleUploadFiles: sending multiple files."),S=[],M=[],C.forEach(function(U){xd(U.type)?S.push(U):M.push(U)}),[2,M.reduce(function(U,L){return U.then(function(){return e(L,i)})},(function(){return S.length===0?Promise.resolve():S.length===1?e(S[0],i):r(S,i)})())];return[2]}})})},[e,r,i]);return m},$ve=function(t,n){var e,r=t.className,i=t.renderFileUploadIcon,a=t.renderVoiceMessageIcon,s=t.renderSendMessageIcon,o=t.acceptableMimeTypes,u=Zn().state.config,c=Ea().isMobile,h=Un().stringSet,p=u.isOnline,m=u.userMention,_=u.logger,b=u.groupChannel,C=o7(),N=C.state,S=N.currentChannel,M=N.parentMessage,w=N.isMuted,U=N.isChannelFrozen,L=N.allThreadMessages,P=C.actions,x=P.sendMessage,H=P.sendFileMessage,F=P.sendVoiceMessage,Q=P.sendMultipleFilesMessage,$=R.useRef(),q=b.enableMention,X=b.enableVoiceMessage,V=(e=C.state.isMultipleFilesMessageEnabled)!==null&&e!==void 0?e:u.isMultipleFilesMessageEnabled,ee=t.disabled||!p||w||S?.myRole!==jN.OPERATOR&&U||M===null,z=qve({sendFileMessage:H,sendMultipleFilesMessage:Q,quoteMessage:M},{logger:_}),ie=R.useState(""),se=ie[0],he=ie[1],pe=R.useState([]),K=pe[0],ce=pe[1],me=R.useState([]),Le=me[0],ge=me[1],Ee=R.useState(null),Ye=Ee[0],tt=Ee[1],yt=R.useState([]),Ht=yt[0],zt=yt[1],Xt=R.useState(null),Jt=Xt[0],Mt=Xt[1],jt=R.useState(!1),en=jt[0],Dt=jt[1],ln=p&&q&&se.length>0&&!e7(S)&&!t7(S)&&!S?.isBroadcast;R.useEffect(function(){Dt(!1)},[S?.url]);var Yt=u3({ref:n||$},{logger:_}),st=Yt?.length<m?.maxMentionCount;return R.useEffect(function(){ce(K.filter(function(ft){var un=ft.userId,vt=Le.indexOf(un);return vt<0?!1:(Le.splice(vt,1),!0)}))},[Le]),S?.isBroadcast&&S?.myRole!==jN.OPERATOR?E.createElement(E.Fragment,null):E.createElement("div",{className:Hn(en?"sendbird-thread-message-input--voice-message":"sendbird-thread-message-input",r)},ln&&E.createElement(jve,{targetNickname:se,inputEvent:Jt??void 0,onUserItemClick:function(ft){ft&&ce(Xe(Xe([],K,!0),[ft],!1)),he(""),tt(ft),Mt(null)},onFocusItemChange:function(){Mt(null)},onFetchUsers:function(ft){zt(ft)},ableAddMention:st,maxMentionCount:m?.maxMentionCount,maxSuggestionCount:m?.maxSuggestionCount}),en?E.createElement(r7,{channel:S,onSubmitClick:function(ft,un){F(ft,un,M),Dt(!1)},onCancelClick:function(){Dt(!1)}}):E.createElement(IE,{className:"sendbird-thread-message-input__message-input",messageFieldId:"sendbird-message-input-text-field--thread",channel:S,channelUrl:S?.url,isMobile:c,disabled:ee,acceptableMimeTypes:o,setMentionedUsers:ce,mentionSelectedUser:Ye,isMentionEnabled:q,isVoiceMessageEnabled:X,isSelectingMultipleFilesEnabled:V,onVoiceMessageIconClick:function(){Dt(!0)},renderFileUploadIcon:i,renderVoiceMessageIcon:a,renderSendMessageIcon:s,ref:n||$,placeholder:S?.isFrozen&&S?.myRole!==jN.OPERATOR&&h.MESSAGE_INPUT__PLACE_HOLDER__DISABLED||S?.myMutedState===Ml.MUTED&&h.MESSAGE_INPUT__PLACE_HOLDER__MUTED_SHORT||(L.length>0?h.THREAD__INPUT__REPLY_TO_THREAD:h.THREAD__INPUT__REPLY_IN_THREAD),onStartTyping:function(){var ft;(ft=S?.startTyping)===null||ft===void 0||ft.call(S)},onSendMessage:function(ft){var un,vt=ft.message,_t=ft.mentionTemplate;x({message:vt,mentionedUsers:K,mentionTemplate:_t,quoteMessage:M}),he(""),ce([]),(un=S?.endTyping)===null||un===void 0||un.call(S)},onFileUpload:z,onUserMentioned:function(ft){Ye?.userId===ft?.userId&&(tt(null),he(""))},onMentionStringChange:function(ft){he(ft)},onMentionedUserIdsUpdated:function(ft){ge(ft)},onKeyDown:function(ft){return ln&&Ht?.length>0&&(ft.key===Co.Enter&&st||ft.key===Co.ArrowUp||ft.key===Co.ArrowDown)?(Mt(ft),!0):!1}}))};E.forwardRef($ve);var Kve=function(t){var n=t.className,e=_f();return E.createElement(Tue,J({},e,{className:n,currentChannel:e.currentGroupChannel}))},Yve=function(t){var n=_f().deleteMessage;return E.createElement(Lfe,J({},t,{deleteMessage:n}))},Wve=function(t){var n=_f().deleteMessage;return E.createElement(Pfe,J({},t,{deleteMessage:n}))},N6=function(t){var n,e,r=Zn().state.config,i=_f(),a=i.initialized,s=i.currentGroupChannel,o=i.animatedMessageId,u=i.setAnimatedMessageId,c=i.updateMessage,h=i.scrollToMessage,p=i.replyType,m=i.threadReplySelectType,_=i.isReactionEnabled,b=i.toggleReaction,C=i.emojiContainer,N=i.nicknamesMap,S=i.setQuoteMessage,M=i.resendMessage,w=i.deleteMessage,U=i.renderUserMentionItem,L=i.onReplyInThread,P=i.onQuoteMessageClick,x=i.onMessageAnimated,H=i.sendMessage,F=i.localMessages,Q=i.allMessages,$=t.message;return s?E.createElement(xfe,J({},t,{channel:s,emojiContainer:C,editInputDisabled:!a||e7(s)||t7(s)||!r.isOnline,shouldRenderSuggestedReplies:((n=r?.groupChannel)===null||n===void 0?void 0:n.enableSuggestedReplies)&&(((e=r?.groupChannel)===null||e===void 0?void 0:e.showSuggestedRepliesFor)==="all_messages"?!0:$.messageId===Q[Q.length-1].messageId)&&F?.length===0&&$F($).length>0,isReactionEnabled:_,replyType:p,threadReplySelectType:m,nicknamesMap:N,renderUserMentionItem:U,scrollToMessage:h,toggleReaction:b,setQuoteMessage:S,onQuoteMessageClick:P,onReplyInThreadClick:L,sendUserMessage:function(q){H({message:q.message,mentionedUsers:q.mentionedUsers,mentionTemplate:q.mentionedMessageTemplate})},updateUserMessage:function(q,X){var V;c({messageId:q,message:(V=X.message)!==null&&V!==void 0?V:"",mentionedUsers:X.mentionedUsers,mentionTemplate:X.mentionedMessageTemplate})},resendMessage:M,deleteMessage:w,animatedMessageId:o,setAnimatedMessageId:u,onMessageAnimated:x,renderFileViewer:function(q){return E.createElement(Yve,J({},q))},renderRemoveMessageModal:function(q){return E.createElement(Wve,J({},q))}})):null},Qve=100;function Xve(t,n){return t-n}function l7(t){var n=t.hasMore,e=t.hasNext,r=t.onScroll,i=t.scrollRef,a=t.setShowScrollDownButton,s=CE(function(){var o=i?.current;if(o!=null){var u=o.scrollTop,c=o.scrollHeight,h=o.clientHeight,p=Xve(c,u);typeof a=="function"&&a(c>u+h+1),n&&yd(u,0,mc)&&r(function(){var m=o.scrollHeight>c;m&&(o.scrollTop=o.scrollHeight-p)}),e&&yd(h+u,c,mc)&&r(function(){var m=o.scrollHeight>c;m&&(o.scrollTop=u)})}});return p3(s,Qve,{trailing:!0})}var Zve=100;function Jve(t){var n=t.loading,e=R.useState(0),r=e[0],i=e[1];R.useEffect(function(){n&&i(0)},[n]);var a=function(s){var o=s.target;try{i(o.scrollHeight-o.scrollTop-o.offsetHeight)}catch{}};return{scrollBottom:r,scrollToBottomHandler:p3(a,Zve,{trailing:!0})}}function epe(){var t=_f(),n=t.scrollRef,e=t.scrollBehavior,r=e===void 0?"auto":e;return R.useEffect(function(){n.current&&(n.current.style.scrollBehavior=r)},[n.current]),null}var tpe=50,npe=function(t){var n,e,r,i,a,s,o,u=t.className,c=u===void 0?"":u,h=jg(t),p=h.renderMessage,m=h.renderMessageContent,_=h.renderSuggestedReplies,b=h.renderCustomSeparator,C=h.renderPlaceholderLoader,N=C===void 0?function(){return E.createElement(Yh,{type:Ti.LOADING})}:C,S=h.renderPlaceholderEmpty,M=S===void 0?function(){return E.createElement(Yh,{className:"sendbird-conversation__no-messages",type:Ti.NO_MESSAGES})}:S,w=h.renderFrozenNotification,U=w===void 0?function(){return E.createElement(Bfe,{className:"sendbird-conversation__messages__notification"})}:w,L=_f(),P=L.allMessages,x=L.localMessages,H=L.hasMorePrev,F=L.hasMoreNext,Q=L.setInitialTimeStamp,$=L.setAnimatedMessageId,q=L.setHighLightedMessageId,X=L.isMessageGroupingEnabled,V=L.scrollRef,ee=L.onScrollCallback,z=L.onScrollDownCallback,ie=L.messagesDispatcher,se=L.messageActionTypes,he=L.currentGroupChannel,pe=L.disableMarkAsRead,K=L.filterMessageList,ce=L.replyType,me=L.loading,Le=L.isScrolled,ge=L.unreadSince,Ee=L.unreadSinceDate,Ye=L.typingMembers,tt=Zn().state,yt=Un().stringSet,Ht=typeof K=="function"?P.filter(K):P,zt=tt.config.markAsReadScheduler,Xt=R.useState(!1),Jt=Xt[0],Mt=Xt[1];epe();var jt=function(vt){var _t=V?.current;if(_t!=null){var Pt=_t.scrollTop,Et=_t.clientHeight,Ft=_t.scrollHeight;H&&yd(Pt,0,mc)&&ee(vt),F&&yd(Et+Pt,Ft,mc)&&z(vt),!pe&&yd(Et+Pt,Ft,mc)&&he&&(ie({type:se.MARK_AS_READ,payload:{channel:he}}),zt.push(he))}},en=function(){var vt,_t;Q?.(null),$?.(null),q?.(null),V.current&&V.current.scrollTop>-1&&(V.current.scrollTop=((vt=V.current.scrollHeight)!==null&&vt!==void 0?vt:0)-((_t=V.current.offsetHeight)!==null&&_t!==void 0?_t:0))},Dt=function(vt){vt===void 0&&(vt=!1);var _t=V?.current;if(_t){var Pt=_t.scrollHeight-_t.scrollTop-_t.offsetHeight;un<Pt&&(!vt||un<mc)&&(_t.scrollTop+=Pt-un)}},ln=l7({hasMore:H,hasNext:F,onScroll:jt,scrollRef:V}),Yt=uve({onReachedBottom:function(){!F&&!pe&&he&&(ie({type:se.MARK_AS_READ,payload:{channel:he}}),zt.push(he)),Mt(!0)},onReachedTop:function(){Mt(!1)},onInBetween:function(){Mt(!1)}}),st=Jve({loading:me}),ft=st.scrollToBottomHandler,un=st.scrollBottom;return me?N():Ht.length<1?M():E.createElement(E.Fragment,null,!Le&&E.createElement(Yh,{type:Ti.LOADING}),E.createElement("div",{className:"sendbird-conversation__messages ".concat(c),dir:Rle((n=tt?.config)===null||n===void 0?void 0:n.htmlTextDirection,(e=tt?.config)===null||e===void 0?void 0:e.forceLeftToRightMessageLayout)},E.createElement("div",{className:"sendbird-conversation__scroll-container"},E.createElement("div",{className:"sendbird-conversation__padding"}),E.createElement("div",{className:"sendbird-conversation__messages-padding","data-testid":"sendbird-message-list-container",ref:V,onScroll:function(vt){ln(),ft(vt),Yt(vt)}},Ht.map(function(vt,_t){var Pt,Et,Ft=g6({allMessages:Ht,stringSet:yt,replyType:ce,isMessageGroupingEnabled:X,currentIndex:_t,currentMessage:vt,currentChannel:he}),vn=Ft.chainTop,Je=Ft.chainBottom,Nn=Ft.hasSeparator,An=((Pt=vt?.sender)===null||Pt===void 0?void 0:Pt.userId)===((Et=tt?.config)===null||Et===void 0?void 0:Et.userId);return E.createElement(bI,{message:vt,key:vt?.messageId,isByMe:An},E.createElement(N6,{handleScroll:Dt,message:vt,hasSeparator:Nn,chainTop:vn,chainBottom:Je,renderMessageContent:m,renderSuggestedReplies:_,renderCustomSeparator:b,renderMessage:p}))}),x.map(function(vt,_t){var Pt,Et,Ft=g6({allMessages:Ht,stringSet:yt,replyType:ce,isMessageGroupingEnabled:X,currentIndex:_t,currentMessage:vt,currentChannel:he}),vn=Ft.chainTop,Je=Ft.chainBottom,Nn=((Pt=vt?.sender)===null||Pt===void 0?void 0:Pt.userId)===((Et=tt?.config)===null||Et===void 0?void 0:Et.userId);return E.createElement(bI,{message:vt,key:vt?.messageId,isByMe:Nn},E.createElement(N6,{handleScroll:Dt,message:vt,chainTop:vn,chainBottom:Je,renderMessageContent:m,renderSuggestedReplies:_,renderCustomSeparator:b,renderMessage:p}))}),!F&&((i=(r=tt?.config)===null||r===void 0?void 0:r.groupChannel)===null||i===void 0?void 0:i.enableTypingIndicator)&&((o=(s=(a=tt?.config)===null||a===void 0?void 0:a.groupChannel)===null||s===void 0?void 0:s.typingIndicatorTypes)===null||o===void 0?void 0:o.has(ES.Bubble))&&E.createElement(jfe,{typingMembers:Ye,handleScroll:Dt}))),he?.isFrozen&&U(),(!Jt||F)&&(ge||Ee)&&E.createElement(Ffe,{className:"sendbird-conversation__messages__notification",count:he?.unreadMessageCount,time:ge,lastReadAt:Ee,onClick:function(){V?.current&&(V.current.scrollTop=V.current.scrollHeight),!pe&&he&&(zt.push(he),ie({type:se.MARK_AS_READ,payload:{channel:he}})),Q(null),$(null),q(null)}}),un>tpe&&E.createElement("div",{className:"sendbird-conversation__scroll-bottom-button",onClick:en,onKeyDown:en,tabIndex:0,role:"button"},E.createElement(lt,{width:"24px",height:"24px",type:qe.CHEVRON_DOWN,fillColor:rt.PRIMARY}))))},rpe=function(t){var n=_f(),e=n.quoteMessage,r=n.currentGroupChannel,i=n.sendMessage,a=n.sendFileMessage,s=n.sendVoiceMessage,o=n.sendMultipleFilesMessage;return E.createElement(ove,J({},t,n,{currentChannel:r,messages:n.allMessages,sendUserMessage:function(u){return i({message:u.message,mentionTemplate:u.mentionedMessageTemplate,mentionedUsers:u.mentionedUsers,quoteMessage:e??void 0})},sendFileMessage:function(u){return a(u.file,e??void 0)},sendVoiceMessage:function(u,c){var h=u.file;return s(h,c,e??void 0)},sendMultipleFilesMessage:function(u){var c=u.fileInfoList;return o(c.map(function(h){return h.file}),e??void 0)}}))},ipe=function(t){var n=_f(),e=n.channelUrl,r=n.isInvalid,i=jg(t),a=i.renderChannelHeader,s=a===void 0?function(p){return E.createElement(Kve,J({},p))}:a,o=i.renderMessageList,u=o===void 0?function(p){return E.createElement(npe,J({},p,{className:"sendbird-conversation__message-list"}))}:o,c=i.renderMessageInput,h=c===void 0?function(){return E.createElement(rpe,J({},t))}:c;return E.createElement(cue,J({},t,n,{isLoading:t?.isLoading,isInvalid:r,channelUrl:e,renderChannelHeader:s,renderMessageList:u,renderMessageInput:h}))},ape=function(t){return E.createElement(Dve,J({},t),E.createElement(ipe,J({},t)))},spe=E.createContext(null),D3=function(){var t=E.useContext(spe);if(!t)throw new Error("OpenChannelContext not found. Use within the OpenChannel module");return t};E.forwardRef(function(t,n){var e=D3(),r=e.currentOpenChannel,i=e.disabled,a=e.handleSendMessage,s=e.handleFileUpload,o=e.amIMuted,u=r,c=R.useContext(gi).stringSet,h=t.value;function p(){return o?c.MESSAGE_INPUT__PLACE_HOLDER__MUTED:i?c.MESSAGE_INPUT__PLACE_HOLDER__DISABLED:""}return u?E.createElement("div",{className:"sendbird-openchannel-footer"},E.createElement(IE,{channel:r,ref:n,value:h,disabled:i,isVoiceMessageEnabled:!1,onSendMessage:a,onFileUpload:s,placeholder:p()})):null});var RS=function(t){if(window.clipboardData&&window.clipboardData.setData)return window.clipboardData.setData("Text",t);if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var n=document.createElement("textarea");n.textContent=t,n.style.position="fixed",document.body.appendChild(n),n.select();try{return document.execCommand("copy")}catch{return!1}finally{document.body.removeChild(n)}}return!1},U3={PENDING:"pending",FAILED:"failed",SUCCEEDED:"succeeded"},UE=function(t){return t.sender||t._sender},x3=function(t){return t===U3.SUCCEEDED},hT=function(t){return t===U3.PENDING},xE=function(t){return t===U3.FAILED},L3=function(t,n){return UE(t).userId===n},fT=function(t){var n,e=t.message;return e?.messageType==="user"&&((n=e?.message)===null||n===void 0?void 0:n.length)>0},Ad=function(t){var n=t.message,e=t.status,r=t.userId;return L3(n,r)&&xE(e)&&n?.isResendable},vT=function(t){var n,e=t.message,r=t.status,i=t.userId;return L3(e,i)&&x3(r)&&((n=e?.isUserMessage)===null||n===void 0?void 0:n.call(e))},Sp=function(t){var n=t.message,e=t.userId;return L3(n,e)},ope=function(t){var n,e=t.message,r=t.status;return!!(!((n=e?.isFileMessage)===null||n===void 0)&&n.call(e)&&x3(r))},pT=function(t){var n=t.message,e=t.status,r=t.userId;return n.messageType==="user"?Sp({message:n,userId:r})||vT({message:n,status:e,userId:r})||fT({message:n})||Ad({message:n,status:e,userId:r}):Sp({message:n,userId:r})||Ad({message:n,status:e,userId:r})},mT=function(t){var n=t.message,e=t.parentRef,r=t.resendMessage,i=t.showEdit,a=t.showRemove,s=t.copyToClipboard,o=t.hideMenu,u=t.isEphemeral,c=u===void 0?!1:u,h=n,p=n?.sendingStatus,m=Un().stringSet,_=Zn().state.config.userId,b=n;return E.createElement(No,{isOpen:!0,menuItems:function(){return E.createElement(To,{className:"sendbird-openchannel__mobile-menu",parentRef:e,parentContainRef:e,closeDropdown:o},fT({message:h})&&E.createElement(Ka,{className:"sendbird-openchannel-og-message__top__context-menu__copy",onClick:function(){s?.()},testID:"open_channel_mobile_context_menu_copy"},E.createElement(E.Fragment,null,m.CONTEXT_MENU_DROPDOWN__COPY)),!c&&vT({message:n,userId:_,status:p})&&E.createElement(Ka,{className:"sendbird-openchannel-og-message__top__context-menu__edit",onClick:function(){i?.()},testID:"open_channel_mobile_context_menu_edit"},E.createElement(E.Fragment,null,m.CONTEXT_MENU_DROPDOWN__EDIT)),Ad({message:n,userId:_,status:p})&&E.createElement(Ka,{onClick:function(){r?.()},testID:"open_channel_mobile_context_menu_resend"},E.createElement(E.Fragment,null,m.CONTEXT_MENU_DROPDOWN__RESEND)),!c&&Sp({message:n,userId:_})&&E.createElement(Ka,{onClick:function(){a?.()},testID:"open_channel_mobile_context_menu_delete"},E.createElement(E.Fragment,null,m.CONTEXT_MENU_DROPDOWN__DELETE)),ope({message:n,status:p})&&E.createElement(Ka,{onClick:function(){o()},testID:"open_channel_mobile_context_menu_download_file"},E.createElement("a",{className:"sendbird-openchannel__mobile-menu-hyperlink",rel:"noopener noreferrer",href:b?.url,target:"_blank"},m.CONTEXT_MENU_DROPDOWN__SAVE)))}})};function lpe(t){var n=t.className,e=t.message,r=t.isOperator,i=t.isEphemeral,a=i===void 0?!1:i,s=t.userId,o=t.resendMessage,u=t.disabled,c=t.showEdit,h=t.showRemove,p=t.chainTop,m=Un(),_=m.stringSet,b=m.dateLocale,C=Ip(),N=C.disableUserProfile,S=C.renderUserProfile,M=R.useRef(),w=R.useRef(),U=R.useRef(),L=R.useRef(),P=R.useState({}),x=P[0],H=P[1],F=R.useState(!1),Q=F[0],$=F[1],q=e?.sendingStatus,X=hT(q),V=xE(q),ee=UE(e);R.useEffect(function(){var se;!((se=M?.current)===null||se===void 0)&&se.clientHeight&&M.current.clientHeight>36?H({top:"8px "}):H({top:"2px"})},[window.innerWidth]);var z=Ld({onLongPress:function(){$(!0)}}),ie=Ea().isMobile;return!e||e.messageType!=="user"?E.createElement(E.Fragment,null):E.createElement(E.Fragment,null,E.createElement("div",{className:Xe(Xe([],Array.isArray(n)?n:[n],!0),["sendbird-openchannel-user-message"],!1).join(" "),ref:M},E.createElement("div",{className:"sendbird-openchannel-user-message__left"},!p&&E.createElement(No,{menuTrigger:function(se){return E.createElement(ms,{className:"sendbird-openchannel-user-message__left__avatar",src:ee.profileUrl||"",ref:w,width:"28px",height:"28px",onClick:function(){N||se()}})},menuItems:function(se){return S?S({user:ee,close:se,currentUserId:s,avatarRef:w}):E.createElement(To,{parentRef:w,parentContainRef:w,closeDropdown:se,style:{paddingTop:"0px",paddingBottom:"0px"}},E.createElement(wp,{user:ee,onSuccess:se,disableMessaging:!0}))}})),E.createElement("div",{className:"sendbird-openchannel-user-message__right"},!p&&E.createElement("div",{className:"sendbird-openchannel-user-message__right__top"},E.createElement($e,{className:"sendbird-openchannel-user-message__right__top__sender-name",type:Ge.CAPTION_2,color:r?De.SECONDARY_3:De.ONBACKGROUND_2},ee&&(ee.friendName||ee.nickname||ee.userId)),E.createElement($e,{className:"sendbird-openchannel-user-message__right__top__sent-at",type:Ge.CAPTION_3,color:De.ONBACKGROUND_3},e?.createdAt&&qs(e?.createdAt,_.DATE_FORMAT__MESSAGE_CREATED_AT,{locale:b}))),E.createElement("div",J({},ie?J({},z):{},{className:"sendbird-openchannel-user-message__right__bottom",ref:L}),E.createElement($e,{className:"sendbird-openchannel-user-message__right__bottom__message",type:Ge.BODY_1,color:De.ONBACKGROUND_1},e?.message,t3(e)&&E.createElement($e,{key:Ll(),type:Ge.BODY_1,color:De.ONBACKGROUND_2,className:"sendbird-openchannel-user-message-word"}," ".concat(_.MESSAGE_EDITED," ")))),(X||V)&&E.createElement("div",{className:"sendbird-openchannel-user-message__right__tail"},X&&E.createElement(gf,{width:"16px",height:"16px"},E.createElement(lt,{className:"sendbird-openchannel-user-message__right__tail__pending",type:qe.SPINNER,fillColor:rt.PRIMARY,width:"16px",height:"16px"})),V&&E.createElement(lt,{className:"sendbird-openchannel-user-message__right__tail__failed",type:qe.ERROR,fillColor:rt.ERROR,width:"16px",height:"16px"}))),!ie&&E.createElement("div",{className:"sendbird-openchannel-user-message__context-menu",ref:U,style:x},E.createElement(No,{menuTrigger:function(se){return pT({message:e,userId:s,status:q})&&E.createElement(Su,{className:"sendbird-openchannel-user-message__context-menu--icon",width:"32px",height:"32px",onClick:function(){se()}},E.createElement(lt,{type:qe.MORE,fillColor:rt.CONTENT_INVERSE,width:"24px",height:"24px"}))},menuItems:function(se){return E.createElement(To,{parentRef:U,parentContainRef:U,closeDropdown:se,openLeft:!0},fT({message:e})&&E.createElement(Ka,{className:"sendbird-openchannel-user-message__context-menu__copy",onClick:function(){RS(e.message),se()},testID:"open_channel_user_message_menu_copy"},_.CONTEXT_MENU_DROPDOWN__COPY),!a&&vT({message:e,userId:s,status:q})&&E.createElement(Ka,{className:"sendbird-openchannel-user-message__context-menu__edit",onClick:function(){u||(c(!0),se())},testID:"open_channel_user_message_menu_edit"},_.CONTEXT_MENU_DROPDOWN__EDIT),Ad({message:e,userId:s,status:q})&&E.createElement(Ka,{className:"sendbird-openchannel-user-message__context-menu__resend",onClick:function(){o(e),se()},testID:"open_channel_user_message_menu_resend"},_.CONTEXT_MENU_DROPDOWN__RESEND),!a&&Sp({message:e,userId:s})&&E.createElement(Ka,{className:"sendbird-openchannel-user-message__context-menu__delete",onClick:function(){u||(h(!0),se())},testID:"open_channel_user_message_menu_delete"},_.CONTEXT_MENU_DROPDOWN__DELETE))}}))),Q&&E.createElement(mT,{message:e,parentRef:L,hideMenu:function(){$(!1)},showRemove:function(){$(!1),h(!0)},showEdit:function(){$(!1),c(!0)},copyToClipboard:function(){$(!1),RS(e?.message)},resendMessage:function(){$(!1),o(e)}}))}function upe(t){var n=t.className,e=t.message;return E.createElement("div",{className:Xe(Xe([],Array.isArray(n)?n:[n],!0),["sendbird-openchannel-admin-message"],!1).join(" ")},E.createElement($e,{className:"sendbird-openchannel-admin-message__text",type:Ge.CAPTION_2,color:De.ONBACKGROUND_2},e.message||""))}function cpe(t){var n,e,r,i=t.message,a=t.isOperator,s=t.isEphemeral,o=s===void 0?!1:s,u=t.className,c=t.disabled,h=t.showEdit,p=t.showRemove,m=t.resendMessage,_=t.chainTop,b=t.userId,C=i?.sendingStatus,N=(n=i.ogMetaData)!==null&&n!==void 0?n:null,S=N?.defaultImage,M=Un(),w=M.stringSet,U=M.dateLocale,L=Ea().isMobile,P=Ip(),x=P.disableUserProfile,H=P.renderUserProfile,F=R.useState({}),Q=F[0],$=F[1],q=R.useState(!1),X=q[0],V=q[1],ee=function(){return TE(N?.url)},z=Ld({onLongPress:function(){return V(!0)},onClick:ee},{delay:300}),ie=R.useRef(),se=R.useRef(),he=R.useRef(),pe=R.useRef(),K=hT(C),ce=xE(C),me=UE(i),Le=R.useMemo(function(){return wg({messageText:i.message})},[i?.updatedAt,i?.message]);return R.useEffect(function(){var ge,Ee;!((ge=ie?.current)===null||ge===void 0)&&ge.clientHeight&&((Ee=ie?.current)===null||Ee===void 0?void 0:Ee.clientHeight)>36?$({top:"8px "}):$({top:"2px"})},[window.innerWidth]),!i||i.messageType!=="user"?E.createElement(E.Fragment,null):E.createElement(E.Fragment,null,E.createElement("div",J({className:Xe(Xe([],Array.isArray(u)?u:[u],!0),["sendbird-openchannel-og-message"],!1).join(" "),ref:ie},L?J({},z):{}),E.createElement("div",{className:"sendbird-openchannel-og-message__top"},E.createElement("div",{className:"sendbird-openchannel-og-message__top__left"},!_&&E.createElement(No,{menuTrigger:function(ge){return E.createElement(ms,{className:"sendbird-openchannel-og-message__top__left__avatar",src:me.profileUrl||"",ref:pe,width:"28px",height:"28px",onClick:function(){x||ge()}})},menuItems:function(ge){return H?H({user:me,close:ge,currentUserId:b,avatarRef:pe}):E.createElement(To,{parentRef:pe,parentContainRef:pe,closeDropdown:ge,style:{paddingTop:"0px",paddingBottom:"0px"}},E.createElement(wp,{user:me,onSuccess:ge,disableMessaging:!0}))}})),E.createElement("div",{className:"sendbird-openchannel-og-message__top__right"},!_&&E.createElement("div",{className:"sendbird-openchannel-og-message__top__right__title"},E.createElement($e,{className:"sendbird-openchannel-og-message__top__right__title__sender-name",type:Ge.CAPTION_2,color:a?De.SECONDARY_3:De.ONBACKGROUND_2},me&&(me.friendName||me.nickname||me.userId)),E.createElement($e,{className:"sendbird-openchannel-og-message__top__right__title__sent-at",type:Ge.CAPTION_3,color:De.ONBACKGROUND_3},i?.createdAt&&qs(i?.createdAt,w.DATE_FORMAT__MESSAGE_CREATED_AT,{locale:U}))),E.createElement("div",{className:"sendbird-openchannel-og-message__top__right__description"},E.createElement($e,{className:"sendbird-openchannel-og-message__top__right__description__message",type:Ge.BODY_1,color:De.ONBACKGROUND_1},E.createElement(aE,{tokens:Le}),((e=i?.updatedAt)!==null&&e!==void 0?e:0)>0&&E.createElement($e,{key:Ll(),className:"sendbird-openchannel-og-message--word",type:Ge.BODY_1,color:De.ONBACKGROUND_2},w.MESSAGE_EDITED)))),!L&&E.createElement("div",{className:"sendbird-openchannel-og-message__top__context-menu",ref:se,style:Q},E.createElement(No,{menuTrigger:function(ge){return pT({message:i,userId:b,status:C})&&E.createElement(Su,{className:"sendbird-openchannel-og-message__top__context-menu--icon",width:"32px",height:"32px",onClick:function(){ge()}},E.createElement(lt,{type:qe.MORE,fillColor:rt.CONTENT_INVERSE,width:"24px",height:"24px"}))},menuItems:function(ge){return E.createElement(To,{parentRef:se,parentContainRef:se,closeDropdown:ge,openLeft:!0},fT({message:i})&&E.createElement(Ka,{className:"sendbird-openchannel-og-message__top__context-menu__copy",onClick:function(){RS(i.message),ge()},testID:"open_channel_og_message_menu_copy"},w.CONTEXT_MENU_DROPDOWN__COPY),!o&&vT({message:i,userId:b,status:C})&&E.createElement(Ka,{className:"sendbird-openchannel-og-message__top__context-menu__edit",onClick:function(){c||(h(!0),ge())},testID:"open_channel_og_message_menu_edit"},w.CONTEXT_MENU_DROPDOWN__EDIT),Ad({message:i,userId:b,status:C})&&E.createElement(Ka,{className:"sendbird-openchannel-og-message__top__context-menu__resend",onClick:function(){m(i),ge()},testID:"open_channel_og_message_menu_resend"},w.CONTEXT_MENU_DROPDOWN__RESEND),!o&&Sp({message:i,userId:b})&&E.createElement(Ka,{className:"sendbird-openchannel-og-message__top__context-menu__delete",onClick:function(){c||(p(!0),ge())},testID:"open_channel_og_message_menu_delete"},w.CONTEXT_MENU_DROPDOWN__DELETE))}}))),E.createElement("div",{className:"sendbird-openchannel-og-message__bottom"},E.createElement("div",{className:"sendbird-openchannel-og-message__bottom__og-tag",ref:he},N?.url&&E.createElement($e,{className:"sendbird-openchannel-og-message__bottom__og-tag__url",type:Ge.CAPTION_3,color:De.ONBACKGROUND_2},N.url),N?.title&&E.createElement(I8,{className:"sendbird-openchannel-og-message__bottom__og-tag__title",src:(r=N.url)!==null&&r!==void 0?r:"",type:Ge.SUBTITLE_2,color:De.PRIMARY},N.title),N?.description&&E.createElement($e,{className:"sendbird-openchannel-og-message__bottom__og-tag__description",type:Ge.BODY_2,color:De.ONBACKGROUND_1},N.description),N?.url&&E.createElement("div",{className:"sendbird-openchannel-og-message__bottom__og-tag__thumbnail",role:"button",onClick:ee,onKeyDown:ee,tabIndex:0},S&&E.createElement(Ni,{className:"sendbird-openchannel-og-message__bottom__og-tag__thumbnail__image",url:S.url||"",alt:S.alt||"",width:"334px",height:"189px",defaultComponent:E.createElement("div",{className:"sendbird-openchannel-og-message__bottom__og-tag__thumbnail__image--placeholder"},E.createElement(lt,{type:qe.THUMBNAIL_NONE,width:"56px",height:"56px"}))}))),(K||ce)&&E.createElement("div",{className:"sendbird-openchannel-og-message__top__right__tail"},K&&E.createElement(gf,{width:"16px",height:"16px"},E.createElement(lt,{className:"sendbird-openchannel-og-message__top__right__tail__pending",type:qe.SPINNER,fillColor:rt.PRIMARY,width:"16px",height:"16px"})),ce&&E.createElement(lt,{className:"sendbird-openchannel-og-message__top__right__tail__failed",type:qe.ERROR,fillColor:rt.ERROR,width:"16px",height:"16px"})))),X&&E.createElement(mT,{message:i,parentRef:he,hideMenu:function(){V(!1)},showRemove:function(){V(!1),p(!0)},showEdit:function(){V(!1),h(!0)},copyToClipboard:function(){V(!1),RS(i?.message)},resendMessage:function(){V(!1),m(i)}}))}var mg={IMAGE:"IMAGE",VIDEO:"VIDEO",UNSUPPORTED:"UNSUPPORTED"},A6={IMAGE:["image/jpeg","image/jpg","image/png","image/gif","image/webp"],VIDEO:["video/mpeg","video/ogg","video/webm","video/mp4"]},dpe=function(t){return A6.IMAGE.indexOf(t)>=0?mg.IMAGE:A6.VIDEO.indexOf(t)>=0?mg.VIDEO:mg.UNSUPPORTED};function hpe(t){var n,e=t.className,r=t.message,i=t.isOperator,a=t.isEphemeral,s=a===void 0?!1:a,o=t.disabled,u=t.userId,c=t.chainTop,h=t.onClick,p=t.showRemove,m=t.resendMessage,_=r.type,b=r.url,C=r.thumbnails,N=r.localUrl,S=r?.sendingStatus,M=C&&C.length>0&&C[0].url||null,w=Un(),U=w.stringSet,L=w.dateLocale,P=Ip(),x=P.disableUserProfile,H=P.renderUserProfile,F=R.useState(360),Q=F[0],$=F[1],q=R.useState(!1),X=q[0],V=q[1],ee=R.useRef(null),z=R.useRef(null),ie=R.useRef(null),se=R.useRef(null),he=Ld({onLongPress:function(){V(!0)},onClick:function(){h(!0)}}),pe=Ea().isMobile,K=R.useMemo(function(){return function(Ee){return function(Ye){var tt=Ye.style;return E.createElement("div",{style:tt},E.createElement(lt,{type:Ee,fillColor:rt.ON_BACKGROUND_2,width:"56px",height:"56px"}))}}},[]),ce=x3(S),me=hT(S),Le=xE(S),ge=UE(r);return R.useEffect(function(){var Ee,Ye,tt=((Ye=(Ee=ee?.current)===null||Ee===void 0?void 0:Ee.clientWidth)!==null&&Ye!==void 0?Ye:0)-80;$(tt>360?360:tt)},[]),E.createElement(E.Fragment,null,E.createElement("div",{className:Xe(Xe([],Array.isArray(e)?e:[e],!0),["sendbird-openchannel-thumbnail-message"],!1).join(" "),ref:ee},E.createElement("div",{className:"sendbird-openchannel-thumbnail-message__left"},!c&&E.createElement(No,{menuTrigger:function(Ee){return E.createElement(ms,{className:"sendbird-openchannel-thumbnail-message__left__avatar",src:ge.profileUrl||"",ref:se,width:"28px",height:"28px",onClick:function(){x||Ee()}})},menuItems:function(Ee){return H?H({user:ge,close:Ee,currentUserId:u,avatarRef:se}):E.createElement(To,{parentRef:se,parentContainRef:se,closeDropdown:Ee,style:{paddingTop:"0px",paddingBottom:"0px"}},E.createElement(wp,{user:ge,onSuccess:Ee,disableMessaging:!0}))}})),E.createElement("div",{className:"sendbird-openchannel-thumbnail-message__right"},!c&&E.createElement("div",{className:"sendbird-openchannel-thumbnail-message__right__title"},E.createElement($e,{className:"sendbird-openchannel-thumbnail-message__right__title__sender-name",type:Ge.CAPTION_2,color:i?De.SECONDARY_3:De.ONBACKGROUND_2},ge&&(ge.friendName||ge.nickname||ge.userId)),E.createElement($e,{className:"sendbird-openchannel-thumbnail-message__right__title__sent-at",type:Ge.CAPTION_3,color:De.ONBACKGROUND_3},r?.createdAt&&qs(r.createdAt,U.DATE_FORMAT__MESSAGE_CREATED_AT,{locale:L}))),E.createElement("div",{className:"sendbird-openchannel-thumbnail-message__right__body",ref:z},E.createElement("div",J({className:"sendbird-openchannel-thumbnail-message__right__body__wrap",role:"button",onClick:function(){ce&&h(!0)},onKeyDown:function(){ce&&h(!0)},tabIndex:0},pe?J({},he):{}),E.createElement("div",{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__overlay"}),(n={},n[mg.VIDEO]=b||N?E.createElement("div",{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__video"},M?E.createElement(Ni,{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__video",url:M,width:Q,height:"270px",alt:"image",placeHolder:K(qe.PLAY)}):E.createElement("video",{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__video__video"},E.createElement("source",{src:b||N,type:_})),E.createElement(lt,{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__video__icon",type:qe.PLAY,fillColor:rt.ON_BACKGROUND_2,width:"56px",height:"56px"})):E.createElement(lt,{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__video--icon",type:qe.PHOTO,fillColor:rt.ON_BACKGROUND_2,width:"56px",height:"56px"}),n[mg.IMAGE]=b||N?E.createElement(Ni,{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__image",url:M||b||N||"",alt:"image",width:Q,height:"270px",placeHolder:K(qe.PHOTO)}):E.createElement(lt,{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__image--icon",type:qe.PHOTO,fillColor:rt.ON_BACKGROUND_2,width:"56px",height:"56px"}),n[mg.UNSUPPORTED]=E.createElement(lt,{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__unknown",type:qe.PHOTO,fillColor:rt.ON_BACKGROUND_2,width:"56px",height:"56px"}),n)[dpe(_)])),(me||Le)&&E.createElement("div",{className:"sendbird-openchannel-thumbnail-message__right__tail"},me&&E.createElement(gf,{width:"16px",height:"16px"},E.createElement(lt,{className:"sendbird-openchannel-thumbnail-message__right__tail__pending",type:qe.SPINNER,fillColor:rt.PRIMARY,width:"16px",height:"16px"})),Le&&E.createElement(lt,{className:"sendbird-openchannel-thumbnail-message__right__tail__failed",type:qe.ERROR,fillColor:rt.ERROR,width:"16px",height:"16px"}))),!pe&&E.createElement("div",{className:"sendbird-openchannel-thumbnail-message__context-menu",ref:ie},(Ad({message:r,userId:u,status:S})||!s)&&E.createElement(No,{menuTrigger:function(Ee){return pT({message:r,userId:u,status:S})&&E.createElement(Su,{className:"sendbird-openchannel-thumbnail-message__context-menu--icon",width:"32px",height:"32px",onClick:Ee},E.createElement(lt,{type:qe.MORE,fillColor:rt.CONTENT_INVERSE,width:"24px",height:"24px"}))},menuItems:function(Ee){return E.createElement(To,{parentRef:ie,parentContainRef:ie,closeDropdown:Ee,openLeft:!0},Ad({message:r,userId:u,status:S})&&E.createElement(Ka,{onClick:function(){m(r),Ee()},testID:"open_channel_thumbnail_message_menu_resend"},U.CONTEXT_MENU_DROPDOWN__RESEND),!s&&Sp({message:r,userId:u})&&E.createElement(Ka,{onClick:function(){o||(p(!0),Ee())},testID:"open_channel_thumbnail_message_menu_delete"},U.CONTEXT_MENU_DROPDOWN__DELETE))}}))),X&&E.createElement(mT,{message:r,parentRef:z,hideMenu:function(){V(!1)},showRemove:function(){V(!1),p(!0)},resendMessage:function(){V(!1),m(r)}}))}var M6=function(t){var n=/(\.mp3)$/i,e=/(\.gif)$/i;return n.test(t)?qe.FILE_AUDIO:e.test(t)?qe.GIF:qe.FILE_DOCUMENT},fpe=function(t,n){if(t==null)return"";if(t.length<=n)return t;var e="...",r=e.length,i=n-r,a=Math.ceil(i/2),s=Math.floor(i/2);return t.substr(0,a)+e+t.substr(t.length-s)};function vpe(t){var n=t.className,e=t.message,r=t.isOperator,i=t.isEphemeral,a=i===void 0?!1:i,s=t.userId,o=t.disabled,u=t.chainTop,c=t.showRemove,h=t.resendMessage,p=e?.sendingStatus,m=Un(),_=m.dateLocale,b=m.stringSet,C=R.useRef(null),N=R.useRef(null),S=R.useRef(null),M=Ip(),w=M.disableUserProfile,U=M.renderUserProfile,L=Ea().isMobile,P=function(){return TE(e.url)},x=hT(p),H=xE(p),F=UE(e),Q=R.useState(!1),$=Q[0],q=Q[1],X=Ld({onLongPress:function(){L&&q(!0)},onClick:P},{delay:300});return E.createElement(E.Fragment,null,E.createElement("div",{className:Xe(Xe([],Array.isArray(n)?n:[n],!0),["sendbird-openchannel-file-message"],!1).join(" "),ref:N},E.createElement("div",{className:"sendbird-openchannel-file-message__left"},!u&&E.createElement(No,{menuTrigger:function(V){return E.createElement(ms,{className:"sendbird-openchannel-file-message__left__avatar",src:F.profileUrl||"",ref:S,width:"28px",height:"28px",onClick:function(){w||V()}})},menuItems:function(V){return U?U({user:F,close:V,currentUserId:s,avatarRef:S}):E.createElement(To,{parentRef:S,parentContainRef:S,closeDropdown:V,style:{paddingTop:"0px",paddingBottom:"0px"}},E.createElement(wp,{user:F,onSuccess:V,disableMessaging:!0}))}})),E.createElement("div",{className:"sendbird-openchannel-file-message__right"},!u&&E.createElement("div",{className:"sendbird-openchannel-file-message__right__title"},E.createElement($e,{className:"sendbird-openchannel-file-message__right__title__sender-name",type:Ge.CAPTION_2,color:r?De.SECONDARY_3:De.ONBACKGROUND_2},F&&(F.friendName||F.nickname||F.userId)),E.createElement($e,{className:"sendbird-openchannel-file-message__right__title__sent-at",type:Ge.CAPTION_3,color:De.ONBACKGROUND_3},e?.createdAt&&qs(e.createdAt,b.DATE_FORMAT__MESSAGE_CREATED_AT,{locale:_}))),E.createElement("div",J({className:"sendbird-openchannel-file-message__right__body"},L?J({},X):{}),M6(e.url)&&E.createElement(lt,{className:"sendbird-openchannel-file-message__right__body__icon",type:M6(e.url),fillColor:rt.PRIMARY,width:"48px",height:"48px"}),E.createElement(tT,{className:"sendbird-openchannel-file-message__right__body__file-name",onClick:P},E.createElement($e,{className:"sendbird-openchannel-file-message__right__body__file-name__label",type:Ge.BODY_1,color:De.ONBACKGROUND_1},fpe(e.name||e.url,40)))),(x||H)&&E.createElement("div",{className:"sendbird-openchannel-file-message__right__tail"},x&&E.createElement(gf,{width:"16px",height:"16px"},E.createElement(lt,{className:"sendbird-openchannel-file-message__right__tail__pending",type:qe.SPINNER,fillColor:rt.PRIMARY,width:"16px",height:"16px"})),H&&E.createElement(lt,{className:"sendbird-openchannel-file-message__right__tail__failed",type:qe.ERROR,fillColor:rt.ERROR,width:"16px",height:"16px"}))),!L&&E.createElement("div",{className:"sendbird-openchannel-file-message__context-menu",ref:C},(Ad({message:e,userId:s,status:p})||!a)&&E.createElement(No,{menuTrigger:function(V){return pT({message:e,userId:s,status:p})&&E.createElement(Su,{className:"sendbird-openchannel-file-message__context-menu__icon",width:"32px",height:"32px",onClick:V},E.createElement(lt,{type:qe.MORE,width:"24px",height:"24px"}))},menuItems:function(V){return E.createElement(To,{parentRef:C,parentContainRef:C,closeDropdown:V,openLeft:!0},Ad({message:e,userId:s,status:p})&&E.createElement(Ka,{onClick:function(){o||(h(e),V())},testID:"open_channel_file_message_context_menu_resend"},b.CONTEXT_MENU_DROPDOWN__RESEND),!a&&Sp({message:e,userId:s})&&E.createElement(Ka,{onClick:function(){o||(c(!0),V())},testID:"open_channel_file_message_context_menu_delete"},b.CONTEXT_MENU_DROPDOWN__DELETE))}}))),$&&E.createElement(mT,{message:e,hideMenu:function(){q(!1)},parentRef:N,showRemove:function(){q(!1),c(!0)}}))}function ppe(t){var n=t.message,e=t.onCloseModal,r=t.onDeleteMessage,i=R.useContext(gi).stringSet;return E.createElement(Ud,{onCancel:e,onSubmit:r,submitText:i.MESSAGE_MENU__DELETE,titleText:Q8(i,n)})}var Al={ADMIN:"ADMIN",USER:"USER",FILE:"FILE",THUMBNAIL:"THUMBNAIL",OG:"OG",UNKNOWN:"UNKNOWN"},I6={FAILED:"failed",PENDING:"pending"},mpe=function(t,n){var e,r,i=n?.isOgMessageEnabledInOpenChannel;return!((e=t?.isUserMessage)===null||e===void 0)&&e.call(t)||t?.messageType==="user"?t?.ogMetaData&&i?Al.OG:Al.USER:!((r=t?.isAdminMessage)===null||r===void 0)&&r.call(t)?Al.ADMIN:t?.messageType==="file"?xd(t.type)||uf(t.type)?Al.THUMBNAIL:Al.FILE:Al.UNKNOWN};function gpe(t){var n,e,r=t.message,i=t.chainTop,a=t.chainBottom,s=t.hasSeparator,o=t.renderMessage,u=D3(),c=u.currentOpenChannel,h=u.deleteMessage,p=u.updateMessage,m=u.resendMessage,_=Un(),b=_.dateLocale,C=_.stringSet,N=c?.isFrozen,S=Zn().state,M=(e=S?.config)===null||e===void 0?void 0:e.userId,w=S.config.openChannel.enableOgtag,U;r?.messageType!=="admin"&&(U=r?.sender);var L=R.useState(!1),P=L[0],x=L[1],H=R.useState(!1),F=H[0],Q=H[1],$=R.useState(!1),q=$[0],X=$[1],V=R.useRef(null),ee=!1;return U&&r?.messageType!=="admin"&&(ee=M===U.userId||r?.sendingStatus===I6.PENDING||r?.sendingStatus===I6.FAILED),o?E.createElement("div",{className:"sendbird-open-channel-msg-hoc sendbird-msg--scroll-ref","data-testid":"sendbird-message-hoc"},o({message:r,chainTop:i,chainBottom:a})):r?.messageType==="user"&&P?E.createElement(IE,{isEdit:!0,channel:c,disabled:N,ref:V,message:r,onUpdateMessage:function(z){var ie=z.messageId,se=z.message;p(ie,se),x(!1)},onCancelEdit:function(){x(!1)}}):E.createElement("div",{className:"sendbird-open-channel-msg-hoc sendbird-msg--scroll-ref","data-testid":"sendbird-message-hoc"},E.createElement(E.Fragment,null,s&&r?.createdAt&&E.createElement(d8,null,E.createElement($e,{type:Ge.CAPTION_2,color:De.ONBACKGROUND_2},qs(r?.createdAt,C.DATE_FORMAT__MESSAGE_LIST__DATE_SEPARATOR,{locale:b}))),(n={},n[Al.ADMIN]=(function(){if(r?.messageType==="admin")return E.createElement(upe,{message:r})})(),n[Al.FILE]=(function(){var z;if(r?.messageType==="file")return E.createElement(vpe,{message:r,isOperator:c?.isOperator((z=r?.sender)===null||z===void 0?void 0:z.userId),isEphemeral:c?.isEphemeral,disabled:N,userId:M,showRemove:Q,resendMessage:m,chainTop:i,chainBottom:a})})(),n[Al.OG]=(function(){var z;if(r?.messageType==="user"&&w)return E.createElement(cpe,{message:r,isOperator:c?.isOperator((z=r?.sender)===null||z===void 0?void 0:z.userId),isEphemeral:c?.isEphemeral,userId:M,showEdit:x,disabled:N,showRemove:Q,resendMessage:m,chainTop:i,chainBottom:a})})(),n[Al.THUMBNAIL]=(function(){var z;if(r?.messageType==="file")return E.createElement(hpe,{message:r,isOperator:c?.isOperator((z=r?.sender)===null||z===void 0?void 0:z.userId),isEphemeral:c?.isEphemeral,disabled:N,userId:M,showRemove:Q,resendMessage:m,onClick:X,chainTop:i,chainBottom:a})})(),n[Al.USER]=(function(){var z;if(r?.messageType==="user")return E.createElement(lpe,{message:r,isOperator:c?.isOperator((z=r?.sender)===null||z===void 0?void 0:z.userId),isEphemeral:c?.isEphemeral,userId:M,disabled:N,showEdit:x,showRemove:Q,resendMessage:m,chainTop:i,chainBottom:a})})(),n[Al.UNKNOWN]=(function(){})(),n)[mpe(r,{isOgMessageEnabledInOpenChannel:w})],F&&E.createElement(ppe,{message:r,onCloseModal:function(){return Q(!1)},onDeleteMessage:function(){r?.messageType!=="admin"&&h(r)}}),q&&r?.messageType==="file"&&E.createElement(w8,{onClose:function(){return X(!1)},message:r,onDelete:function(){return h(r)},isByMe:ee})))}function _pe(t,n){var e=D3(),r=e.isMessageGroupingEnabled,i=r===void 0?!0:r,a=e.allMessages,s=e.hasMore,o=e.onScroll,u=Zn().state,c=Un().stringSet,h=u.config.userId,p=R.useRef(null),m=n||p,_=R.useState(!1),b=_[0],C=_[1],N=function(){m&&"current"in m&&m.current&&(m.current.scrollTo(0,m.current.scrollHeight),C(!1))},S=l7({setShowScrollDownButton:C,hasMore:s,onScroll:o,scrollRef:m}),M=R.useMemo(function(){var w;return a.length>0?a.map(function(U,L){var P,x=a[L-1],H=a[L-1],F=x&&x.createdAt,Q=U?.createdAt,$=!(F&&rT(Q,F)),q=i?Z8(x,U,H,c):[!1,!1],X=q[0],V=q[1],ee=((P=U?.sender)===null||P===void 0?void 0:P.userId)===h,z=U?.messageId||U?.reqId;return E.createElement(bI,{message:U,isByMe:ee,key:z},E.createElement(gpe,{message:U,chainTop:X,chainBottom:V,hasSeparator:$,renderMessage:t?.renderMessage}))}):((w=t?.renderPlaceHolderEmptyList)===null||w===void 0?void 0:w.call(t))||E.createElement(Yh,{className:"sendbird-openchannel-conversation-scroll__container__place-holder",type:Ti.NO_MESSAGES})},[a]);return E.createElement("div",{className:"sendbird-openchannel-conversation-scroll"},E.createElement("div",{className:"sendbird-openchannel-conversation-scroll__container"},E.createElement("div",{className:"sendbird-openchannel-conversation-scroll__container__padding"}),E.createElement("div",{className:["sendbird-openchannel-conversation-scroll__container__item-container",a.length>0?"":"no-messages"].join(" "),onScroll:S,ref:m},M)),b&&E.createElement("div",{className:"sendbird-openchannel-conversation-scroll__container__scroll-bottom-button",onClick:N,onKeyDown:N,tabIndex:0,role:"button"},E.createElement(lt,{width:"24px",height:"24px",type:qe.CHEVRON_DOWN,fillColor:rt.CONTENT})))}E.forwardRef(_pe);E.createContext(null);R.createContext({openedListKeys:[],addOpenedListKey:Mr,removeOpenedListKey:Mr,clearOpenedListKeys:Mr,allowMultipleOpen:!1});function ype(){var t=Zn(),n=t.state,e=t.actions;return J(J({},n),e)}var MI;(function(t){t.GROUP="group",t.SUPERGROUP="supergroup",t.BROADCAST="broadcast"})(MI||(MI={}));E.createContext(null);MI.GROUP;var w6;(function(t){t.CHANNEL_LIST="CHANNEL_LIST",t.CHANNEL="CHANNEL",t.CHANNEL_SETTINGS="CHANNEL_SETTINGS",t.MESSAGE_SEARCH="MESSAGE_SEARCH",t.THREAD="THREAD"})(w6||(w6={}));const fs={appId:"F8E6092D-BE00-48F0-A7C6-0141012140C6",botId:"morningnembi-bot",botNickname:"Assistant",upstageApiKey:"",botApiToken:"c2c38e7a278a689551bcb79e8cf53d62574a1a4a"},Epe=()=>{const t=mE.kr;return`You are an AI Assistant for JeongTaek Lee ()'s portfolio website.
Your role is to answer questions about JeongTaek Lee based on the following information.
Be polite, professional, and concise. If you don't know the answer, say you don't know.
Do not make up information.

IMPORTANT: Respond in plain text only. Do NOT use markdown formatting (no **, *, #, -, etc.). 
Just write naturally as if you're speaking to someone.

--- PORTFOLIO DATA ---

Name: JeongTaek Lee ()
Role: AI Engineer & Tech Lover
Description: ${t.hero.description}

[Introduction & Values]
${t.about.intro.join(`
`)}

[Experience]
${t.about.experience.map(e=>`
- ${e.title} at ${e.company} (${e.period})
  ${e.description.join(`
  `)}
  Tags: ${e.tags.join(", ")}
`).join(`
`)}

[Education]
${t.about.education.map(e=>`
- ${e.title} (${e.degree})
  ${e.period}
  ${e.description.join(`
  `)}
`).join(`
`)}

[Activities]
${t.about.activities.map(e=>`
- ${e.title} (${e.role})
  ${e.period}
  ${e.description?e.description.join(`
  `):""}
`).join(`
`)}

[Projects]
${t.portfolio.projects.map(e=>`
- ${e.title} (${e.category})
  Description: ${e.description}
  Role: ${e.details.role}
  Tech Stack: ${e.details.tech.join(", ")}
  Key Features:
  ${e.details.features.join(`
  `)}
  ${e.details.achievement?`Achievement: ${e.details.achievement}`:""}
  ${e.details.troubleshooting?`Problem Solving: ${e.details.troubleshooting}`:""}
`).join(`
`)}

[Awards]
${t.about.awards.map(e=>`
- ${e.title} (${e.issuer}, ${e.date})
  ${e.description.join(`
  `)}
`).join(`
`)}

[Certifications]
${t.about.certs.map(e=>`
- ${e.title} (${e.issuer}, ${e.date})
`).join(`
`)}

--- END DATA ---

Answer in the language the user asked (Korean or English).
If asked about contact info, suggest checking the footer or contact section.
`},bpe=async(t,n=[])=>{try{const e="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";console.log("[OpenAI] Configuration Check:"),console.log(`- API Key: ${e?`${e.substring(0,7)}...`:"MISSING"}`);const i=[{role:"system",content:Epe()},...n.map(o=>({role:o.sender.userId===fs.botId?"assistant":"user",content:o.message})),{role:"user",content:t}];console.log("[OpenAI] Sending request to GPT-4o-mini API. Messages payload:"),console.table(i);const a=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({model:"gpt-4o-mini",messages:i,temperature:.7,max_tokens:500})});if(!a.ok){const o=await a.json();throw console.error("[OpenAI] API Error Response:",o),new Error(`OpenAI API Error: ${o.error?.message||a.statusText}`)}const s=await a.json();return console.log("[OpenAI] API Response Data:",s),console.log("[OpenAI] AI Reply Content:",s.choices[0].message.content),s.choices[0].message.content}catch(e){return console.error("Error calling OpenAI API:",e),".  AI    . (API Key  )"}},Cpe=async(t,n)=>{try{const e=fs.appId,r=fs.botApiToken;console.log("[SendbirdBot] Configuration Check:"),console.log(`- App ID: ${e}`),console.log(`- Bot Token: ${r?`${r.substring(0,4)}...`:"MISSING"}`),console.log(`- Bot ID: ${fs.botId}`);const i=`https://api-${e}.sendbird.com/v3/group_channels/${t}/messages`;console.log("Sending Bot Message to:",i);const a=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json; charset=utf8","Api-Token":fs.botApiToken},body:JSON.stringify({message_type:"MESG",user_id:fs.botId,message:n})});if(!a.ok){const s=await a.json();throw console.error("Sendbird Bot API Error:",s),new Error(`Sendbird API Error: ${s.message}`)}return console.log("Bot Message Sent Successfully"),await a.json()}catch(e){throw console.error("Failed to send bot message:",e),e}},Spe=async t=>{try{console.log(`[SendbirdBot] Attempting to join channel: ${t}`);const n=`https://api-${fs.appId}.sendbird.com/v3/group_channels/${t}/accept`,e=await fetch(n,{method:"PUT",headers:{"Content-Type":"application/json; charset=utf8","Api-Token":fs.botApiToken},body:JSON.stringify({user_id:fs.botId})});if(e.ok)console.log("Bot accepted invitation successfully");else{const r=await e.json();console.log("Bot Accept Invitation Result:",r)}}catch(n){console.error("Failed to join bot:",n)}},Tpe=({userId:t,onClose:n})=>{const{stores:e}=ype(),r=e.sdkStore.sdk,[i,a]=R.useState(null),[s,o]=R.useState(!1),[u,c]=R.useState(null),h=R.useRef(!1);R.useEffect(()=>{r&&t&&!i&&(async()=>{if(!h.current&&(console.log("[Chatbot] Initializing Channel Logic (V4-Stable)..."),!(!r||!r.groupChannel)))try{h.current=!0;const b={invitedUserIds:[fs.botId],name:"Assistant",isDistinct:!0,isPublic:!1,isEphemeral:!1},C=await r.groupChannel.createChannel(b);if(a(C.url),console.log("[Chatbot] Channel ready:",C.url),C.members.some(S=>S.userId===fs.botId))console.log("[Chatbot] Bot is already a member. Ready to chat.");else{console.log("[Chatbot] Bot is not a member. Ensuring invitation...");try{await C.inviteWithUserIds([fs.botId]),console.log("[Chatbot] Bot invited successfully.")}catch(S){console.warn("[Chatbot] Invite attempt warning (safe to ignore if already invited):",S.message)}console.log("[Chatbot] Attempting to join bot..."),await Spe(C.url)}}catch(b){console.error("[Chatbot] Failed to create/init channel:",b),c(b.message),h.current=!1}})()},[r,t,i]);const p=async _=>{console.group(`[Chatbot] Processing User Message: "${_}"`),o(!0);try{console.log("[Chatbot] 1. Requesting AI response from Upstage...");const b=await bpe(_);console.log("[Chatbot] 2. AI response received:",b),i?(console.log("[Chatbot] 3. Sending bot message to Sendbird channel..."),await Cpe(i,b),console.log("[Chatbot] 4. Bot message sent successfully.")):console.error("[Chatbot] Error: Channel URL is missing, cannot send bot message.")}catch(b){console.error("[Chatbot] CRITICAL Error in AI/Bot flow:",b)}finally{o(!1),console.groupEnd()}};if(u)return ue.jsxs("div",{className:"chatbot-error",children:[ue.jsx("p",{children:"  "}),ue.jsx("p",{className:"error-detail",children:u}),ue.jsxs("p",{className:"error-hint",children:["App ID: ",fs.appId,ue.jsx("br",{}),"Bot ID: ",fs.botId]}),ue.jsx("button",{onClick:()=>window.location.reload(),children:""}),ue.jsx("button",{onClick:n,style:{marginTop:"10px",background:"#999"},children:""})]});if(!i)return ue.jsx("div",{className:"chatbot-loading",children:"Loading chat..."});const m=async _=>{if(!(!r||!i))try{const b=await r.groupChannel.getChannel(i),C={message:_};await b.sendUserMessage(C),p(_)}catch(b){console.error("[Chatbot] Failed to send example message:",b)}};return ue.jsxs("div",{className:"chatbot-channel-view",children:[ue.jsx(ape,{channelUrl:i,onBeforeSendUserMessage:_=>(console.log(`[Chatbot] User input captured via onBeforeSendUserMessage: "${_}"`),p(_),{message:_}),renderChatHeader:()=>null,disableUserProfile:!0,isReactionEnabled:!1,showSearchIcon:!1,renderPlaceholderEmpty:()=>ue.jsxs("div",{className:"chatbot-welcome",children:[ue.jsx("div",{className:"welcome-icon",children:""}),ue.jsx("h3",{children:"!"}),ue.jsx("p",{children:"    ."}),ue.jsxs("div",{className:"example-questions",children:[ue.jsx("p",{className:"example-title",children:"  :"}),ue.jsx("button",{className:"example-btn",onClick:()=>m("  ?"),children:"  ?"}),ue.jsx("button",{className:"example-btn",onClick:()=>m("   ?"),children:"   ?"}),ue.jsx("button",{className:"example-btn",onClick:()=>m("  ?"),children:"  ?"}),ue.jsx("button",{className:"example-btn",onClick:()=>m("What projects have you worked on?"),children:"What projects have you worked on?"})]})]})}),s&&ue.jsx("div",{className:"typing-indicator",children:"AI is typing..."})]})},Npe=({isOpen:t,onClose:n})=>{const[e,r]=R.useState("");R.useEffect(()=>{let a=localStorage.getItem("chatbot_user_id");a||(a=`user_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,localStorage.setItem("chatbot_user_id",a)),r(a)},[]);const i=()=>{const a=`user_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;localStorage.setItem("chatbot_user_id",a),r(a)};return!t||!e?null:ue.jsxs("div",{className:"chatbot-widget",children:[ue.jsxs("div",{className:"chatbot-header",children:[ue.jsxs("div",{className:"chatbot-header-left",children:[ue.jsx("div",{className:"chatbot-avatar",children:""}),ue.jsxs("div",{className:"chatbot-info",children:[ue.jsx("h3",{children:fs.botNickname}),ue.jsx("span",{className:"chatbot-status",children:" Online"})]})]}),ue.jsxs("div",{className:"chatbot-header-actions",children:[ue.jsx("button",{className:"chatbot-action-btn",onClick:i,title:"Reset Chat",children:ue.jsx(Vz,{})}),ue.jsx("button",{className:"chatbot-close-btn",onClick:n,"aria-label":"Close",children:ue.jsx(Ok,{})})]})]}),ue.jsx("div",{className:"chatbot-body",children:ue.jsx(rue,{appId:fs.appId,userId:e,nickname:"Visitor",config:{groupChannel:{enableReactions:!1,enableMention:!1,enableOmittedMessage:!1},groupChannelSettings:{enableMessageSearch:!1}},children:ue.jsx(Tpe,{userId:e,onClose:n})},e)})]})},Ape=()=>{const t=Id();return ue.jsx(WV,{location:t,children:ue.jsx(Ek,{path:"/",element:ue.jsx(Xz,{})})},t.pathname)};function Mpe(){const[t,n]=R.useState(!0),[e,r]=R.useState(!1),i=()=>{r(!e)};return ue.jsx(Iz,{children:ue.jsxs(_z,{children:[ue.jsx(qz,{}),ue.jsxs("div",{className:"App",children:[ue.jsx(iA,{mode:"wait",children:t?ue.jsx(jz,{setLoading:n},"preloader"):ue.jsxs(Cu.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[ue.jsx(wz,{}),ue.jsx("main",{children:ue.jsx(Ape,{})}),ue.jsx(zz,{})]},"main-content")}),!t&&ue.jsxs(ue.Fragment,{children:[ue.jsx(Npe,{isOpen:e,onClose:()=>r(!1)}),ue.jsx(Zz,{onClick:i,isOpen:e})]})]})]})})}S7.createRoot(document.getElementById("root")).render(ue.jsx(R.StrictMode,{children:ue.jsx(Mpe,{})}));const Ipe=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));export{xe as G,zk as J,gw as Q,Ope as V,ae as a,ps as b,YC as c,wpe as d,v7 as g,bg as j,te as m};
