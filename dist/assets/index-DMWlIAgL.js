(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function e(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=e(i);fetch(i.href,a)}})();const VP="modulepreload",BP=function(t){return"/"+t},RS={},kw=function(n,e,r){let i=Promise.resolve();if(e&&e.length>0){let c=function(d){return Promise.all(d.map(p=>Promise.resolve(p).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),l=s?.nonce||s?.getAttribute("nonce");i=c(e.map(d=>{if(d=BP(d),d in RS)return;RS[d]=!0;const p=d.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${g}`))return;const _=document.createElement("link");if(_.rel=p?"stylesheet":VP,p||(_.as="script"),_.crossOrigin="",_.href=d,l&&_.setAttribute("nonce",l),document.head.appendChild(_),p)return new Promise((y,C)=>{_.addEventListener("load",y),_.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(s){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=s,window.dispatchEvent(l),!l.defaultPrevented)throw s}return i.then(s=>{for(const l of s||[])l.status==="rejected"&&a(l.reason);return n().catch(a)})};(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))e(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&e(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function e(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();var Fte=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zP(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var DS={exports:{}},E_={},xS;function qP(){if(xS)return E_;xS=1;var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function e(r,i,a){var s=null;if(a!==void 0&&(s=""+a),i.key!==void 0&&(s=""+i.key),"key"in i){a={};for(var l in i)l!=="key"&&(a[l]=i[l])}else a=i;return i=a.ref,{$$typeof:t,type:r,key:s,ref:i!==void 0?i:null,props:a}}return E_.Fragment=n,E_.jsx=e,E_.jsxs=e,E_}var PS;function WP(){return PS||(PS=1,DS.exports=qP()),DS.exports}var oe=WP(),US={exports:{}},on={},LS;function KP(){if(LS)return on;LS=1;var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),_=Symbol.iterator;function y($){return $===null||typeof $!="object"?null:($=_&&$[_]||$["@@iterator"],typeof $=="function"?$:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,A={};function M($,fe,Ie){this.props=$,this.context=fe,this.refs=A,this.updater=Ie||C}M.prototype.isReactComponent={},M.prototype.setState=function($,fe){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,fe,"setState")},M.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function I(){}I.prototype=M.prototype;function D($,fe,Ie){this.props=$,this.context=fe,this.refs=A,this.updater=Ie||C}var P=D.prototype=new I;P.constructor=D,w(P,M.prototype),P.isPureReactComponent=!0;var H=Array.isArray;function L(){}var G={H:null,A:null,T:null,S:null},Y=Object.prototype.hasOwnProperty;function F($,fe,Ie){var We=Ie.ref;return{$$typeof:t,type:$,key:fe,ref:We!==void 0?We:null,props:Ie}}function ne($,fe){return F($.type,fe,$.props)}function J($){return typeof $=="object"&&$!==null&&$.$$typeof===t}function re($){var fe={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(Ie){return fe[Ie]})}var Oe=/\/+/g;function Z($,fe){return typeof $=="object"&&$!==null&&$.key!=null?re(""+$.key):fe.toString(36)}function ue($){switch($.status){case"fulfilled":return $.value;case"rejected":throw $.reason;default:switch(typeof $.status=="string"?$.then(L,L):($.status="pending",$.then(function(fe){$.status==="pending"&&($.status="fulfilled",$.value=fe)},function(fe){$.status==="pending"&&($.status="rejected",$.reason=fe)})),$.status){case"fulfilled":return $.value;case"rejected":throw $.reason}}throw $}function q($,fe,Ie,We,Ne){var He=typeof $;(He==="undefined"||He==="boolean")&&($=null);var tt=!1;if($===null)tt=!0;else switch(He){case"bigint":case"string":case"number":tt=!0;break;case"object":switch($.$$typeof){case t:case n:tt=!0;break;case p:return tt=$._init,q(tt($._payload),fe,Ie,We,Ne)}}if(tt)return Ne=Ne($),tt=We===""?"."+Z($,0):We,H(Ne)?(Ie="",tt!=null&&(Ie=tt.replace(Oe,"$&/")+"/"),q(Ne,fe,Ie,"",function(vr){return vr})):Ne!=null&&(J(Ne)&&(Ne=ne(Ne,Ie+(Ne.key==null||$&&$.key===Ne.key?"":(""+Ne.key).replace(Oe,"$&/")+"/")+tt)),fe.push(Ne)),1;tt=0;var At=We===""?".":We+":";if(H($))for(var bt=0;bt<$.length;bt++)We=$[bt],He=At+Z(We,bt),tt+=q(We,fe,Ie,He,Ne);else if(bt=y($),typeof bt=="function")for($=bt.call($),bt=0;!(We=$.next()).done;)We=We.value,He=At+Z(We,bt++),tt+=q(We,fe,Ie,He,Ne);else if(He==="object"){if(typeof $.then=="function")return q(ue($),fe,Ie,We,Ne);throw fe=String($),Error("Objects are not valid as a React child (found: "+(fe==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":fe)+"). If you meant to render a collection of children, use an array instead.")}return tt}function le($,fe,Ie){if($==null)return $;var We=[],Ne=0;return q($,We,"","",function(He){return fe.call(Ie,He,Ne++)}),We}function pe($){if($._status===-1){var fe=$._result;fe=fe(),fe.then(function(Ie){($._status===0||$._status===-1)&&($._status=1,$._result=Ie)},function(Ie){($._status===0||$._status===-1)&&($._status=2,$._result=Ie)}),$._status===-1&&($._status=0,$._result=fe)}if($._status===1)return $._result.default;throw $._result}var Pe=typeof reportError=="function"?reportError:function($){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var fe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof $=="object"&&$!==null&&typeof $.message=="string"?String($.message):String($),error:$});if(!window.dispatchEvent(fe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",$);return}console.error($)},qe={map:le,forEach:function($,fe,Ie){le($,function(){fe.apply(this,arguments)},Ie)},count:function($){var fe=0;return le($,function(){fe++}),fe},toArray:function($){return le($,function(fe){return fe})||[]},only:function($){if(!J($))throw Error("React.Children.only expected to receive a single React element child.");return $}};return on.Activity=g,on.Children=qe,on.Component=M,on.Fragment=e,on.Profiler=i,on.PureComponent=D,on.StrictMode=r,on.Suspense=c,on.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=G,on.__COMPILER_RUNTIME={__proto__:null,c:function($){return G.H.useMemoCache($)}},on.cache=function($){return function(){return $.apply(null,arguments)}},on.cacheSignal=function(){return null},on.cloneElement=function($,fe,Ie){if($==null)throw Error("The argument must be a React element, but you passed "+$+".");var We=w({},$.props),Ne=$.key;if(fe!=null)for(He in fe.key!==void 0&&(Ne=""+fe.key),fe)!Y.call(fe,He)||He==="key"||He==="__self"||He==="__source"||He==="ref"&&fe.ref===void 0||(We[He]=fe[He]);var He=arguments.length-2;if(He===1)We.children=Ie;else if(1<He){for(var tt=Array(He),At=0;At<He;At++)tt[At]=arguments[At+2];We.children=tt}return F($.type,Ne,We)},on.createContext=function($){return $={$$typeof:s,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null},$.Provider=$,$.Consumer={$$typeof:a,_context:$},$},on.createElement=function($,fe,Ie){var We,Ne={},He=null;if(fe!=null)for(We in fe.key!==void 0&&(He=""+fe.key),fe)Y.call(fe,We)&&We!=="key"&&We!=="__self"&&We!=="__source"&&(Ne[We]=fe[We]);var tt=arguments.length-2;if(tt===1)Ne.children=Ie;else if(1<tt){for(var At=Array(tt),bt=0;bt<tt;bt++)At[bt]=arguments[bt+2];Ne.children=At}if($&&$.defaultProps)for(We in tt=$.defaultProps,tt)Ne[We]===void 0&&(Ne[We]=tt[We]);return F($,He,Ne)},on.createRef=function(){return{current:null}},on.forwardRef=function($){return{$$typeof:l,render:$}},on.isValidElement=J,on.lazy=function($){return{$$typeof:p,_payload:{_status:-1,_result:$},_init:pe}},on.memo=function($,fe){return{$$typeof:d,type:$,compare:fe===void 0?null:fe}},on.startTransition=function($){var fe=G.T,Ie={};G.T=Ie;try{var We=$(),Ne=G.S;Ne!==null&&Ne(Ie,We),typeof We=="object"&&We!==null&&typeof We.then=="function"&&We.then(L,Pe)}catch(He){Pe(He)}finally{fe!==null&&Ie.types!==null&&(fe.types=Ie.types),G.T=fe}},on.unstable_useCacheRefresh=function(){return G.H.useCacheRefresh()},on.use=function($){return G.H.use($)},on.useActionState=function($,fe,Ie){return G.H.useActionState($,fe,Ie)},on.useCallback=function($,fe){return G.H.useCallback($,fe)},on.useContext=function($){return G.H.useContext($)},on.useDebugValue=function(){},on.useDeferredValue=function($,fe){return G.H.useDeferredValue($,fe)},on.useEffect=function($,fe){return G.H.useEffect($,fe)},on.useEffectEvent=function($){return G.H.useEffectEvent($)},on.useId=function(){return G.H.useId()},on.useImperativeHandle=function($,fe,Ie){return G.H.useImperativeHandle($,fe,Ie)},on.useInsertionEffect=function($,fe){return G.H.useInsertionEffect($,fe)},on.useLayoutEffect=function($,fe){return G.H.useLayoutEffect($,fe)},on.useMemo=function($,fe){return G.H.useMemo($,fe)},on.useOptimistic=function($,fe){return G.H.useOptimistic($,fe)},on.useReducer=function($,fe,Ie){return G.H.useReducer($,fe,Ie)},on.useRef=function($){return G.H.useRef($)},on.useState=function($){return G.H.useState($)},on.useSyncExternalStore=function($,fe,Ie){return G.H.useSyncExternalStore($,fe,Ie)},on.useTransition=function(){return G.H.useTransition()},on.version="19.2.0",on}var FS;function a3(){return FS||(FS=1,US.exports=KP()),US.exports}var k=a3();const O=zP(k);var pC={exports:{}},C_={},HS={exports:{}},jS={},GS;function YP(){return GS||(GS=1,(function(t){function n(q,le){var pe=q.length;q.push(le);e:for(;0<pe;){var Pe=pe-1>>>1,qe=q[Pe];if(0<i(qe,le))q[Pe]=le,q[pe]=qe,pe=Pe;else break e}}function e(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var le=q[0],pe=q.pop();if(pe!==le){q[0]=pe;e:for(var Pe=0,qe=q.length,$=qe>>>1;Pe<$;){var fe=2*(Pe+1)-1,Ie=q[fe],We=fe+1,Ne=q[We];if(0>i(Ie,pe))We<qe&&0>i(Ne,Ie)?(q[Pe]=Ne,q[We]=pe,Pe=We):(q[Pe]=Ie,q[fe]=pe,Pe=fe);else if(We<qe&&0>i(Ne,pe))q[Pe]=Ne,q[We]=pe,Pe=We;else break e}}return le}function i(q,le){var pe=q.sortIndex-le.sortIndex;return pe!==0?pe:q.id-le.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],d=[],p=1,g=null,_=3,y=!1,C=!1,w=!1,A=!1,M=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function P(q){for(var le=e(d);le!==null;){if(le.callback===null)r(d);else if(le.startTime<=q)r(d),le.sortIndex=le.expirationTime,n(c,le);else break;le=e(d)}}function H(q){if(w=!1,P(q),!C)if(e(c)!==null)C=!0,L||(L=!0,re());else{var le=e(d);le!==null&&ue(H,le.startTime-q)}}var L=!1,G=-1,Y=5,F=-1;function ne(){return A?!0:!(t.unstable_now()-F<Y)}function J(){if(A=!1,L){var q=t.unstable_now();F=q;var le=!0;try{e:{C=!1,w&&(w=!1,I(G),G=-1),y=!0;var pe=_;try{t:{for(P(q),g=e(c);g!==null&&!(g.expirationTime>q&&ne());){var Pe=g.callback;if(typeof Pe=="function"){g.callback=null,_=g.priorityLevel;var qe=Pe(g.expirationTime<=q);if(q=t.unstable_now(),typeof qe=="function"){g.callback=qe,P(q),le=!0;break t}g===e(c)&&r(c),P(q)}else r(c);g=e(c)}if(g!==null)le=!0;else{var $=e(d);$!==null&&ue(H,$.startTime-q),le=!1}}break e}finally{g=null,_=pe,y=!1}le=void 0}}finally{le?re():L=!1}}}var re;if(typeof D=="function")re=function(){D(J)};else if(typeof MessageChannel<"u"){var Oe=new MessageChannel,Z=Oe.port2;Oe.port1.onmessage=J,re=function(){Z.postMessage(null)}}else re=function(){M(J,0)};function ue(q,le){G=M(function(){q(t.unstable_now())},le)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_next=function(q){switch(_){case 1:case 2:case 3:var le=3;break;default:le=_}var pe=_;_=le;try{return q()}finally{_=pe}},t.unstable_requestPaint=function(){A=!0},t.unstable_runWithPriority=function(q,le){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var pe=_;_=q;try{return le()}finally{_=pe}},t.unstable_scheduleCallback=function(q,le,pe){var Pe=t.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?Pe+pe:Pe):pe=Pe,q){case 1:var qe=-1;break;case 2:qe=250;break;case 5:qe=1073741823;break;case 4:qe=1e4;break;default:qe=5e3}return qe=pe+qe,q={id:p++,callback:le,priorityLevel:q,startTime:pe,expirationTime:qe,sortIndex:-1},pe>Pe?(q.sortIndex=pe,n(d,q),e(c)===null&&q===e(d)&&(w?(I(G),G=-1):w=!0,ue(H,pe-Pe))):(q.sortIndex=qe,n(c,q),C||y||(C=!0,L||(L=!0,re()))),q},t.unstable_shouldYield=ne,t.unstable_wrapCallback=function(q){var le=_;return function(){var pe=_;_=le;try{return q.apply(this,arguments)}finally{_=pe}}}})(jS)),jS}var VS;function QP(){return VS||(VS=1,HS.exports=YP()),HS.exports}var mC={exports:{}},Ga={},BS;function $P(){if(BS)return Ga;BS=1;var t=a3();function n(c){var d="https://react.dev/errors/"+c;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var r={d:{f:e,r:function(){throw Error(n(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(c,d,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:c,containerInfo:d,implementation:p}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,d){if(c==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Ga.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ga.createPortal=function(c,d){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(n(299));return a(c,d,null,p)},Ga.flushSync=function(c){var d=s.T,p=r.p;try{if(s.T=null,r.p=2,c)return c()}finally{s.T=d,r.p=p,r.d.f()}},Ga.preconnect=function(c,d){typeof c=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(c,d))},Ga.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},Ga.preinit=function(c,d){if(typeof c=="string"&&d&&typeof d.as=="string"){var p=d.as,g=l(p,d.crossOrigin),_=typeof d.integrity=="string"?d.integrity:void 0,y=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;p==="style"?r.d.S(c,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:g,integrity:_,fetchPriority:y}):p==="script"&&r.d.X(c,{crossOrigin:g,integrity:_,fetchPriority:y,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Ga.preinitModule=function(c,d){if(typeof c=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var p=l(d.as,d.crossOrigin);r.d.M(c,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(c)},Ga.preload=function(c,d){if(typeof c=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var p=d.as,g=l(p,d.crossOrigin);r.d.L(c,p,{crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Ga.preloadModule=function(c,d){if(typeof c=="string")if(d){var p=l(d.as,d.crossOrigin);r.d.m(c,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(c)},Ga.requestFormReset=function(c){r.d.r(c)},Ga.unstable_batchedUpdates=function(c,d){return c(d)},Ga.useFormState=function(c,d,p){return s.H.useFormState(c,d,p)},Ga.useFormStatus=function(){return s.H.useHostTransitionStatus()},Ga.version="19.2.0",Ga}var zS;function Nk(){if(zS)return mC.exports;zS=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(n){console.error(n)}}return t(),mC.exports=$P(),mC.exports}var qS;function XP(){if(qS)return C_;qS=1;var t=QP(),n=a3(),e=Nk();function r(o){var u="https://react.dev/errors/"+o;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)u+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+o+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function a(o){var u=o,h=o;if(o.alternate)for(;u.return;)u=u.return;else{o=u;do u=o,(u.flags&4098)!==0&&(h=u.return),o=u.return;while(o)}return u.tag===3?h:null}function s(o){if(o.tag===13){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function l(o){if(o.tag===31){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function c(o){if(a(o)!==o)throw Error(r(188))}function d(o){var u=o.alternate;if(!u){if(u=a(o),u===null)throw Error(r(188));return u!==o?null:o}for(var h=o,m=u;;){var b=h.return;if(b===null)break;var N=b.alternate;if(N===null){if(m=b.return,m!==null){h=m;continue}break}if(b.child===N.child){for(N=b.child;N;){if(N===h)return c(b),o;if(N===m)return c(b),u;N=N.sibling}throw Error(r(188))}if(h.return!==m.return)h=b,m=N;else{for(var x=!1,V=b.child;V;){if(V===h){x=!0,h=b,m=N;break}if(V===m){x=!0,m=b,h=N;break}V=V.sibling}if(!x){for(V=N.child;V;){if(V===h){x=!0,h=N,m=b;break}if(V===m){x=!0,m=N,h=b;break}V=V.sibling}if(!x)throw Error(r(189))}}if(h.alternate!==m)throw Error(r(190))}if(h.tag!==3)throw Error(r(188));return h.stateNode.current===h?o:u}function p(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o;for(o=o.child;o!==null;){if(u=p(o),u!==null)return u;o=o.sibling}return null}var g=Object.assign,_=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),I=Symbol.for("react.consumer"),D=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),F=Symbol.for("react.activity"),ne=Symbol.for("react.memo_cache_sentinel"),J=Symbol.iterator;function re(o){return o===null||typeof o!="object"?null:(o=J&&o[J]||o["@@iterator"],typeof o=="function"?o:null)}var Oe=Symbol.for("react.client.reference");function Z(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===Oe?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case w:return"Fragment";case M:return"Profiler";case A:return"StrictMode";case H:return"Suspense";case L:return"SuspenseList";case F:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case C:return"Portal";case D:return o.displayName||"Context";case I:return(o._context.displayName||"Context")+".Consumer";case P:var u=o.render;return o=o.displayName,o||(o=u.displayName||u.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case G:return u=o.displayName||null,u!==null?u:Z(o.type)||"Memo";case Y:u=o._payload,o=o._init;try{return Z(o(u))}catch{}}return null}var ue=Array.isArray,q=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},Pe=[],qe=-1;function $(o){return{current:o}}function fe(o){0>qe||(o.current=Pe[qe],Pe[qe]=null,qe--)}function Ie(o,u){qe++,Pe[qe]=o.current,o.current=u}var We=$(null),Ne=$(null),He=$(null),tt=$(null);function At(o,u){switch(Ie(He,u),Ie(Ne,o),Ie(We,null),u.nodeType){case 9:case 11:o=(o=u.documentElement)&&(o=o.namespaceURI)?Af(o):0;break;default:if(o=u.tagName,u=u.namespaceURI)u=Af(u),o=Ha(u,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}fe(We),Ie(We,o)}function bt(){fe(We),fe(Ne),fe(He)}function vr(o){o.memoizedState!==null&&Ie(tt,o);var u=We.current,h=Ha(u,o.type);u!==h&&(Ie(Ne,o),Ie(We,h))}function wn(o){Ne.current===o&&(fe(We),fe(Ne)),tt.current===o&&(fe(tt),Wd._currentValue=pe)}var Rn,xn;function Zt(o){if(Rn===void 0)try{throw Error()}catch(h){var u=h.stack.trim().match(/\n( *(at )?)/);Rn=u&&u[1]||"",xn=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Rn+o+xn}var Pn=!1;function Zn(o,u){if(!o||Pn)return"";Pn=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(u){var je=function(){throw Error()};if(Object.defineProperty(je.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(je,[])}catch(Me){var be=Me}Reflect.construct(o,[],je)}else{try{je.call()}catch(Me){be=Me}o.call(je.prototype)}}else{try{throw Error()}catch(Me){be=Me}(je=o())&&typeof je.catch=="function"&&je.catch(function(){})}}catch(Me){if(Me&&be&&typeof Me.stack=="string")return[Me.stack,be.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var N=m.DetermineComponentFrameRoot(),x=N[0],V=N[1];if(x&&V){var ie=x.split(`
`),_e=V.split(`
`);for(b=m=0;m<ie.length&&!ie[m].includes("DetermineComponentFrameRoot");)m++;for(;b<_e.length&&!_e[b].includes("DetermineComponentFrameRoot");)b++;if(m===ie.length||b===_e.length)for(m=ie.length-1,b=_e.length-1;1<=m&&0<=b&&ie[m]!==_e[b];)b--;for(;1<=m&&0<=b;m--,b--)if(ie[m]!==_e[b]){if(m!==1||b!==1)do if(m--,b--,0>b||ie[m]!==_e[b]){var De=`
`+ie[m].replace(" at new "," at ");return o.displayName&&De.includes("<anonymous>")&&(De=De.replace("<anonymous>",o.displayName)),De}while(1<=m&&0<=b);break}}}finally{Pn=!1,Error.prepareStackTrace=h}return(h=o?o.displayName||o.name:"")?Zt(h):""}function fn(o,u){switch(o.tag){case 26:case 27:case 5:return Zt(o.type);case 16:return Zt("Lazy");case 13:return o.child!==u&&u!==null?Zt("Suspense Fallback"):Zt("Suspense");case 19:return Zt("SuspenseList");case 0:case 15:return Zn(o.type,!1);case 11:return Zn(o.type.render,!1);case 1:return Zn(o.type,!0);case 31:return Zt("Activity");default:return""}}function _r(o){try{var u="",h=null;do u+=fn(o,h),h=o,o=o.return;while(o);return u}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}var jn=Object.prototype.hasOwnProperty,Un=t.unstable_scheduleCallback,gt=t.unstable_cancelCallback,Dn=t.unstable_shouldYield,Cr=t.unstable_requestPaint,gn=t.unstable_now,rr=t.unstable_getCurrentPriorityLevel,Lt=t.unstable_ImmediatePriority,Wn=t.unstable_UserBlockingPriority,cr=t.unstable_NormalPriority,dn=t.unstable_LowPriority,ti=t.unstable_IdlePriority,_i=t.log,Sr=t.unstable_setDisableYieldValue,Dr=null,Kn=null;function Yn(o){if(typeof _i=="function"&&Sr(o),Kn&&typeof Kn.setStrictMode=="function")try{Kn.setStrictMode(Dr,o)}catch{}}var Jt=Math.clz32?Math.clz32:Mt,Lr=Math.log,aa=Math.LN2;function Mt(o){return o>>>=0,o===0?32:31-(Lr(o)/aa|0)|0}var Dt=256,vt=262144,Ze=4194304;function Ae(o){var u=o&42;if(u!==0)return u;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function Et(o,u,h){var m=o.pendingLanes;if(m===0)return 0;var b=0,N=o.suspendedLanes,x=o.pingedLanes;o=o.warmLanes;var V=m&134217727;return V!==0?(m=V&~N,m!==0?b=Ae(m):(x&=V,x!==0?b=Ae(x):h||(h=V&~o,h!==0&&(b=Ae(h))))):(V=m&~N,V!==0?b=Ae(V):x!==0?b=Ae(x):h||(h=m&~o,h!==0&&(b=Ae(h)))),b===0?0:u!==0&&u!==b&&(u&N)===0&&(N=b&-b,h=u&-u,N>=h||N===32&&(h&4194048)!==0)?u:b}function _t(o,u){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&u)===0}function yt(o,u){switch(o){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gn(){var o=Ze;return Ze<<=1,(Ze&62914560)===0&&(Ze=4194304),o}function xt(o){for(var u=[],h=0;31>h;h++)u.push(o);return u}function zi(o,u){o.pendingLanes|=u,u!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function sa(o,u,h,m,b,N){var x=o.pendingLanes;o.pendingLanes=h,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=h,o.entangledLanes&=h,o.errorRecoveryDisabledLanes&=h,o.shellSuspendCounter=0;var V=o.entanglements,ie=o.expirationTimes,_e=o.hiddenUpdates;for(h=x&~h;0<h;){var De=31-Jt(h),je=1<<De;V[De]=0,ie[De]=-1;var be=_e[De];if(be!==null)for(_e[De]=null,De=0;De<be.length;De++){var Me=be[De];Me!==null&&(Me.lane&=-536870913)}h&=~je}m!==0&&yi(o,m,0),N!==0&&b===0&&o.tag!==0&&(o.suspendedLanes|=N&~(x&~u))}function yi(o,u,h){o.pendingLanes|=u,o.suspendedLanes&=~u;var m=31-Jt(u);o.entangledLanes|=u,o.entanglements[m]=o.entanglements[m]|1073741824|h&261930}function qs(o,u){var h=o.entangledLanes|=u;for(o=o.entanglements;h;){var m=31-Jt(h),b=1<<m;b&u|o[m]&u&&(o[m]|=u),h&=~b}}function Cs(o,u){var h=u&-u;return h=(h&42)!==0?1:qi(h),(h&(o.suspendedLanes|u))!==0?0:h}function qi(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Wi(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function rt(){var o=le.p;return o!==0?o:(o=window.event,o===void 0?32:Qb(o.type))}function Ct(o,u){var h=le.p;try{return le.p=o,u()}finally{le.p=h}}var ct=Math.random().toString(36).slice(2),Ot="__reactFiber$"+ct,ht="__reactProps$"+ct,Vt="__reactContainer$"+ct,Nn="__reactEvents$"+ct,ni="__reactListeners$"+ct,Fr="__reactHandles$"+ct,Ar="__reactResources$"+ct,ee="__reactMarker$"+ct;function Xe(o){delete o[Ot],delete o[ht],delete o[Nn],delete o[ni],delete o[Fr]}function Be(o){var u=o[Ot];if(u)return u;for(var h=o.parentNode;h;){if(u=h[Vt]||h[Ot]){if(h=u.alternate,u.child!==null||h!==null&&h.child!==null)for(o=Rb(o);o!==null;){if(h=o[Ot])return h;o=Rb(o)}return u}o=h,h=o.parentNode}return null}function Pt(o){if(o=o[Ot]||o[Vt]){var u=o.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return o}return null}function hn(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o.stateNode;throw Error(r(33))}function Kt(o){var u=o[Ar];return u||(u=o[Ar]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function ln(o){o[ee]=!0}var Ir=new Set,Hr={};function Br(o,u){Ln(o,u),Ln(o+"Capture",u)}function Ln(o,u){for(Hr[o]=u,o=0;o<u.length;o++)Ir.add(u[o])}var oa=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ws={},Io={};function Ku(o){return jn.call(Io,o)?!0:jn.call(Ws,o)?!1:oa.test(o)?Io[o]=!0:(Ws[o]=!0,!1)}function Ks(o,u,h){if(Ku(u))if(h===null)o.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":o.removeAttribute(u);return;case"boolean":var m=u.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){o.removeAttribute(u);return}}o.setAttribute(u,""+h)}}function zr(o,u,h){if(h===null)o.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(u);return}o.setAttribute(u,""+h)}}function la(o,u,h,m){if(m===null)o.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(h);return}o.setAttributeNS(u,h,""+m)}}function bi(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Zl(o){var u=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function Yu(o,u,h){var m=Object.getOwnPropertyDescriptor(o.constructor.prototype,u);if(!o.hasOwnProperty(u)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var b=m.get,N=m.set;return Object.defineProperty(o,u,{configurable:!0,get:function(){return b.call(this)},set:function(x){h=""+x,N.call(this,x)}}),Object.defineProperty(o,u,{enumerable:m.enumerable}),{getValue:function(){return h},setValue:function(x){h=""+x},stopTracking:function(){o._valueTracker=null,delete o[u]}}}}function ul(o){if(!o._valueTracker){var u=Zl(o)?"checked":"value";o._valueTracker=Yu(o,u,""+o[u])}}function Ys(o){if(!o)return!1;var u=o._valueTracker;if(!u)return!0;var h=u.getValue(),m="";return o&&(m=Zl(o)?o.checked?"true":"false":o.value),o=m,o!==h?(u.setValue(o),!0):!1}function Mo(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Jl=/[\n"\\]/g;function xi(o){return o.replace(Jl,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function ws(o,u,h,m,b,N,x,V){o.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?o.type=x:o.removeAttribute("type"),u!=null?x==="number"?(u===0&&o.value===""||o.value!=u)&&(o.value=""+bi(u)):o.value!==""+bi(u)&&(o.value=""+bi(u)):x!=="submit"&&x!=="reset"||o.removeAttribute("value"),u!=null?Qu(o,x,bi(u)):h!=null?Qu(o,x,bi(h)):m!=null&&o.removeAttribute("value"),b==null&&N!=null&&(o.defaultChecked=!!N),b!=null&&(o.checked=b&&typeof b!="function"&&typeof b!="symbol"),V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?o.name=""+bi(V):o.removeAttribute("name")}function cl(o,u,h,m,b,N,x,V){if(N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(o.type=N),u!=null||h!=null){if(!(N!=="submit"&&N!=="reset"||u!=null)){ul(o);return}h=h!=null?""+bi(h):"",u=u!=null?""+bi(u):h,V||u===o.value||(o.value=u),o.defaultValue=u}m=m??b,m=typeof m!="function"&&typeof m!="symbol"&&!!m,o.checked=V?o.checked:!!m,o.defaultChecked=!!m,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(o.name=x),ul(o)}function Qu(o,u,h){u==="number"&&Mo(o.ownerDocument)===o||o.defaultValue===""+h||(o.defaultValue=""+h)}function Qs(o,u,h,m){if(o=o.options,u){u={};for(var b=0;b<h.length;b++)u["$"+h[b]]=!0;for(h=0;h<o.length;h++)b=u.hasOwnProperty("$"+o[h].value),o[h].selected!==b&&(o[h].selected=b),b&&m&&(o[h].defaultSelected=!0)}else{for(h=""+bi(h),u=null,b=0;b<o.length;b++){if(o[b].value===h){o[b].selected=!0,m&&(o[b].defaultSelected=!0);return}u!==null||o[b].disabled||(u=o[b])}u!==null&&(u.selected=!0)}}function eu(o,u,h){if(u!=null&&(u=""+bi(u),u!==o.value&&(o.value=u),h==null)){o.defaultValue!==u&&(o.defaultValue=u);return}o.defaultValue=h!=null?""+bi(h):""}function dl(o,u,h,m){if(u==null){if(m!=null){if(h!=null)throw Error(r(92));if(ue(m)){if(1<m.length)throw Error(r(93));m=m[0]}h=m}h==null&&(h=""),u=h}h=bi(u),o.defaultValue=h,m=o.textContent,m===h&&m!==""&&m!==null&&(o.value=m),ul(o)}function ua(o,u){if(u){var h=o.firstChild;if(h&&h===o.lastChild&&h.nodeType===3){h.nodeValue=u;return}}o.textContent=u}var Aa=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function tu(o,u,h){var m=u.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?m?o.setProperty(u,""):u==="float"?o.cssFloat="":o[u]="":m?o.setProperty(u,h):typeof h!="number"||h===0||Aa.has(u)?u==="float"?o.cssFloat=h:o[u]=(""+h).trim():o[u]=h+"px"}function Oo(o,u,h){if(u!=null&&typeof u!="object")throw Error(r(62));if(o=o.style,h!=null){for(var m in h)!h.hasOwnProperty(m)||u!=null&&u.hasOwnProperty(m)||(m.indexOf("--")===0?o.setProperty(m,""):m==="float"?o.cssFloat="":o[m]="");for(var b in u)m=u[b],u.hasOwnProperty(b)&&h[b]!==m&&tu(o,b,m)}else for(var N in u)u.hasOwnProperty(N)&&tu(o,N,u[N])}function Ns(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ko=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ro=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Do(o){return Ro.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function ca(){}var hl=null;function fl(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Pi=null,$s=null;function Ch(o){var u=Pt(o);if(u&&(o=u.stateNode)){var h=o[ht]||null;e:switch(o=u.stateNode,u.type){case"input":if(ws(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),u=h.name,h.type==="radio"&&u!=null){for(h=o;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+xi(""+u)+'"][type="radio"]'),u=0;u<h.length;u++){var m=h[u];if(m!==o&&m.form===o.form){var b=m[ht]||null;if(!b)throw Error(r(90));ws(m,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(u=0;u<h.length;u++)m=h[u],m.form===o.form&&Ys(m)}break e;case"textarea":eu(o,h.value,h.defaultValue);break e;case"select":u=h.value,u!=null&&Qs(o,!!h.multiple,u,!1)}}}var ed=!1;function wh(o,u,h){if(ed)return o(u,h);ed=!0;try{var m=o(u);return m}finally{if(ed=!1,(Pi!==null||$s!==null)&&(Im(),Pi&&(u=Pi,o=$s,$s=Pi=null,Ch(u),o)))for(u=0;u<o.length;u++)Ch(o[u])}}function wr(o,u){var h=o.stateNode;if(h===null)return null;var m=h[ht]||null;if(m===null)return null;h=m[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(o=o.type,m=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!m;break e;default:o=!1}if(o)return null;if(h&&typeof h!="function")throw Error(r(231,u,typeof h));return h}var Ka=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$u=!1;if(Ka)try{var pl={};Object.defineProperty(pl,"passive",{get:function(){$u=!0}}),window.addEventListener("test",pl,pl),window.removeEventListener("test",pl,pl)}catch{$u=!1}var Ya=null,nu=null,Vn=null;function Qn(){if(Vn)return Vn;var o,u=nu,h=u.length,m,b="value"in Ya?Ya.value:Ya.textContent,N=b.length;for(o=0;o<h&&u[o]===b[o];o++);var x=h-o;for(m=1;m<=x&&u[h-m]===b[N-m];m++);return Vn=b.slice(o,1<m?1-m:void 0)}function Xu(o){var u=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&u===13&&(o=13)):o=u,o===10&&(o=13),32<=o||o===13?o:0}function ru(){return!0}function Nh(){return!1}function Mi(o){function u(h,m,b,N,x){this._reactName=h,this._targetInst=b,this.type=m,this.nativeEvent=N,this.target=x,this.currentTarget=null;for(var V in o)o.hasOwnProperty(V)&&(h=o[V],this[V]=h?h(N):N[V]);return this.isDefaultPrevented=(N.defaultPrevented!=null?N.defaultPrevented:N.returnValue===!1)?ru:Nh,this.isPropagationStopped=Nh,this}return g(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=ru)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=ru)},persist:function(){},isPersistent:ru}),u}var xo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},iu=Mi(xo),ml=g({},xo,{view:0,detail:0}),Th=Mi(ml),qr,gl,Ia,vl=g({},ml,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mn,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Ia&&(Ia&&o.type==="mousemove"?(qr=o.screenX-Ia.screenX,gl=o.screenY-Ia.screenY):gl=qr=0,Ia=o),qr)},movementY:function(o){return"movementY"in o?o.movementY:gl}}),Zu=Mi(vl),Ki=g({},vl,{dataTransfer:0}),Sh=Mi(Ki),td=g({},ml,{relatedTarget:0}),Ju=Mi(td),nd=g({},xo,{animationName:0,elapsedTime:0,pseudoElement:0}),Ah=Mi(nd),pn=g({},xo,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),ot=Mi(pn),Ce=g({},xo,{data:0}),ce=Mi(Ce),ft={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},at={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jn(o){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(o):(o=dt[o])?!!u[o]:!1}function mn(){return Jn}var Nr=g({},ml,{key:function(o){if(o.key){var u=ft[o.key]||o.key;if(u!=="Unidentified")return u}return o.type==="keypress"?(o=Xu(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?at[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mn,charCode:function(o){return o.type==="keypress"?Xu(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Xu(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),au=Mi(Nr),Pg=g({},vl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ay=Mi(Pg),Ug=g({},ml,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mn}),v2=Mi(Ug),_2=g({},xo,{propertyName:0,elapsedTime:0,pseudoElement:0}),y2=Mi(_2),sy=g({},vl,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Rp=Mi(sy),rd=g({},xo,{newState:0,oldState:0}),b2=Mi(rd),oy=[9,13,27,32],Dp=Ka&&"CompositionEvent"in window,ec=null;Ka&&"documentMode"in document&&(ec=document.documentMode);var Lg=Ka&&"TextEvent"in window&&!ec,Fg=Ka&&(!Dp||ec&&8<ec&&11>=ec),ly=" ",xp=!1;function Pp(o,u){switch(o){case"keyup":return oy.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uy(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var tc=!1;function Qa(o,u){switch(o){case"compositionend":return uy(u);case"keypress":return u.which!==32?null:(xp=!0,ly);case"textInput":return o=u.data,o===ly&&xp?null:o;default:return null}}function Hg(o,u){if(tc)return o==="compositionend"||!Dp&&Pp(o,u)?(o=Qn(),Vn=nu=Ya=null,tc=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return Fg&&u.locale!=="ko"?null:u.data;default:return null}}var Ih={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jg(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u==="input"?!!Ih[o.type]:u==="textarea"}function Gg(o,u,h,m){Pi?$s?$s.push(m):$s=[m]:Pi=m,u=wf(u,"onChange"),0<u.length&&(h=new iu("onChange","change",null,h,m),o.push({event:h,listeners:u}))}var Mh=null,Oh=null;function E2(o){wb(o,0)}function Up(o){var u=hn(o);if(Ys(u))return o}function cy(o,u){if(o==="change")return u}var nc=!1;if(Ka){var Vg;if(Ka){var Bg="oninput"in document;if(!Bg){var Lp=document.createElement("div");Lp.setAttribute("oninput","return;"),Bg=typeof Lp.oninput=="function"}Vg=Bg}else Vg=!1;nc=Vg&&(!document.documentMode||9<document.documentMode)}function zg(){Mh&&(Mh.detachEvent("onpropertychange",_l),Oh=Mh=null)}function _l(o){if(o.propertyName==="value"&&Up(Oh)){var u=[];Gg(u,Oh,o,fl(o)),wh(E2,u)}}function Fp(o,u,h){o==="focusin"?(zg(),Mh=u,Oh=h,Mh.attachEvent("onpropertychange",_l)):o==="focusout"&&zg()}function C2(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Up(Oh)}function w2(o,u){if(o==="click")return Up(u)}function N2(o,u){if(o==="input"||o==="change")return Up(u)}function id(o,u){return o===u&&(o!==0||1/o===1/u)||o!==o&&u!==u}var jr=typeof Object.is=="function"?Object.is:id;function ad(o,u){if(jr(o,u))return!0;if(typeof o!="object"||o===null||typeof u!="object"||u===null)return!1;var h=Object.keys(o),m=Object.keys(u);if(h.length!==m.length)return!1;for(m=0;m<h.length;m++){var b=h[m];if(!jn.call(u,b)||!jr(o[b],u[b]))return!1}return!0}function dy(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function hy(o,u){var h=dy(o);o=0;for(var m;h;){if(h.nodeType===3){if(m=o+h.textContent.length,o<=u&&m>=u)return{node:h,offset:u-o};o=m}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=dy(h)}}function fy(o,u){return o&&u?o===u?!0:o&&o.nodeType===3?!1:u&&u.nodeType===3?fy(o,u.parentNode):"contains"in o?o.contains(u):o.compareDocumentPosition?!!(o.compareDocumentPosition(u)&16):!1:!1}function py(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var u=Mo(o.document);u instanceof o.HTMLIFrameElement;){try{var h=typeof u.contentWindow.location.href=="string"}catch{h=!1}if(h)o=u.contentWindow;else break;u=Mo(o.document)}return u}function qg(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u&&(u==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||u==="textarea"||o.contentEditable==="true")}var sd=Ka&&"documentMode"in document&&11>=document.documentMode,de=null,xe=null,we=null,st=!1;function Qt(o,u,h){var m=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;st||de==null||de!==Mo(m)||(m=de,"selectionStart"in m&&qg(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),we&&ad(we,m)||(we=m,m=wf(xe,"onSelect"),0<m.length&&(u=new iu("onSelect","select",null,u,h),o.push({event:u,listeners:m}),u.target=de)))}function bn(o,u){var h={};return h[o.toLowerCase()]=u.toLowerCase(),h["Webkit"+o]="webkit"+u,h["Moz"+o]="moz"+u,h}var xr={animationend:bn("Animation","AnimationEnd"),animationiteration:bn("Animation","AnimationIteration"),animationstart:bn("Animation","AnimationStart"),transitionrun:bn("Transition","TransitionRun"),transitionstart:bn("Transition","TransitionStart"),transitioncancel:bn("Transition","TransitionCancel"),transitionend:bn("Transition","TransitionEnd")},ir={},Hp={};Ka&&(Hp=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);function rc(o){if(ir[o])return ir[o];if(!xr[o])return o;var u=xr[o],h;for(h in u)if(u.hasOwnProperty(h)&&h in Hp)return ir[o]=u[h];return o}var $a=rc("animationend"),kh=rc("animationiteration"),my=rc("animationstart"),od=rc("transitionrun"),jp=rc("transitionstart"),Gp=rc("transitioncancel"),er=rc("transitionend"),gy=new Map,Vp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Vp.push("scrollEnd");function Ma(o,u){gy.set(o,u),Br(u,[o])}var Bp=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},Ts=[],ld=0,ud=0;function Xs(){for(var o=ld,u=ud=ld=0;u<o;){var h=Ts[u];Ts[u++]=null;var m=Ts[u];Ts[u++]=null;var b=Ts[u];Ts[u++]=null;var N=Ts[u];if(Ts[u++]=null,m!==null&&b!==null){var x=m.pending;x===null?b.next=b:(b.next=x.next,x.next=b),m.pending=b}N!==0&&Wg(h,b,N)}}function ic(o,u,h,m){Ts[ld++]=o,Ts[ld++]=u,Ts[ld++]=h,Ts[ld++]=m,ud|=m,o.lanes|=m,o=o.alternate,o!==null&&(o.lanes|=m)}function zp(o,u,h,m){return ic(o,u,h,m),Rh(o)}function Po(o,u){return ic(o,null,null,u),Rh(o)}function Wg(o,u,h){o.lanes|=h;var m=o.alternate;m!==null&&(m.lanes|=h);for(var b=!1,N=o.return;N!==null;)N.childLanes|=h,m=N.alternate,m!==null&&(m.childLanes|=h),N.tag===22&&(o=N.stateNode,o===null||o._visibility&1||(b=!0)),o=N,N=N.return;return o.tag===3?(N=o.stateNode,b&&u!==null&&(b=31-Jt(h),o=N.hiddenUpdates,m=o[b],m===null?o[b]=[u]:m.push(u),u.lane=h|536870912),N):null}function Rh(o){if(50<gf)throw gf=0,qv=null,Error(r(185));for(var u=o.return;u!==null;)o=u,u=o.return;return o.tag===3?o.stateNode:null}var yl={};function vy(o,u,h,m){this.tag=o,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ui(o,u,h,m){return new vy(o,u,h,m)}function bl(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Ss(o,u){var h=o.alternate;return h===null?(h=Ui(o.tag,u,o.key,o.mode),h.elementType=o.elementType,h.type=o.type,h.stateNode=o.stateNode,h.alternate=o,o.alternate=h):(h.pendingProps=u,h.type=o.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=o.flags&65011712,h.childLanes=o.childLanes,h.lanes=o.lanes,h.child=o.child,h.memoizedProps=o.memoizedProps,h.memoizedState=o.memoizedState,h.updateQueue=o.updateQueue,u=o.dependencies,h.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},h.sibling=o.sibling,h.index=o.index,h.ref=o.ref,h.refCleanup=o.refCleanup,h}function _y(o,u){o.flags&=65011714;var h=o.alternate;return h===null?(o.childLanes=0,o.lanes=u,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=h.childLanes,o.lanes=h.lanes,o.child=h.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=h.memoizedProps,o.memoizedState=h.memoizedState,o.updateQueue=h.updateQueue,o.type=h.type,u=h.dependencies,o.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),o}function qp(o,u,h,m,b,N){var x=0;if(m=o,typeof o=="function")bl(o)&&(x=1);else if(typeof o=="string")x=aC(o,h,We.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case F:return o=Ui(31,h,u,b),o.elementType=F,o.lanes=N,o;case w:return ac(h.children,b,N,u);case A:x=8,b|=24;break;case M:return o=Ui(12,h,u,b|2),o.elementType=M,o.lanes=N,o;case H:return o=Ui(13,h,u,b),o.elementType=H,o.lanes=N,o;case L:return o=Ui(19,h,u,b),o.elementType=L,o.lanes=N,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case D:x=10;break e;case I:x=9;break e;case P:x=11;break e;case G:x=14;break e;case Y:x=16,m=null;break e}x=29,h=Error(r(130,o===null?"null":typeof o,"")),m=null}return u=Ui(x,h,u,b),u.elementType=o,u.type=m,u.lanes=N,u}function ac(o,u,h,m){return o=Ui(7,o,m,u),o.lanes=h,o}function cd(o,u,h){return o=Ui(6,o,null,u),o.lanes=h,o}function Dh(o){var u=Ui(18,null,null,0);return u.stateNode=o,u}function xh(o,u,h){return u=Ui(4,o.children!==null?o.children:[],o.key,u),u.lanes=h,u.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},u}var yy=new WeakMap;function Xa(o,u){if(typeof o=="object"&&o!==null){var h=yy.get(o);return h!==void 0?h:(u={value:o,source:u,stack:_r(u)},yy.set(o,u),u)}return{value:o,source:u,stack:_r(u)}}var dd=[],hd=0,Wr=null,ui=0,As=[],Is=0,El=null,Uo=1,Ms="";function Za(o,u){dd[hd++]=ui,dd[hd++]=Wr,Wr=o,ui=u}function Wp(o,u,h){As[Is++]=Uo,As[Is++]=Ms,As[Is++]=El,El=o;var m=Uo;o=Ms;var b=32-Jt(m)-1;m&=~(1<<b),h+=1;var N=32-Jt(u)+b;if(30<N){var x=b-b%5;N=(m&(1<<x)-1).toString(32),m>>=x,b-=x,Uo=1<<32-Jt(u)+b|h<<b|m,Ms=N+o}else Uo=1<<N|h<<b|m,Ms=o}function su(o){o.return!==null&&(Za(o,1),Wp(o,1,0))}function sc(o){for(;o===Wr;)Wr=dd[--hd],dd[hd]=null,ui=dd[--hd],dd[hd]=null;for(;o===El;)El=As[--Is],As[Is]=null,Ms=As[--Is],As[Is]=null,Uo=As[--Is],As[Is]=null}function fd(o,u){As[Is++]=Uo,As[Is++]=Ms,As[Is++]=El,Uo=u.id,Ms=u.overflow,El=o}var ci=null,tr=null,In=!1,ou=null,Os=!1,Kg=Error(r(519));function lu(o){var u=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw cu(Xa(u,o)),Kg}function Ph(o){var u=o.stateNode,h=o.type,m=o.memoizedProps;switch(u[Ot]=o,u[ht]=m,h){case"dialog":Cn("cancel",u),Cn("close",u);break;case"iframe":case"object":case"embed":Cn("load",u);break;case"video":case"audio":for(h=0;h<Cf.length;h++)Cn(Cf[h],u);break;case"source":Cn("error",u);break;case"img":case"image":case"link":Cn("error",u),Cn("load",u);break;case"details":Cn("toggle",u);break;case"input":Cn("invalid",u),cl(u,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0);break;case"select":Cn("invalid",u);break;case"textarea":Cn("invalid",u),dl(u,m.value,m.defaultValue,m.children)}h=m.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||u.textContent===""+h||m.suppressHydrationWarning===!0||Sb(u.textContent,h)?(m.popover!=null&&(Cn("beforetoggle",u),Cn("toggle",u)),m.onScroll!=null&&Cn("scroll",u),m.onScrollEnd!=null&&Cn("scrollend",u),m.onClick!=null&&(u.onclick=ca),u=!0):u=!1,u||lu(o,!0)}function pd(o){for(ci=o.return;ci;)switch(ci.tag){case 5:case 31:case 13:Os=!1;return;case 27:case 3:Os=!0;return;default:ci=ci.return}}function oc(o){if(o!==ci)return!1;if(!In)return pd(o),In=!0,!1;var u=o.tag,h;if((h=u!==3&&u!==27)&&((h=u===5)&&(h=o.type,h=!(h!=="form"&&h!=="button")||Su(o.type,o.memoizedProps)),h=!h),h&&tr&&lu(o),pd(o),u===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));tr=kb(o)}else if(u===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));tr=kb(o)}else u===27?(u=tr,Bt(o.type)?(o=d_,d_=null,tr=o):tr=u):tr=ci?Us(o.stateNode.nextSibling):null;return!0}function B(){tr=ci=null,In=!1}function uu(){var o=ou;return o!==null&&(Ua===null?Ua=o:Ua.push.apply(Ua,o),ou=null),o}function cu(o){ou===null?ou=[o]:ou.push(o)}var Oa=$(null),rn=null,Cl=null;function du(o,u,h){Ie(Oa,u._currentValue),u._currentValue=h}function wl(o){o._currentValue=Oa.current,fe(Oa)}function Nl(o,u,h){for(;o!==null;){var m=o.alternate;if((o.childLanes&u)!==u?(o.childLanes|=u,m!==null&&(m.childLanes|=u)):m!==null&&(m.childLanes&u)!==u&&(m.childLanes|=u),o===h)break;o=o.return}}function Yg(o,u,h,m){var b=o.child;for(b!==null&&(b.return=o);b!==null;){var N=b.dependencies;if(N!==null){var x=b.child;N=N.firstContext;e:for(;N!==null;){var V=N;N=b;for(var ie=0;ie<u.length;ie++)if(V.context===u[ie]){N.lanes|=h,V=N.alternate,V!==null&&(V.lanes|=h),Nl(N.return,h,o),m||(x=null);break e}N=V.next}}else if(b.tag===18){if(x=b.return,x===null)throw Error(r(341));x.lanes|=h,N=x.alternate,N!==null&&(N.lanes|=h),Nl(x,h,o),x=null}else x=b.child;if(x!==null)x.return=b;else for(x=b;x!==null;){if(x===o){x=null;break}if(b=x.sibling,b!==null){b.return=x.return,x=b;break}x=x.return}b=x}}function md(o,u,h,m){o=null;for(var b=u,N=!1;b!==null;){if(!N){if((b.flags&524288)!==0)N=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var x=b.alternate;if(x===null)throw Error(r(387));if(x=x.memoizedProps,x!==null){var V=b.type;jr(b.pendingProps.value,x.value)||(o!==null?o.push(V):o=[V])}}else if(b===tt.current){if(x=b.alternate,x===null)throw Error(r(387));x.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(o!==null?o.push(Wd):o=[Wd])}b=b.return}o!==null&&Yg(u,o,h,m),u.flags|=262144}function Kp(o){for(o=o.firstContext;o!==null;){if(!jr(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function lc(o){rn=o,Cl=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Li(o){return by(rn,o)}function ks(o,u){return rn===null&&lc(o),by(o,u)}function by(o,u){var h=u._currentValue;if(u={context:u,memoizedValue:h,next:null},Cl===null){if(o===null)throw Error(r(308));Cl=u,o.dependencies={lanes:0,firstContext:u},o.flags|=524288}else Cl=Cl.next=u;return h}var T2=typeof AbortController<"u"?AbortController:function(){var o=[],u=this.signal={aborted:!1,addEventListener:function(h,m){o.push(m)}};this.abort=function(){u.aborted=!0,o.forEach(function(h){return h()})}},S2=t.unstable_scheduleCallback,A2=t.unstable_NormalPriority,di={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Zs(){return{controller:new T2,data:new Map,refCount:0}}function Uh(o){o.refCount--,o.refCount===0&&S2(A2,function(){o.controller.abort()})}var Lh=null,Qg=0,gd=0,vd=null;function uc(o,u){if(Lh===null){var h=Lh=[];Qg=0,gd=os(),vd={status:"pending",value:void 0,then:function(m){h.push(m)}}}return Qg++,u.then(Ey,Ey),u}function Ey(){if(--Qg===0&&Lh!==null){vd!==null&&(vd.status="fulfilled");var o=Lh;Lh=null,gd=0,vd=null;for(var u=0;u<o.length;u++)(0,o[u])()}}function I2(o,u){var h=[],m={status:"pending",value:null,reason:null,then:function(b){h.push(b)}};return o.then(function(){m.status="fulfilled",m.value=u;for(var b=0;b<h.length;b++)(0,h[b])(u)},function(b){for(m.status="rejected",m.reason=b,b=0;b<h.length;b++)(0,h[b])(void 0)}),m}var Rs=q.S;q.S=function(o,u){ab=gn(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&uc(o,u),Rs!==null&&Rs(o,u)};var cc=$(null);function $g(){var o=cc.current;return o!==null?o:br.pooledCache}function Yp(o,u){u===null?Ie(cc,cc.current):Ie(cc,u.pool)}function Cy(){var o=$g();return o===null?null:{parent:di._currentValue,pool:o}}var _d=Error(r(460)),Qp=Error(r(474)),Fh=Error(r(542)),$p={then:function(){}};function wy(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Xp(o,u,h){switch(h=o[h],h===void 0?o.push(u):h!==u&&(u.then(ca,ca),u=h),u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,Xg(o),o;default:if(typeof u.status=="string")u.then(ca,ca);else{if(o=br,o!==null&&100<o.shellSuspendCounter)throw Error(r(482));o=u,o.status="pending",o.then(function(m){if(u.status==="pending"){var b=u;b.status="fulfilled",b.value=m}},function(m){if(u.status==="pending"){var b=u;b.status="rejected",b.reason=m}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,Xg(o),o}throw Lo=u,_d}}function Js(o){try{var u=o._init;return u(o._payload)}catch(h){throw h!==null&&typeof h=="object"&&typeof h.then=="function"?(Lo=h,_d):h}}var Lo=null;function Ny(){if(Lo===null)throw Error(r(459));var o=Lo;return Lo=null,o}function Xg(o){if(o===_d||o===Fh)throw Error(r(483))}var yd=null,Ja=0;function bd(o){var u=Ja;return Ja+=1,yd===null&&(yd=[]),Xp(yd,o,u)}function eo(o,u){u=u.props.ref,o.ref=u!==void 0?u:null}function da(o,u){throw u.$$typeof===_?Error(r(525)):(o=Object.prototype.toString.call(u),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":o)))}function Ty(o){function u(he,se){if(o){var ve=he.deletions;ve===null?(he.deletions=[se],he.flags|=16):ve.push(se)}}function h(he,se){if(!o)return null;for(;se!==null;)u(he,se),se=se.sibling;return null}function m(he){for(var se=new Map;he!==null;)he.key!==null?se.set(he.key,he):se.set(he.index,he),he=he.sibling;return se}function b(he,se){return he=Ss(he,se),he.index=0,he.sibling=null,he}function N(he,se,ve){return he.index=ve,o?(ve=he.alternate,ve!==null?(ve=ve.index,ve<se?(he.flags|=67108866,se):ve):(he.flags|=67108866,se)):(he.flags|=1048576,se)}function x(he){return o&&he.alternate===null&&(he.flags|=67108866),he}function V(he,se,ve,Fe){return se===null||se.tag!==6?(se=cd(ve,he.mode,Fe),se.return=he,se):(se=b(se,ve),se.return=he,se)}function ie(he,se,ve,Fe){var kt=ve.type;return kt===w?De(he,se,ve.props.children,Fe,ve.key):se!==null&&(se.elementType===kt||typeof kt=="object"&&kt!==null&&kt.$$typeof===Y&&Js(kt)===se.type)?(se=b(se,ve.props),eo(se,ve),se.return=he,se):(se=qp(ve.type,ve.key,ve.props,null,he.mode,Fe),eo(se,ve),se.return=he,se)}function _e(he,se,ve,Fe){return se===null||se.tag!==4||se.stateNode.containerInfo!==ve.containerInfo||se.stateNode.implementation!==ve.implementation?(se=xh(ve,he.mode,Fe),se.return=he,se):(se=b(se,ve.children||[]),se.return=he,se)}function De(he,se,ve,Fe,kt){return se===null||se.tag!==7?(se=ac(ve,he.mode,Fe,kt),se.return=he,se):(se=b(se,ve),se.return=he,se)}function je(he,se,ve){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return se=cd(""+se,he.mode,ve),se.return=he,se;if(typeof se=="object"&&se!==null){switch(se.$$typeof){case y:return ve=qp(se.type,se.key,se.props,null,he.mode,ve),eo(ve,se),ve.return=he,ve;case C:return se=xh(se,he.mode,ve),se.return=he,se;case Y:return se=Js(se),je(he,se,ve)}if(ue(se)||re(se))return se=ac(se,he.mode,ve,null),se.return=he,se;if(typeof se.then=="function")return je(he,bd(se),ve);if(se.$$typeof===D)return je(he,ks(he,se),ve);da(he,se)}return null}function be(he,se,ve,Fe){var kt=se!==null?se.key:null;if(typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint")return kt!==null?null:V(he,se,""+ve,Fe);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case y:return ve.key===kt?ie(he,se,ve,Fe):null;case C:return ve.key===kt?_e(he,se,ve,Fe):null;case Y:return ve=Js(ve),be(he,se,ve,Fe)}if(ue(ve)||re(ve))return kt!==null?null:De(he,se,ve,Fe,null);if(typeof ve.then=="function")return be(he,se,bd(ve),Fe);if(ve.$$typeof===D)return be(he,se,ks(he,ve),Fe);da(he,ve)}return null}function Me(he,se,ve,Fe,kt){if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number"||typeof Fe=="bigint")return he=he.get(ve)||null,V(se,he,""+Fe,kt);if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case y:return he=he.get(Fe.key===null?ve:Fe.key)||null,ie(se,he,Fe,kt);case C:return he=he.get(Fe.key===null?ve:Fe.key)||null,_e(se,he,Fe,kt);case Y:return Fe=Js(Fe),Me(he,se,ve,Fe,kt)}if(ue(Fe)||re(Fe))return he=he.get(ve)||null,De(se,he,Fe,kt,null);if(typeof Fe.then=="function")return Me(he,se,ve,bd(Fe),kt);if(Fe.$$typeof===D)return Me(he,se,ve,ks(se,Fe),kt);da(se,Fe)}return null}function ut(he,se,ve,Fe){for(var kt=null,Bn=null,mt=se,un=se=0,Sn=null;mt!==null&&un<ve.length;un++){mt.index>un?(Sn=mt,mt=null):Sn=mt.sibling;var zn=be(he,mt,ve[un],Fe);if(zn===null){mt===null&&(mt=Sn);break}o&&mt&&zn.alternate===null&&u(he,mt),se=N(zn,se,un),Bn===null?kt=zn:Bn.sibling=zn,Bn=zn,mt=Sn}if(un===ve.length)return h(he,mt),In&&Za(he,un),kt;if(mt===null){for(;un<ve.length;un++)mt=je(he,ve[un],Fe),mt!==null&&(se=N(mt,se,un),Bn===null?kt=mt:Bn.sibling=mt,Bn=mt);return In&&Za(he,un),kt}for(mt=m(mt);un<ve.length;un++)Sn=Me(mt,he,un,ve[un],Fe),Sn!==null&&(o&&Sn.alternate!==null&&mt.delete(Sn.key===null?un:Sn.key),se=N(Sn,se,un),Bn===null?kt=Sn:Bn.sibling=Sn,Bn=Sn);return o&&mt.forEach(function(Ru){return u(he,Ru)}),In&&Za(he,un),kt}function Ht(he,se,ve,Fe){if(ve==null)throw Error(r(151));for(var kt=null,Bn=null,mt=se,un=se=0,Sn=null,zn=ve.next();mt!==null&&!zn.done;un++,zn=ve.next()){mt.index>un?(Sn=mt,mt=null):Sn=mt.sibling;var Ru=be(he,mt,zn.value,Fe);if(Ru===null){mt===null&&(mt=Sn);break}o&&mt&&Ru.alternate===null&&u(he,mt),se=N(Ru,se,un),Bn===null?kt=Ru:Bn.sibling=Ru,Bn=Ru,mt=Sn}if(zn.done)return h(he,mt),In&&Za(he,un),kt;if(mt===null){for(;!zn.done;un++,zn=ve.next())zn=je(he,zn.value,Fe),zn!==null&&(se=N(zn,se,un),Bn===null?kt=zn:Bn.sibling=zn,Bn=zn);return In&&Za(he,un),kt}for(mt=m(mt);!zn.done;un++,zn=ve.next())zn=Me(mt,he,un,zn.value,Fe),zn!==null&&(o&&zn.alternate!==null&&mt.delete(zn.key===null?un:zn.key),se=N(zn,se,un),Bn===null?kt=zn:Bn.sibling=zn,Bn=zn);return o&&mt.forEach(function(fC){return u(he,fC)}),In&&Za(he,un),kt}function fr(he,se,ve,Fe){if(typeof ve=="object"&&ve!==null&&ve.type===w&&ve.key===null&&(ve=ve.props.children),typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case y:e:{for(var kt=ve.key;se!==null;){if(se.key===kt){if(kt=ve.type,kt===w){if(se.tag===7){h(he,se.sibling),Fe=b(se,ve.props.children),Fe.return=he,he=Fe;break e}}else if(se.elementType===kt||typeof kt=="object"&&kt!==null&&kt.$$typeof===Y&&Js(kt)===se.type){h(he,se.sibling),Fe=b(se,ve.props),eo(Fe,ve),Fe.return=he,he=Fe;break e}h(he,se);break}else u(he,se);se=se.sibling}ve.type===w?(Fe=ac(ve.props.children,he.mode,Fe,ve.key),Fe.return=he,he=Fe):(Fe=qp(ve.type,ve.key,ve.props,null,he.mode,Fe),eo(Fe,ve),Fe.return=he,he=Fe)}return x(he);case C:e:{for(kt=ve.key;se!==null;){if(se.key===kt)if(se.tag===4&&se.stateNode.containerInfo===ve.containerInfo&&se.stateNode.implementation===ve.implementation){h(he,se.sibling),Fe=b(se,ve.children||[]),Fe.return=he,he=Fe;break e}else{h(he,se);break}else u(he,se);se=se.sibling}Fe=xh(ve,he.mode,Fe),Fe.return=he,he=Fe}return x(he);case Y:return ve=Js(ve),fr(he,se,ve,Fe)}if(ue(ve))return ut(he,se,ve,Fe);if(re(ve)){if(kt=re(ve),typeof kt!="function")throw Error(r(150));return ve=kt.call(ve),Ht(he,se,ve,Fe)}if(typeof ve.then=="function")return fr(he,se,bd(ve),Fe);if(ve.$$typeof===D)return fr(he,se,ks(he,ve),Fe);da(he,ve)}return typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint"?(ve=""+ve,se!==null&&se.tag===6?(h(he,se.sibling),Fe=b(se,ve),Fe.return=he,he=Fe):(h(he,se),Fe=cd(ve,he.mode,Fe),Fe.return=he,he=Fe),x(he)):h(he,se)}return function(he,se,ve,Fe){try{Ja=0;var kt=fr(he,se,ve,Fe);return yd=null,kt}catch(mt){if(mt===_d||mt===Fh)throw mt;var Bn=Ui(29,mt,null,he.mode);return Bn.lanes=Fe,Bn.return=he,Bn}}}var hu=Ty(!0),Zg=Ty(!1),Ds=!1;function Fo(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Zp(o,u){o=o.updateQueue,u.updateQueue===o&&(u.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function fu(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function to(o,u,h){var m=o.updateQueue;if(m===null)return null;if(m=m.shared,($n&2)!==0){var b=m.pending;return b===null?u.next=u:(u.next=b.next,b.next=u),m.pending=u,u=Rh(o),Wg(o,null,h),u}return ic(o,m,u,h),Rh(o)}function Hh(o,u,h){if(u=u.updateQueue,u!==null&&(u=u.shared,(h&4194048)!==0)){var m=u.lanes;m&=o.pendingLanes,h|=m,u.lanes=h,qs(o,h)}}function Jp(o,u){var h=o.updateQueue,m=o.alternate;if(m!==null&&(m=m.updateQueue,h===m)){var b=null,N=null;if(h=h.firstBaseUpdate,h!==null){do{var x={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};N===null?b=N=x:N=N.next=x,h=h.next}while(h!==null);N===null?b=N=u:N=N.next=u}else b=N=u;h={baseState:m.baseState,firstBaseUpdate:b,lastBaseUpdate:N,shared:m.shared,callbacks:m.callbacks},o.updateQueue=h;return}o=h.lastBaseUpdate,o===null?h.firstBaseUpdate=u:o.next=u,h.lastBaseUpdate=u}var Ei=!1;function dc(){if(Ei){var o=vd;if(o!==null)throw o}}function Ed(o,u,h,m){Ei=!1;var b=o.updateQueue;Ds=!1;var N=b.firstBaseUpdate,x=b.lastBaseUpdate,V=b.shared.pending;if(V!==null){b.shared.pending=null;var ie=V,_e=ie.next;ie.next=null,x===null?N=_e:x.next=_e,x=ie;var De=o.alternate;De!==null&&(De=De.updateQueue,V=De.lastBaseUpdate,V!==x&&(V===null?De.firstBaseUpdate=_e:V.next=_e,De.lastBaseUpdate=ie))}if(N!==null){var je=b.baseState;x=0,De=_e=ie=null,V=N;do{var be=V.lane&-536870913,Me=be!==V.lane;if(Me?(Tn&be)===be:(m&be)===be){be!==0&&be===gd&&(Ei=!0),De!==null&&(De=De.next={lane:0,tag:V.tag,payload:V.payload,callback:null,next:null});e:{var ut=o,Ht=V;be=u;var fr=h;switch(Ht.tag){case 1:if(ut=Ht.payload,typeof ut=="function"){je=ut.call(fr,je,be);break e}je=ut;break e;case 3:ut.flags=ut.flags&-65537|128;case 0:if(ut=Ht.payload,be=typeof ut=="function"?ut.call(fr,je,be):ut,be==null)break e;je=g({},je,be);break e;case 2:Ds=!0}}be=V.callback,be!==null&&(o.flags|=64,Me&&(o.flags|=8192),Me=b.callbacks,Me===null?b.callbacks=[be]:Me.push(be))}else Me={lane:be,tag:V.tag,payload:V.payload,callback:V.callback,next:null},De===null?(_e=De=Me,ie=je):De=De.next=Me,x|=be;if(V=V.next,V===null){if(V=b.shared.pending,V===null)break;Me=V,V=Me.next,Me.next=null,b.lastBaseUpdate=Me,b.shared.pending=null}}while(!0);De===null&&(ie=je),b.baseState=ie,b.firstBaseUpdate=_e,b.lastBaseUpdate=De,N===null&&(b.shared.lanes=0),Eu|=x,o.lanes=x,o.memoizedState=je}}function no(o,u){if(typeof o!="function")throw Error(r(191,o));o.call(u)}function em(o,u){var h=o.callbacks;if(h!==null)for(o.callbacks=null,o=0;o<h.length;o++)no(h[o],u)}var Tl=$(null),Ho=$(0);function Jg(o,u){o=uo,Ie(Ho,o),Ie(Tl,u),uo=o|u.baseLanes}function Fi(){Ie(Ho,uo),Ie(Tl,Tl.current)}function jh(){uo=Ho.current,fe(Tl),fe(Ho)}var es=$(null),ro=null;function pu(o){var u=o.alternate;Ie(ri,ri.current&1),Ie(es,o),ro===null&&(u===null||Tl.current!==null||u.memoizedState!==null)&&(ro=o)}function Gh(o){Ie(ri,ri.current),Ie(es,o),ro===null&&(ro=o)}function Sy(o){o.tag===22?(Ie(ri,ri.current),Ie(es,o),ro===null&&(ro=o)):xs()}function xs(){Ie(ri,ri.current),Ie(es,es.current)}function ka(o){fe(es),ro===o&&(ro=null),fe(ri)}var ri=$(0);function tm(o){for(var u=o;u!==null;){if(u.tag===13){var h=u.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||Fm(h)||jd(h)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var ts=0,an=null,dr=null,Kr=null,Vh=!1,Cd=!1,hc=!1,nm=0,wd=0,mu=null,M2=0;function Pr(){throw Error(r(321))}function rm(o,u){if(u===null)return!1;for(var h=0;h<u.length&&h<o.length;h++)if(!jr(o[h],u[h]))return!1;return!0}function im(o,u,h,m,b,N){return ts=N,an=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,q.H=o===null||o.memoizedState===null?Ly:fm,hc=!1,N=h(m,b),hc=!1,Cd&&(N=Bh(u,h,m,b)),ev(o),N}function ev(o){q.H=vu;var u=dr!==null&&dr.next!==null;if(ts=0,Kr=dr=an=null,Vh=!1,wd=0,mu=null,u)throw Error(r(300));o===null||Gr||(o=o.dependencies,o!==null&&Kp(o)&&(Gr=!0))}function Bh(o,u,h,m){an=o;var b=0;do{if(Cd&&(mu=null),wd=0,Cd=!1,25<=b)throw Error(r(301));if(b+=1,Kr=dr=null,o.updateQueue!=null){var N=o.updateQueue;N.lastEffect=null,N.events=null,N.stores=null,N.memoCache!=null&&(N.memoCache.index=0)}q.H=Xh,N=u(h,m)}while(Cd);return N}function O2(){var o=q.H,u=o.useState()[0];return u=typeof u.then=="function"?Td(u):u,o=o.useState()[0],(dr!==null?dr.memoizedState:null)!==o&&(an.flags|=1024),u}function am(){var o=nm!==0;return nm=0,o}function sm(o,u,h){u.updateQueue=o.updateQueue,u.flags&=-2053,o.lanes&=~h}function tv(o){if(Vh){for(o=o.memoizedState;o!==null;){var u=o.queue;u!==null&&(u.pending=null),o=o.next}Vh=!1}ts=0,Kr=dr=an=null,Cd=!1,wd=nm=0,mu=null}function Yi(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kr===null?an.memoizedState=Kr=o:Kr=Kr.next=o,Kr}function ii(){if(dr===null){var o=an.alternate;o=o!==null?o.memoizedState:null}else o=dr.next;var u=Kr===null?an.memoizedState:Kr.next;if(u!==null)Kr=u,dr=o;else{if(o===null)throw an.alternate===null?Error(r(467)):Error(r(310));dr=o,o={memoizedState:dr.memoizedState,baseState:dr.baseState,baseQueue:dr.baseQueue,queue:dr.queue,next:null},Kr===null?an.memoizedState=Kr=o:Kr=Kr.next=o}return Kr}function Nd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Td(o){var u=wd;return wd+=1,mu===null&&(mu=[]),o=Xp(mu,o,u),u=an,(Kr===null?u.memoizedState:Kr.next)===null&&(u=u.alternate,q.H=u===null||u.memoizedState===null?Ly:fm),o}function Sd(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Td(o);if(o.$$typeof===D)return Li(o)}throw Error(r(438,String(o)))}function nv(o){var u=null,h=an.updateQueue;if(h!==null&&(u=h.memoCache),u==null){var m=an.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(u={data:m.data.map(function(b){return b.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),h===null&&(h=Nd(),an.updateQueue=h),h.memoCache=u,h=u.data[u.index],h===void 0)for(h=u.data[u.index]=Array(o),m=0;m<o;m++)h[m]=ne;return u.index++,h}function io(o,u){return typeof u=="function"?u(o):u}function sn(o){var u=ii();return rv(u,dr,o)}function rv(o,u,h){var m=o.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=h;var b=o.baseQueue,N=m.pending;if(N!==null){if(b!==null){var x=b.next;b.next=N.next,N.next=x}u.baseQueue=b=N,m.pending=null}if(N=o.baseState,b===null)o.memoizedState=N;else{u=b.next;var V=x=null,ie=null,_e=u,De=!1;do{var je=_e.lane&-536870913;if(je!==_e.lane?(Tn&je)===je:(ts&je)===je){var be=_e.revertLane;if(be===0)ie!==null&&(ie=ie.next={lane:0,revertLane:0,gesture:null,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null}),je===gd&&(De=!0);else if((ts&be)===be){_e=_e.next,be===gd&&(De=!0);continue}else je={lane:0,revertLane:_e.revertLane,gesture:null,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null},ie===null?(V=ie=je,x=N):ie=ie.next=je,an.lanes|=be,Eu|=be;je=_e.action,hc&&h(N,je),N=_e.hasEagerState?_e.eagerState:h(N,je)}else be={lane:je,revertLane:_e.revertLane,gesture:_e.gesture,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null},ie===null?(V=ie=be,x=N):ie=ie.next=be,an.lanes|=je,Eu|=je;_e=_e.next}while(_e!==null&&_e!==u);if(ie===null?x=N:ie.next=V,!jr(N,o.memoizedState)&&(Gr=!0,De&&(h=vd,h!==null)))throw h;o.memoizedState=N,o.baseState=x,o.baseQueue=ie,m.lastRenderedState=N}return b===null&&(m.lanes=0),[o.memoizedState,m.dispatch]}function iv(o){var u=ii(),h=u.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=o;var m=h.dispatch,b=h.pending,N=u.memoizedState;if(b!==null){h.pending=null;var x=b=b.next;do N=o(N,x.action),x=x.next;while(x!==b);jr(N,u.memoizedState)||(Gr=!0),u.memoizedState=N,u.baseQueue===null&&(u.baseState=N),h.lastRenderedState=N}return[N,m]}function Ad(o,u,h){var m=an,b=ii(),N=In;if(N){if(h===void 0)throw Error(r(407));h=h()}else h=u();var x=!jr((dr||b).memoizedState,h);if(x&&(b.memoizedState=h,Gr=!0),b=b.queue,Kh(Iy.bind(null,m,b,o),[o]),b.getSnapshot!==u||x||Kr!==null&&Kr.memoizedState.tag&1){if(m.flags|=2048,rs(9,{destroy:void 0},Ay.bind(null,m,b,h,u),null),br===null)throw Error(r(349));N||(ts&127)!==0||av(m,u,h)}return h}function av(o,u,h){o.flags|=16384,o={getSnapshot:u,value:h},u=an.updateQueue,u===null?(u=Nd(),an.updateQueue=u,u.stores=[o]):(h=u.stores,h===null?u.stores=[o]:h.push(o))}function Ay(o,u,h,m){u.value=h,u.getSnapshot=m,ns(u)&&My(o)}function Iy(o,u,h){return h(function(){ns(u)&&My(o)})}function ns(o){var u=o.getSnapshot;o=o.value;try{var h=u();return!jr(o,h)}catch{return!0}}function My(o){var u=Po(o,2);u!==null&&La(u,o,2)}function Id(o){var u=Yi();if(typeof o=="function"){var h=o;if(o=h(),hc){Yn(!0);try{h()}finally{Yn(!1)}}}return u.memoizedState=u.baseState=o,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:io,lastRenderedState:o},u}function om(o,u,h,m){return o.baseState=h,rv(o,dr,typeof m=="function"?m:io)}function Oy(o,u,h,m,b){if(Qh(o))throw Error(r(485));if(o=u.action,o!==null){var N={payload:b,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){N.listeners.push(x)}};q.T!==null?h(!0):N.isTransition=!1,m(N),h=u.pending,h===null?(N.next=u.pending=N,sv(u,N)):(N.next=h.next,u.pending=h.next=N)}}function sv(o,u){var h=u.action,m=u.payload,b=o.state;if(u.isTransition){var N=q.T,x={};q.T=x;try{var V=h(b,m),ie=q.S;ie!==null&&ie(x,V),Ra(o,u,V)}catch(_e){zh(o,u,_e)}finally{N!==null&&x.types!==null&&(N.types=x.types),q.T=N}}else try{N=h(b,m),Ra(o,u,N)}catch(_e){zh(o,u,_e)}}function Ra(o,u,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(m){Sl(o,u,m)},function(m){return zh(o,u,m)}):Sl(o,u,h)}function Sl(o,u,h){u.status="fulfilled",u.value=h,ov(u),o.state=h,u=o.pending,u!==null&&(h=u.next,h===u?o.pending=null:(h=h.next,u.next=h,sv(o,h)))}function zh(o,u,h){var m=o.pending;if(o.pending=null,m!==null){m=m.next;do u.status="rejected",u.reason=h,ov(u),u=u.next;while(u!==m)}o.action=null}function ov(o){o=o.listeners;for(var u=0;u<o.length;u++)(0,o[u])()}function qh(o,u){return u}function lv(o,u){if(In){var h=br.formState;if(h!==null){e:{var m=an;if(In){if(tr){t:{for(var b=tr,N=Os;b.nodeType!==8;){if(!N){b=null;break t}if(b=Us(b.nextSibling),b===null){b=null;break t}}N=b.data,b=N==="F!"||N==="F"?b:null}if(b){tr=Us(b.nextSibling),m=b.data==="F!";break e}}lu(m)}m=!1}m&&(u=h[0])}}return h=Yi(),h.memoizedState=h.baseState=u,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qh,lastRenderedState:u},h.queue=m,h=yv.bind(null,an,m),m.dispatch=h,m=Id(!1),N=Od.bind(null,an,!1,m.queue),m=Yi(),b={state:u,dispatch:null,action:o,pending:null},m.queue=b,h=Oy.bind(null,an,b,N,h),b.dispatch=h,m.memoizedState=o,[u,h,!1]}function lm(o){var u=ii();return uv(u,dr,o)}function uv(o,u,h){if(u=rv(o,u,qh)[0],o=sn(io)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var m=Td(u)}catch(x){throw x===_d?Fh:x}else m=u;u=ii();var b=u.queue,N=b.dispatch;return h!==u.memoizedState&&(an.flags|=2048,rs(9,{destroy:void 0},cv.bind(null,b,h),null)),[m,N,o]}function cv(o,u){o.action=u}function um(o){var u=ii(),h=dr;if(h!==null)return uv(u,h,o);ii(),u=u.memoizedState,h=ii();var m=h.queue.dispatch;return h.memoizedState=o,[u,m,!1]}function rs(o,u,h,m){return o={tag:o,create:h,deps:m,inst:u,next:null},u=an.updateQueue,u===null&&(u=Nd(),an.updateQueue=u),h=u.lastEffect,h===null?u.lastEffect=o.next=o:(m=h.next,h.next=o,o.next=m,u.lastEffect=o),o}function ky(){return ii().memoizedState}function ao(o,u,h,m){var b=Yi();an.flags|=o,b.memoizedState=rs(1|u,{destroy:void 0},h,m===void 0?null:m)}function Wh(o,u,h,m){var b=ii();m=m===void 0?null:m;var N=b.memoizedState.inst;dr!==null&&m!==null&&rm(m,dr.memoizedState.deps)?b.memoizedState=rs(u,N,h,m):(an.flags|=o,b.memoizedState=rs(1|u,N,h,m))}function dv(o,u){ao(8390656,8,o,u)}function Kh(o,u){Wh(2048,8,o,u)}function k2(o){an.flags|=4;var u=an.updateQueue;if(u===null)u=Nd(),an.updateQueue=u,u.events=[o];else{var h=u.events;h===null?u.events=[o]:h.push(o)}}function Ry(o){var u=ii().memoizedState;return k2({ref:u,nextImpl:o}),function(){if(($n&2)!==0)throw Error(r(440));return u.impl.apply(void 0,arguments)}}function Dy(o,u){return Wh(4,2,o,u)}function hv(o,u){return Wh(4,4,o,u)}function fv(o,u){if(typeof u=="function"){o=o();var h=u(o);return function(){typeof h=="function"?h():u(null)}}if(u!=null)return o=o(),u.current=o,function(){u.current=null}}function xy(o,u,h){h=h!=null?h.concat([o]):null,Wh(4,4,fv.bind(null,u,o),h)}function cm(){}function pv(o,u){var h=ii();u=u===void 0?null:u;var m=h.memoizedState;return u!==null&&rm(u,m[1])?m[0]:(h.memoizedState=[o,u],o)}function ha(o,u){var h=ii();u=u===void 0?null:u;var m=h.memoizedState;if(u!==null&&rm(u,m[1]))return m[0];if(m=o(),hc){Yn(!0);try{o()}finally{Yn(!1)}}return h.memoizedState=[m,u],m}function Ps(o,u,h){return h===void 0||(ts&1073741824)!==0&&(Tn&261930)===0?o.memoizedState=u:(o.memoizedState=h,o=ob(),an.lanes|=o,Eu|=o,h)}function Py(o,u,h,m){return jr(h,u)?h:Tl.current!==null?(o=Ps(o,h,m),jr(o,u)||(Gr=!0),o):(ts&42)===0||(ts&1073741824)!==0&&(Tn&261930)===0?(Gr=!0,o.memoizedState=h):(o=ob(),an.lanes|=o,Eu|=o,u)}function Uy(o,u,h,m,b){var N=le.p;le.p=N!==0&&8>N?N:8;var x=q.T,V={};q.T=V,Od(o,!1,u,h);try{var ie=b(),_e=q.S;if(_e!==null&&_e(V,ie),ie!==null&&typeof ie=="object"&&typeof ie.then=="function"){var De=I2(ie,m);Md(o,u,De,ss(o))}else Md(o,u,m,ss(o))}catch(je){Md(o,u,{then:function(){},status:"rejected",reason:je},ss())}finally{le.p=N,x!==null&&V.types!==null&&(x.types=V.types),q.T=x}}function dm(){}function gu(o,u,h,m){if(o.tag!==5)throw Error(r(476));var b=mv(o).queue;Uy(o,b,u,pe,h===null?dm:function(){return gv(o),h(m)})}function mv(o){var u=o.memoizedState;if(u!==null)return u;u={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:io,lastRenderedState:pe},next:null};var h={};return u.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:io,lastRenderedState:h},next:null},o.memoizedState=u,o=o.alternate,o!==null&&(o.memoizedState=u),u}function gv(o){var u=mv(o);u.next===null&&(u=o.alternate.memoizedState),Md(o,u.next.queue,{},ss())}function vv(){return Li(Wd)}function _v(){return ii().memoizedState}function fc(){return ii().memoizedState}function Yh(o){for(var u=o.return;u!==null;){switch(u.tag){case 24:case 3:var h=ss();o=fu(h);var m=to(u,o,h);m!==null&&(La(m,u,h),Hh(m,u,h)),u={cache:Zs()},o.payload=u;return}u=u.return}}function R2(o,u,h){var m=ss();h={lane:m,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},Qh(o)?$h(u,h):(h=zp(o,u,h,m),h!==null&&(La(h,o,m),hm(h,u,m)))}function yv(o,u,h){var m=ss();Md(o,u,h,m)}function Md(o,u,h,m){var b={lane:m,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null};if(Qh(o))$h(u,b);else{var N=o.alternate;if(o.lanes===0&&(N===null||N.lanes===0)&&(N=u.lastRenderedReducer,N!==null))try{var x=u.lastRenderedState,V=N(x,h);if(b.hasEagerState=!0,b.eagerState=V,jr(V,x))return ic(o,u,b,0),br===null&&Xs(),!1}catch{}if(h=zp(o,u,b,m),h!==null)return La(h,o,m),hm(h,u,m),!0}return!1}function Od(o,u,h,m){if(m={lane:2,revertLane:os(),gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},Qh(o)){if(u)throw Error(r(479))}else u=zp(o,h,m,2),u!==null&&La(u,o,2)}function Qh(o){var u=o.alternate;return o===an||u!==null&&u===an}function $h(o,u){Cd=Vh=!0;var h=o.pending;h===null?u.next=u:(u.next=h.next,h.next=u),o.pending=u}function hm(o,u,h){if((h&4194048)!==0){var m=u.lanes;m&=o.pendingLanes,h|=m,u.lanes=h,qs(o,h)}}var vu={readContext:Li,use:Sd,useCallback:Pr,useContext:Pr,useEffect:Pr,useImperativeHandle:Pr,useLayoutEffect:Pr,useInsertionEffect:Pr,useMemo:Pr,useReducer:Pr,useRef:Pr,useState:Pr,useDebugValue:Pr,useDeferredValue:Pr,useTransition:Pr,useSyncExternalStore:Pr,useId:Pr,useHostTransitionStatus:Pr,useFormState:Pr,useActionState:Pr,useOptimistic:Pr,useMemoCache:Pr,useCacheRefresh:Pr};vu.useEffectEvent=Pr;var Ly={readContext:Li,use:Sd,useCallback:function(o,u){return Yi().memoizedState=[o,u===void 0?null:u],o},useContext:Li,useEffect:dv,useImperativeHandle:function(o,u,h){h=h!=null?h.concat([o]):null,ao(4194308,4,fv.bind(null,u,o),h)},useLayoutEffect:function(o,u){return ao(4194308,4,o,u)},useInsertionEffect:function(o,u){ao(4,2,o,u)},useMemo:function(o,u){var h=Yi();u=u===void 0?null:u;var m=o();if(hc){Yn(!0);try{o()}finally{Yn(!1)}}return h.memoizedState=[m,u],m},useReducer:function(o,u,h){var m=Yi();if(h!==void 0){var b=h(u);if(hc){Yn(!0);try{h(u)}finally{Yn(!1)}}}else b=u;return m.memoizedState=m.baseState=b,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:b},m.queue=o,o=o.dispatch=R2.bind(null,an,o),[m.memoizedState,o]},useRef:function(o){var u=Yi();return o={current:o},u.memoizedState=o},useState:function(o){o=Id(o);var u=o.queue,h=yv.bind(null,an,u);return u.dispatch=h,[o.memoizedState,h]},useDebugValue:cm,useDeferredValue:function(o,u){var h=Yi();return Ps(h,o,u)},useTransition:function(){var o=Id(!1);return o=Uy.bind(null,an,o.queue,!0,!1),Yi().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,u,h){var m=an,b=Yi();if(In){if(h===void 0)throw Error(r(407));h=h()}else{if(h=u(),br===null)throw Error(r(349));(Tn&127)!==0||av(m,u,h)}b.memoizedState=h;var N={value:h,getSnapshot:u};return b.queue=N,dv(Iy.bind(null,m,N,o),[o]),m.flags|=2048,rs(9,{destroy:void 0},Ay.bind(null,m,N,h,u),null),h},useId:function(){var o=Yi(),u=br.identifierPrefix;if(In){var h=Ms,m=Uo;h=(m&~(1<<32-Jt(m)-1)).toString(32)+h,u="_"+u+"R_"+h,h=nm++,0<h&&(u+="H"+h.toString(32)),u+="_"}else h=M2++,u="_"+u+"r_"+h.toString(32)+"_";return o.memoizedState=u},useHostTransitionStatus:vv,useFormState:lv,useActionState:lv,useOptimistic:function(o){var u=Yi();u.memoizedState=u.baseState=o;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=h,u=Od.bind(null,an,!0,h),h.dispatch=u,[o,u]},useMemoCache:nv,useCacheRefresh:function(){return Yi().memoizedState=Yh.bind(null,an)},useEffectEvent:function(o){var u=Yi(),h={impl:o};return u.memoizedState=h,function(){if(($n&2)!==0)throw Error(r(440));return h.impl.apply(void 0,arguments)}}},fm={readContext:Li,use:Sd,useCallback:pv,useContext:Li,useEffect:Kh,useImperativeHandle:xy,useInsertionEffect:Dy,useLayoutEffect:hv,useMemo:ha,useReducer:sn,useRef:ky,useState:function(){return sn(io)},useDebugValue:cm,useDeferredValue:function(o,u){var h=ii();return Py(h,dr.memoizedState,o,u)},useTransition:function(){var o=sn(io)[0],u=ii().memoizedState;return[typeof o=="boolean"?o:Td(o),u]},useSyncExternalStore:Ad,useId:_v,useHostTransitionStatus:vv,useFormState:lm,useActionState:lm,useOptimistic:function(o,u){var h=ii();return om(h,dr,o,u)},useMemoCache:nv,useCacheRefresh:fc};fm.useEffectEvent=Ry;var Xh={readContext:Li,use:Sd,useCallback:pv,useContext:Li,useEffect:Kh,useImperativeHandle:xy,useInsertionEffect:Dy,useLayoutEffect:hv,useMemo:ha,useReducer:iv,useRef:ky,useState:function(){return iv(io)},useDebugValue:cm,useDeferredValue:function(o,u){var h=ii();return dr===null?Ps(h,o,u):Py(h,dr.memoizedState,o,u)},useTransition:function(){var o=iv(io)[0],u=ii().memoizedState;return[typeof o=="boolean"?o:Td(o),u]},useSyncExternalStore:Ad,useId:_v,useHostTransitionStatus:vv,useFormState:um,useActionState:um,useOptimistic:function(o,u){var h=ii();return dr!==null?om(h,dr,o,u):(h.baseState=o,[o,h.queue.dispatch])},useMemoCache:nv,useCacheRefresh:fc};Xh.useEffectEvent=Ry;function pm(o,u,h,m){u=o.memoizedState,h=h(m,u),h=h==null?u:g({},u,h),o.memoizedState=h,o.lanes===0&&(o.updateQueue.baseState=h)}var Zh={enqueueSetState:function(o,u,h){o=o._reactInternals;var m=ss(),b=fu(m);b.payload=u,h!=null&&(b.callback=h),u=to(o,b,m),u!==null&&(La(u,o,m),Hh(u,o,m))},enqueueReplaceState:function(o,u,h){o=o._reactInternals;var m=ss(),b=fu(m);b.tag=1,b.payload=u,h!=null&&(b.callback=h),u=to(o,b,m),u!==null&&(La(u,o,m),Hh(u,o,m))},enqueueForceUpdate:function(o,u){o=o._reactInternals;var h=ss(),m=fu(h);m.tag=2,u!=null&&(m.callback=u),u=to(o,m,h),u!==null&&(La(u,o,h),Hh(u,o,h))}};function Fy(o,u,h,m,b,N,x){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(m,N,x):u.prototype&&u.prototype.isPureReactComponent?!ad(h,m)||!ad(b,N):!0}function bv(o,u,h,m){o=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(h,m),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(h,m),u.state!==o&&Zh.enqueueReplaceState(u,u.state,null)}function fa(o,u){var h=u;if("ref"in u){h={};for(var m in u)m!=="ref"&&(h[m]=u[m])}if(o=o.defaultProps){h===u&&(h=g({},h));for(var b in o)h[b]===void 0&&(h[b]=o[b])}return h}function Ev(o){Bp(o)}function Cv(o){console.error(o)}function Hy(o){Bp(o)}function Jh(o,u){try{var h=o.onUncaughtError;h(u.value,{componentStack:u.stack})}catch(m){setTimeout(function(){throw m})}}function jy(o,u,h){try{var m=o.onCaughtError;m(h.value,{componentStack:h.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function wv(o,u,h){return h=fu(h),h.tag=3,h.payload={element:null},h.callback=function(){Jh(o,u)},h}function jo(o){return o=fu(o),o.tag=3,o}function mm(o,u,h,m){var b=h.type.getDerivedStateFromError;if(typeof b=="function"){var N=m.value;o.payload=function(){return b(N)},o.callback=function(){jy(u,h,m)}}var x=h.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(o.callback=function(){jy(u,h,m),typeof b!="function"&&(Cu===null?Cu=new Set([this]):Cu.add(this));var V=m.stack;this.componentDidCatch(m.value,{componentStack:V!==null?V:""})})}function Nv(o,u,h,m,b){if(h.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(u=h.alternate,u!==null&&md(u,h,b,!0),h=es.current,h!==null){switch(h.tag){case 31:case 13:return ro===null?Mm():h.alternate===null&&Vr===0&&(Vr=3),h.flags&=-257,h.flags|=65536,h.lanes=b,m===$p?h.flags|=16384:(u=h.updateQueue,u===null?h.updateQueue=new Set([m]):u.add(m),Jv(o,m,b)),!1;case 22:return h.flags|=65536,m===$p?h.flags|=16384:(u=h.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([m])},h.updateQueue=u):(h=u.retryQueue,h===null?u.retryQueue=new Set([m]):h.add(m)),Jv(o,m,b)),!1}throw Error(r(435,h.tag))}return Jv(o,m,b),Mm(),!1}if(In)return u=es.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=b,m!==Kg&&(o=Error(r(422),{cause:m}),cu(Xa(o,h)))):(m!==Kg&&(u=Error(r(423),{cause:m}),cu(Xa(u,h))),o=o.current.alternate,o.flags|=65536,b&=-b,o.lanes|=b,m=Xa(m,h),b=wv(o.stateNode,m,b),Jp(o,b),Vr!==4&&(Vr=2)),!1;var N=Error(r(520),{cause:m});if(N=Xa(N,h),pf===null?pf=[N]:pf.push(N),Vr!==4&&(Vr=2),u===null)return!0;m=Xa(m,h),h=u;do{switch(h.tag){case 3:return h.flags|=65536,o=b&-b,h.lanes|=o,o=wv(h.stateNode,m,o),Jp(h,o),!1;case 1:if(u=h.type,N=h.stateNode,(h.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Cu===null||!Cu.has(N))))return h.flags|=65536,b&=-b,h.lanes|=b,b=jo(b),mm(b,o,h,m),Jp(h,b),!1}h=h.return}while(h!==null);return!1}var ef=Error(r(461)),Gr=!1;function Yr(o,u,h,m){u.child=o===null?Zg(u,null,h,m):hu(u,o.child,h,m)}function Ut(o,u,h,m,b){h=h.render;var N=u.ref;if("ref"in m){var x={};for(var V in m)V!=="ref"&&(x[V]=m[V])}else x=m;return lc(u),m=im(o,u,h,x,N,b),V=am(),o!==null&&!Gr?(sm(o,u,b),Go(o,u,b)):(In&&V&&su(u),u.flags|=1,Yr(o,u,m,b),u.child)}function tf(o,u,h,m,b){if(o===null){var N=h.type;return typeof N=="function"&&!bl(N)&&N.defaultProps===void 0&&h.compare===null?(u.tag=15,u.type=N,gm(o,u,N,m,b)):(o=qp(h.type,null,m,u,u.mode,b),o.ref=u.ref,o.return=u,u.child=o)}if(N=o.child,!Em(o,b)){var x=N.memoizedProps;if(h=h.compare,h=h!==null?h:ad,h(x,m)&&o.ref===u.ref)return Go(o,u,b)}return u.flags|=1,o=Ss(N,m),o.ref=u.ref,o.return=u,u.child=o}function gm(o,u,h,m,b){if(o!==null){var N=o.memoizedProps;if(ad(N,m)&&o.ref===u.ref)if(Gr=!1,u.pendingProps=m=N,Em(o,b))(o.flags&131072)!==0&&(Gr=!0);else return u.lanes=o.lanes,Go(o,u,b)}return ym(o,u,h,m,b)}function _u(o,u,h,m){var b=m.children,N=o!==null?o.memoizedState:null;if(o===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.mode==="hidden"){if((u.flags&128)!==0){if(N=N!==null?N.baseLanes|h:h,o!==null){for(m=u.child=o.child,b=0;m!==null;)b=b|m.lanes|m.childLanes,m=m.sibling;m=b&~N}else m=0,u.child=null;return vm(o,u,N,h,m)}if((h&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},o!==null&&Yp(u,N!==null?N.cachePool:null),N!==null?Jg(u,N):Fi(),Sy(u);else return m=u.lanes=536870912,vm(o,u,N!==null?N.baseLanes|h:h,h,m)}else N!==null?(Yp(u,N.cachePool),Jg(u,N),xs(),u.memoizedState=null):(o!==null&&Yp(u,null),Fi(),xs());return Yr(o,u,b,h),u.child}function nf(o,u){return o!==null&&o.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function vm(o,u,h,m,b){var N=$g();return N=N===null?null:{parent:di._currentValue,pool:N},u.memoizedState={baseLanes:h,cachePool:N},o!==null&&Yp(u,null),Fi(),Sy(u),o!==null&&md(o,u,m,!0),u.childLanes=b,null}function rf(o,u){return u=bm({mode:u.mode,children:u.children},o.mode),u.ref=o.ref,o.child=u,u.return=o,u}function Hi(o,u,h){return hu(u,o.child,null,h),o=rf(u,u.pendingProps),o.flags|=2,ka(u),u.memoizedState=null,o}function D2(o,u,h){var m=u.pendingProps,b=(u.flags&128)!==0;if(u.flags&=-129,o===null){if(In){if(m.mode==="hidden")return o=rf(u,m),u.lanes=536870912,nf(null,o);if(Gh(u),(o=tr)?(o=Ob(o,Os),o=o!==null&&o.data==="&"?o:null,o!==null&&(u.memoizedState={dehydrated:o,treeContext:El!==null?{id:Uo,overflow:Ms}:null,retryLane:536870912,hydrationErrors:null},h=Dh(o),h.return=u,u.child=h,ci=u,tr=null)):o=null,o===null)throw lu(u);return u.lanes=536870912,null}return rf(u,m)}var N=o.memoizedState;if(N!==null){var x=N.dehydrated;if(Gh(u),b)if(u.flags&256)u.flags&=-257,u=Hi(o,u,h);else if(u.memoizedState!==null)u.child=o.child,u.flags|=128,u=null;else throw Error(r(558));else if(Gr||md(o,u,h,!1),b=(h&o.childLanes)!==0,Gr||b){if(m=br,m!==null&&(x=Cs(m,h),x!==0&&x!==N.retryLane))throw N.retryLane=x,Po(o,x),La(m,o,x),ef;Mm(),u=Hi(o,u,h)}else o=N.treeContext,tr=Us(x.nextSibling),ci=u,In=!0,ou=null,Os=!1,o!==null&&fd(u,o),u=rf(u,m),u.flags|=4096;return u}return o=Ss(o.child,{mode:m.mode,children:m.children}),o.ref=u.ref,u.child=o,o.return=u,o}function _m(o,u){var h=u.ref;if(h===null)o!==null&&o.ref!==null&&(u.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(r(284));(o===null||o.ref!==h)&&(u.flags|=4194816)}}function ym(o,u,h,m,b){return lc(u),h=im(o,u,h,m,void 0,b),m=am(),o!==null&&!Gr?(sm(o,u,b),Go(o,u,b)):(In&&m&&su(u),u.flags|=1,Yr(o,u,h,b),u.child)}function Gy(o,u,h,m,b,N){return lc(u),u.updateQueue=null,h=Bh(u,m,h,b),ev(o),m=am(),o!==null&&!Gr?(sm(o,u,N),Go(o,u,N)):(In&&m&&su(u),u.flags|=1,Yr(o,u,h,N),u.child)}function Tv(o,u,h,m,b){if(lc(u),u.stateNode===null){var N=yl,x=h.contextType;typeof x=="object"&&x!==null&&(N=Li(x)),N=new h(m,N),u.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,N.updater=Zh,u.stateNode=N,N._reactInternals=u,N=u.stateNode,N.props=m,N.state=u.memoizedState,N.refs={},Fo(u),x=h.contextType,N.context=typeof x=="object"&&x!==null?Li(x):yl,N.state=u.memoizedState,x=h.getDerivedStateFromProps,typeof x=="function"&&(pm(u,h,x,m),N.state=u.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(x=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),x!==N.state&&Zh.enqueueReplaceState(N,N.state,null),Ed(u,m,N,b),dc(),N.state=u.memoizedState),typeof N.componentDidMount=="function"&&(u.flags|=4194308),m=!0}else if(o===null){N=u.stateNode;var V=u.memoizedProps,ie=fa(h,V);N.props=ie;var _e=N.context,De=h.contextType;x=yl,typeof De=="object"&&De!==null&&(x=Li(De));var je=h.getDerivedStateFromProps;De=typeof je=="function"||typeof N.getSnapshotBeforeUpdate=="function",V=u.pendingProps!==V,De||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(V||_e!==x)&&bv(u,N,m,x),Ds=!1;var be=u.memoizedState;N.state=be,Ed(u,m,N,b),dc(),_e=u.memoizedState,V||be!==_e||Ds?(typeof je=="function"&&(pm(u,h,je,m),_e=u.memoizedState),(ie=Ds||Fy(u,h,ie,m,be,_e,x))?(De||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(u.flags|=4194308)):(typeof N.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=m,u.memoizedState=_e),N.props=m,N.state=_e,N.context=x,m=ie):(typeof N.componentDidMount=="function"&&(u.flags|=4194308),m=!1)}else{N=u.stateNode,Zp(o,u),x=u.memoizedProps,De=fa(h,x),N.props=De,je=u.pendingProps,be=N.context,_e=h.contextType,ie=yl,typeof _e=="object"&&_e!==null&&(ie=Li(_e)),V=h.getDerivedStateFromProps,(_e=typeof V=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(x!==je||be!==ie)&&bv(u,N,m,ie),Ds=!1,be=u.memoizedState,N.state=be,Ed(u,m,N,b),dc();var Me=u.memoizedState;x!==je||be!==Me||Ds||o!==null&&o.dependencies!==null&&Kp(o.dependencies)?(typeof V=="function"&&(pm(u,h,V,m),Me=u.memoizedState),(De=Ds||Fy(u,h,De,m,be,Me,ie)||o!==null&&o.dependencies!==null&&Kp(o.dependencies))?(_e||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(m,Me,ie),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(m,Me,ie)),typeof N.componentDidUpdate=="function"&&(u.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof N.componentDidUpdate!="function"||x===o.memoizedProps&&be===o.memoizedState||(u.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||x===o.memoizedProps&&be===o.memoizedState||(u.flags|=1024),u.memoizedProps=m,u.memoizedState=Me),N.props=m,N.state=Me,N.context=ie,m=De):(typeof N.componentDidUpdate!="function"||x===o.memoizedProps&&be===o.memoizedState||(u.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||x===o.memoizedProps&&be===o.memoizedState||(u.flags|=1024),m=!1)}return N=m,_m(o,u),m=(u.flags&128)!==0,N||m?(N=u.stateNode,h=m&&typeof h.getDerivedStateFromError!="function"?null:N.render(),u.flags|=1,o!==null&&m?(u.child=hu(u,o.child,null,b),u.child=hu(u,null,h,b)):Yr(o,u,h,b),u.memoizedState=N.state,o=u.child):o=Go(o,u,b),o}function Vy(o,u,h,m){return B(),u.flags|=256,Yr(o,u,h,m),u.child}var Sv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Av(o){return{baseLanes:o,cachePool:Cy()}}function so(o,u,h){return o=o!==null?o.childLanes&~h:0,u&&(o|=as),o}function Qi(o,u,h){var m=u.pendingProps,b=!1,N=(u.flags&128)!==0,x;if((x=N)||(x=o!==null&&o.memoizedState===null?!1:(ri.current&2)!==0),x&&(b=!0,u.flags&=-129),x=(u.flags&32)!==0,u.flags&=-33,o===null){if(In){if(b?pu(u):xs(),(o=tr)?(o=Ob(o,Os),o=o!==null&&o.data!=="&"?o:null,o!==null&&(u.memoizedState={dehydrated:o,treeContext:El!==null?{id:Uo,overflow:Ms}:null,retryLane:536870912,hydrationErrors:null},h=Dh(o),h.return=u,u.child=h,ci=u,tr=null)):o=null,o===null)throw lu(u);return jd(o)?u.lanes=32:u.lanes=536870912,null}var V=m.children;return m=m.fallback,b?(xs(),b=u.mode,V=bm({mode:"hidden",children:V},b),m=ac(m,b,h,null),V.return=u,m.return=u,V.sibling=m,u.child=V,m=u.child,m.memoizedState=Av(h),m.childLanes=so(o,x,h),u.memoizedState=Sv,nf(null,m)):(pu(u),af(u,V))}var ie=o.memoizedState;if(ie!==null&&(V=ie.dehydrated,V!==null)){if(N)u.flags&256?(pu(u),u.flags&=-257,u=sf(o,u,h)):u.memoizedState!==null?(xs(),u.child=o.child,u.flags|=128,u=null):(xs(),V=m.fallback,b=u.mode,m=bm({mode:"visible",children:m.children},b),V=ac(V,b,h,null),V.flags|=2,m.return=u,V.return=u,m.sibling=V,u.child=m,hu(u,o.child,null,h),m=u.child,m.memoizedState=Av(h),m.childLanes=so(o,x,h),u.memoizedState=Sv,u=nf(null,m));else if(pu(u),jd(V)){if(x=V.nextSibling&&V.nextSibling.dataset,x)var _e=x.dgst;x=_e,m=Error(r(419)),m.stack="",m.digest=x,cu({value:m,source:null,stack:null}),u=sf(o,u,h)}else if(Gr||md(o,u,h,!1),x=(h&o.childLanes)!==0,Gr||x){if(x=br,x!==null&&(m=Cs(x,h),m!==0&&m!==ie.retryLane))throw ie.retryLane=m,Po(o,m),La(x,o,m),ef;Fm(V)||Mm(),u=sf(o,u,h)}else Fm(V)?(u.flags|=192,u.child=o.child,u=null):(o=ie.treeContext,tr=Us(V.nextSibling),ci=u,In=!0,ou=null,Os=!1,o!==null&&fd(u,o),u=af(u,m.children),u.flags|=4096);return u}return b?(xs(),V=m.fallback,b=u.mode,ie=o.child,_e=ie.sibling,m=Ss(ie,{mode:"hidden",children:m.children}),m.subtreeFlags=ie.subtreeFlags&65011712,_e!==null?V=Ss(_e,V):(V=ac(V,b,h,null),V.flags|=2),V.return=u,m.return=u,m.sibling=V,u.child=m,nf(null,m),m=u.child,V=o.child.memoizedState,V===null?V=Av(h):(b=V.cachePool,b!==null?(ie=di._currentValue,b=b.parent!==ie?{parent:ie,pool:ie}:b):b=Cy(),V={baseLanes:V.baseLanes|h,cachePool:b}),m.memoizedState=V,m.childLanes=so(o,x,h),u.memoizedState=Sv,nf(o.child,m)):(pu(u),h=o.child,o=h.sibling,h=Ss(h,{mode:"visible",children:m.children}),h.return=u,h.sibling=null,o!==null&&(x=u.deletions,x===null?(u.deletions=[o],u.flags|=16):x.push(o)),u.child=h,u.memoizedState=null,h)}function af(o,u){return u=bm({mode:"visible",children:u},o.mode),u.return=o,o.child=u}function bm(o,u){return o=Ui(22,o,null,u),o.lanes=0,o}function sf(o,u,h){return hu(u,o.child,null,h),o=af(u,u.pendingProps.children),o.flags|=2,u.memoizedState=null,o}function By(o,u,h){o.lanes|=u;var m=o.alternate;m!==null&&(m.lanes|=u),Nl(o.return,u,h)}function Iv(o,u,h,m,b,N){var x=o.memoizedState;x===null?o.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:m,tail:h,tailMode:b,treeForkCount:N}:(x.isBackwards=u,x.rendering=null,x.renderingStartTime=0,x.last=m,x.tail=h,x.tailMode=b,x.treeForkCount=N)}function kd(o,u,h){var m=u.pendingProps,b=m.revealOrder,N=m.tail;m=m.children;var x=ri.current,V=(x&2)!==0;if(V?(x=x&1|2,u.flags|=128):x&=1,Ie(ri,x),Yr(o,u,m,h),m=In?ui:0,!V&&o!==null&&(o.flags&128)!==0)e:for(o=u.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&By(o,h,u);else if(o.tag===19)By(o,h,u);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===u)break e;for(;o.sibling===null;){if(o.return===null||o.return===u)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(b){case"forwards":for(h=u.child,b=null;h!==null;)o=h.alternate,o!==null&&tm(o)===null&&(b=h),h=h.sibling;h=b,h===null?(b=u.child,u.child=null):(b=h.sibling,h.sibling=null),Iv(u,!1,b,h,N,m);break;case"backwards":case"unstable_legacy-backwards":for(h=null,b=u.child,u.child=null;b!==null;){if(o=b.alternate,o!==null&&tm(o)===null){u.child=b;break}o=b.sibling,b.sibling=h,h=b,b=o}Iv(u,!0,h,null,N,m);break;case"together":Iv(u,!1,null,null,void 0,m);break;default:u.memoizedState=null}return u.child}function Go(o,u,h){if(o!==null&&(u.dependencies=o.dependencies),Eu|=u.lanes,(h&u.childLanes)===0)if(o!==null){if(md(o,u,h,!1),(h&u.childLanes)===0)return null}else return null;if(o!==null&&u.child!==o.child)throw Error(r(153));if(u.child!==null){for(o=u.child,h=Ss(o,o.pendingProps),u.child=h,h.return=u;o.sibling!==null;)o=o.sibling,h=h.sibling=Ss(o,o.pendingProps),h.return=u;h.sibling=null}return u.child}function Em(o,u){return(o.lanes&u)!==0?!0:(o=o.dependencies,!!(o!==null&&Kp(o)))}function x2(o,u,h){switch(u.tag){case 3:At(u,u.stateNode.containerInfo),du(u,di,o.memoizedState.cache),B();break;case 27:case 5:vr(u);break;case 4:At(u,u.stateNode.containerInfo);break;case 10:du(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,Gh(u),null;break;case 13:var m=u.memoizedState;if(m!==null)return m.dehydrated!==null?(pu(u),u.flags|=128,null):(h&u.child.childLanes)!==0?Qi(o,u,h):(pu(u),o=Go(o,u,h),o!==null?o.sibling:null);pu(u);break;case 19:var b=(o.flags&128)!==0;if(m=(h&u.childLanes)!==0,m||(md(o,u,h,!1),m=(h&u.childLanes)!==0),b){if(m)return kd(o,u,h);u.flags|=128}if(b=u.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),Ie(ri,ri.current),m)break;return null;case 22:return u.lanes=0,_u(o,u,h,u.pendingProps);case 24:du(u,di,o.memoizedState.cache)}return Go(o,u,h)}function zy(o,u,h){if(o!==null)if(o.memoizedProps!==u.pendingProps)Gr=!0;else{if(!Em(o,h)&&(u.flags&128)===0)return Gr=!1,x2(o,u,h);Gr=(o.flags&131072)!==0}else Gr=!1,In&&(u.flags&1048576)!==0&&Wp(u,ui,u.index);switch(u.lanes=0,u.tag){case 16:e:{var m=u.pendingProps;if(o=Js(u.elementType),u.type=o,typeof o=="function")bl(o)?(m=fa(o,m),u.tag=1,u=Tv(null,u,o,m,h)):(u.tag=0,u=ym(null,u,o,m,h));else{if(o!=null){var b=o.$$typeof;if(b===P){u.tag=11,u=Ut(null,u,o,m,h);break e}else if(b===G){u.tag=14,u=tf(null,u,o,m,h);break e}}throw u=Z(o)||o,Error(r(306,u,""))}}return u;case 0:return ym(o,u,u.type,u.pendingProps,h);case 1:return m=u.type,b=fa(m,u.pendingProps),Tv(o,u,m,b,h);case 3:e:{if(At(u,u.stateNode.containerInfo),o===null)throw Error(r(387));m=u.pendingProps;var N=u.memoizedState;b=N.element,Zp(o,u),Ed(u,m,null,h);var x=u.memoizedState;if(m=x.cache,du(u,di,m),m!==N.cache&&Yg(u,[di],h,!0),dc(),m=x.element,N.isDehydrated)if(N={element:m,isDehydrated:!1,cache:x.cache},u.updateQueue.baseState=N,u.memoizedState=N,u.flags&256){u=Vy(o,u,m,h);break e}else if(m!==b){b=Xa(Error(r(424)),u),cu(b),u=Vy(o,u,m,h);break e}else for(o=u.stateNode.containerInfo,o.nodeType===9?o=o.body:o=o.nodeName==="HTML"?o.ownerDocument.body:o,tr=Us(o.firstChild),ci=u,In=!0,ou=null,Os=!0,h=Zg(u,null,m,h),u.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(B(),m===b){u=Go(o,u,h);break e}Yr(o,u,m,h)}u=u.child}return u;case 26:return _m(o,u),o===null?(h=Ub(u.type,null,u.pendingProps,null))?u.memoizedState=h:In||(h=u.type,o=u.pendingProps,m=Sf(He.current).createElement(h),m[Ot]=u,m[ht]=o,ji(m,h,o),ln(m),u.stateNode=m):u.memoizedState=Ub(u.type,o.memoizedProps,u.pendingProps,o.memoizedState),null;case 27:return vr(u),o===null&&In&&(m=u.stateNode=Db(u.type,u.pendingProps,He.current),ci=u,Os=!0,b=tr,Bt(u.type)?(d_=b,tr=Us(m.firstChild)):tr=b),Yr(o,u,u.pendingProps.children,h),_m(o,u),o===null&&(u.flags|=4194304),u.child;case 5:return o===null&&In&&((b=m=tr)&&(m=$2(m,u.type,u.pendingProps,Os),m!==null?(u.stateNode=m,ci=u,tr=Us(m.firstChild),Os=!1,b=!0):b=!1),b||lu(u)),vr(u),b=u.type,N=u.pendingProps,x=o!==null?o.memoizedProps:null,m=N.children,Su(b,N)?m=null:x!==null&&Su(b,x)&&(u.flags|=32),u.memoizedState!==null&&(b=im(o,u,O2,null,null,h),Wd._currentValue=b),_m(o,u),Yr(o,u,m,h),u.child;case 6:return o===null&&In&&((o=h=tr)&&(h=nr(h,u.pendingProps,Os),h!==null?(u.stateNode=h,ci=u,tr=null,o=!0):o=!1),o||lu(u)),null;case 13:return Qi(o,u,h);case 4:return At(u,u.stateNode.containerInfo),m=u.pendingProps,o===null?u.child=hu(u,null,m,h):Yr(o,u,m,h),u.child;case 11:return Ut(o,u,u.type,u.pendingProps,h);case 7:return Yr(o,u,u.pendingProps,h),u.child;case 8:return Yr(o,u,u.pendingProps.children,h),u.child;case 12:return Yr(o,u,u.pendingProps.children,h),u.child;case 10:return m=u.pendingProps,du(u,u.type,m.value),Yr(o,u,m.children,h),u.child;case 9:return b=u.type._context,m=u.pendingProps.children,lc(u),b=Li(b),m=m(b),u.flags|=1,Yr(o,u,m,h),u.child;case 14:return tf(o,u,u.type,u.pendingProps,h);case 15:return gm(o,u,u.type,u.pendingProps,h);case 19:return kd(o,u,h);case 31:return D2(o,u,h);case 22:return _u(o,u,h,u.pendingProps);case 24:return lc(u),m=Li(di),o===null?(b=$g(),b===null&&(b=br,N=Zs(),b.pooledCache=N,N.refCount++,N!==null&&(b.pooledCacheLanes|=h),b=N),u.memoizedState={parent:m,cache:b},Fo(u),du(u,di,b)):((o.lanes&h)!==0&&(Zp(o,u),Ed(u,null,null,h),dc()),b=o.memoizedState,N=u.memoizedState,b.parent!==m?(b={parent:m,cache:m},u.memoizedState=b,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=b),du(u,di,m)):(m=N.cache,du(u,di,m),m!==b.cache&&Yg(u,[di],h,!0))),Yr(o,u,u.pendingProps.children,h),u.child;case 29:throw u.pendingProps}throw Error(r(156,u.tag))}function Al(o){o.flags|=4}function Mv(o,u,h,m,b){if((u=(o.mode&32)!==0)&&(u=!1),u){if(o.flags|=16777216,(b&335544128)===b)if(o.stateNode.complete)o.flags|=8192;else if(vf())o.flags|=8192;else throw Lo=$p,Qp}else o.flags&=-16777217}function Ov(o,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!Gb(u))if(vf())o.flags|=8192;else throw Lo=$p,Qp}function of(o,u){u!==null&&(o.flags|=4),o.flags&16384&&(u=o.tag!==22?Gn():536870912,o.lanes|=u,Pd|=u)}function lf(o,u){if(!In)switch(o.tailMode){case"hidden":u=o.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?o.tail=null:h.sibling=null;break;case"collapsed":h=o.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?u||o.tail===null?o.tail=null:o.tail.sibling=null:m.sibling=null}}function yr(o){var u=o.alternate!==null&&o.alternate.child===o.child,h=0,m=0;if(u)for(var b=o.child;b!==null;)h|=b.lanes|b.childLanes,m|=b.subtreeFlags&65011712,m|=b.flags&65011712,b.return=o,b=b.sibling;else for(b=o.child;b!==null;)h|=b.lanes|b.childLanes,m|=b.subtreeFlags,m|=b.flags,b.return=o,b=b.sibling;return o.subtreeFlags|=m,o.childLanes=h,u}function qy(o,u,h){var m=u.pendingProps;switch(sc(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yr(u),null;case 1:return yr(u),null;case 3:return h=u.stateNode,m=null,o!==null&&(m=o.memoizedState.cache),u.memoizedState.cache!==m&&(u.flags|=2048),wl(di),bt(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(o===null||o.child===null)&&(oc(u)?Al(u):o===null||o.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,uu())),yr(u),null;case 26:var b=u.type,N=u.memoizedState;return o===null?(Al(u),N!==null?(yr(u),Ov(u,N)):(yr(u),Mv(u,b,null,m,h))):N?N!==o.memoizedState?(Al(u),yr(u),Ov(u,N)):(yr(u),u.flags&=-16777217):(o=o.memoizedProps,o!==m&&Al(u),yr(u),Mv(u,b,o,m,h)),null;case 27:if(wn(u),h=He.current,b=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==m&&Al(u);else{if(!m){if(u.stateNode===null)throw Error(r(166));return yr(u),null}o=We.current,oc(u)?Ph(u):(o=Db(b,m,h),u.stateNode=o,Al(u))}return yr(u),null;case 5:if(wn(u),b=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==m&&Al(u);else{if(!m){if(u.stateNode===null)throw Error(r(166));return yr(u),null}if(N=We.current,oc(u))Ph(u);else{var x=Sf(He.current);switch(N){case 1:N=x.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:N=x.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":N=x.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":N=x.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":N=x.createElement("div"),N.innerHTML="<script><\/script>",N=N.removeChild(N.firstChild);break;case"select":N=typeof m.is=="string"?x.createElement("select",{is:m.is}):x.createElement("select"),m.multiple?N.multiple=!0:m.size&&(N.size=m.size);break;default:N=typeof m.is=="string"?x.createElement(b,{is:m.is}):x.createElement(b)}}N[Ot]=u,N[ht]=m;e:for(x=u.child;x!==null;){if(x.tag===5||x.tag===6)N.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===u)break e;for(;x.sibling===null;){if(x.return===null||x.return===u)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}u.stateNode=N;e:switch(ji(N,b,m),b){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}m&&Al(u)}}return yr(u),Mv(u,u.type,o===null?null:o.memoizedProps,u.pendingProps,h),null;case 6:if(o&&u.stateNode!=null)o.memoizedProps!==m&&Al(u);else{if(typeof m!="string"&&u.stateNode===null)throw Error(r(166));if(o=He.current,oc(u)){if(o=u.stateNode,h=u.memoizedProps,m=null,b=ci,b!==null)switch(b.tag){case 27:case 5:m=b.memoizedProps}o[Ot]=u,o=!!(o.nodeValue===h||m!==null&&m.suppressHydrationWarning===!0||Sb(o.nodeValue,h)),o||lu(u,!0)}else o=Sf(o).createTextNode(m),o[Ot]=u,u.stateNode=o}return yr(u),null;case 31:if(h=u.memoizedState,o===null||o.memoizedState!==null){if(m=oc(u),h!==null){if(o===null){if(!m)throw Error(r(318));if(o=u.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(557));o[Ot]=u}else B(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;yr(u),o=!1}else h=uu(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=h),o=!0;if(!o)return u.flags&256?(ka(u),u):(ka(u),null);if((u.flags&128)!==0)throw Error(r(558))}return yr(u),null;case 13:if(m=u.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(b=oc(u),m!==null&&m.dehydrated!==null){if(o===null){if(!b)throw Error(r(318));if(b=u.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(r(317));b[Ot]=u}else B(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;yr(u),b=!1}else b=uu(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=b),b=!0;if(!b)return u.flags&256?(ka(u),u):(ka(u),null)}return ka(u),(u.flags&128)!==0?(u.lanes=h,u):(h=m!==null,o=o!==null&&o.memoizedState!==null,h&&(m=u.child,b=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(b=m.alternate.memoizedState.cachePool.pool),N=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(N=m.memoizedState.cachePool.pool),N!==b&&(m.flags|=2048)),h!==o&&h&&(u.child.flags|=8192),of(u,u.updateQueue),yr(u),null);case 4:return bt(),o===null&&i_(u.stateNode.containerInfo),yr(u),null;case 10:return wl(u.type),yr(u),null;case 19:if(fe(ri),m=u.memoizedState,m===null)return yr(u),null;if(b=(u.flags&128)!==0,N=m.rendering,N===null)if(b)lf(m,!1);else{if(Vr!==0||o!==null&&(o.flags&128)!==0)for(o=u.child;o!==null;){if(N=tm(o),N!==null){for(u.flags|=128,lf(m,!1),o=N.updateQueue,u.updateQueue=o,of(u,o),u.subtreeFlags=0,o=h,h=u.child;h!==null;)_y(h,o),h=h.sibling;return Ie(ri,ri.current&1|2),In&&Za(u,m.treeForkCount),u.child}o=o.sibling}m.tail!==null&&gn()>gc&&(u.flags|=128,b=!0,lf(m,!1),u.lanes=4194304)}else{if(!b)if(o=tm(N),o!==null){if(u.flags|=128,b=!0,o=o.updateQueue,u.updateQueue=o,of(u,o),lf(m,!0),m.tail===null&&m.tailMode==="hidden"&&!N.alternate&&!In)return yr(u),null}else 2*gn()-m.renderingStartTime>gc&&h!==536870912&&(u.flags|=128,b=!0,lf(m,!1),u.lanes=4194304);m.isBackwards?(N.sibling=u.child,u.child=N):(o=m.last,o!==null?o.sibling=N:u.child=N,m.last=N)}return m.tail!==null?(o=m.tail,m.rendering=o,m.tail=o.sibling,m.renderingStartTime=gn(),o.sibling=null,h=ri.current,Ie(ri,b?h&1|2:h&1),In&&Za(u,m.treeForkCount),o):(yr(u),null);case 22:case 23:return ka(u),jh(),m=u.memoizedState!==null,o!==null?o.memoizedState!==null!==m&&(u.flags|=8192):m&&(u.flags|=8192),m?(h&536870912)!==0&&(u.flags&128)===0&&(yr(u),u.subtreeFlags&6&&(u.flags|=8192)):yr(u),h=u.updateQueue,h!==null&&of(u,h.retryQueue),h=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==h&&(u.flags|=2048),o!==null&&fe(cc),null;case 24:return h=null,o!==null&&(h=o.memoizedState.cache),u.memoizedState.cache!==h&&(u.flags|=2048),wl(di),yr(u),null;case 25:return null;case 30:return null}throw Error(r(156,u.tag))}function uf(o,u){switch(sc(u),u.tag){case 1:return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 3:return wl(di),bt(),o=u.flags,(o&65536)!==0&&(o&128)===0?(u.flags=o&-65537|128,u):null;case 26:case 27:case 5:return wn(u),null;case 31:if(u.memoizedState!==null){if(ka(u),u.alternate===null)throw Error(r(340));B()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 13:if(ka(u),o=u.memoizedState,o!==null&&o.dehydrated!==null){if(u.alternate===null)throw Error(r(340));B()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 19:return fe(ri),null;case 4:return bt(),null;case 10:return wl(u.type),null;case 22:case 23:return ka(u),jh(),o!==null&&fe(cc),o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 24:return wl(di),null;case 25:return null;default:return null}}function Cm(o,u){switch(sc(u),u.tag){case 3:wl(di),bt();break;case 26:case 27:case 5:wn(u);break;case 4:bt();break;case 31:u.memoizedState!==null&&ka(u);break;case 13:ka(u);break;case 19:fe(ri);break;case 10:wl(u.type);break;case 22:case 23:ka(u),jh(),o!==null&&fe(cc);break;case 24:wl(di)}}function Rd(o,u){try{var h=u.updateQueue,m=h!==null?h.lastEffect:null;if(m!==null){var b=m.next;h=b;do{if((h.tag&o)===o){m=void 0;var N=h.create,x=h.inst;m=N(),x.destroy=m}h=h.next}while(h!==b)}}catch(V){sr(u,u.return,V)}}function Il(o,u,h){try{var m=u.updateQueue,b=m!==null?m.lastEffect:null;if(b!==null){var N=b.next;m=N;do{if((m.tag&o)===o){var x=m.inst,V=x.destroy;if(V!==void 0){x.destroy=void 0,b=u;var ie=h,_e=V;try{_e()}catch(De){sr(b,ie,De)}}}m=m.next}while(m!==N)}}catch(De){sr(u,u.return,De)}}function cf(o){var u=o.updateQueue;if(u!==null){var h=o.stateNode;try{em(u,h)}catch(m){sr(o,o.return,m)}}}function kv(o,u,h){h.props=fa(o.type,o.memoizedProps),h.state=o.memoizedState;try{h.componentWillUnmount()}catch(m){sr(o,u,m)}}function Da(o,u){try{var h=o.ref;if(h!==null){switch(o.tag){case 26:case 27:case 5:var m=o.stateNode;break;case 30:m=o.stateNode;break;default:m=o.stateNode}typeof h=="function"?o.refCleanup=h(m):h.current=m}}catch(b){sr(o,u,b)}}function $i(o,u){var h=o.ref,m=o.refCleanup;if(h!==null)if(typeof m=="function")try{m()}catch(b){sr(o,u,b)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(b){sr(o,u,b)}else h.current=null}function Wy(o){var u=o.type,h=o.memoizedProps,m=o.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":h.autoFocus&&m.focus();break e;case"img":h.src?m.src=h.src:h.srcSet&&(m.srcset=h.srcSet)}}catch(b){sr(o,o.return,b)}}function wm(o,u,h){try{var m=o.stateNode;K2(m,o.type,h,u),m[ht]=u}catch(b){sr(o,o.return,b)}}function Ky(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Bt(o.type)||o.tag===4}function Rv(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Ky(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Bt(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Dv(o,u,h){var m=o.tag;if(m===5||m===6)o=o.stateNode,u?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(o,u):(u=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,u.appendChild(o),h=h._reactRootContainer,h!=null||u.onclick!==null||(u.onclick=ca));else if(m!==4&&(m===27&&Bt(o.type)&&(h=o.stateNode,u=null),o=o.child,o!==null))for(Dv(o,u,h),o=o.sibling;o!==null;)Dv(o,u,h),o=o.sibling}function Nm(o,u,h){var m=o.tag;if(m===5||m===6)o=o.stateNode,u?h.insertBefore(o,u):h.appendChild(o);else if(m!==4&&(m===27&&Bt(o.type)&&(h=o.stateNode),o=o.child,o!==null))for(Nm(o,u,h),o=o.sibling;o!==null;)Nm(o,u,h),o=o.sibling}function Yy(o){var u=o.stateNode,h=o.memoizedProps;try{for(var m=o.type,b=u.attributes;b.length;)u.removeAttributeNode(b[0]);ji(u,m,h),u[Ot]=o,u[ht]=h}catch(N){sr(o,o.return,N)}}var Ml=!1,hi=!1,xv=!1,Qy=typeof WeakSet=="function"?WeakSet:Set,Oi=null;function P2(o,u){if(o=o.containerInfo,Tf=qm,o=py(o),qg(o)){if("selectionStart"in o)var h={start:o.selectionStart,end:o.selectionEnd};else e:{h=(h=o.ownerDocument)&&h.defaultView||window;var m=h.getSelection&&h.getSelection();if(m&&m.rangeCount!==0){h=m.anchorNode;var b=m.anchorOffset,N=m.focusNode;m=m.focusOffset;try{h.nodeType,N.nodeType}catch{h=null;break e}var x=0,V=-1,ie=-1,_e=0,De=0,je=o,be=null;t:for(;;){for(var Me;je!==h||b!==0&&je.nodeType!==3||(V=x+b),je!==N||m!==0&&je.nodeType!==3||(ie=x+m),je.nodeType===3&&(x+=je.nodeValue.length),(Me=je.firstChild)!==null;)be=je,je=Me;for(;;){if(je===o)break t;if(be===h&&++_e===b&&(V=x),be===N&&++De===m&&(ie=x),(Me=je.nextSibling)!==null)break;je=be,be=je.parentNode}je=Me}h=V===-1||ie===-1?null:{start:V,end:ie}}else h=null}h=h||{start:0,end:0}}else h=null;for(l_={focusedElem:o,selectionRange:h},qm=!1,Oi=u;Oi!==null;)if(u=Oi,o=u.child,(u.subtreeFlags&1028)!==0&&o!==null)o.return=u,Oi=o;else for(;Oi!==null;){switch(u=Oi,N=u.alternate,o=u.flags,u.tag){case 0:if((o&4)!==0&&(o=u.updateQueue,o=o!==null?o.events:null,o!==null))for(h=0;h<o.length;h++)b=o[h],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&N!==null){o=void 0,h=u,b=N.memoizedProps,N=N.memoizedState,m=h.stateNode;try{var ut=fa(h.type,b);o=m.getSnapshotBeforeUpdate(ut,N),m.__reactInternalSnapshotBeforeUpdate=o}catch(Ht){sr(h,h.return,Ht)}}break;case 3:if((o&1024)!==0){if(o=u.stateNode.containerInfo,h=o.nodeType,h===9)Lm(o);else if(h===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":Lm(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(r(163))}if(o=u.sibling,o!==null){o.return=u.return,Oi=o;break}Oi=u.return}}function Pv(o,u,h){var m=h.flags;switch(h.tag){case 0:case 11:case 15:kl(o,h),m&4&&Rd(5,h);break;case 1:if(kl(o,h),m&4)if(o=h.stateNode,u===null)try{o.componentDidMount()}catch(x){sr(h,h.return,x)}else{var b=fa(h.type,u.memoizedProps);u=u.memoizedState;try{o.componentDidUpdate(b,u,o.__reactInternalSnapshotBeforeUpdate)}catch(x){sr(h,h.return,x)}}m&64&&cf(h),m&512&&Da(h,h.return);break;case 3:if(kl(o,h),m&64&&(o=h.updateQueue,o!==null)){if(u=null,h.child!==null)switch(h.child.tag){case 27:case 5:u=h.child.stateNode;break;case 1:u=h.child.stateNode}try{em(o,u)}catch(x){sr(h,h.return,x)}}break;case 27:u===null&&m&4&&Yy(h);case 26:case 5:kl(o,h),u===null&&m&4&&Wy(h),m&512&&Da(h,h.return);break;case 12:kl(o,h);break;case 31:kl(o,h),m&4&&Lv(o,h);break;case 13:kl(o,h),m&4&&Xy(o,h),m&64&&(o=h.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(h=Rm.bind(null,h),X2(o,h))));break;case 22:if(m=h.memoizedState!==null||Ml,!m){u=u!==null&&u.memoizedState!==null||hi,b=Ml;var N=hi;Ml=m,(hi=u)&&!N?Vo(o,h,(h.subtreeFlags&8772)!==0):kl(o,h),Ml=b,hi=N}break;case 30:break;default:kl(o,h)}}function Uv(o){var u=o.alternate;u!==null&&(o.alternate=null,Uv(u)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(u=o.stateNode,u!==null&&Xe(u)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Mr=null,xa=!1;function Ol(o,u,h){for(h=h.child;h!==null;)$y(o,u,h),h=h.sibling}function $y(o,u,h){if(Kn&&typeof Kn.onCommitFiberUnmount=="function")try{Kn.onCommitFiberUnmount(Dr,h)}catch{}switch(h.tag){case 26:hi||$i(h,u),Ol(o,u,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:hi||$i(h,u);var m=Mr,b=xa;Bt(h.type)&&(Mr=h.stateNode,xa=!1),Ol(o,u,h),If(h.stateNode),Mr=m,xa=b;break;case 5:hi||$i(h,u);case 6:if(m=Mr,b=xa,Mr=null,Ol(o,u,h),Mr=m,xa=b,Mr!==null)if(xa)try{(Mr.nodeType===9?Mr.body:Mr.nodeName==="HTML"?Mr.ownerDocument.body:Mr).removeChild(h.stateNode)}catch(N){sr(h,u,N)}else try{Mr.removeChild(h.stateNode)}catch(N){sr(h,u,N)}break;case 18:Mr!==null&&(xa?(o=Mr,c_(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,h.stateNode),Yd(o)):c_(Mr,h.stateNode));break;case 4:m=Mr,b=xa,Mr=h.stateNode.containerInfo,xa=!0,Ol(o,u,h),Mr=m,xa=b;break;case 0:case 11:case 14:case 15:Il(2,h,u),hi||Il(4,h,u),Ol(o,u,h);break;case 1:hi||($i(h,u),m=h.stateNode,typeof m.componentWillUnmount=="function"&&kv(h,u,m)),Ol(o,u,h);break;case 21:Ol(o,u,h);break;case 22:hi=(m=hi)||h.memoizedState!==null,Ol(o,u,h),hi=m;break;default:Ol(o,u,h)}}function Lv(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{Yd(o)}catch(h){sr(u,u.return,h)}}}function Xy(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Yd(o)}catch(h){sr(u,u.return,h)}}function U2(o){switch(o.tag){case 31:case 13:case 19:var u=o.stateNode;return u===null&&(u=o.stateNode=new Qy),u;case 22:return o=o.stateNode,u=o._retryCache,u===null&&(u=o._retryCache=new Qy),u;default:throw Error(r(435,o.tag))}}function Tm(o,u){var h=U2(o);u.forEach(function(m){if(!h.has(m)){h.add(m);var b=B2.bind(null,o,m);m.then(b,b)}})}function Pa(o,u){var h=u.deletions;if(h!==null)for(var m=0;m<h.length;m++){var b=h[m],N=o,x=u,V=x;e:for(;V!==null;){switch(V.tag){case 27:if(Bt(V.type)){Mr=V.stateNode,xa=!1;break e}break;case 5:Mr=V.stateNode,xa=!1;break e;case 3:case 4:Mr=V.stateNode.containerInfo,xa=!0;break e}V=V.return}if(Mr===null)throw Error(r(160));$y(N,x,b),Mr=null,xa=!1,N=b.alternate,N!==null&&(N.return=null),b.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)Zy(u,o),u=u.sibling}var oo=null;function Zy(o,u){var h=o.alternate,m=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Pa(u,o),Or(o),m&4&&(Il(3,o,o.return),Rd(3,o),Il(5,o,o.return));break;case 1:Pa(u,o),Or(o),m&512&&(hi||h===null||$i(h,h.return)),m&64&&Ml&&(o=o.updateQueue,o!==null&&(m=o.callbacks,m!==null&&(h=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=h===null?m:h.concat(m))));break;case 26:var b=oo;if(Pa(u,o),Or(o),m&512&&(hi||h===null||$i(h,h.return)),m&4){var N=h!==null?h.memoizedState:null;if(m=o.memoizedState,h===null)if(m===null)if(o.stateNode===null){e:{m=o.type,h=o.memoizedProps,b=b.ownerDocument||b;t:switch(m){case"title":N=b.getElementsByTagName("title")[0],(!N||N[ee]||N[Ot]||N.namespaceURI==="http://www.w3.org/2000/svg"||N.hasAttribute("itemprop"))&&(N=b.createElement(m),b.head.insertBefore(N,b.querySelector("head > title"))),ji(N,m,h),N[Ot]=o,ln(N),m=N;break e;case"link":var x=Hb("link","href",b).get(m+(h.href||""));if(x){for(var V=0;V<x.length;V++)if(N=x[V],N.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&N.getAttribute("rel")===(h.rel==null?null:h.rel)&&N.getAttribute("title")===(h.title==null?null:h.title)&&N.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){x.splice(V,1);break t}}N=b.createElement(m),ji(N,m,h),b.head.appendChild(N);break;case"meta":if(x=Hb("meta","content",b).get(m+(h.content||""))){for(V=0;V<x.length;V++)if(N=x[V],N.getAttribute("content")===(h.content==null?null:""+h.content)&&N.getAttribute("name")===(h.name==null?null:h.name)&&N.getAttribute("property")===(h.property==null?null:h.property)&&N.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&N.getAttribute("charset")===(h.charSet==null?null:h.charSet)){x.splice(V,1);break t}}N=b.createElement(m),ji(N,m,h),b.head.appendChild(N);break;default:throw Error(r(468,m))}N[Ot]=o,ln(N),m=N}o.stateNode=m}else jb(b,o.type,o.stateNode);else o.stateNode=Fb(b,m,o.memoizedProps);else N!==m?(N===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):N.count--,m===null?jb(b,o.type,o.stateNode):Fb(b,m,o.memoizedProps)):m===null&&o.stateNode!==null&&wm(o,o.memoizedProps,h.memoizedProps)}break;case 27:Pa(u,o),Or(o),m&512&&(hi||h===null||$i(h,h.return)),h!==null&&m&4&&wm(o,o.memoizedProps,h.memoizedProps);break;case 5:if(Pa(u,o),Or(o),m&512&&(hi||h===null||$i(h,h.return)),o.flags&32){b=o.stateNode;try{ua(b,"")}catch(ut){sr(o,o.return,ut)}}m&4&&o.stateNode!=null&&(b=o.memoizedProps,wm(o,b,h!==null?h.memoizedProps:b)),m&1024&&(xv=!0);break;case 6:if(Pa(u,o),Or(o),m&4){if(o.stateNode===null)throw Error(r(162));m=o.memoizedProps,h=o.stateNode;try{h.nodeValue=m}catch(ut){sr(o,o.return,ut)}}break;case 3:if(Mf=null,b=oo,oo=Hm(u.containerInfo),Pa(u,o),oo=b,Or(o),m&4&&h!==null&&h.memoizedState.isDehydrated)try{Yd(u.containerInfo)}catch(ut){sr(o,o.return,ut)}xv&&(xv=!1,Jy(o));break;case 4:m=oo,oo=Hm(o.stateNode.containerInfo),Pa(u,o),Or(o),oo=m;break;case 12:Pa(u,o),Or(o);break;case 31:Pa(u,o),Or(o),m&4&&(m=o.updateQueue,m!==null&&(o.updateQueue=null,Tm(o,m)));break;case 13:Pa(u,o),Or(o),o.child.flags&8192&&o.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(mf=gn()),m&4&&(m=o.updateQueue,m!==null&&(o.updateQueue=null,Tm(o,m)));break;case 22:b=o.memoizedState!==null;var ie=h!==null&&h.memoizedState!==null,_e=Ml,De=hi;if(Ml=_e||b,hi=De||ie,Pa(u,o),hi=De,Ml=_e,Or(o),m&8192)e:for(u=o.stateNode,u._visibility=b?u._visibility&-2:u._visibility|1,b&&(h===null||ie||Ml||hi||pc(o)),h=null,u=o;;){if(u.tag===5||u.tag===26){if(h===null){ie=h=u;try{if(N=ie.stateNode,b)x=N.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{V=ie.stateNode;var je=ie.memoizedProps.style,be=je!=null&&je.hasOwnProperty("display")?je.display:null;V.style.display=be==null||typeof be=="boolean"?"":(""+be).trim()}}catch(ut){sr(ie,ie.return,ut)}}}else if(u.tag===6){if(h===null){ie=u;try{ie.stateNode.nodeValue=b?"":ie.memoizedProps}catch(ut){sr(ie,ie.return,ut)}}}else if(u.tag===18){if(h===null){ie=u;try{var Me=ie.stateNode;b?us(Me,!0):us(ie.stateNode,!1)}catch(ut){sr(ie,ie.return,ut)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===o)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break e;for(;u.sibling===null;){if(u.return===null||u.return===o)break e;h===u&&(h=null),u=u.return}h===u&&(h=null),u.sibling.return=u.return,u=u.sibling}m&4&&(m=o.updateQueue,m!==null&&(h=m.retryQueue,h!==null&&(m.retryQueue=null,Tm(o,h))));break;case 19:Pa(u,o),Or(o),m&4&&(m=o.updateQueue,m!==null&&(o.updateQueue=null,Tm(o,m)));break;case 30:break;case 21:break;default:Pa(u,o),Or(o)}}function Or(o){var u=o.flags;if(u&2){try{for(var h,m=o.return;m!==null;){if(Ky(m)){h=m;break}m=m.return}if(h==null)throw Error(r(160));switch(h.tag){case 27:var b=h.stateNode,N=Rv(o);Nm(o,N,b);break;case 5:var x=h.stateNode;h.flags&32&&(ua(x,""),h.flags&=-33);var V=Rv(o);Nm(o,V,x);break;case 3:case 4:var ie=h.stateNode.containerInfo,_e=Rv(o);Dv(o,_e,ie);break;default:throw Error(r(161))}}catch(De){sr(o,o.return,De)}o.flags&=-3}u&4096&&(o.flags&=-4097)}function Jy(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var u=o;Jy(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),o=o.sibling}}function kl(o,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)Pv(o,u.alternate,u),u=u.sibling}function pc(o){for(o=o.child;o!==null;){var u=o;switch(u.tag){case 0:case 11:case 14:case 15:Il(4,u,u.return),pc(u);break;case 1:$i(u,u.return);var h=u.stateNode;typeof h.componentWillUnmount=="function"&&kv(u,u.return,h),pc(u);break;case 27:If(u.stateNode);case 26:case 5:$i(u,u.return),pc(u);break;case 22:u.memoizedState===null&&pc(u);break;case 30:pc(u);break;default:pc(u)}o=o.sibling}}function Vo(o,u,h){for(h=h&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var m=u.alternate,b=o,N=u,x=N.flags;switch(N.tag){case 0:case 11:case 15:Vo(b,N,h),Rd(4,N);break;case 1:if(Vo(b,N,h),m=N,b=m.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(_e){sr(m,m.return,_e)}if(m=N,b=m.updateQueue,b!==null){var V=m.stateNode;try{var ie=b.shared.hiddenCallbacks;if(ie!==null)for(b.shared.hiddenCallbacks=null,b=0;b<ie.length;b++)no(ie[b],V)}catch(_e){sr(m,m.return,_e)}}h&&x&64&&cf(N),Da(N,N.return);break;case 27:Yy(N);case 26:case 5:Vo(b,N,h),h&&m===null&&x&4&&Wy(N),Da(N,N.return);break;case 12:Vo(b,N,h);break;case 31:Vo(b,N,h),h&&x&4&&Lv(b,N);break;case 13:Vo(b,N,h),h&&x&4&&Xy(b,N);break;case 22:N.memoizedState===null&&Vo(b,N,h),Da(N,N.return);break;case 30:break;default:Vo(b,N,h)}u=u.sibling}}function Fv(o,u){var h=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),o=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(o=u.memoizedState.cachePool.pool),o!==h&&(o!=null&&o.refCount++,h!=null&&Uh(h))}function Hv(o,u){o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&Uh(o))}function lo(o,u,h,m){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)eb(o,u,h,m),u=u.sibling}function eb(o,u,h,m){var b=u.flags;switch(u.tag){case 0:case 11:case 15:lo(o,u,h,m),b&2048&&Rd(9,u);break;case 1:lo(o,u,h,m);break;case 3:lo(o,u,h,m),b&2048&&(o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&Uh(o)));break;case 12:if(b&2048){lo(o,u,h,m),o=u.stateNode;try{var N=u.memoizedProps,x=N.id,V=N.onPostCommit;typeof V=="function"&&V(x,u.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(ie){sr(u,u.return,ie)}}else lo(o,u,h,m);break;case 31:lo(o,u,h,m);break;case 13:lo(o,u,h,m);break;case 23:break;case 22:N=u.stateNode,x=u.alternate,u.memoizedState!==null?N._visibility&2?lo(o,u,h,m):df(o,u):N._visibility&2?lo(o,u,h,m):(N._visibility|=2,yu(o,u,h,m,(u.subtreeFlags&10256)!==0||!1)),b&2048&&Fv(x,u);break;case 24:lo(o,u,h,m),b&2048&&Hv(u.alternate,u);break;default:lo(o,u,h,m)}}function yu(o,u,h,m,b){for(b=b&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var N=o,x=u,V=h,ie=m,_e=x.flags;switch(x.tag){case 0:case 11:case 15:yu(N,x,V,ie,b),Rd(8,x);break;case 23:break;case 22:var De=x.stateNode;x.memoizedState!==null?De._visibility&2?yu(N,x,V,ie,b):df(N,x):(De._visibility|=2,yu(N,x,V,ie,b)),b&&_e&2048&&Fv(x.alternate,x);break;case 24:yu(N,x,V,ie,b),b&&_e&2048&&Hv(x.alternate,x);break;default:yu(N,x,V,ie,b)}u=u.sibling}}function df(o,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var h=o,m=u,b=m.flags;switch(m.tag){case 22:df(h,m),b&2048&&Fv(m.alternate,m);break;case 24:df(h,m),b&2048&&Hv(m.alternate,m);break;default:df(h,m)}u=u.sibling}}var hf=8192;function Dd(o,u,h){if(o.subtreeFlags&hf)for(o=o.child;o!==null;)tb(o,u,h),o=o.sibling}function tb(o,u,h){switch(o.tag){case 26:Dd(o,u,h),o.flags&hf&&o.memoizedState!==null&&qd(h,oo,o.memoizedState,o.memoizedProps);break;case 5:Dd(o,u,h);break;case 3:case 4:var m=oo;oo=Hm(o.stateNode.containerInfo),Dd(o,u,h),oo=m;break;case 22:o.memoizedState===null&&(m=o.alternate,m!==null&&m.memoizedState!==null?(m=hf,hf=16777216,Dd(o,u,h),hf=m):Dd(o,u,h));break;default:Dd(o,u,h)}}function nb(o){var u=o.alternate;if(u!==null&&(o=u.child,o!==null)){u.child=null;do u=o.sibling,o.sibling=null,o=u;while(o!==null)}}function ff(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var h=0;h<u.length;h++){var m=u[h];Oi=m,ib(m,o)}nb(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)rb(o),o=o.sibling}function rb(o){switch(o.tag){case 0:case 11:case 15:ff(o),o.flags&2048&&Il(9,o,o.return);break;case 3:ff(o);break;case 12:ff(o);break;case 22:var u=o.stateNode;o.memoizedState!==null&&u._visibility&2&&(o.return===null||o.return.tag!==13)?(u._visibility&=-3,Sm(o)):ff(o);break;default:ff(o)}}function Sm(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var h=0;h<u.length;h++){var m=u[h];Oi=m,ib(m,o)}nb(o)}for(o=o.child;o!==null;){switch(u=o,u.tag){case 0:case 11:case 15:Il(8,u,u.return),Sm(u);break;case 22:h=u.stateNode,h._visibility&2&&(h._visibility&=-3,Sm(u));break;default:Sm(u)}o=o.sibling}}function ib(o,u){for(;Oi!==null;){var h=Oi;switch(h.tag){case 0:case 11:case 15:Il(8,h,u);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var m=h.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:Uh(h.memoizedState.cache)}if(m=h.child,m!==null)m.return=h,Oi=m;else e:for(h=o;Oi!==null;){m=Oi;var b=m.sibling,N=m.return;if(Uv(m),m===h){Oi=null;break e}if(b!==null){b.return=N,Oi=b;break e}Oi=N}}}var L2={getCacheForType:function(o){var u=Li(di),h=u.data.get(o);return h===void 0&&(h=o(),u.data.set(o,h)),h},cacheSignal:function(){return Li(di).controller.signal}},F2=typeof WeakMap=="function"?WeakMap:Map,$n=0,br=null,En=null,Tn=0,ar=0,is=null,bu=!1,xd=!1,jv=!1,uo=0,Vr=0,Eu=0,mc=0,Gv=0,as=0,Pd=0,pf=null,Ua=null,Vv=!1,mf=0,ab=0,gc=1/0,Am=null,Cu=null,Ci=0,wu=null,Ud=null,Rl=0,Bv=0,zv=null,sb=null,gf=0,qv=null;function ss(){return($n&2)!==0&&Tn!==0?Tn&-Tn:q.T!==null?os():rt()}function ob(){if(as===0)if((Tn&536870912)===0||In){var o=vt;vt<<=1,(vt&3932160)===0&&(vt=262144),as=o}else as=536870912;return o=es.current,o!==null&&(o.flags|=32),as}function La(o,u,h){(o===br&&(ar===2||ar===9)||o.cancelPendingCommit!==null)&&(Ld(o,0),Dl(o,Tn,as,!1)),zi(o,h),(($n&2)===0||o!==br)&&(o===br&&(($n&2)===0&&(mc|=h),Vr===4&&Dl(o,Tn,as,!1)),Bo(o))}function lb(o,u,h){if(($n&6)!==0)throw Error(r(327));var m=!h&&(u&127)===0&&(u&o.expiredLanes)===0||_t(o,u),b=m?j2(o,u):Kv(o,u,!0),N=m;do{if(b===0){xd&&!m&&Dl(o,u,0,!1);break}else{if(h=o.current.alternate,N&&!cb(h)){b=Kv(o,u,!1),N=!1;continue}if(b===2){if(N=u,o.errorRecoveryDisabledLanes&N)var x=0;else x=o.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){u=x;e:{var V=o;b=pf;var ie=V.current.memoizedState.isDehydrated;if(ie&&(Ld(V,x).flags|=256),x=Kv(V,x,!1),x!==2){if(jv&&!ie){V.errorRecoveryDisabledLanes|=N,mc|=N,b=4;break e}N=Ua,Ua=b,N!==null&&(Ua===null?Ua=N:Ua.push.apply(Ua,N))}b=x}if(N=!1,b!==2)continue}}if(b===1){Ld(o,0),Dl(o,u,0,!0);break}e:{switch(m=o,N=b,N){case 0:case 1:throw Error(r(345));case 4:if((u&4194048)!==u)break;case 6:Dl(m,u,as,!bu);break e;case 2:Ua=null;break;case 3:case 5:break;default:throw Error(r(329))}if((u&62914560)===u&&(b=mf+300-gn(),10<b)){if(Dl(m,u,as,!bu),Et(m,0,!0)!==0)break e;Rl=u,m.timeoutHandle=Ab(ub.bind(null,m,h,Ua,Am,Vv,u,as,mc,Pd,bu,N,"Throttled",-0,0),b);break e}ub(m,h,Ua,Am,Vv,u,as,mc,Pd,bu,N,null,-0,0)}}break}while(!0);Bo(o)}function ub(o,u,h,m,b,N,x,V,ie,_e,De,je,be,Me){if(o.timeoutHandle=-1,je=u.subtreeFlags,je&8192||(je&16785408)===16785408){je={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ca},tb(u,N,je);var ut=(N&62914560)===N?mf-gn():(N&4194048)===N?ab-gn():0;if(ut=sC(je,ut),ut!==null){Rl=N,o.cancelPendingCommit=ut(gb.bind(null,o,u,N,h,m,b,x,V,ie,De,je,null,be,Me)),Dl(o,N,x,!_e);return}}gb(o,u,N,h,m,b,x,V,ie)}function cb(o){for(var u=o;;){var h=u.tag;if((h===0||h===11||h===15)&&u.flags&16384&&(h=u.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var m=0;m<h.length;m++){var b=h[m],N=b.getSnapshot;b=b.value;try{if(!jr(N(),b))return!1}catch{return!1}}if(h=u.child,u.subtreeFlags&16384&&h!==null)h.return=u,u=h;else{if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Dl(o,u,h,m){u&=~Gv,u&=~mc,o.suspendedLanes|=u,o.pingedLanes&=~u,m&&(o.warmLanes|=u),m=o.expirationTimes;for(var b=u;0<b;){var N=31-Jt(b),x=1<<N;m[N]=-1,b&=~x}h!==0&&yi(o,h,u)}function Im(){return($n&6)===0?(Ef(0),!1):!0}function Wv(){if(En!==null){if(ar===0)var o=En.return;else o=En,Cl=rn=null,tv(o),yd=null,Ja=0,o=En;for(;o!==null;)Cm(o.alternate,o),o=o.return;En=null}}function Ld(o,u){var h=o.timeoutHandle;h!==-1&&(o.timeoutHandle=-1,Q2(h)),h=o.cancelPendingCommit,h!==null&&(o.cancelPendingCommit=null,h()),Rl=0,Wv(),br=o,En=h=Ss(o.current,null),Tn=u,ar=0,is=null,bu=!1,xd=_t(o,u),jv=!1,Pd=as=Gv=mc=Eu=Vr=0,Ua=pf=null,Vv=!1,(u&8)!==0&&(u|=u&32);var m=o.entangledLanes;if(m!==0)for(o=o.entanglements,m&=u;0<m;){var b=31-Jt(m),N=1<<b;u|=o[b],m&=~N}return uo=u,Xs(),h}function db(o,u){an=null,q.H=vu,u===_d||u===Fh?(u=Ny(),ar=3):u===Qp?(u=Ny(),ar=4):ar=u===ef?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,is=u,En===null&&(Vr=1,Jh(o,Xa(u,o.current)))}function vf(){var o=es.current;return o===null?!0:(Tn&4194048)===Tn?ro===null:(Tn&62914560)===Tn||(Tn&536870912)!==0?o===ro:!1}function hb(){var o=q.H;return q.H=vu,o===null?vu:o}function fb(){var o=q.A;return q.A=L2,o}function Mm(){Vr=4,bu||(Tn&4194048)!==Tn&&es.current!==null||(xd=!0),(Eu&134217727)===0&&(mc&134217727)===0||br===null||Dl(br,Tn,as,!1)}function Kv(o,u,h){var m=$n;$n|=2;var b=hb(),N=fb();(br!==o||Tn!==u)&&(Am=null,Ld(o,u)),u=!1;var x=Vr;e:do try{if(ar!==0&&En!==null){var V=En,ie=is;switch(ar){case 8:Wv(),x=6;break e;case 3:case 2:case 9:case 6:es.current===null&&(u=!0);var _e=ar;if(ar=0,is=null,Fd(o,V,ie,_e),h&&xd){x=0;break e}break;default:_e=ar,ar=0,is=null,Fd(o,V,ie,_e)}}H2(),x=Vr;break}catch(De){db(o,De)}while(!0);return u&&o.shellSuspendCounter++,Cl=rn=null,$n=m,q.H=b,q.A=N,En===null&&(br=null,Tn=0,Xs()),x}function H2(){for(;En!==null;)pb(En)}function j2(o,u){var h=$n;$n|=2;var m=hb(),b=fb();br!==o||Tn!==u?(Am=null,gc=gn()+500,Ld(o,u)):xd=_t(o,u);e:do try{if(ar!==0&&En!==null){u=En;var N=is;t:switch(ar){case 1:ar=0,is=null,Fd(o,u,N,1);break;case 2:case 9:if(wy(N)){ar=0,is=null,mb(u);break}u=function(){ar!==2&&ar!==9||br!==o||(ar=7),Bo(o)},N.then(u,u);break e;case 3:ar=7;break e;case 4:ar=5;break e;case 7:wy(N)?(ar=0,is=null,mb(u)):(ar=0,is=null,Fd(o,u,N,7));break;case 5:var x=null;switch(En.tag){case 26:x=En.memoizedState;case 5:case 27:var V=En;if(x?Gb(x):V.stateNode.complete){ar=0,is=null;var ie=V.sibling;if(ie!==null)En=ie;else{var _e=V.return;_e!==null?(En=_e,Om(_e)):En=null}break t}}ar=0,is=null,Fd(o,u,N,5);break;case 6:ar=0,is=null,Fd(o,u,N,6);break;case 8:Wv(),Vr=6;break e;default:throw Error(r(462))}}G2();break}catch(De){db(o,De)}while(!0);return Cl=rn=null,q.H=m,q.A=b,$n=h,En!==null?0:(br=null,Tn=0,Xs(),Vr)}function G2(){for(;En!==null&&!Dn();)pb(En)}function pb(o){var u=zy(o.alternate,o,uo);o.memoizedProps=o.pendingProps,u===null?Om(o):En=u}function mb(o){var u=o,h=u.alternate;switch(u.tag){case 15:case 0:u=Gy(h,u,u.pendingProps,u.type,void 0,Tn);break;case 11:u=Gy(h,u,u.pendingProps,u.type.render,u.ref,Tn);break;case 5:tv(u);default:Cm(h,u),u=En=_y(u,uo),u=zy(h,u,uo)}o.memoizedProps=o.pendingProps,u===null?Om(o):En=u}function Fd(o,u,h,m){Cl=rn=null,tv(u),yd=null,Ja=0;var b=u.return;try{if(Nv(o,b,u,h,Tn)){Vr=1,Jh(o,Xa(h,o.current)),En=null;return}}catch(N){if(b!==null)throw En=b,N;Vr=1,Jh(o,Xa(h,o.current)),En=null;return}u.flags&32768?(In||m===1?o=!0:xd||(Tn&536870912)!==0?o=!1:(bu=o=!0,(m===2||m===9||m===3||m===6)&&(m=es.current,m!==null&&m.tag===13&&(m.flags|=16384))),_f(u,o)):Om(u)}function Om(o){var u=o;do{if((u.flags&32768)!==0){_f(u,bu);return}o=u.return;var h=qy(u.alternate,u,uo);if(h!==null){En=h;return}if(u=u.sibling,u!==null){En=u;return}En=u=o}while(u!==null);Vr===0&&(Vr=5)}function _f(o,u){do{var h=uf(o.alternate,o);if(h!==null){h.flags&=32767,En=h;return}if(h=o.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!u&&(o=o.sibling,o!==null)){En=o;return}En=o=h}while(o!==null);Vr=6,En=null}function gb(o,u,h,m,b,N,x,V,ie){o.cancelPendingCommit=null;do yf();while(Ci!==0);if(($n&6)!==0)throw Error(r(327));if(u!==null){if(u===o.current)throw Error(r(177));if(N=u.lanes|u.childLanes,N|=ud,sa(o,h,N,x,V,ie),o===br&&(En=br=null,Tn=0),Ud=u,wu=o,Rl=h,Bv=N,zv=b,sb=m,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,z2(cr,function(){return Xv(),null})):(o.callbackNode=null,o.callbackPriority=0),m=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||m){m=q.T,q.T=null,b=le.p,le.p=2,x=$n,$n|=4;try{P2(o,u,h)}finally{$n=x,le.p=b,q.T=m}}Ci=1,Yv(),Qv(),km()}}function Yv(){if(Ci===1){Ci=0;var o=wu,u=Ud,h=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||h){h=q.T,q.T=null;var m=le.p;le.p=2;var b=$n;$n|=4;try{Zy(u,o);var N=l_,x=py(o.containerInfo),V=N.focusedElem,ie=N.selectionRange;if(x!==V&&V&&V.ownerDocument&&fy(V.ownerDocument.documentElement,V)){if(ie!==null&&qg(V)){var _e=ie.start,De=ie.end;if(De===void 0&&(De=_e),"selectionStart"in V)V.selectionStart=_e,V.selectionEnd=Math.min(De,V.value.length);else{var je=V.ownerDocument||document,be=je&&je.defaultView||window;if(be.getSelection){var Me=be.getSelection(),ut=V.textContent.length,Ht=Math.min(ie.start,ut),fr=ie.end===void 0?Ht:Math.min(ie.end,ut);!Me.extend&&Ht>fr&&(x=fr,fr=Ht,Ht=x);var he=hy(V,Ht),se=hy(V,fr);if(he&&se&&(Me.rangeCount!==1||Me.anchorNode!==he.node||Me.anchorOffset!==he.offset||Me.focusNode!==se.node||Me.focusOffset!==se.offset)){var ve=je.createRange();ve.setStart(he.node,he.offset),Me.removeAllRanges(),Ht>fr?(Me.addRange(ve),Me.extend(se.node,se.offset)):(ve.setEnd(se.node,se.offset),Me.addRange(ve))}}}}for(je=[],Me=V;Me=Me.parentNode;)Me.nodeType===1&&je.push({element:Me,left:Me.scrollLeft,top:Me.scrollTop});for(typeof V.focus=="function"&&V.focus(),V=0;V<je.length;V++){var Fe=je[V];Fe.element.scrollLeft=Fe.left,Fe.element.scrollTop=Fe.top}}qm=!!Tf,l_=Tf=null}finally{$n=b,le.p=m,q.T=h}}o.current=u,Ci=2}}function Qv(){if(Ci===2){Ci=0;var o=wu,u=Ud,h=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||h){h=q.T,q.T=null;var m=le.p;le.p=2;var b=$n;$n|=4;try{Pv(o,u.alternate,u)}finally{$n=b,le.p=m,q.T=h}}Ci=3}}function km(){if(Ci===4||Ci===3){Ci=0,Cr();var o=wu,u=Ud,h=Rl,m=sb;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?Ci=5:(Ci=0,Ud=wu=null,$v(o,o.pendingLanes));var b=o.pendingLanes;if(b===0&&(Cu=null),Wi(h),u=u.stateNode,Kn&&typeof Kn.onCommitFiberRoot=="function")try{Kn.onCommitFiberRoot(Dr,u,void 0,(u.current.flags&128)===128)}catch{}if(m!==null){u=q.T,b=le.p,le.p=2,q.T=null;try{for(var N=o.onRecoverableError,x=0;x<m.length;x++){var V=m[x];N(V.value,{componentStack:V.stack})}}finally{q.T=u,le.p=b}}(Rl&3)!==0&&yf(),Bo(o),b=o.pendingLanes,(h&261930)!==0&&(b&42)!==0?o===qv?gf++:(gf=0,qv=o):gf=0,Ef(0)}}function $v(o,u){(o.pooledCacheLanes&=u)===0&&(u=o.pooledCache,u!=null&&(o.pooledCache=null,Uh(u)))}function yf(){return Yv(),Qv(),km(),Xv()}function Xv(){if(Ci!==5)return!1;var o=wu,u=Bv;Bv=0;var h=Wi(Rl),m=q.T,b=le.p;try{le.p=32>h?32:h,q.T=null,h=zv,zv=null;var N=wu,x=Rl;if(Ci=0,Ud=wu=null,Rl=0,($n&6)!==0)throw Error(r(331));var V=$n;if($n|=4,rb(N.current),eb(N,N.current,x,h),$n=V,Ef(0,!1),Kn&&typeof Kn.onPostCommitFiberRoot=="function")try{Kn.onPostCommitFiberRoot(Dr,N)}catch{}return!0}finally{le.p=b,q.T=m,$v(o,u)}}function Zv(o,u,h){u=Xa(h,u),u=wv(o.stateNode,u,2),o=to(o,u,2),o!==null&&(zi(o,2),Bo(o))}function sr(o,u,h){if(o.tag===3)Zv(o,o,h);else for(;u!==null;){if(u.tag===3){Zv(u,o,h);break}else if(u.tag===1){var m=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Cu===null||!Cu.has(m))){o=Xa(h,o),h=jo(2),m=to(u,h,2),m!==null&&(mm(h,m,u,o),zi(m,2),Bo(m));break}}u=u.return}}function Jv(o,u,h){var m=o.pingCache;if(m===null){m=o.pingCache=new F2;var b=new Set;m.set(u,b)}else b=m.get(u),b===void 0&&(b=new Set,m.set(u,b));b.has(h)||(jv=!0,b.add(h),o=V2.bind(null,o,u,h),u.then(o,o))}function V2(o,u,h){var m=o.pingCache;m!==null&&m.delete(u),o.pingedLanes|=o.suspendedLanes&h,o.warmLanes&=~h,br===o&&(Tn&h)===h&&(Vr===4||Vr===3&&(Tn&62914560)===Tn&&300>gn()-mf?($n&2)===0&&Ld(o,0):Gv|=h,Pd===Tn&&(Pd=0)),Bo(o)}function bf(o,u){u===0&&(u=Gn()),o=Po(o,u),o!==null&&(zi(o,u),Bo(o))}function Rm(o){var u=o.memoizedState,h=0;u!==null&&(h=u.retryLane),bf(o,h)}function B2(o,u){var h=0;switch(o.tag){case 31:case 13:var m=o.stateNode,b=o.memoizedState;b!==null&&(h=b.retryLane);break;case 19:m=o.stateNode;break;case 22:m=o.stateNode._retryCache;break;default:throw Error(r(314))}m!==null&&m.delete(u),bf(o,h)}function z2(o,u){return Un(o,u)}var Hd=null,vc=null,e_=!1,Dm=!1,t_=!1,Nu=0;function Bo(o){o!==vc&&o.next===null&&(vc===null?Hd=vc=o:vc=vc.next=o),Dm=!0,e_||(e_=!0,W2())}function Ef(o,u){if(!t_&&Dm){t_=!0;do for(var h=!1,m=Hd;m!==null;){if(o!==0){var b=m.pendingLanes;if(b===0)var N=0;else{var x=m.suspendedLanes,V=m.pingedLanes;N=(1<<31-Jt(42|o)+1)-1,N&=b&~(x&~V),N=N&201326741?N&201326741|1:N?N|2:0}N!==0&&(h=!0,bb(m,N))}else N=Tn,N=Et(m,m===br?N:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(N&3)===0||_t(m,N)||(h=!0,bb(m,N));m=m.next}while(h);t_=!1}}function q2(){vb()}function vb(){Dm=e_=!1;var o=0;Nu!==0&&Y2()&&(o=Nu);for(var u=gn(),h=null,m=Hd;m!==null;){var b=m.next,N=_b(m,u);N===0?(m.next=null,h===null?Hd=b:h.next=b,b===null&&(vc=h)):(h=m,(o!==0||(N&3)!==0)&&(Dm=!0)),m=b}Ci!==0&&Ci!==5||Ef(o),Nu!==0&&(Nu=0)}function _b(o,u){for(var h=o.suspendedLanes,m=o.pingedLanes,b=o.expirationTimes,N=o.pendingLanes&-62914561;0<N;){var x=31-Jt(N),V=1<<x,ie=b[x];ie===-1?((V&h)===0||(V&m)!==0)&&(b[x]=yt(V,u)):ie<=u&&(o.expiredLanes|=V),N&=~V}if(u=br,h=Tn,h=Et(o,o===u?h:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),m=o.callbackNode,h===0||o===u&&(ar===2||ar===9)||o.cancelPendingCommit!==null)return m!==null&&m!==null&&gt(m),o.callbackNode=null,o.callbackPriority=0;if((h&3)===0||_t(o,h)){if(u=h&-h,u===o.callbackPriority)return u;switch(m!==null&&gt(m),Wi(h)){case 2:case 8:h=Wn;break;case 32:h=cr;break;case 268435456:h=ti;break;default:h=cr}return m=yb.bind(null,o),h=Un(h,m),o.callbackPriority=u,o.callbackNode=h,u}return m!==null&&m!==null&&gt(m),o.callbackPriority=2,o.callbackNode=null,2}function yb(o,u){if(Ci!==0&&Ci!==5)return o.callbackNode=null,o.callbackPriority=0,null;var h=o.callbackNode;if(yf()&&o.callbackNode!==h)return null;var m=Tn;return m=Et(o,o===br?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),m===0?null:(lb(o,m,u),_b(o,gn()),o.callbackNode!=null&&o.callbackNode===h?yb.bind(null,o):null)}function bb(o,u){if(yf())return null;lb(o,u,!0)}function W2(){Mb(function(){($n&6)!==0?Un(Lt,q2):vb()})}function os(){if(Nu===0){var o=gd;o===0&&(o=Dt,Dt<<=1,(Dt&261888)===0&&(Dt=256)),Nu=o}return Nu}function Eb(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Do(""+o)}function Cb(o,u){var h=u.ownerDocument.createElement("input");return h.name=u.name,h.value=u.value,o.id&&h.setAttribute("form",o.id),u.parentNode.insertBefore(h,u),o=new FormData(o),h.parentNode.removeChild(h),o}function _c(o,u,h,m,b){if(u==="submit"&&h&&h.stateNode===b){var N=Eb((b[ht]||null).action),x=m.submitter;x&&(u=(u=x[ht]||null)?Eb(u.formAction):x.getAttribute("formAction"),u!==null&&(N=u,x=null));var V=new iu("action","action",null,m,b);o.push({event:V,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Nu!==0){var ie=x?Cb(b,x):new FormData(b);gu(h,{pending:!0,data:ie,method:b.method,action:N},null,ie)}}else typeof N=="function"&&(V.preventDefault(),ie=x?Cb(b,x):new FormData(b),gu(h,{pending:!0,data:ie,method:b.method,action:N},N,ie))},currentTarget:b}]})}}for(var $t=0;$t<Vp.length;$t++){var n_=Vp[$t],Fa=n_.toLowerCase(),ai=n_[0].toUpperCase()+n_.slice(1);Ma(Fa,"on"+ai)}Ma($a,"onAnimationEnd"),Ma(kh,"onAnimationIteration"),Ma(my,"onAnimationStart"),Ma("dblclick","onDoubleClick"),Ma("focusin","onFocus"),Ma("focusout","onBlur"),Ma(od,"onTransitionRun"),Ma(jp,"onTransitionStart"),Ma(Gp,"onTransitionCancel"),Ma(er,"onTransitionEnd"),Ln("onMouseEnter",["mouseout","mouseover"]),Ln("onMouseLeave",["mouseout","mouseover"]),Ln("onPointerEnter",["pointerout","pointerover"]),Ln("onPointerLeave",["pointerout","pointerover"]),Br("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Br("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Br("onBeforeInput",["compositionend","keypress","textInput","paste"]),Br("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Br("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Br("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Cf));function wb(o,u){u=(u&4)!==0;for(var h=0;h<o.length;h++){var m=o[h],b=m.event;m=m.listeners;e:{var N=void 0;if(u)for(var x=m.length-1;0<=x;x--){var V=m[x],ie=V.instance,_e=V.currentTarget;if(V=V.listener,ie!==N&&b.isPropagationStopped())break e;N=V,b.currentTarget=_e;try{N(b)}catch(De){Bp(De)}b.currentTarget=null,N=ie}else for(x=0;x<m.length;x++){if(V=m[x],ie=V.instance,_e=V.currentTarget,V=V.listener,ie!==N&&b.isPropagationStopped())break e;N=V,b.currentTarget=_e;try{N(b)}catch(De){Bp(De)}b.currentTarget=null,N=ie}}}}function Cn(o,u){var h=u[Nn];h===void 0&&(h=u[Nn]=new Set);var m=o+"__bubble";h.has(m)||(Pm(u,o,2,!1),h.add(m))}function r_(o,u,h){var m=0;u&&(m|=4),Pm(h,o,m,u)}var xm="_reactListening"+Math.random().toString(36).slice(2);function i_(o){if(!o[xm]){o[xm]=!0,Ir.forEach(function(h){h!=="selectionchange"&&(Tu.has(h)||r_(h,!1,o),r_(h,!0,o))});var u=o.nodeType===9?o:o.ownerDocument;u===null||u[xm]||(u[xm]=!0,r_("selectionchange",!1,u))}}function Pm(o,u,h,m){switch(Qb(u)){case 2:var b=lC;break;case 8:b=uC;break;default:b=g_}h=b.bind(null,u,h,o),b=void 0,!$u||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(b=!0),m?b!==void 0?o.addEventListener(u,h,{capture:!0,passive:b}):o.addEventListener(u,h,!0):b!==void 0?o.addEventListener(u,h,{passive:b}):o.addEventListener(u,h,!1)}function a_(o,u,h,m,b){var N=m;if((u&1)===0&&(u&2)===0&&m!==null)e:for(;;){if(m===null)return;var x=m.tag;if(x===3||x===4){var V=m.stateNode.containerInfo;if(V===b)break;if(x===4)for(x=m.return;x!==null;){var ie=x.tag;if((ie===3||ie===4)&&x.stateNode.containerInfo===b)return;x=x.return}for(;V!==null;){if(x=Be(V),x===null)return;if(ie=x.tag,ie===5||ie===6||ie===26||ie===27){m=N=x;continue e}V=V.parentNode}}m=m.return}wh(function(){var _e=N,De=fl(h),je=[];e:{var be=gy.get(o);if(be!==void 0){var Me=iu,ut=o;switch(o){case"keypress":if(Xu(h)===0)break e;case"keydown":case"keyup":Me=au;break;case"focusin":ut="focus",Me=Ju;break;case"focusout":ut="blur",Me=Ju;break;case"beforeblur":case"afterblur":Me=Ju;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Me=Zu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Me=Sh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Me=v2;break;case $a:case kh:case my:Me=Ah;break;case er:Me=y2;break;case"scroll":case"scrollend":Me=Th;break;case"wheel":Me=Rp;break;case"copy":case"cut":case"paste":Me=ot;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Me=ay;break;case"toggle":case"beforetoggle":Me=b2}var Ht=(u&4)!==0,fr=!Ht&&(o==="scroll"||o==="scrollend"),he=Ht?be!==null?be+"Capture":null:be;Ht=[];for(var se=_e,ve;se!==null;){var Fe=se;if(ve=Fe.stateNode,Fe=Fe.tag,Fe!==5&&Fe!==26&&Fe!==27||ve===null||he===null||(Fe=wr(se,he),Fe!=null&&Ht.push(ls(se,Fe,ve))),fr)break;se=se.return}0<Ht.length&&(be=new Me(be,ut,null,h,De),je.push({event:be,listeners:Ht}))}}if((u&7)===0){e:{if(be=o==="mouseover"||o==="pointerover",Me=o==="mouseout"||o==="pointerout",be&&h!==hl&&(ut=h.relatedTarget||h.fromElement)&&(Be(ut)||ut[Vt]))break e;if((Me||be)&&(be=De.window===De?De:(be=De.ownerDocument)?be.defaultView||be.parentWindow:window,Me?(ut=h.relatedTarget||h.toElement,Me=_e,ut=ut?Be(ut):null,ut!==null&&(fr=a(ut),Ht=ut.tag,ut!==fr||Ht!==5&&Ht!==27&&Ht!==6)&&(ut=null)):(Me=null,ut=_e),Me!==ut)){if(Ht=Zu,Fe="onMouseLeave",he="onMouseEnter",se="mouse",(o==="pointerout"||o==="pointerover")&&(Ht=ay,Fe="onPointerLeave",he="onPointerEnter",se="pointer"),fr=Me==null?be:hn(Me),ve=ut==null?be:hn(ut),be=new Ht(Fe,se+"leave",Me,h,De),be.target=fr,be.relatedTarget=ve,Fe=null,Be(De)===_e&&(Ht=new Ht(he,se+"enter",ut,h,De),Ht.target=ve,Ht.relatedTarget=fr,Fe=Ht),fr=Fe,Me&&ut)t:{for(Ht=Um,he=Me,se=ut,ve=0,Fe=he;Fe;Fe=Ht(Fe))ve++;Fe=0;for(var kt=se;kt;kt=Ht(kt))Fe++;for(;0<ve-Fe;)he=Ht(he),ve--;for(;0<Fe-ve;)se=Ht(se),Fe--;for(;ve--;){if(he===se||se!==null&&he===se.alternate){Ht=he;break t}he=Ht(he),se=Ht(se)}Ht=null}else Ht=null;Me!==null&&Ur(je,be,Me,Ht,!1),ut!==null&&fr!==null&&Ur(je,fr,ut,Ht,!0)}}e:{if(be=_e?hn(_e):window,Me=be.nodeName&&be.nodeName.toLowerCase(),Me==="select"||Me==="input"&&be.type==="file")var Bn=cy;else if(jg(be))if(nc)Bn=N2;else{Bn=C2;var mt=Fp}else Me=be.nodeName,!Me||Me.toLowerCase()!=="input"||be.type!=="checkbox"&&be.type!=="radio"?_e&&Ns(_e.elementType)&&(Bn=cy):Bn=w2;if(Bn&&(Bn=Bn(o,_e))){Gg(je,Bn,h,De);break e}mt&&mt(o,be,_e),o==="focusout"&&_e&&be.type==="number"&&_e.memoizedProps.value!=null&&Qu(be,"number",be.value)}switch(mt=_e?hn(_e):window,o){case"focusin":(jg(mt)||mt.contentEditable==="true")&&(de=mt,xe=_e,we=null);break;case"focusout":we=xe=de=null;break;case"mousedown":st=!0;break;case"contextmenu":case"mouseup":case"dragend":st=!1,Qt(je,h,De);break;case"selectionchange":if(sd)break;case"keydown":case"keyup":Qt(je,h,De)}var un;if(Dp)e:{switch(o){case"compositionstart":var Sn="onCompositionStart";break e;case"compositionend":Sn="onCompositionEnd";break e;case"compositionupdate":Sn="onCompositionUpdate";break e}Sn=void 0}else tc?Pp(o,h)&&(Sn="onCompositionEnd"):o==="keydown"&&h.keyCode===229&&(Sn="onCompositionStart");Sn&&(Fg&&h.locale!=="ko"&&(tc||Sn!=="onCompositionStart"?Sn==="onCompositionEnd"&&tc&&(un=Qn()):(Ya=De,nu="value"in Ya?Ya.value:Ya.textContent,tc=!0)),mt=wf(_e,Sn),0<mt.length&&(Sn=new ce(Sn,o,null,h,De),je.push({event:Sn,listeners:mt}),un?Sn.data=un:(un=uy(h),un!==null&&(Sn.data=un)))),(un=Lg?Qa(o,h):Hg(o,h))&&(Sn=wf(_e,"onBeforeInput"),0<Sn.length&&(mt=new ce("onBeforeInput","beforeinput",null,h,De),je.push({event:mt,listeners:Sn}),mt.data=un)),_c(je,o,_e,h,De)}wb(je,u)})}function ls(o,u,h){return{instance:o,listener:u,currentTarget:h}}function wf(o,u){for(var h=u+"Capture",m=[];o!==null;){var b=o,N=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||N===null||(b=wr(o,h),b!=null&&m.unshift(ls(o,b,N)),b=wr(o,u),b!=null&&m.push(ls(o,b,N))),o.tag===3)return m;o=o.return}return[]}function Um(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function Ur(o,u,h,m,b){for(var N=u._reactName,x=[];h!==null&&h!==m;){var V=h,ie=V.alternate,_e=V.stateNode;if(V=V.tag,ie!==null&&ie===m)break;V!==5&&V!==26&&V!==27||_e===null||(ie=_e,b?(_e=wr(h,N),_e!=null&&x.unshift(ls(h,_e,ie))):b||(_e=wr(h,N),_e!=null&&x.push(ls(h,_e,ie)))),h=h.return}x.length!==0&&o.push({event:u,listeners:x})}var Qr=/\r\n?/g,Nb=/\u0000|\uFFFD/g;function Tb(o){return(typeof o=="string"?o:""+o).replace(Qr,`
`).replace(Nb,"")}function Sb(o,u){return u=Tb(u),Tb(o)===u}function hr(o,u,h,m,b,N){switch(h){case"children":typeof m=="string"?u==="body"||u==="textarea"&&m===""||ua(o,m):(typeof m=="number"||typeof m=="bigint")&&u!=="body"&&ua(o,""+m);break;case"className":zr(o,"class",m);break;case"tabIndex":zr(o,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":zr(o,h,m);break;case"style":Oo(o,m,N);break;case"data":if(u!=="object"){zr(o,"data",m);break}case"src":case"href":if(m===""&&(u!=="a"||h!=="href")){o.removeAttribute(h);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){o.removeAttribute(h);break}m=Do(""+m),o.setAttribute(h,m);break;case"action":case"formAction":if(typeof m=="function"){o.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof N=="function"&&(h==="formAction"?(u!=="input"&&hr(o,u,"name",b.name,b,null),hr(o,u,"formEncType",b.formEncType,b,null),hr(o,u,"formMethod",b.formMethod,b,null),hr(o,u,"formTarget",b.formTarget,b,null)):(hr(o,u,"encType",b.encType,b,null),hr(o,u,"method",b.method,b,null),hr(o,u,"target",b.target,b,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){o.removeAttribute(h);break}m=Do(""+m),o.setAttribute(h,m);break;case"onClick":m!=null&&(o.onclick=ca);break;case"onScroll":m!=null&&Cn("scroll",o);break;case"onScrollEnd":m!=null&&Cn("scrollend",o);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(h=m.__html,h!=null){if(b.children!=null)throw Error(r(60));o.innerHTML=h}}break;case"multiple":o.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":o.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){o.removeAttribute("xlink:href");break}h=Do(""+m),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(h,""+m):o.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(h,""):o.removeAttribute(h);break;case"capture":case"download":m===!0?o.setAttribute(h,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(h,m):o.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?o.setAttribute(h,m):o.removeAttribute(h);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?o.removeAttribute(h):o.setAttribute(h,m);break;case"popover":Cn("beforetoggle",o),Cn("toggle",o),Ks(o,"popover",m);break;case"xlinkActuate":la(o,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":la(o,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":la(o,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":la(o,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":la(o,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":la(o,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":la(o,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":la(o,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":la(o,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Ks(o,"is",m);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=ko.get(h)||h,Ks(o,h,m))}}function s_(o,u,h,m,b,N){switch(h){case"style":Oo(o,m,N);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(h=m.__html,h!=null){if(b.children!=null)throw Error(r(60));o.innerHTML=h}}break;case"children":typeof m=="string"?ua(o,m):(typeof m=="number"||typeof m=="bigint")&&ua(o,""+m);break;case"onScroll":m!=null&&Cn("scroll",o);break;case"onScrollEnd":m!=null&&Cn("scrollend",o);break;case"onClick":m!=null&&(o.onclick=ca);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Hr.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(b=h.endsWith("Capture"),u=h.slice(2,b?h.length-7:void 0),N=o[ht]||null,N=N!=null?N[h]:null,typeof N=="function"&&o.removeEventListener(u,N,b),typeof m=="function")){typeof N!="function"&&N!==null&&(h in o?o[h]=null:o.hasAttribute(h)&&o.removeAttribute(h)),o.addEventListener(u,m,b);break e}h in o?o[h]=m:m===!0?o.setAttribute(h,""):Ks(o,h,m)}}}function ji(o,u,h){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Cn("error",o),Cn("load",o);var m=!1,b=!1,N;for(N in h)if(h.hasOwnProperty(N)){var x=h[N];if(x!=null)switch(N){case"src":m=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:hr(o,u,N,x,h,null)}}b&&hr(o,u,"srcSet",h.srcSet,h,null),m&&hr(o,u,"src",h.src,h,null);return;case"input":Cn("invalid",o);var V=N=x=b=null,ie=null,_e=null;for(m in h)if(h.hasOwnProperty(m)){var De=h[m];if(De!=null)switch(m){case"name":b=De;break;case"type":x=De;break;case"checked":ie=De;break;case"defaultChecked":_e=De;break;case"value":N=De;break;case"defaultValue":V=De;break;case"children":case"dangerouslySetInnerHTML":if(De!=null)throw Error(r(137,u));break;default:hr(o,u,m,De,h,null)}}cl(o,N,V,ie,_e,x,b,!1);return;case"select":Cn("invalid",o),m=x=N=null;for(b in h)if(h.hasOwnProperty(b)&&(V=h[b],V!=null))switch(b){case"value":N=V;break;case"defaultValue":x=V;break;case"multiple":m=V;default:hr(o,u,b,V,h,null)}u=N,h=x,o.multiple=!!m,u!=null?Qs(o,!!m,u,!1):h!=null&&Qs(o,!!m,h,!0);return;case"textarea":Cn("invalid",o),N=b=m=null;for(x in h)if(h.hasOwnProperty(x)&&(V=h[x],V!=null))switch(x){case"value":m=V;break;case"defaultValue":b=V;break;case"children":N=V;break;case"dangerouslySetInnerHTML":if(V!=null)throw Error(r(91));break;default:hr(o,u,x,V,h,null)}dl(o,m,b,N);return;case"option":for(ie in h)h.hasOwnProperty(ie)&&(m=h[ie],m!=null)&&(ie==="selected"?o.selected=m&&typeof m!="function"&&typeof m!="symbol":hr(o,u,ie,m,h,null));return;case"dialog":Cn("beforetoggle",o),Cn("toggle",o),Cn("cancel",o),Cn("close",o);break;case"iframe":case"object":Cn("load",o);break;case"video":case"audio":for(m=0;m<Cf.length;m++)Cn(Cf[m],o);break;case"image":Cn("error",o),Cn("load",o);break;case"details":Cn("toggle",o);break;case"embed":case"source":case"link":Cn("error",o),Cn("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(_e in h)if(h.hasOwnProperty(_e)&&(m=h[_e],m!=null))switch(_e){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:hr(o,u,_e,m,h,null)}return;default:if(Ns(u)){for(De in h)h.hasOwnProperty(De)&&(m=h[De],m!==void 0&&s_(o,u,De,m,h,void 0));return}}for(V in h)h.hasOwnProperty(V)&&(m=h[V],m!=null&&hr(o,u,V,m,h,null))}function K2(o,u,h,m){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,N=null,x=null,V=null,ie=null,_e=null,De=null;for(Me in h){var je=h[Me];if(h.hasOwnProperty(Me)&&je!=null)switch(Me){case"checked":break;case"value":break;case"defaultValue":ie=je;default:m.hasOwnProperty(Me)||hr(o,u,Me,null,m,je)}}for(var be in m){var Me=m[be];if(je=h[be],m.hasOwnProperty(be)&&(Me!=null||je!=null))switch(be){case"type":N=Me;break;case"name":b=Me;break;case"checked":_e=Me;break;case"defaultChecked":De=Me;break;case"value":x=Me;break;case"defaultValue":V=Me;break;case"children":case"dangerouslySetInnerHTML":if(Me!=null)throw Error(r(137,u));break;default:Me!==je&&hr(o,u,be,Me,m,je)}}ws(o,x,V,ie,_e,De,N,b);return;case"select":Me=x=V=be=null;for(N in h)if(ie=h[N],h.hasOwnProperty(N)&&ie!=null)switch(N){case"value":break;case"multiple":Me=ie;default:m.hasOwnProperty(N)||hr(o,u,N,null,m,ie)}for(b in m)if(N=m[b],ie=h[b],m.hasOwnProperty(b)&&(N!=null||ie!=null))switch(b){case"value":be=N;break;case"defaultValue":V=N;break;case"multiple":x=N;default:N!==ie&&hr(o,u,b,N,m,ie)}u=V,h=x,m=Me,be!=null?Qs(o,!!h,be,!1):!!m!=!!h&&(u!=null?Qs(o,!!h,u,!0):Qs(o,!!h,h?[]:"",!1));return;case"textarea":Me=be=null;for(V in h)if(b=h[V],h.hasOwnProperty(V)&&b!=null&&!m.hasOwnProperty(V))switch(V){case"value":break;case"children":break;default:hr(o,u,V,null,m,b)}for(x in m)if(b=m[x],N=h[x],m.hasOwnProperty(x)&&(b!=null||N!=null))switch(x){case"value":be=b;break;case"defaultValue":Me=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:b!==N&&hr(o,u,x,b,m,N)}eu(o,be,Me);return;case"option":for(var ut in h)be=h[ut],h.hasOwnProperty(ut)&&be!=null&&!m.hasOwnProperty(ut)&&(ut==="selected"?o.selected=!1:hr(o,u,ut,null,m,be));for(ie in m)be=m[ie],Me=h[ie],m.hasOwnProperty(ie)&&be!==Me&&(be!=null||Me!=null)&&(ie==="selected"?o.selected=be&&typeof be!="function"&&typeof be!="symbol":hr(o,u,ie,be,m,Me));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ht in h)be=h[Ht],h.hasOwnProperty(Ht)&&be!=null&&!m.hasOwnProperty(Ht)&&hr(o,u,Ht,null,m,be);for(_e in m)if(be=m[_e],Me=h[_e],m.hasOwnProperty(_e)&&be!==Me&&(be!=null||Me!=null))switch(_e){case"children":case"dangerouslySetInnerHTML":if(be!=null)throw Error(r(137,u));break;default:hr(o,u,_e,be,m,Me)}return;default:if(Ns(u)){for(var fr in h)be=h[fr],h.hasOwnProperty(fr)&&be!==void 0&&!m.hasOwnProperty(fr)&&s_(o,u,fr,void 0,m,be);for(De in m)be=m[De],Me=h[De],!m.hasOwnProperty(De)||be===Me||be===void 0&&Me===void 0||s_(o,u,De,be,m,Me);return}}for(var he in h)be=h[he],h.hasOwnProperty(he)&&be!=null&&!m.hasOwnProperty(he)&&hr(o,u,he,null,m,be);for(je in m)be=m[je],Me=h[je],!m.hasOwnProperty(je)||be===Me||be==null&&Me==null||hr(o,u,je,be,m,Me)}function o_(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Nf(){if(typeof performance.getEntriesByType=="function"){for(var o=0,u=0,h=performance.getEntriesByType("resource"),m=0;m<h.length;m++){var b=h[m],N=b.transferSize,x=b.initiatorType,V=b.duration;if(N&&V&&o_(x)){for(x=0,V=b.responseEnd,m+=1;m<h.length;m++){var ie=h[m],_e=ie.startTime;if(_e>V)break;var De=ie.transferSize,je=ie.initiatorType;De&&o_(je)&&(ie=ie.responseEnd,x+=De*(ie<V?1:(V-_e)/(ie-_e)))}if(--m,u+=8*(N+x)/(b.duration/1e3),o++,10<o)break}}if(0<o)return u/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var Tf=null,l_=null;function Sf(o){return o.nodeType===9?o:o.ownerDocument}function Af(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ha(o,u){if(o===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&u==="foreignObject"?0:o}function Su(o,u){return o==="textarea"||o==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var u_=null;function Y2(){var o=window.event;return o&&o.type==="popstate"?o===u_?!1:(u_=o,!0):(u_=null,!1)}var Ab=typeof setTimeout=="function"?setTimeout:void 0,Q2=typeof clearTimeout=="function"?clearTimeout:void 0,Ib=typeof Promise=="function"?Promise:void 0,Mb=typeof queueMicrotask=="function"?queueMicrotask:typeof Ib<"u"?function(o){return Ib.resolve(null).then(o).catch(xl)}:Ab;function xl(o){setTimeout(function(){throw o})}function Bt(o){return o==="head"}function c_(o,u){var h=u,m=0;do{var b=h.nextSibling;if(o.removeChild(h),b&&b.nodeType===8)if(h=b.data,h==="/$"||h==="/&"){if(m===0){o.removeChild(b),Yd(u);return}m--}else if(h==="$"||h==="$?"||h==="$~"||h==="$!"||h==="&")m++;else if(h==="html")If(o.ownerDocument.documentElement);else if(h==="head"){h=o.ownerDocument.head,If(h);for(var N=h.firstChild;N;){var x=N.nextSibling,V=N.nodeName;N[ee]||V==="SCRIPT"||V==="STYLE"||V==="LINK"&&N.rel.toLowerCase()==="stylesheet"||h.removeChild(N),N=x}}else h==="body"&&If(o.ownerDocument.body);h=b}while(h);Yd(u)}function us(o,u){var h=o;o=0;do{var m=h.nextSibling;if(h.nodeType===1?u?(h._stashedDisplay=h.style.display,h.style.display="none"):(h.style.display=h._stashedDisplay||"",h.getAttribute("style")===""&&h.removeAttribute("style")):h.nodeType===3&&(u?(h._stashedText=h.nodeValue,h.nodeValue=""):h.nodeValue=h._stashedText||""),m&&m.nodeType===8)if(h=m.data,h==="/$"){if(o===0)break;o--}else h!=="$"&&h!=="$?"&&h!=="$~"&&h!=="$!"||o++;h=m}while(h)}function Lm(o){var u=o.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var h=u;switch(u=u.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":Lm(h),Xe(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}o.removeChild(h)}}function $2(o,u,h,m){for(;o.nodeType===1;){var b=h;if(o.nodeName.toLowerCase()!==u.toLowerCase()){if(!m&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(m){if(!o[ee])switch(u){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(N=o.getAttribute("rel"),N==="stylesheet"&&o.hasAttribute("data-precedence")||N!==b.rel||o.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||o.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||o.getAttribute("title")!==(b.title==null?null:b.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(N=o.getAttribute("src"),(N!==(b.src==null?null:b.src)||o.getAttribute("type")!==(b.type==null?null:b.type)||o.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&N&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(u==="input"&&o.type==="hidden"){var N=b.name==null?null:""+b.name;if(b.type==="hidden"&&o.getAttribute("name")===N)return o}else return o;if(o=Us(o.nextSibling),o===null)break}return null}function nr(o,u,h){if(u==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!h||(o=Us(o.nextSibling),o===null))return null;return o}function Ob(o,u){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!u||(o=Us(o.nextSibling),o===null))return null;return o}function Fm(o){return o.data==="$?"||o.data==="$~"}function jd(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function X2(o,u){var h=o.ownerDocument;if(o.data==="$~")o._reactRetry=u;else if(o.data!=="$?"||h.readyState!=="loading")u();else{var m=function(){u(),h.removeEventListener("DOMContentLoaded",m)};h.addEventListener("DOMContentLoaded",m),o._reactRetry=m}}function Us(o){for(;o!=null;o=o.nextSibling){var u=o.nodeType;if(u===1||u===3)break;if(u===8){if(u=o.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return o}var d_=null;function kb(o){o=o.nextSibling;for(var u=0;o;){if(o.nodeType===8){var h=o.data;if(h==="/$"||h==="/&"){if(u===0)return Us(o.nextSibling);u--}else h!=="$"&&h!=="$!"&&h!=="$?"&&h!=="$~"&&h!=="&"||u++}o=o.nextSibling}return null}function Rb(o){o=o.previousSibling;for(var u=0;o;){if(o.nodeType===8){var h=o.data;if(h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"){if(u===0)return o;u--}else h!=="/$"&&h!=="/&"||u++}o=o.previousSibling}return null}function Db(o,u,h){switch(u=Sf(h),o){case"html":if(o=u.documentElement,!o)throw Error(r(452));return o;case"head":if(o=u.head,!o)throw Error(r(453));return o;case"body":if(o=u.body,!o)throw Error(r(454));return o;default:throw Error(r(451))}}function If(o){for(var u=o.attributes;u.length;)o.removeAttributeNode(u[0]);Xe(o)}var Ls=new Map,xb=new Set;function Hm(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var Pl=le.d;le.d={f:Z2,r:J2,D:h_,C:eC,L:tC,m:nC,X:ja,S:ki,M:rC};function Z2(){var o=Pl.f(),u=Im();return o||u}function J2(o){var u=Pt(o);u!==null&&u.tag===5&&u.type==="form"?gv(u):Pl.r(o)}var Au=typeof document>"u"?null:document;function Pb(o,u,h){var m=Au;if(m&&typeof u=="string"&&u){var b=xi(u);b='link[rel="'+o+'"][href="'+b+'"]',typeof h=="string"&&(b+='[crossorigin="'+h+'"]'),xb.has(b)||(xb.add(b),o={rel:o,crossOrigin:h,href:u},m.querySelector(b)===null&&(u=m.createElement("link"),ji(u,"link",o),ln(u),m.head.appendChild(u)))}}function h_(o){Pl.D(o),Pb("dns-prefetch",o,null)}function eC(o,u){Pl.C(o,u),Pb("preconnect",o,u)}function tC(o,u,h){Pl.L(o,u,h);var m=Au;if(m&&o&&u){var b='link[rel="preload"][as="'+xi(u)+'"]';u==="image"&&h&&h.imageSrcSet?(b+='[imagesrcset="'+xi(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(b+='[imagesizes="'+xi(h.imageSizes)+'"]')):b+='[href="'+xi(o)+'"]';var N=b;switch(u){case"style":N=Gd(o);break;case"script":N=Bd(o)}Ls.has(N)||(o=g({rel:"preload",href:u==="image"&&h&&h.imageSrcSet?void 0:o,as:u},h),Ls.set(N,o),m.querySelector(b)!==null||u==="style"&&m.querySelector(Vd(N))||u==="script"&&m.querySelector(zd(N))||(u=m.createElement("link"),ji(u,"link",o),ln(u),m.head.appendChild(u)))}}function nC(o,u){Pl.m(o,u);var h=Au;if(h&&o){var m=u&&typeof u.as=="string"?u.as:"script",b='link[rel="modulepreload"][as="'+xi(m)+'"][href="'+xi(o)+'"]',N=b;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":N=Bd(o)}if(!Ls.has(N)&&(o=g({rel:"modulepreload",href:o},u),Ls.set(N,o),h.querySelector(b)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(zd(N)))return}m=h.createElement("link"),ji(m,"link",o),ln(m),h.head.appendChild(m)}}}function ki(o,u,h){Pl.S(o,u,h);var m=Au;if(m&&o){var b=Kt(m).hoistableStyles,N=Gd(o);u=u||"default";var x=b.get(N);if(!x){var V={loading:0,preload:null};if(x=m.querySelector(Vd(N)))V.loading=5;else{o=g({rel:"stylesheet",href:o,"data-precedence":u},h),(h=Ls.get(N))&&f_(o,h);var ie=x=m.createElement("link");ln(ie),ji(ie,"link",o),ie._p=new Promise(function(_e,De){ie.onload=_e,ie.onerror=De}),ie.addEventListener("load",function(){V.loading|=1}),ie.addEventListener("error",function(){V.loading|=2}),V.loading|=4,jm(x,u,m)}x={type:"stylesheet",instance:x,count:1,state:V},b.set(N,x)}}}function ja(o,u){Pl.X(o,u);var h=Au;if(h&&o){var m=Kt(h).hoistableScripts,b=Bd(o),N=m.get(b);N||(N=h.querySelector(zd(b)),N||(o=g({src:o,async:!0},u),(u=Ls.get(b))&&Gm(o,u),N=h.createElement("script"),ln(N),ji(N,"link",o),h.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},m.set(b,N))}}function rC(o,u){Pl.M(o,u);var h=Au;if(h&&o){var m=Kt(h).hoistableScripts,b=Bd(o),N=m.get(b);N||(N=h.querySelector(zd(b)),N||(o=g({src:o,async:!0,type:"module"},u),(u=Ls.get(b))&&Gm(o,u),N=h.createElement("script"),ln(N),ji(N,"link",o),h.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},m.set(b,N))}}function Ub(o,u,h,m){var b=(b=He.current)?Hm(b):null;if(!b)throw Error(r(446));switch(o){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(u=Gd(h.href),h=Kt(b).hoistableStyles,m=h.get(u),m||(m={type:"style",instance:null,count:0,state:null},h.set(u,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){o=Gd(h.href);var N=Kt(b).hoistableStyles,x=N.get(o);if(x||(b=b.ownerDocument||b,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},N.set(o,x),(N=b.querySelector(Vd(o)))&&!N._p&&(x.instance=N,x.state.loading=5),Ls.has(o)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},Ls.set(o,h),N||iC(b,o,h,x.state))),u&&m===null)throw Error(r(528,""));return x}if(u&&m!==null)throw Error(r(529,""));return null;case"script":return u=h.async,h=h.src,typeof h=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=Bd(h),h=Kt(b).hoistableScripts,m=h.get(u),m||(m={type:"script",instance:null,count:0,state:null},h.set(u,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,o))}}function Gd(o){return'href="'+xi(o)+'"'}function Vd(o){return'link[rel="stylesheet"]['+o+"]"}function Lb(o){return g({},o,{"data-precedence":o.precedence,precedence:null})}function iC(o,u,h,m){o.querySelector('link[rel="preload"][as="style"]['+u+"]")?m.loading=1:(u=o.createElement("link"),m.preload=u,u.addEventListener("load",function(){return m.loading|=1}),u.addEventListener("error",function(){return m.loading|=2}),ji(u,"link",h),ln(u),o.head.appendChild(u))}function Bd(o){return'[src="'+xi(o)+'"]'}function zd(o){return"script[async]"+o}function Fb(o,u,h){if(u.count++,u.instance===null)switch(u.type){case"style":var m=o.querySelector('style[data-href~="'+xi(h.href)+'"]');if(m)return u.instance=m,ln(m),m;var b=g({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return m=(o.ownerDocument||o).createElement("style"),ln(m),ji(m,"style",b),jm(m,h.precedence,o),u.instance=m;case"stylesheet":b=Gd(h.href);var N=o.querySelector(Vd(b));if(N)return u.state.loading|=4,u.instance=N,ln(N),N;m=Lb(h),(b=Ls.get(b))&&f_(m,b),N=(o.ownerDocument||o).createElement("link"),ln(N);var x=N;return x._p=new Promise(function(V,ie){x.onload=V,x.onerror=ie}),ji(N,"link",m),u.state.loading|=4,jm(N,h.precedence,o),u.instance=N;case"script":return N=Bd(h.src),(b=o.querySelector(zd(N)))?(u.instance=b,ln(b),b):(m=h,(b=Ls.get(N))&&(m=g({},h),Gm(m,b)),o=o.ownerDocument||o,b=o.createElement("script"),ln(b),ji(b,"link",m),o.head.appendChild(b),u.instance=b);case"void":return null;default:throw Error(r(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(m=u.instance,u.state.loading|=4,jm(m,h.precedence,o));return u.instance}function jm(o,u,h){for(var m=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=m.length?m[m.length-1]:null,N=b,x=0;x<m.length;x++){var V=m[x];if(V.dataset.precedence===u)N=V;else if(N!==b)break}N?N.parentNode.insertBefore(o,N.nextSibling):(u=h.nodeType===9?h.head:h,u.insertBefore(o,u.firstChild))}function f_(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.title==null&&(o.title=u.title)}function Gm(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.integrity==null&&(o.integrity=u.integrity)}var Mf=null;function Hb(o,u,h){if(Mf===null){var m=new Map,b=Mf=new Map;b.set(h,m)}else b=Mf,m=b.get(h),m||(m=new Map,b.set(h,m));if(m.has(o))return m;for(m.set(o,null),h=h.getElementsByTagName(o),b=0;b<h.length;b++){var N=h[b];if(!(N[ee]||N[Ot]||o==="link"&&N.getAttribute("rel")==="stylesheet")&&N.namespaceURI!=="http://www.w3.org/2000/svg"){var x=N.getAttribute(u)||"";x=o+x;var V=m.get(x);V?V.push(N):m.set(x,[N])}}return m}function jb(o,u,h){o=o.ownerDocument||o,o.head.insertBefore(h,u==="title"?o.querySelector("head > title"):null)}function aC(o,u,h){if(h===1||u.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;return u.rel==="stylesheet"?(o=u.disabled,typeof u.precedence=="string"&&o==null):!0;case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function Gb(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function qd(o,u,h,m){if(h.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var b=Gd(m.href),N=u.querySelector(Vd(b));if(N){u=N._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(o.count++,o=Vm.bind(o),u.then(o,o)),h.state.loading|=4,h.instance=N,ln(N);return}N=u.ownerDocument||u,m=Lb(m),(b=Ls.get(b))&&f_(m,b),N=N.createElement("link"),ln(N);var x=N;x._p=new Promise(function(V,ie){x.onload=V,x.onerror=ie}),ji(N,"link",m),h.instance=N}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(h,u),(u=h.state.preload)&&(h.state.loading&3)===0&&(o.count++,h=Vm.bind(o),u.addEventListener("load",h),u.addEventListener("error",h))}}var p_=0;function sC(o,u){return o.stylesheets&&o.count===0&&zm(o,o.stylesheets),0<o.count||0<o.imgCount?function(h){var m=setTimeout(function(){if(o.stylesheets&&zm(o,o.stylesheets),o.unsuspend){var N=o.unsuspend;o.unsuspend=null,N()}},6e4+u);0<o.imgBytes&&p_===0&&(p_=62500*Nf());var b=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&zm(o,o.stylesheets),o.unsuspend)){var N=o.unsuspend;o.unsuspend=null,N()}},(o.imgBytes>p_?50:800)+u);return o.unsuspend=h,function(){o.unsuspend=null,clearTimeout(m),clearTimeout(b)}}:null}function Vm(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)zm(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var Bm=null;function zm(o,u){o.stylesheets=null,o.unsuspend!==null&&(o.count++,Bm=new Map,u.forEach(Vb,o),Bm=null,Vm.call(o))}function Vb(o,u){if(!(u.state.loading&4)){var h=Bm.get(o);if(h)var m=h.get(null);else{h=new Map,Bm.set(o,h);for(var b=o.querySelectorAll("link[data-precedence],style[data-precedence]"),N=0;N<b.length;N++){var x=b[N];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(h.set(x.dataset.precedence,x),m=x)}m&&h.set(null,m)}b=u.instance,x=b.getAttribute("data-precedence"),N=h.get(x)||m,N===m&&h.set(null,b),h.set(x,b),this.count++,m=Vm.bind(this),b.addEventListener("load",m),b.addEventListener("error",m),N?N.parentNode.insertBefore(b,N.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(b,o.firstChild)),u.state.loading|=4}}var Wd={$$typeof:D,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function oC(o,u,h,m,b,N,x,V,ie){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=xt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xt(0),this.hiddenUpdates=xt(null),this.identifierPrefix=m,this.onUncaughtError=b,this.onCaughtError=N,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ie,this.incompleteTransitions=new Map}function Bb(o,u,h,m,b,N,x,V,ie,_e,De,je){return o=new oC(o,u,h,x,ie,_e,De,je,V),u=1,N===!0&&(u|=24),N=Ui(3,null,null,u),o.current=N,N.stateNode=o,u=Zs(),u.refCount++,o.pooledCache=u,u.refCount++,N.memoizedState={element:m,isDehydrated:h,cache:u},Fo(N),o}function zb(o){return o?(o=yl,o):yl}function qb(o,u,h,m,b,N){b=zb(b),m.context===null?m.context=b:m.pendingContext=b,m=fu(u),m.payload={element:h},N=N===void 0?null:N,N!==null&&(m.callback=N),h=to(o,m,u),h!==null&&(La(h,o,u),Hh(h,o,u))}function Wb(o,u){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var h=o.retryLane;o.retryLane=h!==0&&h<u?h:u}}function m_(o,u){Wb(o,u),(o=o.alternate)&&Wb(o,u)}function Kb(o){if(o.tag===13||o.tag===31){var u=Po(o,67108864);u!==null&&La(u,o,67108864),m_(o,67108864)}}function Yb(o){if(o.tag===13||o.tag===31){var u=ss();u=qi(u);var h=Po(o,u);h!==null&&La(h,o,u),m_(o,u)}}var qm=!0;function lC(o,u,h,m){var b=q.T;q.T=null;var N=le.p;try{le.p=2,g_(o,u,h,m)}finally{le.p=N,q.T=b}}function uC(o,u,h,m){var b=q.T;q.T=null;var N=le.p;try{le.p=8,g_(o,u,h,m)}finally{le.p=N,q.T=b}}function g_(o,u,h,m){if(qm){var b=v_(m);if(b===null)a_(o,u,m,Wm,h),$b(o,m);else if(Xb(b,o,u,h,m))m.stopPropagation();else if($b(o,m),u&4&&-1<cC.indexOf(o)){for(;b!==null;){var N=Pt(b);if(N!==null)switch(N.tag){case 3:if(N=N.stateNode,N.current.memoizedState.isDehydrated){var x=Ae(N.pendingLanes);if(x!==0){var V=N;for(V.pendingLanes|=2,V.entangledLanes|=2;x;){var ie=1<<31-Jt(x);V.entanglements[1]|=ie,x&=~ie}Bo(N),($n&6)===0&&(gc=gn()+500,Ef(0))}}break;case 31:case 13:V=Po(N,2),V!==null&&La(V,N,2),Im(),m_(N,2)}if(N=v_(m),N===null&&a_(o,u,m,Wm,h),N===b)break;b=N}b!==null&&m.stopPropagation()}else a_(o,u,m,null,h)}}function v_(o){return o=fl(o),__(o)}var Wm=null;function __(o){if(Wm=null,o=Be(o),o!==null){var u=a(o);if(u===null)o=null;else{var h=u.tag;if(h===13){if(o=s(u),o!==null)return o;o=null}else if(h===31){if(o=l(u),o!==null)return o;o=null}else if(h===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;o=null}else u!==o&&(o=null)}}return Wm=o,null}function Qb(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(rr()){case Lt:return 2;case Wn:return 8;case cr:case dn:return 32;case ti:return 268435456;default:return 32}default:return 32}}var y_=!1,Iu=null,Mu=null,Ou=null,Of=new Map,kf=new Map,ku=[],cC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function $b(o,u){switch(o){case"focusin":case"focusout":Iu=null;break;case"dragenter":case"dragleave":Mu=null;break;case"mouseover":case"mouseout":Ou=null;break;case"pointerover":case"pointerout":Of.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":kf.delete(u.pointerId)}}function yc(o,u,h,m,b,N){return o===null||o.nativeEvent!==N?(o={blockedOn:u,domEventName:h,eventSystemFlags:m,nativeEvent:N,targetContainers:[b]},u!==null&&(u=Pt(u),u!==null&&Kb(u)),o):(o.eventSystemFlags|=m,u=o.targetContainers,b!==null&&u.indexOf(b)===-1&&u.push(b),o)}function Xb(o,u,h,m,b){switch(u){case"focusin":return Iu=yc(Iu,o,u,h,m,b),!0;case"dragenter":return Mu=yc(Mu,o,u,h,m,b),!0;case"mouseover":return Ou=yc(Ou,o,u,h,m,b),!0;case"pointerover":var N=b.pointerId;return Of.set(N,yc(Of.get(N)||null,o,u,h,m,b)),!0;case"gotpointercapture":return N=b.pointerId,kf.set(N,yc(kf.get(N)||null,o,u,h,m,b)),!0}return!1}function b_(o){var u=Be(o.target);if(u!==null){var h=a(u);if(h!==null){if(u=h.tag,u===13){if(u=s(h),u!==null){o.blockedOn=u,Ct(o.priority,function(){Yb(h)});return}}else if(u===31){if(u=l(h),u!==null){o.blockedOn=u,Ct(o.priority,function(){Yb(h)});return}}else if(u===3&&h.stateNode.current.memoizedState.isDehydrated){o.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Km(o){if(o.blockedOn!==null)return!1;for(var u=o.targetContainers;0<u.length;){var h=v_(o.nativeEvent);if(h===null){h=o.nativeEvent;var m=new h.constructor(h.type,h);hl=m,h.target.dispatchEvent(m),hl=null}else return u=Pt(h),u!==null&&Kb(u),o.blockedOn=h,!1;u.shift()}return!0}function Zb(o,u,h){Km(o)&&h.delete(u)}function dC(){y_=!1,Iu!==null&&Km(Iu)&&(Iu=null),Mu!==null&&Km(Mu)&&(Mu=null),Ou!==null&&Km(Ou)&&(Ou=null),Of.forEach(Zb),kf.forEach(Zb)}function Kd(o,u){o.blockedOn===u&&(o.blockedOn=null,y_||(y_=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,dC)))}var Ym=null;function Jb(o){Ym!==o&&(Ym=o,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Ym===o&&(Ym=null);for(var u=0;u<o.length;u+=3){var h=o[u],m=o[u+1],b=o[u+2];if(typeof m!="function"){if(__(m||h)===null)continue;break}var N=Pt(h);N!==null&&(o.splice(u,3),u-=3,gu(N,{pending:!0,data:b,method:h.method,action:m},m,b))}}))}function Yd(o){function u(ie){return Kd(ie,o)}Iu!==null&&Kd(Iu,o),Mu!==null&&Kd(Mu,o),Ou!==null&&Kd(Ou,o),Of.forEach(u),kf.forEach(u);for(var h=0;h<ku.length;h++){var m=ku[h];m.blockedOn===o&&(m.blockedOn=null)}for(;0<ku.length&&(h=ku[0],h.blockedOn===null);)b_(h),h.blockedOn===null&&ku.shift();if(h=(o.ownerDocument||o).$$reactFormReplay,h!=null)for(m=0;m<h.length;m+=3){var b=h[m],N=h[m+1],x=b[ht]||null;if(typeof N=="function")x||Jb(h);else if(x){var V=null;if(N&&N.hasAttribute("formAction")){if(b=N,x=N[ht]||null)V=x.formAction;else if(__(b)!==null)continue}else V=x.action;typeof V=="function"?h[m+1]=V:(h.splice(m,3),m-=3),Jb(h)}}}function pa(){function o(N){N.canIntercept&&N.info==="react-transition"&&N.intercept({handler:function(){return new Promise(function(x){return b=x})},focusReset:"manual",scroll:"manual"})}function u(){b!==null&&(b(),b=null),m||setTimeout(h,20)}function h(){if(!m&&!navigation.transition){var N=navigation.currentEntry;N&&N.url!=null&&navigation.navigate(N.url,{state:N.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var m=!1,b=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(h,100),function(){m=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),b!==null&&(b(),b=null)}}}function Rf(o){this._internalRoot=o}Qm.prototype.render=Rf.prototype.render=function(o){var u=this._internalRoot;if(u===null)throw Error(r(409));var h=u.current,m=ss();qb(h,m,o,u,null,null)},Qm.prototype.unmount=Rf.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var u=o.containerInfo;qb(o.current,2,null,o,null,null),Im(),u[Vt]=null}};function Qm(o){this._internalRoot=o}Qm.prototype.unstable_scheduleHydration=function(o){if(o){var u=rt();o={blockedOn:null,target:o,priority:u};for(var h=0;h<ku.length&&u!==0&&u<ku[h].priority;h++);ku.splice(h,0,o),h===0&&b_(o)}};var eE=n.version;if(eE!=="19.2.0")throw Error(r(527,eE,"19.2.0"));le.findDOMNode=function(o){var u=o._reactInternals;if(u===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=d(u),o=o!==null?p(o):null,o=o===null?null:o.stateNode,o};var hC={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $m=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$m.isDisabled&&$m.supportsFiber)try{Dr=$m.inject(hC),Kn=$m}catch{}}return C_.createRoot=function(o,u){if(!i(o))throw Error(r(299));var h=!1,m="",b=Ev,N=Cv,x=Hy;return u!=null&&(u.unstable_strictMode===!0&&(h=!0),u.identifierPrefix!==void 0&&(m=u.identifierPrefix),u.onUncaughtError!==void 0&&(b=u.onUncaughtError),u.onCaughtError!==void 0&&(N=u.onCaughtError),u.onRecoverableError!==void 0&&(x=u.onRecoverableError)),u=Bb(o,1,!1,null,null,h,m,null,b,N,x,pa),o[Vt]=u.current,i_(o),new Rf(u)},C_.hydrateRoot=function(o,u,h){if(!i(o))throw Error(r(299));var m=!1,b="",N=Ev,x=Cv,V=Hy,ie=null;return h!=null&&(h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(b=h.identifierPrefix),h.onUncaughtError!==void 0&&(N=h.onUncaughtError),h.onCaughtError!==void 0&&(x=h.onCaughtError),h.onRecoverableError!==void 0&&(V=h.onRecoverableError),h.formState!==void 0&&(ie=h.formState)),u=Bb(o,1,!0,u,h??null,m,b,ie,N,x,V,pa),u.context=zb(null),h=u.current,m=ss(),m=qi(m),b=fu(m),b.callback=null,to(h,b,m),h=m,u.current.lanes=h,zi(u,h),Bo(u),o[Vt]=u.current,i_(o),new Qm(u)},C_.version="19.2.0",C_}var WS;function ZP(){if(WS)return pC.exports;WS=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(n){console.error(n)}}return t(),pC.exports=XP(),pC.exports}var JP=ZP();const s3=k.createContext({});function o3(t){const n=k.useRef(null);return n.current===null&&(n.current=t()),n.current}const l3=typeof window<"u",Tk=l3?k.useLayoutEffect:k.useEffect,B1=k.createContext(null);function u3(t,n){t.indexOf(n)===-1&&t.push(n)}function c3(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}const Hc=(t,n,e)=>e>n?n:e<t?t:e;let d3=()=>{};const jc={},Sk=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function Ak(t){return typeof t=="object"&&t!==null}const Ik=t=>/^0[^.\s]+$/u.test(t);function h3(t){let n;return()=>(n===void 0&&(n=t()),n)}const tl=t=>t,eU=(t,n)=>e=>n(t(e)),L0=(...t)=>t.reduce(eU),_0=(t,n,e)=>{const r=n-t;return r===0?1:(e-t)/r};class f3{constructor(){this.subscriptions=[]}add(n){return u3(this.subscriptions,n),()=>c3(this.subscriptions,n)}notify(n,e,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](n,e,r);else for(let a=0;a<i;a++){const s=this.subscriptions[a];s&&s(n,e,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Fu=t=>t*1e3,Zo=t=>t/1e3;function Mk(t,n){return n?t*(1e3/n):0}const Ok=(t,n,e)=>(((1-3*e+3*n)*t+(3*e-6*n))*t+3*n)*t,tU=1e-7,nU=12;function rU(t,n,e,r,i){let a,s,l=0;do s=n+(e-n)/2,a=Ok(s,r,i)-t,a>0?e=s:n=s;while(Math.abs(a)>tU&&++l<nU);return s}function F0(t,n,e,r){if(t===n&&e===r)return tl;const i=a=>rU(a,0,1,t,e);return a=>a===0||a===1?a:Ok(i(a),n,r)}const kk=t=>n=>n<=.5?t(2*n)/2:(2-t(2*(1-n)))/2,Rk=t=>n=>1-t(1-n),Dk=F0(.33,1.53,.69,.99),p3=Rk(Dk),xk=kk(p3),Pk=t=>(t*=2)<1?.5*p3(t):.5*(2-Math.pow(2,-10*(t-1))),m3=t=>1-Math.sin(Math.acos(t)),Uk=Rk(m3),Lk=kk(m3),iU=F0(.42,0,1,1),aU=F0(0,0,.58,1),Fk=F0(.42,0,.58,1),sU=t=>Array.isArray(t)&&typeof t[0]!="number",Hk=t=>Array.isArray(t)&&typeof t[0]=="number",oU={linear:tl,easeIn:iU,easeInOut:Fk,easeOut:aU,circIn:m3,circInOut:Lk,circOut:Uk,backIn:p3,backInOut:xk,backOut:Dk,anticipate:Pk},lU=t=>typeof t=="string",KS=t=>{if(Hk(t)){d3(t.length===4);const[n,e,r,i]=t;return F0(n,e,r,i)}else if(lU(t))return oU[t];return t},tE=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function uU(t,n){let e=new Set,r=new Set,i=!1,a=!1;const s=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(p){s.has(p)&&(d.schedule(p),t()),p(l)}const d={schedule:(p,g=!1,_=!1)=>{const y=_&&i?e:r;return g&&s.add(p),y.has(p)||y.add(p),p},cancel:p=>{r.delete(p),s.delete(p)},process:p=>{if(l=p,i){a=!0;return}i=!0,[e,r]=[r,e],e.forEach(c),e.clear(),i=!1,a&&(a=!1,d.process(p))}};return d}const cU=40;function jk(t,n){let e=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>e=!0,s=tE.reduce((M,I)=>(M[I]=uU(a),M),{}),{setup:l,read:c,resolveKeyframes:d,preUpdate:p,update:g,preRender:_,render:y,postRender:C}=s,w=()=>{const M=jc.useManualTiming?i.timestamp:performance.now();e=!1,jc.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(M-i.timestamp,cU),1)),i.timestamp=M,i.isProcessing=!0,l.process(i),c.process(i),d.process(i),p.process(i),g.process(i),_.process(i),y.process(i),C.process(i),i.isProcessing=!1,e&&n&&(r=!1,t(w))},A=()=>{e=!0,r=!0,i.isProcessing||t(w)};return{schedule:tE.reduce((M,I)=>{const D=s[I];return M[I]=(P,H=!1,L=!1)=>(e||A(),D.schedule(P,H,L)),M},{}),cancel:M=>{for(let I=0;I<tE.length;I++)s[tE[I]].cancel(M)},state:i,steps:s}}const{schedule:Jr,cancel:mh,state:_a,steps:gC}=jk(typeof requestAnimationFrame<"u"?requestAnimationFrame:tl,!0);let kE;function dU(){kE=void 0}const Vs={now:()=>(kE===void 0&&Vs.set(_a.isProcessing||jc.useManualTiming?_a.timestamp:performance.now()),kE),set:t=>{kE=t,queueMicrotask(dU)}},Gk=t=>n=>typeof n=="string"&&n.startsWith(t),g3=Gk("--"),hU=Gk("var(--"),v3=t=>hU(t)?fU.test(t.split("/*")[0].trim()):!1,fU=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Tg={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},y0={...Tg,transform:t=>Hc(0,1,t)},nE={...Tg,default:1},W_=t=>Math.round(t*1e5)/1e5,_3=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function pU(t){return t==null}const mU=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,y3=(t,n)=>e=>!!(typeof e=="string"&&mU.test(e)&&e.startsWith(t)||n&&!pU(e)&&Object.prototype.hasOwnProperty.call(e,n)),Vk=(t,n,e)=>r=>{if(typeof r!="string")return r;const[i,a,s,l]=r.match(_3);return{[t]:parseFloat(i),[n]:parseFloat(a),[e]:parseFloat(s),alpha:l!==void 0?parseFloat(l):1}},gU=t=>Hc(0,255,t),vC={...Tg,transform:t=>Math.round(gU(t))},Jf={test:y3("rgb","red"),parse:Vk("red","green","blue"),transform:({red:t,green:n,blue:e,alpha:r=1})=>"rgba("+vC.transform(t)+", "+vC.transform(n)+", "+vC.transform(e)+", "+W_(y0.transform(r))+")"};function vU(t){let n="",e="",r="",i="";return t.length>5?(n=t.substring(1,3),e=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(n=t.substring(1,2),e=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),n+=n,e+=e,r+=r,i+=i),{red:parseInt(n,16),green:parseInt(e,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Rw={test:y3("#"),parse:vU,transform:Jf.transform},H0=t=>({test:n=>typeof n=="string"&&n.endsWith(t)&&n.split(" ").length===1,parse:parseFloat,transform:n=>`${n}${t}`}),eh=H0("deg"),Hu=H0("%"),Yt=H0("px"),_U=H0("vh"),yU=H0("vw"),YS={...Hu,parse:t=>Hu.parse(t)/100,transform:t=>Hu.transform(t*100)},ng={test:y3("hsl","hue"),parse:Vk("hue","saturation","lightness"),transform:({hue:t,saturation:n,lightness:e,alpha:r=1})=>"hsla("+Math.round(t)+", "+Hu.transform(W_(n))+", "+Hu.transform(W_(e))+", "+W_(y0.transform(r))+")"},Di={test:t=>Jf.test(t)||Rw.test(t)||ng.test(t),parse:t=>Jf.test(t)?Jf.parse(t):ng.test(t)?ng.parse(t):Rw.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Jf.transform(t):ng.transform(t),getAnimatableNone:t=>{const n=Di.parse(t);return n.alpha=0,Di.transform(n)}},bU=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function EU(t){return isNaN(t)&&typeof t=="string"&&(t.match(_3)?.length||0)+(t.match(bU)?.length||0)>0}const Bk="number",zk="color",CU="var",wU="var(",QS="${}",NU=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function b0(t){const n=t.toString(),e=[],r={color:[],number:[],var:[]},i=[];let a=0;const s=n.replace(NU,l=>(Di.test(l)?(r.color.push(a),i.push(zk),e.push(Di.parse(l))):l.startsWith(wU)?(r.var.push(a),i.push(CU),e.push(l)):(r.number.push(a),i.push(Bk),e.push(parseFloat(l))),++a,QS)).split(QS);return{values:e,split:s,indexes:r,types:i}}function qk(t){return b0(t).values}function Wk(t){const{split:n,types:e}=b0(t),r=n.length;return i=>{let a="";for(let s=0;s<r;s++)if(a+=n[s],i[s]!==void 0){const l=e[s];l===Bk?a+=W_(i[s]):l===zk?a+=Di.transform(i[s]):a+=i[s]}return a}}const TU=t=>typeof t=="number"?0:Di.test(t)?Di.getAnimatableNone(t):t;function SU(t){const n=qk(t);return Wk(t)(n.map(TU))}const gh={test:EU,parse:qk,createTransformer:Wk,getAnimatableNone:SU};function _C(t,n,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?t+(n-t)*6*e:e<1/2?n:e<2/3?t+(n-t)*(2/3-e)*6:t}function AU({hue:t,saturation:n,lightness:e,alpha:r}){t/=360,n/=100,e/=100;let i=0,a=0,s=0;if(!n)i=a=s=e;else{const l=e<.5?e*(1+n):e+n-e*n,c=2*e-l;i=_C(c,l,t+1/3),a=_C(c,l,t),s=_C(c,l,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(s*255),alpha:r}}function $E(t,n){return e=>e>0?n:t}const si=(t,n,e)=>t+(n-t)*e,yC=(t,n,e)=>{const r=t*t,i=e*(n*n-r)+r;return i<0?0:Math.sqrt(i)},IU=[Rw,Jf,ng],MU=t=>IU.find(n=>n.test(t));function $S(t){const n=MU(t);if(!n)return!1;let e=n.parse(t);return n===ng&&(e=AU(e)),e}const XS=(t,n)=>{const e=$S(t),r=$S(n);if(!e||!r)return $E(t,n);const i={...e};return a=>(i.red=yC(e.red,r.red,a),i.green=yC(e.green,r.green,a),i.blue=yC(e.blue,r.blue,a),i.alpha=si(e.alpha,r.alpha,a),Jf.transform(i))},Dw=new Set(["none","hidden"]);function OU(t,n){return Dw.has(t)?e=>e<=0?t:n:e=>e>=1?n:t}function kU(t,n){return e=>si(t,n,e)}function b3(t){return typeof t=="number"?kU:typeof t=="string"?v3(t)?$E:Di.test(t)?XS:xU:Array.isArray(t)?Kk:typeof t=="object"?Di.test(t)?XS:RU:$E}function Kk(t,n){const e=[...t],r=e.length,i=t.map((a,s)=>b3(a)(a,n[s]));return a=>{for(let s=0;s<r;s++)e[s]=i[s](a);return e}}function RU(t,n){const e={...t,...n},r={};for(const i in e)t[i]!==void 0&&n[i]!==void 0&&(r[i]=b3(t[i])(t[i],n[i]));return i=>{for(const a in r)e[a]=r[a](i);return e}}function DU(t,n){const e=[],r={color:0,var:0,number:0};for(let i=0;i<n.values.length;i++){const a=n.types[i],s=t.indexes[a][r[a]],l=t.values[s]??0;e[i]=l,r[a]++}return e}const xU=(t,n)=>{const e=gh.createTransformer(n),r=b0(t),i=b0(n);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Dw.has(t)&&!i.values.length||Dw.has(n)&&!r.values.length?OU(t,n):L0(Kk(DU(r,i),i.values),e):$E(t,n)};function Yk(t,n,e){return typeof t=="number"&&typeof n=="number"&&typeof e=="number"?si(t,n,e):b3(t)(t,n)}const PU=t=>{const n=({timestamp:e})=>t(e);return{start:(e=!0)=>Jr.update(n,e),stop:()=>mh(n),now:()=>_a.isProcessing?_a.timestamp:Vs.now()}},Qk=(t,n,e=10)=>{let r="";const i=Math.max(Math.round(n/e),2);for(let a=0;a<i;a++)r+=Math.round(t(a/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},XE=2e4;function E3(t){let n=0;const e=50;let r=t.next(n);for(;!r.done&&n<XE;)n+=e,r=t.next(n);return n>=XE?1/0:n}function UU(t,n=100,e){const r=e({...t,keyframes:[0,n]}),i=Math.min(E3(r),XE);return{type:"keyframes",ease:a=>r.next(i*a).value/n,duration:Zo(i)}}const LU=5;function $k(t,n,e){const r=Math.max(n-LU,0);return Mk(e-t(r),n-r)}const mi={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},bC=.001;function FU({duration:t=mi.duration,bounce:n=mi.bounce,velocity:e=mi.velocity,mass:r=mi.mass}){let i,a,s=1-n;s=Hc(mi.minDamping,mi.maxDamping,s),t=Hc(mi.minDuration,mi.maxDuration,Zo(t)),s<1?(i=d=>{const p=d*s,g=p*t,_=p-e,y=xw(d,s),C=Math.exp(-g);return bC-_/y*C},a=d=>{const p=d*s*t,g=p*e+e,_=Math.pow(s,2)*Math.pow(d,2)*t,y=Math.exp(-p),C=xw(Math.pow(d,2),s);return(-i(d)+bC>0?-1:1)*((g-_)*y)/C}):(i=d=>{const p=Math.exp(-d*t),g=(d-e)*t+1;return-bC+p*g},a=d=>{const p=Math.exp(-d*t),g=(e-d)*(t*t);return p*g});const l=5/t,c=jU(i,a,l);if(t=Fu(t),isNaN(c))return{stiffness:mi.stiffness,damping:mi.damping,duration:t};{const d=Math.pow(c,2)*r;return{stiffness:d,damping:s*2*Math.sqrt(r*d),duration:t}}}const HU=12;function jU(t,n,e){let r=e;for(let i=1;i<HU;i++)r=r-t(r)/n(r);return r}function xw(t,n){return t*Math.sqrt(1-n*n)}const GU=["duration","bounce"],VU=["stiffness","damping","mass"];function ZS(t,n){return n.some(e=>t[e]!==void 0)}function BU(t){let n={velocity:mi.velocity,stiffness:mi.stiffness,damping:mi.damping,mass:mi.mass,isResolvedFromDuration:!1,...t};if(!ZS(t,VU)&&ZS(t,GU))if(t.visualDuration){const e=t.visualDuration,r=2*Math.PI/(e*1.2),i=r*r,a=2*Hc(.05,1,1-(t.bounce||0))*Math.sqrt(i);n={...n,mass:mi.mass,stiffness:i,damping:a}}else{const e=FU(t);n={...n,...e,mass:mi.mass},n.isResolvedFromDuration=!0}return n}function ZE(t=mi.visualDuration,n=mi.bounce){const e=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:n}:t;let{restSpeed:r,restDelta:i}=e;const a=e.keyframes[0],s=e.keyframes[e.keyframes.length-1],l={done:!1,value:a},{stiffness:c,damping:d,mass:p,duration:g,velocity:_,isResolvedFromDuration:y}=BU({...e,velocity:-Zo(e.velocity||0)}),C=_||0,w=d/(2*Math.sqrt(c*p)),A=s-a,M=Zo(Math.sqrt(c/p)),I=Math.abs(A)<5;r||(r=I?mi.restSpeed.granular:mi.restSpeed.default),i||(i=I?mi.restDelta.granular:mi.restDelta.default);let D;if(w<1){const H=xw(M,w);D=L=>{const G=Math.exp(-w*M*L);return s-G*((C+w*M*A)/H*Math.sin(H*L)+A*Math.cos(H*L))}}else if(w===1)D=H=>s-Math.exp(-M*H)*(A+(C+M*A)*H);else{const H=M*Math.sqrt(w*w-1);D=L=>{const G=Math.exp(-w*M*L),Y=Math.min(H*L,300);return s-G*((C+w*M*A)*Math.sinh(Y)+H*A*Math.cosh(Y))/H}}const P={calculatedDuration:y&&g||null,next:H=>{const L=D(H);if(y)l.done=H>=g;else{let G=H===0?C:0;w<1&&(G=H===0?Fu(C):$k(D,H,L));const Y=Math.abs(G)<=r,F=Math.abs(s-L)<=i;l.done=Y&&F}return l.value=l.done?s:L,l},toString:()=>{const H=Math.min(E3(P),XE),L=Qk(G=>P.next(H*G).value,H,30);return H+"ms "+L},toTransition:()=>{}};return P}ZE.applyToOptions=t=>{const n=UU(t,100,ZE);return t.ease=n.ease,t.duration=Fu(n.duration),t.type="keyframes",t};function Pw({keyframes:t,velocity:n=0,power:e=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:s,min:l,max:c,restDelta:d=.5,restSpeed:p}){const g=t[0],_={done:!1,value:g},y=Y=>l!==void 0&&Y<l||c!==void 0&&Y>c,C=Y=>l===void 0?c:c===void 0||Math.abs(l-Y)<Math.abs(c-Y)?l:c;let w=e*n;const A=g+w,M=s===void 0?A:s(A);M!==A&&(w=M-g);const I=Y=>-w*Math.exp(-Y/r),D=Y=>M+I(Y),P=Y=>{const F=I(Y),ne=D(Y);_.done=Math.abs(F)<=d,_.value=_.done?M:ne};let H,L;const G=Y=>{y(_.value)&&(H=Y,L=ZE({keyframes:[_.value,C(_.value)],velocity:$k(D,Y,_.value),damping:i,stiffness:a,restDelta:d,restSpeed:p}))};return G(0),{calculatedDuration:null,next:Y=>{let F=!1;return!L&&H===void 0&&(F=!0,P(Y),G(Y)),H!==void 0&&Y>=H?L.next(Y-H):(!F&&P(Y),_)}}}function zU(t,n,e){const r=[],i=e||jc.mix||Yk,a=t.length-1;for(let s=0;s<a;s++){let l=i(t[s],t[s+1]);if(n){const c=Array.isArray(n)?n[s]||tl:n;l=L0(c,l)}r.push(l)}return r}function qU(t,n,{clamp:e=!0,ease:r,mixer:i}={}){const a=t.length;if(d3(a===n.length),a===1)return()=>n[0];if(a===2&&n[0]===n[1])return()=>n[1];const s=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),n=[...n].reverse());const l=zU(n,r,i),c=l.length,d=p=>{if(s&&p<t[0])return n[0];let g=0;if(c>1)for(;g<t.length-2&&!(p<t[g+1]);g++);const _=_0(t[g],t[g+1],p);return l[g](_)};return e?p=>d(Hc(t[0],t[a-1],p)):d}function WU(t,n){const e=t[t.length-1];for(let r=1;r<=n;r++){const i=_0(0,n,r);t.push(si(e,1,i))}}function KU(t){const n=[0];return WU(n,t.length-1),n}function YU(t,n){return t.map(e=>e*n)}function QU(t,n){return t.map(()=>n||Fk).splice(0,t.length-1)}function K_({duration:t=300,keyframes:n,times:e,ease:r="easeInOut"}){const i=sU(r)?r.map(KS):KS(r),a={done:!1,value:n[0]},s=YU(e&&e.length===n.length?e:KU(n),t),l=qU(s,n,{ease:Array.isArray(i)?i:QU(n,i)});return{calculatedDuration:t,next:c=>(a.value=l(c),a.done=c>=t,a)}}const $U=t=>t!==null;function C3(t,{repeat:n,repeatType:e="loop"},r,i=1){const a=t.filter($U),s=i<0||n&&e!=="loop"&&n%2===1?0:a.length-1;return!s||r===void 0?a[s]:r}const XU={decay:Pw,inertia:Pw,tween:K_,keyframes:K_,spring:ZE};function Xk(t){typeof t.type=="string"&&(t.type=XU[t.type])}class w3{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(n=>{this.resolve=n})}notifyFinished(){this.resolve()}then(n,e){return this.finished.then(n,e)}}const ZU=t=>t/100;class N3 extends w3{constructor(n){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:e}=this.options;e&&e.updatedAt!==Vs.now()&&this.tick(Vs.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=n,this.initAnimation(),this.play(),n.autoplay===!1&&this.pause()}initAnimation(){const{options:n}=this;Xk(n);const{type:e=K_,repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:s=0}=n;let{keyframes:l}=n;const c=e||K_;c!==K_&&typeof l[0]!="number"&&(this.mixKeyframes=L0(ZU,Yk(l[0],l[1])),l=[0,100]);const d=c({...n,keyframes:l});a==="mirror"&&(this.mirroredGenerator=c({...n,keyframes:[...l].reverse(),velocity:-s})),d.calculatedDuration===null&&(d.calculatedDuration=E3(d));const{calculatedDuration:p}=d;this.calculatedDuration=p,this.resolvedDuration=p+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=d}updateTime(n){const e=Math.round(n-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=e}tick(n,e=!1){const{generator:r,totalDuration:i,mixKeyframes:a,mirroredGenerator:s,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:d=0,keyframes:p,repeat:g,repeatType:_,repeatDelay:y,type:C,onUpdate:w,finalKeyframe:A}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,n):this.speed<0&&(this.startTime=Math.min(n-i/this.speed,this.startTime)),e?this.currentTime=n:this.updateTime(n);const M=this.currentTime-d*(this.playbackSpeed>=0?1:-1),I=this.playbackSpeed>=0?M<0:M>i;this.currentTime=Math.max(M,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let D=this.currentTime,P=r;if(g){const Y=Math.min(this.currentTime,i)/l;let F=Math.floor(Y),ne=Y%1;!ne&&Y>=1&&(ne=1),ne===1&&F--,F=Math.min(F,g+1),F%2&&(_==="reverse"?(ne=1-ne,y&&(ne-=y/l)):_==="mirror"&&(P=s)),D=Hc(0,1,ne)*l}const H=I?{done:!1,value:p[0]}:P.next(D);a&&(H.value=a(H.value));let{done:L}=H;!I&&c!==null&&(L=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const G=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&L);return G&&C!==Pw&&(H.value=C3(p,this.options,A,this.speed)),w&&w(H.value),G&&this.finish(),H}then(n,e){return this.finished.then(n,e)}get duration(){return Zo(this.calculatedDuration)}get iterationDuration(){const{delay:n=0}=this.options||{};return this.duration+Zo(n)}get time(){return Zo(this.currentTime)}set time(n){n=Fu(n),this.currentTime=n,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=n:this.driver&&(this.startTime=this.driver.now()-n/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(n){this.updateTime(Vs.now());const e=this.playbackSpeed!==n;this.playbackSpeed=n,e&&(this.time=Zo(this.currentTime))}play(){if(this.isStopped)return;const{driver:n=PU,startTime:e}=this.options;this.driver||(this.driver=n(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=e??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Vs.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(n){return this.startTime=0,this.tick(n,!0)}attachTimeline(n){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),n.observe(this)}}function JU(t){for(let n=1;n<t.length;n++)t[n]??(t[n]=t[n-1])}const ep=t=>t*180/Math.PI,Uw=t=>{const n=ep(Math.atan2(t[1],t[0]));return Lw(n)},eL={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Uw,rotateZ:Uw,skewX:t=>ep(Math.atan(t[1])),skewY:t=>ep(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Lw=t=>(t=t%360,t<0&&(t+=360),t),JS=Uw,eA=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),tA=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),tL={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:eA,scaleY:tA,scale:t=>(eA(t)+tA(t))/2,rotateX:t=>Lw(ep(Math.atan2(t[6],t[5]))),rotateY:t=>Lw(ep(Math.atan2(-t[2],t[0]))),rotateZ:JS,rotate:JS,skewX:t=>ep(Math.atan(t[4])),skewY:t=>ep(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Fw(t){return t.includes("scale")?1:0}function Hw(t,n){if(!t||t==="none")return Fw(n);const e=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(e)r=tL,i=e;else{const l=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=eL,i=l}if(!i)return Fw(n);const a=r[n],s=i[1].split(",").map(rL);return typeof a=="function"?a(s):s[a]}const nL=(t,n)=>{const{transform:e="none"}=getComputedStyle(t);return Hw(e,n)};function rL(t){return parseFloat(t.trim())}const Sg=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ag=new Set(Sg),nA=t=>t===Tg||t===Yt,iL=new Set(["x","y","z"]),aL=Sg.filter(t=>!iL.has(t));function sL(t){const n=[];return aL.forEach(e=>{const r=t.getValue(e);r!==void 0&&(n.push([e,r.get()]),r.set(e.startsWith("scale")?1:0))}),n}const up={width:({x:t},{paddingLeft:n="0",paddingRight:e="0"})=>t.max-t.min-parseFloat(n)-parseFloat(e),height:({y:t},{paddingTop:n="0",paddingBottom:e="0"})=>t.max-t.min-parseFloat(n)-parseFloat(e),top:(t,{top:n})=>parseFloat(n),left:(t,{left:n})=>parseFloat(n),bottom:({y:t},{top:n})=>parseFloat(n)+(t.max-t.min),right:({x:t},{left:n})=>parseFloat(n)+(t.max-t.min),x:(t,{transform:n})=>Hw(n,"x"),y:(t,{transform:n})=>Hw(n,"y")};up.translateX=up.x;up.translateY=up.y;const cp=new Set;let jw=!1,Gw=!1,Vw=!1;function Zk(){if(Gw){const t=Array.from(cp).filter(r=>r.needsMeasurement),n=new Set(t.map(r=>r.element)),e=new Map;n.forEach(r=>{const i=sL(r);i.length&&(e.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),n.forEach(r=>{r.render();const i=e.get(r);i&&i.forEach(([a,s])=>{r.getValue(a)?.set(s)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Gw=!1,jw=!1,cp.forEach(t=>t.complete(Vw)),cp.clear()}function Jk(){cp.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Gw=!0)})}function oL(){Vw=!0,Jk(),Zk(),Vw=!1}class T3{constructor(n,e,r,i,a,s=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...n],this.onComplete=e,this.name=r,this.motionValue=i,this.element=a,this.isAsync=s}scheduleResolve(){this.state="scheduled",this.isAsync?(cp.add(this),jw||(jw=!0,Jr.read(Jk),Jr.resolveKeyframes(Zk))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:n,name:e,element:r,motionValue:i}=this;if(n[0]===null){const a=i?.get(),s=n[n.length-1];if(a!==void 0)n[0]=a;else if(r&&e){const l=r.readValue(e,s);l!=null&&(n[0]=l)}n[0]===void 0&&(n[0]=s),i&&a===void 0&&i.set(n[0])}JU(n)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(n=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,n),cp.delete(this)}cancel(){this.state==="scheduled"&&(cp.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const lL=t=>t.startsWith("--");function uL(t,n,e){lL(n)?t.style.setProperty(n,e):t.style[n]=e}const cL=h3(()=>window.ScrollTimeline!==void 0),dL={};function hL(t,n){const e=h3(t);return()=>dL[n]??e()}const e4=hL(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),H_=([t,n,e,r])=>`cubic-bezier(${t}, ${n}, ${e}, ${r})`,rA={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:H_([0,.65,.55,1]),circOut:H_([.55,0,1,.45]),backIn:H_([.31,.01,.66,-.59]),backOut:H_([.33,1.53,.69,.99])};function t4(t,n){if(t)return typeof t=="function"?e4()?Qk(t,n):"ease-out":Hk(t)?H_(t):Array.isArray(t)?t.map(e=>t4(e,n)||rA.easeOut):rA[t]}function fL(t,n,e,{delay:r=0,duration:i=300,repeat:a=0,repeatType:s="loop",ease:l="easeOut",times:c}={},d=void 0){const p={[n]:e};c&&(p.offset=c);const g=t4(l,i);Array.isArray(g)&&(p.easing=g);const _={delay:r,duration:i,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:a+1,direction:s==="reverse"?"alternate":"normal"};return d&&(_.pseudoElement=d),t.animate(p,_)}function n4(t){return typeof t=="function"&&"applyToOptions"in t}function pL({type:t,...n}){return n4(t)&&e4()?t.applyToOptions(n):(n.duration??(n.duration=300),n.ease??(n.ease="easeOut"),n)}class mL extends w3{constructor(n){if(super(),this.finishedTime=null,this.isStopped=!1,!n)return;const{element:e,name:r,keyframes:i,pseudoElement:a,allowFlatten:s=!1,finalKeyframe:l,onComplete:c}=n;this.isPseudoElement=!!a,this.allowFlatten=s,this.options=n,d3(typeof n.type!="string");const d=pL(n);this.animation=fL(e,r,i,d,a),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const p=C3(i,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(p):uL(e,r,p),this.animation.cancel()}c?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:n}=this;n==="idle"||n==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const n=this.animation.effect?.getComputedTiming?.().duration||0;return Zo(Number(n))}get iterationDuration(){const{delay:n=0}=this.options||{};return this.duration+Zo(n)}get time(){return Zo(Number(this.animation.currentTime)||0)}set time(n){this.finishedTime=null,this.animation.currentTime=Fu(n)}get speed(){return this.animation.playbackRate}set speed(n){n<0&&(this.finishedTime=null),this.animation.playbackRate=n}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(n){this.animation.startTime=n}attachTimeline({timeline:n,observe:e}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,n&&cL()?(this.animation.timeline=n,tl):e(this)}}const r4={anticipate:Pk,backInOut:xk,circInOut:Lk};function gL(t){return t in r4}function vL(t){typeof t.ease=="string"&&gL(t.ease)&&(t.ease=r4[t.ease])}const iA=10;class _L extends mL{constructor(n){vL(n),Xk(n),super(n),n.startTime&&(this.startTime=n.startTime),this.options=n}updateMotionValue(n){const{motionValue:e,onUpdate:r,onComplete:i,element:a,...s}=this.options;if(!e)return;if(n!==void 0){e.set(n);return}const l=new N3({...s,autoplay:!1}),c=Fu(this.finishedTime??this.time);e.setWithVelocity(l.sample(c-iA).value,l.sample(c).value,iA),l.stop()}}const aA=(t,n)=>n==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(gh.test(t)||t==="0")&&!t.startsWith("url("));function yL(t){const n=t[0];if(t.length===1)return!0;for(let e=0;e<t.length;e++)if(t[e]!==n)return!0}function bL(t,n,e,r){const i=t[0];if(i===null)return!1;if(n==="display"||n==="visibility")return!0;const a=t[t.length-1],s=aA(i,n),l=aA(a,n);return!s||!l?!1:yL(t)||(e==="spring"||n4(e))&&r}function Bw(t){t.duration=0,t.type="keyframes"}const EL=new Set(["opacity","clipPath","filter","transform"]),CL=h3(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function wL(t){const{motionValue:n,name:e,repeatDelay:r,repeatType:i,damping:a,type:s}=t;if(!(n?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return CL()&&e&&EL.has(e)&&(e!=="transform"||!c)&&!l&&!r&&i!=="mirror"&&a!==0&&s!=="inertia"}const NL=40;class TL extends w3{constructor({autoplay:n=!0,delay:e=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:s="loop",keyframes:l,name:c,motionValue:d,element:p,...g}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Vs.now();const _={autoplay:n,delay:e,type:r,repeat:i,repeatDelay:a,repeatType:s,name:c,motionValue:d,element:p,...g},y=p?.KeyframeResolver||T3;this.keyframeResolver=new y(l,(C,w,A)=>this.onKeyframesResolved(C,w,_,!A),c,d,p),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(n,e,r,i){this.keyframeResolver=void 0;const{name:a,type:s,velocity:l,delay:c,isHandoff:d,onUpdate:p}=r;this.resolvedAt=Vs.now(),bL(n,a,s,l)||((jc.instantAnimations||!c)&&p?.(C3(n,r,e)),n[0]=n[n.length-1],Bw(r),r.repeat=0);const g={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>NL?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:e,...r,keyframes:n},_=!d&&wL(g)?new _L({...g,element:g.motionValue.owner.current}):new N3(g);_.finished.then(()=>this.notifyFinished()).catch(tl),this.pendingTimeline&&(this.stopTimeline=_.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=_}get finished(){return this._animation?this.animation.finished:this._finished}then(n,e){return this.finished.finally(n).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),oL()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(n){this.animation.time=n}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(n){this.animation.speed=n}get startTime(){return this.animation.startTime}attachTimeline(n){return this._animation?this.stopTimeline=this.animation.attachTimeline(n):this.pendingTimeline=n,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const SL=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function AL(t){const n=SL.exec(t);if(!n)return[,];const[,e,r,i]=n;return[`--${e??r}`,i]}function i4(t,n,e=1){const[r,i]=AL(t);if(!r)return;const a=window.getComputedStyle(n).getPropertyValue(r);if(a){const s=a.trim();return Sk(s)?parseFloat(s):s}return v3(i)?i4(i,n,e+1):i}function S3(t,n){return t?.[n]??t?.default??t}const a4=new Set(["width","height","top","left","right","bottom",...Sg]),IL={test:t=>t==="auto",parse:t=>t},s4=t=>n=>n.test(t),o4=[Tg,Yt,Hu,eh,yU,_U,IL],sA=t=>o4.find(s4(t));function ML(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Ik(t):!0}const OL=new Set(["brightness","contrast","saturate","opacity"]);function kL(t){const[n,e]=t.slice(0,-1).split("(");if(n==="drop-shadow")return t;const[r]=e.match(_3)||[];if(!r)return t;const i=e.replace(r,"");let a=OL.has(n)?1:0;return r!==e&&(a*=100),n+"("+a+i+")"}const RL=/\b([a-z-]*)\(.*?\)/gu,zw={...gh,getAnimatableNone:t=>{const n=t.match(RL);return n?n.map(kL).join(" "):t}},oA={...Tg,transform:Math.round},DL={rotate:eh,rotateX:eh,rotateY:eh,rotateZ:eh,scale:nE,scaleX:nE,scaleY:nE,scaleZ:nE,skew:eh,skewX:eh,skewY:eh,distance:Yt,translateX:Yt,translateY:Yt,translateZ:Yt,x:Yt,y:Yt,z:Yt,perspective:Yt,transformPerspective:Yt,opacity:y0,originX:YS,originY:YS,originZ:Yt},A3={borderWidth:Yt,borderTopWidth:Yt,borderRightWidth:Yt,borderBottomWidth:Yt,borderLeftWidth:Yt,borderRadius:Yt,radius:Yt,borderTopLeftRadius:Yt,borderTopRightRadius:Yt,borderBottomRightRadius:Yt,borderBottomLeftRadius:Yt,width:Yt,maxWidth:Yt,height:Yt,maxHeight:Yt,top:Yt,right:Yt,bottom:Yt,left:Yt,padding:Yt,paddingTop:Yt,paddingRight:Yt,paddingBottom:Yt,paddingLeft:Yt,margin:Yt,marginTop:Yt,marginRight:Yt,marginBottom:Yt,marginLeft:Yt,backgroundPositionX:Yt,backgroundPositionY:Yt,...DL,zIndex:oA,fillOpacity:y0,strokeOpacity:y0,numOctaves:oA},xL={...A3,color:Di,backgroundColor:Di,outlineColor:Di,fill:Di,stroke:Di,borderColor:Di,borderTopColor:Di,borderRightColor:Di,borderBottomColor:Di,borderLeftColor:Di,filter:zw,WebkitFilter:zw},l4=t=>xL[t];function u4(t,n){let e=l4(t);return e!==zw&&(e=gh),e.getAnimatableNone?e.getAnimatableNone(n):void 0}const PL=new Set(["auto","none","0"]);function UL(t,n,e){let r=0,i;for(;r<t.length&&!i;){const a=t[r];typeof a=="string"&&!PL.has(a)&&b0(a).values.length&&(i=t[r]),r++}if(i&&e)for(const a of n)t[a]=u4(e,i)}class LL extends T3{constructor(n,e,r,i,a){super(n,e,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:n,element:e,name:r}=this;if(!e||!e.current)return;super.readKeyframes();for(let c=0;c<n.length;c++){let d=n[c];if(typeof d=="string"&&(d=d.trim(),v3(d))){const p=i4(d,e.current);p!==void 0&&(n[c]=p),c===n.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!a4.has(r)||n.length!==2)return;const[i,a]=n,s=sA(i),l=sA(a);if(s!==l)if(nA(s)&&nA(l))for(let c=0;c<n.length;c++){const d=n[c];typeof d=="string"&&(n[c]=parseFloat(d))}else up[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:n,name:e}=this,r=[];for(let i=0;i<n.length;i++)(n[i]===null||ML(n[i]))&&r.push(i);r.length&&UL(n,r,e)}measureInitialState(){const{element:n,unresolvedKeyframes:e,name:r}=this;if(!n||!n.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=up[r](n.measureViewportBox(),window.getComputedStyle(n.current)),e[0]=this.measuredOrigin;const i=e[e.length-1];i!==void 0&&n.getValue(r,i).jump(i,!1)}measureEndState(){const{element:n,name:e,unresolvedKeyframes:r}=this;if(!n||!n.current)return;const i=n.getValue(e);i&&i.jump(this.measuredOrigin,!1);const a=r.length-1,s=r[a];r[a]=up[e](n.measureViewportBox(),window.getComputedStyle(n.current)),s!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=s),this.removedTransforms?.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function FL(t,n,e){if(t instanceof EventTarget)return[t];if(typeof t=="string"){const i=document.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const c4=(t,n)=>n&&typeof t=="number"?n.transform(t):t;function d4(t){return Ak(t)&&"offsetHeight"in t}const lA=30,HL=t=>!isNaN(parseFloat(t));class jL{constructor(n,e={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=Vs.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(n),this.owner=e.owner}setCurrent(n){this.current=n,this.updatedAt=Vs.now(),this.canTrackVelocity===null&&n!==void 0&&(this.canTrackVelocity=HL(this.current))}setPrevFrameValue(n=this.current){this.prevFrameValue=n,this.prevUpdatedAt=this.updatedAt}onChange(n){return this.on("change",n)}on(n,e){this.events[n]||(this.events[n]=new f3);const r=this.events[n].add(e);return n==="change"?()=>{r(),Jr.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const n in this.events)this.events[n].clear()}attach(n,e){this.passiveEffect=n,this.stopPassiveEffect=e}set(n){this.passiveEffect?this.passiveEffect(n,this.updateAndNotify):this.updateAndNotify(n)}setWithVelocity(n,e,r){this.set(e),this.prev=void 0,this.prevFrameValue=n,this.prevUpdatedAt=this.updatedAt-r}jump(n,e=!0){this.updateAndNotify(n),this.prev=n,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(n){this.dependents||(this.dependents=new Set),this.dependents.add(n)}removeDependent(n){this.dependents&&this.dependents.delete(n)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const n=Vs.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||n-this.updatedAt>lA)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,lA);return Mk(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(n){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=n(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function pg(t,n){return new jL(t,n)}const{schedule:I3}=jk(queueMicrotask,!1),Hl={x:!1,y:!1};function h4(){return Hl.x||Hl.y}function GL(t){return t==="x"||t==="y"?Hl[t]?null:(Hl[t]=!0,()=>{Hl[t]=!1}):Hl.x||Hl.y?null:(Hl.x=Hl.y=!0,()=>{Hl.x=Hl.y=!1})}function f4(t,n){const e=FL(t),r=new AbortController,i={passive:!0,...n,signal:r.signal};return[e,i,()=>r.abort()]}function uA(t){return!(t.pointerType==="touch"||h4())}function VL(t,n,e={}){const[r,i,a]=f4(t,e),s=l=>{if(!uA(l))return;const{target:c}=l,d=n(c,l);if(typeof d!="function"||!c)return;const p=g=>{uA(g)&&(d(g),c.removeEventListener("pointerleave",p))};c.addEventListener("pointerleave",p,i)};return r.forEach(l=>{l.addEventListener("pointerenter",s,i)}),a}const p4=(t,n)=>n?t===n?!0:p4(t,n.parentElement):!1,M3=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,BL=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function zL(t){return BL.has(t.tagName)||t.tabIndex!==-1}const RE=new WeakSet;function cA(t){return n=>{n.key==="Enter"&&t(n)}}function EC(t,n){t.dispatchEvent(new PointerEvent("pointer"+n,{isPrimary:!0,bubbles:!0}))}const qL=(t,n)=>{const e=t.currentTarget;if(!e)return;const r=cA(()=>{if(RE.has(e))return;EC(e,"down");const i=cA(()=>{EC(e,"up")}),a=()=>EC(e,"cancel");e.addEventListener("keyup",i,n),e.addEventListener("blur",a,n)});e.addEventListener("keydown",r,n),e.addEventListener("blur",()=>e.removeEventListener("keydown",r),n)};function dA(t){return M3(t)&&!h4()}function WL(t,n,e={}){const[r,i,a]=f4(t,e),s=l=>{const c=l.currentTarget;if(!dA(l))return;RE.add(c);const d=n(c,l),p=(y,C)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",_),RE.has(c)&&RE.delete(c),dA(y)&&typeof d=="function"&&d(y,{success:C})},g=y=>{p(y,c===window||c===document||e.useGlobalTarget||p4(c,y.target))},_=y=>{p(y,!1)};window.addEventListener("pointerup",g,i),window.addEventListener("pointercancel",_,i)};return r.forEach(l=>{(e.useGlobalTarget?window:l).addEventListener("pointerdown",s,i),d4(l)&&(l.addEventListener("focus",c=>qL(c,i)),!zL(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),a}function m4(t){return Ak(t)&&"ownerSVGElement"in t}function KL(t){return m4(t)&&t.tagName==="svg"}const Ba=t=>!!(t&&t.getVelocity),YL=[...o4,Di,gh],QL=t=>YL.find(s4(t)),O3=k.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function hA(t,n){if(typeof t=="function")return t(n);t!=null&&(t.current=n)}function $L(...t){return n=>{let e=!1;const r=t.map(i=>{const a=hA(i,n);return!e&&typeof a=="function"&&(e=!0),a});if(e)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():hA(t[i],null)}}}}function XL(...t){return k.useCallback($L(...t),t)}class ZL extends k.Component{getSnapshotBeforeUpdate(n){const e=this.props.childRef.current;if(e&&n.isPresent&&!this.props.isPresent){const r=e.offsetParent,i=d4(r)&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=e.offsetHeight||0,a.width=e.offsetWidth||0,a.top=e.offsetTop,a.left=e.offsetLeft,a.right=i-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function JL({children:t,isPresent:n,anchorX:e,root:r}){const i=k.useId(),a=k.useRef(null),s=k.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=k.useContext(O3),c=XL(a,t?.ref);return k.useInsertionEffect(()=>{const{width:d,height:p,top:g,left:_,right:y}=s.current;if(n||!a.current||!d||!p)return;const C=e==="left"?`left: ${_}`:`right: ${y}`;a.current.dataset.motionPopId=i;const w=document.createElement("style");l&&(w.nonce=l);const A=r??document.head;return A.appendChild(w),w.sheet&&w.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${p}px !important;
            ${C}px !important;
            top: ${g}px !important;
          }
        `),()=>{A.contains(w)&&A.removeChild(w)}},[n]),oe.jsx(ZL,{isPresent:n,childRef:a,sizeRef:s,children:k.cloneElement(t,{ref:c})})}const e5=({children:t,initial:n,isPresent:e,onExitComplete:r,custom:i,presenceAffectsLayout:a,mode:s,anchorX:l,root:c})=>{const d=o3(t5),p=k.useId();let g=!0,_=k.useMemo(()=>(g=!1,{id:p,initial:n,isPresent:e,custom:i,onExitComplete:y=>{d.set(y,!0);for(const C of d.values())if(!C)return;r&&r()},register:y=>(d.set(y,!1),()=>d.delete(y))}),[e,d,r]);return a&&g&&(_={..._}),k.useMemo(()=>{d.forEach((y,C)=>d.set(C,!1))},[e]),k.useEffect(()=>{!e&&!d.size&&r&&r()},[e]),s==="popLayout"&&(t=oe.jsx(JL,{isPresent:e,anchorX:l,root:c,children:t})),oe.jsx(B1.Provider,{value:_,children:t})};function t5(){return new Map}function g4(t=!0){const n=k.useContext(B1);if(n===null)return[!0,null];const{isPresent:e,onExitComplete:r,register:i}=n,a=k.useId();k.useEffect(()=>{if(t)return i(a)},[t]);const s=k.useCallback(()=>t&&r&&r(a),[a,r,t]);return!e&&r?[!1,s]:[!0]}const rE=t=>t.key||"";function fA(t){const n=[];return k.Children.forEach(t,e=>{k.isValidElement(e)&&n.push(e)}),n}const v4=({children:t,custom:n,initial:e=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:a="sync",propagate:s=!1,anchorX:l="left",root:c})=>{const[d,p]=g4(s),g=k.useMemo(()=>fA(t),[t]),_=s&&!d?[]:g.map(rE),y=k.useRef(!0),C=k.useRef(g),w=o3(()=>new Map),[A,M]=k.useState(g),[I,D]=k.useState(g);Tk(()=>{y.current=!1,C.current=g;for(let L=0;L<I.length;L++){const G=rE(I[L]);_.includes(G)?w.delete(G):w.get(G)!==!0&&w.set(G,!1)}},[I,_.length,_.join("-")]);const P=[];if(g!==A){let L=[...g];for(let G=0;G<I.length;G++){const Y=I[G],F=rE(Y);_.includes(F)||(L.splice(G,0,Y),P.push(Y))}return a==="wait"&&P.length&&(L=P),D(fA(L)),M(g),null}const{forceRender:H}=k.useContext(s3);return oe.jsx(oe.Fragment,{children:I.map(L=>{const G=rE(L),Y=s&&!d?!1:g===I||_.includes(G),F=()=>{if(w.has(G))w.set(G,!0);else return;let ne=!0;w.forEach(J=>{J||(ne=!1)}),ne&&(H?.(),D(C.current),s&&p?.(),r&&r())};return oe.jsx(e5,{isPresent:Y,initial:!y.current||e?void 0:!1,custom:n,presenceAffectsLayout:i,mode:a,root:c,onExitComplete:Y?void 0:F,anchorX:l,children:L},G)})})},_4=k.createContext({strict:!1}),pA={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},mg={};for(const t in pA)mg[t]={isEnabled:n=>pA[t].some(e=>!!n[e])};function n5(t){for(const n in t)mg[n]={...mg[n],...t[n]}}const r5=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function JE(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||r5.has(t)}let y4=t=>!JE(t);function i5(t){typeof t=="function"&&(y4=n=>n.startsWith("on")?!JE(n):t(n))}try{i5(require("@emotion/is-prop-valid").default)}catch{}function a5(t,n,e){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(y4(i)||e===!0&&JE(i)||!n&&!JE(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const z1=k.createContext({});function q1(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function E0(t){return typeof t=="string"||Array.isArray(t)}const k3=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],R3=["initial",...k3];function W1(t){return q1(t.animate)||R3.some(n=>E0(t[n]))}function b4(t){return!!(W1(t)||t.variants)}function s5(t,n){if(W1(t)){const{initial:e,animate:r}=t;return{initial:e===!1||E0(e)?e:void 0,animate:E0(r)?r:void 0}}return t.inherit!==!1?n:{}}function o5(t){const{initial:n,animate:e}=s5(t,k.useContext(z1));return k.useMemo(()=>({initial:n,animate:e}),[mA(n),mA(e)])}function mA(t){return Array.isArray(t)?t.join(" "):t}const C0={};function l5(t){for(const n in t)C0[n]=t[n],g3(n)&&(C0[n].isCSSVariable=!0)}function E4(t,{layout:n,layoutId:e}){return Ag.has(t)||t.startsWith("origin")||(n||e!==void 0)&&(!!C0[t]||t==="opacity")}const u5={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},c5=Sg.length;function d5(t,n,e){let r="",i=!0;for(let a=0;a<c5;a++){const s=Sg[a],l=t[s];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(s.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||e){const d=c4(l,A3[s]);if(!c){i=!1;const p=u5[s]||s;r+=`${p}(${d}) `}e&&(n[s]=d)}}return r=r.trim(),e?r=e(n,i?"":r):i&&(r="none"),r}function D3(t,n,e){const{style:r,vars:i,transformOrigin:a}=t;let s=!1,l=!1;for(const c in n){const d=n[c];if(Ag.has(c)){s=!0;continue}else if(g3(c)){i[c]=d;continue}else{const p=c4(d,A3[c]);c.startsWith("origin")?(l=!0,a[c]=p):r[c]=p}}if(n.transform||(s||e?r.transform=d5(n,t.transform,e):r.transform&&(r.transform="none")),l){const{originX:c="50%",originY:d="50%",originZ:p=0}=a;r.transformOrigin=`${c} ${d} ${p}`}}const x3=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function C4(t,n,e){for(const r in n)!Ba(n[r])&&!E4(r,e)&&(t[r]=n[r])}function h5({transformTemplate:t},n){return k.useMemo(()=>{const e=x3();return D3(e,n,t),Object.assign({},e.vars,e.style)},[n])}function f5(t,n){const e=t.style||{},r={};return C4(r,e,t),Object.assign(r,h5(t,n)),r}function p5(t,n){const e={},r=f5(t,n);return t.drag&&t.dragListener!==!1&&(e.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(e.tabIndex=0),e.style=r,e}const m5={offset:"stroke-dashoffset",array:"stroke-dasharray"},g5={offset:"strokeDashoffset",array:"strokeDasharray"};function v5(t,n,e=1,r=0,i=!0){t.pathLength=1;const a=i?m5:g5;t[a.offset]=Yt.transform(-r);const s=Yt.transform(n),l=Yt.transform(e);t[a.array]=`${s} ${l}`}function w4(t,{attrX:n,attrY:e,attrScale:r,pathLength:i,pathSpacing:a=1,pathOffset:s=0,...l},c,d,p){if(D3(t,l,d),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:g,style:_}=t;g.transform&&(_.transform=g.transform,delete g.transform),(_.transform||g.transformOrigin)&&(_.transformOrigin=g.transformOrigin??"50% 50%",delete g.transformOrigin),_.transform&&(_.transformBox=p?.transformBox??"fill-box",delete g.transformBox),n!==void 0&&(g.x=n),e!==void 0&&(g.y=e),r!==void 0&&(g.scale=r),i!==void 0&&v5(g,i,a,s,!1)}const N4=()=>({...x3(),attrs:{}}),T4=t=>typeof t=="string"&&t.toLowerCase()==="svg";function _5(t,n,e,r){const i=k.useMemo(()=>{const a=N4();return w4(a,n,T4(r),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[n]);if(t.style){const a={};C4(a,t.style,t),i.style={...a,...i.style}}return i}const y5=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function P3(t){return typeof t!="string"||t.includes("-")?!1:!!(y5.indexOf(t)>-1||/[A-Z]/u.test(t))}function b5(t,n,e,{latestValues:r},i,a=!1){const s=(P3(t)?_5:p5)(n,r,i,t),l=a5(n,typeof t=="string",a),c=t!==k.Fragment?{...l,...s,ref:e}:{},{children:d}=n,p=k.useMemo(()=>Ba(d)?d.get():d,[d]);return k.createElement(t,{...c,children:p})}function gA(t){const n=[{},{}];return t?.values.forEach((e,r)=>{n[0][r]=e.get(),n[1][r]=e.getVelocity()}),n}function U3(t,n,e,r){if(typeof n=="function"){const[i,a]=gA(r);n=n(e!==void 0?e:t.custom,i,a)}if(typeof n=="string"&&(n=t.variants&&t.variants[n]),typeof n=="function"){const[i,a]=gA(r);n=n(e!==void 0?e:t.custom,i,a)}return n}function DE(t){return Ba(t)?t.get():t}function E5({scrapeMotionValuesFromProps:t,createRenderState:n},e,r,i){return{latestValues:C5(e,r,i,t),renderState:n()}}function C5(t,n,e,r){const i={},a=r(t,{});for(const _ in a)i[_]=DE(a[_]);let{initial:s,animate:l}=t;const c=W1(t),d=b4(t);n&&d&&!c&&t.inherit!==!1&&(s===void 0&&(s=n.initial),l===void 0&&(l=n.animate));let p=e?e.initial===!1:!1;p=p||s===!1;const g=p?l:s;if(g&&typeof g!="boolean"&&!q1(g)){const _=Array.isArray(g)?g:[g];for(let y=0;y<_.length;y++){const C=U3(t,_[y]);if(C){const{transitionEnd:w,transition:A,...M}=C;for(const I in M){let D=M[I];if(Array.isArray(D)){const P=p?D.length-1:0;D=D[P]}D!==null&&(i[I]=D)}for(const I in w)i[I]=w[I]}}}return i}const S4=t=>(n,e)=>{const r=k.useContext(z1),i=k.useContext(B1),a=()=>E5(t,n,r,i);return e?a():o3(a)};function L3(t,n,e){const{style:r}=t,i={};for(const a in r)(Ba(r[a])||n.style&&Ba(n.style[a])||E4(a,t)||e?.getValue(a)?.liveStyle!==void 0)&&(i[a]=r[a]);return i}const w5=S4({scrapeMotionValuesFromProps:L3,createRenderState:x3});function A4(t,n,e){const r=L3(t,n,e);for(const i in t)if(Ba(t[i])||Ba(n[i])){const a=Sg.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=t[i]}return r}const N5=S4({scrapeMotionValuesFromProps:A4,createRenderState:N4}),T5=Symbol.for("motionComponentSymbol");function rg(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function S5(t,n,e){return k.useCallback(r=>{r&&t.onMount&&t.onMount(r),n&&(r?n.mount(r):n.unmount()),e&&(typeof e=="function"?e(r):rg(e)&&(e.current=r))},[n])}const F3=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),A5="framerAppearId",I4="data-"+F3(A5),M4=k.createContext({});function I5(t,n,e,r,i){const{visualElement:a}=k.useContext(z1),s=k.useContext(_4),l=k.useContext(B1),c=k.useContext(O3).reducedMotion,d=k.useRef(null);r=r||s.renderer,!d.current&&r&&(d.current=r(t,{visualState:n,parent:a,props:e,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const p=d.current,g=k.useContext(M4);p&&!p.projection&&i&&(p.type==="html"||p.type==="svg")&&M5(d.current,e,i,g);const _=k.useRef(!1);k.useInsertionEffect(()=>{p&&_.current&&p.update(e,l)});const y=e[I4],C=k.useRef(!!y&&!window.MotionHandoffIsComplete?.(y)&&window.MotionHasOptimisedAnimation?.(y));return Tk(()=>{p&&(_.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),p.scheduleRenderMicrotask(),C.current&&p.animationState&&p.animationState.animateChanges())}),k.useEffect(()=>{p&&(!C.current&&p.animationState&&p.animationState.animateChanges(),C.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(y)}),C.current=!1),p.enteringChildren=void 0)}),p}function M5(t,n,e,r){const{layoutId:i,layout:a,drag:s,dragConstraints:l,layoutScroll:c,layoutRoot:d,layoutCrossfade:p}=n;t.projection=new e(t.latestValues,n["data-framer-portal-id"]?void 0:O4(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!s||l&&rg(l),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:p,layoutScroll:c,layoutRoot:d})}function O4(t){if(t)return t.options.allowProjection!==!1?t.projection:O4(t.parent)}function CC(t,{forwardMotionProps:n=!1}={},e,r){e&&n5(e);const i=P3(t)?N5:w5;function a(l,c){let d;const p={...k.useContext(O3),...l,layoutId:O5(l)},{isStatic:g}=p,_=o5(l),y=i(l,g);if(!g&&l3){k5();const C=R5(p);d=C.MeasureLayout,_.visualElement=I5(t,y,p,r,C.ProjectionNode)}return oe.jsxs(z1.Provider,{value:_,children:[d&&_.visualElement?oe.jsx(d,{visualElement:_.visualElement,...p}):null,b5(t,l,S5(y,_.visualElement,c),y,g,n)]})}a.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const s=k.forwardRef(a);return s[T5]=t,s}function O5({layoutId:t}){const n=k.useContext(s3).id;return n&&t!==void 0?n+"-"+t:t}function k5(t,n){k.useContext(_4).strict}function R5(t){const{drag:n,layout:e}=mg;if(!n&&!e)return{};const r={...n,...e};return{MeasureLayout:n?.isEnabled(t)||e?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function D5(t,n){if(typeof Proxy>"u")return CC;const e=new Map,r=(a,s)=>CC(a,s,t,n),i=(a,s)=>r(a,s);return new Proxy(i,{get:(a,s)=>s==="create"?r:(e.has(s)||e.set(s,CC(s,void 0,t,n)),e.get(s))})}function k4({top:t,left:n,right:e,bottom:r}){return{x:{min:n,max:e},y:{min:t,max:r}}}function x5({x:t,y:n}){return{top:n.min,right:t.max,bottom:n.max,left:t.min}}function P5(t,n){if(!n)return t;const e=n({x:t.left,y:t.top}),r=n({x:t.right,y:t.bottom});return{top:e.y,left:e.x,bottom:r.y,right:r.x}}function wC(t){return t===void 0||t===1}function qw({scale:t,scaleX:n,scaleY:e}){return!wC(t)||!wC(n)||!wC(e)}function Bf(t){return qw(t)||R4(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function R4(t){return vA(t.x)||vA(t.y)}function vA(t){return t&&t!=="0%"}function e1(t,n,e){const r=t-e,i=n*r;return e+i}function _A(t,n,e,r,i){return i!==void 0&&(t=e1(t,i,r)),e1(t,e,r)+n}function Ww(t,n=0,e=1,r,i){t.min=_A(t.min,n,e,r,i),t.max=_A(t.max,n,e,r,i)}function D4(t,{x:n,y:e}){Ww(t.x,n.translate,n.scale,n.originPoint),Ww(t.y,e.translate,e.scale,e.originPoint)}const yA=.999999999999,bA=1.0000000000001;function U5(t,n,e,r=!1){const i=e.length;if(!i)return;n.x=n.y=1;let a,s;for(let l=0;l<i;l++){a=e[l],s=a.projectionDelta;const{visualElement:c}=a.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&ag(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),s&&(n.x*=s.x.scale,n.y*=s.y.scale,D4(t,s)),r&&Bf(a.latestValues)&&ag(t,a.latestValues))}n.x<bA&&n.x>yA&&(n.x=1),n.y<bA&&n.y>yA&&(n.y=1)}function ig(t,n){t.min=t.min+n,t.max=t.max+n}function EA(t,n,e,r,i=.5){const a=si(t.min,t.max,i);Ww(t,n,e,a,r)}function ag(t,n){EA(t.x,n.x,n.scaleX,n.scale,n.originX),EA(t.y,n.y,n.scaleY,n.scale,n.originY)}function x4(t,n){return k4(P5(t.getBoundingClientRect(),n))}function L5(t,n,e){const r=x4(t,e),{scroll:i}=n;return i&&(ig(r.x,i.offset.x),ig(r.y,i.offset.y)),r}const CA=()=>({translate:0,scale:1,origin:0,originPoint:0}),sg=()=>({x:CA(),y:CA()}),wA=()=>({min:0,max:0}),Ti=()=>({x:wA(),y:wA()}),Kw={current:null},P4={current:!1};function F5(){if(P4.current=!0,!!l3)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),n=()=>Kw.current=t.matches;t.addEventListener("change",n),n()}else Kw.current=!1}const H5=new WeakMap;function j5(t,n,e){for(const r in n){const i=n[r],a=e[r];if(Ba(i))t.addValue(r,i);else if(Ba(a))t.addValue(r,pg(i,{owner:t}));else if(a!==i)if(t.hasValue(r)){const s=t.getValue(r);s.liveStyle===!0?s.jump(i):s.hasAnimated||s.set(i)}else{const s=t.getStaticValue(r);t.addValue(r,pg(s!==void 0?s:i,{owner:t}))}}for(const r in e)n[r]===void 0&&t.removeValue(r);return n}const NA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class G5{scrapeMotionValuesFromProps(n,e,r){return{}}constructor({parent:n,props:e,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:s},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=T3,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const _=Vs.now();this.renderScheduledAt<_&&(this.renderScheduledAt=_,Jr.render(this.render,!1,!0))};const{latestValues:c,renderState:d}=s;this.latestValues=c,this.baseTarget={...c},this.initialValues=e.initial?{...c}:{},this.renderState=d,this.parent=n,this.props=e,this.presenceContext=r,this.depth=n?n.depth+1:0,this.reducedMotionConfig=i,this.options=l,this.blockInitialAnimation=!!a,this.isControllingVariants=W1(e),this.isVariantNode=b4(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(n&&n.current);const{willChange:p,...g}=this.scrapeMotionValuesFromProps(e,{},this);for(const _ in g){const y=g[_];c[_]!==void 0&&Ba(y)&&y.set(c[_])}}mount(n){this.current=n,H5.set(n,this),this.projection&&!this.projection.instance&&this.projection.mount(n),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,r)=>this.bindToMotionValue(r,e)),P4.current||F5(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Kw.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),mh(this.notifyUpdate),mh(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const e=this.features[n];e&&(e.unmount(),e.isMounted=!1)}this.current=null}addChild(n){this.children.add(n),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(n)}removeChild(n){this.children.delete(n),this.enteringChildren&&this.enteringChildren.delete(n)}bindToMotionValue(n,e){this.valueSubscriptions.has(n)&&this.valueSubscriptions.get(n)();const r=Ag.has(n);r&&this.onBindTransform&&this.onBindTransform();const i=e.on("change",s=>{this.latestValues[n]=s,this.props.onUpdate&&Jr.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,n,e)),this.valueSubscriptions.set(n,()=>{i(),a&&a(),e.owner&&e.stop()})}sortNodePosition(n){return!this.current||!this.sortInstanceNodePosition||this.type!==n.type?0:this.sortInstanceNodePosition(this.current,n.current)}updateFeatures(){let n="animation";for(n in mg){const e=mg[n];if(!e)continue;const{isEnabled:r,Feature:i}=e;if(!this.features[n]&&i&&r(this.props)&&(this.features[n]=new i(this)),this.features[n]){const a=this.features[n];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ti()}getStaticValue(n){return this.latestValues[n]}setStaticValue(n,e){this.latestValues[n]=e}update(n,e){(n.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=n,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let r=0;r<NA.length;r++){const i=NA[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,s=n[a];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=j5(this,this.scrapeMotionValuesFromProps(n,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(n){return this.props.variants?this.props.variants[n]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(n){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(n),()=>e.variantChildren.delete(n)}addValue(n,e){const r=this.values.get(n);e!==r&&(r&&this.removeValue(n),this.bindToMotionValue(n,e),this.values.set(n,e),this.latestValues[n]=e.get())}removeValue(n){this.values.delete(n);const e=this.valueSubscriptions.get(n);e&&(e(),this.valueSubscriptions.delete(n)),delete this.latestValues[n],this.removeValueFromRenderState(n,this.renderState)}hasValue(n){return this.values.has(n)}getValue(n,e){if(this.props.values&&this.props.values[n])return this.props.values[n];let r=this.values.get(n);return r===void 0&&e!==void 0&&(r=pg(e===null?void 0:e,{owner:this}),this.addValue(n,r)),r}readValue(n,e){let r=this.latestValues[n]!==void 0||!this.current?this.latestValues[n]:this.getBaseTargetFromProps(this.props,n)??this.readValueFromInstance(this.current,n,this.options);return r!=null&&(typeof r=="string"&&(Sk(r)||Ik(r))?r=parseFloat(r):!QL(r)&&gh.test(e)&&(r=u4(n,e)),this.setBaseTarget(n,Ba(r)?r.get():r)),Ba(r)?r.get():r}setBaseTarget(n,e){this.baseTarget[n]=e}getBaseTarget(n){const{initial:e}=this.props;let r;if(typeof e=="string"||typeof e=="object"){const a=U3(this.props,e,this.presenceContext?.custom);a&&(r=a[n])}if(e&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,n);return i!==void 0&&!Ba(i)?i:this.initialValues[n]!==void 0&&r===void 0?void 0:this.baseTarget[n]}on(n,e){return this.events[n]||(this.events[n]=new f3),this.events[n].add(e)}notify(n,...e){this.events[n]&&this.events[n].notify(...e)}scheduleRenderMicrotask(){I3.render(this.render)}}class U4 extends G5{constructor(){super(...arguments),this.KeyframeResolver=LL}sortInstanceNodePosition(n,e){return n.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(n,e){return n.style?n.style[e]:void 0}removeValueFromRenderState(n,{vars:e,style:r}){delete e[n],delete r[n]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:n}=this.props;Ba(n)&&(this.childSubscription=n.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function L4(t,{style:n,vars:e},r,i){const a=t.style;let s;for(s in n)a[s]=n[s];i?.applyProjectionStyles(a,r);for(s in e)a.setProperty(s,e[s])}function V5(t){return window.getComputedStyle(t)}class B5 extends U4{constructor(){super(...arguments),this.type="html",this.renderInstance=L4}readValueFromInstance(n,e){if(Ag.has(e))return this.projection?.isProjecting?Fw(e):nL(n,e);{const r=V5(n),i=(g3(e)?r.getPropertyValue(e):r[e])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(n,{transformPagePoint:e}){return x4(n,e)}build(n,e,r){D3(n,e,r.transformTemplate)}scrapeMotionValuesFromProps(n,e,r){return L3(n,e,r)}}const F4=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function z5(t,n,e,r){L4(t,n,void 0,r);for(const i in n.attrs)t.setAttribute(F4.has(i)?i:F3(i),n.attrs[i])}class q5 extends U4{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ti}getBaseTargetFromProps(n,e){return n[e]}readValueFromInstance(n,e){if(Ag.has(e)){const r=l4(e);return r&&r.default||0}return e=F4.has(e)?e:F3(e),n.getAttribute(e)}scrapeMotionValuesFromProps(n,e,r){return A4(n,e,r)}build(n,e,r){w4(n,e,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(n,e,r,i){z5(n,e,r,i)}mount(n){this.isSVGTag=T4(n.tagName),super.mount(n)}}const W5=(t,n)=>P3(t)?new q5(n):new B5(n,{allowProjection:t!==k.Fragment});function ug(t,n,e){const r=t.getProps();return U3(r,n,e!==void 0?e:r.custom,t)}const Yw=t=>Array.isArray(t);function K5(t,n,e){t.hasValue(n)?t.getValue(n).set(e):t.addValue(n,pg(e))}function Y5(t){return Yw(t)?t[t.length-1]||0:t}function Q5(t,n){const e=ug(t,n);let{transitionEnd:r={},transition:i={},...a}=e||{};a={...a,...r};for(const s in a){const l=Y5(a[s]);K5(t,s,l)}}function $5(t){return!!(Ba(t)&&t.add)}function Qw(t,n){const e=t.getValue("willChange");if($5(e))return e.add(n);if(!e&&jc.WillChange){const r=new jc.WillChange("auto");t.addValue("willChange",r),r.add(n)}}function H4(t){return t.props[I4]}const X5=t=>t!==null;function Z5(t,{repeat:n,repeatType:e="loop"},r){const i=t.filter(X5),a=n&&e!=="loop"&&n%2===1?0:i.length-1;return i[a]}const J5={type:"spring",stiffness:500,damping:25,restSpeed:10},e7=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),t7={type:"keyframes",duration:.8},n7={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},r7=(t,{keyframes:n})=>n.length>2?t7:Ag.has(t)?t.startsWith("scale")?e7(n[1]):J5:n7;function i7({when:t,delay:n,delayChildren:e,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:s,repeatDelay:l,from:c,elapsed:d,...p}){return!!Object.keys(p).length}const H3=(t,n,e,r={},i,a)=>s=>{const l=S3(r,t)||{},c=l.delay||r.delay||0;let{elapsed:d=0}=r;d=d-Fu(c);const p={keyframes:Array.isArray(e)?e:[null,e],ease:"easeOut",velocity:n.getVelocity(),...l,delay:-d,onUpdate:_=>{n.set(_),l.onUpdate&&l.onUpdate(_)},onComplete:()=>{s(),l.onComplete&&l.onComplete()},name:t,motionValue:n,element:a?void 0:i};i7(l)||Object.assign(p,r7(t,p)),p.duration&&(p.duration=Fu(p.duration)),p.repeatDelay&&(p.repeatDelay=Fu(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let g=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(Bw(p),p.delay===0&&(g=!0)),(jc.instantAnimations||jc.skipAnimations)&&(g=!0,Bw(p),p.delay=0),p.allowFlatten=!l.type&&!l.ease,g&&!a&&n.get()!==void 0){const _=Z5(p.keyframes,l);if(_!==void 0){Jr.update(()=>{p.onUpdate(_),p.onComplete()});return}}return l.isSync?new N3(p):new TL(p)};function a7({protectedKeys:t,needsAnimating:n},e){const r=t.hasOwnProperty(e)&&n[e]!==!0;return n[e]=!1,r}function j4(t,n,{delay:e=0,transitionOverride:r,type:i}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:s,...l}=n;r&&(a=r);const c=[],d=i&&t.animationState&&t.animationState.getState()[i];for(const p in l){const g=t.getValue(p,t.latestValues[p]??null),_=l[p];if(_===void 0||d&&a7(d,p))continue;const y={delay:e,...S3(a||{},p)},C=g.get();if(C!==void 0&&!g.isAnimating&&!Array.isArray(_)&&_===C&&!y.velocity)continue;let w=!1;if(window.MotionHandoffAnimation){const M=H4(t);if(M){const I=window.MotionHandoffAnimation(M,p,Jr);I!==null&&(y.startTime=I,w=!0)}}Qw(t,p),g.start(H3(p,g,_,t.shouldReduceMotion&&a4.has(p)?{type:!1}:y,t,w));const A=g.animation;A&&c.push(A)}return s&&Promise.all(c).then(()=>{Jr.update(()=>{s&&Q5(t,s)})}),c}function G4(t,n,e,r=0,i=1){const a=Array.from(t).sort((c,d)=>c.sortNodePosition(d)).indexOf(n),s=t.size,l=(s-1)*r;return typeof e=="function"?e(a,s):i===1?a*r:l-a*r}function $w(t,n,e={}){const r=ug(t,n,e.type==="exit"?t.presenceContext?.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};e.transitionOverride&&(i=e.transitionOverride);const a=r?()=>Promise.all(j4(t,r,e)):()=>Promise.resolve(),s=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:d=0,staggerChildren:p,staggerDirection:g}=i;return s7(t,n,c,d,p,g,e)}:()=>Promise.resolve(),{when:l}=i;if(l){const[c,d]=l==="beforeChildren"?[a,s]:[s,a];return c().then(()=>d())}else return Promise.all([a(),s(e.delay)])}function s7(t,n,e=0,r=0,i=0,a=1,s){const l=[];for(const c of t.variantChildren)c.notify("AnimationStart",n),l.push($w(c,n,{...s,delay:e+(typeof r=="function"?0:r)+G4(t.variantChildren,c,r,i,a)}).then(()=>c.notify("AnimationComplete",n)));return Promise.all(l)}function o7(t,n,e={}){t.notify("AnimationStart",n);let r;if(Array.isArray(n)){const i=n.map(a=>$w(t,a,e));r=Promise.all(i)}else if(typeof n=="string")r=$w(t,n,e);else{const i=typeof n=="function"?ug(t,n,e.custom):n;r=Promise.all(j4(t,i,e))}return r.then(()=>{t.notify("AnimationComplete",n)})}function V4(t,n){if(!Array.isArray(n))return!1;const e=n.length;if(e!==t.length)return!1;for(let r=0;r<e;r++)if(n[r]!==t[r])return!1;return!0}const l7=R3.length;function B4(t){if(!t)return;if(!t.isControllingVariants){const e=t.parent?B4(t.parent)||{}:{};return t.props.initial!==void 0&&(e.initial=t.props.initial),e}const n={};for(let e=0;e<l7;e++){const r=R3[e],i=t.props[r];(E0(i)||i===!1)&&(n[r]=i)}return n}const u7=[...k3].reverse(),c7=k3.length;function d7(t){return n=>Promise.all(n.map(({animation:e,options:r})=>o7(t,e,r)))}function h7(t){let n=d7(t),e=TA(),r=!0;const i=c=>(d,p)=>{const g=ug(t,p,c==="exit"?t.presenceContext?.custom:void 0);if(g){const{transition:_,transitionEnd:y,...C}=g;d={...d,...C,...y}}return d};function a(c){n=c(t)}function s(c){const{props:d}=t,p=B4(t.parent)||{},g=[],_=new Set;let y={},C=1/0;for(let A=0;A<c7;A++){const M=u7[A],I=e[M],D=d[M]!==void 0?d[M]:p[M],P=E0(D),H=M===c?I.isActive:null;H===!1&&(C=A);let L=D===p[M]&&D!==d[M]&&P;if(L&&r&&t.manuallyAnimateOnMount&&(L=!1),I.protectedKeys={...y},!I.isActive&&H===null||!D&&!I.prevProp||q1(D)||typeof D=="boolean")continue;const G=f7(I.prevProp,D);let Y=G||M===c&&I.isActive&&!L&&P||A>C&&P,F=!1;const ne=Array.isArray(D)?D:[D];let J=ne.reduce(i(M),{});H===!1&&(J={});const{prevResolvedValues:re={}}=I,Oe={...re,...J},Z=q=>{Y=!0,_.has(q)&&(F=!0,_.delete(q)),I.needsAnimating[q]=!0;const le=t.getValue(q);le&&(le.liveStyle=!1)};for(const q in Oe){const le=J[q],pe=re[q];if(y.hasOwnProperty(q))continue;let Pe=!1;Yw(le)&&Yw(pe)?Pe=!V4(le,pe):Pe=le!==pe,Pe?le!=null?Z(q):_.add(q):le!==void 0&&_.has(q)?Z(q):I.protectedKeys[q]=!0}I.prevProp=D,I.prevResolvedValues=J,I.isActive&&(y={...y,...J}),r&&t.blockInitialAnimation&&(Y=!1);const ue=L&&G;Y&&(!ue||F)&&g.push(...ne.map(q=>{const le={type:M};if(typeof q=="string"&&r&&!ue&&t.manuallyAnimateOnMount&&t.parent){const{parent:pe}=t,Pe=ug(pe,q);if(pe.enteringChildren&&Pe){const{delayChildren:qe}=Pe.transition||{};le.delay=G4(pe.enteringChildren,t,qe)}}return{animation:q,options:le}}))}if(_.size){const A={};if(typeof d.initial!="boolean"){const M=ug(t,Array.isArray(d.initial)?d.initial[0]:d.initial);M&&M.transition&&(A.transition=M.transition)}_.forEach(M=>{const I=t.getBaseTarget(M),D=t.getValue(M);D&&(D.liveStyle=!0),A[M]=I??null}),g.push({animation:A})}let w=!!g.length;return r&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(w=!1),r=!1,w?n(g):Promise.resolve()}function l(c,d){if(e[c].isActive===d)return Promise.resolve();t.variantChildren?.forEach(g=>g.animationState?.setActive(c,d)),e[c].isActive=d;const p=s(c);for(const g in e)e[g].protectedKeys={};return p}return{animateChanges:s,setActive:l,setAnimateFunction:a,getState:()=>e,reset:()=>{e=TA()}}}function f7(t,n){return typeof n=="string"?n!==t:Array.isArray(n)?!V4(n,t):!1}function Df(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function TA(){return{animate:Df(!0),whileInView:Df(),whileHover:Df(),whileTap:Df(),whileDrag:Df(),whileFocus:Df(),exit:Df()}}class bh{constructor(n){this.isMounted=!1,this.node=n}update(){}}class p7 extends bh{constructor(n){super(n),n.animationState||(n.animationState=h7(n))}updateAnimationControlsSubscription(){const{animate:n}=this.node.getProps();q1(n)&&(this.unmountControls=n.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:n}=this.node.getProps(),{animate:e}=this.node.prevProps||{};n!==e&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let m7=0;class g7 extends bh{constructor(){super(...arguments),this.id=m7++}update(){if(!this.node.presenceContext)return;const{isPresent:n,onExitComplete:e}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||n===r)return;const i=this.node.animationState.setActive("exit",!n);e&&!n&&i.then(()=>{e(this.id)})}mount(){const{register:n,onExitComplete:e}=this.node.presenceContext||{};e&&e(this.id),n&&(this.unmount=n(this.id))}unmount(){}}const v7={animation:{Feature:p7},exit:{Feature:g7}};function w0(t,n,e,r={passive:!0}){return t.addEventListener(n,e,r),()=>t.removeEventListener(n,e)}function j0(t){return{point:{x:t.pageX,y:t.pageY}}}const _7=t=>n=>M3(n)&&t(n,j0(n));function Y_(t,n,e,r){return w0(t,n,_7(e),r)}const z4=1e-4,y7=1-z4,b7=1+z4,q4=.01,E7=0-q4,C7=0+q4;function vs(t){return t.max-t.min}function w7(t,n,e){return Math.abs(t-n)<=e}function SA(t,n,e,r=.5){t.origin=r,t.originPoint=si(n.min,n.max,t.origin),t.scale=vs(e)/vs(n),t.translate=si(e.min,e.max,t.origin)-t.originPoint,(t.scale>=y7&&t.scale<=b7||isNaN(t.scale))&&(t.scale=1),(t.translate>=E7&&t.translate<=C7||isNaN(t.translate))&&(t.translate=0)}function Q_(t,n,e,r){SA(t.x,n.x,e.x,r?r.originX:void 0),SA(t.y,n.y,e.y,r?r.originY:void 0)}function AA(t,n,e){t.min=e.min+n.min,t.max=t.min+vs(n)}function N7(t,n,e){AA(t.x,n.x,e.x),AA(t.y,n.y,e.y)}function IA(t,n,e){t.min=n.min-e.min,t.max=t.min+vs(n)}function $_(t,n,e){IA(t.x,n.x,e.x),IA(t.y,n.y,e.y)}function qo(t){return[t("x"),t("y")]}const W4=({current:t})=>t?t.ownerDocument.defaultView:null,MA=(t,n)=>Math.abs(t-n);function T7(t,n){const e=MA(t.x,n.x),r=MA(t.y,n.y);return Math.sqrt(e**2+r**2)}class K4{constructor(n,e,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:s=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=TC(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,C=T7(_.offset,{x:0,y:0})>=this.distanceThreshold;if(!y&&!C)return;const{point:w}=_,{timestamp:A}=_a;this.history.push({...w,timestamp:A});const{onStart:M,onMove:I}=this.handlers;y||(M&&M(this.lastMoveEvent,_),this.startEvent=this.lastMoveEvent),I&&I(this.lastMoveEvent,_)},this.handlePointerMove=(_,y)=>{this.lastMoveEvent=_,this.lastMoveEventInfo=NC(y,this.transformPagePoint),Jr.update(this.updatePoint,!0)},this.handlePointerUp=(_,y)=>{this.end();const{onEnd:C,onSessionEnd:w,resumeAnimation:A}=this.handlers;if(this.dragSnapToOrigin&&A&&A(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const M=TC(_.type==="pointercancel"?this.lastMoveEventInfo:NC(y,this.transformPagePoint),this.history);this.startEvent&&C&&C(_,M),w&&w(_,M)},!M3(n))return;this.dragSnapToOrigin=a,this.handlers=e,this.transformPagePoint=r,this.distanceThreshold=s,this.contextWindow=i||window;const l=j0(n),c=NC(l,this.transformPagePoint),{point:d}=c,{timestamp:p}=_a;this.history=[{...d,timestamp:p}];const{onSessionStart:g}=e;g&&g(n,TC(c,this.history)),this.removeListeners=L0(Y_(this.contextWindow,"pointermove",this.handlePointerMove),Y_(this.contextWindow,"pointerup",this.handlePointerUp),Y_(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(n){this.handlers=n}end(){this.removeListeners&&this.removeListeners(),mh(this.updatePoint)}}function NC(t,n){return n?{point:n(t.point)}:t}function OA(t,n){return{x:t.x-n.x,y:t.y-n.y}}function TC({point:t},n){return{point:t,delta:OA(t,Y4(n)),offset:OA(t,S7(n)),velocity:A7(n,.1)}}function S7(t){return t[0]}function Y4(t){return t[t.length-1]}function A7(t,n){if(t.length<2)return{x:0,y:0};let e=t.length-1,r=null;const i=Y4(t);for(;e>=0&&(r=t[e],!(i.timestamp-r.timestamp>Fu(n)));)e--;if(!r)return{x:0,y:0};const a=Zo(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const s={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function I7(t,{min:n,max:e},r){return n!==void 0&&t<n?t=r?si(n,t,r.min):Math.max(t,n):e!==void 0&&t>e&&(t=r?si(e,t,r.max):Math.min(t,e)),t}function kA(t,n,e){return{min:n!==void 0?t.min+n:void 0,max:e!==void 0?t.max+e-(t.max-t.min):void 0}}function M7(t,{top:n,left:e,bottom:r,right:i}){return{x:kA(t.x,e,i),y:kA(t.y,n,r)}}function RA(t,n){let e=n.min-t.min,r=n.max-t.max;return n.max-n.min<t.max-t.min&&([e,r]=[r,e]),{min:e,max:r}}function O7(t,n){return{x:RA(t.x,n.x),y:RA(t.y,n.y)}}function k7(t,n){let e=.5;const r=vs(t),i=vs(n);return i>r?e=_0(n.min,n.max-r,t.min):r>i&&(e=_0(t.min,t.max-i,n.min)),Hc(0,1,e)}function R7(t,n){const e={};return n.min!==void 0&&(e.min=n.min-t.min),n.max!==void 0&&(e.max=n.max-t.min),e}const Xw=.35;function D7(t=Xw){return t===!1?t=0:t===!0&&(t=Xw),{x:DA(t,"left","right"),y:DA(t,"top","bottom")}}function DA(t,n,e){return{min:xA(t,n),max:xA(t,e)}}function xA(t,n){return typeof t=="number"?t:t[n]||0}const x7=new WeakMap;class P7{constructor(n){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ti(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=n}start(n,{snapToCursor:e=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=g=>{const{dragSnapToOrigin:_}=this.getProps();_?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(j0(g).point)},s=(g,_)=>{const{drag:y,dragPropagation:C,onDragStart:w}=this.getProps();if(y&&!C&&(this.openDragLock&&this.openDragLock(),this.openDragLock=GL(y),!this.openDragLock))return;this.latestPointerEvent=g,this.latestPanInfo=_,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),qo(M=>{let I=this.getAxisMotionValue(M).get()||0;if(Hu.test(I)){const{projection:D}=this.visualElement;if(D&&D.layout){const P=D.layout.layoutBox[M];P&&(I=vs(P)*(parseFloat(I)/100))}}this.originPoint[M]=I}),w&&Jr.postRender(()=>w(g,_)),Qw(this.visualElement,"transform");const{animationState:A}=this.visualElement;A&&A.setActive("whileDrag",!0)},l=(g,_)=>{this.latestPointerEvent=g,this.latestPanInfo=_;const{dragPropagation:y,dragDirectionLock:C,onDirectionLock:w,onDrag:A}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:M}=_;if(C&&this.currentDirection===null){this.currentDirection=U7(M),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",_.point,M),this.updateAxis("y",_.point,M),this.visualElement.render(),A&&A(g,_)},c=(g,_)=>{this.latestPointerEvent=g,this.latestPanInfo=_,this.stop(g,_),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>qo(g=>this.getAnimationState(g)==="paused"&&this.getAxisMotionValue(g).animation?.play()),{dragSnapToOrigin:p}=this.getProps();this.panSession=new K4(n,{onSessionStart:a,onStart:s,onMove:l,onSessionEnd:c,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,distanceThreshold:r,contextWindow:W4(this.visualElement)})}stop(n,e){const r=n||this.latestPointerEvent,i=e||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!r)return;const{velocity:s}=i;this.startAnimation(s);const{onDragEnd:l}=this.getProps();l&&Jr.postRender(()=>l(r,i))}cancel(){this.isDragging=!1;const{projection:n,animationState:e}=this.visualElement;n&&(n.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(n,e,r){const{drag:i}=this.getProps();if(!r||!iE(n,i,this.currentDirection))return;const a=this.getAxisMotionValue(n);let s=this.originPoint[n]+r[n];this.constraints&&this.constraints[n]&&(s=I7(s,this.constraints[n],this.elastic[n])),a.set(s)}resolveConstraints(){const{dragConstraints:n,dragElastic:e}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;n&&rg(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=M7(r.layoutBox,n):this.constraints=!1,this.elastic=D7(e),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&qo(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=R7(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:n,onMeasureDragConstraints:e}=this.getProps();if(!n||!rg(n))return!1;const r=n.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=L5(r,i.root,this.visualElement.getTransformPagePoint());let s=O7(i.layout.layoutBox,a);if(e){const l=e(x5(s));this.hasMutatedConstraints=!!l,l&&(s=k4(l))}return s}startAnimation(n){const{drag:e,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:s,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},d=qo(p=>{if(!iE(p,e,this.currentDirection))return;let g=c&&c[p]||{};s&&(g={min:0,max:0});const _=i?200:1e6,y=i?40:1e7,C={type:"inertia",velocity:r?n[p]:0,bounceStiffness:_,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...a,...g};return this.startAxisValueAnimation(p,C)});return Promise.all(d).then(l)}startAxisValueAnimation(n,e){const r=this.getAxisMotionValue(n);return Qw(this.visualElement,n),r.start(H3(n,r,0,e,this.visualElement,!1))}stopAnimation(){qo(n=>this.getAxisMotionValue(n).stop())}pauseAnimation(){qo(n=>this.getAxisMotionValue(n).animation?.pause())}getAnimationState(n){return this.getAxisMotionValue(n).animation?.state}getAxisMotionValue(n){const e=`_drag${n.toUpperCase()}`,r=this.visualElement.getProps();return r[e]||this.visualElement.getValue(n,(r.initial?r.initial[n]:void 0)||0)}snapToCursor(n){qo(e=>{const{drag:r}=this.getProps();if(!iE(e,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(e);if(i&&i.layout){const{min:s,max:l}=i.layout.layoutBox[e];a.set(n[e]-si(s,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:n,dragConstraints:e}=this.getProps(),{projection:r}=this.visualElement;if(!rg(e)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};qo(s=>{const l=this.getAxisMotionValue(s);if(l&&this.constraints!==!1){const c=l.get();i[s]=k7({min:c,max:c},this.constraints[s])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),qo(s=>{if(!iE(s,n,null))return;const l=this.getAxisMotionValue(s),{min:c,max:d}=this.constraints[s];l.set(si(c,d,i[s]))})}addListeners(){if(!this.visualElement.current)return;x7.set(this.visualElement,this);const n=this.visualElement.current,e=Y_(n,"pointerdown",c=>{const{drag:d,dragListener:p=!0}=this.getProps();d&&p&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();rg(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Jr.read(r);const s=w0(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",(({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(qo(p=>{const g=this.getAxisMotionValue(p);g&&(this.originPoint[p]+=c[p].translate,g.set(g.get()+c[p].translate))}),this.visualElement.render())}));return()=>{s(),e(),a(),l&&l()}}getProps(){const n=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:s=Xw,dragMomentum:l=!0}=n;return{...n,drag:e,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:s,dragMomentum:l}}}function iE(t,n,e){return(n===!0||n===t)&&(e===null||e===t)}function U7(t,n=10){let e=null;return Math.abs(t.y)>n?e="y":Math.abs(t.x)>n&&(e="x"),e}class L7 extends bh{constructor(n){super(n),this.removeGroupControls=tl,this.removeListeners=tl,this.controls=new P7(n)}mount(){const{dragControls:n}=this.node.getProps();n&&(this.removeGroupControls=n.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||tl}unmount(){this.removeGroupControls(),this.removeListeners()}}const PA=t=>(n,e)=>{t&&Jr.postRender(()=>t(n,e))};class F7 extends bh{constructor(){super(...arguments),this.removePointerDownListener=tl}onPointerDown(n){this.session=new K4(n,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:W4(this.node)})}createPanHandlers(){const{onPanSessionStart:n,onPanStart:e,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:PA(n),onStart:PA(e),onMove:r,onEnd:(a,s)=>{delete this.session,i&&Jr.postRender(()=>i(a,s))}}}mount(){this.removePointerDownListener=Y_(this.node.current,"pointerdown",n=>this.onPointerDown(n))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const xE={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function UA(t,n){return n.max===n.min?0:t/(n.max-n.min)*100}const w_={correct:(t,n)=>{if(!n.target)return t;if(typeof t=="string")if(Yt.test(t))t=parseFloat(t);else return t;const e=UA(t,n.target.x),r=UA(t,n.target.y);return`${e}% ${r}%`}},H7={correct:(t,{treeScale:n,projectionDelta:e})=>{const r=t,i=gh.parse(t);if(i.length>5)return r;const a=gh.createTransformer(t),s=typeof i[0]!="number"?1:0,l=e.x.scale*n.x,c=e.y.scale*n.y;i[0+s]/=l,i[1+s]/=c;const d=si(l,c,.5);return typeof i[2+s]=="number"&&(i[2+s]/=d),typeof i[3+s]=="number"&&(i[3+s]/=d),a(i)}};let SC=!1;class j7 extends k.Component{componentDidMount(){const{visualElement:n,layoutGroup:e,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=n;l5(G7),a&&(e.group&&e.group.add(a),r&&r.register&&i&&r.register(a),SC&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),xE.hasEverUpdated=!0}getSnapshotBeforeUpdate(n){const{layoutDependency:e,visualElement:r,drag:i,isPresent:a}=this.props,{projection:s}=r;return s&&(s.isPresent=a,SC=!0,i||n.layoutDependency!==e||e===void 0||n.isPresent!==a?s.willUpdate():this.safeToRemove(),n.isPresent!==a&&(a?s.promote():s.relegate()||Jr.postRender(()=>{const l=s.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:n}=this.props.visualElement;n&&(n.root.didUpdate(),I3.postRender(()=>{!n.currentAnimation&&n.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:n,layoutGroup:e,switchLayoutGroup:r}=this.props,{projection:i}=n;SC=!0,i&&(i.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:n}=this.props;n&&n()}render(){return null}}function Q4(t){const[n,e]=g4(),r=k.useContext(s3);return oe.jsx(j7,{...t,layoutGroup:r,switchLayoutGroup:k.useContext(M4),isPresent:n,safeToRemove:e})}const G7={borderRadius:{...w_,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:w_,borderTopRightRadius:w_,borderBottomLeftRadius:w_,borderBottomRightRadius:w_,boxShadow:H7};function V7(t,n,e){const r=Ba(t)?t:pg(t);return r.start(H3("",r,n,e)),r.animation}const B7=(t,n)=>t.depth-n.depth;class z7{constructor(){this.children=[],this.isDirty=!1}add(n){u3(this.children,n),this.isDirty=!0}remove(n){c3(this.children,n),this.isDirty=!0}forEach(n){this.isDirty&&this.children.sort(B7),this.isDirty=!1,this.children.forEach(n)}}function q7(t,n){const e=Vs.now(),r=({timestamp:i})=>{const a=i-e;a>=n&&(mh(r),t(a-n))};return Jr.setup(r,!0),()=>mh(r)}const $4=["TopLeft","TopRight","BottomLeft","BottomRight"],W7=$4.length,LA=t=>typeof t=="string"?parseFloat(t):t,FA=t=>typeof t=="number"||Yt.test(t);function K7(t,n,e,r,i,a){i?(t.opacity=si(0,e.opacity??1,Y7(r)),t.opacityExit=si(n.opacity??1,0,Q7(r))):a&&(t.opacity=si(n.opacity??1,e.opacity??1,r));for(let s=0;s<W7;s++){const l=`border${$4[s]}Radius`;let c=HA(n,l),d=HA(e,l);c===void 0&&d===void 0||(c||(c=0),d||(d=0),c===0||d===0||FA(c)===FA(d)?(t[l]=Math.max(si(LA(c),LA(d),r),0),(Hu.test(d)||Hu.test(c))&&(t[l]+="%")):t[l]=d)}(n.rotate||e.rotate)&&(t.rotate=si(n.rotate||0,e.rotate||0,r))}function HA(t,n){return t[n]!==void 0?t[n]:t.borderRadius}const Y7=X4(0,.5,Uk),Q7=X4(.5,.95,tl);function X4(t,n,e){return r=>r<t?0:r>n?1:e(_0(t,n,r))}function jA(t,n){t.min=n.min,t.max=n.max}function zo(t,n){jA(t.x,n.x),jA(t.y,n.y)}function GA(t,n){t.translate=n.translate,t.scale=n.scale,t.originPoint=n.originPoint,t.origin=n.origin}function VA(t,n,e,r,i){return t-=n,t=e1(t,1/e,r),i!==void 0&&(t=e1(t,1/i,r)),t}function $7(t,n=0,e=1,r=.5,i,a=t,s=t){if(Hu.test(n)&&(n=parseFloat(n),n=si(s.min,s.max,n/100)-s.min),typeof n!="number")return;let l=si(a.min,a.max,r);t===a&&(l-=n),t.min=VA(t.min,n,e,l,i),t.max=VA(t.max,n,e,l,i)}function BA(t,n,[e,r,i],a,s){$7(t,n[e],n[r],n[i],n.scale,a,s)}const X7=["x","scaleX","originX"],Z7=["y","scaleY","originY"];function zA(t,n,e,r){BA(t.x,n,X7,e?e.x:void 0,r?r.x:void 0),BA(t.y,n,Z7,e?e.y:void 0,r?r.y:void 0)}function qA(t){return t.translate===0&&t.scale===1}function Z4(t){return qA(t.x)&&qA(t.y)}function WA(t,n){return t.min===n.min&&t.max===n.max}function J7(t,n){return WA(t.x,n.x)&&WA(t.y,n.y)}function KA(t,n){return Math.round(t.min)===Math.round(n.min)&&Math.round(t.max)===Math.round(n.max)}function J4(t,n){return KA(t.x,n.x)&&KA(t.y,n.y)}function YA(t){return vs(t.x)/vs(t.y)}function QA(t,n){return t.translate===n.translate&&t.scale===n.scale&&t.originPoint===n.originPoint}class e8{constructor(){this.members=[]}add(n){u3(this.members,n),n.scheduleRender()}remove(n){if(c3(this.members,n),n===this.prevLead&&(this.prevLead=void 0),n===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(n){const e=this.members.findIndex(i=>n===i);if(e===0)return!1;let r;for(let i=e;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(n,e){const r=this.lead;if(n!==r&&(this.prevLead=r,this.lead=n,n.show(),r)){r.instance&&r.scheduleRender(),n.scheduleRender(),n.resumeFrom=r,e&&(n.resumeFrom.preserveOpacity=!0),r.snapshot&&(n.snapshot=r.snapshot,n.snapshot.latestValues=r.animationValues||r.latestValues),n.root&&n.root.isUpdating&&(n.isLayoutDirty=!0);const{crossfade:i}=n.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(n=>{const{options:e,resumingFrom:r}=n;e.onExitComplete&&e.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(n=>{n.instance&&n.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function t8(t,n,e){let r="";const i=t.x.translate/n.x,a=t.y.translate/n.y,s=e?.z||0;if((i||a||s)&&(r=`translate3d(${i}px, ${a}px, ${s}px) `),(n.x!==1||n.y!==1)&&(r+=`scale(${1/n.x}, ${1/n.y}) `),e){const{transformPerspective:d,rotate:p,rotateX:g,rotateY:_,skewX:y,skewY:C}=e;d&&(r=`perspective(${d}px) ${r}`),p&&(r+=`rotate(${p}deg) `),g&&(r+=`rotateX(${g}deg) `),_&&(r+=`rotateY(${_}deg) `),y&&(r+=`skewX(${y}deg) `),C&&(r+=`skewY(${C}deg) `)}const l=t.x.scale*n.x,c=t.y.scale*n.y;return(l!==1||c!==1)&&(r+=`scale(${l}, ${c})`),r||"none"}const AC=["","X","Y","Z"],n8=1e3;let r8=0;function IC(t,n,e,r){const{latestValues:i}=n;i[t]&&(e[t]=i[t],n.setStaticValue(t,0),r&&(r[t]=0))}function eR(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:n}=t.options;if(!n)return;const e=H4(n);if(window.MotionHasOptimisedAnimation(e,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(e,"transform",Jr,!(i||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&eR(r)}function tR({attachResizeListener:t,defaultParent:n,measureScroll:e,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},s=n?.()){this.id=r8++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(s8),this.nodes.forEach(c8),this.nodes.forEach(d8),this.nodes.forEach(o8)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=s?s.root||s:this,this.path=s?[...s.path,s]:[],this.parent=s,this.depth=s?s.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new z7)}addEventListener(a,s){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new f3),this.eventHandlers.get(a).add(s)}notifyListeners(a,...s){const l=this.eventHandlers.get(a);l&&l.notify(...s)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=m4(a)&&!KL(a),this.instance=a;const{layoutId:s,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||s)&&(this.isLayoutDirty=!0),t){let d,p=0;const g=()=>this.root.updateBlockedByResize=!1;Jr.read(()=>{p=window.innerWidth}),t(a,()=>{const _=window.innerWidth;_!==p&&(p=_,this.root.updateBlockedByResize=!0,d&&d(),d=q7(g,250),xE.hasAnimatedSinceResize&&(xE.hasAnimatedSinceResize=!1,this.nodes.forEach(ZA)))})}s&&this.root.registerSharedNode(s,this),this.options.animate!==!1&&c&&(s||l)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:p,hasRelativeLayoutChanged:g,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||c.getDefaultTransition()||g8,{onLayoutAnimationStart:C,onLayoutAnimationComplete:w}=c.getProps(),A=!this.targetLayout||!J4(this.targetLayout,_),M=!p&&g;if(this.options.layoutRoot||this.resumeFrom||M||p&&(A||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const I={...S3(y,"layout"),onPlay:C,onComplete:w};(c.shouldReduceMotion||this.options.layoutRoot)&&(I.delay=0,I.type=!1),this.startAnimation(I),this.setAnimationOrigin(d,M)}else p||ZA(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),mh(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(h8),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&eR(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const p=this.path[d];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:s,layout:l}=this.options;if(s===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach($A);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(XA);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(u8),this.nodes.forEach(i8),this.nodes.forEach(a8)):this.nodes.forEach(XA),this.clearAllSnapshots();const a=Vs.now();_a.delta=Hc(0,1e3/60,a-_a.timestamp),_a.timestamp=a,_a.isProcessing=!0,gC.update.process(_a),gC.preRender.process(_a),gC.render.process(_a),_a.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,I3.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(l8),this.sharedNodes.forEach(f8)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Jr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Jr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!vs(this.snapshot.measuredBox.x)&&!vs(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ti(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:s}=this.options;s&&s.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let s=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(s=!1),s&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:e(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,s=this.projectionDelta&&!Z4(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,d=c!==this.prevTransformTemplateValue;a&&this.instance&&(s||Bf(this.latestValues)||d)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const s=this.measurePageBox();let l=this.removeElementScroll(s);return a&&(l=this.removeTransform(l)),v8(l),{animationId:this.root.animationId,measuredBox:s,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return Ti();const s=a.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(_8))){const{scroll:l}=this.root;l&&(ig(s.x,l.offset.x),ig(s.y,l.offset.y))}return s}removeElementScroll(a){const s=Ti();if(zo(s,a),this.scroll?.wasRoot)return s;for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:d,options:p}=c;c!==this.root&&d&&p.layoutScroll&&(d.wasRoot&&zo(s,a),ig(s.x,d.offset.x),ig(s.y,d.offset.y))}return s}applyTransform(a,s=!1){const l=Ti();zo(l,a);for(let c=0;c<this.path.length;c++){const d=this.path[c];!s&&d.options.layoutScroll&&d.scroll&&d!==d.root&&ag(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Bf(d.latestValues)&&ag(l,d.latestValues)}return Bf(this.latestValues)&&ag(l,this.latestValues),l}removeTransform(a){const s=Ti();zo(s,a);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Bf(c.latestValues))continue;qw(c.latestValues)&&c.updateSnapshot();const d=Ti(),p=c.measurePageBox();zo(d,p),zA(s,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,d)}return Bf(this.latestValues)&&zA(s,this.latestValues),s}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==_a.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){const s=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=s.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=s.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=s.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==s;if(!(a||l&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:c,layoutId:d}=this.options;if(!(!this.layout||!(c||d))){if(this.resolvedRelativeTargetAt=_a.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ti(),this.relativeTargetOrigin=Ti(),$_(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),zo(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ti(),this.targetWithTransforms=Ti()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),N7(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):zo(this.target,this.layout.layoutBox),D4(this.target,this.targetDelta)):zo(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ti(),this.relativeTargetOrigin=Ti(),$_(this.relativeTargetOrigin,this.target,p.target),zo(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||qw(this.parent.latestValues)||R4(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const a=this.getLead(),s=!!this.resumingFrom||this!==a;let l=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(l=!1),s&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===_a.timestamp&&(l=!1),l)return;const{layout:c,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||d))return;zo(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,g=this.treeScale.y;U5(this.layoutCorrected,this.treeScale,this.path,s),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Ti());const{target:_}=a;if(!_){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(GA(this.prevProjectionDelta.x,this.projectionDelta.x),GA(this.prevProjectionDelta.y,this.projectionDelta.y)),Q_(this.projectionDelta,this.layoutCorrected,_,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==g||!QA(this.projectionDelta.x,this.prevProjectionDelta.x)||!QA(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.visualElement?.scheduleRender(),a){const s=this.getStack();s&&s.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=sg(),this.projectionDelta=sg(),this.projectionDeltaWithTransform=sg()}setAnimationOrigin(a,s=!1){const l=this.snapshot,c=l?l.latestValues:{},d={...this.latestValues},p=sg();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!s;const g=Ti(),_=l?l.source:void 0,y=this.layout?this.layout.source:void 0,C=_!==y,w=this.getStack(),A=!w||w.members.length<=1,M=!!(C&&!A&&this.options.crossfade===!0&&!this.path.some(m8));this.animationProgress=0;let I;this.mixTargetDelta=D=>{const P=D/1e3;JA(p.x,a.x,P),JA(p.y,a.y,P),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&($_(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),p8(this.relativeTarget,this.relativeTargetOrigin,g,P),I&&J7(this.relativeTarget,I)&&(this.isProjectionDirty=!1),I||(I=Ti()),zo(I,this.relativeTarget)),C&&(this.animationValues=d,K7(d,c,this.latestValues,P,M,A)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=P},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(mh(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Jr.update(()=>{xE.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=pg(0)),this.currentAnimation=V7(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:s=>{this.mixTargetDelta(s),a.onUpdate&&a.onUpdate(s)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(n8),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:s,target:l,layout:c,latestValues:d}=a;if(!(!s||!l||!c)){if(this!==a&&this.layout&&c&&nR(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Ti();const p=vs(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+p;const g=vs(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+g}zo(s,l),ag(s,d),Q_(this.projectionDeltaWithTransform,this.layoutCorrected,s,d)}}registerSharedNode(a,s){this.sharedNodes.has(a)||this.sharedNodes.set(a,new e8),this.sharedNodes.get(a).add(s);const l=s.options.initialPromotionConfig;s.promote({transition:l?l.transition:void 0,preserveFollowOpacity:l&&l.shouldPreserveFollowOpacity?l.shouldPreserveFollowOpacity(s):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){const{layoutId:a}=this.options;return a?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:a}=this.options;return a?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:s,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),s&&this.setOptions({transition:s})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let s=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(s=!0),!s)return;const c={};l.z&&IC("z",a,c,this.animationValues);for(let d=0;d<AC.length;d++)IC(`rotate${AC[d]}`,a,c,this.animationValues),IC(`skew${AC[d]}`,a,c,this.animationValues);a.render();for(const d in c)a.setStaticValue(d,c[d]),this.animationValues&&(this.animationValues[d]=c[d]);a.scheduleRender()}applyProjectionStyles(a,s){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=DE(s?.pointerEvents)||"",a.transform=l?l(this.latestValues,""):"none";return}const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=DE(s?.pointerEvents)||""),this.hasProjected&&!Bf(this.latestValues)&&(a.transform=l?l({},""):"none",this.hasProjected=!1);return}a.visibility="";const d=c.animationValues||c.latestValues;this.applyTransformsToTarget();let p=t8(this.projectionDeltaWithTransform,this.treeScale,d);l&&(p=l(d,p)),a.transform=p;const{x:g,y:_}=this.projectionDelta;a.transformOrigin=`${g.origin*100}% ${_.origin*100}% 0`,c.animationValues?a.opacity=c===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:a.opacity=c===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const y in C0){if(d[y]===void 0)continue;const{correct:C,applyTo:w,isCSSVariable:A}=C0[y],M=p==="none"?d[y]:C(d[y],c);if(w){const I=w.length;for(let D=0;D<I;D++)a[w[D]]=M}else A?this.options.visualElement.renderState.vars[y]=M:a[y]=M}this.options.layoutId&&(a.pointerEvents=c===this?DE(s?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>a.currentAnimation?.stop()),this.root.nodes.forEach($A),this.root.sharedNodes.clear()}}}function i8(t){t.updateLayout()}function a8(t){const n=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:e,measuredBox:r}=t.layout,{animationType:i}=t.options,a=n.source!==t.layout.source;i==="size"?qo(p=>{const g=a?n.measuredBox[p]:n.layoutBox[p],_=vs(g);g.min=e[p].min,g.max=g.min+_}):nR(i,n.layoutBox,e)&&qo(p=>{const g=a?n.measuredBox[p]:n.layoutBox[p],_=vs(e[p]);g.max=g.min+_,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[p].max=t.relativeTarget[p].min+_)});const s=sg();Q_(s,e,n.layoutBox);const l=sg();a?Q_(l,t.applyTransform(r,!0),n.measuredBox):Q_(l,e,n.layoutBox);const c=!Z4(s);let d=!1;if(!t.resumeFrom){const p=t.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:g,layout:_}=p;if(g&&_){const y=Ti();$_(y,n.layoutBox,g.layoutBox);const C=Ti();$_(C,e,_.layoutBox),J4(y,C)||(d=!0),p.options.layoutRoot&&(t.relativeTarget=C,t.relativeTargetOrigin=y,t.relativeParent=p)}}}t.notifyListeners("didUpdate",{layout:e,snapshot:n,delta:l,layoutDelta:s,hasLayoutChanged:c,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:e}=t.options;e&&e()}t.options.transition=void 0}function s8(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function o8(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function l8(t){t.clearSnapshot()}function $A(t){t.clearMeasurements()}function XA(t){t.isLayoutDirty=!1}function u8(t){const{visualElement:n}=t.options;n&&n.getProps().onBeforeLayoutMeasure&&n.notify("BeforeLayoutMeasure"),t.resetTransform()}function ZA(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function c8(t){t.resolveTargetDelta()}function d8(t){t.calcProjection()}function h8(t){t.resetSkewAndRotation()}function f8(t){t.removeLeadSnapshot()}function JA(t,n,e){t.translate=si(n.translate,0,e),t.scale=si(n.scale,1,e),t.origin=n.origin,t.originPoint=n.originPoint}function eI(t,n,e,r){t.min=si(n.min,e.min,r),t.max=si(n.max,e.max,r)}function p8(t,n,e,r){eI(t.x,n.x,e.x,r),eI(t.y,n.y,e.y,r)}function m8(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const g8={duration:.45,ease:[.4,0,.1,1]},tI=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),nI=tI("applewebkit/")&&!tI("chrome/")?Math.round:tl;function rI(t){t.min=nI(t.min),t.max=nI(t.max)}function v8(t){rI(t.x),rI(t.y)}function nR(t,n,e){return t==="position"||t==="preserve-aspect"&&!w7(YA(n),YA(e),.2)}function _8(t){return t!==t.root&&t.scroll?.wasRoot}const y8=tR({attachResizeListener:(t,n)=>w0(t,"resize",n),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),MC={current:void 0},rR=tR({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!MC.current){const t=new y8({});t.mount(window),t.setOptions({layoutScroll:!0}),MC.current=t}return MC.current},resetTransform:(t,n)=>{t.style.transform=n!==void 0?n:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),b8={pan:{Feature:F7},drag:{Feature:L7,ProjectionNode:rR,MeasureLayout:Q4}};function iI(t,n,e){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",e==="Start");const i="onHover"+e,a=r[i];a&&Jr.postRender(()=>a(n,j0(n)))}class E8 extends bh{mount(){const{current:n}=this.node;n&&(this.unmount=VL(n,(e,r)=>(iI(this.node,r,"Start"),i=>iI(this.node,i,"End"))))}unmount(){}}class C8 extends bh{constructor(){super(...arguments),this.isActive=!1}onFocus(){let n=!1;try{n=this.node.current.matches(":focus-visible")}catch{n=!0}!n||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=L0(w0(this.node.current,"focus",()=>this.onFocus()),w0(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function aI(t,n,e){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",e==="Start");const i="onTap"+(e==="End"?"":e),a=r[i];a&&Jr.postRender(()=>a(n,j0(n)))}class w8 extends bh{mount(){const{current:n}=this.node;n&&(this.unmount=WL(n,(e,r)=>(aI(this.node,r,"Start"),(i,{success:a})=>aI(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Zw=new WeakMap,OC=new WeakMap,N8=t=>{const n=Zw.get(t.target);n&&n(t)},T8=t=>{t.forEach(N8)};function S8({root:t,...n}){const e=t||document;OC.has(e)||OC.set(e,{});const r=OC.get(e),i=JSON.stringify(n);return r[i]||(r[i]=new IntersectionObserver(T8,{root:t,...n})),r[i]}function A8(t,n,e){const r=S8(n);return Zw.set(t,e),r.observe(t),()=>{Zw.delete(t),r.unobserve(t)}}const I8={some:0,all:1};class M8 extends bh{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:n={}}=this.node.getProps(),{root:e,margin:r,amount:i="some",once:a}=n,s={root:e?e.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:I8[i]},l=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,a&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:p,onViewportLeave:g}=this.node.getProps(),_=d?p:g;_&&_(c)};return A8(this.node.current,s,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:n,prevProps:e}=this.node;["amount","margin","root"].some(O8(n,e))&&this.startObserver()}unmount(){}}function O8({viewport:t={}},{viewport:n={}}={}){return e=>t[e]!==n[e]}const k8={inView:{Feature:M8},tap:{Feature:w8},focus:{Feature:C8},hover:{Feature:E8}},R8={layout:{ProjectionNode:rR,MeasureLayout:Q4}},D8={...v7,...k8,...b8,...R8},cg=D5(D8,W5);var sI="popstate";function x8(t={}){function n(r,i){let{pathname:a,search:s,hash:l}=r.location;return Jw("",{pathname:a,search:s,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function e(r,i){return typeof i=="string"?i:N0(i)}return U8(n,e,null,t)}function oi(t,n){if(t===!1||t===null||typeof t>"u")throw new Error(n)}function Yl(t,n){if(!t){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function P8(){return Math.random().toString(36).substring(2,10)}function oI(t,n){return{usr:t.state,key:t.key,idx:n}}function Jw(t,n,e=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof n=="string"?Ig(n):n,state:e,key:n&&n.key||r||P8()}}function N0({pathname:t="/",search:n="",hash:e=""}){return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),e&&e!=="#"&&(t+=e.charAt(0)==="#"?e:"#"+e),t}function Ig(t){let n={};if(t){let e=t.indexOf("#");e>=0&&(n.hash=t.substring(e),t=t.substring(0,e));let r=t.indexOf("?");r>=0&&(n.search=t.substring(r),t=t.substring(0,r)),t&&(n.pathname=t)}return n}function U8(t,n,e,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,s=i.history,l="POP",c=null,d=p();d==null&&(d=0,s.replaceState({...s.state,idx:d},""));function p(){return(s.state||{idx:null}).idx}function g(){l="POP";let A=p(),M=A==null?null:A-d;d=A,c&&c({action:l,location:w.location,delta:M})}function _(A,M){l="PUSH";let I=Jw(w.location,A,M);d=p()+1;let D=oI(I,d),P=w.createHref(I);try{s.pushState(D,"",P)}catch(H){if(H instanceof DOMException&&H.name==="DataCloneError")throw H;i.location.assign(P)}a&&c&&c({action:l,location:w.location,delta:1})}function y(A,M){l="REPLACE";let I=Jw(w.location,A,M);d=p();let D=oI(I,d),P=w.createHref(I);s.replaceState(D,"",P),a&&c&&c({action:l,location:w.location,delta:0})}function C(A){return L8(A)}let w={get action(){return l},get location(){return t(i,s)},listen(A){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(sI,g),c=A,()=>{i.removeEventListener(sI,g),c=null}},createHref(A){return n(i,A)},createURL:C,encodeLocation(A){let M=C(A);return{pathname:M.pathname,search:M.search,hash:M.hash}},push:_,replace:y,go(A){return s.go(A)}};return w}function L8(t,n=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),oi(e,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:N0(t);return r=r.replace(/ $/,"%20"),!n&&r.startsWith("//")&&(r=e+r),new URL(r,e)}function iR(t,n,e="/"){return F8(t,n,e,!1)}function F8(t,n,e,r){let i=typeof n=="string"?Ig(n):n,a=Gc(i.pathname||"/",e);if(a==null)return null;let s=aR(t);H8(s);let l=null;for(let c=0;l==null&&c<s.length;++c){let d=$8(a);l=Y8(s[c],d,r)}return l}function aR(t,n=[],e=[],r="",i=!1){let a=(s,l,c=i,d)=>{let p={relativePath:d===void 0?s.path||"":d,caseSensitive:s.caseSensitive===!0,childrenIndex:l,route:s};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(r)&&c)return;oi(p.relativePath.startsWith(r),`Absolute route path "${p.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(r.length)}let g=Pc([r,p.relativePath]),_=e.concat(p);s.children&&s.children.length>0&&(oi(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),aR(s.children,n,_,g,c)),!(s.path==null&&!s.index)&&n.push({path:g,score:W8(g,s.index),routesMeta:_})};return t.forEach((s,l)=>{if(s.path===""||!s.path?.includes("?"))a(s,l);else for(let c of sR(s.path))a(s,l,!0,c)}),n}function sR(t){let n=t.split("/");if(n.length===0)return[];let[e,...r]=n,i=e.endsWith("?"),a=e.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let s=sR(r.join("/")),l=[];return l.push(...s.map(c=>c===""?a:[a,c].join("/"))),i&&l.push(...s),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function H8(t){t.sort((n,e)=>n.score!==e.score?e.score-n.score:K8(n.routesMeta.map(r=>r.childrenIndex),e.routesMeta.map(r=>r.childrenIndex)))}var j8=/^:[\w-]+$/,G8=3,V8=2,B8=1,z8=10,q8=-2,lI=t=>t==="*";function W8(t,n){let e=t.split("/"),r=e.length;return e.some(lI)&&(r+=q8),n&&(r+=V8),e.filter(i=>!lI(i)).reduce((i,a)=>i+(j8.test(a)?G8:a===""?B8:z8),r)}function K8(t,n){return t.length===n.length&&t.slice(0,-1).every((e,r)=>e===n[r])?t[t.length-1]-n[n.length-1]:0}function Y8(t,n,e=!1){let{routesMeta:r}=t,i={},a="/",s=[];for(let l=0;l<r.length;++l){let c=r[l],d=l===r.length-1,p=a==="/"?n:n.slice(a.length)||"/",g=t1({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},p),_=c.route;if(!g&&d&&e&&!r[r.length-1].route.index&&(g=t1({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},p)),!g)return null;Object.assign(i,g.params),s.push({params:i,pathname:Pc([a,g.pathname]),pathnameBase:tF(Pc([a,g.pathnameBase])),route:_}),g.pathnameBase!=="/"&&(a=Pc([a,g.pathnameBase]))}return s}function t1(t,n){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[e,r]=Q8(t.path,t.caseSensitive,t.end),i=n.match(e);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((c,{paramName:d,isOptional:p},g)=>{if(d==="*"){let y=l[g]||"";s=a.slice(0,a.length-y.length).replace(/(.)\/+$/,"$1")}const _=l[g];return p&&!_?c[d]=void 0:c[d]=(_||"").replace(/%2F/g,"/"),c},{}),pathname:a,pathnameBase:s,pattern:t}}function Q8(t,n=!1,e=!0){Yl(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,s,l)=>(r.push({paramName:s,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,n?void 0:"i"),r]}function $8(t){try{return t.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return Yl(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${n}).`),t}}function Gc(t,n){if(n==="/")return t;if(!t.toLowerCase().startsWith(n.toLowerCase()))return null;let e=n.endsWith("/")?n.length-1:n.length,r=t.charAt(e);return r&&r!=="/"?null:t.slice(e)||"/"}var X8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Z8=t=>X8.test(t);function J8(t,n="/"){let{pathname:e,search:r="",hash:i=""}=typeof t=="string"?Ig(t):t,a;if(e)if(Z8(e))a=e;else{if(e.includes("//")){let s=e;e=e.replace(/\/\/+/g,"/"),Yl(!1,`Pathnames cannot have embedded double slashes - normalizing ${s} -> ${e}`)}e.startsWith("/")?a=uI(e.substring(1),"/"):a=uI(e,n)}else a=n;return{pathname:a,search:nF(r),hash:rF(i)}}function uI(t,n){let e=n.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?e.length>1&&e.pop():r!=="."&&e.push(r)}),e.length>1?e.join("/"):"/"}function kC(t,n,e,r){return`Cannot include a '${t}' character in a manually specified \`to.${n}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function eF(t){return t.filter((n,e)=>e===0||n.route.path&&n.route.path.length>0)}function oR(t){let n=eF(t);return n.map((e,r)=>r===n.length-1?e.pathname:e.pathnameBase)}function lR(t,n,e,r=!1){let i;typeof t=="string"?i=Ig(t):(i={...t},oi(!i.pathname||!i.pathname.includes("?"),kC("?","pathname","search",i)),oi(!i.pathname||!i.pathname.includes("#"),kC("#","pathname","hash",i)),oi(!i.search||!i.search.includes("#"),kC("#","search","hash",i)));let a=t===""||i.pathname==="",s=a?"/":i.pathname,l;if(s==null)l=e;else{let g=n.length-1;if(!r&&s.startsWith("..")){let _=s.split("/");for(;_[0]==="..";)_.shift(),g-=1;i.pathname=_.join("/")}l=g>=0?n[g]:"/"}let c=J8(i,l),d=s&&s!=="/"&&s.endsWith("/"),p=(a||s===".")&&e.endsWith("/");return!c.pathname.endsWith("/")&&(d||p)&&(c.pathname+="/"),c}var Pc=t=>t.join("/").replace(/\/\/+/g,"/"),tF=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),nF=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,rF=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function iF(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var uR=["POST","PUT","PATCH","DELETE"];new Set(uR);var aF=["GET",...uR];new Set(aF);var Mg=k.createContext(null);Mg.displayName="DataRouter";var K1=k.createContext(null);K1.displayName="DataRouterState";k.createContext(!1);var cR=k.createContext({isTransitioning:!1});cR.displayName="ViewTransition";var sF=k.createContext(new Map);sF.displayName="Fetchers";var oF=k.createContext(null);oF.displayName="Await";var qu=k.createContext(null);qu.displayName="Navigation";var G0=k.createContext(null);G0.displayName="Location";var Wc=k.createContext({outlet:null,matches:[],isDataRoute:!1});Wc.displayName="Route";var j3=k.createContext(null);j3.displayName="RouteError";function lF(t,{relative:n}={}){oi(V0(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:r}=k.useContext(qu),{hash:i,pathname:a,search:s}=B0(t,{relative:n}),l=a;return e!=="/"&&(l=a==="/"?e:Pc([e,a])),r.createHref({pathname:l,search:s,hash:i})}function V0(){return k.useContext(G0)!=null}function Kc(){return oi(V0(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(G0).location}var dR="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function hR(t){k.useContext(qu).static||k.useLayoutEffect(t)}function uF(){let{isDataRoute:t}=k.useContext(Wc);return t?CF():cF()}function cF(){oi(V0(),"useNavigate() may be used only in the context of a <Router> component.");let t=k.useContext(Mg),{basename:n,navigator:e}=k.useContext(qu),{matches:r}=k.useContext(Wc),{pathname:i}=Kc(),a=JSON.stringify(oR(r)),s=k.useRef(!1);return hR(()=>{s.current=!0}),k.useCallback((l,c={})=>{if(Yl(s.current,dR),!s.current)return;if(typeof l=="number"){e.go(l);return}let d=lR(l,JSON.parse(a),i,c.relative==="path");t==null&&n!=="/"&&(d.pathname=d.pathname==="/"?n:Pc([n,d.pathname])),(c.replace?e.replace:e.push)(d,c.state,c)},[n,e,a,i,t])}k.createContext(null);function B0(t,{relative:n}={}){let{matches:e}=k.useContext(Wc),{pathname:r}=Kc(),i=JSON.stringify(oR(e));return k.useMemo(()=>lR(t,JSON.parse(i),r,n==="path"),[t,i,r,n])}function dF(t,n){return fR(t,n)}function fR(t,n,e,r,i){oi(V0(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=k.useContext(qu),{matches:s}=k.useContext(Wc),l=s[s.length-1],c=l?l.params:{},d=l?l.pathname:"/",p=l?l.pathnameBase:"/",g=l&&l.route;{let I=g&&g.path||"";pR(d,!g||I.endsWith("*")||I.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${I}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${I}"> to <Route path="${I==="/"?"*":`${I}/*`}">.`)}let _=Kc(),y;if(n){let I=typeof n=="string"?Ig(n):n;oi(p==="/"||I.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${I.pathname}" was given in the \`location\` prop.`),y=I}else y=_;let C=y.pathname||"/",w=C;if(p!=="/"){let I=p.replace(/^\//,"").split("/");w="/"+C.replace(/^\//,"").split("/").slice(I.length).join("/")}let A=iR(t,{pathname:w});Yl(g||A!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),Yl(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let M=gF(A&&A.map(I=>Object.assign({},I,{params:Object.assign({},c,I.params),pathname:Pc([p,a.encodeLocation?a.encodeLocation(I.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?p:Pc([p,a.encodeLocation?a.encodeLocation(I.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:I.pathnameBase])})),s,e,r,i);return n&&M?k.createElement(G0.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},M):M}function hF(){let t=EF(),n=iF(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),e=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",t),s=k.createElement(k.Fragment,null,k.createElement("p",null," Hey developer "),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:a},"ErrorBoundary")," or"," ",k.createElement("code",{style:a},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},n),e?k.createElement("pre",{style:i},e):null,s)}var fF=k.createElement(hF,null),pF=class extends k.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){this.props.onError?this.props.onError(t,n):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?k.createElement(Wc.Provider,{value:this.props.routeContext},k.createElement(j3.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function mF({routeContext:t,match:n,children:e}){let r=k.useContext(Mg);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),k.createElement(Wc.Provider,{value:t},e)}function gF(t,n=[],e=null,r=null,i=null){if(t==null){if(!e)return null;if(e.errors)t=e.matches;else if(n.length===0&&!e.initialized&&e.matches.length>0)t=e.matches;else return null}let a=t,s=e?.errors;if(s!=null){let p=a.findIndex(g=>g.route.id&&s?.[g.route.id]!==void 0);oi(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),a=a.slice(0,Math.min(a.length,p+1))}let l=!1,c=-1;if(e)for(let p=0;p<a.length;p++){let g=a[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(c=p),g.route.id){let{loaderData:_,errors:y}=e,C=g.route.loader&&!_.hasOwnProperty(g.route.id)&&(!y||y[g.route.id]===void 0);if(g.route.lazy||C){l=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}let d=e&&r?(p,g)=>{r(p,{location:e.location,params:e.matches?.[0]?.params??{},errorInfo:g})}:void 0;return a.reduceRight((p,g,_)=>{let y,C=!1,w=null,A=null;e&&(y=s&&g.route.id?s[g.route.id]:void 0,w=g.route.errorElement||fF,l&&(c<0&&_===0?(pR("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),C=!0,A=null):c===_&&(C=!0,A=g.route.hydrateFallbackElement||null)));let M=n.concat(a.slice(0,_+1)),I=()=>{let D;return y?D=w:C?D=A:g.route.Component?D=k.createElement(g.route.Component,null):g.route.element?D=g.route.element:D=p,k.createElement(mF,{match:g,routeContext:{outlet:p,matches:M,isDataRoute:e!=null},children:D})};return e&&(g.route.ErrorBoundary||g.route.errorElement||_===0)?k.createElement(pF,{location:e.location,revalidation:e.revalidation,component:w,error:y,children:I(),routeContext:{outlet:null,matches:M,isDataRoute:!0},onError:d}):I()},null)}function G3(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vF(t){let n=k.useContext(Mg);return oi(n,G3(t)),n}function _F(t){let n=k.useContext(K1);return oi(n,G3(t)),n}function yF(t){let n=k.useContext(Wc);return oi(n,G3(t)),n}function V3(t){let n=yF(t),e=n.matches[n.matches.length-1];return oi(e.route.id,`${t} can only be used on routes that contain a unique "id"`),e.route.id}function bF(){return V3("useRouteId")}function EF(){let t=k.useContext(j3),n=_F("useRouteError"),e=V3("useRouteError");return t!==void 0?t:n.errors?.[e]}function CF(){let{router:t}=vF("useNavigate"),n=V3("useNavigate"),e=k.useRef(!1);return hR(()=>{e.current=!0}),k.useCallback(async(r,i={})=>{Yl(e.current,dR),e.current&&(typeof r=="number"?t.navigate(r):await t.navigate(r,{fromRouteId:n,...i}))},[t,n])}var cI={};function pR(t,n,e){!n&&!cI[t]&&(cI[t]=!0,Yl(!1,e))}k.memo(wF);function wF({routes:t,future:n,state:e,unstable_onError:r}){return fR(t,void 0,e,r,n)}function mR(t){oi(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function NF({basename:t="/",children:n=null,location:e,navigationType:r="POP",navigator:i,static:a=!1}){oi(!V0(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=t.replace(/^\/*/,"/"),l=k.useMemo(()=>({basename:s,navigator:i,static:a,future:{}}),[s,i,a]);typeof e=="string"&&(e=Ig(e));let{pathname:c="/",search:d="",hash:p="",state:g=null,key:_="default"}=e,y=k.useMemo(()=>{let C=Gc(c,s);return C==null?null:{location:{pathname:C,search:d,hash:p,state:g,key:_},navigationType:r}},[s,c,d,p,g,_,r]);return Yl(y!=null,`<Router basename="${s}"> is not able to match the URL "${c}${d}${p}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:k.createElement(qu.Provider,{value:l},k.createElement(G0.Provider,{children:n,value:y}))}function TF({children:t,location:n}){return dF(eN(t),n)}function eN(t,n=[]){let e=[];return k.Children.forEach(t,(r,i)=>{if(!k.isValidElement(r))return;let a=[...n,i];if(r.type===k.Fragment){e.push.apply(e,eN(r.props.children,a));return}oi(r.type===mR,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),oi(!r.props.index||!r.props.children,"An index route cannot have child routes.");let s={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=eN(r.props.children,a)),e.push(s)}),e}var PE="get",UE="application/x-www-form-urlencoded";function Y1(t){return t!=null&&typeof t.tagName=="string"}function SF(t){return Y1(t)&&t.tagName.toLowerCase()==="button"}function AF(t){return Y1(t)&&t.tagName.toLowerCase()==="form"}function IF(t){return Y1(t)&&t.tagName.toLowerCase()==="input"}function MF(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function OF(t,n){return t.button===0&&(!n||n==="_self")&&!MF(t)}var aE=null;function kF(){if(aE===null)try{new FormData(document.createElement("form"),0),aE=!1}catch{aE=!0}return aE}var RF=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function RC(t){return t!=null&&!RF.has(t)?(Yl(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${UE}"`),null):t}function DF(t,n){let e,r,i,a,s;if(AF(t)){let l=t.getAttribute("action");r=l?Gc(l,n):null,e=t.getAttribute("method")||PE,i=RC(t.getAttribute("enctype"))||UE,a=new FormData(t)}else if(SF(t)||IF(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||l.getAttribute("action");if(r=c?Gc(c,n):null,e=t.getAttribute("formmethod")||l.getAttribute("method")||PE,i=RC(t.getAttribute("formenctype"))||RC(l.getAttribute("enctype"))||UE,a=new FormData(l,t),!kF()){let{name:d,type:p,value:g}=t;if(p==="image"){let _=d?`${d}.`:"";a.append(`${_}x`,"0"),a.append(`${_}y`,"0")}else d&&a.append(d,g)}}else{if(Y1(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=PE,r=null,i=UE,s=t}return a&&i==="text/plain"&&(s=a,a=void 0),{action:r,method:e.toLowerCase(),encType:i,formData:a,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function B3(t,n){if(t===!1||t===null||typeof t>"u")throw new Error(n)}function xF(t,n,e){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${e}`:n&&Gc(r.pathname,n)==="/"?r.pathname=`${n.replace(/\/$/,"")}/_root.${e}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${e}`,r}async function PF(t,n){if(t.id in n)return n[t.id];try{let e=await import(t.module);return n[t.id]=e,e}catch(e){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function UF(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function LF(t,n,e){let r=await Promise.all(t.map(async i=>{let a=n.routes[i.route.id];if(a){let s=await PF(a,e);return s.links?s.links():[]}return[]}));return GF(r.flat(1).filter(UF).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function dI(t,n,e,r,i,a){let s=(c,d)=>e[d]?c.route.id!==e[d].route.id:!0,l=(c,d)=>e[d].pathname!==c.pathname||e[d].route.path?.endsWith("*")&&e[d].params["*"]!==c.params["*"];return a==="assets"?n.filter((c,d)=>s(c,d)||l(c,d)):a==="data"?n.filter((c,d)=>{let p=r.routes[c.route.id];if(!p||!p.hasLoader)return!1;if(s(c,d)||l(c,d))return!0;if(c.route.shouldRevalidate){let g=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:e[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function FF(t,n,{includeHydrateFallback:e}={}){return HF(t.map(r=>{let i=n.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),e&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function HF(t){return[...new Set(t)]}function jF(t){let n={},e=Object.keys(t).sort();for(let r of e)n[r]=t[r];return n}function GF(t,n){let e=new Set;return new Set(n),t.reduce((r,i)=>{let a=JSON.stringify(jF(i));return e.has(a)||(e.add(a),r.push({key:a,link:i})),r},[])}function gR(){let t=k.useContext(Mg);return B3(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function VF(){let t=k.useContext(K1);return B3(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var z3=k.createContext(void 0);z3.displayName="FrameworkContext";function vR(){let t=k.useContext(z3);return B3(t,"You must render this element inside a <HydratedRouter> element"),t}function BF(t,n){let e=k.useContext(z3),[r,i]=k.useState(!1),[a,s]=k.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:p,onTouchStart:g}=n,_=k.useRef(null);k.useEffect(()=>{if(t==="render"&&s(!0),t==="viewport"){let w=M=>{M.forEach(I=>{s(I.isIntersecting)})},A=new IntersectionObserver(w,{threshold:.5});return _.current&&A.observe(_.current),()=>{A.disconnect()}}},[t]),k.useEffect(()=>{if(r){let w=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(w)}}},[r]);let y=()=>{i(!0)},C=()=>{i(!1),s(!1)};return e?t!=="intent"?[a,_,{}]:[a,_,{onFocus:N_(l,y),onBlur:N_(c,C),onMouseEnter:N_(d,y),onMouseLeave:N_(p,C),onTouchStart:N_(g,y)}]:[!1,_,{}]}function N_(t,n){return e=>{t&&t(e),e.defaultPrevented||n(e)}}function zF({page:t,...n}){let{router:e}=gR(),r=k.useMemo(()=>iR(e.routes,t,e.basename),[e.routes,t,e.basename]);return r?k.createElement(WF,{page:t,matches:r,...n}):null}function qF(t){let{manifest:n,routeModules:e}=vR(),[r,i]=k.useState([]);return k.useEffect(()=>{let a=!1;return LF(t,n,e).then(s=>{a||i(s)}),()=>{a=!0}},[t,n,e]),r}function WF({page:t,matches:n,...e}){let r=Kc(),{manifest:i,routeModules:a}=vR(),{basename:s}=gR(),{loaderData:l,matches:c}=VF(),d=k.useMemo(()=>dI(t,n,c,i,r,"data"),[t,n,c,i,r]),p=k.useMemo(()=>dI(t,n,c,i,r,"assets"),[t,n,c,i,r]),g=k.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let C=new Set,w=!1;if(n.forEach(M=>{let I=i.routes[M.route.id];!I||!I.hasLoader||(!d.some(D=>D.route.id===M.route.id)&&M.route.id in l&&a[M.route.id]?.shouldRevalidate||I.hasClientLoader?w=!0:C.add(M.route.id))}),C.size===0)return[];let A=xF(t,s,"data");return w&&C.size>0&&A.searchParams.set("_routes",n.filter(M=>C.has(M.route.id)).map(M=>M.route.id).join(",")),[A.pathname+A.search]},[s,l,r,i,d,n,t,a]),_=k.useMemo(()=>FF(p,i),[p,i]),y=qF(p);return k.createElement(k.Fragment,null,g.map(C=>k.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...e})),_.map(C=>k.createElement("link",{key:C,rel:"modulepreload",href:C,...e})),y.map(({key:C,link:w})=>k.createElement("link",{key:C,nonce:e.nonce,...w})))}function KF(...t){return n=>{t.forEach(e=>{typeof e=="function"?e(n):e!=null&&(e.current=n)})}}var _R=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{_R&&(window.__reactRouterVersion="7.9.6")}catch{}function YF({basename:t,children:n,window:e}){let r=k.useRef();r.current==null&&(r.current=x8({window:e,v5Compat:!0}));let i=r.current,[a,s]=k.useState({action:i.action,location:i.location}),l=k.useCallback(c=>{k.startTransition(()=>s(c))},[s]);return k.useLayoutEffect(()=>i.listen(l),[i,l]),k.createElement(NF,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:i})}var yR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bR=k.forwardRef(function({onClick:t,discover:n="render",prefetch:e="none",relative:r,reloadDocument:i,replace:a,state:s,target:l,to:c,preventScrollReset:d,viewTransition:p,...g},_){let{basename:y}=k.useContext(qu),C=typeof c=="string"&&yR.test(c),w,A=!1;if(typeof c=="string"&&C&&(w=c,_R))try{let Y=new URL(window.location.href),F=c.startsWith("//")?new URL(Y.protocol+c):new URL(c),ne=Gc(F.pathname,y);F.origin===Y.origin&&ne!=null?c=ne+F.search+F.hash:A=!0}catch{Yl(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let M=lF(c,{relative:r}),[I,D,P]=BF(e,g),H=ZF(c,{replace:a,state:s,target:l,preventScrollReset:d,relative:r,viewTransition:p});function L(Y){t&&t(Y),Y.defaultPrevented||H(Y)}let G=k.createElement("a",{...g,...P,href:w||M,onClick:A||i?t:L,ref:KF(_,D),target:l,"data-discover":!C&&n==="render"?"true":void 0});return I&&!C?k.createElement(k.Fragment,null,G,k.createElement(zF,{page:M})):G});bR.displayName="Link";var QF=k.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:e="",end:r=!1,style:i,to:a,viewTransition:s,children:l,...c},d){let p=B0(a,{relative:c.relative}),g=Kc(),_=k.useContext(K1),{navigator:y,basename:C}=k.useContext(qu),w=_!=null&&r9(p)&&s===!0,A=y.encodeLocation?y.encodeLocation(p).pathname:p.pathname,M=g.pathname,I=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;n||(M=M.toLowerCase(),I=I?I.toLowerCase():null,A=A.toLowerCase()),I&&C&&(I=Gc(I,C)||I);const D=A!=="/"&&A.endsWith("/")?A.length-1:A.length;let P=M===A||!r&&M.startsWith(A)&&M.charAt(D)==="/",H=I!=null&&(I===A||!r&&I.startsWith(A)&&I.charAt(A.length)==="/"),L={isActive:P,isPending:H,isTransitioning:w},G=P?t:void 0,Y;typeof e=="function"?Y=e(L):Y=[e,P?"active":null,H?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let F=typeof i=="function"?i(L):i;return k.createElement(bR,{...c,"aria-current":G,className:Y,ref:d,style:F,to:a,viewTransition:s},typeof l=="function"?l(L):l)});QF.displayName="NavLink";var $F=k.forwardRef(({discover:t="render",fetcherKey:n,navigate:e,reloadDocument:r,replace:i,state:a,method:s=PE,action:l,onSubmit:c,relative:d,preventScrollReset:p,viewTransition:g,..._},y)=>{let C=t9(),w=n9(l,{relative:d}),A=s.toLowerCase()==="get"?"get":"post",M=typeof l=="string"&&yR.test(l),I=D=>{if(c&&c(D),D.defaultPrevented)return;D.preventDefault();let P=D.nativeEvent.submitter,H=P?.getAttribute("formmethod")||s;C(P||D.currentTarget,{fetcherKey:n,method:H,navigate:e,replace:i,state:a,relative:d,preventScrollReset:p,viewTransition:g})};return k.createElement("form",{ref:y,method:A,action:w,onSubmit:r?c:I,..._,"data-discover":!M&&t==="render"?"true":void 0})});$F.displayName="Form";function XF(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ER(t){let n=k.useContext(Mg);return oi(n,XF(t)),n}function ZF(t,{target:n,replace:e,state:r,preventScrollReset:i,relative:a,viewTransition:s}={}){let l=uF(),c=Kc(),d=B0(t,{relative:a});return k.useCallback(p=>{if(OF(p,n)){p.preventDefault();let g=e!==void 0?e:N0(c)===N0(d);l(t,{replace:g,state:r,preventScrollReset:i,relative:a,viewTransition:s})}},[c,l,d,e,r,n,t,i,a,s])}var JF=0,e9=()=>`__${String(++JF)}__`;function t9(){let{router:t}=ER("useSubmit"),{basename:n}=k.useContext(qu),e=bF();return k.useCallback(async(r,i={})=>{let{action:a,method:s,encType:l,formData:c,body:d}=DF(r,n);if(i.navigate===!1){let p=i.fetcherKey||e9();await t.fetch(p,e,i.action||a,{preventScrollReset:i.preventScrollReset,formData:c,body:d,formMethod:i.method||s,formEncType:i.encType||l,flushSync:i.flushSync})}else await t.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:c,body:d,formMethod:i.method||s,formEncType:i.encType||l,replace:i.replace,state:i.state,fromRouteId:e,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,n,e])}function n9(t,{relative:n}={}){let{basename:e}=k.useContext(qu),r=k.useContext(Wc);oi(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...B0(t||".",{relative:n})},s=Kc();if(t==null){a.search=s.search;let l=new URLSearchParams(a.search),c=l.getAll("index");if(c.some(d=>d==="")){l.delete("index"),c.filter(p=>p).forEach(p=>l.append("index",p));let d=l.toString();a.search=d?`?${d}`:""}}return(!t||t===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(a.pathname=a.pathname==="/"?e:Pc([e,a.pathname])),N0(a)}function r9(t,{relative:n}={}){let e=k.useContext(cR);oi(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=ER("useViewTransitionState"),i=B0(t,{relative:n});if(!e.isTransitioning)return!1;let a=Gc(e.currentLocation.pathname,r)||e.currentLocation.pathname,s=Gc(e.nextLocation.pathname,r)||e.nextLocation.pathname;return t1(i.pathname,s)!=null||t1(i.pathname,a)!=null}var q3=Nk();const CR=k.createContext(),i9=({children:t})=>{const[n,e]=k.useState("kr"),r=()=>{e(i=>i==="kr"?"en":"kr")};return oe.jsx(CR.Provider,{value:{language:n,toggleLanguage:r},children:t})},W3=()=>k.useContext(CR),a9=()=>{const[t,n]=k.useState(!1),[e,r]=k.useState(!1),{language:i,toggleLanguage:a}=W3();k.useEffect(()=>{const l=()=>{window.scrollY>50?n(!0):n(!1)};return window.addEventListener("scroll",l),()=>window.removeEventListener("scroll",l)},[]);const s=()=>{r(!e)};return oe.jsx("nav",{className:`navbar ${t?"scrolled":""}`,children:oe.jsxs("div",{className:"container navbar-container",children:[oe.jsxs("div",{className:"menu-icon",onClick:s,children:[oe.jsx("div",{className:`bar ${e?"open":""}`}),oe.jsx("div",{className:`bar ${e?"open":""}`}),oe.jsx("div",{className:`bar ${e?"open":""}`})]}),oe.jsxs("ul",{className:`nav-links ${e?"active":""}`,children:[oe.jsx("li",{children:oe.jsxs("a",{href:"https://github.com/MorningNembi",target:"_blank",rel:"noopener noreferrer",className:"github-link",children:[oe.jsx("svg",{width:"20",height:"20",viewBox:"0 0 16 16",fill:"currentColor",children:oe.jsx("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"})}),"GitHub"]})}),oe.jsx("li",{children:oe.jsxs("a",{href:"https://www.linkedin.com/in/%EC%A0%95%ED%83%9D-%EC%9D%B4-11b812360/",target:"_blank",rel:"noopener noreferrer",className:"linkedin-link",children:[oe.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:oe.jsx("path",{d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"})}),"LinkedIn"]})}),oe.jsx("li",{children:oe.jsx("button",{className:"lang-toggle",onClick:a,children:i==="kr"?"EN":"KR"})})]})]})})};var wR={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},hI=O.createContext&&O.createContext(wR),s9=["attr","size","title"];function o9(t,n){if(t==null)return{};var e=l9(t,n),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(n.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(e[r]=t[r])}return e}function l9(t,n){if(t==null)return{};var e={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(n.indexOf(r)>=0)continue;e[r]=t[r]}return e}function n1(){return n1=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},n1.apply(this,arguments)}function fI(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,r)}return e}function r1(t){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};n%2?fI(Object(e),!0).forEach(function(r){u9(t,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):fI(Object(e)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))})}return t}function u9(t,n,e){return n=c9(n),n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function c9(t){var n=d9(t,"string");return typeof n=="symbol"?n:n+""}function d9(t,n){if(typeof t!="object"||!t)return t;var e=t[Symbol.toPrimitive];if(e!==void 0){var r=e.call(t,n);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}function NR(t){return t&&t.map((n,e)=>O.createElement(n.tag,r1({key:e},n.attr),NR(n.child)))}function ll(t){return n=>O.createElement(h9,n1({attr:r1({},t.attr)},n),NR(t.child))}function h9(t){var n=e=>{var{attr:r,size:i,title:a}=t,s=o9(t,s9),l=i||e.size||"1em",c;return e.className&&(c=e.className),t.className&&(c=(c?c+" ":"")+t.className),O.createElement("svg",n1({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},e.attr,r,s,{className:c,style:r1(r1({color:t.color||e.color},e.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),a&&O.createElement("title",null,a),t.children)};return hI!==void 0?O.createElement(hI.Consumer,null,e=>n(e)):n(wR)}function TR(t){return ll({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"},child:[]}]})(t)}function f9(t){return ll({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"},child:[]}]})(t)}function p9(t){return ll({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M320 336c0 8.84-7.16 16-16 16h-96c-8.84 0-16-7.16-16-16v-48H0v144c0 25.6 22.4 48 48 48h416c25.6 0 48-22.4 48-48V288H320v48zm144-208h-80V80c0-25.6-22.4-48-48-48H176c-25.6 0-48 22.4-48 48v48H48c-25.6 0-48 22.4-48 48v80h512v-80c0-25.6-22.4-48-48-48zm-144 0H192V96h128v32z"},child:[]}]})(t)}function m9(t){return ll({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M458.622 255.92l45.985-45.005c13.708-12.977 7.316-36.039-10.664-40.339l-62.65-15.99 17.661-62.015c4.991-17.838-11.829-34.663-29.661-29.671l-61.994 17.667-15.984-62.671C337.085.197 313.765-6.276 300.99 7.228L256 53.57 211.011 7.229c-12.63-13.351-36.047-7.234-40.325 10.668l-15.984 62.671-61.995-17.667C74.87 57.907 58.056 74.738 63.046 92.572l17.661 62.015-62.65 15.99C.069 174.878-6.31 197.944 7.392 210.915l45.985 45.005-45.985 45.004c-13.708 12.977-7.316 36.039 10.664 40.339l62.65 15.99-17.661 62.015c-4.991 17.838 11.829 34.663 29.661 29.671l61.994-17.667 15.984 62.671c4.439 18.575 27.696 24.018 40.325 10.668L256 458.61l44.989 46.001c12.5 13.488 35.987 7.486 40.325-10.668l15.984-62.671 61.994 17.667c17.836 4.994 34.651-11.837 29.661-29.671l-17.661-62.015 62.65-15.99c17.987-4.302 24.366-27.367 10.664-40.339l-45.984-45.004z"},child:[]}]})(t)}function g9(t){return ll({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M416 192c0-88.4-93.1-160-208-160S0 103.6 0 192c0 34.3 14.1 65.9 38 92-13.4 30.2-35.5 54.2-35.8 54.5-2.2 2.3-2.8 5.7-1.5 8.7S4.8 352 8 352c36.6 0 66.9-12.3 88.7-25 32.2 15.7 70.3 25 111.3 25 114.9 0 208-71.6 208-160zm122 220c23.9-26 38-57.7 38-92 0-66.9-53.5-124.2-129.3-148.1.9 6.6 1.3 13.3 1.3 20.1 0 105.9-107.7 192-240 192-10.8 0-21.3-.8-31.7-1.9C207.8 439.6 281.8 480 368 480c41 0 79.1-9.2 111.3-25 21.8 12.7 52.1 25 88.7 25 3.2 0 6.1-1.9 7.3-4.8 1.3-2.9.7-6.3-1.5-8.7-.3-.3-22.4-24.2-35.8-54.5z"},child:[]}]})(t)}function v9(t){return ll({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(t)}function _9(t){return ll({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M432,320H400a16,16,0,0,0-16,16V448H64V128H208a16,16,0,0,0,16-16V80a16,16,0,0,0-16-16H48A48,48,0,0,0,0,112V464a48,48,0,0,0,48,48H400a48,48,0,0,0,48-48V336A16,16,0,0,0,432,320ZM488,0h-128c-21.37,0-32.05,25.91-17,41l35.73,35.73L135,320.37a24,24,0,0,0,0,34L157.67,377a24,24,0,0,0,34,0L435.28,133.32,471,169c15,15,41,4.5,41-17V24A24,24,0,0,0,488,0Z"},child:[]}]})(t)}function pI(t){return ll({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm64 236c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-64c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-72v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm96-114.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"},child:[]}]})(t)}function y9(t){return ll({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M622.34 153.2L343.4 67.5c-15.2-4.67-31.6-4.67-46.79 0L17.66 153.2c-23.54 7.23-23.54 38.36 0 45.59l48.63 14.94c-10.67 13.19-17.23 29.28-17.88 46.9C38.78 266.15 32 276.11 32 288c0 10.78 5.68 19.85 13.86 25.65L20.33 428.53C18.11 438.52 25.71 448 35.94 448h56.11c10.24 0 17.84-9.48 15.62-19.47L82.14 313.65C90.32 307.85 96 298.78 96 288c0-11.57-6.47-21.25-15.66-26.87.76-15.02 8.44-28.3 20.69-36.72L296.6 284.5c9.06 2.78 26.44 6.25 46.79 0l278.95-85.7c23.55-7.24 23.55-38.36 0-45.6zM352.79 315.09c-28.53 8.76-52.84 3.92-65.59 0l-145.02-44.55L128 384c0 35.35 85.96 64 192 64s192-28.65 192-64l-14.18-113.47-145.03 44.56z"},child:[]}]})(t)}function b9(t){return ll({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M500.33 0h-47.41a12 12 0 0 0-12 12.57l4 82.76A247.42 247.42 0 0 0 256 8C119.34 8 7.9 119.53 8 256.19 8.1 393.07 119.1 504 256 504a247.1 247.1 0 0 0 166.18-63.91 12 12 0 0 0 .48-17.43l-34-34a12 12 0 0 0-16.38-.55A176 176 0 1 1 402.1 157.8l-101.53-4.87a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12h200.33a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12z"},child:[]}]})(t)}function SR(t){return ll({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(t)}function E9(t){return ll({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M552 64H448V24c0-13.3-10.7-24-24-24H152c-13.3 0-24 10.7-24 24v40H24C10.7 64 0 74.7 0 88v56c0 35.7 22.5 72.4 61.9 100.7 31.5 22.7 69.8 37.1 110 41.7C203.3 338.5 240 360 240 360v72h-48c-35.3 0-64 20.7-64 56v12c0 6.6 5.4 12 12 12h296c6.6 0 12-5.4 12-12v-12c0-35.3-28.7-56-64-56h-48v-72s36.7-21.5 68.1-73.6c40.3-4.6 78.6-19 110-41.7 39.3-28.3 61.9-65 61.9-100.7V88c0-13.3-10.7-24-24-24zM99.3 192.8C74.9 175.2 64 155.6 64 144v-16h64.2c1 32.6 5.8 61.2 12.8 86.2-15.1-5.2-29.2-12.4-41.7-21.4zM512 144c0 16.1-17.7 36.1-35.3 48.8-12.5 9-26.7 16.2-41.8 21.4 7-25 11.8-53.6 12.8-86.2H512v16z"},child:[]}]})(t)}const C9=()=>oe.jsxs("footer",{className:"footer",children:[oe.jsxs("div",{className:"social-links",children:[oe.jsx("a",{href:"https://github.com/MorningNembi",target:"_blank",rel:"noopener noreferrer",children:oe.jsx(TR,{})}),oe.jsx("a",{href:"https://www.linkedin.com/in/%EC%A0%95%ED%83%9D-%EC%9D%B4-11b812360/",target:"_blank",rel:"noopener noreferrer",children:oe.jsx(f9,{})}),oe.jsx("a",{href:"mailto:cvb1060@naver.com",target:"_blank",rel:"noopener noreferrer",children:oe.jsx(v9,{})})]}),oe.jsx("p",{className:"copyright",children:"Designed & Built by Jeong-Taek Lee"})]}),AR={kr:{hero:{greeting:", ",name:"",ending:".",subtitle:"AI Engineer & Resercher",description:`    .
    AI  .`,cta:" "},about:{title:"About Me",intro:["**AI    **","    .","    ,   AI  .","****","   (2025.08)","    ","     "],tabs:{experience:"Experience",education:"Education",activities:"Activities",certs:"Certifications",awards:"Awards"},experience:[{title:"AI Synergy Planning Intern",company:"NAVER Cloud",period:"2025.09 ~ ",description:["**HyperClova X  AI    **","MCP OAuth      Naver Remote MCP ","**Clova Studio      **","MCP   (3: OAuth   MCP    ,   )","LangChain v1.0  :    AI( , 12   )"],tags:["AI Research","MCP","Agent","HyperClova X","Planning"]},{title:" AI 2",company:"Kakao Tech Bootcamp",period:"2025.02 ~ 2025.08",description:["**     ( )**","URL       ","   (, ) Multi-Agent ","**      (TestPrep AI)**","     (Top 6 / 26)"," RAG      "],tags:["Agent","RAG","LangChain","FastAPI","Python"]}],education:[{title:"",degree:" ",period:"2019.03 - 2025.08",description:[" 3.50/4.5"]}],activities:[{title:" ",role:"",period:"2022.07 ~ 2024.06",description:["    "]},{title:" ",role:"",period:"2022.01 ~ 2022.12"}],certs:[{title:"",issuer:"",date:"2024.07.12"},{title:"SQLD",issuer:"",date:"2023.12.15"},{title:"ADsP",issuer:"",date:"2023.06.16"}],awards:[{title:"Kakaotech Bootcamp Hackathon Finalist",issuer:"Kakaotech bootcamp",date:"2025",description:["TestPrep AI ","26    6  "]},{title:"",issuer:"",date:"2024",description:[" "]}]},portfolio:{title:"Projects",filters:{all:"",web:" ",ai:"AI/ML",research:""},modal:{overview:"",role:"",techStack:" ",keyFeatures:" ",achievement:"",links:{github:"GitHub",demo:"Live",paper:"Paper"}},projects:[{id:1,title:"Clova Studio  ",category:"Technical Writing",image:"/src/assets/clova-cookbook.png",description:"Clova Studio         ",details:{problem:"Clova Studio       ",solution:"LangChain, MCP, Agent            .",role:"Technical Writer & Developer",tech:["Clova Studio","MCP","LangChain","OAuth 2.0","FastMCP"],features:["MCP    3: OAuth   MCP   ( )","LangChain v1.0  :    AI ( , 12   )","LangChain DeepAgent  , Agentic RAG    ","       ","      "],achievement:"    MCP  LangChain  ,        ."},links:{demo:"https://www.ncloud-forums.com/forum/6/",github:null}},{id:2,title:"  (Moongsan)",category:"AI & Data Science",image:"src/assets/moongsan.png",description:"     & AI ",details:{problem:"  ( ,  )   ",solution:" AI  URL            .",role:"AI Engineer & Architecture Design",tech:["LangChain","LangGraph","FastAPI","MySQL","Vector DB"],features:["URL     (LangGraph  )","    (Multi-Agent Supervisor)","   ","Docker   "],achievement:"   1  100+  ,    80%  ",troubleshooting:"Vector DB      ( + )     35% ."},links:{demo:"https://moongsan.com/",github:"https://github.com/100-hours-a-week/14-YG-AI/tree/dev"}},{id:3,title:"TestPrep AI",category:"AI & Data Science",image:"src/assets/testprep.png",description:"      ",details:{problem:"       ",solution:"RAG      LLM       .",role:"AI Pipeline Architect & Backend Dev",tech:["Python","LangChain","OpenAI","Chroma","FastAPI"],features:["    (RAG)","PDF/    ","   / ","FastAPI  LLM   "],achievement:"     (Top 6 / 26),    85% ",troubleshooting:"PDF         PyMuPDF OCR     ."},links:{demo:null,github:"https://github.com/Test-Prep-AI/Model/tree/main"}},{id:4,title:"Remote MCP (Naver & Kakao)",category:"Research",image:"https://github.com/user-attachments/assets/5e38b6ae-78a9-4556-8678-9c2086912f7d",description:"OAuth   MCP  ( /,  )",details:{problem:"MCP        ",solution:"FastMCP OAuth 2.0       MCP  .",role:"Sole Developer",tech:["FastMCP","Python","OAuth 2.0","OIDC","CLOVA Studio API"],features:[": OAuth 2.0  (PKCE ),  ,   ",": OAuth 2.0 & OIDC ,  ,   ","   ","     "],achievement:"MCP  OAuth      50+  ",troubleshooting:"PKCE    state          ."},links:{demo:null,github:null}}]},resume:{title:"Skills",skillsTitle:"Technical Skills"}},en:{hero:{greeting:"Hi, I am",name:"JeongTaek Lee.",ending:"",subtitle:"AI Developer & Tech Lover",description:`I am an AI Developer focusing on user-centric AI services.
I strive to create intuitive and useful AI solutions.`,cta:"Check out my work"},about:{title:"About Me",intro:["**AI Developer Who Puts People First**","No matter how sophisticated AI technology is, if it fails to properly understand user intent and respond accordingly, it cannot be considered good technology.","I want to create intuitive and useful AI services by viewing problems from the user's perspective!","**My Values**"," Everything should be fun"," I pursue speed with safety"," I try to speak simply and listen deeply"],tabs:{experience:"Experience",education:"Education",activities:"Activities",certs:"Certifications",awards:"Awards"},experience:[{title:"AI Research & Planning Intern",company:"NAVER Cloud",period:"2025.09 ~ Present",description:["**AI Experience Research & Planning using HyperClova X**","Researched OAuth in MCP and developed Naver Remote MCP with Naver Login integration","AI industry research and feature planning","Created cookbooks for Clova Studio and Naver Cloud blog"],tags:["AI Research","MCP","OAuth","HyperClova X","Planning"]},{title:"Generative AI Track 2nd Cohort",company:"Kakao Tech Bootcamp",period:"2025.02 ~ 2025.08",description:["**Moongsan - Location-based Group Buying Service Development**","Developed automatic group buying post generation feature based on URLs","Developed AI assistant for service usage (search, participation) using natural language","**TestPrep AI - Document-based Question Generation Service Development**","Advanced to finals (Top 6 out of 26 teams) in Kakao Tech Hackathon","Built core RAG pipeline and conducted prompt engineering"],tags:["Generative AI","RAG","LangChain","FastAPI","Python"]}],education:[{title:"University of Seoul",degree:"Bachelor of Geoinformatics",period:"2019.03 - 2025.08",description:["GPA 3.50/4.5"]}],activities:[{title:"Spatial Database Lab",role:"Undergraduate Researcher",period:"2022.07 ~ 2024.06",description:["Spatial data analysis and visualization"]},{title:"Department of Geoinformatics Student Council",role:"Staff Member",period:"2022.01 ~ 2022.12"}],certs:[{title:"Big Data Analysis Engineer",issuer:"K-Data",date:""},{title:"SQLD",issuer:"K-Data",date:""},{title:"ADsP",issuer:"K-Data",date:""}],awards:[{title:"Kakaotech Bootcamp Hackathon Finalist",issuer:"Kakaotech bootcamp",date:"2025",description:["TestPrep AI Project","Selected as Top 6 out of 26 teams"]},{title:"Korea Spatial Information Industry Promotion Agency Award",issuer:"Korea Spatial Information Industry Promotion Agency",date:"2024",description:["Spatial Information Competition Award"]}]},portfolio:{title:"Projects",filters:{all:"All",web:"Web Dev",ai:"AI/ML",research:"Research"},modal:{overview:"Overview",role:"Role",techStack:"Tech Stack",keyFeatures:"Key Features",links:{github:"GitHub",demo:"Live",paper:"Paper"}},projects:[{id:1,title:"Clova Studio Cookbook Writing",category:"Technical Writing",image:"/src/assets/clova-cookbook.png",description:"Technical documentation for Clova Studio and Naver Cloud Platform",details:{problem:"Creating cookbooks for Clova Studio and Naver Cloud blog",solution:"Authored a series of practical cookbooks on various topics including LangChain, MCP, and Agent to lower the learning curve for developers.",role:"Technical Writer & Developer",tech:["Clova Studio","MCP","LangChain","OAuth 2.0","FastMCP"],features:["MCP Practical Cookbook Series Part 3: Building MCP Server with OAuth Integration (Main Author)","Building Multi-Agent with LangChain v1.0: Report AI with Middleware (Completed, scheduled for mid-December)","Upcoming cookbooks on LangChain DeepAgent and Agentic RAG","Practical code examples and detailed explanations","Continuous updates based on developer community feedback"],achievement:"The cookbook series helped developers learn MCP and LangChain usage, published on Naver Cloud official blog with high view counts."},links:{demo:"https://www.ncloud-forums.com/forum/6/",github:null}},{id:2,title:"Moongsan",category:"AI & Data Science",image:"src/assets/moongsan.png",description:"Location-based Group Buying Service & AI Automation",details:{problem:"Cumbersome procedures for group buying (post creation, participation management) and difficulty in finding information",solution:"Maximized convenience by using Generative AI to automatically create posts from URLs and a natural language chatbot for service interaction.",role:"AI Engineer & Architecture Design",tech:["LangChain","LangGraph","FastAPI","MySQL","Vector DB"],features:["Auto Post Generation from URL (LangGraph crawling pipeline)","Natural Language Service Control (Multi-Agent Supervisor)","Hybrid Search System Design","Docker-based Container Deployment"],achievement:"Acquired 100+ users within 1 month of service launch, achieved 80% reduction in post creation time",troubleshooting:"Improved search accuracy by 35% by introducing hybrid search (keyword + vector) method to enhance Vector DB search accuracy."},links:{demo:"https://moongsan.com/",github:"https://github.com/100-hours-a-week/14-YG-AI/tree/dev"}},{id:3,title:"TestPrep AI",category:"AI & Data Science",image:"src/assets/testprep.png",description:"Document-based Question Generation Service",details:{problem:"Difficulty in creating self-study questions from learning materials",solution:"Built a service that analyzes uploaded documents via RAG pipeline and automatically generates multiple-choice questions using LLM.",role:"AI Pipeline Architect & Backend Dev",tech:["Python","LangChain","OpenAI","Chroma","FastAPI"],features:["Document-based Question Generation (RAG)","PDF/Text Document Upload & Visualization","Quiz Solving & Answer/Explanation","FastAPI-based LLM Inference Server"],achievement:"Advanced to Kakao Tech Hackathon finals (Top 6 / 26 teams), achieved 85% question generation accuracy",troubleshooting:"Applied hybrid parsing method combining PyMuPDF and OCR to solve table and image processing issues during PDF parsing."},links:{demo:null,github:"https://github.com/Test-Prep-AI/Model/tree/main"}},{id:4,title:"Remote MCP (Naver & Kakao)",category:"Research",image:"https://github.com/user-attachments/assets/5e38b6ae-78a9-4556-8678-9c2086912f7d",description:"MCP Server with OAuth Integration (Naver Search/Calendar, KakaoTalk Messaging)",details:{problem:"Need for integrating external services requiring user authentication in MCP server",solution:"Implemented MCP servers integrating Naver and Kakao services by connecting FastMCP with OAuth 2.0.",role:"Sole Developer",tech:["FastMCP","Python","OAuth 2.0","OIDC","CLOVA Studio API"],features:["Naver: OAuth 2.0 Integration (PKCE support), Web Search, Calendar Schedule Addition","Kakao: OAuth 2.0 & OIDC Integration, Message Sending, Friend List Retrieval","Responsive Message Viewer","Auto Consent Processing & Token Management"],achievement:"Presented OAuth authentication integration case to MCP ecosystem, gained 50+ stars in community",troubleshooting:"Introduced session-based state management to resolve state parameter validation errors during PKCE flow implementation."},links:{demo:null,github:null}}]},resume:{title:"Resume & Skills",skillsTitle:"Technical Skills",download:"Download PDF"}}},w9=({onComplete:t})=>{const{language:n}=W3(),e=AR[n].hero,[r,i]=k.useState(!1);return k.useEffect(()=>{const a=setTimeout(()=>{i(!0)},2500),s=setTimeout(()=>{t()},3500);return()=>{clearTimeout(a),clearTimeout(s)}},[t]),oe.jsx(cg.section,{className:"intro-hero",initial:{opacity:1},animate:{opacity:r?0:1},transition:{duration:1,ease:"easeInOut"},children:oe.jsxs("div",{className:"intro-hero-content",children:[oe.jsx(cg.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},children:oe.jsxs("h1",{className:"intro-hero-title",children:[oe.jsxs("span",{className:"intro-greeting",children:[e.greeting," "]}),oe.jsx("span",{className:"intro-name",children:e.name}),oe.jsx("span",{className:"intro-greeting",children:e.ending})]})}),oe.jsx(cg.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.5},children:oe.jsx("p",{className:"intro-subtitle",children:e.subtitle})})]})})},N9=()=>{const{pathname:t}=Kc();return k.useEffect(()=>{window.scrollTo(0,0)},[t]),null},T9="/assets/profile-BKU4iKrf.jpeg",S9=()=>{const[t,n]=k.useState(null),{language:e}=W3(),r=AR[e],i=r.portfolio.projects.find(s=>s.id===t),a=s=>s.split(/(\*\*.*?\*\*)/g).map((l,c)=>l.startsWith("**")&&l.endsWith("**")?oe.jsx("strong",{children:l.slice(2,-2)},c):l);return oe.jsxs("section",{className:"resume-page",children:[oe.jsxs("div",{className:"resume-profile-section",children:[oe.jsx("div",{className:"resume-profile-image",children:oe.jsx("img",{src:T9,alt:"Profile"})}),oe.jsxs("div",{className:"resume-profile-info",children:[oe.jsx("h1",{className:"resume-profile-name",children:r.hero.name}),oe.jsx("p",{className:"resume-profile-subtitle",children:r.hero.subtitle}),oe.jsx("p",{className:"resume-profile-description",children:r.hero.description.split(`
`)[0]})]})]}),oe.jsxs("div",{className:"resume-main-grid",children:[oe.jsxs("div",{className:"resume-experience-section",children:[oe.jsxs("h2",{className:"resume-section-title",children:[oe.jsx(p9,{})," Experience"]}),oe.jsx("div",{className:"resume-experience-list",children:r.about.experience.map((s,l)=>oe.jsxs("div",{className:"resume-exp-item",children:[oe.jsxs("div",{className:"resume-exp-header",children:[oe.jsx("h3",{children:s.title}),oe.jsx("span",{className:"resume-exp-period",children:s.period})]}),oe.jsx("p",{className:"resume-exp-company",children:s.company}),oe.jsx("ul",{className:"resume-exp-description",children:s.description.slice(0,3).map((c,d)=>oe.jsx("li",{children:a(c)},d))}),s.tags&&oe.jsx("div",{className:"resume-exp-tags",children:s.tags.slice(0,4).map(c=>oe.jsx("span",{className:"resume-tag",children:c},c))})]},l))})]}),oe.jsxs("div",{className:"resume-projects-section",children:[oe.jsxs("h2",{className:"resume-section-title",children:[oe.jsx(pI,{})," Projects"]}),oe.jsx("div",{className:"resume-projects-grid",children:r.portfolio.projects.map(s=>oe.jsxs(cg.div,{className:"resume-project-card",onClick:()=>n(s.id),whileHover:{y:-3,boxShadow:"0 10px 30px rgba(0,0,0,0.15)"},transition:{duration:.2},children:[oe.jsx("span",{className:"resume-project-category",children:s.category}),oe.jsx("h3",{className:"resume-project-title",children:s.title}),oe.jsx("p",{className:"resume-project-desc",children:s.description})]},s.id))})]})]}),oe.jsxs("div",{className:"resume-skills-section",children:[oe.jsx("h2",{className:"resume-section-title",children:r.resume.skillsTitle}),oe.jsxs("div",{className:"resume-skills-grid",children:[oe.jsxs("div",{className:"resume-skills-category",children:[oe.jsx("h4",{children:"AI/ML & Data"}),oe.jsxs("div",{className:"resume-skills-badges",children:[oe.jsx("img",{src:"https://img.shields.io/badge/LangChain-1C3C3C?style=flat-square&logo=langchain&logoColor=white",alt:"LangChain"}),oe.jsx("img",{src:"https://img.shields.io/badge/vLLM-8A2BE2?style=flat-square&logoColor=white",alt:"vLLM"}),oe.jsx("img",{src:"https://img.shields.io/badge/RAG-FF6B6B?style=flat-square&logoColor=white",alt:"RAG"}),oe.jsx("img",{src:"https://img.shields.io/badge/MCP-2ECC71?style=flat-square&logoColor=white",alt:"MCP"}),oe.jsx("img",{src:"https://img.shields.io/badge/PyTorch-EE4C2C?style=flat-square&logo=pytorch&logoColor=white",alt:"PyTorch"})]})]}),oe.jsxs("div",{className:"resume-skills-category",children:[oe.jsx("h4",{children:"Backend"}),oe.jsxs("div",{className:"resume-skills-badges",children:[oe.jsx("img",{src:"https://img.shields.io/badge/Python-3776AB?style=flat-square&logo=python&logoColor=white",alt:"Python"}),oe.jsx("img",{src:"https://img.shields.io/badge/FastAPI-009688?style=flat-square&logo=fastapi&logoColor=white",alt:"FastAPI"}),oe.jsx("img",{src:"https://img.shields.io/badge/PostgreSQL-336791?style=flat-square&logo=postgresql&logoColor=white",alt:"PostgreSQL"}),oe.jsx("img",{src:"https://img.shields.io/badge/Docker-2496ED?style=flat-square&logo=docker&logoColor=white",alt:"Docker"})]})]})]})]}),oe.jsxs("div",{className:"resume-bottom-section",children:[oe.jsxs("div",{className:"resume-bottom-item",children:[oe.jsxs("h3",{children:[oe.jsx(y9,{})," Education"]}),oe.jsx("p",{className:"resume-bottom-title",children:r.about.education[0].title}),oe.jsxs("p",{className:"resume-bottom-subtitle",children:[r.about.education[0].degree," (",r.about.education[0].period,")"]})]}),oe.jsxs("div",{className:"resume-bottom-item",children:[oe.jsxs("h3",{children:[oe.jsx(m9,{})," Certifications"]}),oe.jsx("p",{className:"resume-bottom-subtitle",children:r.about.certs.map(s=>s.title).join(" | ")})]}),oe.jsxs("div",{className:"resume-bottom-item",children:[oe.jsxs("h3",{children:[oe.jsx(E9,{})," Awards"]}),oe.jsx("p",{className:"resume-bottom-subtitle",children:r.about.awards.map(s=>s.title).join(" | ")})]})]}),oe.jsx(v4,{children:t&&i&&oe.jsx("div",{className:"modal-overlay",onClick:()=>n(null),children:oe.jsxs(cg.div,{layoutId:`card-${t}`,className:"modal-content",onClick:s=>s.stopPropagation(),initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},children:[oe.jsx("button",{className:"modal-close",onClick:()=>n(null),children:oe.jsx(SR,{})}),oe.jsxs("div",{className:"modal-header",children:[oe.jsx("img",{src:i.image,alt:i.title,className:"modal-image"}),oe.jsxs("div",{className:"modal-title-row",children:[oe.jsxs("div",{children:[oe.jsx("span",{className:"modal-category",children:i.category}),oe.jsx("h2",{children:i.title})]}),oe.jsxs("div",{className:"modal-links",children:[i.links.github&&oe.jsxs("a",{href:i.links.github,target:"_blank",rel:"noopener noreferrer",className:"icon-link",children:[oe.jsx(TR,{})," ",r.portfolio.modal.links.github]}),i.links.demo&&oe.jsxs("a",{href:i.links.demo,target:"_blank",rel:"noopener noreferrer",className:"icon-link",children:[oe.jsx(_9,{})," ",r.portfolio.modal.links.demo]}),i.links.paper&&oe.jsxs("a",{href:i.links.paper,target:"_blank",rel:"noopener noreferrer",className:"icon-link",children:[oe.jsx(pI,{})," ",r.portfolio.modal.links.paper]})]})]})]}),oe.jsxs("div",{className:"modal-body",children:[oe.jsxs("div",{className:"modal-section",children:[oe.jsx("h3",{children:r.portfolio.modal.overview}),oe.jsx("p",{children:i.details.problem}),oe.jsx("p",{children:i.details.solution})]}),oe.jsxs("div",{className:"modal-row",children:[oe.jsxs("div",{className:"modal-col",children:[oe.jsx("h3",{children:r.portfolio.modal.role}),oe.jsx("p",{children:i.details.role})]}),oe.jsxs("div",{className:"modal-col",children:[oe.jsx("h3",{children:r.portfolio.modal.techStack}),oe.jsx("div",{className:"tech-tags",children:i.details.tech.map(s=>oe.jsx("span",{className:"tech-tag",children:s},s))})]})]}),oe.jsxs("div",{className:"modal-section",children:[oe.jsx("h3",{children:r.portfolio.modal.keyFeatures}),oe.jsx("ul",{className:"feature-list",children:i.details.features.map((s,l)=>oe.jsx("li",{children:s},l))})]}),i.details.achievement&&oe.jsxs("div",{className:"modal-section",children:[oe.jsx("h3",{children:r.portfolio.modal.achievement}),oe.jsx("p",{children:i.details.achievement})]}),i.details.troubleshooting&&oe.jsxs("div",{className:"modal-section",children:[oe.jsx("h3",{children:"Troubleshooting"}),oe.jsx("p",{children:i.details.troubleshooting})]})]})]})})})]})},A9=()=>oe.jsx(S9,{}),I9=({onClick:t,isOpen:n})=>oe.jsxs("button",{className:`chatbot-button ${n?"open":""}`,onClick:t,"aria-label":"Open chatbot",children:[oe.jsx(g9,{className:"chatbot-icon"}),oe.jsx("span",{className:"pulse-indicator"})]});var tN=function(t,n){return tN=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},tN(t,n)};function IR(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");tN(t,n);function e(){this.constructor=t}t.prototype=n===null?Object.create(n):(e.prototype=n.prototype,new e)}var ke=function(){return ke=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++){n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ke.apply(this,arguments)};function nl(t,n,e,r){function i(a){return a instanceof e?a:new e(function(s){s(a)})}return new(e||(e=Promise))(function(a,s){function l(p){try{d(r.next(p))}catch(g){s(g)}}function c(p){try{d(r.throw(p))}catch(g){s(g)}}function d(p){p.done?a(p.value):i(p.value).then(l,c)}d((r=r.apply(t,n||[])).next())})}function rl(t,n){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=l(0),s.throw=l(1),s.return=l(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(d){return function(p){return c([d,p])}}function c(d){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,d[0]&&(e=0)),e;)try{if(r=1,i&&(a=d[0]&2?i.return:d[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,d[1])).done)return a;switch(i=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return e.label++,{value:d[1],done:!1};case 5:e.label++,i=d[1],d=[0];continue;case 7:d=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){e=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){e.label=d[1];break}if(d[0]===6&&e.label<a[1]){e.label=a[1],a=d;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(d);break}a[2]&&e.ops.pop(),e.trys.pop();continue}d=n.call(t,e)}catch(p){d=[6,p],i=0}finally{r=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function et(t,n,e){if(e||arguments.length===2)for(var r=0,i=n.length,a;r<i;r++)(a||!(r in n))&&(a||(a=Array.prototype.slice.call(n,0,r)),a[r]=n[r]);return t.concat(a||Array.prototype.slice.call(n))}const M9="modulepreload",O9=function(t){return"/"+t},mI={},LE=function(t,n,e){let r=Promise.resolve();if(n&&n.length>0){let a=function(c){return Promise.all(c.map(d=>Promise.resolve(d).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),l=s?.nonce||s?.getAttribute("nonce");r=a(n.map(c=>{if(c=O9(c),c in mI)return;mI[c]=!0;const d=c.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${p}`))return;const g=document.createElement("link");if(g.rel=d?"stylesheet":M9,d||(g.as="script"),g.crossOrigin="",g.href=c,l&&g.setAttribute("nonce",l),document.head.appendChild(g),d)return new Promise((_,y)=>{g.addEventListener("load",_),g.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=a,window.dispatchEvent(s),!s.defaultPrevented)throw a}return r.then(a=>{for(const s of a||[])s.status==="rejected"&&i(s.reason);return t().catch(i)})};var nN=function(t,n){return nN=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])},nN(t,n)};function U(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function e(){this.constructor=t}nN(t,n),t.prototype=n===null?Object.create(n):(e.prototype=n.prototype,new e)}var z=function(){return z=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var i in n=arguments[e])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t},z.apply(this,arguments)};function k9(t,n){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(e[r[i]]=t[r[i]])}return e}function S(t,n,e,r){return new(e||(e=Promise))((function(i,a){function s(d){try{c(r.next(d))}catch(p){a(p)}}function l(d){try{c(r.throw(d))}catch(p){a(p)}}function c(d){var p;d.done?i(d.value):(p=d.value,p instanceof e?p:new e((function(g){g(p)}))).then(s,l)}c((r=r.apply(t,[])).next())}))}function T(t,n){var e,r,i,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=l(0),s.throw=l(1),s.return=l(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(c){return function(d){return(function(p){if(e)throw new TypeError("Generator is already executing.");for(;s&&(s=0,p[0]&&(a=0)),a;)try{if(e=1,r&&(i=2&p[0]?r.return:p[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,p[1])).done)return i;switch(r=0,i&&(p=[2&p[0],i.value]),p[0]){case 0:case 1:i=p;break;case 4:return a.label++,{value:p[1],done:!1};case 5:a.label++,r=p[1],p=[0];continue;case 7:p=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||p[0]!==6&&p[0]!==2)){a=0;continue}if(p[0]===3&&(!i||p[1]>i[0]&&p[1]<i[3])){a.label=p[1];break}if(p[0]===6&&a.label<i[1]){a.label=i[1],i=p;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(p);break}i[2]&&a.ops.pop(),a.trys.pop();continue}p=n.call(t,a)}catch(g){p=[6,g],r=0}finally{e=i=0}if(5&p[0])throw p[1];return{value:p[0]?p[1]:void 0,done:!0}})([c,d])}}}function Re(t){var n=typeof Symbol=="function"&&Symbol.iterator,e=n&&t[n],r=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ye(t,n){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var r,i,a=e.call(t),s=[];try{for(;(n===void 0||n-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(l){i={error:l}}finally{try{r&&!r.done&&(e=a.return)&&e.call(a)}finally{if(i)throw i.error}}return s}function Je(t,n,e){if(arguments.length===2)for(var r,i=0,a=n.length;i<a;i++)!r&&i in n||(r||(r=Array.prototype.slice.call(n,0,i)),r[i]=n[i]);return t.concat(r||Array.prototype.slice.call(n))}var ze,MR="4.20.2",ch=(function(){function t(){}return Object.defineProperty(t,"OS_VERSION",{get:function(){return typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.replace(/,/g,"."):"noAgent"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"SDK_VERSION",{get:function(){return MR},enumerable:!1,configurable:!0}),Object.defineProperty(t,"SDK_MAJOR_VERSION",{get:function(){return t.SDK_VERSION.split(".")[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t,"DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL",{get:function(){return 100},enumerable:!1,configurable:!0}),Object.defineProperty(t,"INTERNAL_CALL",{get:function(){return"ic"},enumerable:!1,configurable:!0}),t})();(function(t){t[t.NON_AUTHORIZED=400108]="NON_AUTHORIZED",t[t.INVALID_TOKEN=400111]="INVALID_TOKEN",t[t.NOT_FOUND_IN_DATABASE=400201]="NOT_FOUND_IN_DATABASE",t[t.USER_AUTH_DEACTIVATED=400300]="USER_AUTH_DEACTIVATED",t[t.USER_AUTH_DELETED_OR_NOT_FOUND=400301]="USER_AUTH_DELETED_OR_NOT_FOUND",t[t.SESSION_TOKEN_EXPIRED=400302]="SESSION_TOKEN_EXPIRED",t[t.APPLICATION_NOT_FOUND=400304]="APPLICATION_NOT_FOUND",t[t.SESSION_KEY_EXPIRED=400309]="SESSION_KEY_EXPIRED",t[t.SESSION_REVOKED=400310]="SESSION_REVOKED",t[t.INVALID_SESSION_TYPE=400312]="INVALID_SESSION_TYPE",t[t.INVALID_AUTH_FOR_SERVICE=400313]="INVALID_AUTH_FOR_SERVICE",t[t.STAT_UPLOAD_NOT_ALLOWED=403200]="STAT_UPLOAD_NOT_ALLOWED",t[t.NOT_SUPPORTED_PINNED_MESSAGE_IN_REVIEW_MESSAGE=400940]="NOT_SUPPORTED_PINNED_MESSAGE_IN_REVIEW_MESSAGE",t[t.INTERNAL_SERVER_ERROR=500901]="INTERNAL_SERVER_ERROR",t[t.RATE_LIMIT_EXCEEDED=500910]="RATE_LIMIT_EXCEEDED",t[t.INVALID_REQUIRED_FORM_VALUE=400105]="INVALID_REQUIRED_FORM_VALUE",t[t.UNKNOWN_SERVER_ERROR=900200]="UNKNOWN_SERVER_ERROR",t[t.NOT_SUPPORTED_FEATURE_IN_IN_REVIEW_MESSAGE=901500]="NOT_SUPPORTED_FEATURE_IN_IN_REVIEW_MESSAGE",t[t.ERR_DUPLICATED_DATA=400202]="ERR_DUPLICATED_DATA",t[t.DEBUG_MODE_REQUIRED=7e5]="DEBUG_MODE_REQUIRED",t[t.LOST_INSTANCE=700100]="LOST_INSTANCE",t[t.CONNECTION_RENEW=700102]="CONNECTION_RENEW",t[t.INVALID_CONNECTION_STATE_TRANSITION=700200]="INVALID_CONNECTION_STATE_TRANSITION",t[t.INVALID_COMMAND=700700]="INVALID_COMMAND",t[t.XMLHTTPREQUEST_NOT_SUPPORTED=700800]="XMLHTTPREQUEST_NOT_SUPPORTED",t[t.UNKNOWN_ERROR=77e4]="UNKNOWN_ERROR",t[t.INVALID_INITIALIZATION=800100]="INVALID_INITIALIZATION",t[t.CONNECTION_REQUIRED=800101]="CONNECTION_REQUIRED",t[t.CONNECTION_CANCELED=800102]="CONNECTION_CANCELED",t[t.INVALID_PARAMETER=800110]="INVALID_PARAMETER",t[t.NOT_SUPPORTED_ERROR=800111]="NOT_SUPPORTED_ERROR",t[t.NETWORK_ERROR=800120]="NETWORK_ERROR",t[t.NETWORK_ROUTING_ERROR=800121]="NETWORK_ROUTING_ERROR",t[t.MALFORMED_DATA=800130]="MALFORMED_DATA",t[t.MALFORMED_ERROR_DATA=800140]="MALFORMED_ERROR_DATA",t[t.WRONG_CHANNEL_TYPE=800150]="WRONG_CHANNEL_TYPE",t[t.MARK_AS_READ_RATE_LIMIT_EXCEEDED=800160]="MARK_AS_READ_RATE_LIMIT_EXCEEDED",t[t.QUERY_IN_PROGRESS=800170]="QUERY_IN_PROGRESS",t[t.ACK_TIMEOUT=800180]="ACK_TIMEOUT",t[t.LOGIN_TIMEOUT=800190]="LOGIN_TIMEOUT",t[t.WEBSOCKET_CONNECTION_CLOSED=800200]="WEBSOCKET_CONNECTION_CLOSED",t[t.WEBSOCKET_CONNECTION_FAILED=800210]="WEBSOCKET_CONNECTION_FAILED",t[t.REQUEST_FAILED=800220]="REQUEST_FAILED",t[t.DELAYED_CONNECTING=800221]="DELAYED_CONNECTING",t[t.FILE_UPLOAD_CANCEL_FAILED=800230]="FILE_UPLOAD_CANCEL_FAILED",t[t.REQUEST_CANCELED=800240]="REQUEST_CANCELED",t[t.REQUEST_DUPLICATED=800250]="REQUEST_DUPLICATED",t[t.FILE_SIZE_LIMIT_EXCEEDED=800260]="FILE_SIZE_LIMIT_EXCEEDED",t[t.ERR_UPLOAD_STAT_RETRY_COUNT_EXCEEDED=800270]="ERR_UPLOAD_STAT_RETRY_COUNT_EXCEEDED",t[t.SESSION_TOKEN_REQUEST_FAILED=800500]="SESSION_TOKEN_REQUEST_FAILED",t[t.SESSION_TOKEN_REFRESHED=800501]="SESSION_TOKEN_REFRESHED",t[t.SESSION_TOKEN_REFRESH_FAILED=800502]="SESSION_TOKEN_REFRESH_FAILED",t[t.COLLECTION_DISPOSED=800600]="COLLECTION_DISPOSED",t[t.DATABASE_ERROR=800700]="DATABASE_ERROR",t[t.USER_DEACTIVATED=900021]="USER_DEACTIVATED",t[t.CHANNEL_IS_FROZEN=900050]="CHANNEL_IS_FROZEN",t[t.RECEIVER_USER_DEACTIVATED=900081]="RECEIVER_USER_DEACTIVATED"})(ze||(ze={}));var Va,tp,Si,i1,rN,X_,Ca=function(t){return!(t instanceof X&&!t.shouldThrowOutside)},X=(function(t){function n(e){var r=e.code,i=r===void 0?0:r,a=e.message,s=a===void 0?"":a,l=t.call(this,s)||this;return l.shouldThrowOutside=!1,l._detail="",l.name="SendbirdError",l.code=i,Object.setPrototypeOf(l,n.prototype),l}return U(n,t),Object.defineProperty(n.prototype,"detail",{get:function(){return this._detail},enumerable:!1,configurable:!0}),n.prototype.setDetail=function(e){this._detail=e},Object.defineProperty(n.prototype,"isInvalidTokenError",{get:function(){return this.code===ze.INVALID_TOKEN},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isSessionExpiredError",{get:function(){return this.isSessionTokenExpiredError||this.isSessionKeyExpiredError},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isSessionTokenExpiredError",{get:function(){return this.code===ze.SESSION_TOKEN_EXPIRED},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isSessionKeyExpiredError",{get:function(){return this.code===ze.SESSION_KEY_EXPIRED},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isSessionInvalidatedError",{get:function(){return this.isSessionRevokedError||this.isUserAuthDeactivedError||this.isUserAuthDeletedOrNotFoundError},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isSessionRevokedError",{get:function(){return this.code===ze.SESSION_REVOKED},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isUserAuthDeactivedError",{get:function(){return this.code===ze.USER_AUTH_DEACTIVATED},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isUserAuthDeletedOrNotFoundError",{get:function(){return this.code===ze.USER_AUTH_DELETED_OR_NOT_FOUND},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isNetworkError",{get:function(){return this.code===ze.NETWORK_ERROR||this.code===ze.NETWORK_ROUTING_ERROR},enumerable:!1,configurable:!0}),Object.defineProperty(n,"debugModeRequired",{get:function(){return new n({code:ze.DEBUG_MODE_REQUIRED,message:"Cannot run this operation in production mode."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"lostInstance",{get:function(){return new n({code:ze.LOST_INSTANCE,message:"Instance ID is missing. It should belong to an instance."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"invalidCommand",{get:function(){return new n({code:ze.INVALID_COMMAND,message:"Cannot send invalid command."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"unknown",{get:function(){return new n({code:ze.UNKNOWN_ERROR,message:"Unknown error occurred."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"connectionRenew",{get:function(){return new n({code:ze.CONNECTION_RENEW,message:"Connection restarts."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"invalidConnectionStateTransition",{get:function(){return new n({code:ze.INVALID_CONNECTION_STATE_TRANSITION,message:"Invalid connection state transition."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"xmlHttpRequestNotSupported",{get:function(){return new n({code:ze.XMLHTTPREQUEST_NOT_SUPPORTED,message:"Cannot upload file. XMLHttpRequest is not defined in this environment."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"connectionRequired",{get:function(){return new n({code:ze.CONNECTION_REQUIRED,message:"Connection is required."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"connectionCanceled",{get:function(){return new n({code:ze.CONNECTION_CANCELED,message:"Connection is canceled."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"invalidParameters",{get:function(){return new n({code:ze.INVALID_PARAMETER,message:"Invalid parameters."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"notSupportedError",{get:function(){return new n({code:ze.NOT_SUPPORTED_ERROR,message:"Given parameters are not supported."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"channelTypeNotSupportedError",{get:function(){return new n({code:ze.NOT_SUPPORTED_ERROR,message:"Called method is not supported in the current channel's channel type."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"networkError",{get:function(){return new n({code:ze.NETWORK_ERROR,message:"There was a network error."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"markAsReadAllRateLimitExceeded",{get:function(){return new n({code:ze.MARK_AS_READ_RATE_LIMIT_EXCEEDED,message:"markAsRead rate limit exceeded."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"queryInProgress",{get:function(){return new n({code:ze.QUERY_IN_PROGRESS,message:"Query in progress."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"noAckTimeout",{get:function(){return new n({code:ze.ACK_TIMEOUT,message:"Command received no ack."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"loginTimeout",{get:function(){return new n({code:ze.LOGIN_TIMEOUT,message:"Connection timeout."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"connectionClosed",{get:function(){return new n({code:ze.WEBSOCKET_CONNECTION_CLOSED,message:"Connection is closed. Please reconnect."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"requestFailed",{get:function(){return new n({code:ze.REQUEST_FAILED,message:"Request failed."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"tooManyRequests",{get:function(){return new n({code:ze.REQUEST_DUPLICATED,message:"Too many requests."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"alreadyConnectedAsAnotherUser",{get:function(){return new n({code:ze.REQUEST_FAILED,message:"Already logged in as a different user. Call disconnect() first."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"fileUploadCanceled",{get:function(){return new n({code:ze.FILE_UPLOAD_CANCEL_FAILED,message:"File upload has been canceled."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"requestCanceled",{get:function(){return new n({code:ze.REQUEST_CANCELED,message:"Request has been canceled."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"sessionTokenRefreshFailed",{get:function(){return new n({code:ze.SESSION_TOKEN_REFRESH_FAILED,message:"Failed to refresh the session key."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"sessionTokenRequestFailed",{get:function(){return new n({code:ze.SESSION_TOKEN_REQUEST_FAILED,message:"Failed to get the session token."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"databaseError",{get:function(){return new n({code:ze.DATABASE_ERROR,message:"Database error."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"fileSizeLimitExceededError",{get:function(){return new n({code:ze.FILE_SIZE_LIMIT_EXCEEDED,message:"File size exceeds the file size limit."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"statLogUploadLimitExceededError",{get:function(){return new n({code:ze.ERR_UPLOAD_STAT_RETRY_COUNT_EXCEEDED,message:"The upload request failed due to the retry count being exceeded."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"malformedDataError",{get:function(){return new n({code:ze.MALFORMED_DATA,message:"Malformed data."})},enumerable:!1,configurable:!0}),n.prototype.throwOutside=function(){throw this.shouldThrowOutside=!0,this},n})(Error),R9=[ze.CONNECTION_REQUIRED,ze.NETWORK_ERROR,ze.ACK_TIMEOUT,ze.WEBSOCKET_CONNECTION_CLOSED,ze.WEBSOCKET_CONNECTION_FAILED,ze.FILE_UPLOAD_CANCEL_FAILED,ze.REQUEST_CANCELED,ze.INTERNAL_SERVER_ERROR,ze.RATE_LIMIT_EXCEEDED,ze.UNKNOWN_SERVER_ERROR,ze.USER_DEACTIVATED,ze.CHANNEL_IS_FROZEN,ze.RECEIVER_USER_DEACTIVATED],D9=[ze.WEBSOCKET_CONNECTION_CLOSED,ze.WEBSOCKET_CONNECTION_FAILED,ze.CONNECTION_REQUIRED,ze.CHANNEL_IS_FROZEN],OR=function(t,n){if(t!==n){var e=z({},t),r=z({},n);return(!e.hasOwnProperty("messageId")||!r.hasOwnProperty("messageId")||e.messageId===r.messageId)&&(!e.hasOwnProperty("reqId")||!r.hasOwnProperty("reqId")||e.reqId===r.reqId)&&(e.hasOwnProperty("messageId")&&delete e.messageId,e.hasOwnProperty("reqId")&&delete e.reqId,r.hasOwnProperty("messageId")&&delete r.messageId,r.hasOwnProperty("reqId")&&delete r.reqId,JSON.stringify(e)===JSON.stringify(r))}return!0},Q=function(t,n,e){return e===void 0&&(e=!1),!(!e||!z0(n))||(typeof t!="string"?typeof t=="object"?Nt(t,n):x9(t,n):typeof n===t)},Nt=function(t,n,e){return e===void 0&&(e=!1),!(!e||!z0(n))||Object.values(t).includes(n)},x9=function(t,n){return n instanceof t},Tt=function(t,n,e){return e===void 0&&(e=!1),!(!e||!z0(n))||Array.isArray(n)&&n.every((function(r){return Q(t,r)}))},gI=function(t,n){return!!z0(t)||typeof t=="number"&&t.toString().length===13},P9=function(t){return t>0&&R9.indexOf(t)>=0},a1=function(t){return t>0&&D9.indexOf(t)>=0},Ai=function(t,n){if(n===void 0&&(n=!1),n&&z0(t))return!0;var e=typeof t=="object"&&t!==null&&t.hasOwnProperty("name")&&typeof t.name=="string"&&t.hasOwnProperty("uri")&&typeof t.uri=="string"&&t.hasOwnProperty("type")&&typeof t.type=="string";if(!e){if(typeof Blob<"u")return t instanceof Blob;if(typeof File<"u")return t instanceof File}return e},U9=function(t,n){if(t===n)return!0;if(t==null||n==null||t.length!==n.length)return!1;for(var e=Je([],Ye(t),!1).sort(),r=Je([],Ye(n),!1).sort(),i=0;i<e.length;++i)if(e[i]!==r[i])return!1;return!0},z0=function(t){return t==null},kR=(function(){function t(n){var e=n===void 0?{}:n,r=e.useMemberInfoInMessage,i=r===void 0||r,a=e.typingIndicatorInvalidateTime,s=a===void 0?1e4:a,l=e.typingIndicatorThrottle,c=l===void 0?1e3:l,d=e.websocketResponseTimeout,p=d===void 0?1e4:d,g=e.websocketPayloadDecompression,_=g===void 0||g,y=e.sessionTokenRefreshTimeout,C=y===void 0?60:y;this._useMemberInfoInMessage=!0,this._typingIndicatorInvalidateTime=1e4,this._typingIndicatorThrottle=1e3,this._websocketResponseTimeout=1e4,this._sessionTokenRefreshTimeout=60,this._useMemberInfoInMessage=i,this._typingIndicatorInvalidateTime=s,this._typingIndicatorThrottle=c,this._websocketResponseTimeout=p,this._sessionTokenRefreshTimeout=C,this.websocketPayloadDecompression=_}return Object.defineProperty(t.prototype,"useMemberInfoInMessage",{get:function(){return this._useMemberInfoInMessage},set:function(n){Q("boolean",n)&&(this._useMemberInfoInMessage=n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"typingIndicatorInvalidateTime",{get:function(){return this._typingIndicatorInvalidateTime},set:function(n){Q("number",n)&&(this._typingIndicatorInvalidateTime=n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"typingIndicatorThrottle",{get:function(){return this._typingIndicatorThrottle},set:function(n){Q("number",n)&&n>=1e3&&n<=9e3&&(this._typingIndicatorThrottle=n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"websocketResponseTimeout",{get:function(){return this._websocketResponseTimeout},set:function(n){Q("number",n)&&n>=5e3&&n<=3e4&&(this._websocketResponseTimeout=n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sessionTokenRefreshTimeout",{get:function(){return this._sessionTokenRefreshTimeout},set:function(n){Q("number",n)&&(n<60?n=60:n>1800&&(n=1800),this._sessionTokenRefreshTimeout=n)},enumerable:!1,configurable:!0}),t})(),RR={encrypt:function(t){return t},decrypt:function(t){return t}},vI=(function(){function t(n){var e=n.store;this._preference=new Map,this._store=e}return t.prototype._savePreferenceKeys=function(){return S(this,void 0,void 0,(function(){return T(this,(function(n){switch(n.label){case 0:return[4,this._store.set({key:this._keysAddress,value:Je([],Ye(this._preference.keys()),!1)})];case 1:return n.sent(),[2]}}))}))},t.prototype.init=function(n,e){var r;return e===void 0&&(e=1),S(this,void 0,void 0,(function(){var i,a,s,l,c,d,p,g,_,y,C;return T(this,(function(w){switch(w.label){case 0:return this._version=e,this._keysAddress=n,i="".concat(n,".metadata.version"),[4,this._store.get(i)];case 1:return a=w.sent(),[4,this._store.get(n)];case 2:return s=(r=w.sent())!==null&&r!==void 0?r:[],!a||a.version<this._version?this._version===9?[3,3]:[3,6]:[3,10];case 3:return l=s.find((function(A){return A.includes("groupchannel/sync.meta")})),l?[4,this._store.remove(l)]:[3,5];case 4:w.sent(),w.label=5;case 5:return[3,8];case 6:return[4,this._resetPreferenceData(s)];case 7:w.sent(),w.label=8;case 8:return[4,this._updatePreferenceVersionInfo(i)];case 9:return w.sent(),[3,17];case 10:w.trys.push([10,15,16,17]),c=Re(s),d=c.next(),w.label=11;case 11:return d.done?[3,14]:(p=d.value,[4,this._store.get(p)]);case 12:(g=w.sent())&&this._preference.set(p,g),w.label=13;case 13:return d=c.next(),[3,11];case 14:return[3,17];case 15:return _=w.sent(),y={error:_},[3,17];case 16:try{d&&!d.done&&(C=c.return)&&C.call(c)}finally{if(y)throw y.error}return[7];case 17:return[2]}}))}))},t.prototype._updatePreferenceVersionInfo=function(n){return S(this,void 0,void 0,(function(){return T(this,(function(e){switch(e.label){case 0:return[4,this._store.set({key:n,value:{version:this._version}})];case 1:return e.sent(),[2]}}))}))},t.prototype._resetPreferenceData=function(n){return S(this,void 0,void 0,(function(){return T(this,(function(e){switch(e.label){case 0:return this._preference=new Map,[4,this._store.removeMany(n)];case 1:return e.sent(),[2]}}))}))},t.prototype.get=function(n){return S(this,void 0,void 0,(function(){return T(this,(function(e){return[2,this._preference.get(n)]}))}))},t.prototype.set=function(n,e){return S(this,void 0,void 0,(function(){var r;return T(this,(function(i){switch(i.label){case 0:return r=!this._preference.has(n),[4,this._store.set({key:n,value:e})];case 1:return i.sent(),this._preference.set(n,e),r?[4,this._savePreferenceKeys()]:[3,3];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))},t.prototype.remove=function(n){return S(this,void 0,void 0,(function(){return T(this,(function(e){switch(e.label){case 0:return[4,this._store.remove(n)];case 1:return e.sent(),this._preference.delete(n),[4,this._savePreferenceKeys()];case 2:return e.sent(),[2]}}))}))},t.prototype.clear=function(){return S(this,void 0,void 0,(function(){return T(this,(function(n){switch(n.label){case 0:return[4,this._store.removeMany(Je([],Ye(this._preference.keys()),!1))];case 1:return n.sent(),this._preference.clear(),[4,this._savePreferenceKeys()];case 2:return n.sent(),[2]}}))}))},t})(),L9=(function(){function t(n){var e=n.encryption,r=n.store,i=n.localCacheEnabled,a=n.localCacheConfig;this.store=r,this.preference=new vI({store:r}),this.encryption=e??RR,this.localCacheEnabled=i,this.localCacheConfig=a}return t.prototype.replaceStore=function(n){this.store=n,this.preference=new vI({store:n})},t})();(function(t){t.SUCCESS="success",t.PENDING="pending",t.ERROR="error"})(Va||(Va={})),(function(t){t.DEFAULT="default",t.ALL="all",t.MENTION_ONLY="mention_only",t.OFF="off"})(tp||(tp={})),(function(t){t.FCM="gcm",t.APNS="apns",t.UNKNOWN="unknown"})(Si||(Si={})),(function(t){t.SESSION_TOKEN="session_token",t.ACCESS_TOKEN="access_token"})(i1||(i1={})),(function(t){t.ALTERNATIVE="alternative",t.DEFAULT="default"})(rN||(rN={})),(function(t){t.CUSTOM="custom",t.MESSAGE_COLLECTION_ACCESSED_AT="messagecollection_accessed_at"})(X_||(X_={}));var s1,F9=(function(){function t(n){var e=n.channel,r=n.cachedMessageCount;this._cachedMessageCount=0,this._channel=e,this._cachedMessageCount=r}return Object.defineProperty(t.prototype,"channel",{get:function(){return this._channel},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cachedMessageCount",{get:function(){return this._cachedMessageCount},enumerable:!1,configurable:!0}),t})(),DR=(function(){function t(n){var e=n===void 0?{}:n,r=e.maxSize,i=r===void 0?256:r,a=e.clearOrder,s=a===void 0?X_.MESSAGE_COLLECTION_ACCESSED_AT:a,l=e.customClearOrderComparator,c=e.enableAutoResend,d=c===void 0||c;this._clearOrderComparatorUseMessageCollectionAccessedAt=function(p,g){return p.channel.messageCollectionLastAccessedAt===g.channel.messageCollectionLastAccessedAt?p.channel.lastMessage&&!g.channel.lastMessage?1:!p.channel.lastMessage&&g.channel.lastMessage?-1:p.channel.lastMessage||g.channel.lastMessage?p.channel.lastMessage.createdAt-g.channel.lastMessage.createdAt:0:p.channel.messageCollectionLastAccessedAt>g.channel.messageCollectionLastAccessedAt?1:-1},this._maxSize=Math.max(i,64),l?(this._clearOrder=s,this._customClearOrderComparator=l):this._clearOrder=X_.MESSAGE_COLLECTION_ACCESSED_AT,this._enableAutoResend=d}return Object.defineProperty(t.prototype,"maxSize",{get:function(){return this._maxSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clearOrder",{get:function(){return this._clearOrder},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clearOrderComparator",{get:function(){var n;return this._clearOrder===X_.MESSAGE_COLLECTION_ACCESSED_AT?this._clearOrderComparatorUseMessageCollectionAccessedAt:(n=this._customClearOrderComparator)!==null&&n!==void 0?n:this._clearOrderComparatorUseMessageCollectionAccessedAt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"enableAutoResend",{get:function(){return this._enableAutoResend},enumerable:!1,configurable:!0}),t})();(function(t){t.FEED="feed",t.CHAT="chat",t.CHAT_API="chat_api"})(s1||(s1={}));var Rt,Jo,Qo,Hn,ea,gg,ra,ta,Ql,cn,_I,iN,aN,H9=(function(){function t(){this.isRefreshing=!1}return Object.defineProperty(t.prototype,"hasSession",{get:function(){return!!this.sessionKey},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasChatServicePermission",{get:function(){var n;return!!(!((n=this.services)===null||n===void 0)&&n.includes(s1.CHAT))},enumerable:!1,configurable:!0}),t.prototype.clear=function(){this.authToken=void 0,this.sessionKey=void 0,this.services=[]},t})(),So=function(){var t=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(n){var e=(t+16*Math.random())%16|0;return t=Math.floor(t/16),(n==="x"?e:3&e|8).toString(16)}))},yI=(function(){function t(n){var e=n.container;this._container={},this._container=e,this.key=So()}return t.prototype._register=function(n,e,r){var i;return n in this._container||(this._container[n]=new Map),(i=this._container[n])===null||i===void 0||i.set(this.key,{occurence:e,handler:r}),this},t.prototype.on=function(n,e){return this._register(n,-1,e)},t.prototype.once=function(n,e){return this._register(n,1,e)},t.prototype.close=function(){var n=this;Object.keys(this._container).forEach((function(e){var r;(r=n._container[e])===null||r===void 0||r.delete(n.key)}))},t})(),Ap=(function(){function t(){this._container={}}return t.prototype.on=function(n,e){return new yI({container:this._container}).on(n,e)},t.prototype.once=function(n,e){return new yI({container:this._container}).once(n,e)},t.prototype.dispatch=function(n,e){var r,i,a=this._container[n];if(a){var s=[];try{for(var l=Re(a.keys()),c=l.next();!c.done;c=l.next()){var d=c.value,p=a.get(d);p.handler(e),p.occurence>0&&(p.occurence--,p.occurence===0&&s.push(d))}}catch(g){r={error:g}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}s.forEach((function(g){return a.delete(g)}))}},t})(),j9=(function(){function t(){this._dispatcher=new Ap}return t.prototype.on=function(n){return this._dispatcher.on("event",n)},t.prototype.once=function(n){return this._dispatcher.once("event",n)},t.prototype.dispatch=function(n){this._dispatcher.dispatch("event",n)},t})(),kn=function(){},Le=function(t){var n={};return t&&Object.keys(t).forEach((function(e){t[e]===void 0||Number.isNaN(t[e])||t[e]===null||(n[e]=t[e])})),n},Qe=function(t){if(t!=null){if(typeof t=="object"){if(Array.isArray(t)){for(var n=Je([],Ye(t),!1),e=0;e<n.length;e++)n[e]=Qe(n[e]);return n}return Object.keys(t).forEach((function(r){t[r]===null&&delete t[r]})),t}return t}};(function(t){t.BASE="base",t.GROUP="group",t.OPEN="open",t.FEED="feed"})(Rt||(Rt={})),(function(t){t.OPERATOR="operator",t.NONE="none"})(Jo||(Jo={})),(function(t){t.MUTED="muted",t.UNMUTED="unmuted"})(Qo||(Qo={})),(function(t){t.BASE="base",t.USER="user",t.FILE="file",t.ADMIN="admin"})(Hn||(Hn={})),(function(t){t.ALL="",t.USER="MESG",t.FILE="FILE",t.ADMIN="ADMM"})(ea||(ea={})),(function(t){t.USER="MESG",t.FILE="FILE",t.ADMIN="ADMM"})(gg||(gg={})),(function(t){t.USERS="users",t.CHANNEL="channel"})(ra||(ra={})),(function(t){t.ALL="all",t.NONE="none",t.ONLY_REPLY_TO_CHANNEL="only_reply_to_channel"})(ta||(ta={})),(function(t){t.DEFAULT="default",t.SUPPRESS="suppress"})(Ql||(Ql={})),(function(t){t.PENDING="pending",t.SCHEDULED="scheduled",t.SUCCEEDED="succeeded",t.FAILED="failed",t.CANCELED="canceled"})(cn||(cn={})),(function(t){t.INREVIEW="InReview",t.APPROVED="Approved"})(_I||(_I={})),(function(t){t.HIGH="high",t.NORMAL="normal",t.LOW="low"})(iN||(iN={})),(function(t){t.CREATED_AT="created_at",t.UPDATED_AT="updated_at"})(aN||(aN={}));var ye,li="v3",nn="/".concat(li,"/users"),G9="/".concat(li,"/sdk/users"),V9="/".concat(li,"/storage/file"),Ta="/".concat(li,"/group_channels"),B9="/".concat(li,"/sdk/group_channels"),Ip="/".concat(li,"/open_channels"),z9="/".concat(li,"/sdk/open_channels"),q9="/".concat(li,"/search"),sN="/".concat(li,"/report"),W9="/".concat(li,"/emojis"),xR="/".concat(li,"/emoji_categories"),$l="/".concat(li,"/polls"),PR="/".concat(li,"/scheduled_messages"),K9="/".concat(li,"/sdk/ui_kit/configuration"),Y9="/".concat(li,"/sdk/statistics"),Q9="/".concat(li,"/sdk/notification_statistics"),UR="/".concat(li,"/message_templates"),$9="/".concat(li,"/sdk/push_delivery"),X9="/".concat(li,"/forms"),Z9="/".concat(li,"/report_category"),J9="/".concat(li,"/sdk/applications/settings"),K3="/".concat(li,"/ai_agent"),Y3="/".concat(li,"/ai_agent/group_channels"),Xt=function(t){switch(t){case Rt.FEED:case Rt.GROUP:return Ta;case Rt.OPEN:return Ip;default:return null}},LR=function(t){switch(t){case Rt.GROUP:return"".concat(sN,"/group_channels");case Rt.OPEN:return"".concat(sN,"/open_channels");default:return null}},vg=function(t,n,e){var r,i;switch(t){case ra.CHANNEL:return!0;case ra.USERS:if(n)try{for(var a=Re(n),s=a.next();!s.done;s=a.next())if(s.value===e)return!0}catch(l){r={error:l}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}}return!1},Q3=function(t,n,e){var r,i,a,s,l=vg((r=t.mentionType)!==null&&r!==void 0?r:null,(i=t.mentionedUserIds)!==null&&i!==void 0?i:[],e),c=vg((a=n.mentionType)!==null&&a!==void 0?a:null,(s=n.mentionedUserIds)!==null&&s!==void 0?s:[],e);return!l&&c?1:l&&!c?-1:0},FR=function(t,n,e){var r,i=n||new FormData;for(var a in t)if(t.hasOwnProperty(a)){var s=t[a],l=e?"".concat(e,"[").concat(a,"]"):a;Ai(s)?i.append(l,s,(r=s.name)!==null&&r!==void 0?r:"filename"):typeof s!="object"||s===null||Array.isArray(s)||s instanceof Blob?i.append(l,String(s)):i=FR(s,i,l)}return i};(function(t){t.GET="GET",t.POST="POST",t.PUT="PUT",t.DELETE="DELETE",t.PATCH="PATCH"})(ye||(ye={}));var An,Ee=(function(t){function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.params={},e.requireAuth=!0,e.headers={},e.requestId=So(),e}return U(n,t),n.prototype.encodeParams=function(e){var r=this;return e==null||e===""?encodeURIComponent(""):Array.isArray(e)?e.map((function(i){return r.encodeParams(i)})).join(","):encodeURIComponent(typeof e=="object"?JSON.stringify(e):String(e))},Object.defineProperty(n.prototype,"query",{get:function(){var e=this,r=Le(this.params);return"?".concat(Object.keys(r).map((function(i){return"".concat(encodeURIComponent(i),"=").concat(e.encodeParams(r[i]))})).join("&"))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"payload",{get:function(){var e=Le(this.params);return Object.keys(e).some((function(r){return Ai(e[r])}))?FR(e):JSON.stringify(e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hasSessionKey",{get:function(){return this.headers["Session-Key"]!==void 0},enumerable:!1,configurable:!0}),n})(kn),Se=(function(t){function n(e,r){var i=t.call(this)||this;return i._iid=e,i._payload=r,i}return U(n,t),Object.defineProperty(n.prototype,"payload",{get:function(){return z({},this._payload)},enumerable:!1,configurable:!0}),n.prototype.as=function(e){return new e(this._iid,this.payload)},n})(kn),eH=(function(t){function n(e){var r=t.call(this)||this;return r.requestId=e,r}return U(n,t),n})(kn),_g=(function(t){function n(e){var r=e.expires_in,i=e.reason,a=i===void 0?ze.SESSION_KEY_EXPIRED:i,s=e.message,l=s===void 0?"":s,c=t.call(this)||this;switch(c.expiresIn=r??0,a){case ze.SESSION_KEY_EXPIRED:case ze.SESSION_TOKEN_EXPIRED:case ze.SESSION_REVOKED:case ze.USER_AUTH_DEACTIVATED:case ze.USER_AUTH_DELETED_OR_NOT_FOUND:c.error=new X({code:a,message:l})}return c}return U(n,t),Object.defineProperty(n.prototype,"invalidateSessionToken",{get:function(){var e;return!!(!((e=this.error)===null||e===void 0)&&e.isSessionTokenExpiredError)},enumerable:!1,configurable:!0}),n})(kn),Xn=(function(t){function n(e,r,i,a){a===void 0&&(a="");var s,l=this;return(l=t.call(this)||this)._iid=e,l.code=r,l.payload=i,l.requestId=(s=i.req_id)!==null&&s!==void 0?s:a,l}return U(n,t),n.createFromRawMessage=function(e,r){var i=r.substring(0,4),a={};try{a=JSON.parse(r.substring(4))}catch{i="NOOP"}finally{return new n(e,i,a)}},n.prototype.convertToMessage=function(){return"".concat(this.code).concat(JSON.stringify(this.payload),`
`)},n.prototype.as=function(e){return new e(this._iid,this.code,this.payload)},n})(kn),na=(function(t){function n(e){var r,i=e.code,a=e.ackRequired,s=e.payload,l=s===void 0?{}:s,c=this;return(c=t.call(this)||this).code=i,c.payload=l,c.requestId=(r=c.payload.req_id)!==null&&r!==void 0?r:So(),c.ackRequired=a,c.payload.req_id=c.requestId,c}return U(n,t),n.prototype.convertToMessage=function(){return"".concat(this.code).concat(JSON.stringify(this.payload),`
`)},n})(kn),$3=(function(t){function n(e){var r=e.userId,i=e.authToken,a=e.services,s=e.expiringSession,l=s===void 0||s,c=t.call(this)||this;return c.path="".concat(nn,"/").concat(encodeURIComponent(r),"/session_key"),c.method=ye.POST,c.params=Le({token:i,services:a,expiring_session:!!l}),c.requireAuth=!1,c}return U(n,t),n})(Ee),tH=(function(t){function n(e){var r=e.authToken,i=e.expiringSession,a=i===void 0||i,s=e.requestId,l=s===void 0?void 0:s;return t.call(this,{code:"LOGI",payload:Le({token:r,expiring_session:a?1:0,req_id:l}),ackRequired:!0})||this}return U(n,t),n})(na),nH=(function(t){function n(e,r){var i=t.call(this,e,r)||this,a=r.key,s=r.expires_at,l=r.services;return i.key=a,i.expiresAt=s,i.services=l,i}return U(n,t),n})(Se),rH=(function(t){function n(e,r,i){var a,s=this;return(s=t.call(this,e,"LOGI",i)||this).error=null,s.newKey=null,s.newKey=(a=i.new_key)!==null&&a!==void 0?a:null,s.error=i.error?new X(i):null,s}return U(n,t),n})(Xn),Dc=(function(t){function n(e){var r=t.call(this)||this;return r.statLog=e,r}return U(n,t),n})(kn),HR=(function(t){function n(e){var r=e.request,i=e.deferred,a=e.error,s=a===void 0?X.requestFailed:a,l=t.call(this)||this;return l.request=r,l.deferred=i,l.error=s,l}return U(n,t),n})(kn);(function(t){t.FEATURE_LOCALCACHE="feature:local_cache",t.FEATURE_LOCALCACHE_EVENT="feature:local_cache_event",t.NOTIFICATION="noti:stats",t.WEBSOCKET_CONNECT="ws:connect",t.WEBSOCKET_DISCONNECT="ws:disconnect",t.API_RESULT="api:result"})(An||(An={}));var oN,T0,oh,qn=(function(){function t(n){var e=n.type,r=n.data,i=n.ts,a=i===void 0?Date.now():i;this.type=e,this.createdAt=a,this.data=r}return t.payloadify=function(n){return Le({stat_type:n.type,ts:n.createdAt,data:Le(n.data)})},t})(),lN=function(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product=="ReactNative"},bI=function(){return!(typeof navigator>"u"||!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Windows Phone/i.test(navigator.userAgent))};(function(t){t.CHAT="chat",t.CALLS="calls",t.DESK="desk",t.LIVE="live",t.UIKIT_CHAT="uikit-chat",t.UIKIT_LIVE="uikit-live",t.AI_AGENT="ai-agent"})(oN||(oN={})),(function(t){t.ANDROID="android",t.IOS="ios",t.JS="js",t.UNREAL="unreal",t.UNITY="unity",t.REACT_NATIVE="react-native",t.FLUTTER="flutter"})(T0||(T0={})),(function(t){t.ANDROID="android",t.IOS="ios",t.WEB="web",t.MOBILE_WEB="mobile_web",t.WINDOWS="windows"})(oh||(oh={}));var iH="^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)(?:-((?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\\.(?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\\+([0-9a-zA-Z-]+(?:\\.[0-9a-zA-Z-]+)*))?$",o1=(function(){function t(){}var n;return n=t,t._getFrameWork=function(){if(typeof window<"u"){if(window.__REACT__)return"react";if(window.__VUE__)return"vue";var e=window.__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e&&e.getFiberRoots&&e.getFiberRoots(1).size>0)return"react";if(window.__NUXT__)return"vue(SSR)";if(window.__NEXT_DATA__||window.__NEXT_P||window.__NEXT_F)return"nextjs"}return""},t.sendbirdSdkUserAgentWithExtension=function(e){var r=lN()?T0.REACT_NATIVE:T0.JS,i={main_sdk_info:"chat/".concat(r,"/").concat(ch.SDK_VERSION),device_os_platform:bI()?"mobile-web":"web",os_version:ch.OS_VERSION};if(e){var a=e.sendbirdExtensions,s=e.deviceOS,l=e.customData,c=l===void 0?{}:l;s.version&&(i.os_version=s.version),s.platform&&(i.device_os_platform=s.platform),a.length>0&&(i.extension_sdk_info=a.map((function(p){var g=p.product,_=p.platform,y=p.version;return"".concat(g,"/").concat(_,"/").concat(y)})).join(",")),Object.keys(i).forEach((function(p){return delete c[p]})),Object.keys(c).length>0&&(i=z(z({},i),c))}var d=n._getFrameWork();return d&&(i.javascript_framework=d),Object.entries(i).map((function(p){var g=Ye(p,2),_=g[0],y=g[1];return"".concat(_,"=").concat(y)})).join("&")},t.userAgentWithExtension=function(e){var r=lN()?"reactnative":"JS",i=e.sb_syncmanager?"s".concat(e.sb_syncmanager):"",a=e.sb_uikit?"u".concat(e.sb_uikit):"",s=e["device-os-platform"]?"o".concat(e["device-os-platform"]):bI()?"omobile-web":"oweb";return"".concat(r,"/c").concat(ch.SDK_VERSION,"/").concat(i,"/").concat(a,"/").concat(s)},t})(),za=function(){var t=this;this.promise=new Promise((function(n,e){t.resolve=n,t.reject=function(r){e(r)}}))},l1=(function(t){function n(e){var r=t.call(this)||this;return r.requestId=e.requestId,r}return U(n,t),n})(kn),jR=(function(t){function n(e){var r=t.call(this)||this;return r.method=ye.DELETE,r.path="".concat(Xt(e.channelType),"/").concat(e.channelUrl,"/messages/").concat(e.messageId),e.messageToken&&(r.params=Le({mesg_token:e.messageToken})),r}return U(n,t),n})(Ee);(function(t){function n(){return t!==null&&t.apply(this,arguments)||this}U(n,t)})(Se);var GR=(function(t){function n(e,r,i){var a,s=this;return(s=t.call(this,e,"DELM",i)||this).channelUrl=i.channel_url,s.channelType=i.channel_type,s.messageId=Number(i.msg_id),s.silent=i.silent,s.messageCreatedAt=i.message_created_at?Number(i.message_created_at):-1,s.senderId=(a=i.sender_id)!==null&&a!==void 0?a:void 0,s}return U(n,t),n})(Xn),aH=(function(){function t(n,e){var r=e.session,i=e.sdkState,a=e.dispatcher,s=e.logger,l=e.useFetchCompat,c=l!==void 0&&l,d=this;this._abortControl=new Map,this._shouldImportFetchCompat=!1,this._iid=n,this._session=r,this._sdkState=i,this._dispatcher=a,this._dispatcher.on((function(p){p instanceof eH&&d.cancel(p.requestId)})),this._logger=s,this._shouldImportFetchCompat=c}return t.prototype._createHeader=function(n,e){var r=this._sdkState,i=r.appId,a=r.appVersion,s=r.sendbirdRuntimeEnvironment,l=z(z({},n.headers),{SendBird:"JS,".concat(ch.OS_VERSION,",").concat(ch.SDK_VERSION,",").concat(i).concat(a?",".concat(a):""),"SB-User-Agent":o1.userAgentWithExtension(this._sdkState.extensions),"Request-Sent-Timestamp":Date.now().toString(),"SB-SDK-User-Agent":o1.sendbirdSdkUserAgentWithExtension(s)});return e||(l["Content-Type"]="application/json; charset=utf-8"),l["App-Id"]=i,n.requireAuth?!n.hasSessionKey&&this._session.hasSession&&(l["Session-key"]=this._session.sessionKey):this._session.authToken&&(l["Access-token"]=this._session.authToken),l},t.prototype._statLogApiResult=function(n,e,r){n.path.includes("/sdk/statistics")||this._dispatcher.dispatch(new Dc(new qn({type:An.API_RESULT,data:{endpoint:n.path,method:n.method,success:!r,latency:Date.now()-e,error_code:r?.code,error_description:r?.message}})))},t.prototype._isBodyRequired=function(n){var e=n.method;return e!==ye.GET&&(e!==ye.DELETE||n instanceof jR)},t.prototype.send=function(n){return S(this,void 0,void 0,(function(){var e,r,i,a,s,l,c,d,p,g,_,y,C,w,A,M,I,D,P;return T(this,(function(H){switch(H.label){case 0:e=n.path,r=n.method,i=n.uploadProgressHandler,a=this._isBodyRequired(n),s=this._sdkState.api,l="".concat(s.host).concat(e).concat(a?"":n.query),c=a?n.payload:null,d=this._createHeader(n,c instanceof FormData?c:void 0),p=new AbortController,g=p.signal,this._abortControl.set(n.requestId,p),_=Date.now(),H.label=1;case 1:return H.trys.push([1,13,,14]),i?[4,LE(()=>kw(()=>import("./__bundle-9e5797c2-tQiXbh-m-BN4Jo7J8.js"),[]),[])]:[3,6];case 2:y=H.sent().xmlHttpRequest,H.label=3;case 3:return H.trys.push([3,5,,6]),[4,y(this._iid,{requestId:n.requestId,method:n.method,url:l,headers:d,data:c??void 0,uploadProgressHandler:i})];case 4:return C=H.sent(),this._logger.debug("receive api response",n.requestId),this._statLogApiResult(n,_),[2,C];case 5:if(!((w=H.sent())instanceof X&&w.code===ze.XMLHTTPREQUEST_NOT_SUPPORTED))throw w;return this._logger.debug("XMLHttpRequest is not available in this environment. progressHandler is ignored."),[3,6];case 6:return this._shouldImportFetchCompat&&(this._shouldImportFetchCompat=!1,(typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof global<"u"&&global||{fetch:null}).fetch=null),typeof AbortController<"u"?[3,8]:[4,LE(()=>Promise.resolve().then(()=>Lte),void 0)];case 7:H.sent(),H.label=8;case 8:return typeof fetch=="function"?[3,10]:[4,LE(()=>kw(()=>import("./__bundle-46d64517-C8I1_YDk-LcRUqe1L.js"),[]).then(L=>L._),[])];case 9:H.sent(),H.label=10;case 10:return[4,fetch(l,{method:r,body:c,headers:d,signal:g})];case 11:return[4,(A=H.sent()).json()];case 12:if(M=H.sent(),A.ok||A.redirected)return this._logger.debug("receive api response",n.requestId),this._statLogApiResult(n,_),[2,new Se(this._iid,M)];if(M){if((I=new X(M)).isSessionExpiredError){if(this._dispatcher.dispatch(new _g({reason:I.code,message:I.message})),!(n instanceof $3))return D=new za,this._dispatcher.dispatch(new HR({request:n,deferred:D,error:I})),[2,D.promise];throw I}throw I.isSessionInvalidatedError&&this._dispatcher.dispatch(new _g({reason:I.code,message:I.message})),I}throw X.requestFailed;case 13:throw P=H.sent(),this._statLogApiResult(n,_,P),P instanceof X?(this._logger.debug("fail api request",P),P):P?.name==="AbortError"?X.requestCanceled:(this._logger.debug("fail api request",P),X.networkError);case 14:return[2]}}))}))},t.prototype.cancel=function(n){this._abortControl.has(n)&&(this._abortControl.get(n).abort(),this._abortControl.delete(n)),this._dispatcher.dispatch(new l1({requestId:n}))},t.prototype.cancelAll=function(){var n,e;try{for(var r=Re(this._abortControl.values()),i=r.next();!i.done;i=r.next())i.value.abort()}catch(a){n={error:a}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(n)throw n.error}}this._abortControl.clear(),this._dispatcher.dispatch(new l1({}))},t})(),it=function(){};function Og(t){let n=t.length;for(;--n>=0;)t[n]=0}const X3=256,VR=286,Z_=30,J_=15,uN=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),FE=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),sH=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),EI=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Tc=new Array(576);Og(Tc);const e0=new Array(60);Og(e0);const S0=new Array(512);Og(S0);const t0=new Array(256);Og(t0);const Z3=new Array(29);Og(Z3);const u1=new Array(Z_);function DC(t,n,e,r,i){this.static_tree=t,this.extra_bits=n,this.extra_base=e,this.elems=r,this.max_length=i,this.has_stree=t&&t.length}let CI,wI,NI;function xC(t,n){this.dyn_tree=t,this.max_code=0,this.stat_desc=n}Og(u1);const BR=t=>t<256?S0[t]:S0[256+(t>>>7)],A0=(t,n)=>{t.pending_buf[t.pending++]=255&n,t.pending_buf[t.pending++]=n>>>8&255},Hs=(t,n,e)=>{t.bi_valid>16-e?(t.bi_buf|=n<<t.bi_valid&65535,A0(t,t.bi_buf),t.bi_buf=n>>16-t.bi_valid,t.bi_valid+=e-16):(t.bi_buf|=n<<t.bi_valid&65535,t.bi_valid+=e)},Uu=(t,n,e)=>{Hs(t,e[2*n],e[2*n+1])},zR=(t,n)=>{let e=0;do e|=1&t,t>>>=1,e<<=1;while(--n>0);return e>>>1},qR=(t,n,e)=>{const r=new Array(16);let i,a,s=0;for(i=1;i<=J_;i++)s=s+e[i-1]<<1,r[i]=s;for(a=0;a<=n;a++){let l=t[2*a+1];l!==0&&(t[2*a]=zR(r[l]++,l))}},WR=t=>{let n;for(n=0;n<VR;n++)t.dyn_ltree[2*n]=0;for(n=0;n<Z_;n++)t.dyn_dtree[2*n]=0;for(n=0;n<19;n++)t.bl_tree[2*n]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},KR=t=>{t.bi_valid>8?A0(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},TI=(t,n,e,r)=>{const i=2*n,a=2*e;return t[i]<t[a]||t[i]===t[a]&&r[n]<=r[e]},PC=(t,n,e)=>{const r=t.heap[e];let i=e<<1;for(;i<=t.heap_len&&(i<t.heap_len&&TI(n,t.heap[i+1],t.heap[i],t.depth)&&i++,!TI(n,r,t.heap[i],t.depth));)t.heap[e]=t.heap[i],e=i,i<<=1;t.heap[e]=r},SI=(t,n,e)=>{let r,i,a,s,l=0;if(t.sym_next!==0)do r=255&t.pending_buf[t.sym_buf+l++],r+=(255&t.pending_buf[t.sym_buf+l++])<<8,i=t.pending_buf[t.sym_buf+l++],r===0?Uu(t,i,n):(a=t0[i],Uu(t,a+X3+1,n),s=uN[a],s!==0&&(i-=Z3[a],Hs(t,i,s)),r--,a=BR(r),Uu(t,a,e),s=FE[a],s!==0&&(r-=u1[a],Hs(t,r,s)));while(l<t.sym_next);Uu(t,256,n)},UC=(t,n)=>{const e=n.dyn_tree,r=n.stat_desc.static_tree,i=n.stat_desc.has_stree,a=n.stat_desc.elems;let s,l,c,d=-1;for(t.heap_len=0,t.heap_max=573,s=0;s<a;s++)e[2*s]!==0?(t.heap[++t.heap_len]=d=s,t.depth[s]=0):e[2*s+1]=0;for(;t.heap_len<2;)c=t.heap[++t.heap_len]=d<2?++d:0,e[2*c]=1,t.depth[c]=0,t.opt_len--,i&&(t.static_len-=r[2*c+1]);for(n.max_code=d,s=t.heap_len>>1;s>=1;s--)PC(t,e,s);c=a;do s=t.heap[1],t.heap[1]=t.heap[t.heap_len--],PC(t,e,1),l=t.heap[1],t.heap[--t.heap_max]=s,t.heap[--t.heap_max]=l,e[2*c]=e[2*s]+e[2*l],t.depth[c]=(t.depth[s]>=t.depth[l]?t.depth[s]:t.depth[l])+1,e[2*s+1]=e[2*l+1]=c,t.heap[1]=c++,PC(t,e,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],((p,g)=>{const _=g.dyn_tree,y=g.max_code,C=g.stat_desc.static_tree,w=g.stat_desc.has_stree,A=g.stat_desc.extra_bits,M=g.stat_desc.extra_base,I=g.stat_desc.max_length;let D,P,H,L,G,Y,F=0;for(L=0;L<=J_;L++)p.bl_count[L]=0;for(_[2*p.heap[p.heap_max]+1]=0,D=p.heap_max+1;D<573;D++)P=p.heap[D],L=_[2*_[2*P+1]+1]+1,L>I&&(L=I,F++),_[2*P+1]=L,P>y||(p.bl_count[L]++,G=0,P>=M&&(G=A[P-M]),Y=_[2*P],p.opt_len+=Y*(L+G),w&&(p.static_len+=Y*(C[2*P+1]+G)));if(F!==0){do{for(L=I-1;p.bl_count[L]===0;)L--;p.bl_count[L]--,p.bl_count[L+1]+=2,p.bl_count[I]--,F-=2}while(F>0);for(L=I;L!==0;L--)for(P=p.bl_count[L];P!==0;)H=p.heap[--D],H>y||(_[2*H+1]!==L&&(p.opt_len+=(L-_[2*H+1])*_[2*H],_[2*H+1]=L),P--)}})(t,n),qR(e,d,t.bl_count)},AI=(t,n,e)=>{let r,i,a=-1,s=n[1],l=0,c=7,d=4;for(s===0&&(c=138,d=3),n[2*(e+1)+1]=65535,r=0;r<=e;r++)i=s,s=n[2*(r+1)+1],++l<c&&i===s||(l<d?t.bl_tree[2*i]+=l:i!==0?(i!==a&&t.bl_tree[2*i]++,t.bl_tree[32]++):l<=10?t.bl_tree[34]++:t.bl_tree[36]++,l=0,a=i,s===0?(c=138,d=3):i===s?(c=6,d=3):(c=7,d=4))},II=(t,n,e)=>{let r,i,a=-1,s=n[1],l=0,c=7,d=4;for(s===0&&(c=138,d=3),r=0;r<=e;r++)if(i=s,s=n[2*(r+1)+1],!(++l<c&&i===s)){if(l<d)do Uu(t,i,t.bl_tree);while(--l!=0);else i!==0?(i!==a&&(Uu(t,i,t.bl_tree),l--),Uu(t,16,t.bl_tree),Hs(t,l-3,2)):l<=10?(Uu(t,17,t.bl_tree),Hs(t,l-3,3)):(Uu(t,18,t.bl_tree),Hs(t,l-11,7));l=0,a=i,s===0?(c=138,d=3):i===s?(c=6,d=3):(c=7,d=4)}};let MI=!1;const YR=(t,n,e,r)=>{Hs(t,0+(r?1:0),3),KR(t),A0(t,e),A0(t,~e),e&&t.pending_buf.set(t.window.subarray(n,n+e),t.pending),t.pending+=e};var oH=(t,n,e,r)=>{let i,a,s=0;t.level>0?(t.strm.data_type===2&&(t.strm.data_type=(l=>{let c,d=4093624447;for(c=0;c<=31;c++,d>>>=1)if(1&d&&l.dyn_ltree[2*c]!==0)return 0;if(l.dyn_ltree[18]!==0||l.dyn_ltree[20]!==0||l.dyn_ltree[26]!==0)return 1;for(c=32;c<X3;c++)if(l.dyn_ltree[2*c]!==0)return 1;return 0})(t)),UC(t,t.l_desc),UC(t,t.d_desc),s=(l=>{let c;for(AI(l,l.dyn_ltree,l.l_desc.max_code),AI(l,l.dyn_dtree,l.d_desc.max_code),UC(l,l.bl_desc),c=18;c>=3&&l.bl_tree[2*EI[c]+1]===0;c--);return l.opt_len+=3*(c+1)+5+5+4,c})(t),i=t.opt_len+3+7>>>3,a=t.static_len+3+7>>>3,a<=i&&(i=a)):i=a=e+5,e+4<=i&&n!==-1?YR(t,n,e,r):t.strategy===4||a===i?(Hs(t,2+(r?1:0),3),SI(t,Tc,e0)):(Hs(t,4+(r?1:0),3),((l,c,d,p)=>{let g;for(Hs(l,c-257,5),Hs(l,d-1,5),Hs(l,p-4,4),g=0;g<p;g++)Hs(l,l.bl_tree[2*EI[g]+1],3);II(l,l.dyn_ltree,c-1),II(l,l.dyn_dtree,d-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),SI(t,t.dyn_ltree,t.dyn_dtree)),WR(t),r&&KR(t)},lH={_tr_init:t=>{MI||((()=>{let n,e,r,i,a;const s=new Array(16);for(r=0,i=0;i<28;i++)for(Z3[i]=r,n=0;n<1<<uN[i];n++)t0[r++]=i;for(t0[r-1]=i,a=0,i=0;i<16;i++)for(u1[i]=a,n=0;n<1<<FE[i];n++)S0[a++]=i;for(a>>=7;i<Z_;i++)for(u1[i]=a<<7,n=0;n<1<<FE[i]-7;n++)S0[256+a++]=i;for(e=0;e<=J_;e++)s[e]=0;for(n=0;n<=143;)Tc[2*n+1]=8,n++,s[8]++;for(;n<=255;)Tc[2*n+1]=9,n++,s[9]++;for(;n<=279;)Tc[2*n+1]=7,n++,s[7]++;for(;n<=287;)Tc[2*n+1]=8,n++,s[8]++;for(qR(Tc,287,s),n=0;n<Z_;n++)e0[2*n+1]=5,e0[2*n]=zR(n,5);CI=new DC(Tc,uN,257,VR,J_),wI=new DC(e0,FE,0,Z_,J_),NI=new DC(new Array(0),sH,0,19,7)})(),MI=!0),t.l_desc=new xC(t.dyn_ltree,CI),t.d_desc=new xC(t.dyn_dtree,wI),t.bl_desc=new xC(t.bl_tree,NI),t.bi_buf=0,t.bi_valid=0,WR(t)},_tr_stored_block:YR,_tr_flush_block:oH,_tr_tally:(t,n,e)=>(t.pending_buf[t.sym_buf+t.sym_next++]=n,t.pending_buf[t.sym_buf+t.sym_next++]=n>>8,t.pending_buf[t.sym_buf+t.sym_next++]=e,n===0?t.dyn_ltree[2*e]++:(t.matches++,n--,t.dyn_ltree[2*(t0[e]+X3+1)]++,t.dyn_dtree[2*BR(n)]++),t.sym_next===t.sym_end),_tr_align:t=>{Hs(t,2,3),Uu(t,256,Tc),(n=>{n.bi_valid===16?(A0(n,n.bi_buf),n.bi_buf=0,n.bi_valid=0):n.bi_valid>=8&&(n.pending_buf[n.pending++]=255&n.bi_buf,n.bi_buf>>=8,n.bi_valid-=8)})(t)}},n0=(t,n,e,r)=>{let i=65535&t,a=t>>>16&65535,s=0;for(;e!==0;){s=e>2e3?2e3:e,e-=s;do i=i+n[r++]|0,a=a+i|0;while(--s);i%=65521,a%=65521}return i|a<<16};const uH=new Uint32Array((()=>{let t,n=[];for(var e=0;e<256;e++){t=e;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;n[e]=t}return n})());var Zi=(t,n,e,r)=>{const i=uH,a=r+e;t^=-1;for(let s=r;s<a;s++)t=t>>>8^i[255&(t^n[s])];return~t},mp={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},q0={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:cH,_tr_stored_block:cN,_tr_flush_block:dH,_tr_tally:dh,_tr_align:hH}=lH,{Z_NO_FLUSH:hh,Z_PARTIAL_FLUSH:fH,Z_FULL_FLUSH:pH,Z_FINISH:$o,Z_BLOCK:OI,Z_OK:ga,Z_STREAM_END:kI,Z_STREAM_ERROR:xu,Z_DATA_ERROR:mH,Z_BUF_ERROR:LC,Z_DEFAULT_COMPRESSION:gH,Z_FILTERED:vH,Z_HUFFMAN_ONLY:sE,Z_RLE:_H,Z_FIXED:yH,Z_DEFAULT_STRATEGY:bH,Z_UNKNOWN:EH,Z_DEFLATED:c1}=q0,np=258,ju=262,dg=42,Wf=113,j_=666,Kf=(t,n)=>(t.msg=mp[n],n),RI=t=>2*t-(t>4?9:0),ih=t=>{let n=t.length;for(;--n>=0;)t[n]=0},CH=t=>{let n,e,r,i=t.w_size;n=t.hash_size,r=n;do e=t.head[--r],t.head[r]=e>=i?e-i:0;while(--n);n=i,r=n;do e=t.prev[--r],t.prev[r]=e>=i?e-i:0;while(--n)};let fh=(t,n,e)=>(n<<t.hash_shift^e)&t.hash_mask;const go=t=>{const n=t.state;let e=n.pending;e>t.avail_out&&(e=t.avail_out),e!==0&&(t.output.set(n.pending_buf.subarray(n.pending_out,n.pending_out+e),t.next_out),t.next_out+=e,n.pending_out+=e,t.total_out+=e,t.avail_out-=e,n.pending-=e,n.pending===0&&(n.pending_out=0))},bo=(t,n)=>{dH(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,n),t.block_start=t.strstart,go(t.strm)},or=(t,n)=>{t.pending_buf[t.pending++]=n},T_=(t,n)=>{t.pending_buf[t.pending++]=n>>>8&255,t.pending_buf[t.pending++]=255&n},dN=(t,n,e,r)=>{let i=t.avail_in;return i>r&&(i=r),i===0?0:(t.avail_in-=i,n.set(t.input.subarray(t.next_in,t.next_in+i),e),t.state.wrap===1?t.adler=n0(t.adler,n,i,e):t.state.wrap===2&&(t.adler=Zi(t.adler,n,i,e)),t.next_in+=i,t.total_in+=i,i)},QR=(t,n)=>{let e,r,i=t.max_chain_length,a=t.strstart,s=t.prev_length,l=t.nice_match;const c=t.strstart>t.w_size-ju?t.strstart-(t.w_size-ju):0,d=t.window,p=t.w_mask,g=t.prev,_=t.strstart+np;let y=d[a+s-1],C=d[a+s];t.prev_length>=t.good_match&&(i>>=2),l>t.lookahead&&(l=t.lookahead);do if(e=n,d[e+s]===C&&d[e+s-1]===y&&d[e]===d[a]&&d[++e]===d[a+1]){a+=2,e++;do;while(d[++a]===d[++e]&&d[++a]===d[++e]&&d[++a]===d[++e]&&d[++a]===d[++e]&&d[++a]===d[++e]&&d[++a]===d[++e]&&d[++a]===d[++e]&&d[++a]===d[++e]&&a<_);if(r=np-(_-a),a=_-np,r>s){if(t.match_start=n,s=r,r>=l)break;y=d[a+s-1],C=d[a+s]}}while((n=g[n&p])>c&&--i!=0);return s<=t.lookahead?s:t.lookahead},og=t=>{const n=t.w_size;let e,r,i;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=n+(n-ju)&&(t.window.set(t.window.subarray(n,n+n-r),0),t.match_start-=n,t.strstart-=n,t.block_start-=n,t.insert>t.strstart&&(t.insert=t.strstart),CH(t),r+=n),t.strm.avail_in===0)break;if(e=dN(t.strm,t.window,t.strstart+t.lookahead,r),t.lookahead+=e,t.lookahead+t.insert>=3)for(i=t.strstart-t.insert,t.ins_h=t.window[i],t.ins_h=fh(t,t.ins_h,t.window[i+1]);t.insert&&(t.ins_h=fh(t,t.ins_h,t.window[i+3-1]),t.prev[i&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=i,i++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<ju&&t.strm.avail_in!==0)},$R=(t,n)=>{let e,r,i,a=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,s=0,l=t.strm.avail_in;do{if(e=65535,i=t.bi_valid+42>>3,t.strm.avail_out<i||(i=t.strm.avail_out-i,r=t.strstart-t.block_start,e>r+t.strm.avail_in&&(e=r+t.strm.avail_in),e>i&&(e=i),e<a&&(e===0&&n!==$o||n===hh||e!==r+t.strm.avail_in)))break;s=n===$o&&e===r+t.strm.avail_in?1:0,cN(t,0,0,s),t.pending_buf[t.pending-4]=e,t.pending_buf[t.pending-3]=e>>8,t.pending_buf[t.pending-2]=~e,t.pending_buf[t.pending-1]=~e>>8,go(t.strm),r&&(r>e&&(r=e),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+r),t.strm.next_out),t.strm.next_out+=r,t.strm.avail_out-=r,t.strm.total_out+=r,t.block_start+=r,e-=r),e&&(dN(t.strm,t.strm.output,t.strm.next_out,e),t.strm.next_out+=e,t.strm.avail_out-=e,t.strm.total_out+=e)}while(s===0);return l-=t.strm.avail_in,l&&(l>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=l&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-l,t.strm.next_in),t.strstart),t.strstart+=l,t.insert+=l>t.w_size-t.insert?t.w_size-t.insert:l),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),s?4:n!==hh&&n!==$o&&t.strm.avail_in===0&&t.strstart===t.block_start?2:(i=t.window_size-t.strstart,t.strm.avail_in>i&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,i+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),i>t.strm.avail_in&&(i=t.strm.avail_in),i&&(dN(t.strm,t.window,t.strstart,i),t.strstart+=i,t.insert+=i>t.w_size-t.insert?t.w_size-t.insert:i),t.high_water<t.strstart&&(t.high_water=t.strstart),i=t.bi_valid+42>>3,i=t.pending_buf_size-i>65535?65535:t.pending_buf_size-i,a=i>t.w_size?t.w_size:i,r=t.strstart-t.block_start,(r>=a||(r||n===$o)&&n!==hh&&t.strm.avail_in===0&&r<=i)&&(e=r>i?i:r,s=n===$o&&t.strm.avail_in===0&&e===r?1:0,cN(t,t.block_start,e,s),t.block_start+=e,go(t.strm)),s?3:1)},FC=(t,n)=>{let e,r;for(;;){if(t.lookahead<ju){if(og(t),t.lookahead<ju&&n===hh)return 1;if(t.lookahead===0)break}if(e=0,t.lookahead>=3&&(t.ins_h=fh(t,t.ins_h,t.window[t.strstart+3-1]),e=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),e!==0&&t.strstart-e<=t.w_size-ju&&(t.match_length=QR(t,e)),t.match_length>=3)if(r=dh(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do t.strstart++,t.ins_h=fh(t,t.ins_h,t.window[t.strstart+3-1]),e=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(--t.match_length!=0);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=fh(t,t.ins_h,t.window[t.strstart+1]);else r=dh(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(bo(t,!1),t.strm.avail_out===0))return 1}return t.insert=t.strstart<2?t.strstart:2,n===$o?(bo(t,!0),t.strm.avail_out===0?3:4):t.sym_next&&(bo(t,!1),t.strm.avail_out===0)?1:2},Xm=(t,n)=>{let e,r,i;for(;;){if(t.lookahead<ju){if(og(t),t.lookahead<ju&&n===hh)return 1;if(t.lookahead===0)break}if(e=0,t.lookahead>=3&&(t.ins_h=fh(t,t.ins_h,t.window[t.strstart+3-1]),e=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,e!==0&&t.prev_length<t.max_lazy_match&&t.strstart-e<=t.w_size-ju&&(t.match_length=QR(t,e),t.match_length<=5&&(t.strategy===vH||t.match_length===3&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-3,r=dh(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=i&&(t.ins_h=fh(t,t.ins_h,t.window[t.strstart+3-1]),e=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(--t.prev_length!=0);if(t.match_available=0,t.match_length=2,t.strstart++,r&&(bo(t,!1),t.strm.avail_out===0))return 1}else if(t.match_available){if(r=dh(t,0,t.window[t.strstart-1]),r&&bo(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=dh(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,n===$o?(bo(t,!0),t.strm.avail_out===0?3:4):t.sym_next&&(bo(t,!1),t.strm.avail_out===0)?1:2};function Du(t,n,e,r,i){this.good_length=t,this.max_lazy=n,this.nice_length=e,this.max_chain=r,this.func=i}const G_=[new Du(0,0,0,0,$R),new Du(4,4,8,4,FC),new Du(4,5,16,8,FC),new Du(4,6,32,32,FC),new Du(4,4,16,16,Xm),new Du(8,16,32,32,Xm),new Du(8,16,128,128,Xm),new Du(8,32,128,256,Xm),new Du(32,128,258,1024,Xm),new Du(32,258,258,4096,Xm)];function wH(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=c1,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),ih(this.dyn_ltree),ih(this.dyn_dtree),ih(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),ih(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),ih(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const V_=t=>{if(!t)return 1;const n=t.state;return!n||n.strm!==t||n.status!==dg&&n.status!==57&&n.status!==69&&n.status!==73&&n.status!==91&&n.status!==103&&n.status!==Wf&&n.status!==j_?1:0},XR=t=>{if(V_(t))return Kf(t,xu);t.total_in=t.total_out=0,t.data_type=EH;const n=t.state;return n.pending=0,n.pending_out=0,n.wrap<0&&(n.wrap=-n.wrap),n.status=n.wrap===2?57:n.wrap?dg:Wf,t.adler=n.wrap===2?0:1,n.last_flush=-2,cH(n),ga},ZR=t=>{const n=XR(t);var e;return n===ga&&((e=t.state).window_size=2*e.w_size,ih(e.head),e.max_lazy_match=G_[e.level].max_lazy,e.good_match=G_[e.level].good_length,e.nice_match=G_[e.level].nice_length,e.max_chain_length=G_[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),n},DI=(t,n,e,r,i,a)=>{if(!t)return xu;let s=1;if(n===gH&&(n=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),i<1||i>9||e!==c1||r<8||r>15||n<0||n>9||a<0||a>yH||r===8&&s!==1)return Kf(t,xu);r===8&&(r=9);const l=new wH;return t.state=l,l.strm=t,l.status=dg,l.wrap=s,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=i+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+3-1)/3),l.window=new Uint8Array(2*l.w_size),l.head=new Uint16Array(l.hash_size),l.prev=new Uint16Array(l.w_size),l.lit_bufsize=1<<i+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new Uint8Array(l.pending_buf_size),l.sym_buf=l.lit_bufsize,l.sym_end=3*(l.lit_bufsize-1),l.level=n,l.strategy=a,l.method=e,ZR(t)};var r0={deflateInit:(t,n)=>DI(t,n,c1,15,8,bH),deflateInit2:DI,deflateReset:ZR,deflateResetKeep:XR,deflateSetHeader:(t,n)=>V_(t)||t.state.wrap!==2?xu:(t.state.gzhead=n,ga),deflate:(t,n)=>{if(V_(t)||n>OI||n<0)return t?Kf(t,xu):xu;const e=t.state;if(!t.output||t.avail_in!==0&&!t.input||e.status===j_&&n!==$o)return Kf(t,t.avail_out===0?LC:xu);const r=e.last_flush;if(e.last_flush=n,e.pending!==0){if(go(t),t.avail_out===0)return e.last_flush=-1,ga}else if(t.avail_in===0&&RI(n)<=RI(r)&&n!==$o)return Kf(t,LC);if(e.status===j_&&t.avail_in!==0)return Kf(t,LC);if(e.status===dg&&e.wrap===0&&(e.status=Wf),e.status===dg){let i=c1+(e.w_bits-8<<4)<<8,a=-1;if(a=e.strategy>=sE||e.level<2?0:e.level<6?1:e.level===6?2:3,i|=a<<6,e.strstart!==0&&(i|=32),i+=31-i%31,T_(e,i),e.strstart!==0&&(T_(e,t.adler>>>16),T_(e,65535&t.adler)),t.adler=1,e.status=Wf,go(t),e.pending!==0)return e.last_flush=-1,ga}if(e.status===57){if(t.adler=0,or(e,31),or(e,139),or(e,8),e.gzhead)or(e,(e.gzhead.text?1:0)+(e.gzhead.hcrc?2:0)+(e.gzhead.extra?4:0)+(e.gzhead.name?8:0)+(e.gzhead.comment?16:0)),or(e,255&e.gzhead.time),or(e,e.gzhead.time>>8&255),or(e,e.gzhead.time>>16&255),or(e,e.gzhead.time>>24&255),or(e,e.level===9?2:e.strategy>=sE||e.level<2?4:0),or(e,255&e.gzhead.os),e.gzhead.extra&&e.gzhead.extra.length&&(or(e,255&e.gzhead.extra.length),or(e,e.gzhead.extra.length>>8&255)),e.gzhead.hcrc&&(t.adler=Zi(t.adler,e.pending_buf,e.pending,0)),e.gzindex=0,e.status=69;else if(or(e,0),or(e,0),or(e,0),or(e,0),or(e,0),or(e,e.level===9?2:e.strategy>=sE||e.level<2?4:0),or(e,3),e.status=Wf,go(t),e.pending!==0)return e.last_flush=-1,ga}if(e.status===69){if(e.gzhead.extra){let i=e.pending,a=(65535&e.gzhead.extra.length)-e.gzindex;for(;e.pending+a>e.pending_buf_size;){let l=e.pending_buf_size-e.pending;if(e.pending_buf.set(e.gzhead.extra.subarray(e.gzindex,e.gzindex+l),e.pending),e.pending=e.pending_buf_size,e.gzhead.hcrc&&e.pending>i&&(t.adler=Zi(t.adler,e.pending_buf,e.pending-i,i)),e.gzindex+=l,go(t),e.pending!==0)return e.last_flush=-1,ga;i=0,a-=l}let s=new Uint8Array(e.gzhead.extra);e.pending_buf.set(s.subarray(e.gzindex,e.gzindex+a),e.pending),e.pending+=a,e.gzhead.hcrc&&e.pending>i&&(t.adler=Zi(t.adler,e.pending_buf,e.pending-i,i)),e.gzindex=0}e.status=73}if(e.status===73){if(e.gzhead.name){let i,a=e.pending;do{if(e.pending===e.pending_buf_size){if(e.gzhead.hcrc&&e.pending>a&&(t.adler=Zi(t.adler,e.pending_buf,e.pending-a,a)),go(t),e.pending!==0)return e.last_flush=-1,ga;a=0}i=e.gzindex<e.gzhead.name.length?255&e.gzhead.name.charCodeAt(e.gzindex++):0,or(e,i)}while(i!==0);e.gzhead.hcrc&&e.pending>a&&(t.adler=Zi(t.adler,e.pending_buf,e.pending-a,a)),e.gzindex=0}e.status=91}if(e.status===91){if(e.gzhead.comment){let i,a=e.pending;do{if(e.pending===e.pending_buf_size){if(e.gzhead.hcrc&&e.pending>a&&(t.adler=Zi(t.adler,e.pending_buf,e.pending-a,a)),go(t),e.pending!==0)return e.last_flush=-1,ga;a=0}i=e.gzindex<e.gzhead.comment.length?255&e.gzhead.comment.charCodeAt(e.gzindex++):0,or(e,i)}while(i!==0);e.gzhead.hcrc&&e.pending>a&&(t.adler=Zi(t.adler,e.pending_buf,e.pending-a,a))}e.status=103}if(e.status===103){if(e.gzhead.hcrc){if(e.pending+2>e.pending_buf_size&&(go(t),e.pending!==0))return e.last_flush=-1,ga;or(e,255&t.adler),or(e,t.adler>>8&255),t.adler=0}if(e.status=Wf,go(t),e.pending!==0)return e.last_flush=-1,ga}if(t.avail_in!==0||e.lookahead!==0||n!==hh&&e.status!==j_){let i=e.level===0?$R(e,n):e.strategy===sE?((a,s)=>{let l;for(;;){if(a.lookahead===0&&(og(a),a.lookahead===0)){if(s===hh)return 1;break}if(a.match_length=0,l=dh(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++,l&&(bo(a,!1),a.strm.avail_out===0))return 1}return a.insert=0,s===$o?(bo(a,!0),a.strm.avail_out===0?3:4):a.sym_next&&(bo(a,!1),a.strm.avail_out===0)?1:2})(e,n):e.strategy===_H?((a,s)=>{let l,c,d,p;const g=a.window;for(;;){if(a.lookahead<=np){if(og(a),a.lookahead<=np&&s===hh)return 1;if(a.lookahead===0)break}if(a.match_length=0,a.lookahead>=3&&a.strstart>0&&(d=a.strstart-1,c=g[d],c===g[++d]&&c===g[++d]&&c===g[++d])){p=a.strstart+np;do;while(c===g[++d]&&c===g[++d]&&c===g[++d]&&c===g[++d]&&c===g[++d]&&c===g[++d]&&c===g[++d]&&c===g[++d]&&d<p);a.match_length=np-(p-d),a.match_length>a.lookahead&&(a.match_length=a.lookahead)}if(a.match_length>=3?(l=dh(a,1,a.match_length-3),a.lookahead-=a.match_length,a.strstart+=a.match_length,a.match_length=0):(l=dh(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++),l&&(bo(a,!1),a.strm.avail_out===0))return 1}return a.insert=0,s===$o?(bo(a,!0),a.strm.avail_out===0?3:4):a.sym_next&&(bo(a,!1),a.strm.avail_out===0)?1:2})(e,n):G_[e.level].func(e,n);if(i!==3&&i!==4||(e.status=j_),i===1||i===3)return t.avail_out===0&&(e.last_flush=-1),ga;if(i===2&&(n===fH?hH(e):n!==OI&&(cN(e,0,0,!1),n===pH&&(ih(e.head),e.lookahead===0&&(e.strstart=0,e.block_start=0,e.insert=0))),go(t),t.avail_out===0))return e.last_flush=-1,ga}return n!==$o?ga:e.wrap<=0?kI:(e.wrap===2?(or(e,255&t.adler),or(e,t.adler>>8&255),or(e,t.adler>>16&255),or(e,t.adler>>24&255),or(e,255&t.total_in),or(e,t.total_in>>8&255),or(e,t.total_in>>16&255),or(e,t.total_in>>24&255)):(T_(e,t.adler>>>16),T_(e,65535&t.adler)),go(t),e.wrap>0&&(e.wrap=-e.wrap),e.pending!==0?ga:kI)},deflateEnd:t=>{if(V_(t))return xu;const n=t.state.status;return t.state=null,n===Wf?Kf(t,mH):ga},deflateSetDictionary:(t,n)=>{let e=n.length;if(V_(t))return xu;const r=t.state,i=r.wrap;if(i===2||i===1&&r.status!==dg||r.lookahead)return xu;if(i===1&&(t.adler=n0(t.adler,n,e,0)),r.wrap=0,e>=r.w_size){i===0&&(ih(r.head),r.strstart=0,r.block_start=0,r.insert=0);let c=new Uint8Array(r.w_size);c.set(n.subarray(e-r.w_size,e),0),n=c,e=r.w_size}const a=t.avail_in,s=t.next_in,l=t.input;for(t.avail_in=e,t.next_in=0,t.input=n,og(r);r.lookahead>=3;){let c=r.strstart,d=r.lookahead-2;do r.ins_h=fh(r,r.ins_h,r.window[c+3-1]),r.prev[c&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=c,c++;while(--d);r.strstart=c,r.lookahead=2,og(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,t.next_in=s,t.input=l,t.avail_in=a,r.wrap=i,ga},deflateInfo:"pako deflate (from Nodeca project)"};const NH=(t,n)=>Object.prototype.hasOwnProperty.call(t,n);var JR=function(t){const n=Array.prototype.slice.call(arguments,1);for(;n.length;){const e=n.shift();if(e){if(typeof e!="object")throw new TypeError(e+"must be non-object");for(const r in e)NH(e,r)&&(t[r]=e[r])}}return t},eD=t=>{let n=0;for(let r=0,i=t.length;r<i;r++)n+=t[r].length;const e=new Uint8Array(n);for(let r=0,i=0,a=t.length;r<a;r++){let s=t[r];e.set(s,i),i+=s.length}return e};let tD=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{tD=!1}const I0=new Uint8Array(256);for(let t=0;t<256;t++)I0[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;I0[254]=I0[254]=1;var J3=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let n,e,r,i,a,s=t.length,l=0;for(i=0;i<s;i++)e=t.charCodeAt(i),(64512&e)==55296&&i+1<s&&(r=t.charCodeAt(i+1),(64512&r)==56320&&(e=65536+(e-55296<<10)+(r-56320),i++)),l+=e<128?1:e<2048?2:e<65536?3:4;for(n=new Uint8Array(l),a=0,i=0;a<l;i++)e=t.charCodeAt(i),(64512&e)==55296&&i+1<s&&(r=t.charCodeAt(i+1),(64512&r)==56320&&(e=65536+(e-55296<<10)+(r-56320),i++)),e<128?n[a++]=e:e<2048?(n[a++]=192|e>>>6,n[a++]=128|63&e):e<65536?(n[a++]=224|e>>>12,n[a++]=128|e>>>6&63,n[a++]=128|63&e):(n[a++]=240|e>>>18,n[a++]=128|e>>>12&63,n[a++]=128|e>>>6&63,n[a++]=128|63&e);return n},TH=(t,n)=>{const e=n||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,n));let r,i;const a=new Array(2*e);for(i=0,r=0;r<e;){let s=t[r++];if(s<128){a[i++]=s;continue}let l=I0[s];if(l>4)a[i++]=65533,r+=l-1;else{for(s&=l===2?31:l===3?15:7;l>1&&r<e;)s=s<<6|63&t[r++],l--;l>1?a[i++]=65533:s<65536?a[i++]=s:(s-=65536,a[i++]=55296|s>>10&1023,a[i++]=56320|1023&s)}}return((s,l)=>{if(l<65534&&s.subarray&&tD)return String.fromCharCode.apply(null,s.length===l?s:s.subarray(0,l));let c="";for(let d=0;d<l;d++)c+=String.fromCharCode(s[d]);return c})(a,i)},SH=(t,n)=>{(n=n||t.length)>t.length&&(n=t.length);let e=n-1;for(;e>=0&&(192&t[e])==128;)e--;return e<0||e===0?n:e+I0[t[e]]>n?e:n},nD=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const rD=Object.prototype.toString,{Z_NO_FLUSH:AH,Z_SYNC_FLUSH:IH,Z_FULL_FLUSH:MH,Z_FINISH:OH,Z_OK:d1,Z_STREAM_END:kH,Z_DEFAULT_COMPRESSION:RH,Z_DEFAULT_STRATEGY:DH,Z_DEFLATED:xH}=q0;function i0(t){this.options=JR({level:RH,method:xH,chunkSize:16384,windowBits:15,memLevel:8,strategy:DH},t||{});let n=this.options;n.raw&&n.windowBits>0?n.windowBits=-n.windowBits:n.gzip&&n.windowBits>0&&n.windowBits<16&&(n.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new nD,this.strm.avail_out=0;let e=r0.deflateInit2(this.strm,n.level,n.method,n.windowBits,n.memLevel,n.strategy);if(e!==d1)throw new Error(mp[e]);if(n.header&&r0.deflateSetHeader(this.strm,n.header),n.dictionary){let r;if(r=typeof n.dictionary=="string"?J3(n.dictionary):rD.call(n.dictionary)==="[object ArrayBuffer]"?new Uint8Array(n.dictionary):n.dictionary,e=r0.deflateSetDictionary(this.strm,r),e!==d1)throw new Error(mp[e]);this._dict_set=!0}}function HC(t,n){const e=new i0(n);if(e.push(t,!0),e.err)throw e.msg||mp[e.err];return e.result}i0.prototype.push=function(t,n){const e=this.strm,r=this.options.chunkSize;let i,a;if(this.ended)return!1;for(a=n===~~n?n:n===!0?OH:AH,typeof t=="string"?e.input=J3(t):rD.call(t)==="[object ArrayBuffer]"?e.input=new Uint8Array(t):e.input=t,e.next_in=0,e.avail_in=e.input.length;;)if(e.avail_out===0&&(e.output=new Uint8Array(r),e.next_out=0,e.avail_out=r),(a===IH||a===MH)&&e.avail_out<=6)this.onData(e.output.subarray(0,e.next_out)),e.avail_out=0;else{if(i=r0.deflate(e,a),i===kH)return e.next_out>0&&this.onData(e.output.subarray(0,e.next_out)),i=r0.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===d1;if(e.avail_out!==0){if(a>0&&e.next_out>0)this.onData(e.output.subarray(0,e.next_out)),e.avail_out=0;else if(e.avail_in===0)break}else this.onData(e.output)}return!0},i0.prototype.onData=function(t){this.chunks.push(t)},i0.prototype.onEnd=function(t){t===d1&&(this.result=eD(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var PH={Deflate:i0,deflate:HC,deflateRaw:function(t,n){return(n=n||{}).raw=!0,HC(t,n)},gzip:function(t,n){return(n=n||{}).gzip=!0,HC(t,n)}};const oE=16209;var UH=function(t,n){let e,r,i,a,s,l,c,d,p,g,_,y,C,w,A,M,I,D,P,H,L,G,Y,F;const ne=t.state;e=t.next_in,Y=t.input,r=e+(t.avail_in-5),i=t.next_out,F=t.output,a=i-(n-t.avail_out),s=i+(t.avail_out-257),l=ne.dmax,c=ne.wsize,d=ne.whave,p=ne.wnext,g=ne.window,_=ne.hold,y=ne.bits,C=ne.lencode,w=ne.distcode,A=(1<<ne.lenbits)-1,M=(1<<ne.distbits)-1;e:do{y<15&&(_+=Y[e++]<<y,y+=8,_+=Y[e++]<<y,y+=8),I=C[_&A];t:for(;;){if(D=I>>>24,_>>>=D,y-=D,D=I>>>16&255,D===0)F[i++]=65535&I;else{if(!(16&D)){if(64&D){if(32&D){ne.mode=16191;break e}t.msg="invalid literal/length code",ne.mode=oE;break e}I=C[(65535&I)+(_&(1<<D)-1)];continue t}for(P=65535&I,D&=15,D&&(y<D&&(_+=Y[e++]<<y,y+=8),P+=_&(1<<D)-1,_>>>=D,y-=D),y<15&&(_+=Y[e++]<<y,y+=8,_+=Y[e++]<<y,y+=8),I=w[_&M];;){if(D=I>>>24,_>>>=D,y-=D,D=I>>>16&255,16&D){if(H=65535&I,D&=15,y<D&&(_+=Y[e++]<<y,y+=8,y<D&&(_+=Y[e++]<<y,y+=8)),H+=_&(1<<D)-1,H>l){t.msg="invalid distance too far back",ne.mode=oE;break e}if(_>>>=D,y-=D,D=i-a,H>D){if(D=H-D,D>d&&ne.sane){t.msg="invalid distance too far back",ne.mode=oE;break e}if(L=0,G=g,p===0){if(L+=c-D,D<P){P-=D;do F[i++]=g[L++];while(--D);L=i-H,G=F}}else if(p<D){if(L+=c+p-D,D-=p,D<P){P-=D;do F[i++]=g[L++];while(--D);if(L=0,p<P){D=p,P-=D;do F[i++]=g[L++];while(--D);L=i-H,G=F}}}else if(L+=p-D,D<P){P-=D;do F[i++]=g[L++];while(--D);L=i-H,G=F}for(;P>2;)F[i++]=G[L++],F[i++]=G[L++],F[i++]=G[L++],P-=3;P&&(F[i++]=G[L++],P>1&&(F[i++]=G[L++]))}else{L=i-H;do F[i++]=F[L++],F[i++]=F[L++],F[i++]=F[L++],P-=3;while(P>2);P&&(F[i++]=F[L++],P>1&&(F[i++]=F[L++]))}break}if(64&D){t.msg="invalid distance code",ne.mode=oE;break e}I=w[(65535&I)+(_&(1<<D)-1)]}}break}}while(e<r&&i<s);P=y>>3,e-=P,y-=P<<3,_&=(1<<y)-1,t.next_in=e,t.next_out=i,t.avail_in=e<r?r-e+5:5-(e-r),t.avail_out=i<s?s-i+257:257-(i-s),ne.hold=_,ne.bits=y};const lE=15,LH=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),FH=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),HH=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),jH=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var a0=(t,n,e,r,i,a,s,l)=>{const c=l.bits;let d,p,g,_,y,C,w=0,A=0,M=0,I=0,D=0,P=0,H=0,L=0,G=0,Y=0,F=null;const ne=new Uint16Array(16),J=new Uint16Array(16);let re,Oe,Z,ue=null;for(w=0;w<=lE;w++)ne[w]=0;for(A=0;A<r;A++)ne[n[e+A]]++;for(D=c,I=lE;I>=1&&ne[I]===0;I--);if(D>I&&(D=I),I===0)return i[a++]=20971520,i[a++]=20971520,l.bits=1,0;for(M=1;M<I&&ne[M]===0;M++);for(D<M&&(D=M),L=1,w=1;w<=lE;w++)if(L<<=1,L-=ne[w],L<0)return-1;if(L>0&&(t===0||I!==1))return-1;for(J[1]=0,w=1;w<lE;w++)J[w+1]=J[w]+ne[w];for(A=0;A<r;A++)n[e+A]!==0&&(s[J[n[e+A]]++]=A);if(t===0?(F=ue=s,C=20):t===1?(F=LH,ue=FH,C=257):(F=HH,ue=jH,C=0),Y=0,A=0,w=M,y=a,P=D,H=0,g=-1,G=1<<D,_=G-1,t===1&&G>852||t===2&&G>592)return 1;for(;;){re=w-H,s[A]+1<C?(Oe=0,Z=s[A]):s[A]>=C?(Oe=ue[s[A]-C],Z=F[s[A]-C]):(Oe=96,Z=0),d=1<<w-H,p=1<<P,M=p;do p-=d,i[y+(Y>>H)+p]=re<<24|Oe<<16|Z;while(p!==0);for(d=1<<w-1;Y&d;)d>>=1;if(d!==0?(Y&=d-1,Y+=d):Y=0,A++,--ne[w]==0){if(w===I)break;w=n[e+s[A]]}if(w>D&&(Y&_)!==g){for(H===0&&(H=D),y+=M,P=w-H,L=1<<P;P+H<I&&(L-=ne[P+H],!(L<=0));)P++,L<<=1;if(G+=1<<P,t===1&&G>852||t===2&&G>592)return 1;g=Y&_,i[g]=D<<24|P<<16|y-a}}return Y!==0&&(i[y+Y]=w-H<<24|64<<16),l.bits=D,0};const{Z_FINISH:xI,Z_BLOCK:GH,Z_TREES:uE,Z_OK:Yf,Z_STREAM_END:VH,Z_NEED_DICT:BH,Z_STREAM_ERROR:Wo,Z_DATA_ERROR:PI,Z_MEM_ERROR:UI,Z_BUF_ERROR:zH,Z_DEFLATED:LI}=q0,Q1=16180,cE=16190,Ec=16191,jC=16192,GC=16194,dE=16199,hE=16200,VC=16206,$r=16209,FI=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function qH(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const rp=t=>{if(!t)return 1;const n=t.state;return!n||n.strm!==t||n.mode<Q1||n.mode>16211?1:0},iD=t=>{if(rp(t))return Wo;const n=t.state;return t.total_in=t.total_out=n.total=0,t.msg="",n.wrap&&(t.adler=1&n.wrap),n.mode=Q1,n.last=0,n.havedict=0,n.flags=-1,n.dmax=32768,n.head=null,n.hold=0,n.bits=0,n.lencode=n.lendyn=new Int32Array(852),n.distcode=n.distdyn=new Int32Array(592),n.sane=1,n.back=-1,Yf},aD=t=>{if(rp(t))return Wo;const n=t.state;return n.wsize=0,n.whave=0,n.wnext=0,iD(t)},sD=(t,n)=>{let e;if(rp(t))return Wo;const r=t.state;return n<0?(e=0,n=-n):(e=5+(n>>4),n<48&&(n&=15)),n&&(n<8||n>15)?Wo:(r.window!==null&&r.wbits!==n&&(r.window=null),r.wrap=e,r.wbits=n,aD(t))},HI=(t,n)=>{if(!t)return Wo;const e=new qH;t.state=e,e.strm=t,e.window=null,e.mode=Q1;const r=sD(t,n);return r!==Yf&&(t.state=null),r};let BC,zC,jI=!0;const WH=t=>{if(jI){BC=new Int32Array(512),zC=new Int32Array(32);let n=0;for(;n<144;)t.lens[n++]=8;for(;n<256;)t.lens[n++]=9;for(;n<280;)t.lens[n++]=7;for(;n<288;)t.lens[n++]=8;for(a0(1,t.lens,0,288,BC,0,t.work,{bits:9}),n=0;n<32;)t.lens[n++]=5;a0(2,t.lens,0,32,zC,0,t.work,{bits:5}),jI=!1}t.lencode=BC,t.lenbits=9,t.distcode=zC,t.distbits=5},GI=(t,n,e,r)=>{let i;const a=t.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),r>=a.wsize?(a.window.set(n.subarray(e-a.wsize,e),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>r&&(i=r),a.window.set(n.subarray(e-r,e-r+i),a.wnext),(r-=i)?(a.window.set(n.subarray(e-r,e),0),a.wnext=r,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0};var Mc={inflateReset:aD,inflateReset2:sD,inflateResetKeep:iD,inflateInit:t=>HI(t,15),inflateInit2:HI,inflate:(t,n)=>{let e,r,i,a,s,l,c,d,p,g,_,y,C,w,A,M,I,D,P,H,L,G,Y=0;const F=new Uint8Array(4);let ne,J;const re=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(rp(t)||!t.output||!t.input&&t.avail_in!==0)return Wo;e=t.state,e.mode===Ec&&(e.mode=jC),s=t.next_out,i=t.output,c=t.avail_out,a=t.next_in,r=t.input,l=t.avail_in,d=e.hold,p=e.bits,g=l,_=c,G=Yf;e:for(;;)switch(e.mode){case Q1:if(e.wrap===0){e.mode=jC;break}for(;p<16;){if(l===0)break e;l--,d+=r[a++]<<p,p+=8}if(2&e.wrap&&d===35615){e.wbits===0&&(e.wbits=15),e.check=0,F[0]=255&d,F[1]=d>>>8&255,e.check=Zi(e.check,F,2,0),d=0,p=0,e.mode=16181;break}if(e.head&&(e.head.done=!1),!(1&e.wrap)||(((255&d)<<8)+(d>>8))%31){t.msg="incorrect header check",e.mode=$r;break}if((15&d)!==LI){t.msg="unknown compression method",e.mode=$r;break}if(d>>>=4,p-=4,L=8+(15&d),e.wbits===0&&(e.wbits=L),L>15||L>e.wbits){t.msg="invalid window size",e.mode=$r;break}e.dmax=1<<e.wbits,e.flags=0,t.adler=e.check=1,e.mode=512&d?16189:Ec,d=0,p=0;break;case 16181:for(;p<16;){if(l===0)break e;l--,d+=r[a++]<<p,p+=8}if(e.flags=d,(255&e.flags)!==LI){t.msg="unknown compression method",e.mode=$r;break}if(57344&e.flags){t.msg="unknown header flags set",e.mode=$r;break}e.head&&(e.head.text=d>>8&1),512&e.flags&&4&e.wrap&&(F[0]=255&d,F[1]=d>>>8&255,e.check=Zi(e.check,F,2,0)),d=0,p=0,e.mode=16182;case 16182:for(;p<32;){if(l===0)break e;l--,d+=r[a++]<<p,p+=8}e.head&&(e.head.time=d),512&e.flags&&4&e.wrap&&(F[0]=255&d,F[1]=d>>>8&255,F[2]=d>>>16&255,F[3]=d>>>24&255,e.check=Zi(e.check,F,4,0)),d=0,p=0,e.mode=16183;case 16183:for(;p<16;){if(l===0)break e;l--,d+=r[a++]<<p,p+=8}e.head&&(e.head.xflags=255&d,e.head.os=d>>8),512&e.flags&&4&e.wrap&&(F[0]=255&d,F[1]=d>>>8&255,e.check=Zi(e.check,F,2,0)),d=0,p=0,e.mode=16184;case 16184:if(1024&e.flags){for(;p<16;){if(l===0)break e;l--,d+=r[a++]<<p,p+=8}e.length=d,e.head&&(e.head.extra_len=d),512&e.flags&&4&e.wrap&&(F[0]=255&d,F[1]=d>>>8&255,e.check=Zi(e.check,F,2,0)),d=0,p=0}else e.head&&(e.head.extra=null);e.mode=16185;case 16185:if(1024&e.flags&&(y=e.length,y>l&&(y=l),y&&(e.head&&(L=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Uint8Array(e.head.extra_len)),e.head.extra.set(r.subarray(a,a+y),L)),512&e.flags&&4&e.wrap&&(e.check=Zi(e.check,r,y,a)),l-=y,a+=y,e.length-=y),e.length))break e;e.length=0,e.mode=16186;case 16186:if(2048&e.flags){if(l===0)break e;y=0;do L=r[a+y++],e.head&&L&&e.length<65536&&(e.head.name+=String.fromCharCode(L));while(L&&y<l);if(512&e.flags&&4&e.wrap&&(e.check=Zi(e.check,r,y,a)),l-=y,a+=y,L)break e}else e.head&&(e.head.name=null);e.length=0,e.mode=16187;case 16187:if(4096&e.flags){if(l===0)break e;y=0;do L=r[a+y++],e.head&&L&&e.length<65536&&(e.head.comment+=String.fromCharCode(L));while(L&&y<l);if(512&e.flags&&4&e.wrap&&(e.check=Zi(e.check,r,y,a)),l-=y,a+=y,L)break e}else e.head&&(e.head.comment=null);e.mode=16188;case 16188:if(512&e.flags){for(;p<16;){if(l===0)break e;l--,d+=r[a++]<<p,p+=8}if(4&e.wrap&&d!==(65535&e.check)){t.msg="header crc mismatch",e.mode=$r;break}d=0,p=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),t.adler=e.check=0,e.mode=Ec;break;case 16189:for(;p<32;){if(l===0)break e;l--,d+=r[a++]<<p,p+=8}t.adler=e.check=FI(d),d=0,p=0,e.mode=cE;case cE:if(e.havedict===0)return t.next_out=s,t.avail_out=c,t.next_in=a,t.avail_in=l,e.hold=d,e.bits=p,BH;t.adler=e.check=1,e.mode=Ec;case Ec:if(n===GH||n===uE)break e;case jC:if(e.last){d>>>=7&p,p-=7&p,e.mode=VC;break}for(;p<3;){if(l===0)break e;l--,d+=r[a++]<<p,p+=8}switch(e.last=1&d,d>>>=1,p-=1,3&d){case 0:e.mode=16193;break;case 1:if(WH(e),e.mode=dE,n===uE){d>>>=2,p-=2;break e}break;case 2:e.mode=16196;break;case 3:t.msg="invalid block type",e.mode=$r}d>>>=2,p-=2;break;case 16193:for(d>>>=7&p,p-=7&p;p<32;){if(l===0)break e;l--,d+=r[a++]<<p,p+=8}if((65535&d)!=(d>>>16^65535)){t.msg="invalid stored block lengths",e.mode=$r;break}if(e.length=65535&d,d=0,p=0,e.mode=GC,n===uE)break e;case GC:e.mode=16195;case 16195:if(y=e.length,y){if(y>l&&(y=l),y>c&&(y=c),y===0)break e;i.set(r.subarray(a,a+y),s),l-=y,a+=y,c-=y,s+=y,e.length-=y;break}e.mode=Ec;break;case 16196:for(;p<14;){if(l===0)break e;l--,d+=r[a++]<<p,p+=8}if(e.nlen=257+(31&d),d>>>=5,p-=5,e.ndist=1+(31&d),d>>>=5,p-=5,e.ncode=4+(15&d),d>>>=4,p-=4,e.nlen>286||e.ndist>30){t.msg="too many length or distance symbols",e.mode=$r;break}e.have=0,e.mode=16197;case 16197:for(;e.have<e.ncode;){for(;p<3;){if(l===0)break e;l--,d+=r[a++]<<p,p+=8}e.lens[re[e.have++]]=7&d,d>>>=3,p-=3}for(;e.have<19;)e.lens[re[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,ne={bits:e.lenbits},G=a0(0,e.lens,0,19,e.lencode,0,e.work,ne),e.lenbits=ne.bits,G){t.msg="invalid code lengths set",e.mode=$r;break}e.have=0,e.mode=16198;case 16198:for(;e.have<e.nlen+e.ndist;){for(;Y=e.lencode[d&(1<<e.lenbits)-1],A=Y>>>24,M=Y>>>16&255,I=65535&Y,!(A<=p);){if(l===0)break e;l--,d+=r[a++]<<p,p+=8}if(I<16)d>>>=A,p-=A,e.lens[e.have++]=I;else{if(I===16){for(J=A+2;p<J;){if(l===0)break e;l--,d+=r[a++]<<p,p+=8}if(d>>>=A,p-=A,e.have===0){t.msg="invalid bit length repeat",e.mode=$r;break}L=e.lens[e.have-1],y=3+(3&d),d>>>=2,p-=2}else if(I===17){for(J=A+3;p<J;){if(l===0)break e;l--,d+=r[a++]<<p,p+=8}d>>>=A,p-=A,L=0,y=3+(7&d),d>>>=3,p-=3}else{for(J=A+7;p<J;){if(l===0)break e;l--,d+=r[a++]<<p,p+=8}d>>>=A,p-=A,L=0,y=11+(127&d),d>>>=7,p-=7}if(e.have+y>e.nlen+e.ndist){t.msg="invalid bit length repeat",e.mode=$r;break}for(;y--;)e.lens[e.have++]=L}}if(e.mode===$r)break;if(e.lens[256]===0){t.msg="invalid code -- missing end-of-block",e.mode=$r;break}if(e.lenbits=9,ne={bits:e.lenbits},G=a0(1,e.lens,0,e.nlen,e.lencode,0,e.work,ne),e.lenbits=ne.bits,G){t.msg="invalid literal/lengths set",e.mode=$r;break}if(e.distbits=6,e.distcode=e.distdyn,ne={bits:e.distbits},G=a0(2,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,ne),e.distbits=ne.bits,G){t.msg="invalid distances set",e.mode=$r;break}if(e.mode=dE,n===uE)break e;case dE:e.mode=hE;case hE:if(l>=6&&c>=258){t.next_out=s,t.avail_out=c,t.next_in=a,t.avail_in=l,e.hold=d,e.bits=p,UH(t,_),s=t.next_out,i=t.output,c=t.avail_out,a=t.next_in,r=t.input,l=t.avail_in,d=e.hold,p=e.bits,e.mode===Ec&&(e.back=-1);break}for(e.back=0;Y=e.lencode[d&(1<<e.lenbits)-1],A=Y>>>24,M=Y>>>16&255,I=65535&Y,!(A<=p);){if(l===0)break e;l--,d+=r[a++]<<p,p+=8}if(M&&!(240&M)){for(D=A,P=M,H=I;Y=e.lencode[H+((d&(1<<D+P)-1)>>D)],A=Y>>>24,M=Y>>>16&255,I=65535&Y,!(D+A<=p);){if(l===0)break e;l--,d+=r[a++]<<p,p+=8}d>>>=D,p-=D,e.back+=D}if(d>>>=A,p-=A,e.back+=A,e.length=I,M===0){e.mode=16205;break}if(32&M){e.back=-1,e.mode=Ec;break}if(64&M){t.msg="invalid literal/length code",e.mode=$r;break}e.extra=15&M,e.mode=16201;case 16201:if(e.extra){for(J=e.extra;p<J;){if(l===0)break e;l--,d+=r[a++]<<p,p+=8}e.length+=d&(1<<e.extra)-1,d>>>=e.extra,p-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=16202;case 16202:for(;Y=e.distcode[d&(1<<e.distbits)-1],A=Y>>>24,M=Y>>>16&255,I=65535&Y,!(A<=p);){if(l===0)break e;l--,d+=r[a++]<<p,p+=8}if(!(240&M)){for(D=A,P=M,H=I;Y=e.distcode[H+((d&(1<<D+P)-1)>>D)],A=Y>>>24,M=Y>>>16&255,I=65535&Y,!(D+A<=p);){if(l===0)break e;l--,d+=r[a++]<<p,p+=8}d>>>=D,p-=D,e.back+=D}if(d>>>=A,p-=A,e.back+=A,64&M){t.msg="invalid distance code",e.mode=$r;break}e.offset=I,e.extra=15&M,e.mode=16203;case 16203:if(e.extra){for(J=e.extra;p<J;){if(l===0)break e;l--,d+=r[a++]<<p,p+=8}e.offset+=d&(1<<e.extra)-1,d>>>=e.extra,p-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){t.msg="invalid distance too far back",e.mode=$r;break}e.mode=16204;case 16204:if(c===0)break e;if(y=_-c,e.offset>y){if(y=e.offset-y,y>e.whave&&e.sane){t.msg="invalid distance too far back",e.mode=$r;break}y>e.wnext?(y-=e.wnext,C=e.wsize-y):C=e.wnext-y,y>e.length&&(y=e.length),w=e.window}else w=i,C=s-e.offset,y=e.length;y>c&&(y=c),c-=y,e.length-=y;do i[s++]=w[C++];while(--y);e.length===0&&(e.mode=hE);break;case 16205:if(c===0)break e;i[s++]=e.length,c--,e.mode=hE;break;case VC:if(e.wrap){for(;p<32;){if(l===0)break e;l--,d|=r[a++]<<p,p+=8}if(_-=c,t.total_out+=_,e.total+=_,4&e.wrap&&_&&(t.adler=e.check=e.flags?Zi(e.check,i,_,s-_):n0(e.check,i,_,s-_)),_=c,4&e.wrap&&(e.flags?d:FI(d))!==e.check){t.msg="incorrect data check",e.mode=$r;break}d=0,p=0}e.mode=16207;case 16207:if(e.wrap&&e.flags){for(;p<32;){if(l===0)break e;l--,d+=r[a++]<<p,p+=8}if(4&e.wrap&&d!==(4294967295&e.total)){t.msg="incorrect length check",e.mode=$r;break}d=0,p=0}e.mode=16208;case 16208:G=VH;break e;case $r:G=PI;break e;case 16210:return UI;default:return Wo}return t.next_out=s,t.avail_out=c,t.next_in=a,t.avail_in=l,e.hold=d,e.bits=p,(e.wsize||_!==t.avail_out&&e.mode<$r&&(e.mode<VC||n!==xI))&&GI(t,t.output,t.next_out,_-t.avail_out),g-=t.avail_in,_-=t.avail_out,t.total_in+=g,t.total_out+=_,e.total+=_,4&e.wrap&&_&&(t.adler=e.check=e.flags?Zi(e.check,i,_,t.next_out-_):n0(e.check,i,_,t.next_out-_)),t.data_type=e.bits+(e.last?64:0)+(e.mode===Ec?128:0)+(e.mode===dE||e.mode===GC?256:0),(g===0&&_===0||n===xI)&&G===Yf&&(G=zH),G},inflateEnd:t=>{if(rp(t))return Wo;let n=t.state;return n.window&&(n.window=null),t.state=null,Yf},inflateGetHeader:(t,n)=>{if(rp(t))return Wo;const e=t.state;return 2&e.wrap?(e.head=n,n.done=!1,Yf):Wo},inflateSetDictionary:(t,n)=>{const e=n.length;let r,i,a;return rp(t)?Wo:(r=t.state,r.wrap!==0&&r.mode!==cE?Wo:r.mode===cE&&(i=1,i=n0(i,n,e,0),i!==r.check)?PI:(a=GI(t,n,e,e),a?(r.mode=16210,UI):(r.havedict=1,Yf)))},inflateInfo:"pako inflate (from Nodeca project)"},KH=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const oD=Object.prototype.toString,{Z_NO_FLUSH:YH,Z_FINISH:QH,Z_OK:s0,Z_STREAM_END:qC,Z_NEED_DICT:WC,Z_STREAM_ERROR:$H,Z_DATA_ERROR:VI,Z_MEM_ERROR:XH}=q0;function o0(t){this.options=JR({chunkSize:65536,windowBits:15,to:""},t||{});const n=this.options;n.raw&&n.windowBits>=0&&n.windowBits<16&&(n.windowBits=-n.windowBits,n.windowBits===0&&(n.windowBits=-15)),!(n.windowBits>=0&&n.windowBits<16)||t&&t.windowBits||(n.windowBits+=32),n.windowBits>15&&n.windowBits<48&&(15&n.windowBits||(n.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new nD,this.strm.avail_out=0;let e=Mc.inflateInit2(this.strm,n.windowBits);if(e!==s0)throw new Error(mp[e]);if(this.header=new KH,Mc.inflateGetHeader(this.strm,this.header),n.dictionary&&(typeof n.dictionary=="string"?n.dictionary=J3(n.dictionary):oD.call(n.dictionary)==="[object ArrayBuffer]"&&(n.dictionary=new Uint8Array(n.dictionary)),n.raw&&(e=Mc.inflateSetDictionary(this.strm,n.dictionary),e!==s0)))throw new Error(mp[e])}function KC(t,n){const e=new o0(n);if(e.push(t),e.err)throw e.msg||mp[e.err];return e.result}o0.prototype.push=function(t,n){const e=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let a,s,l;if(this.ended)return!1;for(s=n===~~n?n:n===!0?QH:YH,oD.call(t)==="[object ArrayBuffer]"?e.input=new Uint8Array(t):e.input=t,e.next_in=0,e.avail_in=e.input.length;;){for(e.avail_out===0&&(e.output=new Uint8Array(r),e.next_out=0,e.avail_out=r),a=Mc.inflate(e,s),a===WC&&i&&(a=Mc.inflateSetDictionary(e,i),a===s0?a=Mc.inflate(e,s):a===VI&&(a=WC));e.avail_in>0&&a===qC&&e.state.wrap>0&&t[e.next_in]!==0;)Mc.inflateReset(e),a=Mc.inflate(e,s);switch(a){case $H:case VI:case WC:case XH:return this.onEnd(a),this.ended=!0,!1}if(l=e.avail_out,e.next_out&&(e.avail_out===0||a===qC))if(this.options.to==="string"){let c=SH(e.output,e.next_out),d=e.next_out-c,p=TH(e.output,c);e.next_out=d,e.avail_out=r-d,d&&e.output.set(e.output.subarray(c,c+d),0),this.onData(p)}else this.onData(e.output.length===e.next_out?e.output:e.output.subarray(0,e.next_out));if(a!==s0||l!==0){if(a===qC)return a=Mc.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(e.avail_in===0)break}}return!0},o0.prototype.onData=function(t){this.chunks.push(t)},o0.prototype.onEnd=function(t){t===s0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=eD(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var ZH={Inflate:o0,inflate:KC,inflateRaw:function(t,n){return(n=n||{}).raw=!0,KC(t,n)},ungzip:KC};const{Deflate:JH,deflate:ej,deflateRaw:tj,gzip:nj}=PH,{Inflate:rj,inflate:ij,inflateRaw:aj,ungzip:sj}=ZH;var zl,oj={Deflate:JH,deflate:ej,deflateRaw:tj,gzip:nj,Inflate:rj,inflate:ij,inflateRaw:aj,ungzip:sj,constants:q0},YC=function(t){return S(void 0,void 0,void 0,(function(){var n,e;return T(this,(function(r){if(n=oj.ungzip(t),typeof TextDecoder<"u")try{return[2,new TextDecoder("utf-8").decode(new Uint8Array(n))]}catch{}return e=8192,[2,Array.from({length:Math.ceil(n.length/e)},(function(i,a){var s=a*e,l=n.slice(s,s+e);return String.fromCharCode.apply(null,l)})).join("")]}))}))},$e=function(t){return S(void 0,void 0,void 0,(function(){var n;return T(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,t()];case 1:return e.sent(),[3,3];case 2:if(!((n=e.sent())instanceof X))throw n;return n.throwOutside(),[3,3];case 3:return[2]}}))}))},gr=function(t){return S(void 0,void 0,void 0,(function(){return T(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,t()];case 1:case 2:return n.sent(),[3,3];case 3:return[2]}}))}))},eS=(function(t){function n(e){var r=t.call(this)||this;return r.retryAfterTime=1e3*e.retry_after,r.reasonCode=e.reason_code,r.message=e.message,r}return U(n,t),n})(kn);(function(t){t.CONNECTING="CONNECTING",t.OPEN="OPEN",t.CLOSED="CLOSED"})(zl||(zl={}));var en,lj=(function(t){function n(e,r){var i=r.sdkState,a=r.dispatcher,s=r.logger,l=t.call(this)||this;return l.lastActive=0,l._iid=e,l._sdkState=i,l._dispatcher=a,l._logger=s,l}return U(n,t),Object.defineProperty(n.prototype,"isOpen",{get:function(){return this.connectionState===zl.OPEN},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"connectionState",{get:function(){if(this._ws)switch(this._ws.readyState){case 0:return zl.CONNECTING;case 1:return zl.OPEN}return zl.CLOSED},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"ws",{get:function(){var e;return(e=this._ws)!==null&&e!==void 0?e:null},enumerable:!1,configurable:!0}),n.prototype._handleMessage=function(e){var r=this;e.split(`
`).forEach((function(i){if(i){var a=Xn.createFromRawMessage(r._iid,i);if(r._logger.debug("receive websocket event",a),a.code==="LOGI")r.dispatch("message",a);else if(a.code==="PONG")r.dispatch("pong");else if(a.code==="EXPR"){if(a.payload){var s=new _g(a.payload);s.expiresIn>=0&&r._dispatcher.dispatch(s)}}else if(a.code==="BUSY"){if(a.payload){var l=new eS(a.payload);r._dispatcher.dispatch(l)}}else a.code==="NOOP"||r.dispatch("message",a)}}))},n.prototype.connect=function(e,r){return r===void 0&&(r=""),S(this,void 0,void 0,(function(){var i=this;return T(this,(function(a){switch(a.label){case 0:return typeof fetch=="function"?[3,2]:[4,LE(()=>kw(()=>import("./__bundle-46d64517-C8I1_YDk-LcRUqe1L.js"),[]).then(s=>s._),[])];case 1:a.sent(),a.label=2;case 2:return gr((function(){return S(i,void 0,void 0,(function(){return T(this,(function(s){return fetch(this._sdkState.api.host),[2]}))}))})),this._ws=new WebSocket(e,encodeURIComponent(r)),this._ws.onopen=function(){i._logger.debug("websocket open"),i.dispatch("open")},this._ws.onmessage=function(s){return S(i,void 0,void 0,(function(){var l,c,d,p,g,_,y,C=this;return T(this,(function(w){switch(w.label){case 0:return!((y=this._sdkState.websocket)===null||y===void 0)&&y.compression?s.data instanceof Blob?((l=new FileReader).readAsArrayBuffer(s.data),l.onloadend=function(){return S(C,void 0,void 0,(function(){var A,M;return T(this,(function(I){switch(I.label){case 0:return I.trys.push([0,2,,3]),[4,YC(l.result)];case 1:return A=I.sent(),this._handleMessage(A),[3,3];case 2:return M=I.sent(),this.error(M),[3,3];case 3:return[2]}}))}))},[3,12]):[3,1]:[3,13];case 1:if(!(s.data instanceof ArrayBuffer))return[3,6];w.label=2;case 2:return w.trys.push([2,4,,5]),[4,YC(new Uint8Array(s.data))];case 3:return g=w.sent(),this._handleMessage(g),[3,5];case 4:return c=w.sent(),this.error(c),[3,5];case 5:return[3,12];case 6:if(!(typeof Buffer<"u"&&s.data instanceof Buffer))return[3,11];w.label=7;case 7:return w.trys.push([7,9,,10]),d=s.data,p=d.buffer.slice(d.byteOffset,d.byteOffset+d.byteLength),[4,YC(p)];case 8:return g=w.sent(),this._handleMessage(g),[3,10];case 9:return _=w.sent(),this.error(_),[3,10];case 10:return[3,12];case 11:typeof s.data=="string"&&this._handleMessage(s.data),w.label=12;case 12:return[3,14];case 13:this._handleMessage(s.data),w.label=14;case 14:return[2]}}))}))},this._ws.onerror=function(){i._logger.debug("websocket error"),i.dispatch("error",X.networkError)},this._ws.onclose=function(s){i._logger.debug("websocket close",s.code,s.reason),i.cleanUpWebSocket(),i.dispatch("close")},this.lastActive=Date.now(),[2]}}))}))},n.prototype.cleanUpWebSocket=function(){this._ws&&(this._ws.onopen=it,this._ws.onmessage=it,this._ws.onerror=it,this._ws.onclose=it,this.connectionState===zl.OPEN&&this._ws.close(1e3,"Normal Closure"),this._ws=void 0)},n.prototype.disconnect=function(){var e=this;return new Promise((function(r){if(e._ws){if(e.connectionState===zl.CLOSED)return e.cleanUpWebSocket(),void r();e._ws.onclose=null,e._ws.onclose=function(){e.cleanUpWebSocket(),e.dispatch("close"),r()},e._ws.close()}else r()}))},n.prototype.send=function(e){if(!this._ws)throw X.connectionClosed;e.code!=="PING"?this.dispatch("ping-refresh"):this._logger.debug("send ping",e),this._ws.send(e.convertToMessage())},n.prototype.error=function(e){this._logger.debug("websocket error",e),this.dispatch("error",e)},n})(Ap),tS=(function(t){function n(e){var r=e.all,i=e.feed,a=e.custom_types,s=e.ts,l=t.call(this)||this;return l.all=r,l.feed=i,l.customTypes=a,l.ts=s,l}return U(n,t),n})(kn),lD=(function(t){function n(e){var r=e.previousMessageId,i=e.messageCreatedAt,a=e.channelUrl,s=t.call(this)||this;return s.previousMessageId=r,s.messageCreatedAt=i,s.channelUrl=a,s}return U(n,t),n})(kn),uj=(function(){function t(n,e){var r=e.session,i=e.sdkState,a=e.dispatcher,s=e.logger,l=e.useFetchCompat,c=l!==void 0&&l,d=this;this._ackStateMap=new Map,this._batchableCommandAckStateMap=new Map,this._redundantActionCommands=new Map,this._sdkState=i,this._dispatcher=a,this._logger=s,this.apiClient=new aH(n,{session:r,sdkState:i,dispatcher:a,logger:s,useFetchCompat:c}),this.websocketClient=new lj(n,{sdkState:i,dispatcher:a,logger:s}),this.websocketClient.on("message",(function(p){var g,_;if(p.payload.unread_cnt&&d._dispatcher.dispatch(new tS(p.payload.unread_cnt)),p.code!=="MESG"&&p.code!=="FILE"&&p.code!=="ADMM"&&p.code!=="BRDM"||p.payload.channel_type!==Rt.GROUP||!p.payload.previous_message_id||d._dispatcher.dispatch(new lD({previousMessageId:p.payload.previous_message_id,messageCreatedAt:p.payload.ts,channelUrl:p.payload.channel_url})),p.requestId){if(d._ackStateMap.has(p.requestId)){var y=d._ackStateMap.get(p.requestId);p.code!=="EROR"?y.resolve(p):y.reject(new X({code:p.payload.code,message:p.payload.message}))}else if(d._batchableCommandAckStateMap.has(p.requestId)){var C=Date.now();try{for(var w=Re(d._batchableCommandAckStateMap.entries()),A=w.next();!A.done;A=w.next()){var M=Ye(A.value,2),I=(M[0],M[1]);I.channelUrl===p.payload.channel_url&&I.requestTime<C&&(y=I.ackState,p.code!=="EROR"?y.resolve(p):y.reject(new X({code:p.payload.code,message:p.payload.message})))}}catch(H){g={error:H}}finally{try{A&&!A.done&&(_=w.return)&&_.call(w)}finally{if(g)throw g.error}}}}else if(d._redundantActionCommands.has(p.payload.unique_id)){var D=d._redundantActionCommands.get(p.payload.unique_id),P=D?.indexOf(p.code);P!==-1&&D?.splice(P,1),D.length===0&&d._redundantActionCommands.delete(p.payload.unique_id)}else d._dispatcher.dispatch(p)})).on("close",(function(){d._ackStateMap.forEach((function(p){p.reject(X.connectionClosed)})),d._ackStateMap.clear(),d._batchableCommandAckStateMap.clear(),d._redundantActionCommands.clear()}))}return t.prototype._sendApiRequest=function(n){return S(this,void 0,void 0,(function(){return T(this,(function(e){switch(e.label){case 0:return n.params.unique_id&&this._redundantActionCommands.set(n.params.unique_id,["SYEV","READ"]),[4,this.apiClient.send(n)];case 1:return[2,e.sent()]}}))}))},t.prototype._sendWebsocketRequest=function(n){return S(this,void 0,void 0,(function(){var e,r,i,a=this;return T(this,(function(s){if(!this._sdkState.websocket)throw X.connectionRequired;if(e=new za,n.ackRequired){i=function(l,c){var d=n.code==="READ"?a._batchableCommandAckStateMap:a._ackStateMap;d.has(n.requestId)&&(d.delete(n.requestId),r&&(clearTimeout(r),r=null),l?(a._logger.debug("fail websocket request",n.requestId,l),e.reject(l)):(a._logger.debug("receive websocket ack",n.requestId,n),a._logger.debug("receive websocket ack",c),e.resolve(c)))};try{r=setTimeout((function(){return i(X.noAckTimeout)}),this._sdkState.websocket.responseTimeout),n.code==="READ"?this._batchableCommandAckStateMap.set(n.requestId,{ackState:{resolve:function(l){return i(void 0,l)},reject:function(l){return i(l)}},channelUrl:n.payload.channel_url,requestTime:Date.now()}):this._ackStateMap.set(n.requestId,{resolve:function(l){return i(void 0,l)},reject:function(l){return i(l)}}),this.websocketClient.send(n)}catch(l){i(l)}}else try{this.websocketClient.send(n),e.resolve()}catch(l){e.reject(l)}return[2,e.promise]}))}))},t.prototype.send=function(n){return S(this,void 0,void 0,(function(){return T(this,(function(e){switch(e.label){case 0:return n instanceof Ee?[4,this._sendApiRequest(n)]:[3,2];case 1:case 3:return[2,e.sent()];case 2:return n instanceof na?[4,this._sendWebsocketRequest(n)]:[3,4];case 4:throw X.invalidParameters}}))}))},t.prototype.cancel=function(n){this.apiClient.cancel(n)},t.prototype.cancelAll=function(){this.apiClient.cancelAll()},t})();(function(t){t[t.NONE=0]="NONE",t[t.INITIALIZED=1]="INITIALIZED",t[t.CONNECTING=2]="CONNECTING",t[t.CONNECTED=3]="CONNECTED",t[t.RECONNECTING=4]="RECONNECTING",t[t.INTERNAL_DISCONNECTED=5]="INTERNAL_DISCONNECTED",t[t.EXTERNAL_DISCONNECTED=6]="EXTERNAL_DISCONNECTED",t[t.LOGOUT=7]="LOGOUT",t[t.DELAYED_CONNECTING=8]="DELAYED_CONNECTING"})(en||(en={}));var ip,ap,Bs=(function(t){function n(e){var r=e.stateType,i=t.call(this)||this;return i.stateType=r,i}return U(n,t),n})(kn),uD=(function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return U(n,t),n})(kn),hN=(function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return U(n,t),n})(kn),cD=(function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return U(n,t),n})(kn),BI=(function(){function t(n){var e,r,i,a;this.isEnabled=(e=n.enabled)!==null&&e!==void 0&&e,this.feedChannels=(r=n.feed_channels)!==null&&r!==void 0?r:{},this.templateListToken=(i=n.template_list_token)!==null&&i!==void 0?i:null,this.settingsUpdatedAt=(a=n.settings_updated_at)!==null&&a!==void 0?a:0}return t.payloadify=function(n){return Le(Qe({enabled:n.isEnabled,feed_channels:n.feedChannels,template_list_token:n.templateListToken,settings_updated_at:n.settingsUpdatedAt}))},t})(),nS=function(t){return"sendbird@".concat(t,"/changelog_include_chat_notifications")},zI=(function(){function t(n){var e;this.lastUpdatedAt=(e=n.last_updated_at)!==null&&e!==void 0?e:0}return t.payloadify=function(n){return Le(Qe({last_updated_at:n.lastUpdatedAt}))},t})(),qI=(function(){function t(n){var e;this.token=(e=n.template_list_token)!==null&&e!==void 0?e:""}return t.payloadify=function(n){return Le(Qe({template_list_token:n.token}))},t})(),fE=(function(){function t(n){n===void 0&&(n={min_stat_count:100,min_interval:10800,max_stat_count_per_request:1e3,lower_threshold:10,request_delay_range:180}),this.minStatCount=n.min_stat_count,this.minInterval=1e3*n.min_interval,this.maxStatCountPerRequest=n.max_stat_count_per_request,this.lowerThreshold=n.lower_threshold,this.requestDelayRange=1e3*n.request_delay_range}return t.payloadify=function(n){return Le(Qe({min_stat_count:n.minStatCount,min_interval:n.minInterval/1e3,max_stat_count_per_request:n.maxStatCountPerRequest,lower_threshold:n.lowerThreshold,request_delay_range:n.requestDelayRange/1e3}))},t})(),QC=(function(){function t(n){n===void 0&&(n={default:{min_stat_count:100,min_interval:10800,max_stat_count_per_request:1e3,lower_threshold:10,request_delay_range:180}}),this.default=new fE(n.default),this.realTime=new fE(n.realtime)}return t.payloadify=function(n){return Le(Qe({default:fE.payloadify(n.default),realtime:fE.payloadify(n.realTime)}))},t})(),cj=(function(){function t(n){var e;this.templateListToken=(e=n.template_list_token)!==null&&e!==void 0?e:null}return t.payloadify=function(n){return Le(Qe({template_list_token:n.templateListToken}))},t})(),WI=(function(){function t(n){this.enabled=n.enabled,this.orderBy=n.order_by.type,this.excludeRecentHours=n.order_by.exclude_recent_hours,this.bufferRatio=n.buffer_ratio}return t.payloadify=function(n){return Le(Qe({enabled:n.enabled,order_by:{type:n.orderBy,exclude_recent_hours:n.excludeRecentHours},buffer_ratio:n.bufferRatio}))},t})(),KI=1048576,dj=5;(function(t){t[t.NONE=0]="NONE",t[t.INCLUDE_REPLY=1]="INCLUDE_REPLY",t[t.EXCLUDE_REPLY=2]="EXCLUDE_REPLY",t[t.INCLUDE_REPLY_TO_CHANNEL=3]="INCLUDE_REPLY_TO_CHANNEL"})(ip||(ip={})),(function(t){t[t.NONE=0]="NONE",t[t.INCLUDE_REPLY=1]="INCLUDE_REPLY",t[t.EXCLUDE_REPLY=2]="EXCLUDE_REPLY",t[t.INCLUDE_REPLY_TO_CHANNEL=3]="INCLUDE_REPLY_TO_CHANNEL"})(ap||(ap={}));var YI=(function(){function t(n){var e,r,i,a,s,l,c,d,p,g;n===void 0&&(n={}),this.emojiHash=n.emoji_hash||"",this.uploadSizeLimit=n.file_upload_size_limit?n.file_upload_size_limit*KI:Number.MAX_SAFE_INTEGER,this.useReaction=!!n.use_reaction,this.applicationAttributes=(e=n.application_attributes)!==null&&e!==void 0?e:[],this.premiumFeatureList=(r=n.premium_feature_list)!==null&&r!==void 0?r:[],this.deviceTokenCache=this.applicationAttributes.includes("sdk_device_token_cache"),this.enabledChannelMemberShipHistory=this.applicationAttributes.includes("channel_membership_history"),this.multipleFilesMessageFileCountLimit=(i=n.multiple_file_send_max_size)!==null&&i!==void 0?i:5,this.allowSdkStatsUpload=(a=n.allow_sdk_log_ingestion)===null||a===void 0||a,this.unreadCountThreadingPolicy=(s=n.unread_cnt_threading_policy)!==null&&s!==void 0?s:ip.NONE,this.lastMessageThreadingPolicy=(l=n.last_msg_threading_policy)!==null&&l!==void 0?l:ap.NONE,this.channelRotationInfo=n.channel_rotation?new WI(n.channel_rotation):null,this.uikitConfigInfo=new zI((c=n.uikit_config)!==null&&c!==void 0?c:{}),this.notificationInfo=n.notifications?new BI(n.notifications):null,this.messageTemplateInfo=n.message_template?new qI(n.message_template):null,this.aiAgentInfo=n.ai_agent?new cj(n.ai_agent):null,this.statConfigInfo=n.log_publish_config?new QC(n.log_publish_config):new QC,this.disableSuperGroupMack=(d=n.disable_supergroup_mack)!==null&&d!==void 0&&d,this.configSyncNeeded=(p=n.config_sync_needed)!==null&&p!==void 0&&p,this.requestDedupIntervalMs=(g=n.request_dedup_interval_ms)!==null&&g!==void 0?g:500}return t.payloadify=function(n){return Le(Qe({emoji_hash:n.emojiHash,file_upload_size_limit:n.uploadSizeLimit/KI,application_attributes:n.applicationAttributes,premium_feature_list:n.premiumFeatureList,use_reaction:n.useReaction,allow_sdk_log_ingestion:n.allowSdkStatsUpload,unread_cnt_threading_policy:n.unreadCountThreadingPolicy,last_msg_threading_policy:n.lastMessageThreadingPolicy,channel_rotation:n.channelRotationInfo?WI.payloadify(n.channelRotationInfo):null,uikit_config:n.uikitConfigInfo?zI.payloadify(n.uikitConfigInfo):null,notifications:n.notificationInfo?BI.payloadify(n.notificationInfo):null,message_template:n.messageTemplateInfo?qI.payloadify(n.messageTemplateInfo):null,log_publish_config:n.statConfigInfo?QC.payloadify(n.statConfigInfo):null,disable_supergroup_mack:n.disableSuperGroupMack,config_sync_needed:n.configSyncNeeded,request_dedup_interval_ms:n.requestDedupIntervalMs}))},t})(),h1=function(t){return"sendbird@".concat(t,"/app_configs_info")},ei=(function(){function t(n){this._iid="",this._iid=n}return t.payloadify=function(n){return{}},t})(),hj=(function(t){function n(e){var r=e.userId,i=e.metadata,a=t.call(this)||this;return a.method=ye.POST,a.path="".concat(nn,"/").concat(encodeURIComponent(r),"/metadata"),a.params={metadata:i},a}return U(n,t),n})(Ee),fj=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.metaData=r,i}return U(n,t),n})(Se),pj=(function(t){function n(e){var r=e.userId,i=e.metadata,a=e.upsert,s=t.call(this)||this;return s.method=ye.PUT,s.path="".concat(nn,"/").concat(encodeURIComponent(r),"/metadata"),s.params={metadata:i,upsert:a},s}return U(n,t),n})(Ee),mj=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.metadata=r,i}return U(n,t),n})(Se),gj=(function(t){function n(e){var r=e.userId,i=e.metadataKey,a=t.call(this)||this;return a.method=ye.DELETE,a.path="".concat(nn,"/").concat(encodeURIComponent(r),"/metadata/").concat(i),a}return U(n,t),n})(Ee);(function(t){function n(){return t!==null&&t.apply(this,arguments)||this}U(n,t)})(Se);var vj=(function(t){function n(e){var r=e.userId,i=t.call(this)||this;return i.method=ye.DELETE,i.path="".concat(nn,"/").concat(encodeURIComponent(r),"/metadata"),i}return U(n,t),n})(Ee);(function(t){function n(){return t!==null&&t.apply(this,arguments)||this}U(n,t)})(Se);var lg,kg=function(t,n){var e=JSON.parse(JSON.stringify(t));return e._iid&&delete e._iid,n&&n(e),e},Uc=function(t,n){var e=JSON.parse(JSON.stringify(t));return e},Te=function(t){return{do:function(n){t||n()},throw:function(n){if(!t)throw n}}};(function(t){t.ONLINE="online",t.OFFLINE="offline",t.NON_AVAILABLE="nonavailable"})(lg||(lg={}));var gp,St=(function(t){function n(e,r){var i,a,s,l,c,d,p,g,_,y,C,w,A,M=this;return(M=t.call(this,e)||this).userId=(a=(i=r.guest_id)!==null&&i!==void 0?i:r.user_id)!==null&&a!==void 0?a:"",M.nickname=(l=(s=r.nickname)!==null&&s!==void 0?s:r.name)!==null&&l!==void 0?l:"",M.plainProfileUrl=(d=(c=r.profile_url)!==null&&c!==void 0?c:r.image)!==null&&d!==void 0?d:"",M.requireAuth=(p=r.require_auth_for_profile_image)!==null&&p!==void 0&&p,M.metaData=(g=r.metadata)!==null&&g!==void 0?g:{},M.connectionStatus=lg.NON_AVAILABLE,Nt(lg,r.is_online)?M.connectionStatus=r.is_online:Q("boolean",r.is_online)&&(M.connectionStatus=r.is_online?lg.ONLINE:lg.OFFLINE),M.isActive=(_=r.is_active)===null||_===void 0||_,M.lastSeenAt=(y=r.last_seen_at)!==null&&y!==void 0?y:null,M.preferredLanguages=r.preferred_languages?Je([],Ye(r.preferred_languages),!1):null,M.friendDiscoveryKey=(C=r.friend_discovery_key)!==null&&C!==void 0?C:null,M.friendName=(w=r.friend_name)!==null&&w!==void 0?w:null,M._hashValue=M._generateHashValue(),M._updatedAt=(A=r.updatedat)!==null&&A!==void 0?A:0,M}return U(n,t),n.payloadify=function(e){return Le(Qe(z(z({},t.payloadify.call(this,e)),{user_id:e.userId,nickname:e.nickname,profile_url:e.plainProfileUrl,require_auth_for_profile_image:e.requireAuth,metadata:e.metaData,is_online:e.connectionStatus,is_active:e.isActive,last_seen_at:e.lastSeenAt,preferred_languages:e.preferredLanguages,friend_discovery_key:e.friendDiscoveryKey,friend_name:e.friendName})))},n._buildUserFromSerializedData=function(e){var r=Uc(e);return new n(r._iid,n.payloadify(r))},n.prototype._generateHashValue=function(){for(var e,r=JSON.stringify({userId:this.userId,nickname:this.nickname,plainProfileUrl:this.plainProfileUrl,friendDiscoveryKey:this.friendDiscoveryKey,friendName:this.friendName,metaData:JSON.stringify(this.metaData),performanceLanguages:(e=this.preferredLanguages)===null||e===void 0?void 0:e.toString(),requireAuth:this.requireAuth}),i=0,a=0;a<r.length;a++)i=(i<<5)-i+r.charCodeAt(a),i|=0;return i},Object.defineProperty(n.prototype,"profileUrl",{get:function(){var e=W.of(this._iid).sessionManager;return this.requireAuth&&e.ekey?"".concat(this.plainProfileUrl,"?auth=").concat(e.ekey):this.plainProfileUrl},enumerable:!1,configurable:!0}),n.prototype.serialize=function(){return kg(this)},n.prototype._isValidMetaData=function(e){return!Array.isArray(e)&&Object.keys(e).length>0&&Object.keys(e).map((function(r){return e[r]})).every((function(r){return Q("string",r)}))},n.prototype._applyMetaData=function(e,r){var i=this;r===void 0&&(r=!1),Object.keys(e).forEach((function(a){r?delete i.metaData[a]:i.metaData[a]=e[a]}))},n.prototype.createMetaData=function(e){return S(this,void 0,void 0,(function(){var r,i,a,s,l,c;return T(this,(function(d){switch(d.label){case 0:return Te(this._isValidMetaData(e)).throw(X.invalidParameters),r=W.of(this._iid),i=r.sdkState,a=r.requestQueue,s=new hj({userId:i.userId,metadata:e}),[4,a.send(s)];case 1:return l=d.sent(),c=l.as(fj).metaData,this._applyMetaData(c),[2,this.metaData]}}))}))},n.prototype.updateMetaData=function(e,r){return r===void 0&&(r=!1),S(this,void 0,void 0,(function(){var i,a,s,l,c,d;return T(this,(function(p){switch(p.label){case 0:return Te(this._isValidMetaData(e)).throw(X.invalidParameters),i=W.of(this._iid),a=i.sdkState,s=i.requestQueue,l=new pj({userId:a.userId,metadata:e,upsert:r}),[4,s.send(l)];case 1:return c=p.sent(),d=c.as(mj).metadata,this._applyMetaData(d),[2,this.metaData]}}))}))},n.prototype.deleteMetaData=function(e){return S(this,void 0,void 0,(function(){var r,i,a,s,l;return T(this,(function(c){switch(c.label){case 0:return Te(Q("string",e)).throw(X.invalidParameters),r=W.of(this._iid),i=r.sdkState,a=r.requestQueue,s=new gj({userId:i.userId,metadataKey:e}),[4,a.send(s)];case 1:return c.sent(),this._applyMetaData(((l={})[e]=!0,l),!0),[2,this.metaData]}}))}))},n.prototype.deleteAllMetaData=function(){return S(this,void 0,void 0,(function(){var e,r,i,a;return T(this,(function(s){switch(s.label){case 0:return e=W.of(this._iid),r=e.sdkState,i=e.requestQueue,a=new vj({userId:r.userId}),[4,i.send(a)];case 1:return s.sent(),this.metaData={},[2]}}))}))},n})(ei),dD=(function(t){function n(e){var r=e.userProfile,i=t.call(this)||this;return i.userProfile=r,i}return U(n,t),n})(kn),fN=(function(){function t(n,e){var r,i,a,s,l,c,d,p,g,_,y,C,w,A;this._iid=n,this.appInfo=new YI(e),this.user=new St(n,e),this.connectedAt=(r=e.login_ts)!==null&&r!==void 0?r:0,this.firstConnectedAt=0,this.pingInterval=(i=e.ping_interval)!==null&&i!==void 0?i:15,this.pongTimeout=(a=e.pong_timeout)!==null&&a!==void 0?a:5,this.reconnectInterval=(l=(s=e.reconnect)===null||s===void 0?void 0:s.interval)!==null&&l!==void 0?l:3e3,this.reconnectMaxInterval=(d=(c=e.reconnect)===null||c===void 0?void 0:c.max_interval)!==null&&d!==void 0?d:6e4,this.reconnectRetryCount=(g=(p=e.reconnect)===null||p===void 0?void 0:p.retry_cnt)!==null&&g!==void 0?g:5,this.reconnectIntervalMultiple=(y=(_=e.reconnect)===null||_===void 0?void 0:_.mul)!==null&&y!==void 0?y:2,this.maxUnreadCountOnSuperGroup=(C=e.max_unread_cnt_on_super_group)!==null&&C!==void 0?C:100,this.profileImageEncryption=!!e.profile_image_encryption,this.concurrentCallLimit=(w=e.concurrent_call_limit)!==null&&w!==void 0?w:5,this.backOffDelay=(A=e.back_off_delay)!==null&&A!==void 0?A:100}return t.payloadify=function(n){return Le(Qe(z(z(z({},St.payloadify(n.user)),YI.payloadify(n.appInfo)),{login_ts:n.connectedAt,ping_interval:n.pingInterval,pong_timeout:n.pongTimeout,reconnect:{interval:n.reconnectInterval,max_interval:n.reconnectMaxInterval,retry_cnt:n.reconnectRetryCount,mul:n.reconnectIntervalMultiple},max_unread_cnt_on_super_group:n.maxUnreadCountOnSuperGroup,profile_image_encryption:n.profileImageEncryption,concurrent_call_limit:n.concurrentCallLimit,back_off_delay:n.backOffDelay})))},t.prototype.apply=function(){var n=this.reconnectInterval,e=this.reconnectMaxInterval,r=this.reconnectIntervalMultiple,i=W.of(this._iid);i.sdkState.websocket&&(i.sdkState.websocket.pingInterval=1e3*this.pingInterval,i.sdkState.websocket.pongTimeout=1e3*this.pongTimeout,i.sdkState.websocket.reconnectMaxRetry=this.reconnectRetryCount,i.sdkState.websocket.reconnectRetryStrategy={calcTimeout:function(a){return a>0?1e3*Math.min(n*Math.pow(r,a-1),e):10}}),i.appInfo=this.appInfo,i.sessionManager.currentUser=this.user,i.connectedAt=this.connectedAt,this.firstConnectedAt||(i.firstConnectedAt=this.connectedAt),i.maxSuperGroupChannelUnreadCount=this.maxUnreadCountOnSuperGroup,i.concurrentCallLimit=this.concurrentCallLimit,i.backOffDelay=this.backOffDelay,i.requestDeduplicator.requestDedupInterval=this.appInfo.requestDedupIntervalMs,i.dispatcher.dispatch(new dD({userProfile:this}))},t})(),hD=(function(t){function n(e){var r=e.request,i=r===void 0||r,a=e.features,s=a===void 0?{}:a,l=e.options,c=l===void 0?{}:l,d=e.statConfigInfo,p=t.call(this)||this;return p.request=i,p.features=z({localCache:!0,notification:!0},s),p.options=z({ingestion:!0},c),p.statConfigInfo=d,p}return U(n,t),n})(kn),fD=(function(t){function n(e){var r=t.call(this)||this;return r.configSyncNeeded=!1,r.configSyncNeeded=e,r}return U(n,t),n})(kn),HE=(function(t){function n(e,r,i){var a,s,l,c,d=this;return(d=t.call(this,e,r,i)||this).error=null,d.services=[],d.userProfile=new fN(e,i),d.deviceTokenLastDeletedAt=(a=i.device_token_last_deleted_at)!==null&&a!==void 0?a:0,d.key=(s=i.key)!==null&&s!==void 0?s:"",d.ekey=(l=i.ekey)!==null&&l!==void 0?l:"",d.error=i.error?new X(i):null,d.services=(c=i.services)!==null&&c!==void 0?c:[],d.isSessionRefresh="new_key"in i,d}return U(n,t),n.asError=function(e){return new n("","LOGI",z({user_id:"",error:!0},e))},n.prototype.applyTo=function(e){return S(this,void 0,void 0,(function(){var r,i,a;return T(this,(function(s){switch(s.label){case 0:return this.isSessionRefresh?[2]:this.error?[3,4]:(r=W.of(e))?(i=r.sessionManager,a=r.dispatcher,[4,i.login(this)]):[3,2];case 1:return s.sent(),this.userProfile.apply(),a.dispatch(new fD(this.userProfile.appInfo.configSyncNeeded)),a.dispatch(new hD({request:this.userProfile.appInfo.applicationAttributes.includes("allow_sdk_request_log_publish"),features:{localCache:this.userProfile.appInfo.applicationAttributes.includes("allow_sdk_feature_local_cache_log_publish"),notification:this.userProfile.appInfo.applicationAttributes.includes("allow_sdk_noti_stats_log_publish")},options:{ingestion:this.userProfile.appInfo.allowSdkStatsUpload},statConfigInfo:this.userProfile.appInfo.statConfigInfo})),[3,3];case 2:throw X.lostInstance;case 3:return[3,5];case 4:throw this.error;case 5:return[2]}}))}))},n})(Xn),Eh=(function(){function t(){this.type=en.NONE,this.name="none"}return t.prototype.run=function(n){return S(this,void 0,void 0,(function(){return T(this,(function(e){return[2]}))}))},t.prototype.onConnect=function(n,e){return S(this,void 0,void 0,(function(){return T(this,(function(r){return[2]}))}))},t.prototype.onReconnect=function(n,e){return e.resetReconnectCount,S(this,void 0,void 0,(function(){return T(this,(function(r){return[2]}))}))},t.prototype.onDisconnect=function(n,e){return e.error,e.autoReconnect,e.cause,S(this,void 0,void 0,(function(){return T(this,(function(r){return[2]}))}))},t.prototype.onDisconnectWebSocket=function(n,e){return S(this,void 0,void 0,(function(){return T(this,(function(r){return[2]}))}))},t.prototype.onLogout=function(n,e){return S(this,void 0,void 0,(function(){return T(this,(function(r){return[2]}))}))},t.prototype.onDelayedConnecting=function(n,e){return e.retryAfterTime,e.reasonCode,e.message,S(this,void 0,void 0,(function(){return T(this,(function(r){return[2]}))}))},t})(),Gu=(function(t){function n(e){e===void 0&&(e={});var r,i=this;return(i=t.call(this)||this).type=en.LOGOUT,i.name="logout",i._wasPreviouslyConnected=(r=e.wasPreviouslyConnected)===null||r===void 0||r,i}return U(n,t),n.prototype.run=function(e){return S(this,void 0,void 0,(function(){var r,i,a=this;return T(this,(function(s){switch(s.label){case 0:return r=Date.now(),i=e.sdkState.userId,[4,e.logout()];case 1:return s.sent(),[4,e.changeState(new rS,r)];case 2:return s.sent(),this._wasPreviouslyConnected&&$e((function(){return S(a,void 0,void 0,(function(){return T(this,(function(l){return e.connectionHandlers.forEach((function(c){c.onDisconnected&&c.onDisconnected(i)})),[2]}))}))})),[2]}}))}))},n})(Eh),W0=(function(t){function n(){var e=t.call(this)||this;return e.type=en.EXTERNAL_DISCONNECTED,e.name="externaldisconnected",e}return U(n,t),n.prototype.run=function(e){return S(this,void 0,void 0,(function(){return T(this,(function(r){switch(r.label){case 0:return[4,e.disconnect()];case 1:return r.sent(),[2]}}))}))},n.prototype.onConnect=function(e,r){return S(this,void 0,void 0,(function(){var i;return T(this,(function(a){switch(a.label){case 0:return i=Date.now(),[4,e.disconnect()];case 1:return a.sent(),[4,e.changeState(new X1({authToken:r}),i)];case 2:return a.sent(),[2]}}))}))},n.prototype.onReconnect=function(e){return S(this,void 0,void 0,(function(){var r;return T(this,(function(i){switch(i.label){case 0:return r=Date.now(),[4,e.changeState(new M0,r)];case 1:return i.sent(),[2]}}))}))},n.prototype.onLogout=function(e){return S(this,void 0,void 0,(function(){var r;return T(this,(function(i){switch(i.label){case 0:return r=Date.now(),[4,e.changeState(new Gu,r)];case 1:return i.sent(),[2]}}))}))},n})(Eh);(function(t){t.ExternalSetBackground="ExternalSetBackground",t.ExternalDisconnectWebSocket="ExternalDisconnectWebSocket",t.MaxReconnectRetry="MaxReconnectRetry"})(gp||(gp={}));var _j=(function(){function t(n,e){var r=e.sdkState,i=e.cacheContext,a=e.connectionHandlers,s=e.sessionManager,l=e.websocketClient,c=e.dispatcher,d=e.logger,p=e.disableWebSocketCloseEventHandling,g=p!==void 0&&p,_=this;this._disableWebSocketCloseEventHandling=!1,this._webSocketClosedCause=null,this._logger=d,this._disableWebSocketCloseEventHandling=g,this._context=new Ej(n,{sdkState:r,cacheContext:i,connectionHandlers:a,sessionManager:s,websocketClient:l,dispatcher:c,logger:d}),this._sdkState=r,this._sessionManager=s,this._websocketClient=l,this._commandDispatcher=c,this._commandDispatcher.on((function(y){var C=_._context.currentState;if(y instanceof eS&&C.type===en.CONNECTED){var w=y.retryAfterTime,A=y.reasonCode,M=y.message;C.onDelayedConnecting(_._context,{retryAfterTime:w,reasonCode:A,message:M})}}))}return t.prototype._registerEventDispatcher=function(){var n=this;this._disableWebSocketCloseEventHandling||(this._clearEventDispatcher(),this._sessionEventDispatcherContext=this._sessionManager.on("refresh",(function(){n.isConnecting||n.isConnected||(n._logger.debug("try reconnect by session key refresh"),gr((function(){return S(n,void 0,void 0,(function(){return T(this,(function(e){switch(e.label){case 0:return[4,this.reconnect()];case 1:return e.sent(),[2]}}))}))})))})),this._websocketEventDispatcherContext=this._websocketClient.on("close",(function(){n._sdkState.appState!=="foreground"||n._webSocketClosedCause||gr((function(){return S(n,void 0,void 0,(function(){return T(this,(function(e){switch(e.label){case 0:return this._sessionManager.isSessionKeyRefreshing?[3,2]:(this._logger.debug("try reconnect by websocket connection closed"),[4,this.reconnect()]);case 1:return e.sent(),[3,4];case 2:return[4,this.disconnectWebSocket()];case 3:e.sent(),e.label=4;case 4:return[2]}}))}))}))})))},t.prototype._clearEventDispatcher=function(){this._sessionEventDispatcherContext&&(this._sessionEventDispatcherContext.close(),this._sessionEventDispatcherContext=void 0),this._websocketEventDispatcherContext&&(this._websocketEventDispatcherContext.close(),this._websocketEventDispatcherContext=void 0)},Object.defineProperty(t.prototype,"isConnected",{get:function(){return this._context.currentState.type===en.CONNECTED},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isConnecting",{get:function(){var n=this._context.currentState;return n.type===en.CONNECTING||n.type===en.RECONNECTING},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"websocketClient",{get:function(){return this._websocketClient},enumerable:!1,configurable:!0}),t.prototype.connect=function(n){return S(this,void 0,void 0,(function(){var e;return T(this,(function(r){switch(r.label){case 0:return e=this._context.currentState,this._webSocketClosedCause=null,[4,e.onConnect(this._context,n)];case 1:return r.sent(),this._registerEventDispatcher(),[2]}}))}))},t.prototype.reconnect=function(){return S(this,void 0,void 0,(function(){var n;return T(this,(function(e){switch(e.label){case 0:return n=this._context.currentState,this._webSocketClosedCause=null,[4,n.onReconnect(this._context,{})];case 1:return e.sent(),[2]}}))}))},t.prototype.resetAndReconnect=function(){return S(this,void 0,void 0,(function(){var n;return T(this,(function(e){switch(e.label){case 0:return n=this._context.currentState,this._webSocketClosedCause=null,[4,n.onReconnect(this._context,{resetReconnectCount:!0})];case 1:return e.sent(),[2]}}))}))},t.prototype.background=function(){return S(this,void 0,void 0,(function(){var n;return T(this,(function(e){switch(e.label){case 0:return n=this._context.currentState,this._webSocketClosedCause=gp.ExternalSetBackground,[4,n.onDisconnect(this._context,{autoReconnect:!1,cause:this._webSocketClosedCause})];case 1:return e.sent(),[2]}}))}))},t.prototype.disconnect=function(n){return S(this,void 0,void 0,(function(){return T(this,(function(e){switch(e.label){case 0:return[4,this._context.currentState.onDisconnect(this._context,{error:n,autoReconnect:!0,cause:this._webSocketClosedCause})];case 1:return e.sent(),[2]}}))}))},t.prototype.disconnectWebSocket=function(n){return n===void 0&&(n=!1),S(this,void 0,void 0,(function(){var e;return T(this,(function(r){switch(r.label){case 0:return e=this._context.currentState,n&&(this._webSocketClosedCause=gp.ExternalDisconnectWebSocket),[4,e.onDisconnectWebSocket(this._context,{cause:this._webSocketClosedCause})];case 1:return r.sent(),[2]}}))}))},t.prototype.logout=function(n){return S(this,void 0,void 0,(function(){var e;return T(this,(function(r){switch(r.label){case 0:return e=this._context.currentState,this._clearEventDispatcher(),[4,e.onLogout(this._context,n)];case 1:return r.sent(),[2]}}))}))},t})(),yg=(function(t){function n(e){var r=e.retryAfterTime,i=e.reasonCode,a=e.message,s=e.authToken,l=t.call(this)||this;return l.type=en.DELAYED_CONNECTING,l.name="delayedconnecting",l._timerStartTime=0,l._retryAfterTime=r,l._reasonCode=i,l._message=a,l._authToken=s,l}return U(n,t),n.prototype._clearDelayConnectTimer=function(){this._delayConnectTimer&&(clearTimeout(this._delayConnectTimer),this._delayConnectTimer=void 0),this._timerStartTime=0},n.prototype._startDelayedConnectTimer=function(e){var r=this;this._clearDelayConnectTimer(),this._timerStartTime=Date.now(),this._delayConnectTimer=setTimeout((function(){return S(r,void 0,void 0,(function(){var i;return T(this,(function(a){switch(a.label){case 0:return i=Date.now(),clearTimeout(this._delayConnectTimer),this._delayConnectTimer=void 0,this._timerStartTime=0,[4,e.changeState(new M0({authToken:this._authToken,isSoftRateLimited:!0}),i)];case 1:return a.sent(),[2]}}))}))}),this._retryAfterTime),e.connectionHandlers.forEach((function(i){i.onConnectionDelayed&&i.onConnectionDelayed(Math.ceil(r._retryAfterTime/1e3))}))},n.prototype._calculateRemainDelayConnectTime=function(){this._delayConnectTimer&&(this._retryAfterTime=this._retryAfterTime-(Date.now()-this._timerStartTime))},n.prototype._throwDelayedConnectingError=function(){var e=new X({code:ze.DELAYED_CONNECTING,message:this._message});throw e.setDetail(JSON.stringify({retry_after:Math.ceil(this._retryAfterTime/1e3),reason_code:this._reasonCode,message:this._message})),e},n.prototype.run=function(e){return S(this,void 0,void 0,(function(){return T(this,(function(r){return this._startDelayedConnectTimer(e),[2]}))}))},n.prototype.onConnect=function(e,r){return S(this,void 0,void 0,(function(){return T(this,(function(i){return this._delayConnectTimer&&(this._calculateRemainDelayConnectTime(),this._startDelayedConnectTimer(e),this._throwDelayedConnectingError()),[2]}))}))},n.prototype.onReconnect=function(e){return S(this,void 0,void 0,(function(){return T(this,(function(r){return this._delayConnectTimer&&(this._calculateRemainDelayConnectTime(),this._startDelayedConnectTimer(e),this._throwDelayedConnectingError()),[2]}))}))},n.prototype.onDelayedConnecting=function(e,r){var i=r.retryAfterTime,a=r.reasonCode,s=r.message;return S(this,void 0,void 0,(function(){return T(this,(function(l){return this._retryAfterTime=i,this._reasonCode=a,this._message=s,this._startDelayedConnectTimer(e),[2]}))}))},n.prototype.onDisconnect=function(e,r){var i=r.autoReconnect,a=i!==void 0&&i,s=r.cause,l=s===void 0?null:s;return S(this,void 0,void 0,(function(){var c;return T(this,(function(d){switch(d.label){case 0:return c=Date.now(),this._clearDelayConnectTimer(),l!==gp.ExternalSetBackground?[3,2]:[4,e.changeState(new bg({autoReconnect:a,retryAfterTime:this._retryAfterTime,disconnectedTime:c,reasonCode:this._reasonCode,message:this._message}),c)];case 1:return d.sent(),[3,6];case 2:return e.hasSession?[4,e.changeState(new bg({autoReconnect:a}),c)]:[3,4];case 3:return d.sent(),[3,6];case 4:return[4,e.changeState(new Gu,c)];case 5:d.sent(),d.label=6;case 6:return[2]}}))}))},n.prototype.onDisconnectWebSocket=function(e){return S(this,void 0,void 0,(function(){var r;return T(this,(function(i){switch(i.label){case 0:return r=Date.now(),this._clearDelayConnectTimer(),[4,e.changeState(new W0,r)];case 1:return i.sent(),[2]}}))}))},n.prototype.onLogout=function(e){return S(this,void 0,void 0,(function(){var r;return T(this,(function(i){switch(i.label){case 0:return r=Date.now(),this._clearDelayConnectTimer(),[4,e.changeState(new Gu,r)];case 1:return i.sent(),[2]}}))}))},n})(Eh),bg=(function(t){function n(e){var r=t.call(this)||this;return r.type=en.INTERNAL_DISCONNECTED,r.name="internaldisconnected",r._autoReconnect=!1,r._autoReconnect=e.autoReconnect,r._retryAfter=e.retryAfterTime,r._disconnectedTime=e.disconnectedTime,r._reasonCode=e.reasonCode,r._message=e.message,r}return U(n,t),n.prototype._getDelayedConnectTime=function(e){return this._retryAfter&&this._disconnectedTime?Math.ceil((this._retryAfter-(e-this._disconnectedTime))/1e3):-1},n.prototype.run=function(e){return S(this,void 0,void 0,(function(){var r;return T(this,(function(i){switch(i.label){case 0:return r=Date.now(),[4,e.disconnect()];case 1:return i.sent(),this._autoReconnect?[4,e.changeState(new M0,r)]:[3,3];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))},n.prototype.onConnect=function(e,r){return S(this,void 0,void 0,(function(){var i;return T(this,(function(a){switch(a.label){case 0:return i=Date.now(),[4,e.disconnect()];case 1:return a.sent(),[4,e.changeState(new X1({authToken:r}),i)];case 2:return a.sent(),[2]}}))}))},n.prototype.onReconnect=function(e){return S(this,void 0,void 0,(function(){var r,i;return T(this,(function(a){switch(a.label){case 0:return r=Date.now(),(i=this._getDelayedConnectTime(r))>0?[4,e.changeState(new yg({retryAfterTime:i,reasonCode:this._reasonCode,message:this._message}),r)]:[3,2];case 1:return a.sent(),[3,4];case 2:return[4,e.changeState(new M0,r)];case 3:a.sent(),a.label=4;case 4:return[2]}}))}))},n.prototype.onDisconnectWebSocket=function(e){return S(this,void 0,void 0,(function(){var r;return T(this,(function(i){switch(i.label){case 0:return r=Date.now(),[4,e.changeState(new W0,r)];case 1:return i.sent(),[2]}}))}))},n.prototype.onLogout=function(e){return S(this,void 0,void 0,(function(){var r;return T(this,(function(i){switch(i.label){case 0:return r=Date.now(),[4,e.changeState(new Gu,r)];case 1:return i.sent(),[2]}}))}))},n})(Eh),ya=function(t){return S(void 0,void 0,void 0,(function(){return T(this,(function(n){return[2,new Promise((function(e){return setTimeout(e,t)}))]}))}))},pD=(function(){function t(){}return t.prototype.calcTimeout=function(){return 0},t})(),$1=function(t,n,e){return e===void 0&&(e=new pD),S(void 0,void 0,void 0,(function(){var r,i,a,s,l,c;return T(this,(function(d){switch(d.label){case 0:r=0,i=null,a=function(p){return i=p??new Error("Halted")},s=function(){r=0},d.label=1;case 1:if(!(n===-1||r<n))return[3,9];d.label=2;case 2:return d.trys.push([2,4,,8]),[4,t(a,s)];case 3:if(l=d.sent(),i)throw i;return[2,l];case 4:if(c=d.sent(),i)return[3,6];if(++r===n)throw c;return[4,ya(e.calcTimeout(r))];case 5:return d.sent(),[3,7];case 6:throw i;case 7:return[3,8];case 8:return[3,1];case 9:throw"It should not happen."}}))}))},M0=(function(t){function n(e){var r=e===void 0?{}:e,i=r.authToken,a=r.isSoftRateLimited,s=t.call(this)||this;return s.type=en.RECONNECTING,s.name="reconnecting",s._callbacks=[],s._authToken=i,s._isSoftRateLimited=a??void 0,s}return U(n,t),n.prototype._halt=function(e){this._haltConnect&&(this._haltConnect(e),this._haltConnect=void 0)},n.prototype._flushCallbacks=function(e){this._haltConnect=void 0,this._resetConnect=void 0,this._callbacks.forEach((function(r){return r(e)}))},n.prototype.run=function(e){return S(this,void 0,void 0,(function(){var r,i,a,s,l,c,d,p,g,_=this;return T(this,(function(y){switch(y.label){case 0:r=Date.now(),i=new za,this._callbacks.push((function(C){return C?i.reject(C):i.resolve()})),$e((function(){return S(_,void 0,void 0,(function(){return T(this,(function(C){return e.connectionHandlers.forEach((function(w){w.onReconnectStarted&&w.onReconnectStarted()})),[2]}))}))})),y.label=1;case 1:return y.trys.push([1,4,,12]),a=So(),s=0,l=e.sdkState.websocket,c=l.reconnectMaxRetry,d=l.reconnectRetryStrategy,[4,$1((function(C,w){return S(_,void 0,void 0,(function(){var A;return T(this,(function(M){switch(M.label){case 0:this._haltConnect=C,this._resetConnect=w,M.label=1;case 1:return M.trys.push([1,3,,4]),s++,[4,e.connect({authToken:this._authToken,connectionKey:a,connectionRetryCount:s,isSoftRateLimited:this._isSoftRateLimited})];case 2:return M.sent(),[3,4];case 3:if(A=M.sent(),e.clearLoginTimer(),A instanceof X){switch(A.code){case ze.CONNECTION_CANCELED:case ze.DELAYED_CONNECTING:return C(A),[2]}if(A.isSessionExpiredError||A.isSessionInvalidatedError)return C(A),[2]}throw A;case 4:return[2]}}))}))}),c,d)];case 2:return y.sent(),[4,e.changeState(new mD,r)];case 3:return y.sent(),this._flushCallbacks(),$e((function(){return S(_,void 0,void 0,(function(){return T(this,(function(C){return e.connectionHandlers.forEach((function(w){w.onReconnectSucceeded&&w.onReconnectSucceeded()})),[2]}))}))})),[3,12];case 4:return p=y.sent(),Ca(p)?[3,10]:[4,e.disconnect()];case 5:return y.sent(),p instanceof X?p.code!==ze.DELAYED_CONNECTING?[3,7]:(g=JSON.parse(p.detail),[4,e.changeState(new yg({retryAfterTime:1e3*g.retry_after,reasonCode:g.reason_code,message:g.message,authToken:this._authToken}),r)]):[3,9];case 6:return y.sent(),[3,9];case 7:return p.code===ze.CONNECTION_CANCELED?[3,9]:[4,e.changeState(new bg({autoReconnect:!1}),r)];case 8:y.sent(),y.label=9;case 9:return this._flushCallbacks(p),$e((function(){return S(_,void 0,void 0,(function(){return T(this,(function(C){return e.connectionHandlers.forEach((function(w){w.onReconnectFailed&&w.onReconnectFailed()})),[2]}))}))})),[3,11];case 10:throw p;case 11:return[3,12];case 12:return[2,i.promise]}}))}))},n.prototype.onConnect=function(e,r){return S(this,void 0,void 0,(function(){var i;return T(this,(function(a){return i=new za,this._halt(X.connectionCanceled),e.cancelConnectForRetry(),this._callbacks.push((function(){var s=Date.now();e.changeState(new X1({authToken:r}),s).then((function(){i.resolve()})).catch((function(l){i.reject(l)}))})),[2,i.promise]}))}))},n.prototype.onReconnect=function(e,r){var i=r.resetReconnectCount,a=i!==void 0&&i;return S(this,void 0,void 0,(function(){var s;return T(this,(function(l){return s=new za,this._resetConnect&&a&&this._resetConnect(),this._callbacks.push((function(c){return c?s.reject(c):s.resolve()})),[2,s.promise]}))}))},n.prototype.onDisconnect=function(e,r){r._error;var i=r.autoReconnect,a=i===void 0||i;return S(this,void 0,void 0,(function(){var s;return T(this,(function(l){switch(l.label){case 0:return s=Date.now(),this._halt(X.connectionCanceled),[4,e.changeState(new bg({autoReconnect:a}),s)];case 1:return l.sent(),[2]}}))}))},n.prototype.onDisconnectWebSocket=function(e){return S(this,void 0,void 0,(function(){var r;return T(this,(function(i){switch(i.label){case 0:return r=Date.now(),this._halt(X.connectionCanceled),[4,e.changeState(new W0,r)];case 1:return i.sent(),[2]}}))}))},n.prototype.onLogout=function(e){return S(this,void 0,void 0,(function(){var r;return T(this,(function(i){switch(i.label){case 0:return r=Date.now(),this._halt(X.connectionCanceled),[4,e.changeState(new Gu,r)];case 1:return i.sent(),[2]}}))}))},n.prototype.onDelayedConnecting=function(e,r){var i=r.retryAfterTime,a=r.reasonCode,s=r.message;return S(this,void 0,void 0,(function(){var l,c;return T(this,(function(d){switch(d.label){case 0:return l=Date.now(),(c=new X({code:ze.DELAYED_CONNECTING,message:s})).setDetail(JSON.stringify({retry_after:i/1e3,reason_code:a,message:s})),this._halt(c),[4,e.changeState(new yg({retryAfterTime:i,reasonCode:a,message:s,authToken:this._authToken}),l)];case 1:return d.sent(),[2]}}))}))},n})(Eh),mD=(function(t){function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=en.CONNECTED,e.name="connected",e}return U(n,t),n.prototype.onReconnect=function(e){return S(this,void 0,void 0,(function(){var r;return T(this,(function(i){switch(i.label){case 0:return r=Date.now(),[4,e.disconnect()];case 1:return i.sent(),[4,e.changeState(new M0,r)];case 2:return i.sent(),[2]}}))}))},n.prototype.onDisconnect=function(e,r){var i=r.autoReconnect;return S(this,void 0,void 0,(function(){var a;return T(this,(function(s){switch(s.label){case 0:return a=Date.now(),[4,e.changeState(new bg({autoReconnect:i}),a)];case 1:return s.sent(),[2]}}))}))},n.prototype.onDisconnectWebSocket=function(e){return S(this,void 0,void 0,(function(){var r;return T(this,(function(i){switch(i.label){case 0:return r=Date.now(),[4,e.changeState(new W0,r)];case 1:return i.sent(),[2]}}))}))},n.prototype.onLogout=function(e){return S(this,void 0,void 0,(function(){var r;return T(this,(function(i){switch(i.label){case 0:return r=Date.now(),[4,e.changeState(new Gu,r)];case 1:return i.sent(),[2]}}))}))},n.prototype.onDelayedConnecting=function(e,r){var i=r.retryAfterTime,a=r.reasonCode,s=r.message;return S(this,void 0,void 0,(function(){var l;return T(this,(function(c){switch(c.label){case 0:return l=Date.now(),[4,e.changeState(new yg({retryAfterTime:i,reasonCode:a,message:s}),l)];case 1:return c.sent(),[2]}}))}))},n})(Eh),X1=(function(t){function n(e){var r=e.authToken,i=t.call(this)||this;return i.type=en.CONNECTING,i.name="connecting",i._authToken="",i._callbacks=[],i._authToken=r,i}return U(n,t),n.prototype._halt=function(e){this._haltConnect&&(this._haltConnect(e),this._haltConnect=void 0)},n.prototype._flushCallbacks=function(e){this._haltConnect=void 0,this._callbacks.forEach((function(r){return r(e)}))},n.prototype.run=function(e){return S(this,void 0,void 0,(function(){var r,i,a,s,l,c,d=this;return T(this,(function(p){switch(p.label){case 0:r=Date.now(),i=new za,this._callbacks.push((function(g){return g?i.reject(g):i.resolve()})),p.label=1;case 1:return p.trys.push([1,4,,12]),a=So(),s=0,[4,$1((function(g){return S(d,void 0,void 0,(function(){var _;return T(this,(function(y){switch(y.label){case 0:this._haltConnect=g,y.label=1;case 1:return y.trys.push([1,3,,4]),s++,[4,e.connect({authToken:this._authToken,connectionKey:a,connectionRetryCount:s})];case 2:return y.sent(),[3,4];case 3:if(_=y.sent(),e.clearLoginTimer(),_ instanceof X)switch(_.code){case ze.CONNECTION_CANCELED:case ze.SESSION_KEY_EXPIRED:case ze.SESSION_TOKEN_EXPIRED:case ze.SESSION_REVOKED:case ze.USER_AUTH_DEACTIVATED:case ze.USER_AUTH_DELETED_OR_NOT_FOUND:case ze.USER_DEACTIVATED:case ze.DELAYED_CONNECTING:return g(_),[2]}throw _;case 4:return[2]}}))}))}),e.sdkState.websocket.connectMaxRetry)];case 2:return p.sent(),[4,e.changeState(new mD,r)];case 3:return p.sent(),$e((function(){return S(d,void 0,void 0,(function(){return T(this,(function(g){return this._flushCallbacks(),e.connectionHandlers.forEach((function(_){_.onConnected&&_.onConnected(e.sdkState.userId)})),[2]}))}))})),[3,12];case 4:return l=p.sent(),Ca(l)?[3,10]:[4,e.disconnect()];case 5:return p.sent(),l instanceof X?l.code!==ze.DELAYED_CONNECTING?[3,7]:(c=JSON.parse(l.detail),[4,e.changeState(new yg({retryAfterTime:1e3*c.retry_after,reasonCode:c.reason_code,message:c.message,authToken:this._authToken}),r)]):[3,9];case 6:return p.sent(),[3,9];case 7:return l.code===ze.CONNECTION_CANCELED?[3,9]:[4,e.changeState(new rS,r)];case 8:p.sent(),p.label=9;case 9:return $e((function(){return S(d,void 0,void 0,(function(){return T(this,(function(g){return this._flushCallbacks(l),[2]}))}))})),[3,11];case 10:throw l;case 11:return[3,12];case 12:return[2,i.promise]}}))}))},n.prototype.onConnect=function(e){return S(this,void 0,void 0,(function(){var r;return T(this,(function(i){return r=new za,this._callbacks.push((function(a){return a?r.reject(a):r.resolve()})),[2,r.promise]}))}))},n.prototype.onDisconnect=function(e,r){var i=r.error,a=i===void 0?null:i,s=r.autoReconnect,l=s!==void 0&&s,c=r.cause,d=c===void 0?null:c;return S(this,void 0,void 0,(function(){var p;return T(this,(function(g){switch(g.label){case 0:return p=Date.now(),this._halt(a??QI(d)),e.hasSession?[4,e.changeState(new bg({autoReconnect:l}),p)]:[3,2];case 1:return g.sent(),[3,4];case 2:return[4,e.changeState(new Gu,p)];case 3:g.sent(),g.label=4;case 4:return[2]}}))}))},n.prototype.onDisconnectWebSocket=function(e,r){return S(this,void 0,void 0,(function(){var i;return T(this,(function(a){switch(a.label){case 0:return this._halt(QI(r?.cause||null)),i=Date.now(),e.hasSession?[4,e.changeState(new W0,i)]:[3,2];case 1:return a.sent(),[3,4];case 2:return[4,e.changeState(new Gu,i)];case 3:a.sent(),a.label=4;case 4:return[2]}}))}))},n.prototype.onLogout=function(e,r){return S(this,void 0,void 0,(function(){var i;return T(this,(function(a){switch(a.label){case 0:return i=Date.now(),this._halt(r??X.connectionCanceled),[4,e.changeState(new Gu,i)];case 1:return a.sent(),[2]}}))}))},n.prototype.onDelayedConnecting=function(e,r){var i=r.retryAfterTime,a=r.reasonCode,s=r.message;return S(this,void 0,void 0,(function(){var l;return T(this,(function(c){switch(c.label){case 0:return l=Date.now(),[4,e.changeState(new yg({retryAfterTime:i,reasonCode:a,message:s,authToken:this._authToken}),l)];case 1:return c.sent(),[2]}}))}))},n})(Eh);function QI(t){var n=X.connectionCanceled;if(t){var e=null;switch(t){case gp.ExternalSetBackground:e="Connection has been canceled due to the application having externally moved to background while in ConnectingState.";break;case gp.ExternalDisconnectWebSocket:e="Connection has been canceled because sb.disconnectWebSocket() was called while in ConnectingState."}e&&n.setDetail(e)}return n}var nh,rS=(function(t){function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.type=en.INITIALIZED,e.name="initialized",e}return U(n,t),n.prototype.onConnect=function(e,r){return S(this,void 0,void 0,(function(){var i;return T(this,(function(a){switch(a.label){case 0:return i=Date.now(),[4,e.changeState(new X1({authToken:r}),i)];case 1:return a.sent(),[2]}}))}))},n.prototype.onLogout=function(e){return S(this,void 0,void 0,(function(){var r;return T(this,(function(i){switch(i.label){case 0:return r=Date.now(),[4,e.changeState(new Gu({wasPreviouslyConnected:!1}),r)];case 1:return i.sent(),[2]}}))}))},n})(Eh),yj=(function(t){function n(){return t.call(this,{code:"PING",payload:{id:Date.now(),active:1},ackRequired:!1})||this}return U(n,t),n})(na),bj=(function(){function t(n){var e=n.pingDelegate,r=n.sdkState,i=n.logger;this.pingDelegate=e,this.sdkState=r,this._logger=i}return Object.defineProperty(t.prototype,"isWaiting",{get:function(){return!!this._pingTimeoutTimer},enumerable:!1,configurable:!0}),t.prototype.ping=function(){var n,e=this;if(!this.sdkState.websocket)throw X.connectionRequired;var r=new yj;try{var i=(n=this.sdkState.websocket.pongTimeout)!==null&&n!==void 0?n:5e3;this._pingTimeoutTimer=setTimeout((function(){e._logger.debug("pinger.ping() timeout"),e.pingDelegate.error()}),i),this.pingDelegate.send(r),this._logger.debug("pinger.ping()")}catch(a){this._logger.debug("pinger.ping() error",a),this._pingTimeoutTimer&&(clearTimeout(this._pingTimeoutTimer),this._pingTimeoutTimer=void 0),this.pingDelegate.error()}return r},t.prototype.pong=function(){this._logger.debug("pinger.pong()"),this._pingTimeoutTimer&&(clearTimeout(this._pingTimeoutTimer),this._pingTimeoutTimer=void 0)},t.prototype.refreshTimer=function(){var n,e=this;if(!this.sdkState.websocket)throw X.connectionRequired;this._logger.debug("pinger.refreshTimer()");var r=(n=this.sdkState.websocket.pingInterval)!==null&&n!==void 0?n:15e3;this.stop(),this._pingTimer=setInterval((function(){e.ping()}),r)},t.prototype.start=function(){this._logger.debug("pinger.start()"),this.refreshTimer(),this.ping()},t.prototype.stop=function(){this._logger.debug("pinger.stop()"),this._pingTimer&&(clearInterval(this._pingTimer),this._pingTimer=void 0),this._pingTimeoutTimer&&(clearTimeout(this._pingTimeoutTimer),this._pingTimeoutTimer=void 0)},t})(),gD=["premium_feature_list","file_upload_size_limit","application_attributes","emoji_hash","multiple_file_send_max_size","notifications","message_template","ai_agent"],Ej=(function(t){function n(e,r){var i,a=r.sdkState,s=r.cacheContext,l=r.connectionHandlers,c=r.sessionManager,d=r.websocketClient,p=r.dispatcher,g=r.logger,_=r.entryState,y=_===void 0?new rS:_,C=this;return(C=t.call(this)||this)._currentConnectionRetryCount=0,C._stateUpdatedAt=0,C._connectingAt=0,C._connectedAt=0,C._logiReceivedAt=0,C._connectionRequestQueue=[],C._iid=e,C.sdkState=a,C.cacheContext=s,C.connectionHandlers=l,C._sessionManager=c,C._websocketClient=d,C._dispatcher=p,C._logger=g,C._currentState=y,!((i=C.sdkState.websocket)===null||i===void 0)&&i.pingerDisabled||(C._pinger=new bj({pingDelegate:{send:function(w){return C._websocketClient.send(w)},error:function(w){p.dispatch(new Dc(new qn({type:An.WEBSOCKET_DISCONNECT,data:{success:!0,error_code:ze.NETWORK_ERROR,error_description:"cause=ping_pong_timedout"}}))),C._websocketClient.error(w)}},sdkState:C.sdkState,logger:g})),C._websocketClient.on("open",(function(){C._connectedAt=Date.now(),C._tryResolveConnectionRequest()})).on("message",(function(w){w.code==="LOGI"&&(C.clearLoginTimer(),C._dispatcher.dispatch(w.as(HE)))})).on("ping-refresh",(function(){var w;return(w=C._pinger)===null||w===void 0?void 0:w.refreshTimer()})).on("pong",(function(){var w;return(w=C._pinger)===null||w===void 0?void 0:w.pong()})).on("error",(function(){var w;return(w=C._pinger)===null||w===void 0?void 0:w.stop()})).on("close",(function(){C._logiProcessingTimer=setTimeout((function(){C._logiProcessingTimer=void 0,C._unresolvedLogi||C._rejectConnectionRequest(X.networkError)}),500)})),C._dispatcher.on((function(w){if(w instanceof HE)C._unresolvedLogi=w,C._tryResolveConnectionRequest();else if(w instanceof eS){var A=w.retryAfterTime,M=w.reasonCode,I=w.message,D=new X({code:ze.DELAYED_CONNECTING,message:I});D.setDetail(JSON.stringify({retry_after:A/1e3,reason_code:M,message:I})),C._rejectConnectionRequest(D)}})),C}return U(n,t),Object.defineProperty(n.prototype,"currentState",{get:function(){return this._currentState},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hasSession",{get:function(){return this._sessionManager.session.hasSession},enumerable:!1,configurable:!0}),n.prototype.changeState=function(e,r){return S(this,void 0,void 0,(function(){return T(this,(function(i){switch(i.label){case 0:return r>=this._stateUpdatedAt?(this._currentState=e,this._stateUpdatedAt=r,this._dispatcher.dispatch(new Bs({stateType:e.type})),this._logger.debug("connection state changes to ".concat(e.name)),[4,this._currentState.run(this)]):[3,2];case 1:return i.sent(),[2,!0];case 2:return[2,!1]}}))}))},n.prototype._tryResolveConnectionRequest=function(){var e;return S(this,void 0,void 0,(function(){var r;return T(this,(function(i){switch(i.label){case 0:return r=this._unresolvedLogi,this._websocketClient.isOpen&&r?(this._unresolvedLogi=void 0,this._logiReceivedAt=Date.now(),r.error?[3,2]:[4,r.applyTo(this._iid)]):[3,3];case 1:return i.sent(),this._statLogConnection(),(e=this._pinger)===null||e===void 0||e.start(),this._connectionRequestQueue.forEach((function(a){return a.resolve()})),this._connectionRequestQueue=[],this.sdkState.appState="foreground",[3,3];case 2:r.error.isSessionExpiredError||r.error.isSessionInvalidatedError?this._dispatcher.dispatch(new _g({reason:r.error.code,message:r.error.message})):this._logger.warn("login failed: ".concat(r.error)),this._rejectConnectionRequest(r.error),i.label=3;case 3:return[2]}}))}))},n.prototype._rejectConnectionRequest=function(e){var r;if((r=this._pinger)===null||r===void 0||r.stop(),this.clearLoginTimer(),this._connectionRequestQueue.length>0){var i=this._connectionRequestQueue;this._connectionRequestQueue=[],i.forEach((function(a){return a.reject(e)})),this._statLogConnection(e)}},n.prototype._url=function(e){var r,i=e.configTs,a=this.sdkState,s=a.appId,l=a.appVersion,c=a.userId,d=a.extensions,p=a.sendbirdRuntimeEnvironment,g=this.cacheContext.localCacheEnabled,_=this._sessionManager.session,y=(r=this.sdkState.websocket)===null||r===void 0?void 0:r.compression,C=!!(d??{}).sb_uikit,w=o1.userAgentWithExtension(d);return"".concat(this.sdkState.websocket.host,"/?p=JS&pv=").concat(encodeURIComponent(ch.OS_VERSION),"&sv=").concat(encodeURIComponent(ch.SDK_VERSION),"&ai=").concat(s).concat(l?"&av=".concat(l):"").concat(_.hasSession?"":"&user_id=".concat(encodeURIComponent(c)),"&pmce=").concat(y?1:0,"&active=1&device_token_types=").concat(encodeURIComponent(["gcm","huawei","apns"].join(",")),"&SB-User-Agent=").concat(w,"&SB-SDK-User-Agent=").concat(encodeURIComponent(o1.sendbirdSdkUserAgentWithExtension(p)),"&Request-Sent-Timestamp=").concat(Date.now().toString(),"&include_extra_data=").concat(encodeURIComponent(String(gD))).concat(this._sessionManager.handler?"&expiring_session=1":"","&use_local_cache=").concat(g?1:0,"&include_poll_details=1").concat(C?"&uikit_config=1":"","&config_ts=").concat(i)},n.prototype._statLogConnection=function(e){var r,i;this._dispatcher.dispatch(new Dc(new qn({type:An.WEBSOCKET_CONNECT,data:{host_url:(r=this.sdkState.websocket)===null||r===void 0?void 0:r.host,success:!e,latency:this._connectedAt>0?this._connectedAt-this._connectingAt:Date.now()-this._connectingAt,logi_latency:this._logiReceivedAt>0?this._logiReceivedAt-this._connectingAt:void 0,connection_id:this._currentConnectionKey,accum_trial:this._currentConnectionRetryCount,is_soft_rate_limited:(i=this._isSoftRateLimited)!==null&&i!==void 0?i:void 0,error_code:e?.code,error_description:e?.code===ze.DELAYED_CONNECTING?e?.detail:e?.message}})))},n.prototype.connect=function(e){var r;return e===void 0&&(e={}),S(this,void 0,void 0,(function(){var i,a,s,l,c,d,p,g,_,y,C,w,A=this;return T(this,(function(M){switch(M.label){case 0:return this._logiProcessingTimer&&(clearTimeout(this._logiProcessingTimer),this._logiProcessingTimer=void 0,this._rejectConnectionRequest(X.connectionCanceled)),i=new za,a=e.authToken,s=a===void 0?"":a,l=e.connectionKey,c=l===void 0?So():l,d=e.connectionRetryCount,p=d===void 0?1:d,g=e.isSoftRateLimited,this._connectionRequestQueue.push(i),this._connectionRequestQueue.length!==1?[3,2]:(this._currentConnectionKey=c,this._currentConnectionRetryCount=p,this._isSoftRateLimited=g,this._connectingAt=Date.now(),this._connectedAt=0,this._logiReceivedAt=0,this._loginTimer=setTimeout((function(){A._loginTimer=void 0,A._rejectConnectionRequest(X.loginTimeout)}),(r=this.sdkState.websocket)===null||r===void 0?void 0:r.responseTimeout),_=this._sessionManager.session,s&&(_.authToken=s,_.sessionKey=void 0),y=0,[4,this.cacheContext.preference.get(h1(this.sdkState.appId))]);case 1:(C=M.sent())&&(y=C.configTs),w=this._url({configTs:y}),_.sessionKey||_.authToken?this._websocketClient.connect(w,JSON.stringify(_.hasSession?{auth:_.sessionKey}:{token:_.authToken})):this._websocketClient.connect(w,JSON.stringify({})),M.label=2;case 2:return[2,i.promise]}}))}))},n.prototype.cancelConnectForRetry=function(){this._dispatcher.dispatch(HE.asError(X.connectionRenew))},n.prototype.disconnect=function(){return S(this,void 0,void 0,(function(){return T(this,(function(e){switch(e.label){case 0:return[4,this._websocketClient.disconnect()];case 1:return e.sent(),[2]}}))}))},n.prototype.logout=function(){return S(this,void 0,void 0,(function(){return T(this,(function(e){switch(e.label){case 0:return this.sdkState.userId=void 0,this._unresolvedLogi=void 0,[4,this.disconnect()];case 1:return e.sent(),[4,this._sessionManager.clear()];case 2:return e.sent(),[2]}}))}))},n.prototype.clearLoginTimer=function(){this._loginTimer&&(clearTimeout(this._loginTimer),this._loginTimer=void 0)},n})(Ap),vD=(function(t){function n(e){var r=e.appId,i=e.userId,a=e.includeUIKitConfig,s=a!==void 0&&a,l=e.localCacheEnabled,c=l===void 0||l,d=e.expiringSession,p=d===void 0||d,g=e.configTs,_=g===void 0?0:g,y=t.call(this)||this;return y.path="".concat(G9,"/").concat(encodeURIComponent(i),"/authentication"),y.method=ye.POST,y.params=Le({expiring_session:!!p,include_logi:!0,include_extra_data:String(gD),uikit_config:s,use_local_cache:c,app_id:r,config_ts:_}),y.requireAuth=!1,y}return U(n,t),n})(Ee),Cj=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.logi=new HE(e,"LOGI",r),i}return U(n,t),n})(Se);(function(t){t[t.ALL=0]="ALL",t[t.WEBSOCKET=1]="WEBSOCKET",t[t.API=2]="API"})(nh||(nh={}));var ur,$I,wj=[$3,vD],Nj=(function(){function t(n,e){var r=e.session,i=e.sdkState,a=e.dispatcher,s=e.logger,l=e.useFetchCompat,c=l!==void 0&&l,d=this;this._currentConnectionStateType=en.INITIALIZED,this._lazyCallQueue=[],this.commandRouter=new uj(n,{session:r,sdkState:i,dispatcher:a,logger:s,useFetchCompat:c}),this._session=r,this._logger=s,this._dispatcher=a,this._dispatcher.on((function(p){var g,_,y;if(p instanceof Bs){var C=p.stateType;switch(d._currentConnectionStateType=C,C){case en.CONNECTED:d._resolveLazyCallQueue();break;case en.INITIALIZED:case en.INTERNAL_DISCONNECTED:case en.EXTERNAL_DISCONNECTED:case en.LOGOUT:d._session.isRefreshing||d._rejectLazyCallQueue(!((y=d._session)===null||y===void 0)&&y.hasSession?X.connectionClosed:X.connectionRequired)}}else if(p instanceof uD)d._session.hasChatServicePermission||d._resolveLazyCallQueue(nh.API);else if(p instanceof hN||p instanceof cD)d._rejectLazyCallQueue(X.connectionClosed);else if(p instanceof HR){var w=p.request,A=p.deferred,M=p.error;try{for(var I=Re(wj),D=I.next();!D.done;D=I.next())if(w instanceof D.value)return void A.reject(M)}catch(P){g={error:P}}finally{try{D&&!D.done&&(_=I.return)&&_.call(I)}finally{if(g)throw g.error}}d._lazyCallQueue.push({command:w,deferred:A})}}))}return Object.defineProperty(t.prototype,"isReady",{get:function(){return this._currentConnectionStateType===en.CONNECTED},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLazyCallActivated",{get:function(){return this._currentConnectionStateType===en.CONNECTING||this._currentConnectionStateType===en.RECONNECTING||this._session.isRefreshing},enumerable:!1,configurable:!0}),t.prototype._classifyLazyCallQueueByScope=function(n){var e,r=[],i=[];switch(n){case nh.ALL:e=null;break;case nh.WEBSOCKET:e=na;break;case nh.API:e=Ee}var a=!1;return this._lazyCallQueue.forEach((function(s){!e||s.command instanceof e||(a=!0),a?i.push(s):r.push(s)})),[r,i]},t.prototype._resolveLazyCallQueue=function(n){var e=this;n===void 0&&(n=nh.ALL);var r=Ye(this._classifyLazyCallQueueByScope(n),2),i=r[0],a=r[1];this._lazyCallQueue=a,i.forEach((function(s){return S(e,void 0,void 0,(function(){var l,c,d,p,g;return T(this,(function(_){switch(_.label){case 0:l=s.command,c=s.deferred,(d=s.timeout)&&clearTimeout(d),_.label=1;case 1:return _.trys.push([1,3,,4]),[4,this.send(l)];case 2:return p=_.sent(),c.resolve(p),[3,4];case 3:return g=_.sent(),c.reject(g),[3,4];case 4:return[2]}}))}))}))},t.prototype._rejectLazyCallQueue=function(n,e){var r=this;e===void 0&&(e=nh.ALL);var i=Ye(this._classifyLazyCallQueueByScope(e),2),a=i[0],s=i[1];this._lazyCallQueue=s,a.forEach((function(l){return S(r,void 0,void 0,(function(){var c,d;return T(this,(function(p){return c=l.deferred,d=l.timeout,clearTimeout(d),c.reject(n),[2]}))}))}))},t.prototype.send=function(n){return S(this,void 0,void 0,(function(){var e,r,i=this;return T(this,(function(a){switch(a.label){case 0:return n instanceof na?this.isReady?(this._logger.debug("send websocket request",n),[4,this.commandRouter.send(n)]):[3,2]:[3,4];case 1:case 5:case 7:return[2,a.sent()];case 2:if(this.isLazyCallActivated)return this._logger.debug("wait websocket request",n),e=new za,this._lazyCallQueue.push({command:n,deferred:e,timeout:setTimeout((function(){return i.timeout(n.requestId)}),1e4)}),[2,e.promise];throw this._logger.debug("fail websocket request"),X.connectionRequired;case 3:case 9:return[3,11];case 4:return n instanceof Ee?this._session.hasSession?(this._logger.debug("send api request",n),[4,this.commandRouter.send(n)]):[3,6]:[3,10];case 6:return n.hasSessionKey?(this._logger.debug("send api request with tmp session key",n),[4,this.commandRouter.send(n)]):[3,8];case 8:if(this.isLazyCallActivated)return this._logger.debug("wait api request",n),e=new za,this._lazyCallQueue.push({command:n,deferred:e,timeout:setTimeout((function(){return i.timeout(n.requestId)}),1e4)}),[2,e.promise];throw r=X.connectionRequired,this._logger.debug("fail api request",r),r;case 10:throw X.invalidCommand;case 11:return[2]}}))}))},t.prototype.forceSend=function(n){return S(this,void 0,void 0,(function(){return T(this,(function(e){switch(e.label){case 0:return this._logger.debug("send forced request",n),n instanceof na||n instanceof Ee?[4,this.commandRouter.send(n)]:[3,2];case 1:return[2,e.sent()];case 2:throw X.invalidCommand}}))}))},t.prototype.timeout=function(n){this._logger.debug("timeout request",n);var e=this._lazyCallQueue.findIndex((function(r){return r.command.requestId===n}));e>-1&&(this._lazyCallQueue[e].deferred.reject(X.connectionRequired),this._lazyCallQueue.splice(e,1))},t.prototype.cancel=function(n){this._logger.debug("cancel api request",n),this.commandRouter.cancel(n)},t.prototype.cancelAll=function(){this._logger.debug("cancel all api requests"),this.commandRouter.cancelAll()},t})(),$C="sendbird@devicetokens",XC=(function(){function t(n){var e=n.type,r=n.token,i=n.device_os,a=n.device_manufacturer,s=n.system_push_enabled;this.type=e,this.token=r,this.deviceOS=i,this.deviceManufacturer=a,this.systemPushEnabled=s}return t.payloadify=function(n){return Le(Qe({type:n.type,token:n.token,device_os:n.deviceOS,device_manufacturer:n.deviceManufacturer,system_push_enabled:n.systemPushEnabled}))},t})(),ZC=new WeakMap,Tj=(function(t){function n(e){var r=e._iid,i=e.session,a=e.cacheContext,s=e.sdkState,l=e.dispatcher,c=e.requestQueue,d=e.logger,p=e.pushNotificationAckManager,g=t.call(this)||this;return g._currentConnectionStateType=en.INITIALIZED,g._isRefreshingAuthToken=!1,g.currentUser=null,g.session=i,g._iid=r,g._cacheContext=a,g._sdkState=s,g._dispatcher=l,g._requestQueue=c,g._logger=d,g._pushNotificationAckManager=p,g._deviceTokens=[],g._dispatcher.on((function(_){var y,C,w;if(_ instanceof Bs){var A=_.stateType;g._currentConnectionStateType=A}else if(_ instanceof _g&&g.handler&&!g.isSessionKeyRefreshing){if(g._currentConnectionStateType===en.CONNECTING)return;!((y=_.error)===null||y===void 0)&&y.isSessionInvalidatedError?g.clear():(!((C=_.error)===null||C===void 0)&&C.isSessionTokenExpiredError&&g.refreshAuthToken().catch((function(M){if(Ca(M)&&g._sdkState.appState==="foreground")throw M})),!((w=_.error)===null||w===void 0)&&w.isSessionKeyExpiredError&&(g._logger.debug("session expired"),g.handler.onSessionExpired&&g.handler.onSessionExpired(),g._currentConnectionStateType===en.CONNECTED&&g._dispatcher.dispatch(new Dc(new qn({type:An.WEBSOCKET_DISCONNECT,data:{success:!0,error_code:ze.SESSION_KEY_EXPIRED,error_description:"cause=session_expired"}}))),g.refreshSessionKey().catch((function(M){if(Ca(M)&&g._sdkState.appState==="foreground")throw M}))))}})),g}return U(n,t),Object.defineProperty(n.prototype,"ekey",{get:function(){return ZC.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"deviceTokens",{get:function(){return this._deviceTokens},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"deviceTokenLastDeletedAt",{get:function(){return this._deviceTokenLastDeletedAt},enumerable:!1,configurable:!0}),n.prototype.indexOfDeviceToken=function(e,r){return this._deviceTokens.findIndex((function(i){return i.type===e&&i.token===r}))},n.prototype.hasDeviceToken=function(e,r){return this.indexOfDeviceToken(e,r)>=0},n.prototype.createRefreshWebsocketCommand=function(e,r){return new tH({authToken:e,expiringSession:!0,requestId:r})},n.prototype._refreshSessionKeyByWebSocket=function(e){return S(this,void 0,void 0,(function(){var r,i,a,s,l;return T(this,(function(c){switch(c.label){case 0:return r=this.createRefreshWebsocketCommand(e),[4,this._requestQueue.forceSend(r)];case 1:if(i=c.sent(),a=i.as(rH),s=a.newKey,l=a.error)throw l;return this.session.sessionKey=s??this.session.sessionKey,[2]}}))}))},n.prototype._refreshSessionKeyByApi=function(e){return S(this,void 0,void 0,(function(){var r,i=this;return T(this,(function(a){switch(a.label){case 0:return r=new $3({userId:this._sdkState.userId,authToken:e,services:this.session.services&&this.session.services.length>0?this.session.services:void 0,expiringSession:!0}),[4,$1((function(s){return S(i,void 0,void 0,(function(){var l,c,d,p,g;return T(this,(function(_){switch(_.label){case 0:return _.trys.push([0,2,,3]),[4,this._requestQueue.forceSend(r)];case 1:return l=_.sent(),c=l.as(nH),d=c.key,p=c.services,this.session.sessionKey=d,this.session.services=p,[3,3];case 2:if(g=_.sent(),!this._isSessionRelatedError(g))throw g;return s(g),[3,3];case 3:return[2]}}))}))}),3)];case 1:return a.sent(),[2]}}))}))},n.prototype._refreshSessionKey=function(e,r){return r===void 0&&(r=!0),S(this,void 0,void 0,(function(){var i,a;return T(this,(function(s){switch(s.label){case 0:if(this._currentConnectionStateType!==en.CONNECTED)return[3,8];s.label=1;case 1:return s.trys.push([1,3,,8]),[4,this._refreshSessionKeyByWebSocket(e)];case 2:return s.sent(),this.complete(),[2];case 3:i=s.sent(),s.label=4;case 4:return s.trys.push([4,6,,7]),[4,this._handleSessionRefreshError(i,r)];case 5:return s.sent(),[2];case 6:return s.sent(),[3,7];case 7:return[3,8];case 8:return s.trys.push([8,10,,12]),[4,this._refreshSessionKeyByApi(e)];case 9:return s.sent(),this.complete(),[3,12];case 10:return a=s.sent(),[4,this._handleSessionRefreshError(a,r)];case 11:return s.sent(),[3,12];case 12:return[2]}}))}))},n.prototype._receiveNewAuthToken=function(){var e,r=this,i=new za;if(this._isRefreshingAuthToken=!0,this.session.sessionKey=void 0,this.session.authToken=void 0,(e=this.handler)===null||e===void 0?void 0:e.onSessionTokenRequired){var a=null,s=function(){a&&(clearTimeout(a),a=null)},l=function(d){s(),r._isRefreshingAuthToken&&(r._isRefreshingAuthToken=!1,i.resolve(d))},c=function(d){s(),r._isRefreshingAuthToken&&(r._isRefreshingAuthToken=!1,i.reject(d))};a=setTimeout((function(){return c()}),1e3*this._sdkState.sessionTokenRefreshTimeout),$e((function(){return S(r,void 0,void 0,(function(){var d;return T(this,(function(p){return!((d=this.handler)===null||d===void 0)&&d.onSessionTokenRequired&&this.handler.onSessionTokenRequired(l,c),[2]}))}))}))}else i.resolve(null);return i.promise},n.prototype._handleSessionRefreshError=function(e,r){return r===void 0&&(r=!1),S(this,void 0,void 0,(function(){var i;return T(this,(function(a){switch(a.label){case 0:return e instanceof X&&(e.isSessionTokenExpiredError||e.code===ze.APPLICATION_NOT_FOUND)?(this.session.authToken=void 0,r?[4,this._receiveNewAuthToken()]:[3,6]):[3,6];case 1:return(i=a.sent())?(this.session.authToken=i,[4,this._refreshSessionKey(this.session.authToken,!1)]):[3,3];case 2:return a.sent(),[3,5];case 3:return[4,this.clear()];case 4:a.sent(),a.label=5;case 5:return[2];case 6:throw e}}))}))},n.prototype._isSessionRelatedError=function(e){return e instanceof X&&(e.isSessionExpiredError||e.isSessionInvalidatedError)},Object.defineProperty(n.prototype,"isSessionKeyRefreshing",{get:function(){return this.session.isRefreshing},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isRefreshingAuthToken",{get:function(){return this._isRefreshingAuthToken},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isSessionExpiring",{get:function(){return!!this.handler},enumerable:!1,configurable:!0}),n.prototype.authenticate=function(e,r){var i;return S(this,void 0,void 0,(function(){var a,s,l,c,d;return T(this,(function(p){switch(p.label){case 0:return this.session.authToken=r,a=0,[4,this._cacheContext.preference.get(h1(this._sdkState.appId))];case 1:return(s=p.sent())&&(a=s.configTs),l=new vD({appId:this._sdkState.appId,userId:e,includeUIKitConfig:!!((i=this._sdkState.extensions)!==null&&i!==void 0?i:{}).sb_uikit,localCacheEnabled:this._cacheContext.localCacheEnabled,expiringSession:this.isSessionExpiring,configTs:a}),[4,this._requestQueue.commandRouter.send(l)];case 2:return c=p.sent(),(d=c.as(Cj).logi).error?[3,5]:this.session.hasChatServicePermission?[3,4]:[4,d.applyTo(this._iid)];case 3:p.sent(),p.label=4;case 4:return[3,6];case 5:throw d.error;case 6:return[2]}}))}))},n.prototype.login=function(e){var r;return S(this,void 0,void 0,(function(){var i,a,s,l,c,d,p,g;return T(this,(function(_){switch(_.label){case 0:return i=e.key,a=e.ekey,s=e.services,l=e.userProfile,c=e.deviceTokenLastDeletedAt,d=c===void 0?0:c,this.session.sessionKey=i,this.session.services=s,ZC.set(this,a),this._deviceTokenCacheEnabled=(r=l?.appInfo)===null||r===void 0?void 0:r.deviceTokenCache,p=this._cacheContext.preference,this._deviceTokenCacheEnabled?[4,p.get($C)]:[3,5];case 1:return!(g=_.sent())||g.lastDeletedAt<d?(this._deviceTokens=[],this._deviceTokenLastDeletedAt=d,[4,this.saveDeviceToken()]):[3,3];case 2:return _.sent(),[3,4];case 3:this._deviceTokens=g.tokens.map((function(y){return new XC(XC.payloadify(y))})),this._deviceTokenLastDeletedAt=g.lastDeletedAt,_.label=4;case 4:return[3,7];case 5:return[4,p.remove($C)];case 6:_.sent(),_.label=7;case 7:return[2]}}))}))},n.prototype.complete=function(){var e=this;this.dispatch("refresh"),this._dispatcher.dispatch(new uD),$e((function(){return S(e,void 0,void 0,(function(){var r;return T(this,(function(i){return this._logger.debug("session refreshed"),!((r=this.handler)===null||r===void 0)&&r.onSessionRefreshed&&this.handler.onSessionRefreshed(),[2]}))}))}))},n.prototype.error=function(e){var r=this;$e((function(){return S(r,void 0,void 0,(function(){var i;return T(this,(function(a){return!((i=this.handler)===null||i===void 0)&&i.onSessionError&&this.handler.onSessionError(e),[2]}))}))}))},n.prototype.close=function(){var e=this;this.dispatch("close"),this._dispatcher.dispatch(new cD),$e((function(){return S(e,void 0,void 0,(function(){var r;return T(this,(function(i){return this._logger.debug("session closed"),!((r=this.handler)===null||r===void 0)&&r.onSessionClosed&&this.handler.onSessionClosed(),[2]}))}))}))},n.prototype.refreshAuthToken=function(){return S(this,void 0,void 0,(function(){var e,r;return T(this,(function(i){switch(i.label){case 0:if(e=null,!this.isSessionExpiring||this.session.isRefreshing)return[3,9];this.session.isRefreshing=!0,i.label=1;case 1:return i.trys.push([1,7,8,9]),[4,this._receiveNewAuthToken()];case 2:return(e=i.sent())?(this._logger.debug("session refreshing.."),this.session.authToken=e,[4,this._refreshSessionKey(this.session.authToken)]):[3,4];case 3:return i.sent(),[3,6];case 4:return[4,this.clear()];case 5:i.sent(),i.label=6;case 6:return[3,9];case 7:throw i.sent(),r=e?X.sessionTokenRefreshFailed:X.sessionTokenRequestFailed,this._dispatcher.dispatch(new hN),this.error(r),this._logger.debug("refresh auth token error = ",r),r;case 8:return this.session.isRefreshing=!1,[7];case 9:return[2]}}))}))},n.prototype.refreshSessionKey=function(){return S(this,void 0,void 0,(function(){var e;return T(this,(function(r){switch(r.label){case 0:if(!this.isSessionExpiring||this.session.isRefreshing)return[3,5];this.session.isRefreshing=!0,r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,this._refreshSessionKey(this.session.authToken)];case 2:return r.sent(),[3,5];case 3:throw r.sent(),e=X.sessionTokenRefreshFailed,this._dispatcher.dispatch(new hN),this.error(e),e;case 4:return this.session.isRefreshing=!1,[7];case 5:return[2]}}))}))},n.prototype.setDeviceToken=function(e,r,i){if(this._deviceTokenCacheEnabled&&this.indexOfDeviceToken(e,r)<0){var a=new XC({type:e,token:r,device_os:i?.deviceOS,device_manufacturer:i?.deviceManufacturer,system_push_enabled:i?.systemPushEnabled});return this._deviceTokens.push(a),!0}return!1},n.prototype.unsetDeviceToken=function(e,r){if(this._deviceTokenCacheEnabled){var i=this.indexOfDeviceToken(e,r);i>=0&&this._deviceTokens.splice(i,1)}},n.prototype.unsetDeviceTokens=function(e){this._deviceTokenCacheEnabled&&(this._deviceTokens=e?this._deviceTokens.filter((function(r){return r.type!==e})):[])},n.prototype.setDeviceTokenDeletedAt=function(e){e>0&&(this._deviceTokenLastDeletedAt=e)},n.prototype.saveDeviceToken=function(){return S(this,void 0,void 0,(function(){return T(this,(function(e){switch(e.label){case 0:return this._deviceTokenCacheEnabled?[4,this._cacheContext.preference.set($C,{tokens:this._deviceTokens,lastDeletedAt:this._deviceTokenLastDeletedAt})]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},n.prototype.clear=function(){return S(this,void 0,void 0,(function(){return T(this,(function(e){switch(e.label){case 0:return this.currentUser=null,this.session.clear(),this.close(),ZC.delete(this),this._deviceTokens=[],this._deviceTokenLastDeletedAt=0,[4,this.saveDeviceToken()];case 1:return e.sent(),this._pushNotificationAckManager.clear(),[2]}}))}))},n})(Ap),_D=function(t,n){var e,r;if(t!==null&&n!==null){var i=Object.keys(t),a=Object.keys(n),s=Je([],Ye(new Set(Je(Je([],Ye(i),!1),Ye(a),!1))),!1),l={};try{for(var c=Re(s),d=c.next();!d.done;d=c.next()){var p=d.value,g=typeof t[p],_=typeof n[p];g==="undefined"?l[p]=n[p]:_==="undefined"?l[p]=t[p]:g!==_?l[p]=n[p]:g==="object"&&t[p]&&n[p]?l[p]=_D(t[p],n[p]):l[p]=n[p]}}catch(y){e={error:y}}finally{try{d&&!d.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}return l}return n};(function(t){t[t.PENDING=0]="PENDING",t[t.COLLECT_ONLY=1]="COLLECT_ONLY",t[t.ENABLED=2]="ENABLED",t[t.DISABLED=3]="DISABLED"})(ur||(ur={})),(function(t){t.DAILY="daily",t.DEFAULT="default",t.REALTIME="realtime"})($I||($I={}));var f1,Z1=100,iS=(function(){function t(n){var e=n.deviceId,r=n.cacheContext,i=n.requestQueue;this.queue=[],this.flushWaitQueue=[],this.enabledState=ur.PENDING,this.isFlushing=!1,this._sentLogStats=[],this.deviceId=e,this.cacheContext=r,this.requestQueue=i,this.logInfo={deviceId:e,statLogs:[],generation:1,lastFlushedAt:0},this.limit=Z1}return Object.defineProperty(t.prototype,"isEnabled",{get:function(){return this.enabledState===ur.ENABLED},enumerable:!1,configurable:!0}),t.prototype.init=function(n){return S(this,void 0,void 0,(function(){var e;return T(this,(function(r){switch(r.label){case 0:return this.key=n,[4,this.cacheContext.preference.get(this.key)];case 1:return(e=r.sent())&&(this.logInfo=e),[2]}}))}))},t.prototype._mergeQueue=function(){this.flushWaitQueue.length>0&&(this.queue=this.queue.concat(this.flushWaitQueue),this.flushWaitQueue=[])},t.prototype._isDuplicateStat=function(n){var e=this._sentLogStats.find((function(r){var i;return r.channelUrl===n.data.channel_url&&r.messageId===((i=n.data.notificationId)!==null&&i!==void 0?i:n.data.message_id)&&r.action===n.data.action}));return e||this._sentLogStats.push({channelUrl:n.data.channel_url,messageId:n.data.message_id,action:n.data.action}),!!e},t.prototype._save=function(){return S(this,void 0,void 0,(function(){var n;return T(this,(function(e){switch(e.label){case 0:return n=Je(Je([],Ye(this.queue),!1),Ye(this.flushWaitQueue),!1),[4,this.cacheContext.preference.set(this.key,{deviceId:this.logInfo.deviceId,statLogs:n.map((function(r){return qn.payloadify(r)})),generation:this.logInfo.generation++,lastFlushedAt:this.logInfo.lastFlushedAt})];case 1:return e.sent(),[2]}}))}))},t.prototype.clear=function(){return S(this,void 0,void 0,(function(){return T(this,(function(n){return this.queue=[],this.flushWaitQueue=[],this.logInfo.generation=1,this._save(),[2]}))}))},t})(),O0=(function(t){function n(e){var r,i,a,s,l=e.type,c=e.data,d=e.ts,p=d===void 0?Date.now():d,g=t.call(this,{type:l,data:c,ts:p})||this;return g.date=new Date(p),g.key="".concat((r=g.date,i=r.getFullYear(),a=String(r.getMonth()+1).padStart(2,"0"),s=String(r.getDate()).padStart(2,"0"),"".concat(i).concat(a).concat(s)),"_").concat(l),g}return U(n,t),n})(qn),yD=(function(t){function n(e){var r=e.deviceId,i=e.statLogs,a=t.call(this)||this;return a.method=ye.POST,a.path="".concat(Y9),a.params={device_id:r,log_entries:i.map((function(s){return qn.payloadify(s)}))},a}return U(n,t),n})(Ee),Sj=(function(t){function n(e){var r=e.deviceId,i=e.cacheContext,a=e.requestQueue;return t.call(this,{deviceId:r,cacheContext:i,requestQueue:a})||this}return U(n,t),Object.defineProperty(n.prototype,"_isSendable",{get:function(){return this.queue.length!==0&&Date.now()-this.logInfo.lastFlushedAt>=this.statConfig.minInterval},enumerable:!1,configurable:!0}),n.prototype.init=function(e){return S(this,void 0,void 0,(function(){return T(this,(function(r){switch(r.label){case 0:return[4,t.prototype.init.call(this,e+".daily")];case 1:return r.sent(),this.queue=this.logInfo.statLogs.map((function(i){return new qn({type:i.stat_type,ts:i.ts,data:i.data})})),[2]}}))}))},n.prototype.setConfig=function(e,r){return S(this,void 0,void 0,(function(){var i,a,s,l;return T(this,(function(c){switch(c.label){case 0:return this.statConfig=e,this.statConfig.minInterval=864e5,this._mergeQueue(),r.localCacheStat?(this.enabledState=r.enabledStat?ur.ENABLED:ur.COLLECT_ONLY,[3,3]):[3,1];case 1:return this.enabledState=ur.DISABLED,[4,this.clear()];case 2:c.sent(),c.label=3;case 3:return this.isEnabled&&this._isSendable?[4,this._getUploadStats()]:[3,9];case 4:i=c.sent(),a=Math.max(Math.floor(Math.random()*this.statConfig.requestDelayRange),100),s=0,c.label=5;case 5:return s<i.length?(l=i.slice(s,1+this.statConfig.maxStatCountPerRequest),[4,ya(a)]):[3,9];case 6:return c.sent(),[4,this._flush(l)];case 7:c.sent(),c.label=8;case 8:return s+=this.statConfig.maxStatCountPerRequest,[3,5];case 9:return[2]}}))}))},n.prototype.put=function(e){return S(this,void 0,void 0,(function(){var r,i,a,s;return T(this,(function(l){switch(l.label){case 0:return this.enabledState===ur.DISABLED?[2,!0]:(r=this.enabledState===ur.PENDING||this.isFlushing?this.flushWaitQueue:this.queue,i=Ye(r.filter((function(c){return c instanceof O0&&c.key===e.key})),1),(a=i[0])?a.data=_D(a.data,e.data):r.push(e),this.enabledState===ur.PENDING?[3,2]:[4,this._save()]);case 1:l.sent(),l.label=2;case 2:return this.isEnabled?(this._mergeQueue(),this._isSendable?[4,this._getUploadStats()]:[3,5]):[3,5];case 3:return s=l.sent(),[4,this._flush(s)];case 4:return[2,l.sent()];case 5:return[2,!0]}}))}))},n.prototype._getUploadStats=function(){return S(this,void 0,void 0,(function(){var e;return T(this,(function(r){return e=this.queue.filter((function(i){if(i instanceof O0){var a=new Date,s=Ye([i.date.getFullYear(),a.getFullYear()],2),l=s[0],c=s[1];if(l<c)return!0;if(l===c){var d=Ye([i.date.getMonth(),a.getMonth()],2),p=d[0],g=d[1];if(p<g)return!0;if(p===g){var _=Ye([i.date.getDate(),a.getDate()],2);return _[0]<_[1]}}}return!1})),[2,e]}))}))},n.prototype._flush=function(e){return S(this,void 0,void 0,(function(){var r,i,a,s;return T(this,(function(l){switch(l.label){case 0:if(r=!0,!(e.length>0))return[3,10];if(this.isFlushing)return[3,9];this.isFlushing=!0,l.label=1;case 1:return l.trys.push([1,4,8,9]),i=Je([],Ye(e),!1).slice(0,Math.min(this.limit,this.statConfig.maxStatCountPerRequest)),a=new yD({deviceId:this.deviceId,statLogs:i}),[4,this.requestQueue.send(a)];case 2:return l.sent(),this.queue=Je([],Ye(e),!1).slice(i.length).concat(this.flushWaitQueue),this.flushWaitQueue=[],this.limit=Z1,this.logInfo.lastFlushedAt=Date.now(),[4,this._save()];case 3:return l.sent(),[3,9];case 4:return(s=l.sent())instanceof X?s.code!==ze.NON_AUTHORIZED?[3,6]:[4,this.clear()]:[3,7];case 5:return l.sent(),this.enabledState=ur.DISABLED,[3,7];case 6:s.code===ze.STAT_UPLOAD_NOT_ALLOWED&&(this.enabledState=ur.COLLECT_ONLY),l.label=7;case 7:return this.limit=this.limit+20,r=!1,[3,9];case 8:return this.isFlushing=!1,[7];case 9:return[3,11];case 10:this.isFlushing=!1,l.label=11;case 11:return[2,r]}}))}))},n})(iS),Aj=(function(t){function n(e){var r=e.deviceId,i=e.cacheContext,a=e.requestQueue;return t.call(this,{deviceId:r,cacheContext:i,requestQueue:a})||this}return U(n,t),n.prototype._isSendable=function(e){if(e===void 0&&(e=!1),this.queue.length<this.statConfig.lowerThreshold)return!1;if(e){if(Date.now()-this.logInfo.lastFlushedAt<this.statConfig.minInterval)return!1}else if(this.queue.length<this.statConfig.minStatCount)return!1;return!0},n.prototype._filterQueueByType=function(e,r){return S(this,void 0,void 0,(function(){return T(this,(function(i){return[2,r?e.filter((function(a){return a.type!==An.FEATURE_LOCALCACHE_EVENT})):e.filter((function(a){return a.type===An.FEATURE_LOCALCACHE_EVENT}))]}))}))},n.prototype.init=function(e){return S(this,void 0,void 0,(function(){return T(this,(function(r){switch(r.label){case 0:return[4,t.prototype.init.call(this,e+".default")];case 1:return r.sent(),this.queue=this.logInfo.statLogs.map((function(i){return i.data=z({message_init_policy:"",starting_point:0},i.data),new qn({type:i.stat_type,ts:i.ts,data:i.data})})),[2]}}))}))},n.prototype.setConfig=function(e,r){return S(this,void 0,void 0,(function(){var i,a,s,l;return T(this,(function(c){switch(c.label){case 0:return this.statConfig=e,this._mergeQueue(),r.requestStat||r.localCacheStat?(this.enabledState=r.enabledStat?ur.ENABLED:ur.COLLECT_ONLY,i=void 0,r.requestStat||(i=!1),r.localCacheStat||(i=!0),i===void 0?[3,3]:(a=this,[4,this._filterQueueByType(this.queue,i)])):[3,4];case 1:return a.queue=c.sent(),s=this,[4,this._filterQueueByType(this.flushWaitQueue,i)];case 2:s.flushWaitQueue=c.sent(),this._save(),c.label=3;case 3:return[3,6];case 4:return this.enabledState=ur.DISABLED,[4,this.clear()];case 5:c.sent(),c.label=6;case 6:return this.isEnabled&&this._isSendable(!0)?(l=Math.max(Math.floor(Math.random()*this.statConfig.requestDelayRange),100),[4,ya(l)]):[3,9];case 7:return c.sent(),[4,this._flush(this.queue)];case 8:c.sent(),c.label=9;case 9:return[2]}}))}))},n.prototype.put=function(e){return S(this,void 0,void 0,(function(){var r;return T(this,(function(i){switch(i.label){case 0:return this.enabledState===ur.DISABLED?[2,!0]:((r=this.enabledState===ur.PENDING||this.isFlushing?this.flushWaitQueue:this.queue).push(e),this.enabledState===ur.PENDING?[3,2]:[4,this._save()]);case 1:i.sent(),i.label=2;case 2:return this.isEnabled?(this._mergeQueue(),this._isSendable()?[4,this._flush(r)]:[3,4]):[3,4];case 3:return[2,i.sent()];case 4:return[2,!0]}}))}))},n.prototype._flush=function(e){return S(this,void 0,void 0,(function(){var r,i,a,s;return T(this,(function(l){switch(l.label){case 0:if(r=!0,!(e.length>0))return[3,10];if(this.isFlushing)return[3,9];this.isFlushing=!0,l.label=1;case 1:return l.trys.push([1,4,8,9]),i=Je([],Ye(e),!1).slice(0,Math.min(this.limit,this.statConfig.maxStatCountPerRequest)),a=new yD({deviceId:this.deviceId,statLogs:i}),[4,this.requestQueue.send(a)];case 2:return l.sent(),this.queue=Je([],Ye(e),!1).slice(i.length).concat(this.flushWaitQueue),this.flushWaitQueue=[],this.limit=Z1,this.logInfo.lastFlushedAt=Date.now(),[4,this._save()];case 3:return l.sent(),[3,9];case 4:return(s=l.sent())instanceof X?s.code!==ze.NON_AUTHORIZED?[3,6]:[4,this.clear()]:[3,7];case 5:return l.sent(),this.enabledState=ur.DISABLED,[3,7];case 6:s.code===ze.STAT_UPLOAD_NOT_ALLOWED&&(this.enabledState=ur.COLLECT_ONLY),l.label=7;case 7:return this.limit=this.limit+20,r=!1,[3,9];case 8:return this.isFlushing=!1,[7];case 9:return[3,11];case 10:this.isFlushing=!1,l.label=11;case 11:return[2,r]}}))}))},n})(iS),Ij=(function(t){function n(e){var r=e.deviceId,i=e.statLogs,a=t.call(this)||this;return a.method=ye.POST,a.path="".concat(Q9),a.params={device_id:r,log_entries:i.map((function(s){return qn.payloadify(s)}))},a}return U(n,t),n})(Ee),Mj=(function(t){function n(e){var r=e.deviceId,i=e.cacheContext,a=e.requestQueue;return t.call(this,{deviceId:r,cacheContext:i,requestQueue:a})||this}return U(n,t),Object.defineProperty(n.prototype,"_isSendable",{get:function(){return this.queue.length>=this.statConfig.minStatCount&&this.queue.length>this.statConfig.lowerThreshold||this.logInfo.lastFlushedAt>0&&Date.now()-this.logInfo.lastFlushedAt>=this.statConfig.minInterval},enumerable:!1,configurable:!0}),n.prototype.init=function(e){return S(this,void 0,void 0,(function(){return T(this,(function(r){switch(r.label){case 0:return[4,t.prototype.init.call(this,e+".realtime")];case 1:return r.sent(),this.queue=this.logInfo.statLogs.map((function(i){var a;return i.data=Le(z(z({},i.data),{message_id:(a=i.data.notificationId)!==null&&a!==void 0?a:i.data.message_id,notificationId:void 0})),new qn({type:i.stat_type,ts:i.ts,data:i.data})})),this._sentLogStats=this.queue.map((function(i){var a;return{channelUrl:i.data.channelUrl,messageId:(a=i.data.notificationId)!==null&&a!==void 0?a:i.data.message_id,action:i.data.action}})),[2]}}))}))},n.prototype.setConfig=function(e,r){return S(this,void 0,void 0,(function(){var i;return T(this,(function(a){switch(a.label){case 0:return this.statConfig=e,this._mergeQueue(),r.notificationStat?(this.enabledState=r.enabledStat?ur.ENABLED:ur.COLLECT_ONLY,[3,3]):[3,1];case 1:return this.enabledState=ur.DISABLED,[4,this.clear()];case 2:a.sent(),a.label=3;case 3:return this.isEnabled&&this._isSendable?(i=Math.max(Math.floor(Math.random()*this.statConfig.requestDelayRange),100),[4,ya(i)]):[3,6];case 4:return a.sent(),[4,this._flush(this.queue)];case 5:a.sent(),a.label=6;case 6:return[2]}}))}))},n.prototype.put=function(e){return S(this,void 0,void 0,(function(){var r;return T(this,(function(i){switch(i.label){case 0:return this.enabledState===ur.DISABLED?[2,!0]:(r=this.enabledState===ur.PENDING||this.isFlushing?this.flushWaitQueue:this.queue,this._isDuplicateStat(e)?[2,!0]:(r.push(e),this.enabledState===ur.PENDING?[3,2]:[4,this._save()]));case 1:i.sent(),i.label=2;case 2:return this.isEnabled?(this._mergeQueue(),this.isEnabled&&this._isSendable?[4,this._flush(r)]:[3,4]):[3,4];case 3:return[2,i.sent()];case 4:return[2,!0]}}))}))},n.prototype._flush=function(e){return S(this,void 0,void 0,(function(){var r,i,a,s;return T(this,(function(l){switch(l.label){case 0:if(r=!0,!(e.length>0))return[3,10];if(this.isFlushing)return[3,9];this.isFlushing=!0,l.label=1;case 1:return l.trys.push([1,4,8,9]),i=Je([],Ye(e),!1).slice(0,Math.min(this.limit,this.statConfig.maxStatCountPerRequest)),a=new Ij({deviceId:this.deviceId,statLogs:i}),[4,this.requestQueue.send(a)];case 2:return l.sent(),this.queue=Je([],Ye(e),!1).slice(i.length).concat(this.flushWaitQueue),this.flushWaitQueue=[],this.limit=Z1,this.logInfo.lastFlushedAt=Date.now(),[4,this._save()];case 3:return l.sent(),[3,9];case 4:return(s=l.sent())instanceof X?s.code!==ze.NON_AUTHORIZED?[3,6]:[4,this.clear()]:[3,7];case 5:return l.sent(),this.enabledState=ur.DISABLED,[3,7];case 6:s.code===ze.STAT_UPLOAD_NOT_ALLOWED&&(this.enabledState=ur.COLLECT_ONLY),l.label=7;case 7:return this.limit=this.limit+20,r=!1,[3,9];case 8:return this.isFlushing=!1,[7];case 9:return[3,11];case 10:this.isFlushing=!1,l.label=11;case 11:return[2,r]}}))}))},n})(iS),Oj=(function(){function t(n){var e=n.cacheContext,r=n.requestQueue,i=n.dispatcher,a=n.logger;this._collectRequestStat=!0,this._collectFeatureLocalCacheStat=!0,this._collectionNotificationStat=!0,this._retryCount=0,this.deviceId=So(),this.cacheContext=e,this.requestQueue=r,this.dispatcher=i,this.logger=a,this._dailyStatCollector=new Sj({deviceId:this.deviceId,cacheContext:this.cacheContext,requestQueue:this.requestQueue}),this._defaultStatCollector=new Aj({deviceId:this.deviceId,cacheContext:this.cacheContext,requestQueue:this.requestQueue}),this._notificationStatCollector=new Mj({deviceId:this.deviceId,cacheContext:this.cacheContext,requestQueue:this.requestQueue})}return t.prototype._migration=function(){return S(this,void 0,void 0,(function(){var n,e,r,i;return T(this,(function(a){switch(a.label){case 0:return[4,this.cacheContext.preference.get(this.key)];case 1:return(n=a.sent())?(e=[],n.statLogs.forEach((function(s){s.stat_type===An.FEATURE_LOCALCACHE&&e.push(new qn({type:s.stat_type,ts:s.ts,data:s.data}))})),[4,this.cacheContext.preference.set(this.key+".daily",{deviceId:n.deviceId,statLogs:e.map((function(s){return qn.payloadify(s)})),generation:n.generation,lastFlushedAt:n.lastFlushedAt})]):[3,6];case 2:return a.sent(),r=[],n.statLogs.forEach((function(s){s.stat_type!==An.FEATURE_LOCALCACHE&&s.stat_type!==An.NOTIFICATION&&(s.stat_type===An.FEATURE_LOCALCACHE_EVENT&&(s.data=z({message_init_policy:"",starting_point:0},s.data)),r.push(new qn({type:s.stat_type,ts:s.ts,data:s.data})))})),[4,this.cacheContext.preference.set(this.key+".default",{deviceId:n.deviceId,statLogs:r.map((function(s){return qn.payloadify(s)})),generation:n.generation,lastFlushedAt:n.lastFlushedAt})];case 3:return a.sent(),i=[],n.statLogs.forEach((function(s){var l;s.stat_type===An.NOTIFICATION&&(s.data=Le(z(z({},s.data),{message_id:(l=s.data.notificationId)!==null&&l!==void 0?l:s.data.message_id,notificationId:void 0})),i.push(new qn({type:s.stat_type,ts:s.ts,data:s.data})))})),[4,this.cacheContext.preference.set(this.key+".realtime",{deviceId:n.deviceId,statLogs:i.map((function(s){return qn.payloadify(s)})),generation:n.generation,lastFlushedAt:n.lastFlushedAt})];case 4:return a.sent(),[4,this.cacheContext.preference.remove(this.key)];case 5:a.sent(),a.label=6;case 6:return[2]}}))}))},t.prototype.init=function(n){return S(this,void 0,void 0,(function(){var e=this;return T(this,(function(r){switch(r.label){case 0:return this.key=n,[4,this._migration()];case 1:return r.sent(),[4,this._dailyStatCollector.init(this.key)];case 2:return r.sent(),[4,this._defaultStatCollector.init(this.key)];case 3:return r.sent(),[4,this._notificationStatCollector.init(this.key)];case 4:return r.sent(),this.commandEventContext||(this.commandEventContext=this.dispatcher.on((function(i){return S(e,void 0,void 0,(function(){var a,s,l,c,d,p;return T(this,(function(g){return i instanceof Dc?(a=i.statLog,this.put(a)):i instanceof hD&&(s=i.request,l=i.features,c=i.options,d=i.statConfigInfo,this._retryCount=0,this._collectRequestStat=s,this._collectFeatureLocalCacheStat=l?.localCache,this._collectionNotificationStat=l?.notification,this._statConfig=d,this._dailyStatCollector.setConfig(this._statConfig.default,{localCacheStat:this._collectFeatureLocalCacheStat,enabledStat:c.ingestion}),this._defaultStatCollector.setConfig(this._statConfig.default,{requestStat:this._collectRequestStat,localCacheStat:this._collectFeatureLocalCacheStat,enabledStat:c.ingestion}),this._notificationStatCollector.setConfig((p=this._statConfig.realTime)!==null&&p!==void 0?p:this._statConfig.default,{notificationStat:this._collectionNotificationStat,enabledStat:c.ingestion})),[2]}))}))}))),[2]}}))}))},t.prototype.put=function(n){return S(this,void 0,void 0,(function(){var e;return T(this,(function(r){switch(r.label){case 0:return e=!0,n instanceof O0?this._collectFeatureLocalCacheStat?[4,this._dailyStatCollector.put(n)]:[3,2]:[3,3];case 1:e=r.sent(),r.label=2;case 2:return[3,13];case 3:switch(n.type){case An.API_RESULT:case An.WEBSOCKET_CONNECT:case An.WEBSOCKET_DISCONNECT:return[3,4];case An.FEATURE_LOCALCACHE:case An.FEATURE_LOCALCACHE_EVENT:return[3,7];case An.NOTIFICATION:return[3,10]}return[3,13];case 4:return this._collectRequestStat?[4,this._defaultStatCollector.put(n)]:[3,6];case 5:e=r.sent(),r.label=6;case 6:return[3,13];case 7:return this._collectFeatureLocalCacheStat?[4,this._defaultStatCollector.put(n)]:[3,9];case 8:e=r.sent(),r.label=9;case 9:return[3,13];case 10:return this._collectionNotificationStat?[4,this._notificationStatCollector.put(n)]:[3,12];case 11:e=r.sent(),r.label=12;case 12:return[3,13];case 13:return e?this._retryCount=0:(this._retryCount++,this._retryCount>20&&(this._dailyStatCollector.enabledState=ur.COLLECT_ONLY,this._defaultStatCollector.enabledState=ur.COLLECT_ONLY,this._notificationStatCollector.enabledState=ur.COLLECT_ONLY,this.logger.debug(X.statLogUploadLimitExceededError))),[2]}}))}))},t.prototype.close=function(){this.commandEventContext&&(this.commandEventContext.close(),this.commandEventContext=void 0)},t})(),kj=(function(){function t(n){var e=n.limit,r=e===void 0?5:e;this.workersByKey={},this.limit=r}return t.prototype.run=function(n,e){return S(this,void 0,void 0,(function(){var r;return T(this,(function(i){switch(i.label){case 0:return this.workersByKey[n]||(this.workersByKey[n]=[]),this.workersByKey[n].length<this.limit?(this.workersByKey[n].push(e),[4,e()]):[3,2];case 1:return r=i.sent(),this.workersByKey[n].pop(),[2,r];case 2:throw X.tooManyRequests}}))}))},t.prototype.clear=function(n){this.workersByKey[n]=[]},t})();(function(t){t.DELIVERY_RECEIPT="delivery_receipt",t.PUSH_ACKNOWLEDGEMENT="push_acknowledgement"})(f1||(f1={}));var ge,Rj=(function(t){function n(){var e=t!==null&&t.apply(this,arguments)||this;return e._pushAckedCache={},e}return U(n,t),n.prototype.isAcked=function(e,r){var i,a="".concat(e,"_").concat(r);return(i=this._pushAckedCache[a])!==null&&i!==void 0&&i},n.prototype.markAsAcked=function(e,r){var i="".concat(e,"_").concat(r);this._pushAckedCache[i]=!0},n.prototype.clear=function(){W.of(this._iid).logger.debug("clear push acked cache"),this._pushAckedCache={}},n.prototype.parseData=function(e){var r,i,a,s,l=W.of(this._iid).logger,c=e.sendbird;if(typeof c=="string")try{c=JSON.parse(c)}catch{throw l.info("push notification payload does not contain sendbird payload in JSON format."),X.malformedDataError}if(!c||typeof c!="object")throw l.info("push notification payload does not contain sendbird payload in JSON format."),X.malformedDataError;var d=(r=c.push_tracking_id)!==null&&r!==void 0?r:"",p=c.notification_message_id,g=c.notification_channel_key,_=c.notification_template_key,y=c.notification_event_deadline,C=(i=c.session_key)!==null&&i!==void 0?i:{},w=(a=C?.key)!==null&&a!==void 0?a:"",A=(s=C?.topics)!==null&&s!==void 0?s:[];if(typeof d!="string"||d.length===0)throw l.info("push tracking id is not available"),X.malformedDataError;if(typeof p!="string"||p.length===0)throw l.info("message id is not available"),X.malformedDataError;return{pushTrackingId:d,sessionKey:w,sessionTopics:A,messageId:p,channelKey:g,templateKey:_,notificationEventDeadline:y}},n})(ei),hg=function(t){this.name=t.name,this._custom=t.custom,this._usedByModerationEngine=t.used_by_moderation_engine},Dj=(function(t){function n(){var e=t.call(this)||this;return e.method=ye.GET,e.path=Z9,e}return U(n,t),n})(Ee),xj=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.reportCategories=r.categories,i}return U(n,t),n})(Se),Pj=(function(t){function n(e){var r=t.call(this,e)||this;return r._categories=[],r}return U(n,t),n.prototype.categories=function(){return S(this,void 0,void 0,(function(){return T(this,(function(e){switch(e.label){case 0:return this._categories.length!==0?[3,2]:[4,this._fetchCategories()];case 1:e.sent(),e.label=2;case 2:return[2,this._categories]}}))}))},n.prototype._fetchCategories=function(){return S(this,void 0,void 0,(function(){var e,r,i,a,s;return T(this,(function(l){switch(l.label){case 0:return e=W.of(this._iid).requestQueue,r=new Dj,[4,e.send(r)];case 1:return i=l.sent(),(a=i.as(xj).reportCategories)&&(s=this._categories).push.apply(s,Je([],Ye(a.map((function(c){return new hg(c)}))),!1)),[2]}}))}))},n})(ei),Uj=(function(){function t(){this._enabledRequestDedup=!0,this._requestCache=new Map,this._requestDedupInterval=500}return Object.defineProperty(t.prototype,"requestDedupInterval",{set:function(n){this._requestDedupInterval=n,this._requestDedupInterval<=0?this._enabledRequestDedup=!1:n<50&&(this._requestDedupInterval=50)},enumerable:!1,configurable:!0}),t.prototype.normalizePath=function(n){return n.replace("/v3/sdk/","/v3/")},t.prototype._generateCacheKey=function(n){var e=n.path,r=n.time,i=n.params,a=this.normalizePath(e),s=i?Object.entries(i).sort((function(c,d){var p=Ye(c,1)[0],g=Ye(d,1)[0];return p.localeCompare(g)})).map((function(c){var d=Ye(c,2),p=d[0],g=d[1];return"".concat(p,"=").concat(JSON.stringify(g))})).join("&"):"",l=r?"_".concat(r):"";return"".concat(a,"?").concat(s).concat(l)},t.prototype.requestGetChannel=function(n,e,r,i){var a,s,l=this;if(i===void 0&&(i=!0),!this._enabledRequestDedup)return e();var c=Date.now(),d=this._generateCacheKey({path:n,params:r});if(i)try{for(var p=Re(this._requestCache.entries()),g=p.next();!g.done;g=p.next()){var _=Ye(g.value,2),y=_[0],C=_[1];if(y.startsWith(d)&&c-C.requestTime<=this._requestDedupInterval)return C.pendingResponse?Promise.resolve(C.pendingResponse):C.promise}}catch(I){a={error:I}}finally{try{g&&!g.done&&(s=p.return)&&s.call(p)}finally{if(a)throw a.error}}var w=i?this._generateCacheKey({path:n,time:c,params:r}):d,A=e().then((function(I){var D=l._requestCache.get(w);return D&&(D.pendingResponse=I,D.responseTime=Date.now()),Promise.resolve(I)})).catch((function(I){return Promise.reject(I)})).finally((function(){setTimeout((function(){l._requestCache.delete(w)}),l._requestDedupInterval)})),M={requestTime:c,responseTime:null,promise:A,pendingResponse:null};return this._requestCache.set(w,M),A},t.prototype.updatePendingResponse=function(n,e){var r,i;try{for(var a=Re(this._requestCache.entries()),s=a.next();!s.done;s=a.next()){var l=Ye(s.value,2),c=l[0],d=l[1];if(c.includes(n.url)&&d.pendingResponse&&d.responseTime<e){var p=d.pendingResponse.payload,g=n.constructor.payloadify(n,!0),_=z(z({},p),g);d.pendingResponse=new Se(n._iid,_);break}}}catch(y){r={error:y}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}},t})(),xf={},W=(function(){function t(n,e){var r,i,a,s,l,c,d,p,g;if(this.connectedAt=0,this.firstConnectedAt=0,this.connectionHandlers=new Map,this.userEventHandlers=new Map,!xf[n]){xf[n]=this;var _=(r=e.options)!==null&&r!==void 0?r:new kR,y=this.sdkState={appId:e.appId,appVersion:(i=e.appVersion)!==null&&i!==void 0?i:"",appState:"foreground",userId:void 0,extensions:{},api:{host:(a=e.apiHost)!==null&&a!==void 0?a:"https://api-".concat(e.appId,".sendbird.com")},websocket:{host:(s=e.websocketHost)!==null&&s!==void 0?s:"wss://ws-".concat(e.appId,".sendbird.com"),pingerDisabled:!!e.noPingpong,pingInterval:void 0,pongTimeout:void 0,connectMaxRetry:2,compression:!0,reconnectMaxRetry:-1,reconnectRetryStrategy:new pD,responseTimeout:_.websocketResponseTimeout},sessionTokenRefreshTimeout:_.sessionTokenRefreshTimeout};this.appInfo=void 0,this.subscribedUnreadMessageCount={all:0,feed:0,customTypes:{},ts:0};var C=this.logger=e.logger;this.connectedAt=0,this.firstConnectedAt=0,this.connectionHandlers=new Map,this.userEventHandlers=new Map,typeof e.localCacheEnabled=="string"&&(e.localCacheEnabled=e.localCacheEnabled==="true");var w=this.cacheContext=new L9({encryption:e.encryption,store:e.store,localCacheEnabled:(l=e.localCacheEnabled)!==null&&l!==void 0&&l,localCacheConfig:(c=e.localCacheConfig)!==null&&c!==void 0?c:new DR});this.debugMode=(d=e.debugMode)!==null&&d!==void 0&&d,this.maxSuperGroupChannelUnreadCount=ch.DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL,this.useMemberInfoInMessage=_.useMemberInfoInMessage,this.typingIndicatorInvalidateTime=_.typingIndicatorInvalidateTime,this.typingIndicatorThrottle=_.typingIndicatorThrottle,this.concurrentCallLimit=void 0,this.backOffDelay=void 0;var A=this.dispatcher=new j9,M=new H9;this.requestQueue=new Nj(n,{session:M,sdkState:y,dispatcher:A,logger:C,useFetchCompat:e.useFetchCompat}),this.pushNotificationAckManager=new Rj(n),this.sessionManager=new Tj({_iid:n,session:M,cacheContext:w,sdkState:y,dispatcher:A,requestQueue:this.requestQueue,logger:C,pushNotificationAckManager:this.pushNotificationAckManager}),this.connectionManager=new _j(n,{sdkState:y,cacheContext:this.cacheContext,connectionHandlers:this.connectionHandlers,dispatcher:A,sessionManager:this.sessionManager,websocketClient:this.requestQueue.commandRouter.websocketClient,disableWebSocketCloseEventHandling:(p=e.disableWebSocketCloseEventHandling)!==null&&p!==void 0&&p,logger:C}),this.statManager=new Oj({cacheContext:this.cacheContext,requestQueue:this.requestQueue,dispatcher:this.dispatcher,logger:C}),this.appStateToggleEnabled=(g=e.appStateToggleEnabled)===null||g===void 0||g,this.messageBackgroundSyncThrottleController=new kj({limit:5}),this.reportCategoryManager=new Pj(n),this.requestDeduplicator=new Uj}return xf[n]}return t.of=function(n){if(xf[n])return xf[n];throw X.lostInstance},t.clear=function(n){xf[n]&&delete xf[n]},t.prototype.hasExtension=function(n){return this.sdkState.extensions&&this.sdkState.extensions[n]},t})(),J1=(function(){function t(){}return t.prototype.init=function(n,e){var r=e.sdkState,i=e.dispatcher,a=e.sessionManager,s=e.requestQueue,l=e.logger;e.onlineDetector;var c=e.cacheContext;this._iid=n,this._cacheContext=c,this._sdkState=r,this._dispatcher=i,this._sessionManager=a,this._requestQueue=s,this._logger=l},t})();(function(t){t.UNKNOWN="UNKNOWN",t.EVENT_CHANNEL_CREATED="EVENT_CHANNEL_CREATED",t.EVENT_CHANNEL_UPDATED="EVENT_CHANNEL_UPDATED",t.EVENT_CHANNEL_DELETED="EVENT_CHANNEL_DELETED",t.EVENT_CHANNEL_READ="EVENT_CHANNEL_READ",t.EVENT_CHANNEL_UNREAD="EVENT_CHANNEL_UNREAD",t.EVENT_CHANNEL_DELIVERED="EVENT_CHANNEL_DELIVERED",t.EVENT_CHANNEL_INVITED="EVENT_CHANNEL_INVITED",t.EVENT_CHANNEL_JOINED="EVENT_CHANNEL_JOINED",t.EVENT_CHANNEL_LEFT="EVENT_CHANNEL_LEFT",t.EVENT_CHANNEL_ACCEPTED_INVITE="EVENT_CHANNEL_ACCEPTED_INVITE",t.EVENT_CHANNEL_DECLINED_INVITE="EVENT_CHANNEL_DECLINED_INVITE",t.EVENT_CHANNEL_OPERATOR_UPDATED="EVENT_CHANNEL_OPERATOR_UPDATED",t.EVENT_CHANNEL_BANNED="EVENT_CHANNEL_BANNED",t.EVENT_CHANNEL_UNBANNED="EVENT_CHANNEL_UNBANNED",t.EVENT_CHANNEL_MUTED="EVENT_CHANNEL_MUTED",t.EVENT_CHANNEL_UNMUTED="EVENT_CHANNEL_UNMUTED",t.EVENT_CHANNEL_FROZEN="EVENT_CHANNEL_FROZEN",t.EVENT_CHANNEL_UNFROZEN="EVENT_CHANNEL_UNFROZEN",t.EVENT_CHANNEL_HIDDEN="EVENT_CHANNEL_HIDDEN",t.EVENT_CHANNEL_UNHIDDEN="EVENT_CHANNEL_UNHIDDEN",t.EVENT_CHANNEL_RESET_HISTORY="EVENT_CHANNEL_RESET_HISTORY",t.EVENT_CHANNEL_TYPING_STATUS_UPDATE="EVENT_CHANNEL_TYPING_STATUS_UPDATE",t.EVENT_CHANNEL_MEMBER_COUNT_UPDATED="EVENT_CHANNEL_MEMBER_COUNT_UPDATED",t.EVENT_CHANNEL_METADATA_CREATED="EVENT_CHANNEL_METADATA_CREATED",t.EVENT_CHANNEL_METADATA_UPDATED="EVENT_CHANNEL_METADATA_UPDATED",t.EVENT_CHANNEL_METADATA_DELETED="EVENT_CHANNEL_METADATA_DELETED",t.EVENT_CHANNEL_METACOUNTER_CREATED="EVENT_CHANNEL_METACOUNTER_CREATED",t.EVENT_CHANNEL_METACOUNTER_UPDATED="EVENT_CHANNEL_METACOUNTER_UPDATED",t.EVENT_CHANNEL_METACOUNTER_DELETED="EVENT_CHANNEL_METACOUNTER_DELETED",t.EVENT_MESSAGE_SENT="EVENT_MESSAGE_SENT",t.EVENT_MESSAGE_RECEIVED="EVENT_MESSAGE_RECEIVED",t.EVENT_MESSAGE_UPDATED="EVENT_MESSAGE_UPDATED",t.EVENT_PINNED_MESSAGE_UPDATED="EVENT_PINNED_MESSAGE_UPDATED",t.REQUEST_CHANNEL="REQUEST_CHANNEL",t.REQUEST_CHANNEL_CHANGELOGS="REQUEST_CHANNEL_CHANGELOGS",t.REFRESH_CHANNEL="REFRESH_CHANNEL",t.CHANNEL_LASTACCESSEDAT_UPDATED="CHANNEL_LASTACCESSEDAT_UPDATED",t.SYNC_CHANNEL_BACKGROUND="SYNC_CHANNEL_BACKGROUND",t.SYNC_CHANNEL_CHANGELOGS="SYNC_CHANNEL_CHANGELOGS",t.EVENT_MESSAGE_SENT_SUCCESS="EVENT_MESSAGE_SENT_SUCCESS",t.EVENT_MESSAGE_SENT_FAILED="EVENT_MESSAGE_SENT_FAILED",t.EVENT_MESSAGE_SENT_PENDING="EVENT_MESSAGE_SENT_PENDING",t.EVENT_MESSAGE_DELETED="EVENT_MESSAGE_DELETED",t.EVENT_MESSAGE_FEEDBACK_ADDED="EVENT_MESSAGE_FEEDBACK_ADDED",t.EVENT_MESSAGE_FEEDBACK_UPDATED="EVENT_MESSAGE_FEEDBACK_UPDATED",t.EVENT_MESSAGE_FEEDBACK_DELETED="EVENT_MESSAGE_FEEDBACK_DELETED",t.EVENT_MESSAGE_READ="EVENT_MESSAGE_READ",t.EVENT_MESSAGE_DELIVERED="EVENT_MESSAGE_DELIVERED",t.EVENT_MESSAGE_REACTION_UPDATED="EVENT_MESSAGE_REACTION_UPDATED",t.EVENT_MESSAGE_THREADINFO_UPDATED="EVENT_MESSAGE_THREADINFO_UPDATED",t.EVENT_MESSAGE_OFFSET_UPDATED="EVENT_MESSAGE_OFFSET_UPDATED",t.REQUEST_MESSAGE="REQUEST_MESSAGE",t.EVENT_THREAD_INFO_UPDATED="EVENT_THREADINFO_UPDATED",t.EVENT_POLL_UPDATED="EVENT_POLL_UPDATED",t.EVENT_POLL_VOTED="EVENT_POLL_VOTED",t.SYNC_POLL_CHANGELOGS="SYNC_POLL_CHANGELOGS",t.EVENT_CHANNEL_CSAT_SUBMITTED="EVENT_CHANNEL_CSAT_SUBMITTED",t.EVENT_CHANNEL_CONVERSATION_HANDEDOFF="EVENT_CHANNEL_CONVERSATION_HANDEDOFF",t.REQUEST_RESEND_MESSAGE="REQUEST_RESEND_MESSAGE",t.REQUEST_THREADED_MESSAGE="REQUEST_THREADED_MESSAGE",t.REQUEST_MESSAGE_CHANGELOGS="REQUEST_MESSAGE_CHANGELOGS",t.SYNC_MESSAGE_FILL="SYNC_MESSAGE_FILL",t.SYNC_MESSAGE_BACKGROUND="SYNC_MESSAGE_BACKGROUND",t.SYNC_MESSAGE_CHANGELOGS="SYNC_MESSAGE_CHANGELOGS",t.LOCAL_MESSAGE_PENDING_CREATED="LOCAL_MESSAGE_PENDING_CREATED",t.LOCAL_MESSAGE_FAILED="LOCAL_MESSAGE_FAILED",t.LOCAL_MESSAGE_CANCELED="LOCAL_MESSAGE_CANCELED",t.LOCAL_MESSAGE_RESEND_STARTED="LOCAL_MESSAGE_RESEND_STARTED"})(ge||(ge={}));var Eg;z({},ge);var Sc=function(t){return t.startsWith("EVENT_")||t.startsWith("LOCAL_MESSAGE_")||t===ge.SYNC_MESSAGE_FILL||t===ge.SYNC_MESSAGE_CHANGELOGS||t===ge.SYNC_POLL_CHANGELOGS},lr=(function(t){function n(e){var r=e.messages,i=e.source,a=e.isWebSocketEventComing,s=a!==void 0&&a,l=t.call(this)||this;return l.messages=r,l.source=i,l.isWebSocketEventComing=s,l}return U(n,t),n})(kn),aS=(function(t){function n(e){var r=e.messageIds,i=e.source,a=e.isWebSocketEventComing,s=a!==void 0&&a,l=t.call(this)||this;return l.messageIds=r,l.source=i,l.isWebSocketEventComing=s,l}return U(n,t),n})(kn),bD=(function(t){function n(e){var r=e.messageDeletionTimestamp,i=e.channelUrl,a=e.source,s=t.call(this)||this;return s.messageDeletionTimestamp=r,s.channelUrl=i,s.source=a,s}return U(n,t),n})(kn),ED=(function(t){function n(e){var r=e.event,i=e.source,a=e.isWebSocketEventComing,s=a!==void 0&&a,l=t.call(this)||this;return l.event=r,l.source=i,l.isWebSocketEventComing=s,l}return U(n,t),n})(kn),CD=(function(t){function n(e){var r=e.event,i=e.source,a=e.isWebSocketEventComing,s=a!==void 0&&a,l=t.call(this)||this;return l.event=r,l.source=i,l.isWebSocketEventComing=s,l}return U(n,t),n})(kn),wD=(function(t){function n(e){var r=e.reqId,i=e.source,a=t.call(this)||this;return a.reqId=r,a.source=i,a}return U(n,t),n})(kn),ND=(function(t){function n(e){var r=e.polls,i=e.source,a=t.call(this)||this;return a.polls=r,a.source=i,a}return U(n,t),n})(kn),sS=(function(t){function n(e){var r=e.event,i=e.source,a=t.call(this)||this;return a.event=r,a.source=i,a}return U(n,t),n})(kn),e2=(function(t){function n(e){var r=e.event,i=e.source,a=t.call(this)||this;return a.event=r,a.source=i,a}return U(n,t),n})(kn);(function(t){t.OPEN="open",t.CLOSED="closed"})(Eg||(Eg={}));var TD="removed",pN=function(t){switch(t){case"open":return Eg.OPEN;case"closed":return Eg.CLOSED;default:return null}},SD=function(t){return!t||!!t.text&&Q("string",t.text)},jE=(function(t){function n(e,r){var i,a,s,l,c,d,p,g=this;return(g=t.call(this,e)||this).pollId=0,g.id=0,g.text=null,g.voteCount=0,g.createdBy=null,g.createdAt=0,g.updatedAt=0,g._lastVotedAt=0,g.pollId=(i=r.poll_id)!==null&&i!==void 0?i:0,g.id=(a=r.id)!==null&&a!==void 0?a:0,g.text=(s=r.text)!==null&&s!==void 0?s:null,g.voteCount=(l=r.vote_count)!==null&&l!==void 0?l:0,g.createdBy=(c=r.created_by)!==null&&c!==void 0?c:null,g.createdAt=(d=r.created_at)!==null&&d!==void 0?d:0,g.updatedAt=(p=r.updated_at)!==null&&p!==void 0?p:0,g}return U(n,t),n.payloadify=function(e){return Le(Qe(z(z({},t.payloadify.call(this,e)),{vote_count:e.voteCount,poll_id:e.pollId,text:e.text,created_at:e.createdAt,id:e.id,created_by:e.createdBy,updated_at:e.updatedAt})))},n})(ei),al=(function(t){function n(e,r){var i,a,s,l,c,d,p,g,_,y,C,w,A,M=this;return(M=t.call(this,e)||this).id=0,M.title=null,M.createdAt=0,M.updatedAt=0,M.closeAt=-1,M.status=Eg.CLOSED,M.messageId=0,M.data=null,M.voterCount=-1,M.options=[],M.createdBy=null,M.allowUserSuggestion=!1,M.allowMultipleVotes=!1,M.votedPollOptionIds=[],M.id=(i=r.id)!==null&&i!==void 0?i:0,M.title=(a=r.title)!==null&&a!==void 0?a:null,M.createdAt=(s=r.created_at)!==null&&s!==void 0?s:0,M.updatedAt=(l=r.updated_at)!==null&&l!==void 0?l:0,M.closeAt=(c=r.close_at)!==null&&c!==void 0?c:-1,M.status=(d=pN(r.status))!==null&&d!==void 0?d:Eg.CLOSED,M.messageId=(p=r.message_id)!==null&&p!==void 0?p:0,M.data=(g=r.data)!==null&&g!==void 0?g:null,M.voterCount=(_=r.voter_count)!==null&&_!==void 0?_:-1,M.options=r.options?r.options.map((function(I){return new jE(M._iid,I)})):[],M.createdBy=(y=r.created_by)!==null&&y!==void 0?y:null,M.allowUserSuggestion=(C=r.allow_user_suggestion)!==null&&C!==void 0&&C,M.allowMultipleVotes=(w=r.allow_multiple_votes)!==null&&w!==void 0&&w,M.votedPollOptionIds=(A=r.voted_option_ids)!==null&&A!==void 0?A:[],M}return U(n,t),n.prototype._applyPollUpdatePayload=function(e){var r,i,a,s,l,c,d,p,g=this;this.title=(r=e.title)!==null&&r!==void 0?r:this.title,this.updatedAt=(i=e.updated_at)!==null&&i!==void 0?i:this.updatedAt,this.closeAt=(a=e.close_at)!==null&&a!==void 0?a:this.closeAt,this.status=(s=pN(e.status))!==null&&s!==void 0?s:this.status,this.data=(l=e.data)!==null&&l!==void 0?l:this.data,this.voterCount=(c=e.voter_count)!==null&&c!==void 0?c:this.voterCount,e.options&&(this.options=e.options.map((function(_){return new jE(g._iid,_)})),this.votedPollOptionIds=e.options.filter((function(_){return _.vote_count>0})).map((function(_){return _.id}))),this.allowUserSuggestion=(d=e.allow_user_suggestion)!==null&&d!==void 0?d:this.allowUserSuggestion,this.allowMultipleVotes=(p=e.allow_multiple_votes)!==null&&p!==void 0?p:this.allowMultipleVotes},n.payloadify=function(e){return Le(Qe(z(z({},t.payloadify.call(this,e)),{id:e.id,title:e.title,created_at:e.createdAt,updated_at:e.updatedAt,close_at:e.closeAt,status:e.status,message_id:e.messageId,data:e.data,voter_count:e.voterCount,options:e.options.map((function(r){return jE.payloadify(r)})),created_by:e.createdBy,allow_user_suggestion:e.allowUserSuggestion,allow_multiple_votes:e.allowMultipleVotes,voted_option_ids:e.votedPollOptionIds})))},n.prototype.applyPollUpdateEvent=function(e){var r=e._payload.poll;return!(!r||this.id!==r.id||r.updated_at<this.updatedAt)&&(this._applyPollUpdatePayload(r),!0)},n.prototype.applyPollVoteEvent=function(e){if(this.id!==e.pollId)return!1;var r=this.options,i=r.map((function(l){return l.id})),a=e._payload,s=Math.floor(a.ts/1e3);return a.updated_vote_counts.forEach((function(l){var c=i.indexOf(l.option_id);if(c>-1){var d=r[c];s>=d._lastVotedAt&&(d.voteCount=l.vote_count,d._lastVotedAt=s)}})),a.req_id&&a.voted_option_ids&&(this.votedPollOptionIds=a.voted_option_ids),typeof a.voter_count=="number"&&(this.voterCount=a.voter_count),!0},n.prototype.serialize=function(){return kg(this)},n})(ei),Yc=(function(){function t(n,e){var r;this.limit=20,this._isLoading=!1,this._hasNext=!0,this._token="",this._iid=n,this.limit=(r=e.limit)!==null&&r!==void 0?r:20}return Object.defineProperty(t.prototype,"hasNext",{get:function(){return this._hasNext},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLoading",{get:function(){return this._isLoading},enumerable:!1,configurable:!0}),t.prototype._validate=function(){return Q("number",this.limit)&&this.limit>0},t})(),Wu=(function(t){function n(e,r,i,a){var s=t.call(this,e,a)||this;return s.channelUrl=r,s.channelType=i,s}return U(n,t),n.prototype._validate=function(){return t.prototype._validate.call(this)&&Q("string",this.channelUrl)&&Nt(Rt,this.channelType)},n})(Yc),Lj=function(t){this.pollId=0,this.messageId=0,this.pollId=t.poll_id,this.messageId=t.message_id,this._payload=t},Fj=(function(t){function n(e){var r=e.title,i=e.optionTexts,a=e.data,s=e.allowUserSuggestion,l=e.allowMultipleVotes,c=e.closeAt,d=t.call(this)||this;return d.method=ye.POST,d.path=$l,d.params={title:r,options:i,data:a,allow_user_suggestion:s,allow_multiple_votes:l,close_at:c},d}return U(n,t),n})(Ee),Hj=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.poll=new al(e,r),i}return U(n,t),n})(Se),jj=(function(t){function n(e){var r=e.channelUrl,i=e.channelType,a=e.pollId,s=t.call(this)||this;return s.method=ye.GET,s.path="".concat($l,"/").concat(encodeURIComponent(a)),s.params={channel_url:r,channel_type:i},s}return U(n,t),n})(Ee),Gj=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.poll=new al(e,r),i}return U(n,t),n})(Se),Vj=(function(t){function n(e){var r=e.channelUrl,i=e.channelType,a=e.pollId,s=e.pollOptionId,l=t.call(this)||this;return l.method=ye.GET,l.path="".concat($l,"/").concat(encodeURIComponent(a),"/options/").concat(encodeURIComponent(s)),l.params={channel_url:r,channel_type:i},l}return U(n,t),n})(Ee),Bj=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.pollOption=new jE(e,r),i}return U(n,t),n})(Se),zj=(function(t){function n(e){var r=e.channelType,i=e.channelUrl,a=e.timestamp,s=e.token,l=t.call(this)||this;return l.method=ye.GET,l.path="".concat(Xt(r),"/").concat(encodeURIComponent(i),"/polls/changelogs"),l.params=Le({change_ts:a,token:s}),l}return U(n,t),n})(Ee),qj=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.updatedPolls=r.updated.map((function(a){return(function(s,l){return new al(s,l)})(e,a)})),i.deletedPollIds=r.deleted.map((function(a){return a})),i.hasMore=r.has_more,i.nextToken=r.next,i}return U(n,t),n})(Se),Wj={title:"",optionTexts:[],data:void 0,allowUserSuggestion:void 0,allowMultipleVotes:void 0,closeAt:-1},AD=function(t){return Q("string",t.title)&&(n=t.optionTexts,Tt("string",n)&&n.every((function(e){return e.trim()!==""})))&&SD(t.data)&&Q("boolean",t.allowUserSuggestion,!0)&&Q("boolean",t.allowMultipleVotes,!0)&&Q("number",t.closeAt,!0);var n},Kj={channelUrl:"",channelType:Rt.BASE,pollId:0,pollOptionId:0},ID=function(t){return Q("string",t.channelUrl)&&t.channelUrl!==""&&Nt(Rt,t.channelType)&&Q("number",t.pollId)&&t.pollId>0&&Q("number",t.pollOptionId)&&t.pollOptionId>0},Yj={channelUrl:"",channelType:Rt.BASE,pollId:0},MD=function(t){return Q("string",t.channelUrl)&&t.channelUrl!==""&&Nt(Rt,t.channelType)&&Q("number",t.pollId)},XI={},p1=(function(){function t(n,e){var r=e.sdkState,i=e.dispatcher,a=e.sessionManager,s=e.requestQueue,l=e.logger;this._iid=n,this._sdkState=r,this._sessionManager=a,this._requestQueue=s,this._dispatcher=i,this._logger=l,XI[n]=this}return t.of=function(n){return XI[n]},t.prototype.buildPollFromSerializedData=function(n){var e=Uc(n);return new al(this._iid,al.payloadify(e))},t.prototype.get=function(n){return S(this,void 0,void 0,(function(){var e,r;return T(this,(function(i){switch(i.label){case 0:return Te(MD(n)).throw(X.invalidParameters),e=new jj(z({},n)),[4,this._requestQueue.send(e)];case 1:return r=i.sent(),[2,r.as(Gj).poll]}}))}))},t.prototype.create=function(n){return S(this,void 0,void 0,(function(){var e,r;return T(this,(function(i){switch(i.label){case 0:return Te(AD(n)).throw(X.invalidParameters),e=new Fj(z({},n)),[4,this._requestQueue.send(e)];case 1:return r=i.sent(),[2,r.as(Hj).poll]}}))}))},t.prototype.getOption=function(n){return S(this,void 0,void 0,(function(){var e,r;return T(this,(function(i){switch(i.label){case 0:return Te(ID(n)).throw(X.invalidParameters),e=new Vj(z({},n)),[4,this._requestQueue.send(e)];case 1:return r=i.sent(),[2,r.as(Bj).pollOption]}}))}))},t.prototype.getPollChangeLogs=function(n,e,r,i){return i===void 0&&(i=ge.SYNC_POLL_CHANGELOGS),S(this,void 0,void 0,(function(){var a,s,l,c,d,p,g;return T(this,(function(_){switch(_.label){case 0:return a=new zj(Qe({channelType:e,channelUrl:n,timestamp:typeof r=="number"?r:null,token:typeof r=="string"?r:null})),[4,this._requestQueue.send(a)];case 1:return s=_.sent(),l=s.as(qj),c=l.updatedPolls,d=l.deletedPollIds,p=l.hasMore,g=l.nextToken,c.length>0&&this._dispatcher.dispatch(new ND({polls:c,source:i})),[2,{updatedPolls:c,deletedPollIds:d,hasMore:p,token:g}]}}))}))},t})(),Qj=(function(t){function n(e){var r=e.channelUrl,i=e.channelType,a=e.token,s=e.limit,l=t.call(this)||this;return l.method=ye.GET,l.path=$l,l.params={channel_url:r,channel_type:i,token:a,limit:s},l}return U(n,t),n})(Ee),$j=(function(t){function n(e,r){var i,a=this;return(a=t.call(this,e,r)||this).polls=((i=r.polls)!==null&&i!==void 0?i:[]).map((function(s){return new al(e,s)})),a.token=r.next,a}return U(n,t),n})(Se),OD=(function(t){function n(e,r){return t.call(this,e,r.channelUrl,r.channelType,r)||this}return U(n,t),n.prototype.next=function(){return S(this,void 0,void 0,(function(){var e,r,i,a,s,l;return T(this,(function(c){switch(c.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=W.of(this._iid).requestQueue,r=new Qj(z(z({},this),{token:this._token})),[4,e.send(r)]):[3,2]:[3,5];case 1:return i=c.sent(),a=i.as($j),s=a.polls,l=a.token,this._token=l,this._hasNext=!!l,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw X.queryInProgress;case 4:return[3,6];case 5:throw X.invalidParameters;case 6:return[2]}}))}))},n})(Wu),Xj=(function(t){function n(e){var r=e.channelUrl,i=e.channelType,a=e.pollId,s=e.pollOptionId,l=e.token,c=e.limit,d=t.call(this)||this;return d.method=ye.GET,d.path="".concat($l,"/").concat(encodeURIComponent(a),"/options/").concat(encodeURIComponent(s),"/voters"),d.params={channel_url:r,channel_type:i,token:l,limit:c},d}return U(n,t),n})(Ee),Zj=(function(t){function n(e,r){var i,a=this;return(a=t.call(this,e,r)||this).voters=((i=r.voters)!==null&&i!==void 0?i:[]).map((function(s){return new St(e,s)})),a.token=r.next,a}return U(n,t),n})(Se),kD=(function(t){function n(e,r){var i=t.call(this,e,r.channelUrl,r.channelType,r)||this;return i.pollId=r.pollId,i.pollOptionId=r.pollOptionId,i}return U(n,t),n.prototype._validate=function(){return t.prototype._validate.call(this)&&Q("number",this.pollId)&&Q("number",this.pollOptionId)},n.prototype.next=function(){return S(this,void 0,void 0,(function(){var e,r,i,a,s,l;return T(this,(function(c){switch(c.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=W.of(this._iid).requestQueue,r=new Xj(z(z({},this),{pollId:this.pollId,pollOptionId:this.pollOptionId,token:this._token})),[4,e.send(r)]):[3,2]:[3,5];case 1:return i=c.sent(),a=i.as(Zj),s=a.voters,l=a.token,this._token=l,this._hasNext=!!l,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw X.queryInProgress;case 4:return[3,6];case 5:throw X.invalidParameters;case 6:return[2]}}))}))},n})(Wu),vp,Qc=(function(){function t(n,e,r){var i,a;this.width=0,this.height=0,this.realWidth=0,this.realHeight=0,this._requireAuth=!1,this._iid=n,this.plainUrl=e.url,this.width=e.width,this.height=e.height,this.realWidth=(i=e.real_width)!==null&&i!==void 0?i:e.width,this.realHeight=(a=e.real_height)!==null&&a!==void 0?a:e.height,this._requireAuth=r}return t.payloadify=function(n){return Le(Qe(n instanceof t?{url:n.plainUrl,width:n.width,height:n.height,real_width:n.realWidth,real_height:n.realHeight}:{url:"",width:n.maxWidth,height:n.maxHeight,real_width:0,real_height:0}))},Object.defineProperty(t.prototype,"url",{get:function(){var n=W.of(this._iid).sessionManager;return this._requireAuth&&n.ekey?"".concat(this.plainUrl,"?auth=").concat(n.ekey):this.plainUrl},enumerable:!1,configurable:!0}),t})(),m1=(function(t){function n(e){var r=t.call(this)||this;if(r.method=ye.POST,r.path="".concat(V9),r.params=Le({file:e.file,channel_url:e.channelUrl}),e.thumbnailSizes)for(var i=0;i<e.thumbnailSizes.length;i++){var a=e.thumbnailSizes[i],s=a.maxWidth,l=a.maxHeight;r.params["thumbnail".concat(i+1)]="".concat(s,",").concat(l)}return r.requestId=e.requestId,r}return U(n,t),n})(Ee),g1=(function(t){function n(e,r){var i,a,s,l,c=this;return(c=t.call(this,e,r)||this).url=r.url,c.fileSize=(i=r.file_size)!==null&&i!==void 0?i:0,c.thumbnails=(s=(a=r.thumbnails)===null||a===void 0?void 0:a.map((function(d){return new Qc(e,d,!1)})))!==null&&s!==void 0?s:[],c.requireAuth=(l=r.require_auth)!==null&&l!==void 0&&l,c}return U(n,t),n})(Se),v1=(function(t){function n(e,r){var i,a,s,l,c,d=this;return(d=t.call(this,e)||this).replyCount=0,d.memberCount=0,d.lastRepliedAt=0,d.updatedAt=0,d.replyCount=(i=r.reply_count)!==null&&i!==void 0?i:0,d.memberCount=(a=r.member_count)!==null&&a!==void 0?a:0,d.mostRepliedUsers=r.most_replies&&Tt("object",r.most_replies)?r.most_replies.map((function(p){return new St(d._iid,p)})):[],d.unreadReplyCount=(s=r.unread_message_count)!==null&&s!==void 0?s:0,d.isPushNotificationEnabled=typeof r.push_enabled=="number"?r.push_enabled>0:void 0,d.lastRepliedAt=(l=r.last_replied_at)!==null&&l!==void 0?l:0,d.updatedAt=(c=r.updated_at)!==null&&c!==void 0?c:0,d}return U(n,t),n.payloadify=function(e){return Le(Qe(z(z({},t.payloadify.call(this,e)),{reply_count:e.replyCount,unread_message_count:e.unreadReplyCount,member_count:e.memberCount,most_replies:Array.isArray(e.mostRepliedUsers)?e.mostRepliedUsers.map((function(r){return St.payloadify(r)})):[],push_enabled:typeof e.isPushNotificationEnabled=="boolean"?e.isPushNotificationEnabled?1:0:void 0,last_replied_at:e.lastRepliedAt,updated_at:e.updatedAt})))},Object.defineProperty(n.prototype,"_isUpdateRequired",{get:function(){return this.unreadReplyCount===void 0||this.isPushNotificationEnabled===void 0},enumerable:!1,configurable:!0}),n.prototype._updateFrom=function(e){var r,i;this.unreadReplyCount=(r=e.unreadReplyCount)!==null&&r!==void 0?r:this.unreadReplyCount,this.isPushNotificationEnabled=(i=e.isPushNotificationEnabled)!==null&&i!==void 0?i:this.isPushNotificationEnabled},n})(ei);(function(t){t.ADD="add",t.DELETE="delete"})(vp||(vp={}));var ZI,oS=function(t){var n;this.messageId=0,this.operation=null,this.updatedAt=0;var e=Q("string",t.msg_id)?parseInt(t.msg_id):t.msg_id,r=t.user_id,i=t.operation?t.operation.toLowerCase():null,a=t.reaction,s=t.updated_at,l=t.count,c=t.sampled_user_ids,d=(n=t.sampled_user_info)!==null&&n!==void 0?n:{};e&&Q("string",r)&&Q("string",i)&&Nt(vp,i)&&Q("string",a)&&a&&Q("number",s)&&(this.messageId=e,this.userId=r,this.key=a,this.operation=i,this.updatedAt=s,this._count=l,this._sampledUserIds=c,this._sampledUserInfoList=d)},JC=(function(t){function n(e,r,i){var a,s=this;return(s=t.call(this,e)||this).userId=r,s.nickname=i.nickname,s.plainProfileUrl=i.profile_url,s.requireAuth=(a=i.require_auth_for_profile_image)!==null&&a!==void 0&&a,s}return U(n,t),Object.defineProperty(n.prototype,"profileUrl",{get:function(){var e=W.of(this._iid).sessionManager;return this.requireAuth&&e.ekey?"".concat(this.plainProfileUrl,"?auth=").concat(e.ekey):this.plainProfileUrl},enumerable:!1,configurable:!0}),n.payloadify=function(e){return{nickname:e.nickname,profile_url:e.plainProfileUrl,require_auth_for_profile_image:e.requireAuth}},n})(ei),S_=(function(t){function n(e,r){var i,a,s,l,c,d,p,g,_,y=this;(y=t.call(this,e)||this)._sampledUserInfoList=[],y._count=0,y._hasCurrentUserReacted=!1;var C=r.key,w=Je([],Ye((l=(s=r.sampled_user_ids)!==null&&s!==void 0?s:r.user_ids)!==null&&l!==void 0?l:[]),!1),A=(d=(c=r.last_ts)!==null&&c!==void 0?c:r.updated_at)!==null&&d!==void 0?d:0,M=(p=r.is_self_included)!==null&&p!==void 0?p:w.includes(W.of(e).sdkState.userId),I=(g=r.sampled_user_info)!==null&&g!==void 0?g:{};Q("string",C)&&C&&Tt("string",w)&&w.length>0&&Q("number",A)&&(y.key=C,y._sampledUserIds=w,y._updatedAt=A,y._count=(_=r.count)!==null&&_!==void 0?_:w.length,y._hasCurrentUserReacted=M,Object.keys(I).forEach((function(L){y._sampledUserInfoList.push(new JC(e,L,I[L]))})));var D={};try{for(var P=Re(y.sampledUserIds),H=P.next();!H.done;H=P.next())D[H.value]=y.updatedAt}catch(L){i={error:L}}finally{try{H&&!H.done&&(a=P.return)&&a.call(P)}finally{if(i)throw i.error}}return y._version=D,y}return U(n,t),Object.defineProperty(n.prototype,"isEmpty",{get:function(){return this._count===0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"userIds",{get:function(){return this._sampledUserIds},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"sampledUserIds",{get:function(){return this._sampledUserIds},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"sampledUserInfoList",{get:function(){return this._sampledUserInfoList},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"count",{get:function(){return this._count},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"updatedAt",{get:function(){return this._updatedAt},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hasCurrentUserReacted",{get:function(){return this._hasCurrentUserReacted},enumerable:!1,configurable:!0}),n.payloadify=function(e){var r={};return e._sampledUserInfoList.forEach((function(i){r[i.userId]=JC.payloadify(i)})),Le(Qe({key:e.key,sampled_user_ids:e._sampledUserIds,sampled_user_info:r,count:e._count,is_self_included:e._hasCurrentUserReacted,last_ts:e._updatedAt}))},n.prototype.applyEvent=function(e){var r=this;if(e.key===this.key&&this.updatedAt<=e.updatedAt)if(e._sampledUserIds)this._sampledUserIds=e._sampledUserIds,this._sampledUserInfoList=[],Object.keys(e._sampledUserInfoList).forEach((function(a){r._sampledUserInfoList.push(new JC(r._iid,a,e._sampledUserInfoList[a]))})),this._count=e._count,e._hasCurrentUserReacted!==void 0&&(this._hasCurrentUserReacted=e._hasCurrentUserReacted),this._updatedAt=e.updatedAt;else{if(!this._version[e.userId]||this._version[e.userId]<=e.updatedAt){var i=this._sampledUserIds.indexOf(e.userId);switch(e.operation){case vp.ADD:i<0&&this._sampledUserIds.push(e.userId);break;case vp.DELETE:i>=0&&this._sampledUserIds.splice(i,1)}this._count=this._sampledUserIds.length,this._version[e.userId]=e.updatedAt}this._updatedAt=Math.max(this.updatedAt,e.updatedAt)}},n})(ei),JI=(function(){function t(n){this.secureUrl=null,this.type=null,this.width=0,this.height=0,this.alt=null,this.url=n.url,n.secure_url&&(this.secureUrl=n.secure_url),n.type&&(this.type=n.type),n.width&&(this.width=n.width),n.height&&(this.height=n.height),n.alt&&(this.alt=n.alt)}return t.payloadify=function(n){var e,r;return Le(Qe({url:n.url,secure_url:n.secureUrl,type:n.type,width:(e=n.width)!==null&&e!==void 0?e:0,height:(r=n.height)!==null&&r!==void 0?r:0,alt:n.alt}))},t})(),eM=(function(){function t(n){this.title=null,this.url=null,this.description=null,this.defaultImage=null,n["og:title"]&&(this.title=n["og:title"]),n["og:url"]&&(this.url=n["og:url"]),n["og:description"]&&(this.description=n["og:description"]),n["og:image"]&&(this.defaultImage=new JI(n["og:image"]))}return t.payloadify=function(n){return Le(Qe({"og:title":n.title,"og:url":n.url,"og:description":n.description,"og:image":n.defaultImage?JI.payloadify(n.defaultImage):null}))},t})(),sl=(function(){function t(n){var e,r;this.volume=0,this.name=(e=n.name)!==null&&e!==void 0?e:"default",this.volume=(r=n.volume)!==null&&r!==void 0?r:1}return t.prototype.serialize=function(){return{name:this.name,volume:this.volume}},t.payloadify=function(n){return Le(Qe({name:n.name,volume:n.volume}))},t})();(function(t){t.GOOD="good",t.BAD="bad"})(ZI||(ZI={}));var ah=(function(){function t(n){this.id=n.id,this.rating=n.rating,this.comment=n.comment}return t._getStatus=function(n){return n?"id"in n?"SUBMITTED":"NO_FEEDBACK":"NOT_APPLICABLE"},t._isSubmitted=function(n){return t._getStatus(n)==="SUBMITTED"},t._getPayloadByStatus=function(n){return n==="NO_FEEDBACK"?{}:null},t.payloadify=function(n){return Le(Qe({id:n.id,rating:n.rating,comment:n.comment}))},t})(),Cg=(function(t){function n(e,r){var i,a=this;return(a=t.call(this,e,r)||this).isBlockedByMe=!1,a.role=Nt(Jo,r.role)?r.role:Jo.NONE,a.isBlockedByMe=(i=r.is_blocked_by_me)!==null&&i!==void 0&&i,a}return U(n,t),n.payloadify=function(e){return Le(Qe(z(z({},t.payloadify.call(this,e)),{role:e.role,is_blocked_by_me:e.isBlockedByMe})))},n})(St),wa=(function(){function t(n){this.key=n.key,this.value=Tt("string",n.value)?Je([],Ye(n.value),!1):[]}return t.payloadify=function(n){var e;return Le(Qe({key:n.key,value:(e=n.value)!==null&&e!==void 0?e:[]}))},t})(),RD=function(t){switch(t){case Hn.BASE:return"";case Hn.USER:return"MESG";case Hn.FILE:return"FILE";case Hn.ADMIN:return"ADMM"}},DD=(function(t){function n(e,r){var i,a,s,l,c,d,p,g,_,y=this;(y=t.call(this,e)||this).channelType=Rt.BASE,y.messageType=Hn.BASE,y.mentionType=null,y.mentionedUsers=null,y.mentionedUserIds=null,y.metaArrays=[],y.extendedMessage={},y.createdAt=0,y.updatedAt=0,y.channelUrl=r.channel_url,y.channelType=Nt(Rt,r.channel_type)?r.channel_type:Rt.GROUP,r.channel&&(r.channel.channel_url&&(y.channelUrl=r.channel.channel_url),r.channel.channel_type&&(y.channelType=r.channel.channel_type)),y.data=(i=r.data)!==null&&i!==void 0?i:"",y.customType=(a=r.custom_type)!==null&&a!==void 0?a:"",y.mentionType=Nt(ra,r.mention_type)?r.mention_type:null,y.mentionedUsers=r.mentioned_users?r.mentioned_users.map((function(I){return new St(y._iid,I)})):null,y.mentionedUserIds=(s=r.mentioned_user_ids)!==null&&s!==void 0?s:null,y.mentionedUsers&&!y.mentionedUserIds&&(y.mentionedUserIds=y.mentionedUsers.map((function(I){return I.userId})));var C=(l=r.metaarray)!==null&&l!==void 0?l:{},w=(c=r.metaarray_key_order)!==null&&c!==void 0?c:Object.keys(C).sort((function(I,D){return I.localeCompare(D)}));y.metaArrays=[];for(var A=0;A<w.length;A++){var M=w[A];y.metaArrays.push(new wa({key:M,value:C[M]||[]}))}return r.sorted_metaarray&&(y.metaArrays=r.sorted_metaarray.map((function(I){return new wa(I)}))),y.extendedMessage=(d=r.extended_message)!==null&&d!==void 0?d:{},y.extendedMessagePayload=r.extended_message_payload,y.createdAt=(g=(p=r.created_at)!==null&&p!==void 0?p:r.ts)!==null&&g!==void 0?g:0,y.updatedAt=(_=r.updated_at)!==null&&_!==void 0?_:0,y}return U(n,t),n.payloadify=function(e){var r,i;return Le(Qe(z(z({},t.payloadify.call(this,e)),{channel_url:e.channelUrl,channel_type:e.channelType,type:RD(e.messageType),data:e.data,custom_type:e.customType,mention_type:e.mentionType,mentioned_user_ids:e.mentionedUserIds,mentioned_users:(r=e.mentionedUsers)===null||r===void 0?void 0:r.map((function(a){return St.payloadify(a)})),sorted_metaarray:(i=e.metaArrays)===null||i===void 0?void 0:i.map((function(a){return wa.payloadify(a)})),extended_message:e.extendedMessage,extended_message_payload:e.extendedMessagePayload,created_at:e.createdAt,updated_at:e.updatedAt})))},n.prototype.isIdentical=function(e){return!0},n.prototype.isEqual=function(e){return OR(this,e)},n.prototype.isUserMessage=function(){return this.messageType===Hn.USER},n.prototype.isFileMessage=function(){return this.messageType===Hn.FILE&&!Object.prototype.hasOwnProperty.call(this,"fileInfoList")},n.prototype.isMultipleFilesMessage=function(){return this.messageType===Hn.FILE&&Object.prototype.hasOwnProperty.call(this,"fileInfoList")},n.prototype.isAdminMessage=function(){return this.messageType===Hn.ADMIN},n.prototype.serialize=function(){return kg(this)},n.prototype.getMetaArraysByKeys=function(e){return this.metaArrays.filter((function(r){return e.includes(r.key)}))},n})(ei),xD=(function(t){function n(e,r){var i,a,s,l=this;return(l=t.call(this,e)||this).channelUrl=(i=r.channel_url)!==null&&i!==void 0?i:"",l.channelType=(a=r.channel_type)!==null&&a!==void 0?a:Rt.GROUP,l.reader=new St(l._iid,r.user),l.readAt=r.ts,l.isExcluded=(s=r.is_excluded)!==null&&s!==void 0&&s,l}return U(n,t),n})(ei),Jj=(function(t){function n(e){var r=e.channelUrl;return t.call(this,{code:"READ",ackRequired:!0,payload:{channel_url:r}})||this}return U(n,t),n})(na),eG=(function(t){function n(e){var r=t.call(this)||this,i=e.channelUrl,a=e.channelType,s=e.userId,l=e.notificationIds,c=e.messageId,d=e.isExcluded,p=e.uniqueId;return r.method=ye.PUT,r.path="".concat(Xt(a),"/").concat(encodeURIComponent(i),"/messages/mark_as_read"),r.params=Le(Qe({user_id:s,message_ids:l,message_id:c,is_excluded:d,unique_id:p})),r}return U(n,t),n})(Ee),PD=(function(t){function n(e,r,i){var a=t.call(this,e,"READ",i)||this;return a.readStatus=new xD(e,i),a}return U(n,t),n})(Xn),tG=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.readAt=r.ts,i.unreadMessageCount=r.unread_message_count,i.totalUnreadCount=r.total_unread_count,i.channelUrl=r.channel_url,i.userId=r.user_id,i.isExcluded=r.is_excluded,i.uniqueId=r.unique_id,i}return U(n,t),n})(Se),nG=(function(t){function n(e){var r=e.channelUrl,i=e.messageId;return t.call(this,{code:"READ",ackRequired:!0,payload:{channel_url:r,parent_message_id:i}})||this}return U(n,t),n})(na),rG=(function(t){function n(e){var r=e.channelType,i=e.channelUrl,a=e.messageId,s=e.pushEnabled,l=t.call(this)||this;return l.method=ye.PUT,l.path="".concat(Xt(r),"/").concat(encodeURIComponent(i),"/messages/").concat(a,"/thread_push"),l.params={push_enabled:s},l}return U(n,t),n})(Ee);(function(t){function n(e,r){return t.call(this,e,r)||this}U(n,t)})(Se);var iG=(function(t){function n(e){var r=e.channelType,i=e.channelUrl,a=e.messageId,s=e.rating,l=e.comment,c=t.call(this)||this;return c.method=ye.POST,c.path="".concat(Xt(r),"/").concat(encodeURIComponent(i),"/messages/").concat(a,"/feedbacks"),c.params={rating:s,comment:l},c}return U(n,t),n})(Ee),aG=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.feedback=new ah(r),i}return U(n,t),n})(Se),sG=(function(t){function n(e){var r=e.channelType,i=e.channelUrl,a=e.messageId,s=e.feedbackId,l=e.rating,c=e.comment,d=t.call(this)||this;return d.method=ye.PUT,d.path="".concat(Xt(r),"/").concat(encodeURIComponent(i),"/messages/").concat(a,"/feedbacks/").concat(s),d.params={rating:l,comment:c},d}return U(n,t),n})(Ee),oG=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.feedback=new ah(r),i}return U(n,t),n})(Se),lG=(function(t){function n(e){var r=e.channelType,i=e.channelUrl,a=e.messageId,s=e.feedbackId,l=t.call(this)||this;return l.method=ye.DELETE,l.path="".concat(Xt(r),"/").concat(encodeURIComponent(i),"/messages/").concat(a,"/feedbacks/").concat(s),l}return U(n,t),n})(Ee);(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.feedback=new ah(r),i}U(n,t)})(Se);var Qf,tM,mN=(function(t){function n(e,r){var i,a,s,l,c,d=this;return(d=t.call(this,e)||this).plainUrl="",d.fileName=null,d.mimeType=null,d.fileSize=0,d.thumbnails=[],d._requireAuth=!1,d.plainUrl=(i=r.url)!==null&&i!==void 0?i:"",d.fileName=(a=r.file_name)!==null&&a!==void 0?a:null,d.mimeType=(s=r.file_type)!==null&&s!==void 0?s:null,d.fileSize=(l=r.file_size)!==null&&l!==void 0?l:0,d._requireAuth=(c=r.require_auth)!==null&&c!==void 0&&c,d.thumbnails=r.thumbnails?r.thumbnails.map((function(p){var g;return new Qc(d._iid,typeof p=="string"?{url:p,width:0,height:0}:z(z({},p),{url:((g=p.url)!==null&&g!==void 0?g:"").split("auth=")[0]}),d._requireAuth)})):[],d}return U(n,t),n.payloadify=function(e){var r;return Le(Qe({url:e.plainUrl,file_name:e.fileName,file_type:e.mimeType,file_size:e.fileSize,thumbnails:(r=e.thumbnails)===null||r===void 0?void 0:r.map((function(i){var a;return{url:((a=i.plainUrl)!==null&&a!==void 0?a:"").split("auth=")[0],width:i.width,height:i.height,real_width:i.realWidth,real_height:i.realHeight}})),require_auth:e._requireAuth}))},Object.defineProperty(n.prototype,"url",{get:function(){var e=W.of(this._iid).sessionManager;return this._requireAuth&&e.ekey?"".concat(this.plainUrl,"?auth=").concat(e.ekey):this.plainUrl},enumerable:!1,configurable:!0}),n})(ei),UD=function(t){var n=t.channelUrl,e=t.channelType,r=t.parentMessage;this.channelUrl=n,this.channelType=e,this.parentMessage=r};(function(t){t.NUMBER="number",t.ENUM="enum",t.TEXT="text",t.REGEX="regex",t.DECIMAL_PLACE="decimal_place"})(Qf||(Qf={})),(function(t){t.TEXT="text",t.TEXTAREA="textarea",t.NUMBER="number",t.PHONE="phone",t.EMAIL="email",t.CHIP="chip"})(tM||(tM={}));var lh,Eo,nM=(function(){function t(n,e){var r=e.id,i=e.name,a=e.items,s=e.version,l=e.is_submitted;this.messageId=n,this.id=r,this.name=i,this.items=a.map((function(c){return new rM(c)})).sort((function(c,d){return c.sortOrder-d.sortOrder})),this.version=s??1,this._isSubmitted=l}return Object.defineProperty(t.prototype,"isSubmitted",{get:function(){var n;return(n=this._isSubmitted)!==null&&n!==void 0?n:this.items.some((function(e){return Array.isArray(e.submittedValues)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSubmittable",{get:function(){return this.items.every((function(n){return n.required?!!(Array.isArray(n.draftValues)&&n.draftValues.length>0)&&n.isValid(n.draftValues):!(Array.isArray(n.draftValues)&&n.draftValues.length>0)||n.isValid(n.draftValues)}))},enumerable:!1,configurable:!0}),t.payloadify=function(n){return Le(Qe({id:n.id,name:n.name,items:n.items.map((function(e){return rM.payloadify(e)})),version:n.version,is_submitted:n._isSubmitted}))},t.isMessageFormPayload=function(n){return!!n?.message_form},t})(),rM=(function(){function t(n){var e=n.id,r=n.name,i=n.required,a=n.sort_order,s=n.placeholder,l=n.style,c=n.item_type,d=n.validators,p=n.value,g=n.values;this.id=e,this.name=r,this.required=i,this.sortOrder=a,this.placeholder=s,Object.keys(l).length===0?this.style={layout:c}:this.style=Le({layout:l.layout,options:l.options,defaultOptions:l.default_options,resultCount:l.result_count}),g?this.submittedValues=g:p&&(this.submittedValues=[p]),this._validators=d}return t.prototype.isValid=function(n){var e=this;return n.every((function(r){var i=(function(a,s){return s.every((function(l){switch(l.key){case Qf.NUMBER:var c=Number(a);return!(isNaN(c)||l.min&&typeof l.min!="number"||l.max&&typeof l.max!="number"||typeof l.min=="number"&&c<l.min||typeof l.max=="number"&&c>l.max);case Qf.ENUM:return typeof a=="string"&&(!(l.enums&&Array.isArray(l.enums)&&l.enums.length>0&&!l.enums.includes(a))||l.allow_other);case Qf.TEXT:return!(typeof a!="string"||typeof l.min_length=="number"&&a.length<l.min_length||typeof l.max_length=="number"&&a.length>l.max_length);case Qf.REGEX:return!(typeof a!="string"||l.regex&&(typeof l.regex!="string"||!new RegExp(l.regex).test(a)));case Qf.DECIMAL_PLACE:return a.length!==0&&(c=Number(a),!(isNaN(c)||(!l.max_decimal_place||typeof l.max_decimal_place=="number")&&l.max_decimal_place&&!(function(d,p){var g=d.toString(),_=g.indexOf(".");return _===-1||g.slice(_+1).length<=p})(c,l.max_decimal_place)));default:return!0}}))})(r,e._validators);return i}))},t.payloadify=function(n){return Le(Qe({id:n.id,name:n.name,required:n.required,sort_order:n.sortOrder,placeholder:n.placeholder,style:Le({layout:n.style.layout,options:n.style.options,default_options:n.style.defaultOptions,result_count:n.style.resultCount}),item_type:n.style.layout,validators:n._validators,values:n.submittedValues}))},t})(),uG=(function(t){function n(e){var r=t.call(this)||this;return r.method=ye.POST,r.path="".concat(X9,"/").concat(e.formId,"/submit"),r.params=Le({message_id:e.messageId,items:e.items}),r}return U(n,t),n})(Ee);(function(t){t.PENDING="pending",t.SENT="sent",t.FAILED="failed",t.CANCELED="canceled"})(lh||(lh={})),(function(t){t.PENDING="pending",t.IN_QUEUE="in_queue",t.SENT="sent",t.FAILED="failed",t.CANCELED="canceled",t.REMOVED="removed"})(Eo||(Eo={}));var sp,ba=(function(t){function n(e,r){var i,a,s,l,c,d,p,g,_,y=this;return(y=t.call(this,e,r)||this).parentMessage=null,y.silent=!1,y.isOperatorMessage=!1,y.threadInfo=null,y.reactions=[],y.appleCriticalAlertOptions=null,y.scheduledInfo=null,y.suggestedReplies=null,y.myFeedback=null,y.myFeedbackStatus="NOT_APPLICABLE",y.messageForm=null,y._isContinuousMessages=!1,y._scheduledStatus=null,y._poll=null,y.messageId=(a=(i=r.msg_id)!==null&&i!==void 0?i:r.message_id)!==null&&a!==void 0?a:0,y.parentMessageId=(s=typeof r.parent_message_id=="string"?parseInt(r.parent_message_id):r.parent_message_id)!==null&&s!==void 0?s:0,y.threadInfo=r.thread_info?new v1(y._iid,r.thread_info):null,r.reactions_summary?y.reactions=r.reactions_summary.map((function(C){return new S_(e,C)})):r.reactions?y.reactions=r.reactions.map((function(C){return new S_(e,C)})):y.reactions=[],y.ogMetaData=r.og_tag?new eM(r.og_tag):null,y.silent=(l=r.silent)!==null&&l!==void 0&&l,y.isOperatorMessage=(c=r.is_op_msg)!==null&&c!==void 0&&c,y.appleCriticalAlertOptions=r.apple_critical_alert_options?new sl(r.apple_critical_alert_options):null,typeof r.scheduled_message_id=="number"&&typeof r.scheduled_at=="number"&&r.scheduled_status&&(y.scheduledInfo={scheduledMessageId:r.scheduled_message_id,scheduledAt:r.scheduled_at},y._scheduledStatus=r.scheduled_status),y._isContinuousMessages=(d=r.is_continuous_messages)!==null&&d!==void 0&&d,y.myFeedback=ah._isSubmitted(r.feedback)?new ah(r.feedback):null,y.myFeedbackStatus=ah._getStatus(r.feedback),y.suggestedReplies=(g=(p=r.extended_message_payload)===null||p===void 0?void 0:p.suggested_replies)!==null&&g!==void 0?g:null,y.messageForm=nM.isMessageFormPayload(r.extended_message_payload)?new nM(y.messageId,r.extended_message_payload.message_form):null,y.message=(_=r.message)!==null&&_!==void 0?_:"",y._poll=r.poll?new al(y._iid,r.poll):null,y}return U(n,t),n.payloadify=function(e){var r,i;return Le(Qe(z(z({},t.payloadify.call(this,e)),{message_id:e.messageId,parent_message_id:e.parentMessageId,thread_info:e.threadInfo?v1.payloadify(e.threadInfo):null,reactions_summary:e.reactions.map((function(a){return S_.payloadify(a)})),og_tag:e.ogMetaData?eM.payloadify(e.ogMetaData):null,silent:e.silent,is_op_msg:e.isOperatorMessage,apple_critical_alert_options:e.appleCriticalAlertOptions?sl.payloadify(e.appleCriticalAlertOptions):null,scheduled_message_id:(r=e.scheduledInfo)===null||r===void 0?void 0:r.scheduledMessageId,scheduled_at:(i=e.scheduledInfo)===null||i===void 0?void 0:i.scheduledAt,scheduled_status:e._scheduledStatus,feedback:e.myFeedback?ah.payloadify(e.myFeedback):ah._getPayloadByStatus(e.myFeedbackStatus),message:e.message,poll:e._poll?al.payloadify(e._poll):null})))},n._getParentMessageInfoPayload=function(e){var r={type:RD(e.messageType),ts:e.createdAt,user:e.sender?Cg.payloadify(e.sender):null,message:e.message,data:e.data,custom_type:e.customType};switch(e.messageType){case Hn.USER:return Le(Qe(z(z({},r),{translations:e.translations})));case Hn.FILE:return Le(Qe(z(z({},r),{file:{url:e.plainUrl,name:e.name,type:e.type,require_auth:e.requireAuth},files:Array.isArray(e.fileInfoList)?e.fileInfoList.map((function(i){return mN.payloadify(i)})):null})));case Hn.ADMIN:return Le(Qe(z(z({},r),{translations:e.translations})));default:return Le(Qe(z({},r)))}},n.prototype.isIdentical=function(e){return this.messageId===e.messageId},n.prototype.applyThreadInfoUpdateEvent=function(e){return this.messageId===e.targetMessageId&&(e.threadInfo._isUpdateRequired&&this.threadInfo&&e.threadInfo._updateFrom(this.threadInfo),this.threadInfo=e.threadInfo,!0)},n.prototype._findReactionIndex=function(e){for(var r=0;r<this.reactions.length;r++)if(this.reactions[r].key===e)return r;return-1},n.prototype.applyReactionEvent=function(e){var r=W.of(this._iid).sdkState;if(this.messageId===e.messageId)switch(e.operation){case vp.ADD:e.userId===r.userId&&(e._hasCurrentUserReacted=!0),(i=this._findReactionIndex(e.key))!==-1?this.reactions[i].applyEvent(e):e._sampledUserIds?this.reactions.push(new S_(this._iid,{key:e.key,sampled_user_ids:e._sampledUserIds,sampled_user_info:e._sampledUserInfoList,count:e._count,is_self_included:e._hasCurrentUserReacted,last_ts:e.updatedAt})):this.reactions.push(new S_(this._iid,{key:e.key,user_ids:[e.userId],updated_at:e.updatedAt}));break;case vp.DELETE:var i;(i=this._findReactionIndex(e.key))!==-1&&(e._sampledUserIds?e._count===0?this.reactions.splice(i,1):(e.userId===r.userId&&(e._hasCurrentUserReacted=!1),this.reactions[i].applyEvent(e)):(this.reactions[i].applyEvent(e),this.reactions[i].isEmpty&&this.reactions.splice(i,1)))}},n.prototype.applyParentMessage=function(e){if(!this.parentMessage)return this.parentMessage=e,!0;if(this.parentMessageId===e.messageId){var r=this.parentMessage.updatedAt;if(e.updatedAt>=r)return this.parentMessage=e,!0}return!1},n.prototype.applyPoll=function(e){return!(this._poll&&this._poll.id===e.id&&this._poll.updatedAt>e.updatedAt)&&(this._poll=e,!0)},Object.defineProperty(n.prototype,"poll",{get:function(){return this._poll},enumerable:!1,configurable:!0}),n.prototype._triggerThreadInfoUpdatedEvent=function(){return S(this,void 0,void 0,(function(){var e;return T(this,(function(r){return(e=W.of(this._iid).dispatcher).dispatch(new UD({channelType:Rt.GROUP,channelUrl:this.channelUrl,parentMessage:this})),e.dispatch(new lr({messages:[this],source:ge.EVENT_MESSAGE_THREADINFO_UPDATED})),[2]}))}))},n.prototype.markThreadAsRead=function(){return S(this,void 0,void 0,(function(){var e,r;return T(this,(function(i){switch(i.label){case 0:return e=W.of(this._iid).requestQueue,r=new nG({channelUrl:this.channelUrl,messageId:this.messageId}),[4,e.send(r)];case 1:return i.sent(),this.threadInfo&&this.threadInfo.unreadReplyCount!==0?(this.threadInfo.unreadReplyCount=0,[4,this._triggerThreadInfoUpdatedEvent()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))},n.prototype.setPushNotificationEnabled=function(e){return S(this,void 0,void 0,(function(){var r,i;return T(this,(function(a){switch(a.label){case 0:return r=W.of(this._iid).requestQueue,i=new rG({channelUrl:this.channelUrl,channelType:this.channelType,messageId:this.messageId,pushEnabled:e}),[4,r.send(i)];case 1:return a.sent(),this.threadInfo&&this.threadInfo.isPushNotificationEnabled!==e&&(this.threadInfo.isPushNotificationEnabled=e),[2]}}))}))},n.prototype.submitMessageForm=function(e){return S(this,void 0,void 0,(function(){var r,i,a,s,l;return T(this,(function(c){switch(c.label){case 0:if(r=W.of(this._iid).requestQueue,i=null,a=null,s=this.messageForm,!e&&s){if(!s.isSubmittable)throw new X({code:ze.INVALID_PARAMETER,message:"The form is not submittable. Please check all form items are valid before submitting."});if(s.isSubmitted)throw new X({code:ze.INVALID_PARAMETER,message:"The form has already been submitted."});i=s.id,a=s.items.reduce((function(d,p){return d.push({form_item_id:p.id,values:Array.isArray(p.draftValues)?p.draftValues:[]}),d}),[])}else e&&(i=e.formId,a=Object.entries(e.answers).reduce((function(d,p){var g=Ye(p,2),_=g[0],y=g[1],C=Number(_);if(Number.isNaN(C))throw new X({code:ze.INVALID_PARAMETER,message:"Keys in answers must be numeric string."});return d.push({form_item_id:C,value:y}),d}),[]));if(!i||!a)throw new X({code:ze.INVALID_PARAMETER,message:"Missing one or more required inputs: formId, answers."});return l=new uG({messageId:this.messageId,formId:i,items:a}),[4,r.send(l)];case 1:return c.sent(),[2]}}))}))},n.prototype.submitFeedback=function(e){return S(this,void 0,void 0,(function(){var r,i,a,s,l,c;return T(this,(function(d){switch(d.label){case 0:return r=W.of(this._iid),i=r.requestQueue,a=r.dispatcher,s=new iG({channelUrl:this.channelUrl,channelType:this.channelType,messageId:this.messageId,rating:e.rating,comment:e.comment}),[4,i.send(s)];case 1:return l=d.sent(),c=l.as(aG),this.myFeedback=c.feedback,this.myFeedbackStatus="SUBMITTED",a.dispatch(new lr({messages:[this],source:ge.EVENT_MESSAGE_FEEDBACK_ADDED})),[2]}}))}))},n.prototype.updateFeedback=function(e){return S(this,void 0,void 0,(function(){var r,i,a,s,l,c;return T(this,(function(d){switch(d.label){case 0:return r=W.of(this._iid),i=r.requestQueue,a=r.dispatcher,s=new sG({channelUrl:this.channelUrl,channelType:this.channelType,messageId:this.messageId,feedbackId:e.id,rating:e.rating,comment:e.comment}),[4,i.send(s)];case 1:return l=d.sent(),c=l.as(oG),this.myFeedback=c.feedback,this.myFeedbackStatus="SUBMITTED",a.dispatch(new lr({messages:[this],source:ge.EVENT_MESSAGE_FEEDBACK_UPDATED})),[2]}}))}))},n.prototype.deleteFeedback=function(e){return S(this,void 0,void 0,(function(){var r,i,a,s;return T(this,(function(l){switch(l.label){case 0:return r=W.of(this._iid),i=r.requestQueue,a=r.dispatcher,s=new lG({channelUrl:this.channelUrl,channelType:this.channelType,messageId:this.messageId,feedbackId:e}),[4,i.send(s)];case 1:return l.sent(),this.myFeedback=null,this.myFeedbackStatus="NO_FEEDBACK",a.dispatch(new lr({messages:[this],source:ge.EVENT_MESSAGE_FEEDBACK_DELETED})),[2]}}))}))},n})(DD),Rr=(function(t){function n(e,r){var i,a,s,l,c=this;if((c=t.call(this,e,r)||this).reqId="",c.replyToChannel=!1,c.errorCode=0,c.sender=r.user?new Cg(c._iid,r.user):r.sender_id,c.reqId=(a=(i=r.req_id)!==null&&i!==void 0?i:r.request_id)!==null&&a!==void 0?a:"",c.replyToChannel=(s=r.is_reply_to_channel)!==null&&s!==void 0&&s,r.request_state&&Nt(cn,r.request_state)&&(c.sendingStatus=r.request_state),!c.sendingStatus)if(c.messageId>0)c.sendingStatus=cn.SUCCEEDED;else if(c.scheduledInfo)switch(r.scheduled_status&&(c._scheduledStatus=r.scheduled_status),r.scheduled_status){case Eo.SENT:case Eo.IN_QUEUE:c.sendingStatus=cn.SUCCEEDED;break;case Eo.PENDING:c.sendingStatus=cn.SCHEDULED;break;case Eo.FAILED:case Eo.REMOVED:c.sendingStatus=cn.FAILED;break;case Eo.CANCELED:c.sendingStatus=cn.CANCELED}else c.sendingStatus=cn.PENDING;return c.errorCode=(l=r.error_code)!==null&&l!==void 0?l:0,c._messageToken=r.mesg_token,c}return U(n,t),n.payloadify=function(e){return Le(Qe(z(z({},t.payloadify.call(this,e)),{user:Cg.payloadify(e.sender),req_id:e.reqId,is_reply_to_channel:e.replyToChannel,request_state:e.sendingStatus,error_code:e.errorCode,mesg_token:e._messageToken})))},Object.defineProperty(n.prototype,"isResendable",{get:function(){return(this.sendingStatus===cn.FAILED||this.sendingStatus===cn.CANCELED)&&P9(this.errorCode)},enumerable:!1,configurable:!0}),n.prototype.isIdentical=function(e){return this.messageId>0&&e.messageId>0?this.messageId===e.messageId:this.reqId===e.reqId},n})(ba),K0={prevResultSize:0,nextResultSize:0,isInclusive:!1,reverse:!1,messageTypeFilter:ea.ALL,customTypesFilter:void 0,senderUserIdsFilter:void 0,includeReactions:!1,includeMetaArray:!1,includeParentMessageInfo:!1},t2=function(t){return Q("number",t.prevResultSize)&&Q("number",t.nextResultSize)&&Q("boolean",t.isInclusive)&&Q("boolean",t.reverse)&&Q("string",t.messageTypeFilter)&&Nt(ea,t.messageTypeFilter)&&Tt("string",t.customTypesFilter,!0)&&Tt("string",t.senderUserIdsFilter,!0)&&Q("boolean",t.includeMetaArray)&&Q("boolean",t.includeReactions)&&Q("boolean",t.includeParentMessageInfo)},_p=(function(t){function n(e,r){var i,a,s,l=this;if((l=t.call(this,e,r)||this).translations={},l.messageType=Hn.ADMIN,l.translations=(i=r.translations)!==null&&i!==void 0?i:{},r.parent_message_info){var c=r.parent_message_info;l.parentMessage=ia(e,Le(Qe(z(z({},c),{message_id:l.parentMessageId,channel_url:l.channelUrl,channel_type:l.channelType,file:c.file,url:(a=c.file)===null||a===void 0?void 0:a.url,require_auth:(s=c.file)===null||s===void 0?void 0:s.require_auth}))))}return l}return U(n,t),n.payloadify=function(e){return Le(Qe(z(z({},t.payloadify.call(this,e)),{translations:e.translations,parent_message_info:e.parentMessage?t._getParentMessageInfoPayload.call(this,e.parentMessage):null})))},n.prototype.getThreadedMessagesByTimestamp=function(e,r){return S(this,void 0,void 0,(function(){var i;return T(this,(function(a){switch(a.label){case 0:return i=z(z({},K0),r),Te(this.messageId>0&&Q("number",e)&&t2(i)).throw(X.invalidParameters),[4,gi.of(this._iid).getThreadedMessagesByTimestamp(this,e,i)];case 1:return[2,a.sent()]}}))}))},n})(ba),iM=(function(){function t(n){var e,r;this.detail={},this.type=(e=n.type)!==null&&e!==void 0?e:"",this.vendor=(r=n.vendor)!==null&&r!==void 0?r:"",n.detail&&Q("object",n.detail)&&!Array.isArray(n.detail)&&(this.detail=n.detail)}return t.payloadify=function(n){return Le(Qe({type:n.type,vendor:n.vendor,detail:n.detail}))},t})(),aM=(function(){function t(n){this.status=n.status,n.original_message_info&&(this.originalMessageInfo={createdAt:n.original_message_info.ts,messageId:n.original_message_info.id})}return t.payloadify=function(n){return Le({status:n.status,original_message_info:n.originalMessageInfo?{id:n.originalMessageInfo.messageId,ts:n.originalMessageInfo.createdAt}:void 0})},t})(),Ji=(function(t){function n(e,r){var i,a,s,l,c,d,p,g=this;if((g=t.call(this,e,r)||this).messageParams=null,g.mentionedMessageTemplate=void 0,g.translations={},g.translationTargetLanguages=[],g.messageSurvivalSeconds=-1,g.plugins=[],g.messageType=Hn.USER,g.translations=(s=r.translations)!==null&&s!==void 0?s:{},g.translationTargetLanguages=(l=r.target_langs)!==null&&l!==void 0?l:[],Object.keys(g.translations).length===0&&g.translationTargetLanguages.length>0)try{for(var _=Re(g.translationTargetLanguages),y=_.next();!y.done;y=_.next()){var C=y.value;g.translations[C]=""}}catch(A){i={error:A}}finally{try{y&&!y.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}if(g.mentionedMessageTemplate=r.mentioned_message_template,g.messageSurvivalSeconds=(c=r.message_survival_seconds)!==null&&c!==void 0?c:-1,g.plugins=r.plugins?r.plugins.map((function(A){return new iM(A)})):[],r.parent_message_info){var w=r.parent_message_info;g.parentMessage=ia(e,Le(Qe(z(z({},w),{created_at:w.ts,message_id:g.parentMessageId,channel_url:g.channelUrl,channel_type:g.channelType,file:w.file,url:(d=w.file)===null||d===void 0?void 0:d.url,require_auth:(p=w.file)===null||p===void 0?void 0:p.require_auth}))))}return r.review_info&&(g.messageReviewInfo=new aM(r.review_info)),g}return U(n,t),n.payloadify=function(e){return Le(Qe(z(z({},t.payloadify.call(this,e)),{translations:e.translations,message_survival_seconds:e.messageSurvivalSeconds,mentioned_message_template:e.mentionedMessageTemplate,plugins:e.plugins.map((function(r){return iM.payloadify(r)})),parent_message_info:e.parentMessage?t._getParentMessageInfoPayload.call(this,e.parentMessage):null,review_info:e.messageReviewInfo?aM.payloadify(e.messageReviewInfo):void 0})))},n.prototype.getThreadedMessagesByTimestamp=function(e,r){return S(this,void 0,void 0,(function(){var i;return T(this,(function(a){switch(a.label){case 0:return i=z(z({},K0),r),Te(this.messageId>0&&Q("number",e)&&t2(i)).throw(X.invalidParameters),[4,gi.of(this._iid).getThreadedMessagesByTimestamp(this,e,i)];case 1:return[2,a.sent()]}}))}))},n})(Rr),wo=(function(t){function n(e,r){var i,a,s,l,c,d,p,g,_=this;if((_=t.call(this,e,r)||this).messageParams=null,_.fileInfoList=[],_.messageSurvivalSeconds=-1,_.messageType=Hn.FILE,_.data=(s=(a=(i=r.file)===null||i===void 0?void 0:i.data)!==null&&a!==void 0?a:r.custom)!==null&&s!==void 0?s:"",_.fileInfoList=(c=(l=r.files)===null||l===void 0?void 0:l.map((function(C){return new mN(e,C)})))!==null&&c!==void 0?c:[],_.messageSurvivalSeconds=(d=r.message_survival_seconds)!==null&&d!==void 0?d:-1,r.parent_message_info){var y=r.parent_message_info;_.parentMessage=ia(e,Le(Qe(z(z({},y),{created_at:y.ts,message_id:_.parentMessageId,channel_url:_.channelUrl,channel_type:_.channelType,file:y.file,url:(p=y.file)===null||p===void 0?void 0:p.url,require_auth:(g=y.file)===null||g===void 0?void 0:g.require_auth}))))}return _}return U(n,t),n.prototype.getThreadedMessagesByTimestamp=function(e,r){return S(this,void 0,void 0,(function(){var i;return T(this,(function(a){switch(a.label){case 0:return i=z(z({},K0),r),Te(this.messageId>0&&Q("number",e)&&t2(i)).throw(X.invalidParameters),[4,gi.of(this._iid).getThreadedMessagesByTimestamp(this,e,i)];case 1:return[2,a.sent()]}}))}))},n.payloadify=function(e){var r,i,a,s,l,c;return Le(Qe(z(z({},t.payloadify.call(this,e)),{file:{name:(i=(r=e.fileInfoList[0])===null||r===void 0?void 0:r.fileName)!==null&&i!==void 0?i:"",size:(s=(a=e.fileInfoList[0])===null||a===void 0?void 0:a.fileSize)!==null&&s!==void 0?s:0,type:(c=(l=e.fileInfoList[0])===null||l===void 0?void 0:l.mimeType)!==null&&c!==void 0?c:"",data:e.data},files:Array.isArray(e.fileInfoList)?e.fileInfoList.map((function(d){return mN.payloadify(d)})):null,message_survival_seconds:e.messageSurvivalSeconds,parent_message_info:e.parentMessage?t._getParentMessageInfoPayload.call(this,e.parentMessage):null})))},n._isMultipleFilesMessagePayload=function(e){var r=e.files;return Array.isArray(r)&&r.length>=2},n._isMultipleFilesMessageSerializedData=function(e){var r=e.fileInfoList;return Array.isArray(r)},n})(Rr);(function(t){t.SENT="SENT",t.READ="READ"})(sp||(sp={}));var yp=(function(t){function n(e,r){var i,a,s=this;if((s=t.call(this,e,r)||this).notificationData=null,s.notificationId=r.notification_message_id,s.messageType=Hn.ADMIN,s.messageStatus=(i=r.message_status)!==null&&i!==void 0?i:sp.SENT,s.priority=(a=r.priority)!==null&&a!==void 0?a:iN.NORMAL,s.notificationEventDeadline=r.notification_event_deadline,s.extendedMessage.sub_type===0)try{var l=JSON.parse(s.extendedMessage.sub_data),c=l.label,d=l.tags,p=d===void 0?[]:d,g=l.template_key,_=l.template_variables;s.notificationData={label:c,tags:p,templateKey:g,templateVariables:_}}catch{}return s}return U(n,t),n.payloadify=function(e){return Le(Qe(z(z({},t.payloadify.call(this,e)),{notification_message_id:e.notificationId,message_status:e.messageStatus,priority:e.priority,notification_event_deadline:e.notificationEventDeadline})))},n.prototype.isIdentical=function(e){return this.notificationId===e.notificationId},n})(DD),gN=function(t){if(t.notificationId)return yp.payloadify(t);switch(t.messageType){case Hn.USER:return Ji.payloadify(t);case Hn.FILE:return t.fileInfoList?wo.payloadify(t):Xr.payloadify(t);case Hn.ADMIN:return _p.payloadify(t);default:throw X.unknown}},ia=function(t,n){if(n.notification_message_id)return new yp(t,n);switch(n.type){case"MESG":return new Ji(t,n);case"FILE":return wo._isMultipleFilesMessagePayload(n)?new wo(t,n):new Xr(t,n);case"ADMM":case"BRDM":return new _p(t,n);default:return null}},Xr=(function(t){function n(e,r){var i,a,s,l,c,d,p,g,_,y,C,w,A,M,I,D=this;(D=t.call(this,e,r)||this).messageParams=null,D.plainUrl="",D.requireAuth=!1,D.thumbnails=[],D.messageSurvivalSeconds=-1,D.messageType=Hn.FILE;var P=r.file;if(D.plainUrl=((a=(i=P?.url)!==null&&i!==void 0?i:r.url)!==null&&a!==void 0?a:"").split("?auth=")[0],D.name=(l=(s=P?.name)!==null&&s!==void 0?s:r.name)!==null&&l!==void 0?l:"File",D.size=(d=(c=P?.size)!==null&&c!==void 0?c:r.size)!==null&&d!==void 0?d:0,D.data=(_=(g=(p=P?.data)!==null&&p!==void 0?p:r.custom)!==null&&g!==void 0?g:D.data)!==null&&_!==void 0?_:"",D.type=P?(y=P.type)!==null&&y!==void 0?y:"":(C=r.type)!==null&&C!==void 0?C:"",D.requireAuth=(w=r.require_auth)!==null&&w!==void 0&&w,D.thumbnails=r.thumbnails?r.thumbnails.map((function(L){var G;return new Qc(D._iid,typeof L=="string"?{url:L,width:0,height:0}:z(z({},L),{url:((G=L.url)!==null&&G!==void 0?G:"").split("auth=")[0]}),D.requireAuth)})):[],D.messageSurvivalSeconds=(A=r.message_survival_seconds)!==null&&A!==void 0?A:-1,r.parent_message_info){var H=r.parent_message_info;D.parentMessage=ia(e,Le(Qe(z(z({},H),{created_at:H.ts,message_id:D.parentMessageId,channel_url:D.channelUrl,channel_type:D.channelType,file:H.file,url:(M=H.file)===null||M===void 0?void 0:M.url,require_auth:(I=H.file)===null||I===void 0?void 0:I.require_auth}))))}return D}return U(n,t),n.payloadify=function(e){var r;return Le(Qe(z(z({},t.payloadify.call(this,e)),{url:e.plainUrl,require_auth:e.requireAuth,file:{name:e.name,size:e.size,type:e.type,data:e.data},thumbnails:(r=e.thumbnails)===null||r===void 0?void 0:r.map((function(i){return{url:i.plainUrl,width:i.width,height:i.height,real_width:i.realWidth,real_height:i.realHeight}})),message_survival_seconds:e.messageSurvivalSeconds,parent_message_info:e.parentMessage?t._getParentMessageInfoPayload.call(this,e.parentMessage):null})))},Object.defineProperty(n.prototype,"url",{get:function(){var e=W.of(this._iid).sessionManager;return this.requireAuth&&e.ekey?"".concat(this.plainUrl,"?auth=").concat(e.ekey):this.plainUrl},enumerable:!1,configurable:!0}),n.prototype.getThreadedMessagesByTimestamp=function(e,r){return S(this,void 0,void 0,(function(){var i;return T(this,(function(a){switch(a.label){case 0:return i=z(z({},K0),r),Te(this.messageId>0&&Q("number",e)&&t2(i)).throw(X.invalidParameters),[4,gi.of(this._iid).getThreadedMessagesByTimestamp(this,e,i)];case 1:return[2,a.sent()]}}))}))},n})(Rr),k0=(function(t){function n(e,r){var i=r.file,a=r.fileUrl,s=r.fileName,l=r.fileSize,c=r.mimeType,d=r.thumbnailSizes,p=r._uploadedMetaData,g=r._thumbnails,_=t.call(this,e)||this;return _._plainUrl=a,_.file=i,_.fileName=s,_.fileSize=l,_.mimeType=c,_.thumbnailSizes=d,_._uploadedMetaData=p,_._thumbnails=g,_}return U(n,t),n.getPlainUrl=function(e){return e instanceof n?e._plainUrl:e.fileUrl},Object.defineProperty(n.prototype,"fileUrl",{get:function(){var e,r=W.of(this._iid).sessionManager;return this._plainUrl&&!((e=this._uploadedMetaData)===null||e===void 0)&&e.requireAuth&&r.ekey?"".concat(this._plainUrl,"?auth=").concat(r.ekey):this._plainUrl},set:function(e){this._plainUrl=e},enumerable:!1,configurable:!0}),n.prototype.toJSON=function(){return{file:this.file,fileUrl:this._plainUrl,fileName:this.fileName,fileSize:this.fileSize,mimeType:this.mimeType,thumbnailSizes:this.thumbnailSizes,_thumbnails:this._thumbnails,_uploadedMetaData:this._uploadedMetaData}},n})(ei),cG=(function(t){function n(e){var r,i,a,s,l=[];return e.mentionType===ra.USERS&&(e.mentionedUserIds?l=e.mentionedUserIds:e.mentionedUsers&&(l=e.mentionedUsers.map((function(c){return c.userId})))),t.call(this,{code:"FILE",ackRequired:!0,payload:Le(Qe({channel_url:e.channelUrl,files:e.files?LD(e.files):null,url:e.url,name:(r=e.fileName)!==null&&r!==void 0?r:"",type:(i=e.mimeType)!==null&&i!==void 0?i:"",size:(a=e.fileSize)!==null&&a!==void 0?a:0,custom:e.data,custom_type:e.customType,thumbnails:(s=e._thumbnails)===null||s===void 0?void 0:s.map((function(c){return Qc.payloadify(c)})),require_auth:e.requireAuth,metaarray:e.metaArrays,mention_type:e.mentionType,mentioned_user_ids:l,push_option:e.pushNotificationDeliveryOption&&e.pushNotificationDeliveryOption!==Ql.DEFAULT?e.pushNotificationDeliveryOption:void 0,apple_critical_alert_options:e.appleCriticalAlertOptions?sl.payloadify(e.appleCriticalAlertOptions):null,silent:e.silent,reply_to_channel:e.isReplyToChannel,parent_message_id:e.parentMessageId?e.parentMessageId:null,req_id:e.reqId,poll_id:e.pollId,pin_message:e.isPinnedMessage,message:e.message}))})||this}return U(n,t),n})(na),dG=(function(t){function n(e){var r,i,a=this;a=t.call(this)||this;var s=[];return e.mentionType===ra.USERS&&(e.mentionedUserIds?s=e.mentionedUserIds:e.mentionedUsers&&(s=e.mentionedUsers.map((function(l){return l.userId})))),a.method=ye.POST,a.path="".concat(Xt(e.channelType),"/").concat(encodeURIComponent(e.channelUrl),"/messages"),a.params=Le(Qe({message_type:Hn.FILE,user_id:e.userId,files:e.files?LD(e.files):null,url:e.fileUrl,mention_type:e.mentionType,mentioned_user_ids:s,file_name:e.fileName,file_size:e.fileSize,file_type:e.mimeType,data:e.data,custom_type:e.customType,thumbnails:(r=e._thumbnails)===null||r===void 0?void 0:r.map((function(l){return Qc.payloadify(l)})),require_auth:e.requireAuth,sorted_metaarray:(i=e.metaArrays)===null||i===void 0?void 0:i.map((function(l){return wa.payloadify(l)})),push_option:e.pushNotificationDeliveryOption,parent_message_id:e.parentMessageId?e.parentMessageId:null,apple_critical_alert_options:e.appleCriticalAlertOptions?sl.payloadify(e.appleCriticalAlertOptions):null,reply_to_channel:e.isReplyToChannel,req_id:e.reqId,poll_id:e.pollId,pin_message:e.isPinnedMessage})),a}return U(n,t),n})(Ee),lS=(function(t){function n(e,r,i){var a,s,l,c,d=this;(d=t.call(this,e,"FILE",i)||this).message=i.files&&i.files.length>=2?new wo(e,i):new Xr(e,i);var p=W.of(e).sdkState;return d.isMentioned=vg(d.message.mentionType,(l=(a=d.message.mentionedUserIds)!==null&&a!==void 0?a:(s=d.message.mentionedUsers)===null||s===void 0?void 0:s.map((function(g){return g.userId})))!==null&&l!==void 0?l:[],p.userId),d.forceUpdateLastMessage=(c=i.force_update_last_message)!==null&&c!==void 0&&c,d}return U(n,t),n})(Xn),hG=(function(t){function n(e,r){var i,a,s,l,c=this;(c=t.call(this,e,r)||this).message=r.files&&r.files.length>=2?new wo(e,r):new Xr(e,r);var d=W.of(e).sdkState;return c.isMentioned=vg(c.message.mentionType,(s=(i=c.message.mentionedUserIds)!==null&&i!==void 0?i:(a=c.message.mentionedUsers)===null||a===void 0?void 0:a.map((function(p){return p.userId})))!==null&&s!==void 0?s:[],d.userId),c.forceUpdateLastMessage=(l=r.force_update_last_message)!==null&&l!==void 0&&l,c}return U(n,t),n})(Se);function LD(t){return t.map((function(n){var e,r;return Le(Qe({url:k0.getPlainUrl(n),file_name:n.fileName,file_type:n.mimeType,file_size:n.fileSize,thumbnails:(e=n._thumbnails)===null||e===void 0?void 0:e.map((function(i){return Qc.payloadify(i)})),require_auth:(r=n._uploadedMetaData)===null||r===void 0?void 0:r.requireAuth}))}))}var Ni;(function(t){t[t.PENDING=0]="PENDING",t[t.UPLOADING=1]="UPLOADING",t[t.UPLOADED=2]="UPLOADED",t[t.SENDING=3]="SENDING",t[t.FAILED=4]="FAILED"})(Ni||(Ni={}));var fG=(function(){function t(n,e){var r=e.sdkState,i=e.dispatcher,a=e.requestQueue,s=e.onlineDetector,l=e.cacheContext,c=this;this._queueMap=new Map,this._iid=n,this._sdkState=r,this._requestQueue=a,this._cacheContext=l,this._dispatcher=i,this._dispatcher.on((function(d){d instanceof Bs&&(c._connectionState=d.stateType)})),this._onlineDetector=s}return Object.defineProperty(t.prototype,"_shouldSendThroughWebSocket",{get:function(){return this._connectionState===en.CONNECTED||this._connectionState===en.CONNECTING||this._connectionState===en.RECONNECTING},enumerable:!1,configurable:!0}),t.prototype._sendFileMessage=function(n,e){return S(this,void 0,void 0,(function(){var r,i,a;return T(this,(function(s){switch(s.label){case 0:return r=this._createSendFileMessageRequestParams(n,e),this._shouldSendThroughWebSocket?(i=new cG(r),[4,this._requestQueue.send(i)]):[3,2];case 1:return a=s.sent(),[2,a.as(lS).message];case 2:return i=new dG(z(z({},r),{userId:this._sdkState.userId})),[4,this._requestQueue.send(i)];case 3:return a=s.sent(),[2,a.as(hG).message]}}))}))},t.prototype._createSendFileMessageRequestParams=function(n,e){var r=z(z({},e.params),{channelUrl:n.url,channelType:n.channelType,reqId:e.requestId,url:""});if(e.multipleFileUploadInfo){var i=e.params;r.files=i.fileInfoList}else i=e.params,r.url=i.fileUrl,r.requireAuth=i.requireAuth;return r},t.prototype._resolveMessageQueue=function(n){var e;return S(this,void 0,void 0,(function(){var r,i,a,s,l,c,d,p,g,_,y,C,w;return T(this,(function(A){switch(A.label){case 0:if(!(r=this._queueMap.get(n.url)))return[3,21];if(r.isResolving)return[3,20];r.isResolving=!0,i=[],a=!0,A.label=1;case 1:A.trys.push([1,15,16,17]),s=Re(r.messageQueue),l=s.next(),A.label=2;case 2:if(l.done)return[3,14];switch(c=l.value,c.state){case Ni.PENDING:case Ni.UPLOADING:return[3,3];case Ni.UPLOADED:return[3,4];case Ni.FAILED:return[3,12]}return[3,13];case 3:return a=!1,i.push(c),[3,13];case 4:if(!a)return[3,10];A.label=5;case 5:return A.trys.push([5,8,,9]),c.state=Ni.SENDING,[4,this._sendFileMessage(n,c)];case 6:return d=A.sent(),c.deferred.resolve(d),[4,ya(100)];case 7:return A.sent(),[3,9];case 8:return p=A.sent(),c.deferred.reject(p),[3,9];case 9:return[3,11];case 10:i.push(c),A.label=11;case 11:return[3,13];case 12:return g=(e=c.error)!==null&&e!==void 0?e:X.unknown,c.deferred.reject(g.code===ze.REQUEST_CANCELED?X.fileUploadCanceled:g),[3,13];case 13:return l=s.next(),[3,2];case 14:return[3,17];case 15:return _=A.sent(),C={error:_},[3,17];case 16:try{l&&!l.done&&(w=s.return)&&w.call(s)}finally{if(C)throw C.error}return[7];case 17:return y=r.isResolveRequestPending,r.messageQueue=i,r.isResolving=!1,r.isResolveRequestPending=!1,y?[4,this._resolveMessageQueue(n)]:[3,19];case 18:A.sent(),A.label=19;case 19:return[3,21];case 20:r.isResolveRequestPending=!0,A.label=21;case 21:return[2]}}))}))},t.prototype._uploadNextPendingItem=function(n){var e;return S(this,void 0,void 0,(function(){var r,i,a,s,l,c,d,p,g,_;return T(this,(function(y){switch(y.label){case 0:return(r=this._queueMap.get(n.url))&&(i=r.messageQueue.find((function(C){return C.state===Ni.PENDING})))?i.multipleFileUploadInfo?(a=i.multipleFileUploadInfo,s=a.uploadIndex,l=a.uploadCount,c=a.requestHandler,_=i.params,d=_.fileInfoList[s],!Ai(d.file)||!((e=d._uploadedMetaData)===null||e===void 0)&&e.isUploaded?[3,2]:[4,this._tryUploadNextItemAndUpdateItemState(n,r,i)]):[3,4]:[3,9];case 1:return y.sent(),[3,3];case 2:i.state=s<l-1?Ni.PENDING:Ni.UPLOADED,y.label=3;case 3:return p=_.fileInfoList[s],g=i.multipleFileUploadInfo.uploadIndex++,i.multipleFileUploadInfo.isCopy||c==null||c._triggerOnFileUploaded(i.requestId,g,p,i.error),[3,7];case 4:return _=i.params,Ai(_.file)?[4,this._tryUploadNextItemAndUpdateItemState(n,r,i)]:[3,6];case 5:return y.sent(),[3,7];case 6:_.thumbnailSizes=[],i.state=Ni.UPLOADED,y.label=7;case 7:return this._uploadNextPendingItem(n),[4,this._resolveMessageQueue(n)];case 8:y.sent(),y.label=9;case 9:return[2]}}))}))},t.prototype._tryUploadNextItemAndUpdateItemState=function(n,e,r){return S(this,void 0,void 0,(function(){var i,a,s,l,c,d;return T(this,(function(p){switch(p.label){case 0:return[4,this._onlineDetector.isOnline()];case 1:if(i=p.sent(),!W.of(this._iid).sessionManager.currentUser||!i)return r.error=X.connectionRequired,r.state=Ni.FAILED,[2];if(!(e.uploadQueue.length<6))return[3,9];r.state=Ni.UPLOADING,e.uploadQueue.push(r),p.label=2;case 2:return p.trys.push([2,7,,8]),r.multipleFileUploadInfo?(a=r.multipleFileUploadInfo,s=a.uploadIndex,l=a.uploadCount,c=r.params,[4,this._uploadNextFileForMultipleFilesItemAndUpdateParams(n,r,c)]):[3,4];case 3:return p.sent(),r.state=s<l-1?Ni.PENDING:Ni.UPLOADED,[3,6];case 4:return c=r.params,[4,this._uploadNextFileForSingleFileItemAndUpdateParams(n,r,c)];case 5:p.sent(),r.state=Ni.UPLOADED,p.label=6;case 6:return[3,8];case 7:switch((d=p.sent()).code){case ze.REQUEST_FAILED:r.error=new X({code:ze.NETWORK_ERROR,message:"Failed to upload a file."});break;case ze.REQUEST_CANCELED:r.error=X.fileUploadCanceled;break;default:r.error=d}return r.state=Ni.FAILED,[3,8];case 8:this._dequeueUploadItem(e,r),p.label=9;case 9:return[2]}}))}))},t.prototype._dequeueUploadItem=function(n,e){var r=n.uploadQueue.findIndex((function(i){return i.requestId===e.requestId}));r>=0&&n.uploadQueue.splice(r,1)},t.prototype._uploadNextFileForSingleFileItemAndUpdateParams=function(n,e,r){var i,a,s;return S(this,void 0,void 0,(function(){var l,c,d,p,g,_,y,C,w,A;return T(this,(function(M){switch(M.label){case 0:return l=new m1({file:r.file,channelUrl:n.url,thumbnailSizes:r.thumbnailSizes,requestId:e.requestId}),[4,this._requestQueue.send(l)];case 1:return c=M.sent(),d=c.as(g1),p=d.url,g=d.fileSize,_=g===void 0?r.fileSize:g,y=d.thumbnails,C=y===void 0?[]:y,w=d.requireAuth,A=w!==void 0&&w,r.fileName=(i=r.fileName)!==null&&i!==void 0?i:r.file.name,r.mimeType=(a=r.mimeType)!==null&&a!==void 0?a:r.file.type,r.fileSize=(s=r.fileSize)!==null&&s!==void 0?s:r.file.size,r.fileUrl=p,r.fileSize=_,r.requireAuth=A,r._thumbnails=C,[2]}}))}))},t.prototype._uploadNextFileForMultipleFilesItemAndUpdateParams=function(n,e,r){var i,a,s;return S(this,void 0,void 0,(function(){var l,c,d,p,g,_,y,C,w,A,M;return T(this,(function(I){switch(I.label){case 0:return l=e.multipleFileUploadInfo.uploadIndex,c=r.fileInfoList[l],d=new m1({file:c.file,channelUrl:n.url,thumbnailSizes:c.thumbnailSizes,requestId:e.requestId}),[4,this._requestQueue.send(d)];case 1:return p=I.sent(),g=p.as(g1),_=g.url,y=g.fileSize,C=y===void 0?c.fileSize:y,w=g.thumbnails,A=g.requireAuth,M=A!==void 0&&A,c.fileName=(i=c.fileName)!==null&&i!==void 0?i:c.file.name,c.mimeType=(a=c.mimeType)!==null&&a!==void 0?a:c.file.type,c.fileSize=(s=c.fileSize)!==null&&s!==void 0?s:c.file.size,c.file=void 0,c.fileUrl=_,c.fileSize=C,c._thumbnails=w,c._uploadedMetaData=z(z({},c._uploadedMetaData),{requireAuth:M,isUploaded:!0}),c instanceof k0||(r.fileInfoList[l]=new k0(this._iid,c)),[2]}}))}))},t.prototype.request=function(n,e,r,i){return i===void 0&&(i={}),S(this,void 0,void 0,(function(){var a,s,l,c,d;return T(this,(function(p){return this._queueMap.has(n.url)||(a={messageQueue:[],uploadQueue:[],isResolving:!1,isResolveRequestPending:!1},this._queueMap.set(n.url,a)),s=this._queueMap.get(n.url),l=new za,c={requestId:e,params:r,state:Ni.PENDING,deferred:l},(function(g){return"fileInfoList"in g})(r)&&(d=z({uploadIndex:0,uploadCount:r.fileInfoList.length},i),c.multipleFileUploadInfo=d),s.messageQueue.push(c),this._uploadNextPendingItem(n),[2,l.promise]}))}))},t.prototype.cancel=function(n,e){var r,i,a=this._queueMap.get(n.url);if(a){var s=e?[a.messageQueue.find((function(C){return C.requestId===e}))]:Je([],Ye(a.messageQueue),!1);try{for(var l=Re(s),c=l.next();!c.done;c=l.next()){var d=c.value;if(d)switch(d.state){case Ni.PENDING:if(d.state=Ni.FAILED,d.error=X.requestCanceled,d.multipleFileUploadInfo&&!d.multipleFileUploadInfo.isCopy){var p=d.multipleFileUploadInfo,g=p.uploadIndex,_=p.requestHandler,y=d.params.fileInfoList[g];_?._triggerOnFileUploaded(d.requestId,g,y,X.fileUploadCanceled)}this._resolveMessageQueue(n);break;case Ni.UPLOADING:this._requestQueue.cancel(d.requestId),this._dispatcher.dispatch(new l1({requestId:d.requestId}))}}}catch(C){r={error:C}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}}else e&&(this._requestQueue.cancel(e),this._dispatcher.dispatch(new l1({requestId:e})))},t})(),sM,Ko,l0={prevResultSize:0,nextResultSize:0,isInclusive:!1,reverse:!1,messageTypeFilter:ea.ALL,customTypesFilter:void 0,senderUserIdsFilter:void 0,replyType:ta.NONE,includeReactions:!1,includeMetaArray:!1,includeParentMessageInfo:!1,includeThreadInfo:!1,showSubchannelMessagesOnly:!1},oM=function(t){return Q("number",t.prevResultSize)&&Q("number",t.nextResultSize)&&Q("boolean",t.isInclusive)&&Q("boolean",t.reverse)&&Q("string",t.messageTypeFilter)&&Nt(ea,t.messageTypeFilter)&&Tt("string",t.customTypesFilter,!0)&&Tt("string",t.senderUserIdsFilter,!0)&&Nt(ta,t.replyType)&&Q("boolean",t.includeMetaArray)&&Q("boolean",t.includeReactions)&&Q("boolean",t.includeParentMessageInfo)&&Q("boolean",t.includeThreadInfo)&&Q("boolean",t.showSubchannelMessagesOnly)},vN={replyType:ta.NONE,includeReactions:!1,includeThreadInfo:!1,includeMetaArray:!1,includeParentMessageInfo:!1},lM=function(t){return Nt(ta,t.replyType)&&Q("boolean",t.includeReactions)&&Q("boolean",t.includeMetaArray)&&Q("boolean",t.includeParentMessageInfo)&&Q("boolean",t.includeThreadInfo)};(function(t){t.MESSAGE="message"})(sM||(sM={})),(function(t){t.INTERNAL_BACKSYNC="internal_backsync",t.INTERNAL_FILL_GAP="internal_fill_gap",t.EXTERNAL_LEGACY="external_legacy",t.EXTERNAL_COLLECTION="external_collection"})(Ko||(Ko={}));var _N,pG=(function(t){function n(e){var r=e.channelType,i=e.channelUrl,a=e.messageId,s=e.includeMetaArray,l=e.includeReactions,c=e.includeThreadInfo,d=e.includeParentMessageInfo,p=t.call(this)||this;return p.method=ye.GET,p.path="".concat(Xt(r),"/").concat(encodeURIComponent(i),"/messages/").concat(encodeURIComponent(a)),p.params={is_sdk:!0,with_sorted_meta_array:s,include_reactions_summary:l!=null&&l,include_thread_info:c,include_parent_message_info:d,include_poll_details:!0},p}return U(n,t),n})(Ee),mG=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.message=r?ia(e,z({},r)):null,i}return U(n,t),n})(Se),pE=(function(t){function n(e){var r=e.channelType,i=e.channelUrl,a=e.timestamp,s=e.token,l=e.prevResultSize,c=e.nextResultSize,d=e.isInclusive,p=e.reverse,g=e.messageTypeFilter,_=e.customTypesFilter,y=e.senderUserIdsFilter,C=e.replyType,w=e.includeMetaArray,A=e.includeReactions,M=e.parentMessageId,I=e.includeThreadInfo,D=e.includeParentMessageInfo,P=e.showSubchannelMessagesOnly,H=e.checkingHasNext,L=e.checkingContinuousMessages,G=e.sdkSource,Y=t.call(this)||this;return Y.method=ye.GET,Y.path="".concat(Xt(r),"/").concat(encodeURIComponent(i),"/messages"),Y.params=Le(Qe({is_sdk:!0,prev_limit:l,next_limit:c,include:d,reverse:p,message_ts:a,message_id:s,message_type:g??null,custom_types:_,sender_ids:y,include_reply_type:C,with_sorted_meta_array:w,include_reactions_summary:A,parent_message_id:M,include_thread_info:I,include_parent_message_info:D,show_subchannel_message_only:P,include_poll_details:!0,checking_has_next:H,checking_continuous_messages:L,sdk_source:G})),Y}return U(n,t),n})(Ee),mE=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return r.is_continuous_messages!==void 0&&(i.isContinuousMessages=r.is_continuous_messages),r.has_next!==void 0&&(i.hasNext=r.has_next),i.messages=r.messages.map((function(a){return ia(e,a)})),i}return U(n,t),n})(Se),gG=(function(t){function n(e){var r=e.channelType,i=e.channelUrl,a=e.timestamp,s=e.token,l=e.replyType,c=e.includeMetaArray,d=e.includeReactions,p=e.includeThreadInfo,g=e.includeParentMessageInfo,_=t.call(this)||this;return _.method=ye.GET,_.path="".concat(Xt(r),"/").concat(encodeURIComponent(i),"/messages/changelogs"),_.params={change_ts:a,token:s,with_sorted_meta_array:c,include_reactions_summary:d,include_thread_info:p,include_reply_type:l,include_parent_message_info:g,include_poll_details:!0},_}return U(n,t),n})(Ee),vG=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.updatedMessages=r.updated.map((function(a){return ia(e,a)})),i.deletedMessagesInfo=r.deleted.map((function(a){return{messageId:a.message_id,deletedAt:a.deleted_at}})),i.hasMore=r.has_more,i.nextToken=r.next,i.forceUseNextToken=r.force_use_next_token||!1,i}return U(n,t),n})(Se),_G=(function(t){function n(e){var r=e.channelUrl,i=e.scheduledMessageId,a=t.call(this)||this;return a.method=ye.GET,a.path="".concat(Ta,"/").concat(encodeURIComponent(r),"/scheduled_messages/").concat(encodeURIComponent(i)),a.params={},a}return U(n,t),n})(Ee),yG=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.message=r?ia(e,z({},r)):null,i}return U(n,t),n})(Se);(function(t){t.MUTED="muted",t.BANNED="banned"})(_N||(_N={}));var uM=(function(){function t(n){var e,r,i,a;this.restrictionType=null,Nt(_N,n.restriction_type)&&(this.restrictionType=n.restriction_type),this.description=(e=n.description)!==null&&e!==void 0?e:null,this.endAt=(i=(r=n.end_at)!==null&&r!==void 0?r:n.muted_end_at)!==null&&i!==void 0?i:-1,this.remainingDuration=(a=n.remaining_duration)!==null&&a!==void 0?a:-1}return t.payloadify=function(n){return Le(Qe({restriction_type:n.restrictionType,description:n.description,end_at:n.endAt,remaining_duration:n.remainingDuration}))},t})(),Mp=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.restrictionInfo=new uM(r),i}return U(n,t),n.payloadify=function(e){return Le(Qe(z(z({},t.payloadify.call(this,e)),uM.payloadify(e.restrictionInfo))))},n})(St),bG=(function(t){function n(e,r){var i,a=this;return(a=t.call(this,e,r)||this).isMuted=!1,a.isMuted=(i=r.is_muted)!==null&&i!==void 0&&i,a}return U(n,t),n})(St),Fs=(function(){function t(){this._onPending=it,this._onFailed=it,this._onSucceeded=it}return t.prototype._trigger=function(n){switch(n?.sendingStatus){case cn.PENDING:n.errorCode===0&&this._onPending(n);break;case cn.SCHEDULED:case cn.SUCCEEDED:this._onSucceeded(n)}},t.prototype._triggerFailed=function(n,e){switch(e?.sendingStatus){case cn.FAILED:case cn.CANCELED:this._onFailed(n,e.scheduledInfo?null:e)}},t.prototype.onPending=function(n){return this._onPending=n,this},t.prototype.onFailed=function(n){return this._onFailed=n,this},t.prototype.onSucceeded=function(n){return this._onSucceeded=n,this},t})(),n2={data:void 0,customType:void 0,mentionType:ra.USERS,mentionedUserIds:void 0,mentionedUsers:void 0,metaArrays:void 0,parentMessageId:void 0,isReplyToChannel:!1,pushNotificationDeliveryOption:void 0,appleCriticalAlertOptions:void 0,isPinnedMessage:!1,pollId:void 0},r2=function(t){return Q("string",t.data,!0)&&Q("string",t.customType,!0)&&Nt(ra,t.mentionType)&&Tt("string",t.mentionedUserIds,!0)&&Tt(St,t.mentionedUsers,!0)&&Tt(wa,t.metaArrays,!0)&&Q("number",t.parentMessageId,!0)&&Q("boolean",t.isReplyToChannel)&&Nt(Ql,t.pushNotificationDeliveryOption,!0)&&Q(sl,t.appleCriticalAlertOptions,!0)&&Q("boolean",t.isPinnedMessage,!0)&&Q("number",t.pollId,!0)},cM=function(t){return{isReplyToChannel:t.isReplyToChannel,pushNotificationDeliveryOption:t.pushNotificationDeliveryOption,pollId:t.pollId}},FD=z(z({},n2),{message:"",mentionedMessageTemplate:void 0,translationTargetLanguages:void 0,extendedMessagePayload:void 0});function HD(t){var n,e,r;return(n=t.messageParams)!==null&&n!==void 0?n:Qe(z(z({},t),{mentionType:t.mentionType,mentionedUserIds:(e=t.mentionedUserIds)!==null&&e!==void 0?e:(r=t.mentionedUsers)===null||r===void 0?void 0:r.map((function(i){return i.userId})),mentionedMessageTemplate:t.mentionedMessageTemplate,translationTargetLanguages:Object.keys(t.translations),pushNotificationDeliveryOption:Ql.DEFAULT,parentMessageId:null,isReplyToChannel:!1,isPinnedMessage:!1}))}var dp,yN=function(t){var n;return Le(Qe({data:t.data,customType:t.customType,mentionType:t.mentionType,mentionedUsers:t.mentionedUsers,mentionedUserIds:t.mentionedUserIds,mentionedMessageTemplate:t.mentionedMessageTemplate,metaArrays:t.metaArrays,pollId:(n=t.poll)===null||n===void 0?void 0:n.id,parentMessageId:t.parentMessageId,appleCriticalAlertOptions:t.appleCriticalAlertOptions,message:t.message,translationTargetLanguages:Object.keys(t.translations),extendedMessagePayload:t.extendedMessagePayload}))},jD=function(t){return r2(t)&&Q("string",t.message)&&Q("string",t.mentionedMessageTemplate,!0)&&Tt("string",t.translationTargetLanguages,!0)&&Q("object",t.extendedMessagePayload,!0)};(function(t){t.FILE="file",t.BLOB="blob",t.BLOB_LIKE_OBJECT="blobLikeObject",t.URL="url"})(dp||(dp={}));var GE=function(t){return typeof window<"u"&&"Blob"in window&&typeof Blob<"u"&&t instanceof Blob},ew=function(t){return t===dp.BLOB||t===dp.FILE},dM=function(t){return{file:t.file,fileKey:t.fileKey,fileType:t.fileType,isReplyToChannel:t.isReplyToChannel,pushNotificationDeliveryOption:t.pushNotificationDeliveryOption}},hM=z(z({},n2),{file:void 0,fileKey:void 0,fileUrl:void 0,fileName:void 0,fileType:void 0,fileSize:void 0,mimeType:void 0,thumbnailSizes:void 0,requireAuth:!1,message:void 0});function GD(t){var n,e,r,i;return(n=t.messageParams)!==null&&n!==void 0?n:Qe(z(z({},t),{fileUrl:t.plainUrl,fileName:t.name,fileSize:t.size,mimeType:t.type,mentionType:t.mentionType,mentionedUserIds:(e=t.mentionedUserIds)!==null&&e!==void 0?e:(r=t.mentionedUsers)===null||r===void 0?void 0:r.map((function(a){return a.userId})),pushNotificationDeliveryOption:Ql.DEFAULT,parentMessageId:null,isReplyToChannel:!1,thumbnailSizes:(i=t.thumbnails)===null||i===void 0?void 0:i.map((function(a){return{maxWidth:a.width,maxHeight:a.height}})),requireAuth:t.requireAuth,isPinnedMessage:!1,_thumbnails:t.thumbnails,message:t.message}))}var u0,bN=function(t,n){var e,r;return t.messageParams?(!t.url&&Ai(n)&&(t.messageParams.file=n),t.messageParams):Le(Qe({data:t.data,customType:t.customType,mentionType:t.mentionType,mentionedUsers:t.mentionedUsers,mentionedUserIds:t.mentionedUserIds,metaArrays:t.metaArrays,parentMessageId:t.parentMessageId,appleCriticalAlertOptions:t.appleCriticalAlertOptions,file:n,fileUrl:t.url,fileName:t.name,fileSize:t.size,mimeType:t.type,thumbnailSizes:(e=t.thumbnails)===null||e===void 0?void 0:e.map((function(i){return{maxWidth:i.width,maxHeight:i.height}})),message:t.message,pollId:(r=t.poll)===null||r===void 0?void 0:r.id}))},fM=function(t){return r2(t)&&(Ai(t.file)||Q("string",t.fileUrl))&&Q("string",t.fileName,!0)&&Q("string",t.mimeType,!0)&&Q("number",t.fileSize,!0)&&Q("string",t.message,!0)&&(t.thumbnailSizes===null||t.thumbnailSizes===void 0||Array.isArray(t.thumbnailSizes)&&t.thumbnailSizes.every((function(n){return Q("object",n)&&n.maxWidth>0&&n.maxHeight>0})))},uS={data:void 0,customType:void 0,mentionType:ra.USERS,mentionedUserIds:void 0,mentionedUsers:void 0,metaArrays:void 0,pushNotificationDeliveryOption:void 0,appleCriticalAlertOptions:void 0},cS=function(t){return Q("string",t.data,!0)&&Q("string",t.customType,!0)&&Nt(ra,t.mentionType)&&Tt("string",t.mentionedUserIds,!0)&&Tt(St,t.mentionedUsers,!0)&&Tt(wa,t.metaArrays,!0)&&Nt(Ql,t.pushNotificationDeliveryOption,!0)&&Q(sl,t.appleCriticalAlertOptions,!0)},VD=z(z({},uS),{message:void 0,mentionedMessageTemplate:void 0,translationTargetLanguages:void 0,pollId:void 0}),BD=function(t){return cS(t)&&Q("string",t.mentionedMessageTemplate,!0)&&Q("string",t.message,!0)&&Tt("string",t.translationTargetLanguages,!0)&&Q("number",t.pollId,!0)},EG=z({},uS),CG=(function(t){function n(e){var r=e.channelUrl,i=e.channelType,a=e.token,s=e.limit,l=t.call(this)||this;return l.method=ye.GET,l.path="".concat(Xt(i),"/").concat(encodeURIComponent(r),"/operators"),l.params={token:a,limit:s},l}return U(n,t),n})(Ee),wG=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.operators=r.operators.map((function(a){return new St(e,a)})),i.token=r.next,i}return U(n,t),n})(Se),NG=(function(t){function n(e,r,i,a){return t.call(this,e,r,i,a)||this}return U(n,t),n.prototype._validate=function(){return t.prototype._validate.call(this)},n.prototype.next=function(){return S(this,void 0,void 0,(function(){var e,r,i,a,s,l,c;return T(this,(function(d){switch(d.label){case 0:return this._validate()?this._isLoading?[3,3]:(e=[],this._hasNext?(this._isLoading=!0,r=W.of(this._iid).requestQueue,i=new CG(z(z({},this),{channelUrl:this.channelUrl,token:this._token})),[4,r.send(i)]):[3,2]):[3,5];case 1:return a=d.sent(),s=a.as(wG),l=s.operators,c=s.token,this._token=c,this._hasNext=!!c,this._isLoading=!1,[2,l];case 2:return[2,e];case 3:throw X.queryInProgress;case 4:return[3,6];case 5:throw X.invalidParameters;case 6:return[2]}}))}))},n})(Wu),TG=(function(t){function n(e,r,i,a){var s,l,c,d,p,g,_,y,C,w,A=this;return(A=t.call(this,e,r,i,a)||this).reverse=!1,A.messageTypeFilter=ea.ALL,A.customTypesFilter=null,A.senderUserIdsFilter=null,A.replyType=ta.NONE,A.includeMetaArray=!1,A.includeReactions=!1,A.includeParentMessageInfo=!1,A.includeThreadInfo=!1,A.showSubchannelMessagesOnly=!1,A._edge=Number.MAX_SAFE_INTEGER,A.reverse=(s=a.reverse)!==null&&s!==void 0&&s,A.messageTypeFilter=(l=a.messageTypeFilter)!==null&&l!==void 0?l:ea.ALL,A.customTypesFilter=(c=a.customTypesFilter)!==null&&c!==void 0?c:null,A.senderUserIdsFilter=(d=a.senderUserIdsFilter)!==null&&d!==void 0?d:null,A.replyType=(p=a.replyType)!==null&&p!==void 0?p:ta.NONE,A.includeMetaArray=(g=a.includeMetaArray)!==null&&g!==void 0&&g,A.includeReactions=(_=a.includeReactions)!==null&&_!==void 0&&_,A.includeParentMessageInfo=(y=a.includeParentMessageInfo)!==null&&y!==void 0&&y,A.includeThreadInfo=(C=a.includeThreadInfo)!==null&&C!==void 0&&C,A.showSubchannelMessagesOnly=(w=a.showSubchannelMessagesOnly)!==null&&w!==void 0&&w,A}return U(n,t),n.prototype._validate=function(){return t.prototype._validate.call(this)&&Q("boolean",this.reverse)&&Nt(ea,this.messageTypeFilter)&&Nt(ta,this.replyType)&&Tt("string",this.customTypesFilter,!0)&&Tt("string",this.senderUserIdsFilter,!0)&&Q("boolean",this.includeMetaArray)&&Q("boolean",this.includeReactions)&&Q("boolean",this.includeParentMessageInfo)&&Q("boolean",this.includeThreadInfo)&&Q("boolean",this.showSubchannelMessagesOnly)},n.prototype.load=function(){return S(this,void 0,void 0,(function(){var e;return T(this,(function(r){switch(r.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,[4,gi.of(this._iid).getMessagesByTimestamp(this.channelUrl,this.channelType,this._edge,Qe({prevResultSize:this.limit,nextResultSize:0,isInclusive:!1,reverse:this.reverse,messageTypeFilter:this.messageTypeFilter,customTypesFilter:this.customTypesFilter,replyType:this.replyType,senderUserIdsFilter:this.senderUserIdsFilter,includeReactions:this.includeReactions,includeMetaArray:this.includeMetaArray,includeParentMessageInfo:this.includeParentMessageInfo,includeThreadInfo:this.includeThreadInfo,showSubchannelMessagesOnly:this.showSubchannelMessagesOnly}))]):[3,2]:[3,5];case 1:return e=r.sent(),this._edge=Math.min.apply(Math,Je([Number.MAX_SAFE_INTEGER],Ye(e.map((function(i){return i.createdAt}))),!1)),this._hasNext=e.length>=this.limit,this._isLoading=!1,[2,e];case 2:return[2,[]];case 3:throw X.queryInProgress;case 4:return[3,6];case 5:throw X.invalidParameters;case 6:return[2]}}))}))},n})(Wu),SG=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.channelType,s=e.limit,l=e.token;return(r=t.call(this)||this).method=ye.GET,r.path="".concat(Xt(a),"/").concat(encodeURIComponent(i),"/mute"),r.params={limit:s,token:l},r}return U(n,t),n})(Ee),AG=(function(t){function n(e,r){var i=t.call(this,e,r)||this;i.mutedUsers=[];var a=r.next,s=r.muted_list;return i.token=a,s&&s.length>0&&(i.mutedUsers=s.map((function(l){return new Mp(e,l)}))),i}return U(n,t),n})(Se),IG=(function(t){function n(e,r,i,a){return t.call(this,e,r,i,a)||this}return U(n,t),n.prototype.next=function(){return S(this,void 0,void 0,(function(){var e,r,i,a,s,l;return T(this,(function(c){switch(c.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=W.of(this._iid).requestQueue,r=new SG(z(z({},this),{token:this._token})),[4,e.send(r)]):[3,2]:[3,5];case 1:return i=c.sent(),a=i.as(AG),s=a.mutedUsers,l=a.token,this._token=l,this._hasNext=!!l,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw X.queryInProgress;case 4:return[3,6];case 5:throw X.invalidParameters;case 6:return[2]}}))}))},n})(Wu),MG=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.channelType,s=e.limit,l=e.token;return(r=t.call(this)||this).method=ye.GET,r.path="".concat(Xt(a),"/").concat(encodeURIComponent(i),"/ban"),r.params=Le({limit:s,token:l}),r}return U(n,t),n})(Ee),OG=(function(t){function n(e,r){var i=t.call(this,e,r)||this;i.bannedUsers=[];var a=r.next,s=r.banned_list;return i.token=a,s&&s.length>0&&(i.bannedUsers=s.map((function(l){return new Mp(e,l.user)}))),i}return U(n,t),n})(Se),kG=(function(t){function n(e,r,i,a){return t.call(this,e,r,i,a)||this}return U(n,t),n.prototype._validate=function(){return t.prototype._validate.call(this)},n.prototype.next=function(){return S(this,void 0,void 0,(function(){var e,r,i,a,s,l;return T(this,(function(c){switch(c.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=W.of(this._iid).requestQueue,r=new MG(z(z({},this),{token:this._token})),[4,e.send(r)]):[3,2]:[3,5];case 1:return i=c.sent(),a=i.as(OG),s=a.bannedUsers,l=a.token,this._token=l,this._hasNext=!!l,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw X.queryInProgress;case 4:return[3,6];case 5:throw X.invalidParameters;case 6:return[2]}}))}))},n})(Wu);(function(t){t.SPAM="spam",t.HARASSING="harassing",t.SUSPICIOUS="suspicious",t.INAPPROPRIATE="inappropriate"})(u0||(u0={}));var RG=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.channelType,s=e.operatorUserIds;return(r=t.call(this)||this).method=ye.POST,r.path="".concat(Xt(a),"/").concat(encodeURIComponent(i),"/operators"),r.params={operator_ids:s},r}return U(n,t),n})(Ee);(function(t){function n(){return t!==null&&t.apply(this,arguments)||this}U(n,t)})(Se);var DG=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.channelType,s=e.operatorUserIds;return(r=t.call(this)||this).method=ye.DELETE,r.path="".concat(Xt(a),"/").concat(encodeURIComponent(i),"/operators"),r.params={operator_ids:s},r}return U(n,t),n})(Ee);(function(t){function n(e,r){return t.call(this,e,r)||this}U(n,t)})(Se);var xG=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.channelType,s=e.userId;return(r=t.call(this)||this).method=ye.GET,r.path="".concat(Xt(a),"/").concat(encodeURIComponent(i),"/mute/").concat(encodeURIComponent(s)),r}return U(n,t),n})(Ee),PG=(function(t){function n(e,r){var i=t.call(this,e,r)||this;i.isMuted=!1,i.startAt=0,i.endAt=0;var a=r.is_muted,s=r.start_at,l=r.end_at,c=r.remaining_duration,d=r.description;return i.isMuted=a,i.startAt=s,i.endAt=l,i.remainingDuration=c,i.description=d,i}return U(n,t),n})(Se),pM=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.channelType,s=e.keys;return(r=t.call(this)||this).method=ye.GET,r.path="".concat(Xt(a),"/").concat(encodeURIComponent(i),"/metadata"),r.params={keys:s,include_ts:!0},r}return U(n,t),n})(Ee),mM=(function(t){function n(e,r){var i=t.call(this,e,r)||this,a=r.metadata,s=r.ts;return i.metadata=a,i.ts=s,i}return U(n,t),n})(Se),UG=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.channelType,s=e.metadata;return(r=t.call(this)||this).method=ye.POST,r.path="".concat(Xt(a),"/").concat(encodeURIComponent(i),"/metadata"),r.params={metadata:s,include_ts:!0},r}return U(n,t),n})(Ee),LG=(function(t){function n(e,r){var i,a,s=this;return(s=t.call(this,e,r)||this).metaData=(i=r.metadata)!==null&&i!==void 0?i:{},s.ts=(a=r.ts)!==null&&a!==void 0?a:null,s}return U(n,t),n})(Se),FG=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.channelType,s=e.metadata,l=e.upsert;return(r=t.call(this)||this).method=ye.PUT,r.path="".concat(Xt(a),"/").concat(encodeURIComponent(i),"/metadata"),r.params={metadata:s,include_ts:!0,upsert:l!=null&&l},r}return U(n,t),n})(Ee),HG=(function(t){function n(e,r){var i=t.call(this,e,r)||this,a=r.metadata,s=r.ts;return i.metadata=a,i.ts=s,i}return U(n,t),n})(Se),zD=(function(t){function n(e,r,i){var a=t.call(this,e,"SYEV",i)||this;return i.data&&(a.created=i.data.created,a.updated=i.data.updated,a.deleted=i.data.deleted),a}return U(n,t),n})(Xn),jG=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.channelType,s=e.key;return(r=t.call(this)||this).method=ye.DELETE,r.path="".concat(Xt(a),"/").concat(encodeURIComponent(i),"/metadata/").concat(s),r.params={include_ts:!0},r}return U(n,t),n})(Ee),GG=(function(t){function n(e,r){var i=t.call(this,e,r)||this,a=r.ts;return i.ts=a,i}return U(n,t),n})(Se),VG=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.channelType;return(r=t.call(this)||this).method=ye.DELETE,r.path="".concat(Xt(a),"/").concat(encodeURIComponent(i),"/metadata"),r.params={include_ts:!0},r}return U(n,t),n})(Ee),BG=(function(t){function n(e,r){var i=t.call(this,e,r)||this,a=r.ts;return i.ts=a,i}return U(n,t),n})(Se),gM=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.channelType,s=e.keys;return(r=t.call(this)||this).method=ye.GET,r.path="".concat(Xt(a),"/").concat(encodeURIComponent(i),"/metacounter"),r.params={keys:s},r}return U(n,t),n})(Ee),vM=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.metaCounter=r,i}return U(n,t),n})(Se),zG=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.channelType,s=e.metaCounter;return(r=t.call(this)||this).method=ye.POST,r.path="".concat(Xt(a),"/").concat(encodeURIComponent(i),"/metacounter"),r.params={metacounter:s},r}return U(n,t),n})(Ee),qG=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.metaCounter=r,i}return U(n,t),n})(Se),tw=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.channelType,s=e.metaCounter,l=e.upsert,c=l!==void 0&&l,d=e.mode,p=d===void 0?"set":d;return(r=t.call(this)||this).method=ye.PUT,r.path="".concat(Xt(a),"/").concat(encodeURIComponent(i),"/metacounter"),r.params={metacounter:s,upsert:c,mode:p},r}return U(n,t),n})(Ee),nw=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.metaCounter=r,i}return U(n,t),n})(Se),qD=(function(t){function n(e,r,i){var a=t.call(this,e,"SYEV",i)||this;return i.data&&(a.created=i.data.created,a.updated=i.data.updated,a.deleted=i.data.deleted),a}return U(n,t),n})(Xn),WG=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.channelType,s=e.key;return(r=t.call(this)||this).method=ye.DELETE,r.path="".concat(Xt(a),"/").concat(encodeURIComponent(i),"/metacounter/").concat(s),r.params={},r}return U(n,t),n})(Ee);(function(t){function n(e,r){return t.call(this,e,r)||this}U(n,t)})(Se);var KG=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.channelType;return(r=t.call(this)||this).method=ye.DELETE,r.path="".concat(Xt(a),"/").concat(encodeURIComponent(i),"/metacounter"),r.params={},r}return U(n,t),n})(Ee);(function(t){function n(){return t!==null&&t.apply(this,arguments)||this}U(n,t)})(Se);var YG=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.channelType,s=e.userId,l=e.seconds,c=e.description;return(r=t.call(this)||this).method=ye.POST,r.path="".concat(Xt(a),"/").concat(encodeURIComponent(i),"/mute"),r.params={user_id:s,seconds:l,description:c},r}return U(n,t),n})(Ee);(function(t){function n(e,r){return t.call(this,e,r)||this}U(n,t)})(Se);var WD=(function(t){function n(e,r,i){var a=t.call(this,e,"SYEV",i)||this;return a.user=new Mp(e,i.data),a}return U(n,t),n})(Xn),QG=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.channelType,s=e.userId;return(r=t.call(this)||this).method=ye.DELETE,r.path="".concat(Xt(a),"/").concat(encodeURIComponent(i),"/mute/").concat(encodeURIComponent(s)),r}return U(n,t),n})(Ee);(function(t){function n(){return t!==null&&t.apply(this,arguments)||this}U(n,t)})(Se);var KD=(function(t){function n(e,r,i){var a=t.call(this,e,"SYEV",i)||this;return a.user=new Mp(e,i.data),a}return U(n,t),n})(Xn),$G=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.channelType,s=e.userId,l=e.seconds,c=e.description;return(r=t.call(this)||this).method=ye.POST,r.path="".concat(Xt(a),"/").concat(encodeURIComponent(i),"/ban"),r.params=Le({user_id:s,seconds:l,description:c}),r}return U(n,t),n})(Ee);(function(t){function n(){return t!==null&&t.apply(this,arguments)||this}U(n,t)})(Se);var YD=(function(t){function n(e,r,i){var a=t.call(this,e,"SYEV",i)||this;return a.user=new Mp(e,i.data),i.data.member_count&&(a.memberCount=i.data.member_count),i.data.joined_member_count&&(a.joinedMemberCount=i.data.joined_member_count),a}return U(n,t),n})(Xn),XG=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.channelType,s=e.userId;return(r=t.call(this)||this).method=ye.DELETE,r.path="".concat(Xt(a),"/").concat(encodeURIComponent(i),"/ban/").concat(encodeURIComponent(s)),r}return U(n,t),n})(Ee);(function(t){function n(){return t!==null&&t.apply(this,arguments)||this}U(n,t)})(Se);var QD=(function(t){function n(e,r,i){var a=t.call(this,e,"SYEV",i)||this;return a.user=new Mp(e,i.data),a}return U(n,t),n})(Xn),_M=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.channelType,s=e.freezing;return(r=t.call(this)||this).method=ye.PUT,r.path="".concat(Xt(a),"/").concat(encodeURIComponent(i),"/freeze"),r.params={freeze:s},r}return U(n,t),n})(Ee);(function(t){function n(){return t!==null&&t.apply(this,arguments)||this}U(n,t)})(Se);var $D=(function(t){function n(e,r,i){var a=t.call(this,e,"SYEV",i)||this;return a.freeze=i.data.freeze,a}return U(n,t),n})(Xn),dS=function(t){return t instanceof hg?t._custom?"custom":t.name:t},hS=function(t){if(t instanceof hg&&t._custom)return t.name},ZG=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.channelType,s=e.category,l=e.userId,c=e.description;return(r=t.call(this)||this).method=ye.POST,r.path="".concat(LR(a),"/").concat(encodeURIComponent(i)),r.params=Le({report_category:dS(s),reporting_user_id:l,report_description:c,custom_report_category_name:hS(s)}),r}return U(n,t),n})(Ee),JG=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.channelType,s=e.category,l=e.userId,c=e.offendingUserId,d=e.description;return(r=t.call(this)||this).method=ye.POST,r.path="".concat(sN,"/users/").concat(c),r.params=Le({channel_url:i,channel_type:a===Rt.OPEN?"open_channels":"group_channels",report_category:dS(s),reporting_user_id:l,report_description:d,custom_report_category_name:hS(s)}),r}return U(n,t),n})(Ee),eV=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.channelType,s=e.category,l=e.userId,c=e.offendingUserId,d=e.messageId,p=e.description;return(r=t.call(this)||this).method=ye.POST,r.path="".concat(LR(a),"/").concat(encodeURIComponent(i),"/messages/").concat(d),r.params=Le({report_category:dS(s),reporting_user_id:l,report_description:p,offending_user_id:c,custom_report_category_name:hS(s)}),r}return U(n,t),n})(Ee),tV=(function(t){function n(e){var r=[];return e.mentionType===ra.USERS&&(e.mentionedUserIds?r=e.mentionedUserIds:e.mentionedUsers&&(r=e.mentionedUsers.map((function(i){return i.userId})))),t.call(this,{code:"MESG",ackRequired:!0,payload:Le(Qe({channel_url:e.channelUrl,message:e.message,data:e.data,custom_type:e.customType,metaarray:e.metaArrays,mention_type:e.mentionType,mentioned_user_ids:r,mentioned_message_template:e.mentionedMessageTemplate,target_langs:e.translationTargetLanguages,push_option:e.pushNotificationDeliveryOption&&e.pushNotificationDeliveryOption!==Ql.DEFAULT?e.pushNotificationDeliveryOption:void 0,apple_critical_alert_options:e.appleCriticalAlertOptions,silent:e.silent,reply_to_channel:e.isReplyToChannel,parent_message_id:e.parentMessageId?e.parentMessageId:null,req_id:e.reqId,poll_id:e.pollId,pin_message:e.isPinnedMessage,extended_message_payload:e.extendedMessagePayload}))})||this}return U(n,t),n})(na),fS=(function(t){function n(e,r,i){var a,s,l,c,d=this;(d=t.call(this,e,"MESG",i)||this).message=new Ji(e,i);var p=W.of(e).sdkState;return d.isMentioned=vg(d.message.mentionType,(l=(a=d.message.mentionedUserIds)!==null&&a!==void 0?a:(s=d.message.mentionedUsers)===null||s===void 0?void 0:s.map((function(g){return g.userId})))!==null&&l!==void 0?l:[],p.userId),d.forceUpdateLastMessage=(c=i.force_update_last_message)!==null&&c!==void 0&&c,d}return U(n,t),n})(Xn),yM=(function(t){function n(e){var r=null;return e.mentionType===ra.USERS&&(e.mentionedUserIds?r=e.mentionedUserIds:e.mentionedUsers&&(r=e.mentionedUsers.map((function(i){return i.userId})))),t.call(this,{code:"MEDI",ackRequired:!0,payload:Le(Qe({channel_url:e.channelUrl,msg_id:e.messageId,message:e.message,data:e.data,custom_type:e.customType,metaarray:e.metaArrayParams,mention_type:e.mentionType,mentioned_user_ids:r,mentioned_message_template:e.mentionedMessageTemplate,apple_critical_alert_options:e.appleCriticalAlertOptions?sl.payloadify(e.appleCriticalAlertOptions):null,poll_id:e.pollId}))})||this}return U(n,t),n})(na),_1=(function(t){function n(e,r,i){var a,s,l,c,d,p=this;(p=t.call(this,e,"MEDI",i)||this).message=new Ji(e,i);var g=W.of(e).sdkState;return p.mentionCountChange=Q3({mentionType:(a=i.old_values)===null||a===void 0?void 0:a.mention_type,mentionedUserIds:(l=(s=i.old_values)===null||s===void 0?void 0:s.mentioned_user_ids)!==null&&l!==void 0?l:[]},Qe({mentionType:p.message.mentionType,mentionedUserIds:(c=p.message.mentionedUserIds)!==null&&c!==void 0?c:(d=p.message.mentionedUsers)===null||d===void 0?void 0:d.map((function(_){return _.userId}))}),g.userId),p}return U(n,t),n})(Xn),bM=(function(t){function n(e){var r=null;return e.mentionType===ra.USERS&&(e.mentionedUserIds?r=e.mentionedUserIds:e.mentionedUsers&&(r=e.mentionedUsers.map((function(i){return i.userId})))),t.call(this,{code:"FEDI",ackRequired:!0,payload:Le(Qe({channel_url:e.channelUrl,msg_id:e.messageId,data:e.data,custom_type:e.customType,metaarray:e.metaArrayParams,mention_type:e.mentionType,mentioned_user_ids:r,apple_critical_alert_options:e.appleCriticalAlertOptions}))})||this}return U(n,t),n})(na),y1=(function(t){function n(e,r,i){var a,s,l,c,d,p=this;(p=t.call(this,e,"FEDI",i)||this).message=new Xr(e,i);var g=W.of(e).sdkState;return p.mentionCountChange=Q3({mentionType:(a=i.old_values)===null||a===void 0?void 0:a.mention_type,mentionedUserIds:(l=(s=i.old_values)===null||s===void 0?void 0:s.mentioned_user_ids)!==null&&l!==void 0?l:[]},Qe({mentionType:p.message.mentionType,mentionedUserIds:(c=p.message.mentionedUserIds)!==null&&c!==void 0?c:(d=p.message.mentionedUsers)===null||d===void 0?void 0:d.map((function(_){return _.userId}))}),g.userId),p}return U(n,t),n})(Xn),nV=(function(t){function n(e){var r=e.channelType,i=e.channelUrl,a=e.messageId,s=e.reactionKey,l=t.call(this)||this;return l.method=ye.POST,l.path="".concat(Xt(r),"/").concat(encodeURIComponent(i),"/messages/").concat(a,"/reactions"),l.params={reaction:s},l}return U(n,t),n})(Ee),rV=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.reactionEvent=new oS(r),i}return U(n,t),n})(Se),iV=(function(t){function n(e){var r=e.channelType,i=e.channelUrl,a=e.messageId,s=e.reactionKey,l=t.call(this)||this;return l.method=ye.DELETE,l.path="".concat(Xt(r),"/").concat(encodeURIComponent(i),"/messages/").concat(a,"/reactions"),l.params={reaction:s},l}return U(n,t),n})(Ee),aV=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.reactionEvent=new oS(z({},r)),i}return U(n,t),n})(Se),sV=(function(t){function n(e){var r=e.channelType,i=e.channelUrl,a=e.messageId,s=e.translationTargetLanguages,l=t.call(this)||this;return l.method=ye.POST,l.path="".concat(Xt(r),"/").concat(encodeURIComponent(i),"/messages/").concat(encodeURIComponent(a),"/translation"),l.params={target_langs:s},l}return U(n,t),n})(Ee),oV=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.message=new Ji(e,r),i}return U(n,t),n})(Se),lV=(function(t){function n(e){var r,i=this;i=t.call(this)||this;var a=[];e.mentionType===ra.USERS&&(e.mentionedUserIds?a=e.mentionedUserIds:e.mentionedUsers&&(a=e.mentionedUsers.map((function(c){return c.userId}))));var s=e.channelType,l=e.channelUrl;return i.method=ye.POST,i.path="".concat(Xt(s),"/").concat(encodeURIComponent(l),"/scheduled_messages"),i.params=Le(Qe({req_id:e.reqId,scheduled_at:e.scheduledAt,message_type:gg.USER,message:e.message,custom_type:e.customType,data:e.data,mention_type:e.mentionType,mentioned_user_ids:a,sorted_metaarray:(r=e.metaArrays)===null||r===void 0?void 0:r.map((function(c){return wa.payloadify(c)})),apple_critical_alert_options:e.appleCriticalAlertOptions?sl.payloadify(e.appleCriticalAlertOptions):null,target_langs:e.translationTargetLanguages,push_option:e.pushNotificationDeliveryOption})),i}return U(n,t),n})(Ee),XD=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.message=new Ji(e,r),i}return U(n,t),n})(Se),uV=(function(t){function n(e){var r,i,a=this;a=t.call(this)||this;var s=[];e.mentionType===ra.USERS&&(e.mentionedUserIds?s=e.mentionedUserIds:e.mentionedUsers&&(s=e.mentionedUsers.map((function(d){return d.userId}))));var l=e.channelType,c=e.channelUrl;return a.method=ye.POST,a.path="".concat(Xt(l),"/").concat(encodeURIComponent(c),"/scheduled_messages"),a.params=Qe({req_id:e.reqId,scheduled_at:e.scheduledAt,message_type:gg.FILE,url:e.fileUrl,file_name:e.fileName,file_size:e.fileSize,file_type:e.mimeType,thumbnails:(r=e._thumbnails)===null||r===void 0?void 0:r.map((function(d){return Qc.payloadify(d)})),custom_type:e.customType,data:e.data,require_auth:e.requireAuth,mention_type:e.mentionType,mentioned_user_ids:s,sorted_metaarray:(i=e.metaArrays)===null||i===void 0?void 0:i.map((function(d){return wa.payloadify(d)})),apple_critical_alert_options:e.appleCriticalAlertOptions?sl.payloadify(e.appleCriticalAlertOptions):null,push_option:e.pushNotificationDeliveryOption}),a}return U(n,t),n})(Ee),cV=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.message=new Xr(e,r),i}return U(n,t),n})(Se),dV=(function(t){function n(e){var r=e.pollId,i=e.title,a=e.data,s=e.allowUserSuggestion,l=e.allowMultipleVotes,c=e.closeAt,d=t.call(this)||this;return d.method=ye.PUT,d.path="".concat($l,"/").concat(encodeURIComponent(r)),d.params={title:i,data:a,allow_user_suggestion:s,allow_multiple_votes:l,close_at:c},d}return U(n,t),n})(Ee),hV=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.poll=new al(e,r),i}return U(n,t),n})(Se),fV=(function(t){function n(e){var r=e.pollId,i=t.call(this)||this;return i.method=ye.DELETE,i.path="".concat($l,"/").concat(encodeURIComponent(r)),i}return U(n,t),n})(Ee);(function(t){function n(){return t!==null&&t.apply(this,arguments)||this}U(n,t)})(Se);var pV=(function(t){function n(e){var r=e.pollId,i=t.call(this)||this;return i.method=ye.PUT,i.path="".concat($l,"/").concat(encodeURIComponent(r),"/close"),i}return U(n,t),n})(Ee),mV=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.poll=new al(e,r),i}return U(n,t),n})(Se),gV=(function(t){function n(e){var r=e.channelUrl,i=e.channelType,a=e.pollId,s=e.optionText,l=t.call(this)||this;return l.method=ye.POST,l.path="".concat($l,"/").concat(encodeURIComponent(a),"/options"),l.params={channel_url:r,channel_type:i,text:s},l}return U(n,t),n})(Ee),vV=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.poll=new al(e,r),i}return U(n,t),n})(Se),_V=(function(t){function n(e){var r=e.pollId,i=e.pollOptionId,a=e.optionText,s=t.call(this)||this;return s.method=ye.PUT,s.path="".concat($l,"/").concat(encodeURIComponent(r),"/options/").concat(encodeURIComponent(i)),s.params={text:a},s}return U(n,t),n})(Ee),yV=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.poll=new al(e,r),i}return U(n,t),n})(Se),bV=(function(t){function n(e){var r=e.pollId,i=e.pollOptionId,a=t.call(this)||this;return a.method=ye.DELETE,a.path="".concat($l,"/").concat(encodeURIComponent(r),"/options/").concat(encodeURIComponent(i)),a}return U(n,t),n})(Ee);(function(t){function n(){return t!==null&&t.apply(this,arguments)||this}U(n,t)})(Se);var EV=(function(t){function n(e){var r=e.reqId,i=e.channelType,a=e.channelUrl,s=e.pollId,l=e.pollOptionIds;return t.call(this,{code:"VOTE",ackRequired:!0,payload:Le({req_id:r,channel_type:i===Rt.OPEN?"open_channels":"group_channels",channel_url:a,poll_id:s,option_ids:l})})||this}return U(n,t),n})(na),pS=(function(t){function n(e,r,i){var a=t.call(this,e,"VOTE",i)||this;return a.event=new Lj(i),a.channelUrl=i.channel_url,a.channelType=i.channel_type,a}return U(n,t),n})(Xn),ZD=100,JD="GroupChannel",CV="url",ex=100,mS="Message",wV="messageId",tx="NotificationMessage",NV="notificationId",TV="Poll",SV="pollId",AV="FeedChannel",IV="url",nx="UserInfo",MV="userId";function OV(t){var n,e,r;return(n=t.messageParams)!==null&&n!==void 0?n:Qe(z(z({},t),{isReplyToChannel:!1,mentionedUserIds:(e=t.mentionedUserIds)!==null&&e!==void 0?e:(r=t.mentionedUsers)===null||r===void 0?void 0:r.map((function(i){return i.userId})),pushNotificationDeliveryOption:Ql.DEFAULT,isPinnedMessage:!1,fileInfoList:t.fileInfoList.map((function(i){var a;return{fileUrl:i.plainUrl,fileName:i.fileName,fileSize:i.fileSize,mimeType:i.mimeType,thumbnailSizes:(a=i.thumbnails)===null||a===void 0?void 0:a.map((function(s){return{maxWidth:s.width,maxHeight:s.height}})),_thumbnails:i.thumbnails,_uploadedMetaData:{requireAuth:i._requireAuth,isUploaded:!0}}}))}))}var kV=z(z({},n2),{fileInfoList:[],message:""}),RV=function(t){return(Ai(t.file)||Q("string",t.fileUrl))&&Q("string",t.fileName,!0)&&Q("string",t.mimeType,!0)&&Q("number",t.fileSize,!0)&&(t.thumbnailSizes===void 0||Array.isArray(t.thumbnailSizes)&&t.thumbnailSizes.every((function(n){return n.maxWidth>0&&n.maxHeight>0})))},VE=(function(t){function n(){var e=t!==null&&t.apply(this,arguments)||this;return e._onFileUploaded=it,e}return U(n,t),n.prototype._triggerOnFileUploaded=function(e,r,i,a){this._onFileUploaded(e,r,i,a)},n.prototype.onFileUploaded=function(e){return this._onFileUploaded=e,this},n.prototype.onPending=function(e){return t.prototype.onPending.call(this,e),this},n.prototype.onFailed=function(e){return t.prototype.onFailed.call(this,e),this},n.prototype.onSucceeded=function(e){return t.prototype.onSucceeded.call(this,e),this},n})(Fs),DV=(function(t){function n(e,r){var i=t.call(this,e)||this;return i.message=null,i.message=ia(e,r.message),i}return U(n,t),n})(ei),xV=(function(t){function n(e){var r=this,i=e.channelType,a=e.channelUrl,s=e.limit,l=e.token,c=e.includeReactions,d=e.includeMetaArray,p=e.includeParentMessageInfo,g=e.includeThreadInfo,_=e.includePollDetails;return(r=t.call(this)||this).method=ye.GET,r.path="".concat(Xt(i),"/").concat(encodeURIComponent(a),"/pinned_messages"),r.params=Le({limit:s,token:l,include_reactions_summary:c,with_sorted_meta_array:d,include_thread_info:g,include_parent_message_info:p,include_poll_details:_}),r}return U(n,t),n})(Ee),PV=(function(t){function n(e,r){var i=t.call(this,e,r)||this,a=r.pinned_messages,s=r.has_more,l=r.next;return i.pinnedMessages=a.map((function(c){return new DV(e,c)})),i.hasMore=s,i.token=l,i}return U(n,t),n})(Se),UV=(function(t){function n(e,r,i,a){var s=t.call(this,e,r,i,a)||this;return s.includeMetaArray=a.includeMetaArray,s.includeReactions=a.includeReactions,s.includeParentMessageInfo=a.includeParentMessageInfo,s.includeThreadInfo=a.includeThreadInfo,s.includePollDetails=a.includePollDetails,s}return U(n,t),n.prototype._validate=function(){return t.prototype._validate.call(this)&&Q("boolean",this.includeMetaArray,!0)&&Q("boolean",this.includeReactions,!0)&&Q("boolean",this.includeParentMessageInfo,!0)&&Q("boolean",this.includeThreadInfo,!0)&&Q("boolean",this.includePollDetails,!0)},n.prototype.next=function(){return S(this,void 0,void 0,(function(){var e,r,i,a,s,l,c;return T(this,(function(d){switch(d.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=W.of(this._iid).requestQueue,r=new xV(z(z({},this),{token:this._token})),[4,e.send(r)]):[3,2]:[3,5];case 1:return i=d.sent(),a=i.as(PV),s=a.pinnedMessages,l=a.hasMore,c=a.token,this._token=c,this._hasNext=!!l,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw X.queryInProgress;case 4:return[3,6];case 5:throw X.invalidParameters;case 6:return[2]}}))}))},n})(Wu),LV=(function(t){function n(e){var r=e.channelType,i=e.channelUrl,a=e.messageId,s=t.call(this)||this;return s.method=ye.POST,s.path="".concat(Xt(r),"/").concat(encodeURIComponent(i),"/messages/").concat(a,"/pin"),s}return U(n,t),n})(Ee);(function(t){function n(e,r){return t.call(this,e,r)||this}U(n,t)})(Se);var FV=(function(t){function n(e){var r=e.channelType,i=e.channelUrl,a=e.messageId,s=t.call(this)||this;return s.method=ye.DELETE,s.path="".concat(Xt(r),"/").concat(encodeURIComponent(i),"/messages/").concat(a,"/pin"),s}return U(n,t),n})(Ee);(function(t){function n(e,r){return t.call(this,e,r)||this}U(n,t)})(Se);var Xi,HV=2;(function(t){t.SEND="send",t.RESEND="resend",t.COPY="copy"})(Xi||(Xi={}));var pr,b1=(function(t){function n(e,r){var i,a,s,l,c,d,p,g=this;return(g=t.call(this,e)||this)._name="",g._createdAt=0,g.pinnedMessageIds=[],g.channelType=Rt.BASE,g.coverUrl="",g.customType="",g.data="",g.isFrozen=!1,g.isEphemeral=!1,g.creator=null,g._messageCollectionLastAccessedAt=0,g._url=r.channel_url,g._name=(i=r.name)!==null&&i!==void 0?i:"",g._createdAt=1e3*r.created_at,g.coverUrl=(a=r.cover_url)!==null&&a!==void 0?a:"",g.customType=(s=r.custom_type)!==null&&s!==void 0?s:"",g.data=(l=r.data)!==null&&l!==void 0?l:"",g.isFrozen=(c=r.freeze)!==null&&c!==void 0&&c,g.isEphemeral=(d=r.is_ephemeral)!==null&&d!==void 0&&d,g.creator=r.created_by?new St(g._iid,r.created_by):null,r.metadata&&Object.keys(r.metadata).length>0&&r.ts?(g._cachedMetaData=new Map,Object.keys(r.metadata).forEach((function(_){g._cachedMetaData.set(_,{value:r.metadata[_],isRemoved:!1,updatedAt:r.ts})}))):typeof r.metadata=="string"&&(g._cachedMetaData=new Map(Object.entries(JSON.parse(r.metadata)))),g.pinnedMessageIds=(p=r.pinned_message_ids)!==null&&p!==void 0?p:[],g}return U(n,t),Object.defineProperty(n.prototype,"url",{get:function(){return this._url},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"name",{get:function(){return this._name},set:function(e){this._name=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"createdAt",{get:function(){return this._createdAt},enumerable:!1,configurable:!0}),n.prototype.toJSON=function(){return z(z({},this),{url:this._url,name:this._name,createdAt:this._createdAt})},n.payloadify=function(e,r){r===void 0&&(r=!1);var i=z(z({},t.payloadify.call(this,e)),{channel_url:e.url,name:e.name,cover_url:e.coverUrl,custom_type:e.customType,data:e.data,freeze:e.isFrozen,is_ephemeral:e.isEphemeral,created_by:e.creator?St.payloadify(e.creator):null,created_at:e.createdAt/1e3,metadata:e.cachedMetaData,pinned_message_ids:e.pinnedMessageIds});return r?i:Le(Qe(i))},n.prototype.isGroupChannel=function(){return this.channelType===Rt.GROUP},n.prototype.isOpenChannel=function(){return this.channelType===Rt.OPEN},n.prototype.isFeedChannel=function(){return this.channelType===Rt.FEED},Object.defineProperty(n.prototype,"cachedMetaData",{get:function(){var e={};return this._cachedMetaData&&this._cachedMetaData.forEach((function(r,i){r.isRemoved||(e[i]=r.value)})),e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"messageCollectionLastAccessedAt",{get:function(){return this._messageCollectionLastAccessedAt},enumerable:!1,configurable:!0}),n.prototype._serializeCachedMetaData=function(){return this._cachedMetaData?{cachedMetaData:JSON.stringify(Object.fromEntries(this._cachedMetaData))}:{}},n.prototype._updateMessageCollectionLastAccessedAt=function(){this._messageCollectionLastAccessedAt=Date.now()},n.prototype._update=function(e){Object.assign(this,e)},n.prototype._upsertCachedMetaData=function(e,r){var i=this;Object.keys(e).forEach((function(a){i._cachedMetaData||(i._cachedMetaData=new Map);var s=i._cachedMetaData.get(a);(!s||s.updatedAt<=r)&&i._cachedMetaData.set(a,{value:e[a],isRemoved:!1,updatedAt:r})}))},n.prototype._updateCachedMetaData=function(e,r){var i=this,a=!1;return this._cachedMetaData?this._cachedMetaData.forEach((function(s,l){var c;s.updatedAt<=r&&(i._cachedMetaData.set(l,{value:(c=e[l])!==null&&c!==void 0?c:s.value,isRemoved:!e[l],updatedAt:r}),a=!0)})):(this._cachedMetaData=new Map,Object.keys(e).forEach((function(s){i._cachedMetaData.set(s,{value:e[s],isRemoved:!1,updatedAt:r})})),a=!0),{isUpdated:a}},n.prototype._removeFromCachedMetaData=function(e,r){var i=this;this._cachedMetaData&&e.forEach((function(a){var s=i._cachedMetaData.get(a);s&&s.updatedAt<r&&(s.isRemoved=!0,s.updatedAt=r)}))},n.prototype._clearCachedMetaData=function(){this._cachedMetaData&&this._cachedMetaData.clear()},n.prototype._runIfHandleableWithGroupChannel=function(e){this.isGroupChannel()?e(this):this.isFeedChannel()&&e(this.groupChannel)},n.prototype._generateRequestId=function(){return"rq-".concat(So())},n.prototype.isIdentical=function(e){return e&&this.url===e.url},n.prototype.isEqual=function(e){return OR(this,e)},n.prototype.createOperatorListQuery=function(e){return e===void 0&&(e={}),new NG(this._iid,this.url,this.channelType,e)},n.prototype.createMutedUserListQuery=function(e){return e===void 0&&(e={}),new IG(this._iid,this.url,this.channelType,e)},n.prototype.createBannedUserListQuery=function(e){return e===void 0&&(e={}),new kG(this._iid,this.url,this.channelType,e)},n.prototype.createPreviousMessageListQuery=function(e){return e===void 0&&(e={}),new TG(this._iid,this.url,this.channelType,e)},n.prototype.createPinnedMessageListQuery=function(e){return e===void 0&&(e={}),new UV(this._iid,this.url,this.channelType,e)},n.prototype.addOperators=function(e){return S(this,void 0,void 0,(function(){var r,i;return T(this,(function(a){switch(a.label){case 0:return Te(Tt("string",e)).throw(X.invalidParameters),r=W.of(this._iid).requestQueue,i=new RG({channelUrl:this.url,channelType:this.channelType,operatorUserIds:e}),[4,r.send(i)];case 1:return a.sent(),[2]}}))}))},n.prototype.removeOperators=function(e){return S(this,void 0,void 0,(function(){var r,i;return T(this,(function(a){switch(a.label){case 0:return Te(Tt("string",e)).throw(X.invalidParameters),r=W.of(this._iid).requestQueue,i=new DG({channelUrl:this.url,channelType:this.channelType,operatorUserIds:e}),[4,r.send(i)];case 1:return a.sent(),[2]}}))}))},n.prototype.getMyMutedInfo=function(){return S(this,void 0,void 0,(function(){var e,r,i,a,s,l,c,d,p,g,_;return T(this,(function(y){switch(y.label){case 0:return e=W.of(this._iid),r=e.sdkState,i=e.requestQueue,a=new xG({channelUrl:this.url,channelType:this.channelType,userId:r.userId}),[4,i.send(a)];case 1:return s=y.sent(),l=s.as(PG),c=l.isMuted,d=l.startAt,p=l.endAt,g=l.remainingDuration,_=l.description,[2,{isMuted:c,startAt:d,endAt:p,remainingDuration:g,description:_}]}}))}))},n.prototype.getMetaData=function(e){return S(this,void 0,void 0,(function(){var r,i,a,s,l,c;return T(this,(function(d){switch(d.label){case 0:return Te(Tt("string",e)).throw(X.invalidParameters),r=W.of(this._iid).requestQueue,i=new pM({channelUrl:this.url,channelType:this.channelType,keys:e}),[4,r.send(i)];case 1:return a=d.sent(),s=a.as(mM),l=s.metadata,c=s.ts,this._upsertCachedMetaData(l,c),[2,l]}}))}))},n.prototype.getAllMetaData=function(){return S(this,void 0,void 0,(function(){var e,r,i,a,s,l;return T(this,(function(c){switch(c.label){case 0:return e=W.of(this._iid).requestQueue,r=new pM({channelUrl:this.url,channelType:this.channelType,keys:[]}),[4,e.send(r)];case 1:return i=c.sent(),a=i.as(mM),s=a.metadata,l=a.ts,this._updateCachedMetaData(s,l),[2,s]}}))}))},n.prototype.createMetaData=function(e){return S(this,void 0,void 0,(function(){var r,i,a,s;return T(this,(function(l){switch(l.label){case 0:return r=W.of(this._iid).requestQueue,i=new UG({channelUrl:this.url,channelType:this.channelType,metadata:e}),[4,r.send(i)];case 1:return a=l.sent(),s=a.as(LG).metaData,this._upsertCachedMetaData(s,0),[2,s]}}))}))},n.prototype.updateMetaData=function(e,r){return r===void 0&&(r=!1),S(this,void 0,void 0,(function(){var i,a,s,l,c,d;return T(this,(function(p){switch(p.label){case 0:return i=W.of(this._iid).requestQueue,a=new FG({channelUrl:this.url,channelType:this.channelType,metadata:e,upsert:r}),[4,i.send(a)];case 1:return s=p.sent(),l=s.as(HG),c=l.metadata,d=l.ts,this._upsertCachedMetaData(c,d),[2,c]}}))}))},n.prototype.deleteMetaData=function(e){return S(this,void 0,void 0,(function(){var r,i,a,s;return T(this,(function(l){switch(l.label){case 0:return Te(Q("string",e)).throw(X.invalidParameters),r=W.of(this._iid).requestQueue,i=new jG({channelUrl:this.url,channelType:this.channelType,key:e}),[4,r.send(i)];case 1:return a=l.sent(),s=a.as(GG).ts,this._removeFromCachedMetaData([e],s),[2]}}))}))},n.prototype.deleteAllMetaData=function(){return S(this,void 0,void 0,(function(){var e,r,i,a;return T(this,(function(s){switch(s.label){case 0:return e=W.of(this._iid).requestQueue,r=new VG({channelUrl:this.url,channelType:this.channelType}),[4,e.send(r)];case 1:return i=s.sent(),a=i.as(BG).ts,this._removeFromCachedMetaData(Je([],Ye(this._cachedMetaData.keys()),!1),a),[2]}}))}))},n.prototype.getMetaCounters=function(e){return S(this,void 0,void 0,(function(){var r,i,a;return T(this,(function(s){switch(s.label){case 0:return Te(Tt("string",e)).throw(X.invalidParameters),r=W.of(this._iid).requestQueue,i=new gM({channelUrl:this.url,channelType:this.channelType,keys:e}),[4,r.send(i)];case 1:return a=s.sent(),[2,a.as(vM).metaCounter]}}))}))},n.prototype.getAllMetaCounters=function(){return S(this,void 0,void 0,(function(){var e,r,i;return T(this,(function(a){switch(a.label){case 0:return e=W.of(this._iid).requestQueue,r=new gM({channelUrl:this.url,channelType:this.channelType,keys:[]}),[4,e.send(r)];case 1:return i=a.sent(),[2,i.as(vM).metaCounter]}}))}))},n.prototype.createMetaCounters=function(e){return S(this,void 0,void 0,(function(){var r,i,a;return T(this,(function(s){switch(s.label){case 0:return r=W.of(this._iid).requestQueue,i=new zG({channelUrl:this.url,channelType:this.channelType,metaCounter:e}),[4,r.send(i)];case 1:return a=s.sent(),[2,a.as(qG).metaCounter]}}))}))},n.prototype.updateMetaCounters=function(e,r){return r===void 0&&(r=!1),S(this,void 0,void 0,(function(){var i,a,s;return T(this,(function(l){switch(l.label){case 0:return i=W.of(this._iid).requestQueue,a=new tw({channelUrl:this.url,channelType:this.channelType,metaCounter:e,upsert:r}),[4,i.send(a)];case 1:return s=l.sent(),[2,s.as(nw).metaCounter]}}))}))},n.prototype.increaseMetaCounters=function(e){return S(this,void 0,void 0,(function(){var r,i,a;return T(this,(function(s){switch(s.label){case 0:return r=W.of(this._iid).requestQueue,i=new tw({channelUrl:this.url,channelType:this.channelType,metaCounter:e,upsert:!1,mode:"increase"}),[4,r.send(i)];case 1:return a=s.sent(),[2,a.as(nw).metaCounter]}}))}))},n.prototype.decreaseMetaCounters=function(e){return S(this,void 0,void 0,(function(){var r,i,a;return T(this,(function(s){switch(s.label){case 0:return r=W.of(this._iid).requestQueue,i=new tw({channelUrl:this.url,channelType:this.channelType,metaCounter:e,upsert:!1,mode:"decrease"}),[4,r.send(i)];case 1:return a=s.sent(),[2,a.as(nw).metaCounter]}}))}))},n.prototype.deleteMetaCounter=function(e){return S(this,void 0,void 0,(function(){var r,i;return T(this,(function(a){switch(a.label){case 0:return Te(Q("string",e)).throw(X.invalidParameters),r=W.of(this._iid).requestQueue,i=new WG({channelUrl:this.url,channelType:this.channelType,key:e}),[4,r.send(i)];case 1:return a.sent(),[2]}}))}))},n.prototype.deleteAllMetaCounters=function(){return S(this,void 0,void 0,(function(){var e,r;return T(this,(function(i){switch(i.label){case 0:return e=W.of(this._iid).requestQueue,r=new KG({channelUrl:this.url,channelType:this.channelType}),[4,e.send(r)];case 1:return i.sent(),[2]}}))}))},n.prototype.muteUser=function(e,r,i){return S(this,void 0,void 0,(function(){return T(this,(function(a){return[2,this.muteUserWithUserId(e.userId,r,i)]}))}))},n.prototype.muteUserWithUserId=function(e,r,i){return S(this,void 0,void 0,(function(){var a,s;return T(this,(function(l){switch(l.label){case 0:return Te(Q("string",e)&&Q("number",r,!0)&&Q("string",i,!0)).throw(X.invalidParameters),a=W.of(this._iid).requestQueue,s=new YG({channelUrl:this.url,channelType:this.channelType,userId:e,seconds:r,description:i}),[4,a.send(s)];case 1:return l.sent(),[2]}}))}))},n.prototype.unmuteUser=function(e){return S(this,void 0,void 0,(function(){return T(this,(function(r){return[2,this.unmuteUserWithUserId(e.userId)]}))}))},n.prototype.unmuteUserWithUserId=function(e){return S(this,void 0,void 0,(function(){var r,i;return T(this,(function(a){switch(a.label){case 0:return Te(Q("string",e)).throw(X.invalidParameters),r=W.of(this._iid).requestQueue,i=new QG({channelUrl:this.url,channelType:this.channelType,userId:e}),[4,r.send(i)];case 1:return a.sent(),[2]}}))}))},n.prototype.banUser=function(e,r,i){return S(this,void 0,void 0,(function(){return T(this,(function(a){return[2,this.banUserWithUserId(e.userId,r,i)]}))}))},n.prototype.banUserWithUserId=function(e,r,i){return S(this,void 0,void 0,(function(){var a,s;return T(this,(function(l){switch(l.label){case 0:return Te(Q("string",e)&&Q("number",r,!0)&&Q("string",i,!0)).throw(X.invalidParameters),a=W.of(this._iid).requestQueue,s=new $G({channelUrl:this.url,channelType:this.channelType,userId:e,seconds:r,description:i}),[4,a.send(s)];case 1:return l.sent(),[2]}}))}))},n.prototype.unbanUser=function(e){return S(this,void 0,void 0,(function(){return T(this,(function(r){return[2,this.unbanUserWithUserId(e.userId)]}))}))},n.prototype.unbanUserWithUserId=function(e){return S(this,void 0,void 0,(function(){var r,i;return T(this,(function(a){switch(a.label){case 0:return Te(Q("string",e)).throw(X.invalidParameters),r=W.of(this._iid).requestQueue,i=new XG({channelUrl:this.url,channelType:this.channelType,userId:e}),[4,r.send(i)];case 1:return a.sent(),[2]}}))}))},n.prototype.freeze=function(){return S(this,void 0,void 0,(function(){var e,r;return T(this,(function(i){switch(i.label){case 0:return e=W.of(this._iid).requestQueue,r=new _M({channelUrl:this.url,channelType:this.channelType,freezing:!0}),[4,e.send(r)];case 1:return i.sent(),this.isFrozen=!0,[2]}}))}))},n.prototype.unfreeze=function(){return S(this,void 0,void 0,(function(){var e,r;return T(this,(function(i){switch(i.label){case 0:return e=W.of(this._iid).requestQueue,r=new _M({channelUrl:this.url,channelType:this.channelType,freezing:!1}),[4,e.send(r)];case 1:return i.sent(),this.isFrozen=!1,[2]}}))}))},n.prototype.getMessagesByMessageId=function(e,r){return S(this,void 0,void 0,(function(){var i;return T(this,(function(a){switch(a.label){case 0:return i=z(z({},l0),r),Te(Q("number",e)&&oM(i)).throw(X.invalidParameters),[4,gi.of(this._iid).getMessagesByMessageId(this.url,this.channelType,e,i)];case 1:return[2,a.sent()]}}))}))},n.prototype.getMessagesByTimestamp=function(e,r){return S(this,void 0,void 0,(function(){var i;return T(this,(function(a){switch(a.label){case 0:return i=z(z({},l0),r),Te(Q("number",e)&&oM(i)).throw(X.invalidParameters),[4,gi.of(this._iid).getMessagesByTimestamp(this.url,this.channelType,e,i)];case 1:return[2,a.sent()]}}))}))},n.prototype.getMessageChangeLogsSinceTimestamp=function(e,r){return r===void 0&&(r={}),S(this,void 0,void 0,(function(){var i;return T(this,(function(a){switch(a.label){case 0:return i=z(z({},vN),r),Te(Q("number",e)&&lM(i)).throw(X.invalidParameters),[4,gi.of(this._iid).getMessageChangelogs(this.url,this.channelType,e,i)];case 1:return[2,a.sent()]}}))}))},n.prototype.getMessageChangeLogsSinceToken=function(e,r){return r===void 0&&(r={}),S(this,void 0,void 0,(function(){var i;return T(this,(function(a){switch(a.label){case 0:return i=z(z({},vN),r),Te(Q("string",e)&&lM(i)).throw(X.invalidParameters),[4,gi.of(this._iid).getMessageChangelogs(this.url,this.channelType,e,i)];case 1:return[2,a.sent()]}}))}))},n.prototype._createPendingSendableMessagePayload=function(e,r,i){var a,s=W.of(this._iid).sessionManager;return Le(Qe({channel_url:this.url,channel_type:this.channelType,msg_id:0,parent_message_id:e.parentMessageId,data:e.data,custom_type:e.customType,mention_type:e.mentionType,sorted_metaarray:e.metaArrays?e.metaArrays.map((function(l){return wa.payloadify(l)})):null,apple_critical_alert_options:e.appleCriticalAlertOptions?sl.payloadify(e.appleCriticalAlertOptions):null,created_at:i,user:s.currentUser?Cg.payloadify(s.currentUser):null,req_id:r,request_state:cn.PENDING,mentioned_user_ids:e.mentionedUserIds,mentioned_users:(a=e.mentionedUsers)===null||a===void 0?void 0:a.map((function(l){return St.payloadify(l)}))}))},n.prototype._createPendingUserMessage=function(e,r,i){var a,s,l={};if(e.translationTargetLanguages)try{for(var c=Re(e.translationTargetLanguages),d=c.next();!d.done;d=c.next())l[d.value]=""}catch(_){a={error:_}}finally{try{d&&!d.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}var p=Le(z(z({},this._createPendingSendableMessagePayload(e,r,i)),{type:Hn.USER,message:e.message,translations:l,extended_message_payload:e.extendedMessagePayload})),g=new Ji(this._iid,p);return g.messageParams=e,g},n.prototype._createPendingScheduledUserMessage=function(e,r,i){var a=this._createPendingUserMessage(e,r,i);return a.scheduledInfo={scheduledMessageId:0,scheduledAt:e.scheduledAt,scheduledMessageParams:e},a},n.prototype._createPendingFileMessage=function(e,r,i){var a,s,l,c,d,p,g,_=Le(z(z({},this._createPendingSendableMessagePayload(e,r,i)),{type:Hn.FILE,url:e.fileUrl,file:{name:(a=e.fileName)!==null&&a!==void 0?a:(s=e.file)===null||s===void 0?void 0:s.name,size:(l=e.fileSize)!==null&&l!==void 0?l:(c=e.file)===null||c===void 0?void 0:c.size,type:(d=e.mimeType)!==null&&d!==void 0?d:(p=e.file)===null||p===void 0?void 0:p.type,data:e.data},thumbnails:(g=e._thumbnails)===null||g===void 0?void 0:g.map((function(C){return Qc.payloadify(C)})),message:e.message})),y=new Xr(this._iid,_);return y.messageParams=e,y},n.prototype._createPendingMultipleFilesMessage=function(e,r,i){var a=Le(z(z({},this._createPendingSendableMessagePayload(e,r,i)),{type:Hn.FILE,file:e.fileInfoList.length>0?{name:e.fileInfoList[0].fileName,size:e.fileInfoList[0].fileSize,type:e.fileInfoList[0].mimeType,data:e.data}:void 0,message:e.message})),s=new wo(this._iid,a);return s.messageParams=e,s},n.prototype._validateFailedFileMessageHasFile=function(e,r){var i;return!!e.url||Ai(r)||Ai((i=e.messageParams)===null||i===void 0?void 0:i.file)},n.prototype._createPendingScheduledFileMessage=function(e,r,i){var a=this._createPendingFileMessage(e,r,i);return a.scheduledInfo={scheduledMessageId:0,scheduledAt:e.scheduledAt,scheduledMessageParams:e},a},n.prototype._markMessageAsFailed=function(e,r,i){i===void 0&&(i=!1),e.errorCode=r.code,r.code===ze.REQUEST_CANCELED||r.code===ze.FILE_UPLOAD_CANCEL_FAILED?e.sendingStatus=cn.CANCELED:i||(e.sendingStatus=cn.FAILED)},n.prototype.sendUserMessage=function(e){var r=z(z({},FD),e);return Te(jD(r)).throw(X.invalidParameters),this._sendUserMessage(r)},n.prototype._sendUserMessage=function(e,r,i){var a=this;r===void 0&&(r=Xi.SEND);var s=W.of(this._iid),l=s.dispatcher,c=s.requestQueue,d=i??this._generateRequestId(),p=Date.now(),g=new Fs;return ya(2).then((function(){var _=a._createPendingUserMessage(e,d,p);l.dispatch(new lr({messages:[_],source:r===Xi.RESEND?ge.LOCAL_MESSAGE_RESEND_STARTED:ge.EVENT_MESSAGE_SENT_PENDING})),$e((function(){return S(a,void 0,void 0,(function(){return T(this,(function(C){return[2,g._trigger(_)]}))}))}));var y=new tV(z(z({},e),{channelUrl:a.url,channelType:a.channelType,reqId:d}));c.send(y).then((function(C){var w=C.as(fS).message;l.dispatch(new lr({messages:[w],source:ge.EVENT_MESSAGE_SENT_SUCCESS})),$e((function(){return S(a,void 0,void 0,(function(){return T(this,(function(A){return[2,g._trigger(w)]}))}))}))})).catch((function(C){if(Ca(C))throw C;ya(2).then((function(){var w=a._createPendingUserMessage(e,d,p),A=W.of(a._iid).cacheContext,M=A.localCacheEnabled&&A.localCacheConfig.enableAutoResend&&a1(C.code);a._markMessageAsFailed(w,C,M),l.dispatch(new lr({messages:[w],source:w.sendingStatus===cn.PENDING?ge.REQUEST_RESEND_MESSAGE:ge.EVENT_MESSAGE_SENT_FAILED})),$e((function(){return S(a,void 0,void 0,(function(){return T(this,(function(I){return[2,g._triggerFailed(C,w)]}))}))}))}))}))})),g},n.prototype._autoResendUserMessage=function(e){return Te(e instanceof Ji&&!!e.messageParams).throw(X.invalidParameters),this._sendUserMessage(e.messageParams,Xi.SEND,e.reqId)},n.prototype.resendUserMessage=function(e){var r;return S(this,void 0,void 0,(function(){var i,a;return T(this,(function(s){return Te(e instanceof Ji&&!e.scheduledInfo).throw(X.invalidParameters),i=new za,a=(r=e.messageParams)!==null&&r!==void 0?r:yN(e),this._sendUserMessage(a,Xi.RESEND,e.reqId).onFailed((function(l){return i.reject(l)})).onSucceeded((function(l){return i.resolve(l)})),[2,i.promise]}))}))},n.prototype.updateUserMessage=function(e,r){return S(this,void 0,void 0,(function(){var i,a,s,l;return T(this,(function(c){switch(c.label){case 0:return i=z(z({},VD),r),Te(Q("number",e)&&BD(i)).throw(X.invalidParameters),a=W.of(this._iid).requestQueue,s=new yM(z({channelType:this.channelType,channelUrl:this.url,messageId:e,metaArrayParams:i.metaArrays?{array:i.metaArrays,mode:"add",upsert:!0}:void 0},i)),[4,a.send(s)];case 1:return l=c.sent(),[2,l.as(_1).message]}}))}))},n.prototype.copyUserMessage=function(e,r){var i,a,s;return S(this,void 0,void 0,(function(){var l,c;return T(this,(function(d){return Te(e instanceof n&&r instanceof Ji&&r.sendingStatus===cn.SUCCEEDED&&this.url===r.channelUrl&&!r.scheduledInfo).throw(X.invalidParameters),Te(!r.poll).throw(X.notSupportedError),l=new za,c=(i=r.messageParams)!==null&&i!==void 0?i:Qe(z(z({},r),{mentionType:r.mentionType,mentionedUserIds:(a=r.mentionedUserIds)!==null&&a!==void 0?a:(s=r.mentionedUsers)===null||s===void 0?void 0:s.map((function(p){return p.userId})),translationTargetLanguages:Object.keys(r.translations),pushNotificationDeliveryOption:Ql.DEFAULT,parentMessageId:null,isReplyToChannel:!1,isPinnedMessage:!1})),e._sendUserMessage(c).onSucceeded((function(p){l.resolve(p)})).onFailed((function(p){return l.reject(p)})),[2,l.promise]}))}))},n.prototype.translateUserMessage=function(e,r){return S(this,void 0,void 0,(function(){var i,a,s;return T(this,(function(l){switch(l.label){case 0:return Te(e instanceof Ji&&e.messageId>0&&Tt("string",r)).throw(X.invalidParameters),i=W.of(this._iid).requestQueue,a=new sV({channelType:this.channelType,channelUrl:this.url,messageId:e.messageId,translationTargetLanguages:r}),[4,i.send(a)];case 1:return s=l.sent(),[2,s.as(oV).message]}}))}))},n.prototype._createScheduledUserMessage=function(e,r){var i=this,a=W.of(this._iid).requestQueue,s=Date.now(),l=this._generateRequestId();ya(2).then((function(){var d=i._createPendingScheduledUserMessage(e,l,s);$e((function(){return S(i,void 0,void 0,(function(){return T(this,(function(p){return[2,r._trigger(d)]}))}))}))}));var c=new lV(z({reqId:l,channelType:this.channelType,channelUrl:this.url},e));a.send(c).then((function(d){var p=d.as(XD).message;$e((function(){return S(i,void 0,void 0,(function(){return T(this,(function(g){return[2,r._trigger(p)]}))}))}))})).catch((function(d){if(Ca(d))throw d;ya(2).then((function(){var p=i._createPendingScheduledUserMessage(e,l,s);i._markMessageAsFailed(p,d),$e((function(){return S(i,void 0,void 0,(function(){return T(this,(function(g){return[2,r._triggerFailed(d,p)]}))}))}))}))}))},n.prototype.sendFileMessage=function(e){var r=z(z({},hM),e);return Te(fM(r)).throw(X.invalidParameters),this._sendFileMessage(r)},n.prototype.sendMultipleFilesMessage=function(e){var r,i=z(z({},kV),e),a=W.of(this._iid);Te((function(l,c){return c===void 0&&(c=dj),r2(l)&&Q("string",l.message,!0)&&Array.isArray(l.fileInfoList)&&l.fileInfoList.length>=2&&l.fileInfoList.length<=c&&l.fileInfoList.every((function(d){return RV(d)}))})(i,(r=a.appInfo)===null||r===void 0?void 0:r.multipleFilesMessageFileCountLimit)).throw(X.invalidParameters);var s=!!e.fileInfoList.find((function(l){var c=a.appInfo.uploadSizeLimit;return l.file instanceof Blob&&l.file.size>c||l.fileSize>c}));return Te(!s).throw(X.fileSizeLimitExceededError),this._sendMultipleFilesMessage(i)},n.prototype._sendFileMessage=function(e,r,i){var a=this;r===void 0&&(r=Xi.SEND);var s=W.of(this._iid).dispatcher,l=gi.of(this._iid).fileMessageQueue,c=i??this._generateRequestId(),d=Date.now(),p=new Fs;return ya(2).then((function(){var g=a._createPendingFileMessage(e,c,d);s.dispatch(new lr({messages:[g],source:r===Xi.RESEND?ge.LOCAL_MESSAGE_RESEND_STARTED:ge.EVENT_MESSAGE_SENT_PENDING})),$e((function(){return S(a,void 0,void 0,(function(){return T(this,(function(_){return[2,p._trigger(g)]}))}))})),l.request(a,c,e).then((function(_){s.dispatch(new lr({messages:[_],source:ge.EVENT_MESSAGE_SENT_SUCCESS})),$e((function(){return S(a,void 0,void 0,(function(){return T(this,(function(y){return[2,p._trigger(_)]}))}))}))})).catch((function(_){if(Ca(_))throw _;ya(2).then((function(){var y=a._createPendingFileMessage(e,c,d),C=W.of(a._iid).cacheContext,w=C.localCacheEnabled&&C.localCacheConfig.enableAutoResend&&a1(_.code);a._markMessageAsFailed(y,_,w),s.dispatch(new lr({messages:[y],source:y.sendingStatus===cn.PENDING?ge.REQUEST_RESEND_MESSAGE:_.code===ze.FILE_UPLOAD_CANCEL_FAILED?ge.LOCAL_MESSAGE_CANCELED:ge.EVENT_MESSAGE_SENT_FAILED})),$e((function(){return S(a,void 0,void 0,(function(){return T(this,(function(A){return[2,p._triggerFailed(_,y)]}))}))}))}))}))})),p},n.prototype._autoResendFileMessage=function(e){Te(e instanceof Xr&&!!e.messageParams).throw(X.invalidParameters);var r=W.of(this._iid).logger;return r.debug("autoResendFileMessage pending",e),this._sendFileMessage(e.messageParams,Xi.SEND,e.reqId).onFailed((function(i){r.debug("autoResendFileMessage failed",i)})).onSucceeded((function(i){r.debug("autoResendFileMessage success",i)}))},n.prototype._sendMultipleFilesMessage=function(e,r,i){var a=this,s=W.of(this._iid).dispatcher,l=gi.of(this._iid).fileMessageQueue,c=i??this._generateRequestId(),d=Date.now(),p=new VE;return ya(2).then((function(){var g=a._createPendingMultipleFilesMessage(e,c,d);s.dispatch(new lr({messages:[g],source:r===Xi.RESEND?ge.LOCAL_MESSAGE_RESEND_STARTED:ge.EVENT_MESSAGE_SENT_PENDING})),$e((function(){return S(a,void 0,void 0,(function(){return T(this,(function(_){return[2,p._trigger(g)]}))}))})),l.request(a,c,e,{requestHandler:p,isCopy:r===Xi.COPY}).then((function(_){s.dispatch(new lr({messages:[_],source:ge.EVENT_MESSAGE_SENT_SUCCESS})),$e((function(){return S(a,void 0,void 0,(function(){return T(this,(function(y){return[2,p._trigger(_)]}))}))}))})).catch((function(_){if(Ca(_))throw _;ya(2).then((function(){var y=a._createPendingMultipleFilesMessage(e,c,d);a._markMessageAsFailed(y,_),s.dispatch(new lr({messages:[y],source:ge.EVENT_MESSAGE_SENT_FAILED})),$e((function(){return S(a,void 0,void 0,(function(){return T(this,(function(C){return[2,p._triggerFailed(_,y)]}))}))}))}))}))})),p},n.prototype._createScheduledFileMessage=function(e,r,i,a){var s=this,l=W.of(this._iid).requestQueue,c=new uV(z(z({reqId:i,channelType:this.channelType,channelUrl:this.url},e),{fileUrl:e.fileUrl,requireAuth:e.requireAuth}));l.send(c).then((function(d){var p=d.as(cV).message;$e((function(){return S(s,void 0,void 0,(function(){return T(this,(function(g){return[2,r._trigger(p)]}))}))}))})).catch((function(d){if(Ca(d))throw d;ya(2).then((function(){var p=s._createPendingScheduledFileMessage(e,i,a);s._markMessageAsFailed(p,d),$e((function(){return S(s,void 0,void 0,(function(){return T(this,(function(g){return[2,r._triggerFailed(d,p)]}))}))}))}))}))},n.prototype.sendFileMessages=function(e){var r,i;Te(e.every((function(d){return fM(z(z({},hM),d))}))).throw(X.invalidParameters);var a=new Fs;try{for(var s=Re(e),l=s.next();!l.done;l=s.next()){var c=l.value;this.sendFileMessage(c).onPending((function(d){return a._trigger(d)})).onFailed((function(d,p){return a._triggerFailed(d,p)})).onSucceeded((function(d){return a._trigger(d)}))}}catch(d){r={error:d}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return a},n.prototype.resendFileMessage=function(e,r){return S(this,void 0,void 0,(function(){var i,a,s;return T(this,(function(l){return i=this._validateFailedFileMessageHasFile(e,r),Te(e instanceof Xr&&i&&!e.scheduledInfo).throw(X.invalidParameters),a=new za,s=bN(e,r),this._sendFileMessage(s,Xi.RESEND,e.reqId).onFailed((function(c){return a.reject(c)})).onSucceeded((function(c){return a.resolve(c)})),[2,a.promise]}))}))},n.prototype.resendMessage=function(e,r){var i,a;if(Te(e instanceof Rr&&!e.scheduledInfo&&e.isResendable).throw(X.invalidParameters),e.isUserMessage()){var s=(i=e.messageParams)!==null&&i!==void 0?i:yN(e);return this._sendUserMessage(s,Xi.RESEND,e.reqId)}if(e.isFileMessage()){var l=this._validateFailedFileMessageHasFile(e,r);return Te(l).throw(X.invalidParameters),s=(a=e.messageParams)!==null&&a!==void 0?a:bN(e,r),this._sendFileMessage(s,Xi.RESEND,e.reqId)}if(e.isMultipleFilesMessage())throw X.channelTypeNotSupportedError},n.prototype.updateFileMessage=function(e,r){return S(this,void 0,void 0,(function(){var i,a,s,l;return T(this,(function(c){switch(c.label){case 0:return i=z(z({},EG),r),Te(Q("number",e)&&(function(d){return cS(d)})(i)).throw(X.invalidParameters),a=W.of(this._iid).requestQueue,s=new bM(z({channelType:this.channelType,channelUrl:this.url,messageId:e,metaArrayParams:i.metaArrays?{array:i.metaArrays,mode:"add",upsert:!0}:void 0},i)),[4,a.send(s)];case 1:return l=c.sent(),[2,l.as(y1).message]}}))}))},n.prototype.uploadFile=function(e){return S(this,void 0,void 0,(function(){var r,i,a,s,l,c,d;return T(this,(function(p){switch(p.label){case 0:return r=W.of(this._iid).requestQueue,i=So(),(a=new m1({file:e.file,channelUrl:this.url,thumbnailSizes:e.thumbnailSizes,requestId:i})).uploadProgressHandler=e.progressHandler,e.uploadStartedHandler&&e.uploadStartedHandler(i),[4,r.send(a)];case 1:return s=p.sent(),l=s.as(g1),c=l.url,d=l.thumbnails,[2,{requestId:i,url:c,thumbnails:d}]}}))}))},n.prototype.cancelUploadingFileMessage=function(e){return S(this,void 0,void 0,(function(){return T(this,(function(r){return Te(Q("string",e)).throw(X.invalidParameters),gi.of(this._iid).fileMessageQueue.cancel(this,e),[2,!0]}))}))},n.prototype.copyFileMessage=function(e,r){var i,a,s;return S(this,void 0,void 0,(function(){var l,c;return T(this,(function(d){return Te(e instanceof n&&r instanceof Xr&&r.sendingStatus===cn.SUCCEEDED&&this.url===r.channelUrl&&!r.scheduledInfo).throw(X.invalidParameters),l=new za,c=Qe(z(z({},r),{fileUrl:r.url,fileName:r.name,fileSize:r.size,mimeType:r.type,mentionType:r.mentionType,mentionedUserIds:(i=r.mentionedUserIds)!==null&&i!==void 0?i:(a=r.mentionedUsers)===null||a===void 0?void 0:a.map((function(p){return p.userId})),pushNotificationDeliveryOption:Ql.DEFAULT,parentMessageId:null,isReplyToChannel:!1,thumbnailSizes:(s=r.thumbnails)===null||s===void 0?void 0:s.map((function(p){return{maxWidth:p.width,maxHeight:p.height}})),requireAuth:r.requireAuth,isPinnedMessage:!1})),e._sendFileMessage(c).onSucceeded((function(p){return l.resolve(p)})).onFailed((function(p){return l.reject(p)})),[2,l.promise]}))}))},n.prototype.copyMessage=function(e,r){Te(e instanceof n&&r instanceof Rr&&r.sendingStatus===cn.SUCCEEDED&&this.url===r.channelUrl&&!r.scheduledInfo).throw(X.invalidParameters);var i=r,a=e;if(i.isUserMessage()){Te(!i.poll).throw(X.notSupportedError);var s=HD(i);return a._sendUserMessage(s)}if(i.isFileMessage())return s=GD(i),a._sendFileMessage(s);if(r.isMultipleFilesMessage())throw X.channelTypeNotSupportedError},n.prototype.deleteMessage=function(e){return S(this,void 0,void 0,(function(){var r,i;return T(this,(function(a){switch(a.label){case 0:return Te(e instanceof ba).throw(X.invalidParameters),e.messageId>0?(r=W.of(this._iid).requestQueue,i=new jR({channelType:this.channelType,channelUrl:this.url,messageId:e.messageId,messageToken:e instanceof Rr?e._messageToken:void 0}),[4,r.send(i)]):[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}}))}))},n.prototype.addReaction=function(e,r){return S(this,void 0,void 0,(function(){var i,a,s;return T(this,(function(l){switch(l.label){case 0:return Te(e instanceof ba&&e.messageId>0&&Q("string",r)).throw(X.invalidParameters),i=W.of(this._iid).requestQueue,a=new nV({channelType:this.channelType,channelUrl:this.url,messageId:e.messageId,reactionKey:r}),[4,i.send(a)];case 1:return s=l.sent(),[2,s.as(rV).reactionEvent]}}))}))},n.prototype.deleteReaction=function(e,r){return S(this,void 0,void 0,(function(){var i,a,s;return T(this,(function(l){switch(l.label){case 0:return Te(e instanceof ba&&e.messageId>0&&Q("string",r)).throw(X.invalidParameters),i=W.of(this._iid).requestQueue,a=new iV({channelType:this.channelType,channelUrl:this.url,messageId:e.messageId,reactionKey:r}),[4,i.send(a)];case 1:return s=l.sent(),[2,s.as(aV).reactionEvent]}}))}))},n.prototype._updateUserMessageMetaArray=function(e,r,i,a){return S(this,void 0,void 0,(function(){var s,l,c,d,p,g;return T(this,(function(_){switch(_.label){case 0:return s=W.of(this._iid),l=s.dispatcher,c=s.requestQueue,d=new yM({channelType:this.channelType,channelUrl:this.url,messageId:e,metaArrayParams:{array:r,mode:i,upsert:a}}),[4,c.send(d)];case 1:return p=_.sent(),g=p.as(_1).message,l.dispatch(new lr({messages:[g],source:ge.EVENT_MESSAGE_UPDATED})),[2,g]}}))}))},n.prototype._updateFileMessageMetaArray=function(e,r,i,a){return S(this,void 0,void 0,(function(){var s,l,c,d,p,g;return T(this,(function(_){switch(_.label){case 0:return s=W.of(this._iid),l=s.dispatcher,c=s.requestQueue,d=new bM({channelType:this.channelType,channelUrl:this.url,messageId:e,metaArrayParams:{array:r,mode:i,upsert:a}}),[4,c.send(d)];case 1:return p=_.sent(),g=p.as(y1).message,l.dispatch(new lr({messages:[g],source:ge.EVENT_MESSAGE_UPDATED})),[2,g]}}))}))},n.prototype.createMessageMetaArrayKeys=function(e,r){return S(this,void 0,void 0,(function(){var i;return T(this,(function(a){return Te(e instanceof ba&&e.messageId>0&&Tt("string",r)).throw(X.invalidParameters),i=r.map((function(s){return new wa({key:s})})),e instanceof Xr?[2,this._updateFileMessageMetaArray(e.messageId,i,"add",!0)]:[2,this._updateUserMessageMetaArray(e.messageId,i,"add",!0)]}))}))},n.prototype.deleteMessageMetaArrayKeys=function(e,r){return S(this,void 0,void 0,(function(){var i;return T(this,(function(a){return Te(e instanceof ba&&e.messageId>0&&Tt("string",r)).throw(X.invalidParameters),i=r.map((function(s){return new wa({key:s})})),e instanceof Xr?[2,this._updateFileMessageMetaArray(e.messageId,i,"remove",!0)]:[2,this._updateUserMessageMetaArray(e.messageId,i,"remove",!0)]}))}))},n.prototype.addMessageMetaArrayValues=function(e,r){return S(this,void 0,void 0,(function(){return T(this,(function(i){return Te(e instanceof ba&&e.messageId>0&&r.every((function(a){return a instanceof wa}))).throw(X.invalidParameters),e instanceof Xr?[2,this._updateFileMessageMetaArray(e.messageId,r,"add",!0)]:[2,this._updateUserMessageMetaArray(e.messageId,r,"add",!0)]}))}))},n.prototype.removeMessageMetaArrayValues=function(e,r){return S(this,void 0,void 0,(function(){return T(this,(function(i){return Te(e instanceof ba&&e.messageId>0&&r.every((function(a){return a instanceof wa}))).throw(X.invalidParameters),e instanceof Xr?[2,this._updateFileMessageMetaArray(e.messageId,r,"remove",!0)]:[2,this._updateUserMessageMetaArray(e.messageId,r,"remove",!0)]}))}))},n.prototype.report=function(e,r){return S(this,void 0,void 0,(function(){var i,a,s,l;return T(this,(function(c){switch(c.label){case 0:return Te((Nt(u0,e)||e instanceof hg)&&Q("string",r)).throw(X.invalidParameters),i=W.of(this._iid),a=i.sdkState,s=i.requestQueue,l=new ZG({channelUrl:this.url,channelType:this.channelType,userId:a.userId,category:e,description:r}),[4,s.send(l)];case 1:return c.sent(),[2]}}))}))},n.prototype.reportUser=function(e,r,i){return S(this,void 0,void 0,(function(){var a,s,l,c;return T(this,(function(d){switch(d.label){case 0:return Te(e instanceof St&&(Nt(u0,r)||r instanceof hg)&&Q("string",i)).throw(X.invalidParameters),a=W.of(this._iid),s=a.sdkState,l=a.requestQueue,c=new JG({channelUrl:this.url,channelType:this.channelType,userId:s.userId,offendingUserId:e.userId,category:r,description:i}),[4,l.send(c)];case 1:return d.sent(),[2]}}))}))},n.prototype.reportMessage=function(e,r,i){return S(this,void 0,void 0,(function(){var a,s,l,c;return T(this,(function(d){switch(d.label){case 0:return Te(e instanceof Rr&&(Nt(u0,r)||r instanceof hg)&&Q("string",i)).throw(X.invalidParameters),a=W.of(this._iid),s=a.sdkState,l=a.requestQueue,c=new eV({channelUrl:this.url,channelType:this.channelType,userId:s.userId,offendingUserId:e.sender.userId,messageId:e.messageId,category:r,description:i,messageToken:e._messageToken}),[4,l.send(c)];case 1:return d.sent(),[2]}}))}))},n.prototype.updatePoll=function(e,r){return S(this,void 0,void 0,(function(){var i,a,s;return T(this,(function(l){switch(l.label){case 0:return Te(Q("number",e)&&(function(c){return Q("string",c.title,!0)&&SD(c.data)&&Q("boolean",c.allowUserSuggestion,!0)&&Q("boolean",c.allowMultipleVotes,!0)&&Q("number",c.closeAt,!0)})(r)).throw(X.invalidParameters),i=W.of(this._iid).requestQueue,a=new dV(z({pollId:e},r)),[4,i.send(a)];case 1:return s=l.sent(),[2,s.as(hV).poll]}}))}))},n.prototype.deletePoll=function(e){return S(this,void 0,void 0,(function(){var r,i,a;return T(this,(function(s){switch(s.label){case 0:return r=Q("number",e),Te(r).throw(X.invalidParameters),i=W.of(this._iid).requestQueue,a=new fV({pollId:e}),[4,i.send(a)];case 1:return s.sent(),[2]}}))}))},n.prototype.closePoll=function(e){return S(this,void 0,void 0,(function(){var r,i,a,s;return T(this,(function(l){switch(l.label){case 0:return r=Q("number",e),Te(r).throw(X.invalidParameters),i=W.of(this._iid).requestQueue,a=new pV({pollId:e}),[4,i.send(a)];case 1:return s=l.sent(),[2,s.as(mV).poll]}}))}))},n.prototype.addPollOption=function(e,r){return S(this,void 0,void 0,(function(){var i,a,s,l;return T(this,(function(c){switch(c.label){case 0:return i=Q("number",e)&&Q("string",r)&&r.trim()!=="",Te(i).throw(X.invalidParameters),a=W.of(this._iid).requestQueue,s=new gV({channelUrl:this.url,channelType:this.channelType,pollId:e,optionText:r}),[4,a.send(s)];case 1:return l=c.sent(),[2,l.as(vV).poll]}}))}))},n.prototype.updatePollOption=function(e,r,i){return S(this,void 0,void 0,(function(){var a,s,l,c;return T(this,(function(d){switch(d.label){case 0:return a=Q("number",e)&&Q("number",r)&&Q("string",i)&&i.trim()!=="",Te(a).throw(X.invalidParameters),s=W.of(this._iid).requestQueue,l=new _V({pollId:e,pollOptionId:r,optionText:i}),[4,s.send(l)];case 1:return c=d.sent(),[2,c.as(yV).poll]}}))}))},n.prototype.deletePollOption=function(e,r){return S(this,void 0,void 0,(function(){var i,a,s;return T(this,(function(l){switch(l.label){case 0:return i=Q("number",e)&&Q("number",r),Te(i).throw(X.invalidParameters),a=W.of(this._iid).requestQueue,s=new bV({pollId:e,pollOptionId:r}),[4,a.send(s)];case 1:return l.sent(),[2]}}))}))},n.prototype.votePoll=function(e,r){return S(this,void 0,void 0,(function(){var i,a,s,l,c,d,p;return T(this,(function(g){switch(g.label){case 0:return i=Q("number",e)&&Tt("number",r),Te(i).throw(X.invalidParameters),a=W.of(this._iid),s=a.requestQueue,l=a.dispatcher,c=new EV({reqId:this._generateRequestId(),channelUrl:this.url,channelType:this.channelType,pollId:e,pollOptionIds:r}),[4,s.send(c)];case 1:return d=g.sent(),p=d.as(pS).event,l.dispatch(new e2({event:p,source:ge.EVENT_POLL_VOTED})),[2,p]}}))}))},n.prototype.getPollChangeLogsSinceTimestamp=function(e){return S(this,void 0,void 0,(function(){return T(this,(function(r){switch(r.label){case 0:return Te(Q("number",e)).throw(X.invalidParameters),[4,p1.of(this._iid).getPollChangeLogs(this.url,this.channelType,e)];case 1:return[2,r.sent()]}}))}))},n.prototype.getPollChangeLogsSinceToken=function(e){return S(this,void 0,void 0,(function(){return T(this,(function(r){switch(r.label){case 0:return Te(Q("string",e,!0)),[4,p1.of(this._iid).getPollChangeLogs(this.url,this.channelType,e)];case 1:return[2,r.sent()]}}))}))},n.prototype.createPollListQuery=function(e){return e===void 0&&(e=10),new OD(this._iid,{channelUrl:this.url,channelType:this.channelType,limit:e})},n.prototype.createPollVoterListQuery=function(e,r,i){return i===void 0&&(i=20),new kD(this._iid,{channelUrl:this.url,channelType:this.channelType,pollId:e,pollOptionId:r,limit:i})},n.prototype.pinMessage=function(e){return S(this,void 0,void 0,(function(){var r,i;return T(this,(function(a){switch(a.label){case 0:return Te(Q("number",e)&&e>0).throw(X.invalidParameters),r=W.of(this._iid).requestQueue,i=new LV({channelType:this.channelType,channelUrl:this.url,messageId:e}),[4,r.send(i)];case 1:return a.sent(),[2]}}))}))},n.prototype.unpinMessage=function(e){return S(this,void 0,void 0,(function(){var r,i;return T(this,(function(a){switch(a.label){case 0:return Te(Q("number",e)&&e>0).throw(X.invalidParameters),r=W.of(this._iid).requestQueue,i=new FV({channelType:this.channelType,channelUrl:this.url,messageId:e}),[4,r.send(i)];case 1:return a.sent(),[2]}}))}))},n})(ei),jV=(function(t){function n(e){e===void 0&&(e={});var r=t.call(this)||this;return Object.keys(e).forEach((function(i){r.hasOwnProperty(i)&&(r[i]=e[i])})),r}return U(n,t),n})((function(){this.onConnected=it,this.onReconnectStarted=it,this.onReconnectSucceeded=it,this.onReconnectFailed=it,this.onDisconnected=it,this.onConnectionDelayed=it})),EM=(function(t){function n(e){e===void 0&&(e={});var r=t.call(this)||this;return Object.keys(e).forEach((function(i){r.hasOwnProperty(i)&&(r[i]=e[i])})),r}return U(n,t),n})((function(){this.onSessionExpired=it,this.onSessionTokenRequired=function(t){return t(null)},this.onSessionError=it,this.onSessionRefreshed=it,this.onSessionClosed=it})),GV=(function(t){function n(e){e===void 0&&(e={});var r=t.call(this)||this;return Object.keys(e).forEach((function(i){r.hasOwnProperty(i)&&(r[i]=e[i])})),r}return U(n,t),n})((function(){this.onFriendsDiscovered=it,this.onTotalUnreadMessageCountChanged=it,this.onTotalUnreadMessageCountUpdated=it})),VV=(function(t){function n(e){var r=e.limit,i=e.token,a=e.userIdsFilter,s=e.metaDataKeyFilter,l=e.metaDataValuesFilter,c=e.nicknameStartsWithFilter,d=t.call(this)||this;return d.method=ye.GET,d.path=nn,d.params=Le({limit:r,token:i,user_ids:a,metadatakey:s,metadatavalues_in:l,nickname_startswith:c}),d}return U(n,t),n})(Ee),BV=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.users=r.users.map((function(a){return new St(e,a)})),i.next=r.next,i}return U(n,t),n})(Se),zV=(function(t){function n(e,r){var i,a,s,l=this;return(l=t.call(this,e,r)||this).userIdsFilter=null,l.metaDataKeyFilter=null,l.metaDataValuesFilter=null,l.nicknameStartsWithFilter=null,l.userIdsFilter=(i=r.userIdsFilter)!==null&&i!==void 0?i:null,l.metaDataKeyFilter=(a=r.metaDataKeyFilter)!==null&&a!==void 0?a:null,l.metaDataValuesFilter=(s=r.metaDataValuesFilter)!==null&&s!==void 0?s:null,l.nicknameStartsWithFilter=r.nicknameStartsWithFilter||null,l}return U(n,t),n.prototype._validate=function(){return t.prototype._validate.call(this)&&Tt("string",this.userIdsFilter,!0)&&Q("string",this.metaDataKeyFilter,!0)&&Tt("string",this.metaDataValuesFilter,!0)&&Q("string",this.nicknameStartsWithFilter,!0)},n.prototype.next=function(){return S(this,void 0,void 0,(function(){var e,r,i,a,s,l;return T(this,(function(c){switch(c.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=W.of(this._iid).requestQueue,r=new VV(Qe(z(z({},this),{token:this._token}))),[4,e.send(r)]):[3,2]:[3,5];case 1:return i=c.sent(),a=i.as(BV),s=a.users,l=a.next,this._token=l,this._hasNext=!!l,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw X.queryInProgress;case 4:return[3,6];case 5:throw X.invalidParameters;case 6:return[2]}}))}))},n})(Yc),qV=(function(t){function n(e){var r=e.userId,i=e.limit,a=e.token,s=e.userIdsFilter,l=t.call(this)||this;return l.method=ye.GET,l.path="".concat(nn,"/").concat(encodeURIComponent(r),"/block"),l.params=Le({limit:i,token:a,user_ids:s}),l}return U(n,t),n})(Ee),WV=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.users=r.users.map((function(a){return new St(e,a)})),i.next=r.next,i}return U(n,t),n})(Se),KV=(function(t){function n(e,r){var i,a=this;return(a=t.call(this,e,r)||this).userIdsFilter=null,a.userIdsFilter=(i=r.userIdsFilter)!==null&&i!==void 0?i:null,a}return U(n,t),n.prototype._validate=function(){return t.prototype._validate.call(this)&&Tt("string",this.userIdsFilter,!0)},n.prototype.next=function(){return S(this,void 0,void 0,(function(){var e,r,i,a,s,l,c,d;return T(this,(function(p){switch(p.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=W.of(this._iid),r=e.sdkState,i=e.requestQueue,a=new qV(Qe(z(z({},this),{userId:r.userId,token:this._token}))),[4,i.send(a)]):[3,2]:[3,5];case 1:return s=p.sent(),l=s.as(WV),c=l.users,d=l.next,this._token=d,this._hasNext=!!d,this._isLoading=!1,[2,c];case 2:return[2,[]];case 3:throw X.queryInProgress;case 4:return[3,6];case 5:throw X.invalidParameters;case 6:return[2]}}))}))},n})(Yc),YV=(function(t){function n(e){var r=e.userId,i=e.limit,a=e.token,s=t.call(this)||this;return s.method=ye.GET,s.path="".concat(nn,"/").concat(encodeURIComponent(r),"/friends"),s.params={limit:i,token:a},s}return U(n,t),n})(Ee),QV=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.hasMore=r.has_more,i.users=r.users.map((function(a){return new St(e,a)})),i.next=r.next,i}return U(n,t),n})(Se),$V=(function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return U(n,t),n.prototype._validate=function(){return t.prototype._validate.call(this)},n.prototype.next=function(){return S(this,void 0,void 0,(function(){var e,r,i,a,s,l,c,d,p;return T(this,(function(g){switch(g.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=W.of(this._iid),r=e.sdkState,i=e.requestQueue,a=new YV(z(z({},this),{userId:r.userId,token:this._token})),[4,i.send(a)]):[3,2]:[3,5];case 1:return s=g.sent(),l=s.as(QV),c=l.users,d=l.hasMore,p=l.next,this._token=p,this._hasNext=d,this._isLoading=!1,[2,c];case 2:return[2,[]];case 3:throw X.queryInProgress;case 4:return[3,6];case 5:throw X.invalidParameters;case 6:return[2]}}))}))},n})(Yc),gE={},Y0=(function(){function t(n){var e=n.dbname,r=n.itemSizeLimit,i=r===void 0?1048576:r,a=n.cacheLimit,s=a===void 0?256:a,l=n.blockHashBase,c=l===void 0?2:l,d=n.blockHashMultiplier,p=d===void 0?10:d,g=n.blockHashConstant,_=g===void 0?11:g,y=n.transactionApplyDelay,C=y===void 0?200:y,w=n.disableLogger,A=w!==void 0&&w;return gE[e]||(this.itemSizeLimit=i,this.cacheLimit=s,this.blockHashBase=c,this.blockHashMultiplier=p,this.blockHashConstant=_,this.transactionApplyDelay=C,this.disableLogger=A,gE[e]=this),gE[e]}return t.get=function(n){return gE[n]},t})();(function(t){t[t.UNKNOWN_ERROR=6e7]="UNKNOWN_ERROR",t[t.STORE_NOT_DEFINED=61001e3]="STORE_NOT_DEFINED",t[t.STORE_NOT_AVAILABLE=61001001]="STORE_NOT_AVAILABLE",t[t.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING=61001002]="STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING",t[t.STORE_IS_FULL=61001003]="STORE_IS_FULL",t[t.STORE_NOT_INITIALIZED=61001004]="STORE_NOT_INITIALIZED",t[t.STORE_INVALID_KEY_TYPE=61002e3]="STORE_INVALID_KEY_TYPE",t[t.STORE_BROKEN_INTEGRITY=61002001]="STORE_BROKEN_INTEGRITY",t[t.STORE_BROKEN_BLOB=61002002]="STORE_BROKEN_BLOB",t[t.STORE_ENCRYPTION_INVALID=61002003]="STORE_ENCRYPTION_INVALID",t[t.STORE_ITEM_SIZE_LIMIT_EXCEEDED=61017e3]="STORE_ITEM_SIZE_LIMIT_EXCEEDED",t[t.STORE_READ_FAILED=61017001]="STORE_READ_FAILED",t[t.STORE_WRITE_FAILED=61017002]="STORE_WRITE_FAILED",t[t.DATABASE_SCHEMA_NOT_ON_UPGRADE=62002e3]="DATABASE_SCHEMA_NOT_ON_UPGRADE",t[t.COLLECTION_NOT_READY=63001e3]="COLLECTION_NOT_READY",t[t.COLLECTION_KEY_NOT_MATCH=63002e3]="COLLECTION_KEY_NOT_MATCH",t[t.COLLECTION_QUERY_NOT_VALID=63002001]="COLLECTION_QUERY_NOT_VALID",t[t.COLLECTION_KEY_NOT_FOUND=63004e3]="COLLECTION_KEY_NOT_FOUND",t[t.COLLECTION_KEY_NOT_GIVEN=63004001]="COLLECTION_KEY_NOT_GIVEN",t[t.COLLECTION_INSERT_DUPLICATE=63009e3]="COLLECTION_INSERT_DUPLICATE",t[t.COLLECTION_WRITE_FAILED=63017e3]="COLLECTION_WRITE_FAILED",t[t.COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED=63017001]="COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED",t[t.INDEX_TABLE_IS_REQUIRED=65001e3]="INDEX_TABLE_IS_REQUIRED",t[t.INDEX_TYPE_NOT_MATCH=65002e3]="INDEX_TYPE_NOT_MATCH",t[t.COMPARE_TYPE_NOT_MATCH=69002001]="COMPARE_TYPE_NOT_MATCH",t[t.CIRCULAR_REFERENCE_FOUND=69002002]="CIRCULAR_REFERENCE_FOUND"})(pr||(pr={}));var op,yn=(function(t){function n(e){var r=e.code,i=r===void 0?pr.UNKNOWN_ERROR:r,a=e.message,s=a===void 0?"Unknown error occurred.":a,l=t.call(this,s)||this;return l.code=i,Object.setPrototypeOf(l,n.prototype),l}return U(n,t),Object.defineProperty(n,"storeNotDefined",{get:function(){return new n({code:pr.STORE_NOT_DEFINED,message:"Store is not defined. Specify the store on NestDB()"})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeNotAvailable",{get:function(){return new n({code:pr.STORE_NOT_AVAILABLE,message:"Store is not available. Check your environment settings."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeNotAvailableInPrivateBrowsing",{get:function(){return new n({code:pr.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING,message:"Store is not available because it is in private browsing."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeIsFull",{get:function(){return new n({code:pr.STORE_IS_FULL,message:"Store is full."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeNotInitialized",{get:function(){return new n({code:pr.STORE_NOT_INITIALIZED,message:"Store is not initialized."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeKeyTypeIsInvalid",{get:function(){return new n({code:pr.STORE_INVALID_KEY_TYPE,message:"Store key should be string type."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeBrokenIntegrity",{get:function(){return new n({code:pr.STORE_BROKEN_INTEGRITY,message:"Data should be in a store but it does not. Integrity is broken."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeBrokenBlob",{get:function(){return new n({code:pr.STORE_BROKEN_BLOB,message:"Data should be in a store but it does not. Blob data is broken."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeEncryptionInvalid",{get:function(){return new n({code:pr.STORE_ENCRYPTION_INVALID,message:"Encryption algorithm has changed. All the store should reset."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeItemSizeExceeded",{get:function(){return new n({code:pr.STORE_ITEM_SIZE_LIMIT_EXCEEDED,message:"The size of the item exceeds the limit that the store allows."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeReadFailed",{get:function(){return new n({code:pr.STORE_READ_FAILED,message:"Failed to read from store."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeWriteFailed",{get:function(){return new n({code:pr.STORE_WRITE_FAILED,message:"Failed to write to store."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"databaseSchemaNotOnUpgrade",{get:function(){return new n({code:pr.DATABASE_SCHEMA_NOT_ON_UPGRADE,message:"Committing schema is not allowed when upgrade is not running."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionNotReady",{get:function(){return new n({code:pr.COLLECTION_NOT_READY,message:"Collection is not ready due to an error during initialization."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionKeyNotMatch",{get:function(){return new n({code:pr.COLLECTION_KEY_NOT_MATCH,message:"keyName of collection could not change."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionQueryNotValid",{get:function(){return new n({code:pr.COLLECTION_QUERY_NOT_VALID,message:"Query parameter is not a valid format."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionInsertDuplicate",{get:function(){return new n({code:pr.COLLECTION_INSERT_DUPLICATE,message:"The key already exists."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionKeyNotFound",{get:function(){return new n({code:pr.COLLECTION_KEY_NOT_FOUND,message:"The key is not found."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionKeyNotGiven",{get:function(){return new n({code:pr.COLLECTION_KEY_NOT_GIVEN,message:"The item should contain [keyName] property."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionWriteFailed",{get:function(){return new n({code:pr.COLLECTION_WRITE_FAILED,message:"Failed to write an item."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionItemSizeExceeded",{get:function(){return new n({code:pr.COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED,message:"The size of the item exceeds the limit that a collection allows."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"indexTableIsRequired",{get:function(){return new n({code:pr.INDEX_TABLE_IS_REQUIRED,message:"Index table is required."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"indexTypesNotMatch",{get:function(){return new n({code:pr.INDEX_TYPE_NOT_MATCH,message:"Indexed column should have primitive type."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"compareTypesNotMatch",{get:function(){return new n({code:pr.COMPARE_TYPE_NOT_MATCH,message:"Values to compare have different types."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"circularReferenceFound",{get:function(){return new n({code:pr.CIRCULAR_REFERENCE_FOUND,message:"Cannot handle circular referenced object."})},enumerable:!1,configurable:!0}),n})(Error);(function(t){t.INIT="init",t.READY="ready",t.CLOSED="closed"})(op||(op={}));var CM,ps=function(t,n){if(n===void 0&&(n=new WeakMap),typeof t=="object"&&t!==null){if(n.has(t))throw yn.circularReferenceFound;var e;return n.set(t,!0),Array.isArray(t)?e=t.map((function(r){return ps(r,n)})):t instanceof RegExp||t instanceof Date?e=t:(e={},Object.keys(t).forEach((function(r){e[r]=ps(t[r],n)}))),n.delete(t),e}return t},xc=function(t,n){if(n==null)return 1;if(t==null)return-1;if(typeof t!=typeof n)throw yn.compareTypesNotMatch;var e=0;switch(typeof t){case"boolean":case"number":e=t-n;break;case"string":e=t.localeCompare(n)}return e},wM=function(t,n){for(var e=0,r=0;r<t.length;r++)e=t.charCodeAt(r)+(e<<6)+(e<<16)-e;return(e>>>0)%n},vE=function(t){return new Promise((function(n){setTimeout((function(){return n()}),t)}))},hp=function(t,n){if(!n)return!1;if(typeof t!="function"){for(var e in t)if(["/and","&&"].includes(e)){if(t[e].some((function(c){return!hp(c,n)})))return!1}else if(["/or","||"].includes(e)){if(t[e].every((function(c){return!hp(c,n)})))return!1}else if(e==="/where"){if(!(0,t[e])(n))return!1}else{var r=e;if(typeof t[r]=="object"){var i=t[r];for(var a in i)switch(a){case"/eq":case"=":if((s=n[r])!==(l=i[a]))return!1;break;case"/neq":case"!=":if((s=n[r])===(l=i[a]))return!1;break;case"/gt":case">":var s=n[r],l=i[a];if(!(xc(s,l)>0))return!1;break;case"/gte":case">=":if(s=n[r],l=i[a],!(xc(s,l)>=0))return!1;break;case"/lt":case"<":if(s=n[r],l=i[a],!(xc(s,l)<0))return!1;break;case"/lte":case"<=":if(s=n[r],l=i[a],!(xc(s,l)<=0))return!1;break;case"/in":if(s=n[r],!(l=i[a]).includes(s))return!1;break;case"/nin":if(s=n[r],(l=i[a]).includes(s))return!1;break;case"/contain":if(s=n[r],l=i[a],!s.includes(l))return!1;break;case"/regex":if(s=n[r],!(l=i[a]).test(s))return!1;break;case"/where":if(s=n[r],!(0,i[a])(s))return!1}}else if(typeof t[r]=="function"){if(!t[r](n[r]))return!1}else if(t[r]!==n[r])return!1}return!0}return t(n)},B_=function(){},NM=function(){return Promise.resolve()},XV=function(t){return t},TM=function(t,n){n()};(function(t){t[t.FORWARD=0]="FORWARD",t[t.BACKWARD=1]="BACKWARD"})(CM||(CM={}));var fp,Ea,Pu,ZV=(function(){function t(n){var e=n.initialPrevValue,r=e===void 0?null:e,i=n.initialNextValue,a=i===void 0?null:i,s=n.iterator,l=n.map,c=l===void 0?XV:l,d=n.backward,p=d===void 0?NM:d,g=n.forward,_=g===void 0?NM:g,y=n.complete,C=y===void 0?B_:y;this._prevValue=r,this._nextValue=a,this._error=null,this._map=c,this._backward=p,this._forward=_,this._iterator=s,this._complete=C}return Object.defineProperty(t.prototype,"prevValue",{get:function(){return this._map(this._prevValue)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextValue",{get:function(){return this._map(this._nextValue)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"error",{get:function(){return this._error},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPrevious",{get:function(){return!!this._prevValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasNext",{get:function(){return!!this._nextValue},enumerable:!1,configurable:!0}),t.prototype.prev=function(){return S(this,void 0,void 0,(function(){var n,e,r;return T(this,(function(i){switch(i.label){case 0:if(!this.hasPrevious)return[3,6];i.label=1;case 1:return i.trys.push([1,3,,4]),n=this._prevValue,e=this,[4,this._backward()];case 2:return e._prevValue=i.sent()||null,this._nextValue=n,[3,4];case 3:return r=i.sent(),this._error=r,[3,4];case 4:return[4,this._iterator(this)];case 5:return[2,i.sent()];case 6:this._complete(),i.label=7;case 7:return[2]}}))}))},t.prototype.next=function(){return S(this,void 0,void 0,(function(){var n,e,r;return T(this,(function(i){switch(i.label){case 0:if(!this.hasNext)return[3,6];i.label=1;case 1:return i.trys.push([1,3,,4]),n=this._nextValue,e=this,[4,this._forward()];case 2:return e._nextValue=i.sent()||null,this._prevValue=n,[3,4];case 3:return r=i.sent(),this._error=r,[3,4];case 4:return[4,this._iterator(this)];case 5:return[2,i.sent()];case 6:this._complete(),i.label=7;case 7:return[2]}}))}))},t.prototype.stop=function(){this._prevValue=null,this._nextValue=null,this._complete()},t})(),EN=(function(){function t(n){var e=n.condition,r=e===void 0?{}:e,i=n.backward,a=i!==void 0&&i,s=n.blockManager,l=n.indexer;this.condition=r,this.backward=a,this._blockManager=s,this._indexer=l}return t.prototype.findOptimizedStartPosition=function(){var n=this,e=["=","/eq",">",">=","/gt","/gte"],r=["=","/eq","<","<=","/lt","/lte"];if(this.backward){var i=this._indexer.origin.length-1;if(typeof this.condition!="function")for(y=0;y<this._indexer.fields.length;y++){var a=this._indexer.fields[y],s=1;if(a[0]==="-"&&(a=a.slice(1),s=-1),this.condition[a]){if(typeof this.condition[a]=="object"){var l=s>0?r:e;for(var c in this.condition[a])if(l.includes(c)){for(var d=i;d>=0;d--)if(s*xc(this._indexer.origin[d].columnValues[y],this.condition[a][c])<=0){i=d;break}}}else for(d=i;d>=0;d--)if(s*xc(this._indexer.origin[d].columnValues[y],this.condition[a])<=0){i=d;break}}}return Math.min(i+1,this._indexer.origin.length-1)}var p=0;if(typeof this.condition!="function")for(var g=function(C){var w=_._indexer.fields[C],A=1;if(w[0]==="-"&&(w=w.slice(1),A=-1),_.condition[w]){if(typeof _.condition[w]=="object")Object.keys(_.condition[w]).forEach((function(I){if((A>0?e:r).includes(I)){for(var D=p;D<n._indexer.origin.length;D++)if(A*xc(n._indexer.origin[D].columnValues[C],n.condition[w][I])>=0){p=D;break}}}));else for(var M=p;M<_._indexer.origin.length;M++)if(A*xc(_._indexer.origin[M].columnValues[C],_.condition[w])>=0){p=M;break}}},_=this,y=0;y<this._indexer.fields.length;y++)g(y);return Math.max(p-1,0)},t.prototype.each=function(n){return S(this,void 0,void 0,(function(){var e,r,i,a,s,l,c,d=this;return T(this,(function(p){switch(p.label){case 0:if(e=this.findOptimizedStartPosition(),r=0,this.backward&&this._indexer.origin[e]&&(r=this._indexer.origin[e].keys.length-1),i=function(){if(d._indexer.origin[e]){if(!d._indexer.origin[e].keys[++r]){if(!d._indexer.origin[++e])return!1;r=0}return!0}return!1},a=function(){if(d._indexer.origin[e]){if(!d._indexer.origin[e].keys[--r]){if(!d._indexer.origin[--e])return!1;r=d._indexer.origin[e].keys.length-1}return!0}return!1},s=null,!this._indexer.origin[e])return[3,4];l=this.backward?a:i,p.label=1;case 1:return[4,this._blockManager.getFromBlock(this._indexer.origin[e].keys[r])];case 2:if((c=p.sent())&&hp(this.condition,c))return s=c,[3,4];p.label=3;case 3:if(l())return[3,1];p.label=4;case 4:return[4,new Promise((function(g){var _=new ZV({initialNextValue:ps(s),iterator:n,forward:function(){return S(d,void 0,void 0,(function(){var y,C;return T(this,(function(w){switch(w.label){case 0:y=this.backward?a:i,w.label=1;case 1:return y()?[4,this._blockManager.getFromBlock(this._indexer.origin[e].keys[r])]:[3,3];case 2:return(C=w.sent())&&hp(this.condition,C)?[2,ps(C)]:[3,1];case 3:return[2,null]}}))}))},backward:function(){return S(d,void 0,void 0,(function(){var y,C;return T(this,(function(w){switch(w.label){case 0:y=this.backward?i:a,w.label=1;case 1:return y()?[4,this._blockManager.getFromBlock(this._indexer.origin[e].keys[r])]:[3,3];case 2:return(C=w.sent())&&hp(this.condition,C)?[2,ps(C)]:[3,1];case 3:return[2,null]}}))}))},complete:g});n(_)}))];case 5:return[2,p.sent()]}}))}))},t})(),JV=(function(){function t(n){var e=n.condition,r=e===void 0?{}:e,i=n.backward,a=i!==void 0&&i,s=n.mutex,l=n.blockManager,c=n.indexer;this._mutex=s,this._iterator=new EN({condition:r,backward:a,blockManager:l,indexer:c})}return t.prototype.fetch=function(n){return n===void 0&&(n={}),S(this,void 0,void 0,(function(){var e,r,i,a,s=this;return T(this,(function(l){switch(l.label){case 0:if(e=Math.max(n.offset||0,0),(r=typeof n.limit=="number"?n.limit:Number.MAX_SAFE_INTEGER)===0)return[2,[]];if(r<0)throw yn.collectionQueryNotValid;l.label=1;case 1:return l.trys.push([1,4,,5]),i=[],[4,this._mutex.lock()];case 2:return l.sent(),[4,this._iterator.each((function(c){return S(s,void 0,void 0,(function(){return T(this,(function(d){return c.error?c.stop():c.hasNext?e===0?(i.push(c.nextValue),0<r&&r<=i.length?c.stop():c.next()):(e--,c.next()):c.stop(),[2]}))}))}))];case 3:return l.sent(),this._mutex.unlock(),[2,i];case 4:throw a=l.sent(),this._mutex.unlock(),a;case 5:return[2]}}))}))},t.prototype.count=function(){return S(this,void 0,void 0,(function(){var n,e,r=this;return T(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),n=0,[4,this._mutex.lock()];case 1:return i.sent(),[4,this._iterator.each((function(a){return S(r,void 0,void 0,(function(){return T(this,(function(s){return a.error?a.stop():a.hasNext?(n++,a.next()):a.stop(),[2]}))}))}))];case 2:return i.sent(),this._mutex.unlock(),[2,n];case 3:throw e=i.sent(),this._mutex.unlock(),e;case 4:return[2]}}))}))},t})(),gS=function(t){return"".concat("nest","@").concat(t)},bp=function(t,n){return"".concat(gS(t),"/").concat(n)},rw=function(t,n){return"".concat(bp(t,n),".metadata")},CN=function(t,n){return"".concat(bp(t,n),"/block.")},SM=function(t,n){return"".concat(bp(t,n),"/blob.")},eB=(function(){function t(n){var e=n.dbname,r=n.collectionName,i=n.store;this.dbname=e,this.collectionName=r,this.store=i}return t.prototype.get=function(n){return S(this,void 0,void 0,(function(){var e,r,i,a,s,l,c,d,p;return T(this,(function(g){switch(g.label){case 0:return[4,this.store.get(n)];case 1:return(e=g.sent())?(r=e.data,i=e.type,typeof fetch>"u"?[3,4]:[4,fetch(r)]):[3,5];case 2:return[4,g.sent().blob()];case 3:return[2,g.sent()];case 4:for(a=[],s=atob(r.split(",")[1]),l=0;l<s.length;l+=512){for(c=s.slice(l,l+512),d=new Array(c.length),p=0;p<c.length;p++)d[p]=c.charCodeAt(p);a.push(new Uint8Array(d))}return[2,new Blob(a,{type:i})];case 5:return[2,null]}}))}))},t.prototype.save=function(n,e){return e===void 0&&(e="".concat(Date.now())),S(this,void 0,void 0,(function(){var r,i,a,s,l=this;return T(this,(function(c){switch(c.label){case 0:return[4,new Promise((function(d){var p=(function(_,y,C,w){return w===void 0&&(w=0),"".concat(SM(_,y)).concat(C,".").concat(w)})(l.dbname,l.collectionName,e),g=new FileReader;g.onload=function(){d({blobId:p,data:g.result,type:n.type})},g.readAsDataURL(n)}))];case 1:return r=c.sent(),i=r.blobId,a=r.data,s=r.type,[4,this.store.set({key:i,value:{data:a,type:s}})];case 2:return c.sent(),[2,i]}}))}))},t.prototype.remove=function(n){return S(this,void 0,void 0,(function(){return T(this,(function(e){switch(e.label){case 0:return[4,this.store.remove(n)];case 1:return e.sent(),[2]}}))}))},t.prototype.clear=function(){return S(this,void 0,void 0,(function(){var n,e,r=this;return T(this,(function(i){switch(i.label){case 0:return n=SM(this.dbname,this.collectionName),[4,this.store.getAllKeys()];case 1:return e=i.sent(),[4,Promise.all(e.filter((function(a){return a.startsWith(n)})).map((function(a){return S(r,void 0,void 0,(function(){return T(this,(function(s){switch(s.label){case 0:return[4,this.store.remove(a)];case 1:return[2,s.sent()]}}))}))})))];case 2:return i.sent(),[2]}}))}))},t})();(function(t){t[t.COMMIT=0]="COMMIT",t[t.WRITE=1]="WRITE",t[t.ERROR=2]="ERROR"})(fp||(fp={})),(function(t){t.PENDING="pending",t.PERSISTENT="persistent",t.VOLATILE="volatile"})(Ea||(Ea={})),(function(t){t[t.NO_CACHE=0]="NO_CACHE",t[t.DEFAULT=1]="DEFAULT",t[t.PERSISTENT=2]="PERSISTENT"})(Pu||(Pu={}));var c0,va,AM=[Ea.PENDING,Ea.VOLATILE],_E={},gs=(function(){function t(n){var e=n.dbname,r=n.limit,i=r===void 0?256:r;return _E[e]||(this.dbname=e,this._items=[],this._limit=i,_E[e]=this),_E[e]}return t.get=function(n){return _E[n]},Object.defineProperty(t.prototype,"items",{get:function(){return this._items},enumerable:!1,configurable:!0}),t.prototype.find=function(n,e,r){return r===void 0&&(r=Pu.DEFAULT),S(this,void 0,void 0,(function(){var i,a;return T(this,(function(s){switch(s.label){case 0:return(i=this.get(e))?[3,2]:[4,n.get(e)];case 1:return(a=s.sent())&&(i={key:e,value:a,state:r===Pu.PERSISTENT?Ea.PERSISTENT:Ea.VOLATILE},this.put(i)),[3,3];case 2:r===Pu.PERSISTENT&&(i.state=Ea.PERSISTENT),s.label=3;case 3:return[2,i]}}))}))},t.prototype.get=function(n,e){e===void 0&&(e=Pu.DEFAULT);var r=this._items.map((function(a){return a.key})).indexOf(n);if(r>-1){var i=this._items[r];return e===Pu.PERSISTENT&&(i.state=Ea.PERSISTENT),e!==Pu.NO_CACHE&&this.put(i),i}return null},t.prototype.put=function(n){var e,r;if(this._limit>0){var i=this._items.map((function(g){return g.key})).indexOf(n.key);if(i>-1)AM.includes(this._items[i].state)&&AM.includes(n.state)?(this._items.splice(i,1),this._items.push(n)):(this._items[i].state=n.state,this._items[i].value=n.value);else{this._items.push(n);var a=this._items.filter((function(g){return g.state===Ea.VOLATILE})),s=a.length-this._limit;if(s>0){var l=[];try{for(var c=Re(this._items),d=c.next();!d.done;d=c.next()){var p=d.value;p.state===Ea.VOLATILE&&s>0?s--:l.push(p)}}catch(g){e={error:g}}finally{try{d&&!d.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}this._items=l}}}},t.prototype.remove=function(n){var e=this._items.map((function(r){return r.key})).indexOf(n);e>-1&&this._items.splice(e,1)},t.prototype.clearByCondition=function(n){this._items=this._items.filter((function(e){return!n(e)}))},t.prototype.clearForDatabase=function(n){this.clearByCondition((function(e){return e.key.startsWith(gS(n))}))},t.prototype.clear=function(n){n===void 0&&(n=!1),this._items=n?[]:this._items.filter((function(e){return e.state!==Ea.VOLATILE}))},t})(),tB=(function(){function t(n){var e=n.dbname,r=n.collectionName,i=n.store;this._requests=[],this._onCommit=new Map,this._onWrite=new Map,this._onError=new Map,this.dbname=e,this.collectionName=r,this.metadataKey=(function(a,s){return"".concat(bp(a,s),"/trans.metadata")})(e,r),this.recordsetKey=(function(a,s){return"".concat(bp(a,s),"/trans.recordset")})(e,r),this._store=i}return Object.defineProperty(t.prototype,"generation",{get:function(){return this._metadata?this._metadata.generation:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requestCount",{get:function(){return this._requests.length},enumerable:!1,configurable:!0}),t.prototype._getReducedRecordset=function(n){return n===void 0&&(n=[]),S(this,void 0,void 0,(function(){var e;return T(this,(function(r){switch(r.label){case 0:return[4,this._store.get(this.recordsetKey)];case 1:return(e=r.sent()||[]).push.apply(e,Je([],Ye(n),!1)),[2,this._reduceRecordSet(e)]}}))}))},t.prototype._reduceRecordSet=function(n){for(var e=[],r={},i=n.length-1;i>=0;i--){for(var a=n[i],s=[],l=a.requests.length-1;l>=0;l--){var c=a.requests[l],d=c.data;r[d.key]||(s.unshift(c),r[d.key]=!0)}s.length>0&&(a.requests=s,e.unshift(a))}return e},t.prototype._applyRecord=function(n,e){return S(this,void 0,void 0,(function(){var r,i,a,s,l,c,d,p,g;return T(this,(function(_){switch(_.label){case 0:r=gs.get(this.dbname),i=e.generation,a=e.requests,s=null,_.label=1;case 1:return _.trys.push([1,3,,4]),[4,this._store.setMany(a.map((function(y){return z(z({},y.data),{generation:i})})))];case 2:for(l=_.sent(),c=0;c<a.length;c++)l[c]instanceof Error&&(s||(s=l[c]),d=a[c].data,r.put(z(z({},d),{state:Ea.PERSISTENT})));return[3,4];case 3:return p=_.sent(),s=p,[3,4];case 4:return s?[3,6]:(g=n.filter((function(y){return y.generation!==i})),[4,this._store.set({key:this.recordsetKey,value:g})]);case 5:return _.sent(),this._onWrite.forEach((function(y){y(a.map((function(C){return C.data})))})),[3,7];case 6:this._onError.forEach((function(y){s&&y(s)})),_.label=7;case 7:return[2]}}))}))},t.prototype.init=function(){return S(this,void 0,void 0,(function(){var n,e,r,i,a,s,l,c;return T(this,(function(d){switch(d.label){case 0:return n=this,[4,this._store.get(this.metadataKey)];case 1:return n._metadata=d.sent()||{generation:1},[4,this._getReducedRecordset()];case 2:e=d.sent(),d.label=3;case 3:d.trys.push([3,8,9,10]),r=Re(e),i=r.next(),d.label=4;case 4:return i.done?[3,7]:(a=i.value,[4,this._applyRecord(e,a)]);case 5:d.sent(),d.label=6;case 6:return i=r.next(),[3,4];case 7:return[3,10];case 8:return s=d.sent(),l={error:s},[3,10];case 9:try{i&&!i.done&&(c=r.return)&&c.call(r)}finally{if(l)throw l.error}return[7];case 10:return[2]}}))}))},t.prototype.on=function(n,e,r){switch(n){case fp.COMMIT:this._onCommit.set(e,r);break;case fp.WRITE:this._onWrite.set(e,r);break;case fp.ERROR:this._onError.set(e,r)}},t.prototype.requestWrite=function(n,e){this._requests.push({data:n,options:e}),gs.get(this.dbname).put(z({state:Ea.PENDING},n))},t.prototype.requestMultipleWrite=function(n,e){var r,i,a=gs.get(this.dbname);try{for(var s=Re(n),l=s.next();!l.done;l=s.next()){var c=l.value;this._requests.push({data:c,options:e}),a.put(z({state:Ea.PENDING},c))}}catch(d){r={error:d}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}},t.prototype.clear=function(){return S(this,void 0,void 0,(function(){return T(this,(function(n){return gs.get(this.dbname).clearByCondition((function(e){return e.state===Ea.PENDING})),this._requests=[],[2]}))}))},t.prototype.commit=function(){return S(this,void 0,void 0,(function(){var n,e,r,i,a,s,l,c,d,p,g,_,y=this;return T(this,(function(C){switch(C.label){case 0:if(!((n=this._requests).length>0))return[3,4];for(e=[],r={},c=n.length-1;c>=0;c--)i=n[c],p=i.data,r[p.key]||(r[p.key]=!0,e.unshift(i));return a={generation:this.generation,requests:e},[4,this._getReducedRecordset([a])];case 1:return s=C.sent(),[4,this._store.set({key:this.recordsetKey,value:s})];case 2:return C.sent(),this._metadata.generation++,[4,this._store.set({key:this.metadataKey,value:this._metadata})];case 3:for(C.sent(),l=gs.get(this.dbname),c=0;c<e.length;c++)d=e[c],p=d.data,g=d.options,l.put(z(z({},p),{state:g&&g.persistent?Ea.PERSISTENT:Ea.VOLATILE}));this._requests=[],this._onCommit.forEach((function(w){w(n.map((function(A){return A.data})))})),_=Y0.get(this.dbname),setTimeout((function(){try{y._applyRecord(s,a)}catch(w){y._onError.forEach((function(A){return A(w)}))}}),_.transactionApplyDelay),C.label=4;case 4:return[2]}}))}))},t})(),BE=(function(){function t(n){var e=n.blockId,r=n.keyName,i=n.items,a=i===void 0?[]:i,s=n.limit;this.blockId=e,this.keyName=r,this.limit=s,this._items=Je([],Ye(a),!1)}return t.createFromCacheItem=function(n){return n?new t(n.value):null},Object.defineProperty(t.prototype,"isEmpty",{get:function(){return this._items.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){return this._items},enumerable:!1,configurable:!0}),t.prototype.serialize=function(){return{blockId:this.blockId,keyName:this.keyName,limit:this.limit,items:this._items}},t.prototype.getItemByKey=function(n){var e=this,r=this._items.find((function(i){var a=i[e.keyName];return n===a}));return r??null},t.prototype.has=function(n){var e=this;return this._items.map((function(r){return r[e.keyName]})).includes(n)},t.prototype.add=function(n){var e=this,r=this._items.map((function(i){return i[e.keyName]})).indexOf(n[this.keyName]);return r<0?this._items.length<this.limit&&(this._items.push(n),!0):(this._items[r]=n,!0)},t.prototype.remove=function(n){for(var e=0;e<this._items.length;e++)if(this._items[e][this.keyName]===n)return this._items.splice(e,1),!0;return!1},t.prototype.clear=function(){this._items=[]},t})(),nB=(function(){function t(n){var e=n.dbname,r=n.collectionName,i=n.metadata,a=n.hashFunction,s=a===void 0?wM:a,l=n.transaction,c=n.store;this.dbname=e,this.collectionName=r,this.hashFunction=s,this.metadata=i,this._transaction=l,this._store=c}return Object.defineProperty(t.prototype,"keyName",{get:function(){return this.metadata.keyName},enumerable:!1,configurable:!0}),t.prototype.createBlockId=function(n,e){return e===void 0&&(e=this.metadata.blockLevel),r=this.dbname,i=this.collectionName,a=e,s="".concat((function(l,c,d){var p=d.base*Math.pow(d.multiplier,c)+d.constant;return(d.hashFunction||wM)(l,p)})(n,e,{hashFunction:this.hashFunction,base:this.metadata.blockHashBase,multiplier:this.metadata.blockHashMultiplier,constant:this.metadata.blockHashConstant})),"".concat(CN(r,i)).concat(a,".").concat(s);var r,i,a,s},t.prototype._findBlock=function(n){return S(this,void 0,void 0,(function(){var e,r,i,a,s;return T(this,(function(l){switch(l.label){case 0:e=gs.get(this.dbname),r=this.metadata.blockLevel,l.label=1;case 1:return r>0?(i=this.createBlockId(n,r),[4,e.find(this._store,i)]):[3,4];case 2:if((a=l.sent())&&(s=BE.createFromCacheItem(a),s?.getItemByKey(n)))return[2,s];l.label=3;case 3:return r--,[3,1];case 4:return[2,null]}}))}))},t.prototype.getFromBlock=function(n){return S(this,void 0,void 0,(function(){var e;return T(this,(function(r){switch(r.label){case 0:return[4,this._findBlock(n)];case 1:return[2,(e=r.sent())?e.getItemByKey(n):null]}}))}))},t.prototype.putToBlock=function(n,e){return S(this,void 0,void 0,(function(){var r,i,a,s,l;return T(this,(function(c){switch(c.label){case 0:return r=Y0.get(this.dbname),i=this.createBlockId(n),a=Math.floor(this._store.itemSizeLimit/r.itemSizeLimit),[4,gs.get(this.dbname).find(this._store,i)];case 1:return s=c.sent(),(l=s?BE.createFromCacheItem(s):new BE({blockId:i,keyName:this.keyName,items:[],limit:a}))!=null&&l.add(e)?(this._transaction.requestWrite({key:l.blockId,value:l.serialize()}),[2,!0]):[2,!1]}}))}))},t.prototype.removeFromBlock=function(n){return S(this,void 0,void 0,(function(){var e;return T(this,(function(r){switch(r.label){case 0:return[4,this._findBlock(n)];case 1:return(e=r.sent())&&e.remove(n)?(this._transaction.requestWrite({key:e.blockId,value:e.serialize()}),[2,!0]):[2,!1]}}))}))},t.prototype.clearAllBlocks=function(){return S(this,void 0,void 0,(function(){var n,e,r;return T(this,(function(i){switch(i.label){case 0:return n=CN(this.dbname,this.collectionName),[4,this._store.getAllKeys()];case 1:return e=i.sent(),r=e.filter((function(a){return a.startsWith(n)})),[4,this._store.removeMany(r)];case 2:return i.sent(),[4,this._transaction.clear()];case 3:return i.sent(),gs.get(this.dbname).clearByCondition((function(a){return a.key.startsWith(n)})),[2]}}))}))},t})(),Qd=(function(){function t(n){var e=n.dbname,r=n.collectionName,i=n.keyName,a=n.fields,s=n.transaction,l=n.store,c=this;this._origin=[],this._table=[];var d=(function(p,g,_){return"".concat(bp(p,g),"/index.").concat(_)})(e,r,a.join(">"));this.dbname=e,this.collectionName=r,this.keyName=i,this.fields=a,this.indexerKey=d,this._store=l,this._transaction=s,this._transaction.on(fp.COMMIT,this.indexerKey,(function(){return c.commit()})),this._transaction.on(fp.ERROR,this.indexerKey,(function(){return c.abort()}))}return t.createKey=function(n){return n.join(">")},t.parseKey=function(n){return n.split(">")},t.prototype._addItem=function(n){var e=n[this.keyName],r=this.getColumnValues(n),i=Ye(this.indexOf(r),2),a=i[0];return i[1]?!this._table[a].keys.includes(e)&&(this._table[a].keys.push(e),!0):(this._table.splice(a,0,{columnValues:r,keys:[e]}),!0)},t.prototype._removeItem=function(n){var e=n[this.keyName],r=this.getColumnValues(n),i=Ye(this.indexOf(r),2),a=i[0];if(i[1]){var s=this._table[a].keys.indexOf(e);if(s>-1)return this._table[a].keys.splice(s,1),this._table[a].keys.length===0&&this._table.splice(a,1),!0}return!1},Object.defineProperty(t.prototype,"origin",{get:function(){return this._origin},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"table",{get:function(){return this._table},enumerable:!1,configurable:!0}),t.prototype.getColumnValues=function(n){var e,r,i,a,s=[];try{for(var l=Re(this.fields),c=l.next();!c.done;c=l.next()){var d=c.value;if(d[0]==="-"&&(d=d.slice(1)),i=n[d],a=void 0,a=typeof i,i!==null&&a!=="undefined"&&a!=="boolean"&&a!=="number"&&a!=="string")throw yn.indexTypesNotMatch;s.push(n[d])}}catch(p){e={error:p}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}return s},t.prototype.diff=function(n,e){for(var r in this.fields){var i=this.fields[r][0]==="-"?-1:1,a=xc(n[r],e[r]);if(a!==0)return i*a}return 0},t.prototype.indexOf=function(n){if(this._table.length>0){for(var e=0,r=this._table.length-1;e<=r;){var i=Math.floor((e+r)/2),a=this.diff(n,this._table[i].columnValues);if(a>0)e=i+1;else{if(!(a<0))return[i,!0];r=i-1}}return[e,!1]}return[0,!1]},t.prototype.ensure=function(){return S(this,void 0,void 0,(function(){var n,e,r,i,a,s,l,c,d,p,g,_,y,C,w,A,M;return T(this,(function(I){switch(I.label){case 0:return[4,(n=gs.get(this.dbname)).find(this._store,this.indexerKey,Pu.PERSISTENT)];case 1:return(e=I.sent())?[3,11]:(r=CN(this.dbname,this.collectionName),[4,this._store.getAllKeys()]);case 2:i=I.sent(),I.label=3;case 3:I.trys.push([3,8,9,10]),a=Re(i),s=a.next(),I.label=4;case 4:return s.done?[3,7]:(l=s.value).startsWith(r)?[4,n.find(this._store,l,Pu.NO_CACHE)]:[3,6];case 5:if(c=I.sent(),d=BE.createFromCacheItem(c))try{for(A=void 0,p=Re(d.items),g=p.next();!g.done;g=p.next())_=g.value,this._addItem(_)}catch(D){A={error:D}}finally{try{g&&!g.done&&(M=p.return)&&M.call(p)}finally{if(A)throw A.error}}I.label=6;case 6:return s=a.next(),[3,4];case 7:return[3,10];case 8:return y=I.sent(),C={error:y},[3,10];case 9:try{s&&!s.done&&(w=a.return)&&w.call(a)}finally{if(C)throw C.error}return[7];case 10:return this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[3,12];case 11:this._origin=e.value,this._table=ps(this._origin),I.label=12;case 12:return[2]}}))}))},t.prototype.drop=function(){return S(this,void 0,void 0,(function(){return T(this,(function(n){switch(n.label){case 0:return gs.get(this.dbname).remove(this.indexerKey),[4,this._store.remove(this.indexerKey)];case 1:return n.sent(),[2]}}))}))},t.prototype.addItem=function(n){return S(this,void 0,void 0,(function(){return T(this,(function(e){return this._addItem(n)&&this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[2]}))}))},t.prototype.removeItem=function(n){return S(this,void 0,void 0,(function(){return T(this,(function(e){return this._removeItem(n)&&this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[2]}))}))},t.prototype.clear=function(){return S(this,void 0,void 0,(function(){return T(this,(function(n){return this._table=[],this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[2]}))}))},t.prototype.commit=function(){this._origin=this._table,this._table=ps(this._origin)},t.prototype.abort=function(){this._table=ps(this._origin)},t})(),E1=function(){return typeof document<"u"&&typeof navigator<"u"&&navigator.product!=="ReactNative"},IM=function(){var t=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(n){var e=(t+16*Math.random())%16|0;return t=Math.floor(t/16),(n==="x"?e:3&e|8).toString(16)}))};(function(t){t[t.PROCESSING=0]="PROCESSING",t[t.DONE=1]="DONE"})(c0||(c0={})),(function(t){t.NEWNODE="newnode",t.REMOVENODE="removenode",t.CLAIM_HOST="claimhost",t.SYNC_HOST="synchost",t.REQUEST_LOCK="requestlock",t.ACQUIRE_LOCK="acquirelock",t.RELEASE_LOCK="releaselock"})(va||(va={}));var jl,iw={},vS=(function(){function t(n,e){e===void 0&&(e={});var r=this;return this._state=c0.PROCESSING,this._queue=[],this._activationQueue=[],iw[n]&&!e.forceCreate||(this.nodeId=IM(),this.key=n,E1()&&(e.startAsInvisible?this.registerNode():document.visibilityState==="visible"?this.claimHost():this.registerNode(),document.addEventListener("visibilitychange",(function(){document.visibilityState==="visible"&&r.claimHost()})),window.addEventListener("message",(function(i){var a,s,l=i.data;if(l?.isNestDbMessage){var c=l.nodeId,d=l.requestId,p=l.key,g=l.op,_=l.data;if(c!==r.nodeId&&p===r.key)switch(g){case va.NEWNODE:r._sendSync();break;case va.CLAIM_HOST:r._sendSync(),r._hostId=c;break;case va.SYNC_HOST:if(!r.isInSync){r._activationTimeout&&clearTimeout(r._activationTimeout);var y=_,C=y.currentItemRequestId,w=y.queue,A=function(P){var H=r._queue.findIndex((function(L){return L.requestId===P.requestId}));H<0&&r._requestLock({isNestDbMessage:!0,nodeId:P.nodeId,requestId:P.requestId,key:r.key,op:va.REQUEST_LOCK,ts:P.ts})};try{for(var M=Re(w),I=M.next();!I.done;I=M.next())A(I.value)}catch(P){a={error:P}}finally{try{I&&!I.done&&(s=M.return)&&s.call(M)}finally{if(a)throw a.error}}r._currentItem=r._queue.find((function(P){return P.requestId===C})),r._completeSync()}break;case va.REMOVENODE:r._queue=r._queue.filter((function(P){return P.nodeId!==l.nodeId})),r._currentItem&&r._currentItem.nodeId===l.nodeId&&(r._currentItem=void 0,r._acquire(r._queue[0]));break;case va.REQUEST_LOCK:r._requestLock(l);break;case va.ACQUIRE_LOCK:var D=r._queue.find((function(P){return P.requestId===d}));r._acquire(D);break;case va.RELEASE_LOCK:r._release(d)}}})),window.addEventListener("beforeunload",(function(){r._send(va.REMOVENODE)}))),iw[n]=this),iw[n]}return Object.defineProperty(t.prototype,"locked",{get:function(){return!!this._currentItem},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isHost",{get:function(){return this._hostId===this.nodeId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isInSync",{get:function(){return this._state==c0.DONE},enumerable:!1,configurable:!0}),t.prototype._send=function(n,e){var r;e===void 0&&(e={});var i={isNestDbMessage:!0,nodeId:this.nodeId,requestId:(r=e?.requestId)!==null&&r!==void 0?r:IM(),key:this.key,op:n,data:e.data,ts:Date.now()};return E1()&&window.postMessage(i,"*"),i},t.prototype._acquire=function(n){n?(this._currentItem=n,this._currentItem.onAcquired&&this._currentItem.onAcquired(n.requestId)):this._currentItem=void 0},t.prototype._release=function(n){if(this._currentItem&&this._currentItem.requestId===n){var e=this._currentItem;this._currentItem=void 0,e.nodeId===this.nodeId&&this._send(va.RELEASE_LOCK,{requestId:e.requestId});var r=this._queue.findIndex((function(i){return i.requestId===n}));r>-1&&this._queue.splice(r,1),e.onReleased&&e.onReleased(n)}},t.prototype._requestLock=function(n){var e=this;return new Promise((function(r){for(var i={nodeId:n.nodeId,requestId:n.requestId,ts:n.ts,onAcquired:function(l){e.isHost&&e._send(va.ACQUIRE_LOCK,{requestId:l}),r()},onReleased:function(){e._acquire(e._queue[0])}},a=!1,s=0;s<e._queue.length;s++)if(e._queue[s].ts>i.ts){e._queue.splice(s,0,i),a=!0;break}a||e._queue.push(i),e._currentItem||e._acquire(e._queue[0])}))},t.prototype._sendSync=function(){var n;this.isHost&&this._send(va.SYNC_HOST,{data:{currentItemRequestId:(n=this._currentItem)===null||n===void 0?void 0:n.requestId,queue:this._queue.map((function(e){return{nodeId:e.nodeId,requestId:e.requestId,ts:e.ts}}))}})},t.prototype._waitUntilSyncCompleted=function(){return S(this,void 0,void 0,(function(){var n=this;return T(this,(function(e){return this.isHost&&!this.isInSync?[2,new Promise((function(r){n._activationQueue.push(r)}))]:[2]}))}))},t.prototype._waitSync=function(){var n=this;this.isInSync||(this._activationTimeout=setTimeout((function(){n._completeSync()}),8))},t.prototype._completeSync=function(){this.isInSync||(this._state=c0.DONE,this._activationQueue.forEach((function(n){return n()})),this._activationQueue=[])},t.prototype.registerNode=function(){this._send(va.NEWNODE),this._waitSync()},t.prototype.claimHost=function(){this._hostId=this.nodeId,this._send(va.CLAIM_HOST),this._waitSync()},t.prototype.lock=function(){return S(this,void 0,void 0,(function(){var n;return T(this,(function(e){switch(e.label){case 0:return[4,this._waitUntilSyncCompleted()];case 1:return e.sent(),n=this._send(va.REQUEST_LOCK),[4,this._requestLock(n)];case 2:return e.sent(),[2]}}))}))},t.prototype.unlock=function(){var n;!((n=this._currentItem)===null||n===void 0)&&n.requestId&&this._release(this._currentItem.requestId)},t})(),aw=(function(){function t(n){var e=n.dbname,r=n.collectionName,i=n.keyName,a=n.keyHash,s=n.indexes,l=n.store,c=this;this._state=op.INIT,this._indexers=[],this.dbname=e,this.name=r,this.keyName=i,this.indexes=Je([[i]],Ye(s.filter((function(d){return Qd.createKey(d)!==c.keyName}))),!1),this._keyHash=a,this._store=l,this._mutex=new vS((function(d,p){return"".concat(bp(d,p),".lock")})(e,r)),this._blobContainer=new eB({dbname:e,collectionName:r,store:l}),this._transaction=new tB({dbname:e,collectionName:r,store:l})}return t.metadataOf=function(n,e,r){return S(this,void 0,void 0,(function(){var i;return T(this,(function(a){switch(a.label){case 0:return i=rw(n,e),[4,r.get(i)];case 1:return[2,a.sent()]}}))}))},Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isReady",{get:function(){return this._state===op.READY},enumerable:!1,configurable:!0}),t.prototype.init=function(){return S(this,void 0,void 0,(function(){var n,e,r,i,a,s,l,c,d,p,g,_,y,C,w=this;return T(this,(function(A){switch(A.label){case 0:return[4,this._mutex.lock()];case 1:A.sent(),A.label=2;case 2:return A.trys.push([2,9,,10]),n=Y0.get(this.dbname),[4,t.metadataOf(this.dbname,this.name,this._store)];case 3:return e=A.sent(),this._metadata=e||{keyName:this.keyName,blockLevel:1,blockHashBase:n.blockHashBase,blockHashMultiplier:n.blockHashMultiplier,blockHashConstant:n.blockHashConstant,indexes:this.indexes},[4,this._transaction.init()];case 4:A.sent(),this._blockManager=new nB({dbname:this.dbname,collectionName:this.name,hashFunction:this._keyHash,metadata:this._metadata,transaction:this._transaction,store:this._store}),r=Je([],Ye(this.indexes),!1),i=[],a=r.map((function(M){return Qd.createKey(M)})),s=e?e.indexes.map((function(M){return Qd.createKey(M)})):[];try{for(l=Re(s),c=l.next();!c.done;c=l.next())d=c.value,a.includes(d)||i.push(Qd.parseKey(d))}catch(M){y={error:M}}finally{try{c&&!c.done&&(C=l.return)&&C.call(l)}finally{if(y)throw y.error}}return(p=[]).push.apply(p,Je([],Ye(r.map((function(M){var I=new Qd({dbname:w.dbname,collectionName:w.name,keyName:w.keyName,fields:M,transaction:w._transaction,store:w._store});return w._indexers.push(I),I.ensure()}))),!1)),p.push.apply(p,Je([],Ye(i.map((function(M){return new Qd({dbname:w.dbname,collectionName:w.name,keyName:w.keyName,fields:M,transaction:w._transaction,store:w._store}).drop()}))),!1)),[4,Promise.all(p)];case 5:return A.sent(),[4,this._transaction.commit()];case 6:return A.sent(),a.sort().join(",")===s.sort().join(",")?[3,8]:(g=rw(this.dbname,this.name),this._metadata.indexes=r,[4,this._store.set({key:g,value:this._metadata})]);case 7:A.sent(),A.label=8;case 8:return this._state=op.READY,this._mutex.unlock(),[3,10];case 9:throw _=A.sent(),this._mutex.unlock(),_;case 10:return[2]}}))}))},t.prototype.close=function(){this._state=op.CLOSED},t.prototype._hasPropertyOfKeyName=function(n){var e=n[this.keyName];return typeof e=="string"&&!!e},t.prototype._getIndexerBy=function(n){var e,r;n===void 0&&(n=null),n||(n=[this.keyName]);var i=Qd.createKey(n);try{for(var a=Re(this._indexers),s=a.next();!s.done;s=a.next()){var l=s.value;if(i===Qd.createKey(l.fields))return l}}catch(c){e={error:c}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}throw yn.indexTableIsRequired},t.prototype._upgradeBlockLevel=function(){return S(this,void 0,void 0,(function(){var n;return T(this,(function(e){switch(e.label){case 0:return n=rw(this.dbname,this.name),this._metadata.blockLevel++,[4,this._store.set({key:n,value:this._metadata})];case 1:return e.sent(),[2]}}))}))},t.prototype._requestInsert=function(n){return S(this,void 0,void 0,(function(){var e,r,i,a,s,l;return T(this,(function(c){switch(c.label){case 0:return e=n[this.keyName],[4,this._blockManager.getFromBlock(e)];case 1:return c.sent()?[3,13]:[4,this._blockManager.putToBlock(e,n)];case 2:return c.sent()?[3,5]:[4,this._upgradeBlockLevel()];case 3:return c.sent(),[4,this._blockManager.putToBlock(e,n)];case 4:c.sent(),c.label=5;case 5:c.trys.push([5,10,11,12]),r=Re(this._indexers),i=r.next(),c.label=6;case 6:return i.done?[3,9]:[4,i.value.addItem(n)];case 7:c.sent(),c.label=8;case 8:return i=r.next(),[3,6];case 9:return[3,12];case 10:return a=c.sent(),s={error:a},[3,12];case 11:try{i&&!i.done&&(l=r.return)&&l.call(r)}finally{if(s)throw s.error}return[7];case 12:return[3,14];case 13:throw yn.collectionInsertDuplicate;case 14:return[2]}}))}))},t.prototype._requestUpsert=function(n){return S(this,void 0,void 0,(function(){var e,r,i,a,s,l,c,d,p,g,_,y,C;return T(this,(function(w){switch(w.label){case 0:return e=n[this.keyName],[4,this._blockManager.getFromBlock(e)];case 1:return(r=w.sent())?[3,13]:[4,this._blockManager.putToBlock(e,n)];case 2:return w.sent()?[3,5]:[4,this._upgradeBlockLevel()];case 3:return w.sent(),[4,this._blockManager.putToBlock(e,n)];case 4:w.sent(),w.label=5;case 5:w.trys.push([5,10,11,12]),i=Re(this._indexers),a=i.next(),w.label=6;case 6:return a.done?[3,9]:[4,(d=a.value).addItem(n)];case 7:w.sent(),w.label=8;case 8:return a=i.next(),[3,6];case 9:return[3,12];case 10:return s=w.sent(),g={error:s},[3,12];case 11:try{a&&!a.done&&(_=i.return)&&_.call(i)}finally{if(g)throw g.error}return[7];case 12:return[3,23];case 13:return[4,this._blockManager.putToBlock(e,n)];case 14:w.sent(),w.label=15;case 15:w.trys.push([15,21,22,23]),l=Re(this._indexers),c=l.next(),w.label=16;case 16:return c.done?[3,20]:(d=c.value).diff(d.getColumnValues(r),d.getColumnValues(n))===0?[3,19]:[4,d.removeItem(r)];case 17:return w.sent(),[4,d.addItem(n)];case 18:w.sent(),w.label=19;case 19:return c=l.next(),[3,16];case 20:return[3,23];case 21:return p=w.sent(),y={error:p},[3,23];case 22:try{c&&!c.done&&(C=l.return)&&C.call(l)}finally{if(y)throw y.error}return[7];case 23:return[2]}}))}))},t.prototype._requestUpdate=function(n){return S(this,void 0,void 0,(function(){var e,r,i,a,s,l,c,d;return T(this,(function(p){switch(p.label){case 0:return e=n[this.keyName],[4,this._blockManager.getFromBlock(e)];case 1:return(r=p.sent())?[4,this._blockManager.putToBlock(e,n)]:[3,11];case 2:p.sent(),p.label=3;case 3:p.trys.push([3,9,10,11]),i=Re(this._indexers),a=i.next(),p.label=4;case 4:return a.done?[3,8]:(s=a.value).diff(s.getColumnValues(r),s.getColumnValues(n))===0?[3,7]:[4,s.removeItem(r)];case 5:return p.sent(),[4,s.addItem(n)];case 6:p.sent(),p.label=7;case 7:return a=i.next(),[3,4];case 8:return[3,11];case 9:return l=p.sent(),c={error:l},[3,11];case 10:try{a&&!a.done&&(d=i.return)&&d.call(i)}finally{if(c)throw c.error}return[7];case 11:return[2]}}))}))},t.prototype._requestRemove=function(n){return S(this,void 0,void 0,(function(){var e,r,i,a,s,l;return T(this,(function(c){switch(c.label){case 0:return[4,this._blockManager.getFromBlock(n)];case 1:return(e=c.sent())?[4,this._blockManager.removeFromBlock(n)]:[3,10];case 2:c.sent(),c.label=3;case 3:c.trys.push([3,8,9,10]),r=Re(this._indexers),i=r.next(),c.label=4;case 4:return i.done?[3,7]:[4,i.value.removeItem(e)];case 5:c.sent(),c.label=6;case 6:return i=r.next(),[3,4];case 7:return[3,10];case 8:return a=c.sent(),s={error:a},[3,10];case 9:try{i&&!i.done&&(l=r.return)&&l.call(r)}finally{if(s)throw s.error}return[7];case 10:return[2]}}))}))},t.prototype._requestClear=function(){return S(this,void 0,void 0,(function(){var n,e,r,i,a;return T(this,(function(s){switch(s.label){case 0:return[4,this._blockManager.clearAllBlocks()];case 1:s.sent(),s.label=2;case 2:s.trys.push([2,7,8,9]),n=Re(this._indexers),e=n.next(),s.label=3;case 3:return e.done?[3,6]:[4,e.value.clear()];case 4:s.sent(),s.label=5;case 5:return e=n.next(),[3,3];case 6:return[3,9];case 7:return r=s.sent(),i={error:r},[3,9];case 8:try{e&&!e.done&&(a=n.return)&&a.call(n)}finally{if(i)throw i.error}return[7];case 9:return[2]}}))}))},t.prototype.getByKey=function(n){return S(this,void 0,void 0,(function(){var e,r;return T(this,(function(i){switch(i.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,6];case 1:i.sent(),i.label=2;case 2:return i.trys.push([2,4,,5]),[4,this._blockManager.getFromBlock(n)];case 3:return e=i.sent(),this._mutex.unlock(),[2,ps(e)];case 4:throw r=i.sent(),this._mutex.unlock(),r;case 5:return[3,7];case 6:throw yn.collectionNotReady;case 7:return[2]}}))}))},t.prototype.query=function(n){if(n===void 0&&(n={}),this.isReady)return new JV({condition:n.where,mutex:this._mutex,blockManager:this._blockManager,indexer:this._getIndexerBy(n.index),backward:!!n.backward});throw yn.collectionNotReady},t.prototype.insertOne=function(n){return S(this,void 0,void 0,(function(){var e;return T(this,(function(r){switch(r.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:r.sent(),r.label=2;case 2:if(r.trys.push([2,5,,7]),!this._hasPropertyOfKeyName(n))throw yn.collectionKeyNotGiven;return[4,this._requestInsert(ps(n))];case 3:return r.sent(),[4,this._transaction.commit()];case 4:return r.sent(),this._mutex.unlock(),[2,n];case 5:return e=r.sent(),[4,this._transaction.clear()];case 6:throw r.sent(),this._mutex.unlock(),e;case 7:return[3,9];case 8:throw yn.collectionNotReady;case 9:return[2]}}))}))},t.prototype.insertMany=function(n){return S(this,void 0,void 0,(function(){var e,r,i,a,s,l,c,d=this;return T(this,(function(p){switch(p.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,15];case 1:p.sent(),p.label=2;case 2:if(p.trys.push([2,12,,14]),n.some((function(g){return!d._hasPropertyOfKeyName(g)})))throw yn.collectionKeyNotGiven;p.label=3;case 3:p.trys.push([3,8,9,10]),e=Re(n),r=e.next(),p.label=4;case 4:return r.done?[3,7]:(i=r.value,[4,this._requestInsert(ps(i))]);case 5:p.sent(),p.label=6;case 6:return r=e.next(),[3,4];case 7:return[3,10];case 8:return a=p.sent(),l={error:a},[3,10];case 9:try{r&&!r.done&&(c=e.return)&&c.call(e)}finally{if(l)throw l.error}return[7];case 10:return[4,this._transaction.commit()];case 11:return p.sent(),this._mutex.unlock(),[2,n];case 12:return s=p.sent(),[4,this._transaction.clear()];case 13:throw p.sent(),this._mutex.unlock(),s;case 14:return[3,16];case 15:throw yn.collectionNotReady;case 16:return[2]}}))}))},t.prototype.upsertOne=function(n){return S(this,void 0,void 0,(function(){var e;return T(this,(function(r){switch(r.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:r.sent(),r.label=2;case 2:if(r.trys.push([2,5,,7]),!this._hasPropertyOfKeyName(n))throw yn.collectionKeyNotGiven;return[4,this._requestUpsert(ps(n))];case 3:return r.sent(),[4,this._transaction.commit()];case 4:return r.sent(),this._mutex.unlock(),[2,n];case 5:return e=r.sent(),[4,this._transaction.clear()];case 6:throw r.sent(),this._mutex.unlock(),e;case 7:return[3,9];case 8:throw yn.collectionNotReady;case 9:return[2]}}))}))},t.prototype.upsertMany=function(n){return S(this,void 0,void 0,(function(){var e,r,i,a,s,l,c,d=this;return T(this,(function(p){switch(p.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,15];case 1:p.sent(),p.label=2;case 2:if(p.trys.push([2,12,,14]),n.some((function(g){return!d._hasPropertyOfKeyName(g)})))throw yn.collectionKeyNotGiven;p.label=3;case 3:p.trys.push([3,8,9,10]),e=Re(n),r=e.next(),p.label=4;case 4:return r.done?[3,7]:(i=r.value,[4,this._requestUpsert(ps(i))]);case 5:p.sent(),p.label=6;case 6:return r=e.next(),[3,4];case 7:return[3,10];case 8:return a=p.sent(),l={error:a},[3,10];case 9:try{r&&!r.done&&(c=e.return)&&c.call(e)}finally{if(l)throw l.error}return[7];case 10:return[4,this._transaction.commit()];case 11:return p.sent(),this._mutex.unlock(),[2,n];case 12:return s=p.sent(),[4,this._transaction.clear()];case 13:throw p.sent(),this._mutex.unlock(),s;case 14:return[3,16];case 15:throw yn.collectionNotReady;case 16:return[2]}}))}))},t.prototype.update=function(n){return S(this,void 0,void 0,(function(){var e;return T(this,(function(r){switch(r.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:r.sent(),r.label=2;case 2:if(r.trys.push([2,5,,7]),!this._hasPropertyOfKeyName(n))throw yn.collectionKeyNotGiven;return[4,this._requestUpdate(ps(n))];case 3:return r.sent(),[4,this._transaction.commit()];case 4:return r.sent(),this._mutex.unlock(),[2,n];case 5:return e=r.sent(),[4,this._transaction.clear()];case 6:throw r.sent(),this._mutex.unlock(),e;case 7:return[3,9];case 8:throw yn.collectionNotReady;case 9:return[2]}}))}))},t.prototype.updateIf=function(n,e){return S(this,void 0,void 0,(function(){var r,i,a,s,l,c,d,p,g,_,y,C,w,A,M=this;return T(this,(function(I){switch(I.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,16];case 1:I.sent(),I.label=2;case 2:return I.trys.push([2,13,,15]),r=n.where,i=r===void 0?{}:r,a=n.index,s=a===void 0?null:a,l=n.backward,c=l!==void 0&&l,d=[],[4,new EN({condition:i,blockManager:this._blockManager,backward:c,indexer:this._getIndexerBy(s)}).each((function(D){return S(M,void 0,void 0,(function(){var P;return T(this,(function(H){if(D.error)throw D.stop(),D.error;return D.hasNext?(P=D.nextValue,hp(i,P)&&e.set&&(typeof e.set!="function"?Object.keys(e.set).forEach((function(L){var G;P[L]=(G=e.set)===null||G===void 0?void 0:G[L]})):e.set(P),d.push(P)),D.next()):D.stop(),[2]}))}))}))];case 3:I.sent(),I.label=4;case 4:I.trys.push([4,9,10,11]),p=Re(d),g=p.next(),I.label=5;case 5:return g.done?[3,8]:(_=g.value,[4,this._requestUpdate(ps(_))]);case 6:I.sent(),I.label=7;case 7:return g=p.next(),[3,5];case 8:return[3,11];case 9:return y=I.sent(),w={error:y},[3,11];case 10:try{g&&!g.done&&(A=p.return)&&A.call(p)}finally{if(w)throw w.error}return[7];case 11:return[4,this._transaction.commit()];case 12:return I.sent(),this._mutex.unlock(),[2,d];case 13:return C=I.sent(),[4,this._transaction.clear()];case 14:throw I.sent(),this._mutex.unlock(),C;case 15:return[3,17];case 16:throw this._transaction.clear(),yn.collectionNotReady;case 17:return[2]}}))}))},t.prototype.remove=function(n){return S(this,void 0,void 0,(function(){var e;return T(this,(function(r){switch(r.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:r.sent(),r.label=2;case 2:return r.trys.push([2,5,,7]),[4,this._requestRemove(n)];case 3:return r.sent(),[4,this._transaction.commit()];case 4:return r.sent(),this._mutex.unlock(),[3,7];case 5:return e=r.sent(),[4,this._transaction.clear()];case 6:throw r.sent(),this._mutex.unlock(),e;case 7:return[3,9];case 8:throw yn.collectionNotReady;case 9:return[2]}}))}))},t.prototype.removeIf=function(n){return S(this,void 0,void 0,(function(){var e,r,i,a,s,l,c,d,p,g,_,y,C,w,A=this;return T(this,(function(M){switch(M.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,15];case 1:M.sent(),M.label=2;case 2:return M.trys.push([2,13,,14]),e=n.where,r=e===void 0?{}:e,i=n.index,a=i===void 0?null:i,s=n.backward,l=s!==void 0&&s,c=[],[4,new EN({condition:r,blockManager:this._blockManager,backward:l,indexer:this._getIndexerBy(a)}).each((function(I){return S(A,void 0,void 0,(function(){var D,P;return T(this,(function(H){if(I.error)throw I.stop(),I.error;return I.hasNext?(D=I.nextValue,hp(r,D)&&(P=D[this.keyName],c.push(P)),I.next()):I.stop(),[2]}))}))}))];case 3:M.sent(),M.label=4;case 4:M.trys.push([4,9,10,11]),d=Re(c),p=d.next(),M.label=5;case 5:return p.done?[3,8]:(g=p.value,[4,this._requestRemove(g)]);case 6:M.sent(),M.label=7;case 7:return p=d.next(),[3,5];case 8:return[3,11];case 9:return _=M.sent(),C={error:_},[3,11];case 10:try{p&&!p.done&&(w=d.return)&&w.call(d)}finally{if(C)throw C.error}return[7];case 11:return[4,this._transaction.commit()];case 12:return M.sent(),this._mutex.unlock(),[2,c];case 13:throw y=M.sent(),this._mutex.unlock(),y;case 14:return[3,16];case 15:throw this._transaction.clear(),yn.collectionNotReady;case 16:return[2]}}))}))},t.prototype.clear=function(){return S(this,void 0,void 0,(function(){var n;return T(this,(function(e){switch(e.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:e.sent(),e.label=2;case 2:return e.trys.push([2,5,,7]),[4,this._requestClear()];case 3:return e.sent(),[4,this._transaction.commit()];case 4:return e.sent(),this._mutex.unlock(),[3,7];case 5:return n=e.sent(),[4,this._transaction.clear()];case 6:throw e.sent(),this._mutex.unlock(),n;case 7:return[3,9];case 8:throw yn.collectionNotReady;case 9:return[2]}}))}))},t.prototype.getBlob=function(n){return S(this,void 0,void 0,(function(){return T(this,(function(e){switch(e.label){case 0:return[4,this._blobContainer.get(n)];case 1:return[2,e.sent()]}}))}))},t.prototype.saveBlob=function(n,e){return S(this,void 0,void 0,(function(){return T(this,(function(r){switch(r.label){case 0:return[4,this._blobContainer.save(n,e)];case 1:return[2,r.sent()]}}))}))},t.prototype.removeBlob=function(n){return S(this,void 0,void 0,(function(){return T(this,(function(e){switch(e.label){case 0:return[4,this._blobContainer.remove(n)];case 1:return e.sent(),[2]}}))}))},t.prototype.removeAllBlobs=function(){return S(this,void 0,void 0,(function(){return T(this,(function(n){switch(n.label){case 0:return[4,this._blobContainer.clear()];case 1:return n.sent(),[2]}}))}))},t})(),sw="[NESTDB]",yE=!0,zf=(function(){function t(){}return t.off=function(){yE=!1},t.log=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];yE&&console.log.apply(console,Je(["".concat(sw,"[LOG]")],Ye(n),!1))},t.warning=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];yE&&console.warn.apply(console,Je(["".concat(sw,"[WARNING]")],Ye(n),!1))},t.error=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];yE&&console.error.apply(console,Je(["".concat(sw,"[ERROR]")],Ye(n),!1))},t})(),rB=[{},{a:700400,n:"error"}],i2=(function(){function t(n){var e,r,i;this.encryption=(e=n.encryption)!==null&&e!==void 0?e:RR,this.itemSizeLimit=(r=n.itemSizeLimit)!==null&&r!==void 0?r:4194304,this.metadataBuffer=(i=n.metadataBuffer)!==null&&i!==void 0?i:256}return Object.defineProperty(t.prototype,"_encryptionCheckKey",{get:function(){return"".concat(this.dbname,".encrypt")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_reservedKeys",{get:function(){return[this._encryptionCheckKey]},enumerable:!1,configurable:!0}),t.prototype._getRawKey=function(n,e){return e===void 0&&(e=""),"".concat(n).concat(e)},t.prototype._generateShardPostfixArray=function(n){return n===void 0&&(n=1),Je([],Ye(Array(n).keys()),!1)},t.prototype._shardify=function(n){var e=this,r=n.key,i=n.value,a=JSON.stringify(this.encryption.encrypt(i)),s=Math.ceil(a.length/this.adjustedItemSizeLimit);return this._generateShardPostfixArray(s).map((function(l){var c={key:e._getRawKey(r,".".concat(l)),data:a.substring(l*e.adjustedItemSizeLimit,(l+1)*e.adjustedItemSizeLimit)};return l===0&&(c.metadata={shards:s}),c}))},t.prototype._resetIfEncryptionChanged=function(){return S(this,void 0,void 0,(function(){var n,e,r,i,a,s,l,c,d,p=this;return T(this,(function(g){switch(g.label){case 0:return[4,this.get(this._encryptionCheckKey)];case 1:if(n=g.sent(),e={encrypted:rB.map((function(_){var y;return(y=p.encryption)===null||y===void 0?void 0:y.encrypt(_)}))},!n)return[3,8];if(!n.encrypted||!Array.isArray(n.encrypted))return[3,6];for(a in r=n.encrypted,i=[],r)i.push(a);s=0,g.label=2;case 2:return s<i.length?(a=i[s])in r?(l=a,c=JSON.stringify(n.encrypted[l]),d=JSON.stringify(e.encrypted[l]),c===d?[3,4]:(zf.warning("Encryption algorithm has changed. Stored data would be cleared."),[4,this.clear()])):[3,4]:[3,5];case 3:return g.sent(),[3,5];case 4:return s++,[3,2];case 5:return[3,8];case 6:return[4,this.clear()];case 7:g.sent(),g.label=8;case 8:return[4,this.set({key:this._encryptionCheckKey,value:e})];case 9:return g.sent(),[2]}}))}))},Object.defineProperty(t.prototype,"adjustedItemSizeLimit",{get:function(){return Math.max(this.itemSizeLimit-this.metadataBuffer,4)},enumerable:!1,configurable:!0}),t.prototype.usage=function(){return S(this,void 0,void 0,(function(){var n,e,r,i,a,s,l,c,d;return T(this,(function(p){switch(p.label){case 0:return n=0,[4,this._getAllRawKeys()];case 1:e=p.sent(),p.label=2;case 2:p.trys.push([2,7,8,9]),r=Re(e),i=r.next(),p.label=3;case 3:return i.done?[3,6]:(a=i.value,[4,this._getRaw(a)]);case 4:(s=p.sent())&&(n+=JSON.stringify(s).length),p.label=5;case 5:return i=r.next(),[3,3];case 6:return[3,9];case 7:return l=p.sent(),c={error:l},[3,9];case 8:try{i&&!i.done&&(d=r.return)&&d.call(r)}finally{if(c)throw c.error}return[7];case 9:return[2,n]}}))}))},t.prototype.getAllKeys=function(){return S(this,void 0,void 0,(function(){var n=this;return T(this,(function(e){switch(e.label){case 0:return[4,this._getAllRawKeys()];case 1:return[2,e.sent().filter((function(r){return r.endsWith(".0")})).map((function(r){return r.replace(/\.0$/,"")})).filter((function(r){return!n._reservedKeys.includes(r)}))]}}))}))},t.prototype.get=function(n){return S(this,void 0,void 0,(function(){var e,r,i,a,s,l,c=this;return T(this,(function(d){switch(d.label){case 0:return e=this._getRawKey(n,".0"),[4,this._getRaw(e)];case 1:if(!(r=d.sent()))return[3,7];d.label=2;case 2:return d.trys.push([2,6,,7]),i=r.data,(a=r.metadata)!=null&&a.shards&&a.shards>1?[4,Promise.all(this._generateShardPostfixArray(a?.shards).map((function(p){return S(c,void 0,void 0,(function(){var g,_;return T(this,(function(y){switch(y.label){case 0:return p>0?(g=this._getRawKey(n,".".concat(p)),[4,this._getRaw(g)]):[3,2];case 1:if(!(_=y.sent()))throw yn.storeBrokenIntegrity;return[2,_.data];case 2:return[2,i]}}))}))})))]:[3,4];case 3:return l=d.sent(),[3,5];case 4:l=[i],d.label=5;case 5:return s=l,[2,this.encryption.decrypt(JSON.parse(s.join("")))];case 6:return d.sent(),[2,null];case 7:return[2,null]}}))}))},t.prototype.set=function(n){return S(this,void 0,void 0,(function(){var e;return T(this,(function(r){switch(r.label){case 0:return e=this._shardify(n),[4,this._setRaw(e)];case 1:return r.sent(),[2,z({},n.value)]}}))}))},t.prototype.setMany=function(n){return S(this,void 0,void 0,(function(){var e,r=this;return T(this,(function(i){switch(i.label){case 0:return e=[],[4,this._setRaw(e.concat.apply(e,Je([],Ye(n.map((function(a){return r._shardify(a)}))),!1)))];case 1:return i.sent(),[2,n.map((function(a){return a.value}))]}}))}))},t.prototype.remove=function(n){return S(this,void 0,void 0,(function(){var e,r,i,a,s,l=this;return T(this,(function(c){switch(c.label){case 0:return e=this._getRawKey(n,".0"),[4,this._getRaw(e)];case 1:return(r=c.sent())?(i=r.metadata,a=this._generateShardPostfixArray(i?.shards).map((function(d){return l._getRawKey(n,".".concat(d))})),[4,this._removeRaw(a)]):[3,3];case 2:return c.sent(),(s=gs.get(this.dbname))==null||s.remove(n),[2,!0];case 3:return[2,!1]}}))}))},t.prototype.removeMany=function(n){return S(this,void 0,void 0,(function(){var e,r,i,a,s,l,c,d,p,g,_=this;return T(this,(function(y){switch(y.label){case 0:e=gs.get(this.dbname),r=[],i=function(C){var w,A,M;return T(this,(function(I){switch(I.label){case 0:return w=a._getRawKey(C,".0"),[4,a._getRaw(w)];case 1:return(A=I.sent())&&(M=A.metadata,r.push.apply(r,Je([],Ye(a._generateShardPostfixArray(M?.shards).map((function(D){return _._getRawKey(C,".".concat(D))}))),!1))),e?.remove(C),[2]}}))},a=this,y.label=1;case 1:y.trys.push([1,6,7,8]),s=Re(n),l=s.next(),y.label=2;case 2:return l.done?[3,5]:(c=l.value,[5,i(c)]);case 3:y.sent(),y.label=4;case 4:return l=s.next(),[3,2];case 5:return[3,8];case 6:return d=y.sent(),p={error:d},[3,8];case 7:try{l&&!l.done&&(g=s.return)&&g.call(s)}finally{if(p)throw p.error}return[7];case 8:return r.length>0?[4,this._removeRaw(r)]:[3,10];case 9:y.sent(),y.label=10;case 10:return[2,n]}}))}))},t.prototype.clear=function(){return S(this,void 0,void 0,(function(){var n;return T(this,(function(e){return(n=gs.get(this.dbname))==null||n.clearForDatabase(this.dbname),[2]}))}))},t})(),ds={},$f=(function(t){function n(e){e===void 0&&(e={});var r,i=this;i=t.call(this,z(z({},e),{itemSizeLimit:(r=e.itemSizeLimit)!==null&&r!==void 0?r:4194304}))||this;var a=e.delay,s=a===void 0?1:a;return i.delay=s,i.observer={},i}return U(n,t),Object.defineProperty(n.prototype,"rawData",{get:function(){return ds[this.dbname]},set:function(e){ds[this.dbname]=e},enumerable:!1,configurable:!0}),n.prototype._getAllRawKeys=function(){return S(this,void 0,void 0,(function(){return T(this,(function(e){if(ds[this.dbname])return[2,Object.keys(ds[this.dbname])];throw yn.storeNotAvailable}))}))},n.prototype._getRaw=function(e){return S(this,void 0,void 0,(function(){return T(this,(function(r){switch(r.label){case 0:return ds[this.dbname]?[4,vE(this.delay)]:[3,2];case 1:return r.sent(),[2,ds[this.dbname][e]?z({key:e},ds[this.dbname][e]):null];case 2:throw yn.storeNotAvailable}}))}))},n.prototype._setRaw=function(e){return S(this,void 0,void 0,(function(){var r,i,a,s,l,c,d,p;return T(this,(function(g){switch(g.label){case 0:return ds[this.dbname]?[4,vE(this.delay)]:[3,2];case 1:g.sent();try{for(r=Re(e),i=r.next();!i.done;i=r.next())a=i.value,s=a.key,l=a.data,c=a.metadata,ds[this.dbname][s]=Object.freeze({data:l,metadata:c})}catch(_){d={error:_}}finally{try{i&&!i.done&&(p=r.return)&&p.call(r)}finally{if(d)throw d.error}}return[3,3];case 2:throw yn.storeNotAvailable;case 3:return[2]}}))}))},n.prototype._removeRaw=function(e){return S(this,void 0,void 0,(function(){var r,i,a,s,l;return T(this,(function(c){switch(c.label){case 0:return ds[this.dbname]?[4,vE(this.delay)]:[3,2];case 1:c.sent();try{for(r=Re(e),i=r.next();!i.done;i=r.next())a=i.value,ds[this.dbname][a]&&delete ds[this.dbname][a]}catch(d){s={error:d}}finally{try{i&&!i.done&&(l=r.return)&&l.call(r)}finally{if(s)throw s.error}}return[3,3];case 2:throw yn.storeNotAvailable;case 3:return[2]}}))}))},n.prototype.observe=function(e,r,i){var a=this;this.observer[e]||(this.observer[e]={}),r.forEach((function(s){return a.observer[e][s]=i}))},n.prototype.checkAvailability=function(){return S(this,void 0,void 0,(function(){return T(this,(function(e){return[2]}))}))},n.prototype.init=function(e){return S(this,void 0,void 0,(function(){return T(this,(function(r){switch(r.label){case 0:return this.dbname=e,ds[this.dbname]||(ds[this.dbname]={}),[4,this._resetIfEncryptionChanged()];case 1:return r.sent(),[2]}}))}))},n.prototype.set=function(e){return S(this,void 0,void 0,(function(){var r,i;return T(this,(function(a){if((r=this.observer[e.key])&&typeof r.set=="function"&&(i=r.set()))throw i;return[2,t.prototype.set.call(this,e)]}))}))},n.prototype.setMany=function(e){return S(this,void 0,void 0,(function(){var r,i,a,s,l,c,d;return T(this,(function(p){try{for(r=Re(e),i=r.next();!i.done;i=r.next())if(a=i.value,(s=this.observer[a.key])&&typeof s.set=="function"&&(l=s.set()))throw l}catch(g){c={error:g}}finally{try{i&&!i.done&&(d=r.return)&&d.call(r)}finally{if(c)throw c.error}}return[2,t.prototype.setMany.call(this,e)]}))}))},n.prototype.clear=function(){return S(this,void 0,void 0,(function(){return T(this,(function(e){switch(e.label){case 0:return[4,t.prototype.clear.call(this)];case 1:return e.sent(),[4,vE(this.delay)];case 2:return e.sent(),ds[this.dbname]={},[2]}}))}))},n})(i2),MM="NestDBStore";(function(t){t[t.UNINITIALIZED=0]="UNINITIALIZED",t[t.OPENING=1]="OPENING",t[t.OPEN=2]="OPEN",t[t.CLOSED=3]="CLOSED"})(jl||(jl={}));var iB=(function(t){function n(e){e===void 0&&(e={});var r,i=this;return(i=t.call(this,z(z({},e),{itemSizeLimit:(r=e.itemSizeLimit)!==null&&r!==void 0?r:104857600}))||this)._storeName=MM,i._state=jl.UNINITIALIZED,i._openJobQueue=[],i._window=typeof window<"u"?window:void 0,i._indexedDb=i._window?i._window.indexedDB||i._window.mozIndexedDB||i._window.webkitIndexedDB||i._window.msIndexedDB:void 0,i}return U(n,t),Object.defineProperty(n.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),n.prototype.isTransactionInactiveError=function(e){return e instanceof Error&&e.message.includes("The transaction is inactive")},n.prototype._putToObjectStore=function(e,r){return S(this,void 0,void 0,(function(){return T(this,(function(i){return[2,new Promise((function(a,s){var l=e.put(r);l.addEventListener("success",(function(c){a(c.target.result)})),l.addEventListener("error",(function(c){s(c.target.error)}))}))]}))}))},n.prototype._deleteFromObjectStore=function(e,r){return S(this,void 0,void 0,(function(){return T(this,(function(i){return[2,new Promise((function(a,s){var l=e.delete(r);l.addEventListener("success",(function(){return a(r)})),l.addEventListener("error",(function(c){return s(c.target.error)}))}))]}))}))},n.prototype._openDatabase=function(e){var r=this;return new Promise((function(i,a){if(r._indexedDb){r._state=jl.OPENING;var s=r._indexedDb.open(e);s.addEventListener("upgradeneeded",(function(l){l.target.result.createObjectStore(MM,{keyPath:"key"})})),s.addEventListener("success",(function(l){r._state=jl.OPEN,r._database=l.target.result,r._openJobQueue.forEach((function(c){return c()})),r._openJobQueue=[],r._database.onclose=function(){r._database=void 0,r._state=jl.OPENING,setTimeout((function(){r._openDatabase(e)}),5)},i(r._database)})),s.addEventListener("error",(function(l){r._state=jl.UNINITIALIZED,a(l.target.error)}))}else a(yn.storeNotAvailable)}))},n.prototype._getObjectStore=function(e){return S(this,void 0,void 0,(function(){var r,i=this;return T(this,(function(a){switch(a.label){case 0:return this._database?((r=this._database.transaction(this._storeName,e)).addEventListener("abort",(function(s){throw s.target.error})),[2,r.objectStore(this._storeName)]):[3,1];case 1:switch(this._state){case jl.UNINITIALIZED:case jl.OPEN:return[3,2];case jl.OPENING:case jl.CLOSED:return[3,3]}return[3,4];case 2:throw yn.storeNotInitialized;case 3:return[2,new Promise((function(s){i._openJobQueue.push((function(){return s(i._getObjectStore(e))}))}))];case 4:return[4,this._getObjectStore(e)];case 5:return[2,a.sent()]}}))}))},n.prototype._getAllRawKeys=function(){return S(this,void 0,void 0,(function(){var e=this;return T(this,(function(r){switch(r.label){case 0:return[4,new Promise((function(i,a){return S(e,void 0,void 0,(function(){var s,l;return T(this,(function(c){switch(c.label){case 0:return[4,this._getObjectStore("readonly")];case 1:return s=c.sent(),(l=s.getAllKeys()).addEventListener("success",(function(d){i(d.target.result)})),l.addEventListener("error",(function(d){return a(d.target.error)})),[2]}}))}))}))];case 1:return[2,r.sent()]}}))}))},n.prototype._getRaw=function(e){return S(this,void 0,void 0,(function(){var r=this;return T(this,(function(i){switch(i.label){case 0:return[4,new Promise((function(a,s){return S(r,void 0,void 0,(function(){var l,c;return T(this,(function(d){switch(d.label){case 0:return[4,this._getObjectStore("readonly")];case 1:return l=d.sent(),(c=l.get(e)).addEventListener("success",(function(p){var g;a((g=p?.target)===null||g===void 0?void 0:g.result)})),c.addEventListener("error",(function(p){return s(p.target.error)})),[2]}}))}))}))];case 1:return[2,i.sent()]}}))}))},n.prototype._setRaw=function(e){return S(this,void 0,void 0,(function(){var r,i,a,s,l,c,d,p,g,_=this;return T(this,(function(y){switch(y.label){case 0:return y.trys.push([0,3,,15]),[4,this._getObjectStore("readwrite")];case 1:return r=y.sent(),[4,Promise.all(e.map((function(C){return _._putToObjectStore(r,C)})))];case 2:return y.sent(),[3,15];case 3:return i=y.sent(),this.isTransactionInactiveError(i)?[4,this._getObjectStore("readwrite")]:[3,13];case 4:a=y.sent(),y.label=5;case 5:y.trys.push([5,10,11,12]),s=Re(e),l=s.next(),y.label=6;case 6:return l.done?[3,9]:(c=l.value,[4,this._putToObjectStore(a,c)]);case 7:y.sent(),y.label=8;case 8:return l=s.next(),[3,6];case 9:return[3,12];case 10:return d=y.sent(),p={error:d},[3,12];case 11:try{l&&!l.done&&(g=s.return)&&g.call(s)}finally{if(p)throw p.error}return[7];case 12:return[3,14];case 13:throw i;case 14:return[3,15];case 15:return[2]}}))}))},n.prototype._removeRaw=function(e){return S(this,void 0,void 0,(function(){var r,i,a,s,l,c,d,p,g,_=this;return T(this,(function(y){switch(y.label){case 0:return y.trys.push([0,3,,15]),[4,this._getObjectStore("readwrite")];case 1:return r=y.sent(),[4,Promise.all(e.map((function(C){return _._deleteFromObjectStore(r,C)})))];case 2:return y.sent(),[3,15];case 3:return i=y.sent(),this.isTransactionInactiveError(i)?[4,this._getObjectStore("readwrite")]:[3,13];case 4:a=y.sent(),y.label=5;case 5:y.trys.push([5,10,11,12]),s=Re(e),l=s.next(),y.label=6;case 6:return l.done?[3,9]:(c=l.value,[4,this._deleteFromObjectStore(a,c)]);case 7:y.sent(),y.label=8;case 8:return l=s.next(),[3,6];case 9:return[3,12];case 10:return d=y.sent(),p={error:d},[3,12];case 11:try{l&&!l.done&&(g=s.return)&&g.call(s)}finally{if(p)throw p.error}return[7];case 12:return[3,14];case 13:throw i;case 14:return[3,15];case 15:return[2]}}))}))},n.prototype._triggerDatabaseClose=function(){this._database&&this._database.onclose&&this._database.onclose(new Event("dummy"))},n.prototype.checkAvailability=function(){return S(this,void 0,void 0,(function(){var e,r=this;return T(this,(function(i){switch(i.label){case 0:if(!((e=typeof window<"u"?window:null)!=null&&e.indexedDB||e?.mozIndexedDB||e?.webkitIndexedDB||e?.msIndexedDB))return[3,6];if(this._indexedDb=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB,!this._window||!E1())return[3,4];if(!(E1()&&navigator.userAgent&&navigator.userAgent.includes("Edge/")))return[3,1];if(!this._window.indexedDB&&(e.PointerEvent||e.MSPointerEvent))throw yn.storeNotAvailableInPrivateBrowsing;return[3,3];case 1:return[4,new Promise((function(a,s){if(r._indexedDb)try{var l=r._indexedDb.open("_testMozilla");l.onerror=function(){return s(yn.storeNotAvailableInPrivateBrowsing)},l.onsuccess=function(c){if(c.target.result.close(),r._indexedDb){var d=r._indexedDb.deleteDatabase("_testMozilla");d.onerror=function(){return a()},d.onsuccess=function(){return a()}}else s(yn.storeNotAvailable)}}catch{s(yn.storeNotAvailableInPrivateBrowsing)}else s(yn.storeNotAvailable)}))];case 2:i.sent(),i.label=3;case 3:return[3,5];case 4:throw yn.storeNotAvailable;case 5:return[3,7];case 6:throw yn.storeNotAvailable;case 7:return[2]}}))}))},n.prototype.init=function(e){return S(this,void 0,void 0,(function(){return T(this,(function(r){switch(r.label){case 0:return this.dbname=e,[4,this.checkAvailability()];case 1:return r.sent(),[4,this._openDatabase(e)];case 2:return r.sent(),[4,this._resetIfEncryptionChanged()];case 3:return r.sent(),[2]}}))}))},n.prototype.clear=function(){return S(this,void 0,void 0,(function(){var e=this;return T(this,(function(r){switch(r.label){case 0:return[4,t.prototype.clear.call(this)];case 1:return r.sent(),[4,new Promise((function(i,a){return S(e,void 0,void 0,(function(){var s,l;return T(this,(function(c){switch(c.label){case 0:return[4,this._getObjectStore("readwrite")];case 1:return s=c.sent(),(l=s.clear()).addEventListener("success",(function(){return i()})),l.addEventListener("error",(function(d){return a(d.target.error)})),[2]}}))}))}))];case 2:return[2,r.sent()]}}))}))},n})(i2),aB=(function(t){function n(e){var r=this,i=e.AsyncStorage,a=e.itemSizeLimit,s=a===void 0?2097152:a,l=k9(e,["AsyncStorage","itemSizeLimit"]);return(r=t.call(this,z(z({},l),{itemSizeLimit:s}))||this)._asyncStorage=i,r}return U(n,t),n.prototype._isBelonging=function(e){return e.startsWith("".concat(this.dbname,"/"))},n.prototype._getActualKey=function(e){return"".concat(this.dbname,"/").concat(e)},n.prototype._getAllRawKeys=function(){return S(this,void 0,void 0,(function(){var e,r=this;return T(this,(function(i){switch(i.label){case 0:return[4,this._asyncStorage.getAllKeys()];case 1:return e=i.sent(),[2,e.filter((function(a){return r._isBelonging(a)})).map((function(a){return a.substring("".concat(r.dbname,"/").length)}))]}}))}))},n.prototype._getRaw=function(e){return S(this,void 0,void 0,(function(){var r;return T(this,(function(i){switch(i.label){case 0:return[4,this._asyncStorage.getItem(this._getActualKey(e))];case 1:return[2,(r=i.sent())?JSON.parse(r):null]}}))}))},n.prototype._setRaw=function(e){return S(this,void 0,void 0,(function(){var r,i,a,s,l,c,d;return T(this,(function(p){switch(p.label){case 0:r=[];try{for(i=Re(e),a=i.next();!a.done;a=i.next())s=a.value,l=s.key,s.data.length<=this.adjustedItemSizeLimit&&r.push([this._getActualKey(l),JSON.stringify(s)])}catch(g){c={error:g}}finally{try{a&&!a.done&&(d=i.return)&&d.call(i)}finally{if(c)throw c.error}}return[4,this._asyncStorage.multiSet(r)];case 1:return p.sent(),[2]}}))}))},n.prototype._removeRaw=function(e){return S(this,void 0,void 0,(function(){var r=this;return T(this,(function(i){switch(i.label){case 0:return[4,this._asyncStorage.multiRemove(e.map((function(a){return r._getActualKey(a)})))];case 1:return i.sent(),[2]}}))}))},n.prototype.checkAvailability=function(){return S(this,void 0,void 0,(function(){return T(this,(function(e){if(!this._asyncStorage)throw yn.storeNotAvailable;return[2]}))}))},n.prototype.init=function(e){return S(this,void 0,void 0,(function(){return T(this,(function(r){switch(r.label){case 0:return this.dbname=e,[4,this._resetIfEncryptionChanged()];case 1:return r.sent(),[2]}}))}))},n.prototype.clear=function(){return S(this,void 0,void 0,(function(){var e;return T(this,(function(r){switch(r.label){case 0:return[4,t.prototype.clear.call(this)];case 1:return r.sent(),[4,this.getAllKeys()];case 2:return e=r.sent(),[4,this.removeMany(e)];case 3:return r.sent(),[2]}}))}))},n})(i2),sB=(function(t){function n(e){var r,i,a=this;return(a=t.call(this,z(z({},e),{itemSizeLimit:(r=e.itemSizeLimit)!==null&&r!==void 0?r:6291456}))||this)._mmkv=(i=e.MMKV,{getString:function(s){return i.getString(s)},set:function(s,l){return i.set(s,l)},delete:function(s){return i.remove?i.remove(s):i.delete(s)},getAllKeys:function(){return i.getAllKeys()}}),a}return U(n,t),n.prototype._isBelonging=function(e){return e.startsWith("".concat(this.dbname,"/"))},n.prototype._getActualKey=function(e){return"".concat(this.dbname,"/").concat(e)},n.prototype._getAllRawKeys=function(){return S(this,void 0,void 0,(function(){var e,r=this;return T(this,(function(i){switch(i.label){case 0:return[4,this._mmkv.getAllKeys()];case 1:return e=i.sent(),[2,e.filter((function(a){return r._isBelonging(a)})).map((function(a){return a.substring("".concat(r.dbname,"/").length)}))]}}))}))},n.prototype._getRaw=function(e){return S(this,void 0,void 0,(function(){var r;return T(this,(function(i){switch(i.label){case 0:return[4,this._mmkv.getString(this._getActualKey(e))];case 1:return[2,(r=i.sent())?JSON.parse(r):null]}}))}))},n.prototype._setRaw=function(e){return S(this,void 0,void 0,(function(){var r,i,a,s,l,c;return T(this,(function(d){try{for(r=Re(e),i=r.next();!i.done;i=r.next())a=i.value,s=a.key,a.data.length<=this.adjustedItemSizeLimit&&this._mmkv.set(this._getActualKey(s),JSON.stringify(a))}catch(p){l={error:p}}finally{try{i&&!i.done&&(c=r.return)&&c.call(r)}finally{if(l)throw l.error}}return[2]}))}))},n.prototype._removeRaw=function(e){return S(this,void 0,void 0,(function(){var r,i,a,s,l;return T(this,(function(c){try{for(r=Re(e),i=r.next();!i.done;i=r.next())a=i.value,this._mmkv.delete(this._getActualKey(a))}catch(d){s={error:d}}finally{try{i&&!i.done&&(l=r.return)&&l.call(r)}finally{if(s)throw s.error}}return[2]}))}))},n.prototype.checkAvailability=function(){return S(this,void 0,void 0,(function(){return T(this,(function(e){if(!this._mmkv)throw yn.storeNotAvailable;return[2]}))}))},n.prototype.init=function(e){return S(this,void 0,void 0,(function(){return T(this,(function(r){switch(r.label){case 0:return this.dbname=e,[4,this._resetIfEncryptionChanged()];case 1:return r.sent(),[2]}}))}))},n.prototype.clear=function(){return S(this,void 0,void 0,(function(){var e;return T(this,(function(r){switch(r.label){case 0:return[4,t.prototype.clear.call(this)];case 1:return r.sent(),[4,this.getAllKeys()];case 2:return e=r.sent(),[4,this.removeMany(e)];case 3:return r.sent(),[2]}}))}))},n})(i2),ql;(function(t){t.INIT="INIT",t.OPENING="OPENING",t.OPENED="OPENED",t.CLOSED="CLOSED"})(ql||(ql={}));var Oc,oB=(function(){function t(n){var e=n.name,r=n.version,i=n.store,a=n.config;this.name=e,this._version=r,this._state=ql.INIT,this._config=a||new Y0({dbname:e}),this._store=i,this._event={success:B_,error:B_,storeReplaced:B_,upgrade:TM},this._collections=new Map,this._globalMutex=new vS("".concat(this.name,".lock")),this._config.disableLogger&&zf.off(),new gs({dbname:e,limit:this._config.cacheLimit})}return Object.defineProperty(t.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"store",{get:function(){return this._store},enumerable:!1,configurable:!0}),t.prototype._initializeCollection=function(n,e){var r;return S(this,void 0,void 0,(function(){var i,a,s;return T(this,(function(l){switch(l.label){case 0:return a=this._collections.get(n),e?(i=new aw({dbname:this.name,collectionName:n,keyName:e.keyName,indexes:(r=e.index)!==null&&r!==void 0?r:[[e.keyName]],store:this._store}),[3,3]):[3,1];case 1:return a&&a.state===op.READY?[3,3]:[4,aw.metadataOf(this.name,n,this._store)];case 2:(s=l.sent())&&(i=new aw({dbname:this.name,collectionName:n,keyName:s.keyName,indexes:s.indexes,store:this._store})),l.label=3;case 3:return i?(this._collections.set(n,i),[4,i.init()]):[3,5];case 4:l.sent(),l.label=5;case 5:return[2]}}))}))},t.prototype.estimateUsage=function(){return S(this,void 0,void 0,(function(){return T(this,(function(n){switch(n.label){case 0:return[4,(e=this._store,S(void 0,void 0,void 0,(function(){return T(this,(function(r){switch(r.label){case 0:return[4,e.usage()];case 1:return[2,r.sent()]}}))})))];case 1:return[2,n.sent()]}var e}))}))},t.prototype.commitSchema=function(n){return S(this,void 0,void 0,(function(){var e=this;return T(this,(function(r){switch(r.label){case 0:return this._state!==ql.OPENING?[3,2]:[4,Promise.all(n.map((function(i){return S(e,void 0,void 0,(function(){return T(this,(function(a){switch(a.label){case 0:return[4,this._initializeCollection(i.collectionName,i)];case 1:return a.sent(),[2]}}))}))})))];case 1:return r.sent(),[3,3];case 2:throw yn.databaseSchemaNotOnUpgrade;case 3:return[2]}}))}))},t.prototype.open=function(){var n;return S(this,void 0,void 0,(function(){var e,r,i,a,s,l,c,d,p,g,_=this;return T(this,(function(y){switch(y.label){case 0:return[4,this._globalMutex.lock()];case 1:if(y.sent(),this._state===ql.OPENED)return[3,20];this._state=ql.OPENING,y.label=2;case 2:return y.trys.push([2,13,,20]),[4,this._store.init(this.name)];case 3:return y.sent(),C=this.name,e="".concat(gS(C),".metadata"),r={version:0,collectionNames:[]},[4,this._store.get(e)];case 4:i=(n=y.sent())!==null&&n!==void 0?n:r,y.label=5;case 5:y.trys.push([5,10,11,12]),a=Re(i.collectionNames),s=a.next(),y.label=6;case 6:return s.done?[3,9]:(l=s.value,[4,this._initializeCollection(l)]);case 7:y.sent(),y.label=8;case 8:return s=a.next(),[3,6];case 9:return[3,12];case 10:return c=y.sent(),p={error:c},[3,12];case 11:try{s&&!s.done&&(g=a.return)&&g.call(a)}finally{if(p)throw p.error}return[7];case 12:return[2,new Promise((function(w,A){var M=function(D){i.version<_._version?_._event.upgrade(i.version,(function(P){return S(_,void 0,void 0,(function(){var H;return T(this,(function(L){switch(L.label){case 0:if(P)return[3,5];i.version++,i.collectionNames=Array.from(this._collections.keys()),L.label=1;case 1:return L.trys.push([1,3,,4]),[4,this._store.set({key:e,value:i})];case 2:return L.sent(),D({continued:!0}),[3,4];case 3:return H=L.sent(),D({continued:!1,err:H}),[3,4];case 4:return[3,6];case 5:D({continued:!1,err:P}),L.label=6;case 6:return[2]}}))}))})):D({continued:!1})},I=function(D){var P=D.continued,H=P!==void 0&&P,L=D.err,G=L===void 0?null:L;H?setTimeout((function(){return M(I)}),10):G?(zf.error(G.message),_._globalMutex.unlock(),_._event.error(G),A(G)):Promise.all(i.collectionNames.map((function(Y){return _._initializeCollection(Y)}))).then((function(){_._state=ql.OPENED,_._globalMutex.unlock(),_._event.success(),w()})).catch((function(Y){zf.error(Y.message),_._globalMutex.unlock(),_._event.error(Y),A(Y)}))};M(I)}))];case 13:switch(d=y.sent(),d.code){case pr.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING:return[3,14];case pr.STORE_NOT_AVAILABLE:return[3,16]}return[3,18];case 14:return zf.warning("Access to the local storage is not allowed. Switched to MemoryStore automatically."),this._store=new $f({}),this._globalMutex.unlock(),this._event.error(d),this._event.storeReplaced(this._store),[4,this.open()];case 15:return y.sent(),[3,19];case 16:return zf.warning("IndexedDB is not available in this environment. Switched to MemoryStore automatically. Consider using other store to save data persistently (e.g. AsyncStorage)."),this._store=new $f({}),this._globalMutex.unlock(),this._event.error(d),this._event.storeReplaced(this._store),[4,this.open()];case 17:return y.sent(),[3,19];case 18:throw zf.error(d.message),this._globalMutex.unlock(),this._event.error(d),d;case 19:return[3,20];case 20:return[2]}var C}))}))},t.prototype.close=function(){this._collections.forEach((function(n){return n.close()})),this._state=ql.CLOSED},t.prototype.clear=function(){return S(this,void 0,void 0,(function(){return T(this,(function(n){switch(n.label){case 0:return[4,Promise.all(Array.from(this._collections.values()).map((function(e){return e.clear()})))];case 1:return n.sent(),[2]}}))}))},t.prototype.reset=function(){return S(this,void 0,void 0,(function(){var n;return T(this,(function(e){switch(e.label){case 0:return(n=gs.get(this.name))&&n.clearForDatabase(this.name),[4,this._store.clear()];case 1:return e.sent(),[2]}}))}))},t.prototype.on=function(n,e){this._event[n]=e},t.prototype.off=function(n){typeof this._event[n]=="function"&&(n==="upgrade"?this._event[n]=TM:this._event[n]=B_)},t.prototype.collection=function(n){var e=this._collections.get(n);if(e)return e;throw yn.collectionNotReady},t})();(function(t){t[t.VERBOSE=0]="VERBOSE",t[t.DEBUG=1]="DEBUG",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.NONE=5]="NONE"})(Oc||(Oc={}));var Gi,rx=(function(){function t(){this.level=Oc.WARN}return t.prototype.verbose=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];this.level<=Oc.VERBOSE&&console.log.apply(console,Je(["[verbose]"],Ye(n),!1))},t.prototype.debug=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];this.level<=Oc.DEBUG&&console.log.apply(console,Je(["[debug]"],Ye(n),!1))},t.prototype.info=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];this.level<=Oc.INFO&&console.log.apply(console,Je(["[info]"],Ye(n),!1))},t.prototype.warn=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];this.level<=Oc.WARN&&console.warn.apply(console,Je(["[warn]"],Ye(n),!1))},t.prototype.error=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];this.level<=Oc.ERROR&&console.error.apply(console,Je(["[error]"],Ye(n),!1))},t})(),vh=(function(){function t(n){var e,r,i,a;this.messageTypeFilter=(e=n?.messageTypeFilter)!==null&&e!==void 0?e:ea.ALL,this.customTypesFilter=(r=n?.customTypesFilter)!==null&&r!==void 0?r:null,this.senderUserIdsFilter=(i=n?.senderUserIdsFilter)!==null&&i!==void 0?i:null,this.replyType=(a=n?.replyType)!==null&&a!==void 0?a:ta.NONE}return t.prototype.clone=function(){var n=new t,e=JSON.parse(JSON.stringify(this));return Object.keys(e).forEach((function(r){n[r]=e[r]})),n},t.prototype.match=function(n){switch(this.messageTypeFilter){case ea.USER:if(n.messageType!==Hn.USER)return!1;break;case ea.FILE:if(n.messageType!==Hn.FILE)return!1;break;case ea.ADMIN:if(n.messageType!==Hn.ADMIN)return!1}if(this.customTypesFilter&&this.customTypesFilter.length>0&&!this.customTypesFilter.includes("*")&&!this.customTypesFilter.includes(n.customType)||this.senderUserIdsFilter&&this.senderUserIdsFilter.length>0&&(!(n instanceof Rr)||!this.senderUserIdsFilter.includes(n.sender.userId)))return!1;if(n instanceof ba)switch(this.replyType){case ta.NONE:if(n.parentMessageId>0)return!1;break;case ta.ONLY_REPLY_TO_CHANNEL:if(n instanceof Rr&&n.parentMessageId>0&&!n.replyToChannel)return!1}return!0},t})();(function(t){t.CHANNEL_LATEST="channel_latest",t.NEWEST_CHILD_MESSAGE="newest_child_message"})(Gi||(Gi={}));var d0,Lu=function(t){switch(t){case Gi.CHANNEL_LATEST:return["channelUrl","-createdAt","-messageId"];case Gi.NEWEST_CHILD_MESSAGE:return["channelUrl","-parentMessageId","-createdAt","-messageId"]}},lB=function(){return["channelUrl","-createdAt","-notificationId"]},uB=z(z({},FD),{scheduledAt:void 0}),cB=function(t){return jD(t)&&Q("number",t.scheduledAt,!0)},dB=z(z({},n2),{scheduledAt:0,file:void 0,fileUrl:void 0,fileName:void 0,mimeType:void 0,fileSize:void 0,thumbnailSizes:void 0,requireAuth:!1}),hB=function(t){return r2(t)&&Q("number",t.scheduledAt)&&(Ai(t.file)||Q("string",t.fileUrl))&&Q("string",t.fileName,!0)&&Q("string",t.mimeType,!0)&&Q("number",t.fileSize,!0)&&(t.thumbnailSizes===null||t.thumbnailSizes===void 0||t.thumbnailSizes.every((function(n){return Q("object",n)&&n.maxWidth>0&&n.maxHeight>0})))},ix="UnsentMessage",fB="reqId",bE={},Ep=(function(t){function n(e){var r=t.call(this,e)||this;return r._mutex=new vS("unsendmessagecache.lock"),bE[e]=r,r}return U(n,t),Object.defineProperty(n.prototype,"_cacheContext",{get:function(){return W.of(this._iid).cacheContext},enumerable:!1,configurable:!0}),n.of=function(e,r){return r===void 0&&(r=!1),bE[e]&&!r||(bE[e]=new n(e)),bE[e]},Object.defineProperty(n.prototype,"collection",{get:function(){var e=this._cacheContext.nestdb,r=e?.collection(ix);if(!r)throw X.databaseError;return r},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"localCacheEnabled",{get:function(){return this._cacheContext.localCacheEnabled&&!!this.collection},enumerable:!1,configurable:!0}),n.prototype._serialize=function(e){if(e.messageId>0)throw X.invalidParameters;var r,i=z({},e.serialize());return e instanceof Ji?(e.messageParams&&(i.messageParams=cM(e.messageParams)),e.scheduledInfo&&e.scheduledInfo.scheduledMessageParams&&(i.scheduledInfo.scheduledMessageParams=(r=e.scheduledInfo.scheduledMessageParams,z(z({},cM(r)),{scheduledAt:r.scheduledAt})))):e instanceof Xr?(e.messageParams&&(i.messageParams=dM(e.messageParams)),e.scheduledInfo&&e.scheduledInfo.scheduledMessageParams&&(i.scheduledInfo.scheduledMessageParams=(function(a){return z(z({},dM(a)),{scheduledAt:a.scheduledAt})})(e.scheduledInfo.scheduledMessageParams))):e instanceof wo&&e.messageParams&&(i.messageParams=(function(a){return Le({fileInfoList:a.fileInfoList.map((function(s){return{file:s.file,fileUrl:k0.getPlainUrl(s),fileName:s.fileName,fileSize:s.fileSize,mimeType:s.mimeType,thumbnailSizes:s.thumbnailSizes,_thumbnails:s._thumbnails,_uploadedMetaData:s._uploadedMetaData}})),isReplyToChannel:a.isReplyToChannel,pushNotificationDeliveryOption:a.pushNotificationDeliveryOption})})(e.messageParams)),i},n.prototype._deserialize=function(e){return e=z(z({},e),{messageId:parseInt(e.messageId)}),gi.of(this._iid).buildMessageFromSerializedData(e)},n.prototype._deserializeWithMessageCreateParams=function(e){var r,i,a;return S(this,void 0,void 0,(function(){var s,l,c,d,p,g,_=this;return T(this,(function(y){switch(y.label){case 0:return s=gi.of(this._iid),l=this._deserialize(e),e.messageParams?l instanceof Ji?(d=e.messageParams,l.messageParams=s.buildUserMessageCreateParamsFromSerializedData(d,l),[3,6]):[3,1]:[3,6];case 1:return l instanceof Xr?(d=e.messageParams).fileKey&&typeof d.fileKey=="string"&&ew((r=d.fileType)!==null&&r!==void 0?r:"")?(c=d,[4,this.collection.getBlob(d.fileKey)]):[3,3]:[3,4];case 2:c.file=(i=y.sent())!==null&&i!==void 0?i:void 0,y.label=3;case 3:return l.messageParams=s.buildFileMessageCreateParamsFromSerializedData(d,l),[3,6];case 4:return l instanceof wo&&(d=e.messageParams)&&d.fileInfoList?(l.messageParams=s.buildMultipleFilesMessageCreateParamsFromSerializedData(d,l),[4,Promise.all(l.messageParams.fileInfoList.map((function(C){return S(_,void 0,void 0,(function(){var w,A,M,I,D;return T(this,(function(P){switch(P.label){case 0:return typeof((A=C._uploadedMetaData)===null||A===void 0?void 0:A.fileKey)=="string"&&ew((I=(M=C._uploadedMetaData)===null||M===void 0?void 0:M.fileType)!==null&&I!==void 0?I:"")?(w=C,[4,this.collection.getBlob(C._uploadedMetaData.fileKey)]):[3,2];case 1:w.file=(D=P.sent())!==null&&D!==void 0?D:void 0,P.label=2;case 2:return[2]}}))}))})))]):[3,6];case 5:y.sent(),y.label=6;case 6:return l.scheduledInfo&&e.scheduledInfo&&e.scheduledInfo.scheduledMessageParams?l instanceof Ji?(p=e.scheduledInfo.scheduledMessageParams,l.scheduledInfo.scheduledMessageParams=s.buildScheduledUserMessageCreateParamsFromSerializedData(p,l),[3,10]):[3,7]:[3,10];case 7:return l instanceof Xr?(p=e.scheduledInfo.scheduledMessageParams).fileKey&&typeof p.fileKey=="string"&&typeof p.fileType=="string"&&ew(p.fileType)?(g=p,[4,this.collection.getBlob(p.fileKey)]):[3,9]:[3,10];case 8:g.file=(a=y.sent())!==null&&a!==void 0?a:void 0,y.label=9;case 9:l.scheduledInfo.scheduledMessageParams=s.buildScheduledFileMessageCreateParamsFromSerializedData(p,l),y.label=10;case 10:return[2,l]}}))}))},n.prototype._getFileInfoBlobKey=function(e,r){return"".concat(e,".").concat(r)},n.prototype.get=function(e){return S(this,void 0,void 0,(function(){var r;return T(this,(function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,this.collection.getByKey("".concat(e))]:[3,2];case 1:if(r=i.sent())return[2,this._deserializeWithMessageCreateParams(r)];i.label=2;case 2:return[2,void 0]}}))}))},n.prototype.fetch=function(e){var r=e.channelUrl,i=e.filter,a=i===void 0?new vh:i,s=e.order,l=s===void 0?Gi.CHANNEL_LATEST:s,c=e.sendingStatus,d=e.backward,p=d!==void 0&&d,g=e.parentMessageId;return S(this,void 0,void 0,(function(){var _,y,C,w,A=this;return T(this,(function(M){switch(M.label){case 0:return this.localCacheEnabled?(_=Lu(l),y={"/where":function(I){return!!(l!==Gi.NEWEST_CHILD_MESSAGE||g&&I.parentMessageId!==0&&I.parentMessageId===g)&&a.match(A._deserialize(I))}},r&&(y.channelUrl=r),c&&(y.sendingStatus=c),C={where:y,index:_,backward:p},[4,this.collection.query(C)]):[3,3];case 1:return[4,M.sent().fetch({})];case 2:return w=M.sent(),[2,Promise.all(w.map((function(I){return S(A,void 0,void 0,(function(){return T(this,(function(D){switch(D.label){case 0:return[4,this._deserializeWithMessageCreateParams(I)];case 1:return[2,D.sent()]}}))}))})))];case 3:return[2,[]]}}))}))},n.prototype.getAllChildMessages=function(e,r){return r===void 0&&(r=new vh),S(this,void 0,void 0,(function(){return T(this,(function(i){switch(i.label){case 0:return[4,this.fetch({filter:r,order:Gi.NEWEST_CHILD_MESSAGE,channelUrl:e.channelUrl,backward:!1,parentMessageId:e.messageId})];case 1:return[2,i.sent()]}}))}))},n.prototype.upsert=function(e){return S(this,void 0,void 0,(function(){var r=this;return T(this,(function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,Promise.all(e.map((function(a){return S(r,void 0,void 0,(function(){var s;return T(this,(function(l){switch(l.label){case 0:return a instanceof Xr||a instanceof wo?[4,this._mutex.lock()]:[3,4];case 1:return l.sent(),[4,this.saveBlob(a)];case 2:return l.sent(),[4,this._mutex.unlock()];case 3:l.sent(),l.label=4;case 4:return s=this._serialize(a),[4,this.collection.upsertOne(s)];case 5:return l.sent(),[2]}}))}))})))]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}}))}))},n.prototype.upsertChildMessages=function(e){return S(this,void 0,void 0,(function(){var r=this;return T(this,(function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,Promise.all(e.map((function(a){return S(r,void 0,void 0,(function(){var s;return T(this,(function(l){switch(l.label){case 0:return s=[],a.threadInfo&&a.threadInfo.replyCount>0?[4,this.getAllChildMessages(a)]:[3,2];case 1:s=l.sent(),l.label=2;case 2:return s.length>0?(s.forEach((function(c){return c.applyParentMessage(a)})),[4,this.upsert(s)]):[3,4];case 3:l.sent(),l.label=4;case 4:return[2]}}))}))})))]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}}))}))},n.prototype.remove=function(e){return S(this,void 0,void 0,(function(){var r,i,a,s,l,c;return T(this,(function(d){switch(d.label){case 0:if(!this.localCacheEnabled)return[3,8];d.label=1;case 1:d.trys.push([1,6,7,8]),r=Re(e),i=r.next(),d.label=2;case 2:return i.done?[3,5]:(a=i.value,[4,this.collection.remove(a)]);case 3:d.sent(),d.label=4;case 4:return i=r.next(),[3,2];case 5:return[3,8];case 6:return s=d.sent(),l={error:s},[3,8];case 7:try{i&&!i.done&&(c=r.return)&&c.call(r)}finally{if(l)throw l.error}return[7];case 8:return[2]}}))}))},n.prototype.removeMessagesOfChannel=function(e){return S(this,void 0,void 0,(function(){return T(this,(function(r){switch(r.label){case 0:return this.localCacheEnabled?[4,this.collection.removeIf({where:{channelUrl:e}})]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},n.prototype.clear=function(){return S(this,void 0,void 0,(function(){return T(this,(function(e){switch(e.label){case 0:return this.localCacheEnabled?[4,this.collection.clear()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},n.prototype.saveBlob=function(e){return S(this,void 0,void 0,(function(){var r,i,a,s=this;return T(this,(function(l){switch(l.label){case 0:return e instanceof Xr?e.messageParams&&(a=e.messageParams).file&&GE(a.file)?[4,this.collection.saveBlob(a.file,e.reqId)]:[3,2]:[3,5];case 1:i=l.sent(),a.fileKey=i,a.fileType=dp.BLOB,l.label=2;case 2:return e.scheduledInfo&&e.scheduledInfo.scheduledMessageParams&&(r=e.scheduledInfo.scheduledMessageParams).file&&GE(r.file)?[4,this.collection.saveBlob(r.file,e.reqId)]:[3,4];case 3:i=l.sent(),r.fileKey=i,r.fileType=dp.BLOB,l.label=4;case 4:return[3,7];case 5:return e instanceof wo&&(a=e.messageParams)&&a.fileInfoList&&Array.isArray(a.fileInfoList)?[4,Promise.all(a.fileInfoList.map((function(c,d){return S(s,void 0,void 0,(function(){var p;return T(this,(function(g){switch(g.label){case 0:return c.file&&GE(c.file)?[4,this.collection.saveBlob(c.file,this._getFileInfoBlobKey(e.reqId,d))]:[3,2];case 1:p=g.sent(),c._uploadedMetaData||(c._uploadedMetaData={}),c._uploadedMetaData.fileKey=p,c._uploadedMetaData.fileType=dp.BLOB,g.label=2;case 2:return[2]}}))}))})))]:[3,7];case 6:l.sent(),l.label=7;case 7:return[2]}}))}))},n})(ei),EE={},lp=(function(t){function n(e){var r=t.call(this,e)||this;return EE[e]=r,r}return U(n,t),Object.defineProperty(n.prototype,"_sdkState",{get:function(){return W.of(this._iid).sdkState},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_cacheContext",{get:function(){return W.of(this._iid).cacheContext},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_unsentMessageCache",{get:function(){return Ep.of(this._iid)},enumerable:!1,configurable:!0}),n.of=function(e,r){return r===void 0&&(r=!1),EE[e]&&!r||(EE[e]=new n(e)),EE[e]},Object.defineProperty(n.prototype,"collection",{get:function(){var e=this._cacheContext.nestdb;return Te(!!e).throw(X.databaseError),e.collection(mS)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"localCacheEnabled",{get:function(){return this._cacheContext.localCacheEnabled&&!!this.collection},enumerable:!1,configurable:!0}),n.prototype._serialize=function(e){return z(z({},e.serialize()),{messageId:"".concat(e.messageId)})},n.prototype._deserialize=function(e){return e=z(z({},e),{messageId:parseInt(e.messageId)}),gi.of(this._iid).buildMessageFromSerializedData(e)},n.prototype.get=function(e){return S(this,void 0,void 0,(function(){var r;return T(this,(function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,this.collection.getByKey("".concat(e))]:[3,2];case 1:if(r=i.sent())return[2,this._deserialize(r)];i.label=2;case 2:return[2,void 0]}}))}))},n.prototype.fetch=function(e){var r=e.channelUrl,i=e.token,a=e.limit,s=a===void 0?100:a,l=e.filter,c=l===void 0?new vh:l,d=e.order,p=d===void 0?Gi.CHANNEL_LATEST:d,g=e.backward,_=g!==void 0&&g,y=e.parentMessageId,C=e.isPollOnly,w=C!==void 0&&C,A=e.exactMatch,M=A!==void 0&&A,I=e.inclusive,D=I===void 0||I;return S(this,void 0,void 0,(function(){var P,H,L,G=this;return T(this,(function(Y){switch(Y.label){case 0:return this.localCacheEnabled?(P=Lu(p),H={where:{channelUrl:r,"/where":function(F){if(i!=null&&i!=="")switch(p){case Gi.CHANNEL_LATEST:if(M&&F.createdAt!==i)return!1;if(_){if(D&&F.createdAt<i||!D&&F.createdAt<=i)return!1}else if(D&&F.createdAt>i||!D&&F.createdAt>=i)return!1;break;case Gi.NEWEST_CHILD_MESSAGE:if(!y||F.parentMessageId===0||F.parentMessageId!==y)return!1}return!(w&&!F._poll)&&c.match(G._deserialize(F))}},index:P,backward:_},[4,this.collection.query(H)]):[3,3];case 1:return[4,Y.sent().fetch({limit:s??void 0})];case 2:return L=Y.sent(),[2,Promise.all(L.map((function(F){return S(G,void 0,void 0,(function(){return T(this,(function(ne){return[2,this._deserialize(F)]}))}))})))];case 3:return[2,[]]}}))}))},n.prototype.getAllChildMessages=function(e,r){return r===void 0&&(r=new vh),S(this,void 0,void 0,(function(){return T(this,(function(i){switch(i.label){case 0:return[4,this.fetch({channelUrl:e.channelUrl,token:Date.now(),limit:null,backward:!1,filter:r,order:Gi.NEWEST_CHILD_MESSAGE,parentMessageId:e.messageId})];case 1:return[2,i.sent()]}}))}))},n.prototype.upsert=function(e){var r;return S(this,void 0,void 0,(function(){var i,a,s,l,c,d,p,g,_=this;return T(this,(function(y){switch(y.label){case 0:return this.localCacheEnabled?[4,this.saveBlobs(e)]:[3,13];case 1:y.sent(),y.label=2;case 2:y.trys.push([2,7,8,9]),i=Re(e),a=i.next(),y.label=3;case 3:return a.done?[3,6]:(s=a.value,!((r=s.threadInfo)===null||r===void 0)&&r._isUpdateRequired?[4,this.get(s.messageId)]:[3,5]);case 4:(l=y.sent())!=null&&l.threadInfo&&s.threadInfo._updateFrom(l.threadInfo),y.label=5;case 5:return a=i.next(),[3,3];case 6:return[3,9];case 7:return c=y.sent(),p={error:c},[3,9];case 8:try{a&&!a.done&&(g=i.return)&&g.call(i)}finally{if(p)throw p.error}return[7];case 9:return d=e.map((function(C){return _._serialize(C)})),[4,this.collection.upsertMany(d)];case 10:return y.sent(),[4,this.upsertChildMessages(e)];case 11:return y.sent(),[4,this._unsentMessageCache.upsertChildMessages(e)];case 12:y.sent(),y.label=13;case 13:return[2]}}))}))},n.prototype.upsertChildMessages=function(e){return S(this,void 0,void 0,(function(){var r=this;return T(this,(function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,Promise.all(e.map((function(a){return S(r,void 0,void 0,(function(){var s,l;return T(this,(function(c){switch(c.label){case 0:return s=[],!((l=a.threadInfo)===null||l===void 0)&&l.replyCount&&a.threadInfo.replyCount>0?[4,this.getAllChildMessages(a)]:[3,2];case 1:s=c.sent(),c.label=2;case 2:return s.length>0?(s.forEach((function(d){return d.applyParentMessage(a)})),[4,this.upsert(s)]):[3,4];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))})))]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}}))}))},n.prototype.remove=function(e){return S(this,void 0,void 0,(function(){var r,i,a,s,l,c;return T(this,(function(d){switch(d.label){case 0:if(!this.localCacheEnabled)return[3,8];d.label=1;case 1:d.trys.push([1,6,7,8]),r=Re(e),i=r.next(),d.label=2;case 2:return i.done?[3,5]:(a=i.value,[4,this.collection.remove("".concat(a))]);case 3:d.sent(),d.label=4;case 4:return i=r.next(),[3,2];case 5:return[3,8];case 6:return s=d.sent(),l={error:s},[3,8];case 7:try{i&&!i.done&&(c=r.return)&&c.call(r)}finally{if(l)throw l.error}return[7];case 8:return[2]}}))}))},n.prototype.removeMessagesOfChannel=function(e){return S(this,void 0,void 0,(function(){var r;return T(this,(function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,this.collection.removeIf({where:{channelUrl:e},index:Lu(Gi.CHANNEL_LATEST)})]:[3,6];case 1:return i.sent(),[4,(r=this._cacheContext.preference).remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/sync"))];case 2:return i.sent(),[4,r.remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/sync.meta"))];case 3:return i.sent(),[4,r.remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/changelogs"))];case 4:return i.sent(),[4,r.remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/changelogs.meta"))];case 5:i.sent(),i.label=6;case 6:return[2]}}))}))},n.prototype.removeUnderOffset=function(e,r,i){return i===void 0&&(i=!1),S(this,void 0,void 0,(function(){return T(this,(function(a){switch(a.label){case 0:return this.localCacheEnabled?[4,this.collection.removeIf({where:{channelUrl:e,createdAt:i?{"<=":r}:{"<":r}},index:Lu(Gi.CHANNEL_LATEST)})]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}}))}))},n.prototype.clear=function(){return S(this,void 0,void 0,(function(){return T(this,(function(e){switch(e.label){case 0:return this.localCacheEnabled?[4,this.collection.clear()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},n.prototype.countBetween=function(e,r,i){return S(this,void 0,void 0,(function(){var a,s=this;return T(this,(function(l){switch(l.label){case 0:return this.localCacheEnabled?(a=Lu(Gi.CHANNEL_LATEST),[4,this.collection.query({where:{channelUrl:e,"/where":function(c){var d=s._deserialize(c);return i.includes(d.createdAt)&&r.match(d)}},index:a}).count()]):[3,2];case 1:return[2,l.sent()];case 2:return[2,0]}}))}))},n.prototype.saveBlobs=function(e){return S(this,void 0,void 0,(function(){var r=this;return T(this,(function(i){switch(i.label){case 0:return[4,Promise.all(e.map((function(a){return S(r,void 0,void 0,(function(){var s,l;return T(this,(function(c){switch(c.label){case 0:return a instanceof Xr&&a.messageParams&&(s=a.messageParams).file&&GE(s.file)?[4,this.collection.saveBlob(s.file,a.reqId)]:[3,2];case 1:l=c.sent(),s.fileKey=l,c.label=2;case 2:return[2]}}))}))})))];case 1:return i.sent(),[2]}}))}))},n.prototype._getGroupChannelPreferenceSize=function(e){return S(this,void 0,void 0,(function(){var r,i,a,s,l,c;return T(this,(function(d){switch(d.label){case 0:return r=0,[4,(i=this._cacheContext.preference).get("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/sync"))];case 1:return a=d.sent(),[4,i.get("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/sync.meta"))];case 2:return s=d.sent(),[4,i.get("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/changelogs"))];case 3:return l=d.sent(),[4,i.get("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/changelogs.meta"))];case 4:return c=d.sent(),a&&(r+=JSON.stringify(a).length),s&&(r+=JSON.stringify(s).length),l&&(r+=JSON.stringify(l).length),c&&(r+=JSON.stringify(c).length),[2,r]}}))}))},n})(ei),CE={},pB=(function(t){function n(e){var r=t.call(this,e)||this;return CE[e]=r,r}return U(n,t),Object.defineProperty(n.prototype,"_sdkState",{get:function(){return W.of(this._iid).sdkState},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_cacheContext",{get:function(){return W.of(this._iid).cacheContext},enumerable:!1,configurable:!0}),n.of=function(e,r){return r===void 0&&(r=!1),CE[e]&&!r||(CE[e]=new n(e)),CE[e]},Object.defineProperty(n.prototype,"collection",{get:function(){var e=this._cacheContext.nestdb;return Te(!!e).throw(X.databaseError),e.collection(tx)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"localCacheEnabled",{get:function(){return this._cacheContext.localCacheEnabled&&!!this.collection},enumerable:!1,configurable:!0}),n.prototype._serialize=function(e){return z({},e.serialize())},n.prototype._deserialize=function(e){return gi.of(this._iid).buildMessageFromSerializedData(e)},n.prototype.get=function(e){return S(this,void 0,void 0,(function(){var r;return T(this,(function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,this.collection.getByKey(e)]:[3,2];case 1:if(r=i.sent())return[2,this._deserialize(r)];i.label=2;case 2:return[2,void 0]}}))}))},n.prototype.fetch=function(e){var r=e.channelUrl,i=e.token,a=e.limit,s=a===void 0?100:a,l=e.filter,c=l===void 0?new vh:l,d=e.backward,p=d!==void 0&&d,g=e.exactMatch,_=g!==void 0&&g,y=e.inclusive,C=y===void 0||y;return S(this,void 0,void 0,(function(){var w,A=this;return T(this,(function(M){switch(M.label){case 0:return this.localCacheEnabled?(w={where:{channelUrl:r,"/where":function(I){if(i){if(_&&I.createdAt!==i)return!1;if(p){if(C&&I.createdAt<i||!C&&I.createdAt<=i)return!1}else if(C&&I.createdAt>i||!C&&I.createdAt>=i)return!1}return c.match(A._deserialize(I))}},index:["channelUrl","-createdAt","-notificationId"],backward:p},[4,this.collection.query(w)]):[3,3];case 1:return[4,M.sent().fetch({limit:s??void 0})];case 2:return[2,M.sent().map((function(I){return A._deserialize(I)}))];case 3:return[2,[]]}}))}))},n.prototype.upsert=function(e){return S(this,void 0,void 0,(function(){var r,i=this;return T(this,(function(a){switch(a.label){case 0:return this.localCacheEnabled?(r=e.map((function(s){return i._serialize(s)})),[4,this.collection.upsertMany(r)]):[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}}))}))},n.prototype.remove=function(e){return S(this,void 0,void 0,(function(){var r,i,a,s,l,c;return T(this,(function(d){switch(d.label){case 0:if(!this.localCacheEnabled)return[3,8];d.label=1;case 1:d.trys.push([1,6,7,8]),r=Re(e),i=r.next(),d.label=2;case 2:return i.done?[3,5]:(a=i.value,[4,this.collection.remove(a)]);case 3:d.sent(),d.label=4;case 4:return i=r.next(),[3,2];case 5:return[3,8];case 6:return s=d.sent(),l={error:s},[3,8];case 7:try{i&&!i.done&&(c=r.return)&&c.call(r)}finally{if(l)throw l.error}return[7];case 8:return[2]}}))}))},n.prototype.markAsReadByTimestamp=function(e,r){return S(this,void 0,void 0,(function(){return T(this,(function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,this.collection.updateIf({where:{channelUrl:e,messageStatus:sp.SENT,createdAt:{"<":r}}},{set:{messageStatus:sp.READ}})]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}}))}))},n.prototype.markAsReadByMessageIds=function(e,r){return S(this,void 0,void 0,(function(){return T(this,(function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,this.collection.updateIf({where:{channelUrl:e,notificationId:{"/in":r},messageStatus:sp.SENT}},{set:{messageStatus:sp.READ}})]:[3,2];case 1:return[2,i.sent().length];case 2:return[2,0]}}))}))},n.prototype.removeMessagesOfChannel=function(e){return S(this,void 0,void 0,(function(){var r;return T(this,(function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,this.collection.removeIf({where:{channelUrl:e},index:["channelUrl","-createdAt","-notificationId"]})]:[3,6];case 1:return i.sent(),[4,(r=this._cacheContext.preference).remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/sync"))];case 2:return i.sent(),[4,r.remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/sync.meta"))];case 3:return i.sent(),[4,r.remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/changelogs"))];case 4:return i.sent(),[4,r.remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(e,"/message/changelogs.meta"))];case 5:i.sent(),i.label=6;case 6:return[2]}}))}))},n.prototype.removeUnderOffset=function(e,r){return S(this,void 0,void 0,(function(){return T(this,(function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,this.collection.removeIf({where:{channelUrl:e,createdAt:{"<":r}},index:Lu(Gi.CHANNEL_LATEST)})]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}}))}))},n.prototype.clear=function(){return S(this,void 0,void 0,(function(){return T(this,(function(e){switch(e.label){case 0:return this.localCacheEnabled?[4,this.collection.clear()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},n.prototype.countBetween=function(e,r,i){return S(this,void 0,void 0,(function(){var a,s=this;return T(this,(function(l){switch(l.label){case 0:return this.localCacheEnabled?(a=["channelUrl","-createdAt","-notificationId"],[4,this.collection.query({where:{channelUrl:e,"/where":function(c){var d=s._deserialize(c);return i.includes(d.createdAt)&&r.match(d)}},index:a}).count()]):[3,2];case 1:return[2,l.sent()];case 2:return[2,0]}}))}))},n})(ei),A_={},ax=(function(t){function n(e){var r=t.call(this,e)||this;return r._observers=new Map,r._dispatcherContext=r._dispatcher.on((function(i){return S(r,void 0,void 0,(function(){var a,s,l,c,d,p,g,_,y,C,w,A,M,I,D,P,H,L,G,Y,F,ne=this;return T(this,(function(J){switch(J.label){case 0:return i instanceof lr?(a=i.messages,F=i.source,p=i.isWebSocketEventComing,s=a.filter((function(re){return re instanceof ba&&re.channelType!==Rt.OPEN&&re.messageId>0})),l=a.filter((function(re){return re instanceof ba&&re.channelType!==Rt.OPEN&&re.messageId===0})),c=a.filter((function(re){return re instanceof yp})),s.length>0?[4,gr((function(){return S(ne,void 0,void 0,(function(){return T(this,(function(re){switch(re.label){case 0:return[4,this._messageCache.upsert(s)];case 1:return re.sent(),[4,this._unsentMessageCache.remove(s.map((function(Oe){return Oe instanceof Rr?Oe.reqId:null})).filter((function(Oe){return Oe!==null})))];case 2:return re.sent(),[2]}}))}))}))]:[3,2]):[3,7];case 1:J.sent(),p||this._broadcastUpdateEvent(s,F),J.label=2;case 2:return l.length>0?[4,gr((function(){return S(ne,void 0,void 0,(function(){return T(this,(function(re){switch(re.label){case 0:return[4,this._unsentMessageCache.upsert(l)];case 1:return re.sent(),[2]}}))}))}))]:[3,4];case 3:J.sent(),p||this._broadcastUpdateEvent(l,F),J.label=4;case 4:return c.length>0?[4,gr((function(){return S(ne,void 0,void 0,(function(){return T(this,(function(re){switch(re.label){case 0:return[4,this._notificationCache.upsert(c)];case 1:return re.sent(),[2]}}))}))}))]:[3,6];case 5:J.sent(),p||this._broadcastUpdateEvent(c,F),J.label=6;case 6:return[3,24];case 7:return i instanceof aS?(d=i.messageIds,F=i.source,p=i.isWebSocketEventComing,g=d.filter((function(re){return typeof re=="number"})),_=d.filter((function(re){return typeof re=="string"})),[4,gr((function(){return S(ne,void 0,void 0,(function(){return T(this,(function(re){switch(re.label){case 0:return g.length>0?[4,this._messageCache.remove(g)]:[3,2];case 1:re.sent(),re.label=2;case 2:return _.length>0?[4,this._notificationCache.remove(_)]:[3,4];case 3:re.sent(),re.label=4;case 4:return[2]}}))}))}))]):[3,9];case 8:return J.sent(),p||this._broadcastRemoveEvent(d,F),[3,24];case 9:return i instanceof wD?(y=i.reqId,F=i.source,[4,gr((function(){return S(ne,void 0,void 0,(function(){return T(this,(function(re){switch(re.label){case 0:return[4,this._unsentMessageCache.remove([y])];case 1:return re.sent(),[2]}}))}))}))]):[3,11];case 10:return J.sent(),this._broadcastRemoveUnsentEvent(y,F),[3,24];case 11:return i instanceof ND?(C=i.polls,F=i.source,this._cacheContext.localCacheEnabled?(w=C.map((function(re){return re.messageId})),[4,Promise.all(w.map((function(re){return ne._messageCache.get(re)})))]):[3,14]):[3,15];case 12:return(A=J.sent().filter((function(re){return re}))).length>0&&C.forEach((function(re){var Oe=A.find((function(Z){return Z.messageId===re.messageId}));Oe&&Oe.applyPoll(re)})),[4,gr((function(){return S(ne,void 0,void 0,(function(){return T(this,(function(re){switch(re.label){case 0:return[4,this._messageCache.upsert(A)];case 1:return[2,re.sent()]}}))}))}))];case 13:J.sent(),J.label=14;case 14:return this._broadcastPollChangeLogEvent(C,F),[3,24];case 15:return i instanceof sS?(M=i.event,F=i.source,[4,this._messageCache.get(M.messageId)]):[3,19];case 16:return(I=J.sent())&&I.isUserMessage()&&I.poll&&I.poll.applyPollUpdateEvent(M)?[4,gr((function(){return S(ne,void 0,void 0,(function(){return T(this,(function(re){switch(re.label){case 0:return[4,this._messageCache.upsert([I])];case 1:return[2,re.sent()]}}))}))}))]:[3,18];case 17:J.sent(),J.label=18;case 18:return this._broadcastPollUpdateEvent(M,F),[3,24];case 19:return i instanceof e2?(D=i.event,F=i.source,[4,this._messageCache.get(D.messageId)]):[3,23];case 20:return(P=J.sent())&&P.isUserMessage()&&P.poll&&P.poll.applyPollVoteEvent(D)?[4,gr((function(){return S(ne,void 0,void 0,(function(){return T(this,(function(re){switch(re.label){case 0:return[4,this._messageCache.upsert([P])];case 1:return[2,re.sent()]}}))}))}))]:[3,22];case 21:J.sent(),J.label=22;case 22:return this._broadcastPollVoteEvent(D,F),[3,24];case 23:i instanceof ED?(H=i.event,F=i.source,H.messageId>0&&this._broadcastReactionUpdateEvent(H,F)):i instanceof CD?(L=i.event,F=i.source,this._broadcastThreadUpdateEvent(L,F)):i instanceof bD&&(G=i.messageDeletionTimestamp,Y=i.channelUrl,F=i.source,this._broadcastMessageRetentionEvent(G,Y,F)),J.label=24;case 24:return[2]}}))}))})),r}return U(n,t),Object.defineProperty(n.prototype,"_cacheContext",{get:function(){return W.of(this._iid).cacheContext},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_dispatcher",{get:function(){return W.of(this._iid).dispatcher},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_messageCache",{get:function(){return lp.of(this._iid)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_unsentMessageCache",{get:function(){return Ep.of(this._iid)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_notificationCache",{get:function(){return pB.of(this._iid)},enumerable:!1,configurable:!0}),n.of=function(e,r){var i;return r===void 0&&(r=!1),A_[e]&&!r||(A_[e]&&((i=A_[e]._dispatcherContext)===null||i===void 0||i.close()),A_[e]=new n(e)),A_[e]},n.prototype._broadcastUpdateEvent=function(e,r){var i,a;try{for(var s=Re(this._observers.values()),l=s.next();!l.done;l=s.next()){var c=l.value;c.onUpdate&&c.onUpdate(e,r)}}catch(d){i={error:d}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}},n.prototype._broadcastPollChangeLogEvent=function(e,r){var i,a;try{for(var s=Re(this._observers.values()),l=s.next();!l.done;l=s.next()){var c=l.value;c.onPollChangeLogUpdate&&c.onPollChangeLogUpdate(e,r)}}catch(d){i={error:d}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}},n.prototype._broadcastPollUpdateEvent=function(e,r){var i,a;try{for(var s=Re(this._observers.values()),l=s.next();!l.done;l=s.next()){var c=l.value;c.onPollUpdate&&c.onPollUpdate(e,r)}}catch(d){i={error:d}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}},n.prototype._broadcastPollVoteEvent=function(e,r){var i,a;try{for(var s=Re(this._observers.values()),l=s.next();!l.done;l=s.next()){var c=l.value;c.onPollVote&&c.onPollVote(e,r)}}catch(d){i={error:d}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}},n.prototype._broadcastRemoveEvent=function(e,r){var i,a;try{for(var s=Re(this._observers.values()),l=s.next();!l.done;l=s.next()){var c=l.value;c.onRemove&&c.onRemove(e,r)}}catch(d){i={error:d}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}},n.prototype._broadcastRemoveUnsentEvent=function(e,r){var i,a;try{for(var s=Re(this._observers.values()),l=s.next();!l.done;l=s.next()){var c=l.value;c.onRemoveUnsent&&c.onRemoveUnsent(e,r)}}catch(d){i={error:d}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}},n.prototype._broadcastReactionUpdateEvent=function(e,r){var i,a;try{for(var s=Re(this._observers.values()),l=s.next();!l.done;l=s.next()){var c=l.value;c.onReactionUpdate&&c.onReactionUpdate(e,r)}}catch(d){i={error:d}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}},n.prototype._broadcastThreadUpdateEvent=function(e,r){var i,a;try{for(var s=Re(this._observers.values()),l=s.next();!l.done;l=s.next()){var c=l.value;c.onThreadInfoUpdate&&c.onThreadInfoUpdate(e,r)}}catch(d){i={error:d}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}},n.prototype._broadcastMessageRetentionEvent=function(e,r,i){var a,s;try{for(var l=Re(this._observers.values()),c=l.next();!c.done;c=l.next()){var d=c.value;d.onDeletedByRetentionPolicy&&d.onDeletedByRetentionPolicy(e,r,i)}}catch(p){a={error:p}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}},n.prototype.subscribe=function(e,r){this._observers.set(e,r)},n.prototype.unsubscribe=function(e){this._observers.delete(e)},n.prototype.unsubscribeAll=function(){this._observers.clear()},n})(ei),OM={},wN=(function(t){function n(e,r){var i=r.sdkState,a=r.cacheContext,s=t.call(this,e)||this;return s._users=new Map,s._sdkState=i,s._cacheContext=a,OM[e]=s,s}return U(n,t),n.of=function(e){return OM[e]},Object.defineProperty(n.prototype,"collection",{get:function(){var e=this._cacheContext.nestdb;return Te(!!e).throw(X.databaseError),e.collection(nx)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"localCacheEnabled",{get:function(){return this._cacheContext.localCacheEnabled&&!!this.collection},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"users",{get:function(){return Je([],Ye(this._users.values()),!1)},enumerable:!1,configurable:!0}),n.prototype._serialize=function(e,r){return z(z({},e.serialize()),{updatedAt:r})},n.prototype._deserialize=function(e){return St._buildUserFromSerializedData(e)},n.prototype.isCachedInMemory=function(e){return this._users.has(e)},n.prototype.getUserInfoFromCache=function(e){if(this._users.has(e))return this._users.get(e)},n.prototype.get=function(e){return S(this,void 0,void 0,(function(){var r,i;return T(this,(function(a){switch(a.label){case 0:return this._users.has(e)?[3,3]:this.localCacheEnabled?[4,this.collection.getByKey(e)]:[3,2];case 1:if(r=a.sent())return i=this._deserialize(r),this._users.set(i.userId,i),[2,i];a.label=2;case 2:return[2,void 0];case 3:return[2,this._users.get(e)]}}))}))},n.prototype.fetch=function(e){var r=e.limit,i=r===void 0?100:r,a=e.backward,s=a!==void 0&&a;return S(this,void 0,void 0,(function(){var l,c,d,p=this;return T(this,(function(g){switch(g.label){case 0:if(!this.localCacheEnabled)return[2,[]];g.label=1;case 1:return g.trys.push([1,4,,5]),l={index:["-userId","-updatedAt"],backward:s},[4,this.collection.query(l)];case 2:return[4,g.sent().fetch({limit:i})];case 3:return c=g.sent(),(d=c.map((function(_){return p._deserialize(_)}))).forEach((function(_){p._users.has(_.userId)||p._users.set(_.userId,_)})),[2,d];case 4:return g.sent(),[2,[]];case 5:return[2]}}))}))},n.prototype.upsert=function(e,r){return S(this,void 0,void 0,(function(){var i,a;return T(this,(function(s){switch(s.label){case 0:if(!this.localCacheEnabled)return[3,2];if(i=this._serialize(e,r),a=this._users.get(e.userId)){if(a._hashValue===e._hashValue)return[2];if(a._updatedAt>r)return[2]}return this._users.set(e.userId,St._buildUserFromSerializedData(i)),[4,this.collection.upsertOne(i)];case 1:s.sent(),s.label=2;case 2:return[2]}}))}))},n.prototype.remove=function(e){return S(this,void 0,void 0,(function(){return T(this,(function(r){switch(r.label){case 0:return this._users.has(e)&&this._users.delete(e),this.localCacheEnabled?[4,this.collection.remove(e)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},n.prototype.clearMemoryCache=function(){this._users.clear()},n.prototype.clear=function(){return S(this,void 0,void 0,(function(){return T(this,(function(e){switch(e.label){case 0:return this.clearMemoryCache(),this.localCacheEnabled?[4,this.collection.clear()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},n})(ei),mB=(function(t){function n(e){var r=this,i=e.reverse,a=i!==void 0&&i,s=e.limit,l=s===void 0?20:s,c=e.keys,d=e.token;return(r=t.call(this)||this).method=ye.GET,r.path="".concat(UR),r.params=Le({token:d,limit:l,reverse:a,order:aN.UPDATED_AT,show_ui_template:!0,show_color_variables:!0,keys:c}),r}return U(n,t),n})(Ee),gB=(function(t){function n(e,r){var i=t.call(this,e,r)||this,a=r.next,s=r.has_more,l=s!==void 0&&s,c=r.templates;return i.nextToken=a,i.hasMore=l,i.templates=c.map((function(d){return{template:JSON.stringify(d)}})),i}return U(n,t),n})(Se),vB=(function(t){function n(e){var r=this,i=e.key;return(r=t.call(this)||this).method=ye.GET,r.path="".concat(UR,"/").concat(i),r}return U(n,t),n})(Ee),_B=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.template=JSON.stringify(r),i}return U(n,t),n})(Se),kM={},gi=(function(){function t(n,e){var r=e.sdkState,i=e.dispatcher,a=e.requestQueue,s=e.onlineDetector,l=e.cacheContext;this._iid=n,this._sdkState=r,this._requestQueue=a,this._dispatcher=i,this._cacheContext=l,lp.of(n),Ep.of(n),ax.of(n),this.fileMessageQueue=new fG(n,{sdkState:r,dispatcher:i,requestQueue:a,onlineDetector:s,cacheContext:l}),kM[n]=this}return t.of=function(n){return kM[n]},t.prototype._setSenderInfo=function(n){if(this._cacheContext.localCacheEnabled&&(n.messageType===Hn.USER||n.messageType===Hn.FILE)){var e=n.sender;if(e){var r=wN.of(this._iid),i=r.getUserInfoFromCache(e.userId);if(i){var a=z(z({},n.sender),{nickname:i.nickname,profileUrl:i.plainProfileUrl,requireAuth:i.requireAuth,metadata:i.metaData});n.sender=a}else r.upsert(new St(this._iid,St.payloadify(e)),n.createdAt)}}},t.prototype.buildMessageFromSerializedData=function(n){var e=Uc(n);if(e.notificationId)return new yp(this._iid,yp.payloadify(e));switch(this._setSenderInfo(e),e.messageType){case Hn.USER:return new Ji(this._iid,Ji.payloadify(e));case Hn.FILE:return wo._isMultipleFilesMessageSerializedData(e)?new wo(this._iid,wo.payloadify(e)):new Xr(this._iid,Xr.payloadify(e));case Hn.ADMIN:return new _p(this._iid,_p.payloadify(e))}throw X.invalidParameters},t.prototype.buildUserMessageCreateParamsFromSerializedData=function(n,e){return Le(Qe({data:e.data,customType:e.customType,mentionType:e.mentionType,mentionedUserIds:e.mentionedUserIds,mentionedUsers:e.mentionedUsers,mentionedMessageTemplate:e.mentionedMessageTemplate,metaArrays:e.metaArrays,parentMessageId:e.parentMessageId,isReplyToChannel:n.isReplyToChannel,pushNotificationDeliveryOption:n.pushNotificationDeliveryOption,appleCriticalAlertOptions:e.appleCriticalAlertOptions,reqId:e.reqId,message:e.message,translationTargetLanguages:Object.keys(e.translations),pollId:n.pollId}))},t.prototype.buildFileMessageCreateParamsFromSerializedData=function(n,e){var r;return Le(Qe({data:e.data,customType:e.customType,mentionType:e.mentionType,mentionedUserIds:e.mentionedUserIds,mentionedUsers:e.mentionedUsers,metaArrays:e.metaArrays,parentMessageId:e.parentMessageId,isReplyToChannel:n.isReplyToChannel,pushNotificationDeliveryOption:n.pushNotificationDeliveryOption,appleCriticalAlertOptions:e.appleCriticalAlertOptions,reqId:e.reqId,file:n.file,fileKey:n.fileKey,fileUrl:e.plainUrl,fileName:e.name,fileSize:e.size,mimeType:e.type,thumbnailSizes:(r=e.thumbnails)===null||r===void 0?void 0:r.map((function(i){return{maxWidth:i.width,maxHeight:i.height}})),fileType:n.fileType,requireAuth:e.requireAuth}))},t.prototype.buildMultipleFilesMessageCreateParamsFromSerializedData=function(n,e){var r=this;return Le({data:e.data,customType:e.customType,mentionType:e.mentionType,mentionedUserIds:e.mentionedUserIds,mentionedUsers:e.mentionedUsers,metaArrays:e.metaArrays,parentMessageId:e.parentMessageId,isReplyToChannel:n.isReplyToChannel,pushNotificationDeliveryOption:n.pushNotificationDeliveryOption,appleCriticalAlertOptions:e.appleCriticalAlertOptions,reqId:e.reqId,fileInfoList:n.fileInfoList.map((function(i){return new k0(r._iid,i)}))})},t.prototype.buildScheduledUserMessageCreateParamsFromSerializedData=function(n,e){return z(z({},this.buildUserMessageCreateParamsFromSerializedData(n,e)),{scheduledAt:n.scheduledAt})},t.prototype.buildScheduledFileMessageCreateParamsFromSerializedData=function(n,e){return z(z({},this.buildFileMessageCreateParamsFromSerializedData(n,e)),{scheduledAt:n.scheduledAt})},t.prototype.buildSenderFromSerializedData=function(n){var e=Uc(n);return new Cg(this._iid,Cg.payloadify(e))},t.prototype.getMessage=function(n){return S(this,void 0,void 0,(function(){var e,r;return T(this,(function(i){switch(i.label){case 0:return e=new pG(n),[4,this._requestQueue.send(e)];case 1:return r=i.sent(),[2,r.as(mG).message]}}))}))},t.prototype.getScheduledMessage=function(n){return S(this,void 0,void 0,(function(){var e,r;return T(this,(function(i){switch(i.label){case 0:return e=new _G(n),[4,this._requestQueue.send(e)];case 1:return r=i.sent(),[2,r.as(yG).message]}}))}))},t.prototype.getMessagesByMessageId=function(n,e,r,i,a){return a===void 0&&(a=ge.REQUEST_MESSAGE),S(this,void 0,void 0,(function(){var s,l,c;return T(this,(function(d){switch(d.label){case 0:return s=new pE(z(z(z({channelType:e,channelUrl:n,token:String(r)},l0),i),{sdkSource:Ko.EXTERNAL_LEGACY})),[4,this._requestQueue.send(s)];case 1:return l=d.sent(),c=l.as(mE).messages,this._dispatcher.dispatch(new lr({messages:c,source:a})),[2,c]}}))}))},t.prototype.getMessagesByTimestamp=function(n,e,r,i,a){return a===void 0&&(a=ge.REQUEST_MESSAGE),S(this,void 0,void 0,(function(){var s,l,c;return T(this,(function(d){switch(d.label){case 0:return s=new pE(z(z(z({channelType:e,channelUrl:n,timestamp:r},l0),i),{sdkSource:Ko.EXTERNAL_LEGACY})),[4,this._requestQueue.send(s)];case 1:return l=d.sent(),c=l.as(mE).messages,this._dispatcher.dispatch(new lr({messages:c,source:a})),[2,c]}}))}))},t.prototype._getMessagesByTimestampForCollection=function(n,e,r,i,a,s,l,c){return a===void 0&&(a=ge.REQUEST_MESSAGE),S(this,void 0,void 0,(function(){var d,p,g,_,y,C;return T(this,(function(w){switch(w.label){case 0:return d=new pE(z(z(z({channelType:e,channelUrl:n,timestamp:r},l0),i),{checkingHasNext:s,checkingContinuousMessages:l,sdkSource:c})),[4,this._requestQueue.send(d)];case 1:return p=w.sent(),g=p.as(mE),_=g.messages,y=g.isContinuousMessages,C=g.hasNext,this._dispatcher.dispatch(new lr({messages:_,source:a})),[2,{messages:_,isContinuousMessages:y,hasNext:C}]}}))}))},t.prototype.getThreadedMessagesByTimestamp=function(n,e,r,i){return i===void 0&&(i=ge.REQUEST_THREADED_MESSAGE),S(this,void 0,void 0,(function(){var a,s,l,c;return T(this,(function(d){switch(d.label){case 0:return a=new pE(z(z(z({channelUrl:n.channelUrl,channelType:n.channelType,timestamp:e},K0),r),{replyType:ta.ALL,parentMessageId:n.messageId,includeThreadInfo:!0})),[4,this._requestQueue.send(a)];case 1:return s=d.sent(),l=s.as(mE).messages,(c=l.slice(1)).forEach((function(p){p.parentMessage=n})),this._dispatcher.dispatch(new lr({messages:c,source:i})),[2,{parentMessage:l[0],threadedMessages:c}]}}))}))},t.prototype.getMessageTemplatesByToken=function(n,e){return e===void 0&&(e={}),S(this,void 0,void 0,(function(){var r,i,a,s,l,c;return T(this,(function(d){switch(d.label){case 0:return r=new mB(z({token:n},e)),[4,this._requestQueue.send(r)];case 1:return i=d.sent(),a=i.as(gB),s=a.hasMore,l=a.nextToken,c=a.templates,[2,{hasMore:s,token:l,templates:c}]}}))}))},t.prototype.getMessageTemplate=function(n){return S(this,void 0,void 0,(function(){var e,r;return T(this,(function(i){switch(i.label){case 0:return e=new vB({key:n}),[4,this._requestQueue.send(e)];case 1:return r=i.sent(),[2,{template:r.as(_B).template}]}}))}))},t.prototype.getMessageChangelogs=function(n,e,r,i,a){return a===void 0&&(a=ge.REQUEST_MESSAGE_CHANGELOGS),S(this,void 0,void 0,(function(){var s,l,c,d,p,g,_,y,C;return T(this,(function(w){switch(w.label){case 0:return s=new gG(Le(Qe(z(z({channelType:e,channelUrl:n,timestamp:typeof r=="number"?r:null,token:typeof r=="string"?r:null},vN),i)))),[4,this._requestQueue.send(s)];case 1:return l=w.sent(),c=l.as(vG),d=c.updatedMessages,p=c.deletedMessagesInfo,g=c.hasMore,_=c.nextToken,y=c.forceUseNextToken,C=p.map((function(A){return A.messageId})),d.length>0&&this._dispatcher.dispatch(new lr({messages:d,source:a})),C.length>0&&this._dispatcher.dispatch(new aS({messageIds:C,source:a})),[2,{updatedMessages:d,deletedMessageIds:C,hasMore:g,token:_,forceUseNextToken:y}]}}))}))},t})(),sx=(function(t){function n(e,r){var i=t.call(this,e)||this;i.targetMessageId=0;var a=r.thread_info,s=r.parent_message_id,l=r.channel_url,c=r.channel_type;return a&&Q("object",a)&&Q("number",s)&&Q("string",l)&&Q("string",c)&&(i.threadInfo=new v1(e,a),i.targetMessageId=s,i.channelUrl=l,i.channelType=c),i}return U(n,t),n})(ei),yB={channelUrl:"",channelType:Rt.BASE,messageId:0,includeReactions:!1,includeMetaArray:!1,includeParentMessageInfo:!1,includeThreadInfo:!1},bB=(function(t){function n(e){var r=e.channelCustomType,i=e.keyword,a=e.limit,s=e.reverse,l=e.exactMatch,c=e.channelUrl,d=e.order,p=e.messageTimestampFrom,g=e.messageTimestampTo,_=e.advancedQuery,y=e.targetFields,C=e.nextToken,w=t.call(this)||this;return w.method=ye.GET,w.path="".concat(q9,"/messages"),w.params=Le({custom_type:r,query:i,limit:a,reverse:s,exact_match:l,channel_url:c,message_ts_from:p,message_ts_to:g,sort_field:d,advanced_query:_,target_fields:y,after:C}),w}return U(n,t),n})(Ee),EB=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.messages=r.results.map((function(a){return ia(e,a)})),i.hasNext=r.has_next,i.nextToken=r.end_cursor,i.totalCount=r.total_count,i}return U(n,t),n})(Se);(function(t){t.SCORE="score",t.TIMESTAMP="ts"})(d0||(d0={}));var CB=(function(t){function n(e,r){var i,a,s,l,c,d,p,g,_,y=this;return(y=t.call(this,e,r)||this).keyword="",y.reverse=!1,y.exactMatch=!1,y.channelUrl=null,y.channelCustomType=null,y.messageTimestampFrom=null,y.messageTimestampTo=null,y.order=d0.SCORE,y.advancedQuery=!1,y.targetFields=null,y._nextToken="",y.totalCount=-1,y.keyword=r.keyword,y.reverse=(i=r.reverse)!==null&&i!==void 0&&i,y.exactMatch=(a=r.exactMatch)!==null&&a!==void 0&&a,y.channelUrl=(s=r.channelUrl)!==null&&s!==void 0?s:null,y.channelCustomType=(l=r.channelCustomType)!==null&&l!==void 0?l:null,y.messageTimestampFrom=(c=r.messageTimestampFrom)!==null&&c!==void 0?c:null,y.messageTimestampTo=(d=r.messageTimestampTo)!==null&&d!==void 0?d:null,y.order=(p=r.order)!==null&&p!==void 0?p:d0.SCORE,y.advancedQuery=(g=r.advancedQuery)!==null&&g!==void 0&&g,y.targetFields=(_=r.targetFields)!==null&&_!==void 0?_:null,y}return U(n,t),n.prototype._validate=function(){return t.prototype._validate.call(this)&&Q("string",this.keyword)&&this.keyword.length>0&&Q("boolean",this.reverse)&&Q("boolean",this.exactMatch)&&Q("string",this.channelUrl,!0)&&Q("string",this.channelCustomType,!0)&&Q("number",this.messageTimestampFrom,!0)&&Q("number",this.messageTimestampTo,!0)&&Nt(d0,this.order)&&Q("boolean",this.advancedQuery)&&Tt("string",this.targetFields,!0)},n.prototype.next=function(){return S(this,void 0,void 0,(function(){var e,r,i,a,s,l,c,d;return T(this,(function(p){switch(p.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=W.of(this._iid).requestQueue,r=new bB(Qe(z(z({},this),{nextToken:this._nextToken?this._nextToken:null}))),[4,e.send(r)]):[3,2]:[3,5];case 1:return i=p.sent(),a=i.as(EB),s=a.messages,l=a.hasNext,c=a.nextToken,d=a.totalCount,this._nextToken=c,this._hasNext=l,this._isLoading=!1,this.totalCount=d,[2,s];case 2:return[2,[]];case 3:throw X.queryInProgress;case 4:return[3,6];case 5:throw X.invalidParameters;case 6:return[2]}}))}))},n})(Yc),wB=(function(t){function n(e){var r=e.channelType,i=e.channelUrl,a=e.limit,s=e.token,l=t.call(this)||this;return l.method=ye.GET,l.path="".concat(Xt(r),"/").concat(encodeURIComponent(i),"/messages/parent_thread_message"),l.params=Le(Qe({limit:a,token:s})),l}return U(n,t),n})(Ee),NB=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.token=r.next,i.messages=r.messages.map((function(a){return ia(e,a)})),i}return U(n,t),n})(Se),TB=(function(t){function n(e,r,i,a){var s=t.call(this,e,r,i,a)||this;return s._edge="",s}return U(n,t),n.prototype._validate=function(){return t.prototype._validate.call(this)},n.prototype.load=function(){return S(this,void 0,void 0,(function(){var e,r,i,a,s,l;return T(this,(function(c){switch(c.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=W.of(this._iid).requestQueue,r=new wB({channelType:this.channelType,channelUrl:this.channelUrl,token:this._edge,limit:this.limit}),[4,e.send(r)]):[3,2]:[3,5];case 1:return i=c.sent(),a=i.as(NB),s=a.messages,l=a.token,this._edge=l,this._hasNext=!!l,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw X.queryInProgress;case 4:return[3,6];case 5:throw X.invalidParameters;case 6:return[2]}}))}))},n})(Wu),SB={channelUrl:"",scheduledMessageId:0},AB={reverse:!1,limit:20},IB=(function(t){function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.name="message",e}return U(n,t),n.prototype.init=function(e,r){var i=r.sdkState,a=r.dispatcher,s=r.sessionManager,l=r.requestQueue,c=r.logger,d=r.onlineDetector,p=r.cacheContext;t.prototype.init.call(this,e,{sdkState:i,dispatcher:a,sessionManager:s,requestQueue:l,logger:c,onlineDetector:d,cacheContext:p}),this._manager=new gi(e,{sdkState:i,dispatcher:a,requestQueue:l,onlineDetector:d,cacheContext:p})},n.prototype.buildMessageFromSerializedData=function(e){return this._manager.buildMessageFromSerializedData(e)},n.prototype.buildSenderFromSerializedData=function(e){return this._manager.buildSenderFromSerializedData(e)},n.prototype.getMessage=function(e){return S(this,void 0,void 0,(function(){var r,i;return T(this,(function(a){switch(a.label){case 0:return r=z(z({},yB),e),Te((function(s){return Q("string",s.channelUrl)&&Nt(Rt,s.channelType)&&Q("number",s.messageId)&&Q("boolean",s.includeReactions,!0)&&Q("boolean",s.includeMetaArray,!0)&&Q("boolean",s.includeParentMessageInfo,!0)&&Q("boolean",s.includeThreadInfo,!0)})(r)).throw(X.invalidParameters),[4,this._manager.getMessage(r)];case 1:if((i=a.sent())instanceof ba||i instanceof yp||i===null)return[2,i];throw"Unknown message type is given."}}))}))},n.prototype.getScheduledMessage=function(e){return S(this,void 0,void 0,(function(){var r;return T(this,(function(i){return r=z(z({},SB),e),Te((function(a){return Q("string",a.channelUrl)&&a.channelUrl!==""&&Q("number",a.scheduledMessageId)&&a.scheduledMessageId>0})(r)).throw(X.invalidParameters),[2,this._manager.getScheduledMessage(r)]}))}))},n.prototype.getMessageTemplatesByToken=function(e,r){return r===void 0&&(r={}),S(this,void 0,void 0,(function(){var i;return T(this,(function(a){return i=z(z({},AB),r),Te(Q("string",e,!0)&&(function(s){return Q("boolean",s.reverse,!0)&&Q("number",s.limit,!0)&&Tt("string",s.keys,!0)})(i)).throw(X.invalidParameters),[2,this._manager.getMessageTemplatesByToken(e,i)]}))}))},n.prototype.getMessageTemplate=function(e){return S(this,void 0,void 0,(function(){return T(this,(function(r){return Te(Q("string",e)).throw(X.invalidParameters),[2,this._manager.getMessageTemplate(e)]}))}))},n})(J1),Tr,h0,NN;(function(t){t.LATEST_LAST_MESSAGE="latest_last_message",t.CHRONOLOGICAL="chronological",t.CHANNEL_NAME_ALPHABETICAL="channel_name_alphabetical",t.METADATA_VALUE_ALPHABETICAL="metadata_value_alphabetical"})(Tr||(Tr={})),(function(t){t.CHRONOLOGICAL="chronological",t.CHANNEL_NAME_ALPHABETICAL="channel_name_alphabetical",t.METADATA_VALUE_ALPHABETICAL="metadata_value_alphabetical"})(h0||(h0={})),(function(t){t.CREATED_AT="created_at",t.SCHEDULED_AT="scheduled_at"})(NN||(NN={}));var R0,zE=function(t){switch(t){case Tr.LATEST_LAST_MESSAGE:return["-lastMessageUpdatedAt","-createdAt","syncIndex"];case Tr.CHRONOLOGICAL:return["-createdAt","syncIndex"];case Tr.CHANNEL_NAME_ALPHABETICAL:return["name"];default:return["-lastMessageUpdatedAt","-createdAt","syncIndex"]}},ox=(function(t){function n(e){var r=e.message,i=t.call(this)||this;return i.message=r,i}return U(n,t),n})(kn),RM={},z_=(function(){function t(n,e){var r=e.localCacheEnabled,i=e.enableAutoResend,a=e.dispatcher,s=e.sdkState,l=e.logger,c=this;this._iid=n,RM[n]=this,this._localCacheEnabled=r,this._enableAutoResend=i,this._isProcessingAutoResend=!1,this._autoResendQueue=[],this._dispatcher=a,this._logger=l,this._sdkState=s,this._localCacheEnabled&&a.on((function(d){if(d instanceof Bs)switch(d.stateType){case en.CONNECTED:c._isProcessingAutoResend||c.processAutoResendRegisteredPendingMessages().then((function(){return c._processNextAutoResend()}));break;case en.INTERNAL_DISCONNECTED:case en.EXTERNAL_DISCONNECTED:c._isProcessingAutoResend=!1}}))}return t.of=function(n){return RM[n]},t.prototype.processNonAutoResendRegisteredPendingMessages=function(){return S(this,void 0,void 0,(function(){var n=this;return T(this,(function(e){switch(e.label){case 0:return this._enableAutoResend?[4,gr((function(){return S(n,void 0,void 0,(function(){var r,i,a,s,l,c;return T(this,(function(d){switch(d.label){case 0:return[4,this._fetchAllCachedPendingMessages()];case 1:r=d.sent();try{for(i=Re(r),a=i.next();!a.done;a=i.next())(s=a.value).errorCode===0&&(this._logger.debug("cached pending message is not auto-resend registered. changing its sending status to failed: ",s.reqId),s.sendingStatus=cn.FAILED,s.errorCode=ze.ACK_TIMEOUT,this._dispatcher.dispatch(new lr({messages:[s],source:ge.LOCAL_MESSAGE_FAILED})))}catch(p){l={error:p}}finally{try{a&&!a.done&&(c=i.return)&&c.call(i)}finally{if(l)throw l.error}}return[2]}}))}))}))]:[2];case 1:return e.sent(),[2]}}))}))},t.prototype.processAutoResendRegisteredPendingMessages=function(){return S(this,void 0,void 0,(function(){var n=this;return T(this,(function(e){switch(e.label){case 0:return[4,gr((function(){return S(n,void 0,void 0,(function(){var r,i,a,s,l,c,d,p;return T(this,(function(g){switch(g.label){case 0:return[4,this._fetchAllCachedPendingMessages()];case 1:r=g.sent();try{for(i=Re(r),a=i.next();!a.done;a=i.next())s=a.value,this._enableAutoResend&&s.errorCode&&a1(s.errorCode)&&(l=new Date().getTime(),c=s.createdAt+2592e5,this._enableAutoResend&&l<=c?this._autoResendQueue.map((function(_){return _.reqId})).indexOf(s.reqId)<0&&this._autoResendQueue.push(s):(this._logger.debug("auto-resend registered pending messaged expired. expiration date: ",new Date(c).toLocaleString()),s.sendingStatus=cn.FAILED,this._dispatcher.dispatch(new lr({messages:[s],source:ge.LOCAL_MESSAGE_FAILED}))))}catch(_){d={error:_}}finally{try{a&&!a.done&&(p=i.return)&&p.call(i)}finally{if(d)throw d.error}}return[2]}}))}))}))];case 1:return e.sent(),[2]}}))}))},t.prototype.completeCurrentAndProcessNextAutoResend=function(n){if(this._localCacheEnabled&&this._enableAutoResend&&(n.sendingStatus===cn.SUCCEEDED||n.sendingStatus===cn.FAILED&&!a1(n.errorCode))){var e=this.indexOf(n);e>=0&&this._autoResendQueue.splice(e,1),e===0&&this._processNextAutoResend()}},t.prototype._fetchAllCachedPendingMessages=function(){return S(this,void 0,void 0,(function(){var n,e;return T(this,(function(r){switch(r.label){case 0:return n=Ep.of(this._iid),(e=new vh).replyType=ta.ALL,[4,n.fetch({sendingStatus:cn.PENDING,backward:!0,filter:e})];case 1:return[2,r.sent()]}}))}))},t.prototype.indexOf=function(n){return this._autoResendQueue.length>0?this._autoResendQueue.map((function(e){return e.reqId})).indexOf(n.reqId):-1},t.prototype._processNextAutoResend=function(){return S(this,void 0,void 0,(function(){var n;return T(this,(function(e){if(this._localCacheEnabled&&this._enableAutoResend&&this._sdkState.appState==="foreground")try{this._autoResendQueue.length>0?(this._isProcessingAutoResend||(this._logger.debug("auto-resend queue started."),this._isProcessingAutoResend=!0),n=this._autoResendQueue[0],this._dispatcher.dispatch(new ox({message:n})),this._logger.debug("processing auto-resend for message request id: ",n.reqId)):(this._logger.debug("auto-resend queue finished."),this._isProcessingAutoResend=!1)}catch(r){this._logger.warn("process auto-resend error: ",r),this._isProcessingAutoResend=!1}return[2]}))}))},t})();(function(t){t[t.USER_BLOCK=20001]="USER_BLOCK",t[t.USER_UNBLOCK=2e4]="USER_UNBLOCK",t[t.FRIEND_DISCOVERED=20900]="FRIEND_DISCOVERED"})(R0||(R0={}));var Ac,C1=(function(){function t(n){this.category=n.cat,this.data=n.data}return t.getDataAsUserBlockEvent=function(n,e){var r=e.data,i=r.blocker,a=r.blockee;return{blocker:new St(n,i),blockee:new St(n,a)}},t.getDataAsFriendDiscoveredEvent=function(n,e){var r=e.data.friend_discoveries;return{friendDiscoveries:Array.isArray(r)?r.map((function(i){return new St(n,i)})):[]}},t})(),lx=(function(t){function n(e,r){var i=r.userId,a=t.call(this)||this;return a._iid=e,a.userId=i,a}return U(n,t),n})(kn),ux=(function(t){function n(){return t.call(this)||this}return U(n,t),n})(kn),cx=(function(t){function n(e){var r=e.configTs,i=t.call(this)||this;return i.configTs=r,i}return U(n,t),n})(kn),dx=(function(t){function n(e,r,i){var a=t.call(this,e,"USEV",i)||this;return a.event=new C1(i),a}return U(n,t),n})(Xn),hx=(function(t){function n(e){var r=e.appConfigsInfo,i=e.configTs,a=t.call(this)||this;return a.appConfigsInfo={},a.configTs=0,a.appConfigsInfo=r,a.configTs=i,a}return U(n,t),n})(kn);(function(t){t[t.IDLE=0]="IDLE",t[t.RUNNING=1]="RUNNING",t[t.END=2]="END"})(Ac||(Ac={}));var Vc=(function(t){function n(e,r,i,a){var s=t.call(this)||this;return s._state=Ac.IDLE,s._retryCount=0,s._retryLimit=3,s.priority=0,s._worker=r,s}return U(n,t),Object.defineProperty(n.prototype,"isIdle",{get:function(){return this._state===Ac.IDLE},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isRunning",{get:function(){return this._state===Ac.RUNNING},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isDone",{get:function(){return this._state===Ac.END},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"retryCount",{get:function(){return this._retryCount},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"retryLimit",{get:function(){return this._retryLimit},enumerable:!1,configurable:!0}),n.prototype._run=function(e){return S(this,void 0,void 0,(function(){var r,i;return T(this,(function(a){switch(a.label){case 0:if(!this.isRunning)return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this._worker(e)];case 2:return r=a.sent(),this._retryCount=0,this.dispatch("progress",r),r.hasNext?this._run(r.nextToken):this.end(),[3,4];case 3:return i=a.sent(),this.dispatch("error",i),this._retryCount<this._retryLimit?(this._retryCount++,this._run(e)):this.stop(),[3,4];case 4:return[2]}}))}))},n.prototype.start=function(e){this.isRunning||(this._state=Ac.RUNNING,this._run(e))},n.prototype.stop=function(){this._state=Ac.IDLE,this.dispatch("stop")},n.prototype.end=function(){this._state=Ac.END,this.dispatch("end")},n})(Ap),MB=function(t,n){this.pollId=0,this.messageId=0,this.pollId=n.poll.id,this.messageId=n.poll.message_id,this._iid=t,this._payload=n},_n;(function(t){t[t.NONE=0]="NONE",t[t.CHANNEL_ENTER=10102]="CHANNEL_ENTER",t[t.CHANNEL_EXIT=10103]="CHANNEL_EXIT",t[t.USER_CHANNEL_MUTE=10201]="USER_CHANNEL_MUTE",t[t.USER_CHANNEL_UNMUTE=10200]="USER_CHANNEL_UNMUTE",t[t.USER_CHANNEL_BAN=10601]="USER_CHANNEL_BAN",t[t.USER_CHANNEL_UNBAN=10600]="USER_CHANNEL_UNBAN",t[t.CHANNEL_FREEZE=10701]="CHANNEL_FREEZE",t[t.CHANNEL_UNFREEZE=10700]="CHANNEL_UNFREEZE",t[t.TYPING_START=10900]="TYPING_START",t[t.TYPING_END=10901]="TYPING_END",t[t.CHANNEL_JOIN=1e4]="CHANNEL_JOIN",t[t.CHANNEL_LEAVE=10001]="CHANNEL_LEAVE",t[t.CHANNEL_OPERATOR_UPDATE=10002]="CHANNEL_OPERATOR_UPDATE",t[t.CHANNEL_INVITE=10020]="CHANNEL_INVITE",t[t.CHANNEL_ACCEPT_INVITE=10021]="CHANNEL_ACCEPT_INVITE",t[t.CHANNEL_DECLINE_INVITE=10022]="CHANNEL_DECLINE_INVITE",t[t.CHANNEL_PROP_CHANGED=11e3]="CHANNEL_PROP_CHANGED",t[t.CHANNEL_DELETED=12e3]="CHANNEL_DELETED",t[t.CHANNEL_META_DATA_CHANGED=11100]="CHANNEL_META_DATA_CHANGED",t[t.CHANNEL_META_COUNTERS_CHANGED=11200]="CHANNEL_META_COUNTERS_CHANGED",t[t.CHANNEL_HIDE=13e3]="CHANNEL_HIDE",t[t.CHANNEL_UNHIDE=13001]="CHANNEL_UNHIDE",t[t.PINNED_MESSAGE_CHANGED=11300]="PINNED_MESSAGE_CHANGED"})(_n||(_n={}));var OB=(function(){function t(n){var e;this.channelUrl=n.channel_url,this.channelType=n.channel_type,this.category=n.cat,this.data=(e=n.data)!==null&&e!==void 0?e:{},this.ts=n.ts}return Object.defineProperty(t.prototype,"isGroupChannelEvent",{get:function(){return this.channelType===Rt.GROUP},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isOpenChannelEvent",{get:function(){return this.channelType===Rt.OPEN},enumerable:!1,configurable:!0}),t})(),$c=(function(t){function n(e,r,i){var a=t.call(this,e,"SYEV",i)||this;return a.event=new OB(i),a}return U(n,t),n})(Xn),fx=(function(t){function n(e,r,i){var a=t.call(this,e,r,i)||this,s=i.data.operators,l=s===void 0?[]:s;return a.operators=l.map((function(c){return new St(a._iid,c)})),a}return U(n,t),n})($c),px=(function(t){function n(e,r,i){var a,s=this;return(s=t.call(this,e,"SYEV",i)||this).pinnedMessageIds=[],s.latestPinnedMessage=null,s.ts=0,i.data&&(s.pinnedMessageIds=(a=i.data.pinned_message_ids)!==null&&a!==void 0?a:[],s.latestPinnedMessage=i.data.latest_pinned_message?ia(e,z({},i.data.latest_pinned_message)):null),s.ts=i.ts,s}return U(n,t),n})(Xn),mx=(function(t){function n(e,r){var i=t.call(this,e)||this;return i._logger=r.logger,i._sdkState=r.sdkState,i._sessionManager=r.sessionManager,i._requestQueue=r.requestQueue,i._dispatcher=r.dispatcher,i._cacheContext=r.cacheContext,i._channelType=r.channelType,i}return U(n,t),Object.defineProperty(n.prototype,"_messageBroadcast",{get:function(){return ax.of(this._iid)},enumerable:!1,configurable:!0}),n.prototype.subscribeMessageEvent=function(e,r){this._messageBroadcast.subscribe(e,r)},n.prototype.unsubscribeMessageEvent=function(e){this._messageBroadcast.unsubscribe(e)},n.prototype.getMessageFromCache=function(e){return S(this,void 0,void 0,(function(){return T(this,(function(r){return[2,null]}))}))},n.prototype.getExactlyMatchingMessagesForTokenFromCache=function(e,r,i){return S(this,void 0,void 0,(function(){return T(this,(function(a){return[2,[]]}))}))},n.prototype.getMessagesFromCache=function(e,r,i,a,s,l){return S(this,void 0,void 0,(function(){return T(this,(function(c){return[2,[]]}))}))},n.prototype.getPollMessagesFromCache=function(e,r,i,a){return S(this,void 0,void 0,(function(){return T(this,(function(s){return[2,[]]}))}))},n.prototype.getCachedMessageCountBetween=function(e,r,i,a){return S(this,void 0,void 0,(function(){return T(this,(function(s){return[2,0]}))}))},n.prototype.getUnsentMessagesFromCache=function(e,r){return S(this,void 0,void 0,(function(){return T(this,(function(i){return[2,[]]}))}))},n.prototype.removeFailedMessageFromCache=function(e){return S(this,void 0,void 0,(function(){return T(this,(function(r){return[2]}))}))},n})(ei),gx=(function(t){function n(e,r,i){var a,s,l,c,d=this;(d=t.call(this,e,"ADMM",i)||this).message=new _p(e,i);var p=W.of(e).sdkState;return d.isMentioned=vg(d.message.mentionType,(l=(a=d.message.mentionedUserIds)!==null&&a!==void 0?a:(s=d.message.mentionedUsers)===null||s===void 0?void 0:s.map((function(g){return g.userId})))!==null&&l!==void 0?l:[],p.userId),d.forceUpdateLastMessage=(c=i.force_update_last_message)!==null&&c!==void 0&&c,d}return U(n,t),n})(Xn),vx=(function(t){function n(e,r,i){var a,s,l,c,d,p=this;(p=t.call(this,e,"AEDI",i)||this).message=new _p(e,i);var g=W.of(e).sdkState;return p.mentionCountChange=Q3({mentionType:(a=i.old_values)===null||a===void 0?void 0:a.mention_type,mentionedUserIds:(l=(s=i.old_values)===null||s===void 0?void 0:s.mentioned_user_ids)!==null&&l!==void 0?l:[]},Qe({mentionType:p.message.mentionType,mentionedUserIds:(c=p.message.mentionedUserIds)!==null&&c!==void 0?c:(d=p.message.mentionedUsers)===null||d===void 0?void 0:d.map((function(_){return _.userId}))}),g.userId),p}return U(n,t),n})(Xn),_x=(function(t){function n(e,r,i){var a=t.call(this,e,"MRCT",i)||this;return a.channelUrl=i.channel_url,a.channelType=i.channel_type,a.event=new oS(i),a}return U(n,t),n})(Xn),yx=(function(t){function n(e,r,i){var a=t.call(this,e,"MTHD",i)||this;return a.event=new sx(e,i),a}return U(n,t),n})(Xn),bx=(function(t){function n(e,r,i){var a=t.call(this,e,"MCNT",i)||this;return a.groupChannelMemberCounts=i.group_channels.map((function(s){return{channelUrl:s.channel_url,memberCount:s.member_count,joinedMemberCount:s.joined_member_count,updatedAt:s.ts}})),a.openChannelMemberCounts=i.open_channels.map((function(s){return{channelUrl:s.channel_url,participantCount:s.participant_count,updatedAt:s.ts}})),a}return U(n,t),n})(Xn),Ex=(function(t){function n(e,r,i){var a=t.call(this,e,"PEDI",i)||this;return a.event=new MB(e,i),a.status=pN(i.poll.status)||i.poll.status,a.channelUrl=i.channel_url,a.channelType=i.channel_type,a}return U(n,t),n})(Xn),Cx=function(){this.onUserMuted=it,this.onUserUnmuted=it,this.onUserBanned=it,this.onUserUnbanned=it,this.onChannelChanged=it,this.onChannelDeleted=it,this.onChannelFrozen=it,this.onChannelUnfrozen=it,this.onOperatorUpdated=it,this.onChannelMemberCountChanged=it,this.onMetaDataCreated=it,this.onMetaDataUpdated=it,this.onMetaDataDeleted=it,this.onMetaCounterCreated=it,this.onMetaCounterUpdated=it,this.onMetaCounterDeleted=it,this.onMessageReceived=it,this.onMessageUpdated=it,this.onMessageDeleted=it,this.onMentionReceived=it,this.onReactionUpdated=it,this.onThreadInfoUpdated=it},kr;(function(t){t.NONE="none",t.JOINED="joined",t.INVITED="invited",t.LEFT="left"})(kr||(kr={}));var Vu,ms,_s,ph,Xo,w1,Lc,D0,Co=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.state=null,i.role=null,i.isMuted=!1,i.isBlockedByMe=!1,i.isBlockingMe=!1,i.state=Nt(kr,r.state)?r.state:null,i.role=Nt(Jo,r.role)?r.role:null,typeof r.is_muted=="boolean"&&(i.isMuted=r.is_muted),typeof r.is_blocked_by_me=="boolean"&&(i.isBlockedByMe=r.is_blocked_by_me),typeof r.is_blocking_me=="boolean"&&(i.isBlockingMe=r.is_blocking_me),i}return U(n,t),n.payloadify=function(e){return Le(Qe(z(z({},t.payloadify.call(this,e)),{state:e.state,role:e.role,is_muted:e.isMuted,is_blocked_by_me:e.isBlockedByMe,is_blocking_me:e.isBlockingMe})))},n})(Mp),kB=(function(t){function n(e,r){var i,a,s=this;return(s=t.call(this,e)||this).channelUrl=(i=r.channel_url)!==null&&i!==void 0?i:"",s.channelType=(a=r.channel_type)!==null&&a!==void 0?a:Rt.GROUP,s.member=new St(s._iid,r.user),s.deliveryAt=r.ts,s}return U(n,t),n})(ei);(function(t){t.ALL="all",t.PUBLIC="public",t.PRIVATE="private"})(Vu||(Vu={})),(function(t){t.ALL="all",t.JOINED="joined_only",t.INVITED="invited_only",t.INVITED_BY_FRIEND="invited_by_friend",t.INVITED_BY_NON_FRIEND="invited_by_non_friend"})(ms||(ms={})),(function(t){t.ALL="all",t.SUPER="super",t.NON_SUPER="nonsuper",t.BROADCAST_ONLY="broadcast_only",t.EXCLUSIVE_ONLY="exclusive_only"})(_s||(_s={})),(function(t){t.ALL="all",t.UNREAD_MESSAGE="unread_message"})(ph||(ph={})),(function(t){t.ALL="all",t.UNHIDDEN="unhidden_only",t.HIDDEN="hidden_only",t.HIDDEN_ALLOW_AUTO_UNHIDE="hidden_allow_auto_unhide",t.HIDDEN_PREVENT_AUTO_UNHIDE="hidden_prevent_auto_unhide"})(Xo||(Xo={})),(function(t){t.ALL="all",t.OPERATOR="operator",t.NONOPERATOR="nonoperator"})(w1||(w1={})),(function(t){t.AND="AND",t.OR="OR"})(Lc||(Lc={})),(function(t){t.MEMBER_NICKNAME="member_nickname",t.CHANNEL_NAME="channel_name"})(D0||(D0={}));var mr,wx=(function(){function t(n){var e,r,i,a,s,l,c,d,p,g,_,y,C,w,A,M,I,D,P,H;this._searchFilter=null,this._userIdsFilter=null,this.metadataKey=null,this.metadataValues=null,this.metadataValueStartsWith=null,this.includeEmpty=(e=n?.includeEmpty)!==null&&e!==void 0&&e,this.nicknameContainsFilter=(r=n?.nicknameContainsFilter)!==null&&r!==void 0?r:null,this.nicknameStartsWithFilter=(i=n?.nicknameStartsWithFilter)!==null&&i!==void 0?i:null,this.nicknameExactMatchFilter=(a=n?.nicknameExactMatchFilter)!==null&&a!==void 0?a:null,this.channelNameContainsFilter=(s=n?.channelNameContainsFilter)!==null&&s!==void 0?s:"",this.myMemberStateFilter=(l=n?.myMemberStateFilter)!==null&&l!==void 0?l:ms.ALL,this.customTypesFilter=(c=n?.customTypesFilter)!==null&&c!==void 0?c:null,this.channelUrlsFilter=(d=n?.channelUrlsFilter)!==null&&d!==void 0?d:null,this.superChannelFilter=(p=n?.superChannelFilter)!==null&&p!==void 0?p:_s.ALL,this.publicChannelFilter=(g=n?.publicChannelFilter)!==null&&g!==void 0?g:Vu.ALL,this.customTypeStartsWithFilter=(_=n?.customTypeStartsWithFilter)!==null&&_!==void 0?_:null,this.unreadChannelFilter=(y=n?.unreadChannelFilter)!==null&&y!==void 0?y:ph.ALL,this.hiddenChannelFilter=(C=n?.hiddenChannelFilter)!==null&&C!==void 0?C:Xo.UNHIDDEN,this.includeFrozen=(w=n?.includeFrozen)===null||w===void 0||w,this.metadataKey=(A=n?.metadataKey)!==null&&A!==void 0?A:null,this.metadataValues=(M=n?.metadataValues)!==null&&M!==void 0?M:null,this.metadataValueStartsWith=(I=n?.metadataValueStartsWith)!==null&&I!==void 0?I:null,this._userIdsFilter=(D=n?.userIdsFilter)!==null&&D!==void 0?D:null,this._searchFilter=(P=n?.searchFilter)!==null&&P!==void 0?P:null,n?.createdAfter&&(this.createdAfter=n.createdAfter),n?.createdBefore&&(this.createdBefore=n.createdBefore),this.includeMetaData=(H=n?.includeMetaData)===null||H===void 0||H}return t.prototype._isFriend=function(n){return!(!n||!n.friendDiscoveryKey&&!n.friendName)},Object.defineProperty(t.prototype,"searchFilter",{get:function(){return this._searchFilter},enumerable:!1,configurable:!0}),t.prototype.setSearchFilter=function(n,e){Array.isArray(n)&&n.length!==0&&typeof e=="string"&&e&&(this._searchFilter={query:e,fields:n})},Object.defineProperty(t.prototype,"userIdsFilter",{get:function(){return this._userIdsFilter},enumerable:!1,configurable:!0}),t.prototype.setUserIdsFilter=function(n,e,r){r===void 0&&(r=Lc.AND),this._userIdsFilter={userIds:n,includeMode:e,queryType:r}},t.prototype.clone=function(){var n,e=new t;this.searchFilter&&e.setSearchFilter(this.searchFilter.fields,(n=this.searchFilter.query)!==null&&n!==void 0?n:void 0),this.userIdsFilter&&e.setUserIdsFilter(this.userIdsFilter.userIds,this.userIdsFilter.includeMode,this.userIdsFilter.queryType);var r=JSON.parse(JSON.stringify(this));return Object.keys(r).forEach((function(i){e[i]=r[i]})),e},t.prototype.match=function(n,e){var r;if(this._searchFilter){var i=this._searchFilter,a=i.query,s=i.fields;if(a&&s&&s.length>0&&!s.some((function(w){switch(w){case D0.CHANNEL_NAME:return n.name.toLowerCase().includes(a.toLowerCase());case D0.MEMBER_NICKNAME:return n.members.some((function(A){return A.nickname.toLowerCase().includes(a.toLowerCase())}));default:return!0}})))return!1}if(this._userIdsFilter){var l=this._userIdsFilter,c=l.userIds,d=l.includeMode,p=l.queryType,g=n.members.map((function(w){return w.userId}));if(d){if(c.length>0)switch(p){case Lc.AND:if(c.some((function(w){return!g.includes(w)})))return!1;break;case Lc.OR:if(c.every((function(w){return!g.includes(w)})))return!1}}else if(c.includes(e)||c.push(e),n.members.length>c.length||!U9(c,g))return!1}if(!this.includeEmpty&&!n.lastMessage||!this.includeFrozen&&n.isFrozen||this.customTypesFilter&&this.customTypesFilter.length>0&&!this.customTypesFilter.includes("*")&&!this.customTypesFilter.includes(n.customType)||this.customTypeStartsWithFilter&&!new RegExp("^".concat(this.customTypeStartsWithFilter)).test(n.customType)||this.channelNameContainsFilter&&!n.name.toLowerCase().includes(this.channelNameContainsFilter.toLowerCase()))return!1;if(this.nicknameContainsFilter){var _=this.nicknameContainsFilter.toLowerCase();if(!n.members.some((function(w){return w.userId!==e&&w.nickname.toLowerCase().includes(_)})))return!1}if(this.nicknameStartsWithFilter){var y=this.nicknameStartsWithFilter.toLowerCase();if(!n.members.some((function(w){return w.userId!==e&&w.nickname.toLowerCase().startsWith(y)})))return!1}if(this.nicknameExactMatchFilter){var C=this.nicknameExactMatchFilter.toLowerCase();if(!n.members.some((function(w){return w.userId!==e&&w.nickname.toLowerCase()!=C})))return!1}if(this.channelUrlsFilter&&this.channelUrlsFilter.length>0&&!this.channelUrlsFilter.includes(n.url))return!1;if(this.myMemberStateFilter)switch(this.myMemberStateFilter){case ms.ALL:if(n.myMemberState==="none")return!1;break;case ms.JOINED:if(n.myMemberState!=="joined")return!1;break;case ms.INVITED:if(n.myMemberState!=="invited")return!1;break;case ms.INVITED_BY_FRIEND:if(n.myMemberState!=="invited"||!this._isFriend(n.inviter))return!1;break;case ms.INVITED_BY_NON_FRIEND:if(n.myMemberState!=="invited"||this._isFriend(n.inviter))return!1}if(this.hiddenChannelFilter)switch(this.hiddenChannelFilter){case Xo.UNHIDDEN:if(n.isHidden||n.hiddenState!=="unhidden")return!1;break;case Xo.HIDDEN:if(!n.isHidden)return!1;break;case Xo.HIDDEN_ALLOW_AUTO_UNHIDE:if(!n.isHidden||n.hiddenState!=="hidden_allow_auto_unhide")return!1;break;case Xo.HIDDEN_PREVENT_AUTO_UNHIDE:if(!n.isHidden||n.hiddenState!=="hidden_prevent_auto_unhide")return!1}if(this.unreadChannelFilter&&this.unreadChannelFilter===ph.UNREAD_MESSAGE&&n.unreadMessageCount===0)return!1;if(this.publicChannelFilter)switch(this.publicChannelFilter){case Vu.PUBLIC:if(!n.isPublic)return!1;break;case Vu.PRIVATE:if(n.isPublic)return!1}if(this.superChannelFilter)switch(this.superChannelFilter){case _s.SUPER:if(!n.isSuper)return!1;break;case _s.NON_SUPER:if(n.isSuper)return!1}return this.includeMetaData&&this.metadataKey&&(((r=n.cachedMetaData)===null||r===void 0?void 0:r[this.metadataKey])===void 0||this.metadataValues&&!this.metadataValues.includes(n.cachedMetaData[this.metadataKey])||this.metadataValueStartsWith&&!n.cachedMetaData[this.metadataKey].startsWith(this.metadataValueStartsWith))?!1:!(this.createdAfter&&n.createdAt<this.createdAfter)&&!(this.createdBefore&&n.createdAt>this.createdBefore)},t})(),RB=(function(t){function n(e,r){var i=r.sdkState,a=r.cacheContext,s=t.call(this,e)||this;return s._channels=new Map,s._sdkState=i,s._cacheContext=a,s}return U(n,t),Object.defineProperty(n.prototype,"collection",{get:function(){var e=this._cacheContext.nestdb;return Te(!!e).throw(X.databaseError),e.collection(JD)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"localCacheEnabled",{get:function(){return this._cacheContext.localCacheEnabled&&!!this.collection},enumerable:!1,configurable:!0}),n.prototype._serialize=function(e,r){return r===void 0&&(r=0),z(z({},e.serialize()),{lastMessageUpdatedAt:e.lastMessage?e.lastMessage.createdAt:0,syncIndex:r})},n.prototype._deserialize=function(e){return fi.of(this._iid).buildGroupChannelFromSerializedData(e)},Object.defineProperty(n.prototype,"channels",{get:function(){return Je([],Ye(this._channels.values()),!1)},enumerable:!1,configurable:!0}),n.prototype.isCachedInMemory=function(e){return this._channels.has(e)},n.prototype.filterOffsetChanged=function(e){var r=this;return e.filter((function(i){if(r._channels.has(i.url))return r._channels.get(i.url).messageOffsetTimestamp<i.messageOffsetTimestamp}))},n.prototype.get=function(e){return S(this,void 0,void 0,(function(){var r,i;return T(this,(function(a){switch(a.label){case 0:return this._channels.has(e)?[3,3]:this.localCacheEnabled?[4,this.collection.getByKey(e)]:[3,2];case 1:if(r=a.sent())return i=this._deserialize(r),this._channels.set(e,i),[2,i];a.label=2;case 2:return[2,void 0];case 3:return[2,this._channels.get(e)]}}))}))},n.prototype.fetch=function(e){var r=e.token,i=e.offset,a=i===void 0?0:i,s=e.limit,l=s===void 0?ZD:s,c=e.backward,d=c!==void 0&&c,p=e.filter,g=p===void 0?new wx:p,_=e.order,y=_===void 0?Tr.LATEST_LAST_MESSAGE:_,C=e.borderlineChannelUrl;return S(this,void 0,void 0,(function(){var w,A,M,I,D,P=this;return T(this,(function(H){switch(H.label){case 0:return this.localCacheEnabled?(w=!!C,A=zE(y),M={where:function(L){if(a>0)return a--,!1;if(r)switch(y){case Tr.CHANNEL_NAME_ALPHABETICAL:if(!d&&L.name.localeCompare(r)<0||d&&L.name.localeCompare(r)>0)return!1;break;case Tr.CHRONOLOGICAL:if(!d&&L.createdAt>r||d&&L.createdAt<r)return!1;break;case Tr.LATEST_LAST_MESSAGE:if(!d&&L.lastMessageUpdatedAt>r||d&&L.lastMessageUpdatedAt<r)return!1}return w&&C&&C===L.url?(w=!1,!1):!w&&g.match(P._deserialize(L),P._sdkState.userId)},index:A,backward:d},[4,this.collection.query(M)]):[3,3];case 1:return[4,H.sent().fetch({limit:l})];case 2:return I=H.sent(),(D=I.map((function(L){return P._deserialize(L)}))).forEach((function(L){!g.includeMetaData&&L.cachedMetaData&&L._clearCachedMetaData(),P._channels.has(L.url)||P._channels.set(L.url,L)})),[2,D];case 3:return[2,[]]}}))}))},n.prototype.upsert=function(e,r){return S(this,void 0,void 0,(function(){var i,a,s,l=this;return T(this,(function(c){switch(c.label){case 0:if(i=[],e.forEach((function(d){if(l._channels.has(d.url)){var p=l._channels.get(d.url);p._pinnedMessagesUpdatedAt<d._pinnedMessagesUpdatedAt&&(p._pinnedMessagesUpdatedAt=d._pinnedMessagesUpdatedAt),p._messageCollectionLastAccessedAt>d._messageCollectionLastAccessedAt&&(d._messageCollectionLastAccessedAt=p._messageCollectionLastAccessedAt),d.cachedMetaData instanceof Map&&d.cachedMetaData.size>0&&r&&(p._updateCachedMetaData(d.cachedMetaData,r).isUpdated||Object.assign(d,{_cachedMetaData:p.cachedMetaData})),p._update(d),i.push(p)}else l._channels.set(d.url,d),i.push(d)})),!this.localCacheEnabled)return[3,2];for(a=[],s=0;s<i.length;s++)a.push(this._serialize(i[s],s));return[4,this.collection.upsertMany(a)];case 1:c.sent(),c.label=2;case 2:return[2,i]}}))}))},n.prototype.remove=function(e){return S(this,void 0,void 0,(function(){var r,i,a,s,l;return T(this,(function(c){switch(c.label){case 0:try{for(r=Re(e),i=r.next();!i.done;i=r.next())a=i.value,this._channels.delete(a)}catch(d){s={error:d}}finally{try{i&&!i.done&&(l=r.return)&&l.call(r)}finally{if(s)throw s.error}}return this.localCacheEnabled?[4,this.collection.removeIf({where:{url:{"/in":e}}})]:[3,2];case 1:c.sent(),c.label=2;case 2:return[2]}}))}))},n.prototype.clear=function(){return S(this,void 0,void 0,(function(){return T(this,(function(e){switch(e.label){case 0:return this.clearMemoryCache(),this.localCacheEnabled?[4,this.collection.clear()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},n.prototype.clearMemoryCache=function(){this._channels.clear()},n.prototype._setBlockStateOfAllChannels=function(e,r,i){return S(this,void 0,void 0,(function(){var a,s,l,c,d,p,g,_,y,C,w,A,M,I,D,P,H,L,G;return T(this,(function(Y){switch(Y.label){case 0:if(a=[],e===this._sdkState.userId)try{for(s=Re(this._channels.values()),l=s.next();!l.done;l=s.next()){_=l.value;try{for(I=void 0,c=Re(_.members),d=c.next();!d.done;d=c.next())if((w=d.value).userId===r){w.isBlockedByMe=i,a.push(_);break}}catch(F){I={error:F}}finally{try{d&&!d.done&&(D=c.return)&&D.call(c)}finally{if(I)throw I.error}}}}catch(F){A={error:F}}finally{try{l&&!l.done&&(M=s.return)&&M.call(s)}finally{if(A)throw A.error}}else if(r===this._sdkState.userId)try{for(p=Re(this._channels.values()),g=p.next();!g.done;g=p.next()){_=g.value;try{for(L=void 0,y=Re(_.members),C=y.next();!C.done;C=y.next())if((w=C.value).userId===e){w.isBlockingMe=i,a.push(_);break}}catch(F){L={error:F}}finally{try{C&&!C.done&&(G=y.return)&&G.call(y)}finally{if(L)throw L.error}}}}catch(F){P={error:F}}finally{try{g&&!g.done&&(H=p.return)&&H.call(p)}finally{if(P)throw P.error}}return a.length>0?[4,this.upsert(a)]:[3,2];case 1:Y.sent(),Y.label=2;case 2:return[2]}}))}))},n.prototype.block=function(e,r){return S(this,void 0,void 0,(function(){return T(this,(function(i){switch(i.label){case 0:return[4,this._setBlockStateOfAllChannels(e,r,!0)];case 1:return i.sent(),[2]}}))}))},n.prototype.unblock=function(e,r){return S(this,void 0,void 0,(function(){return T(this,(function(i){switch(i.label){case 0:return[4,this._setBlockStateOfAllChannels(e,r,!1)];case 1:return i.sent(),[2]}}))}))},n.prototype.markAsRead=function(e,r){return r===void 0&&(r=Je([],Ye(this._channels.keys()),!1)),S(this,void 0,void 0,(function(){var i,a,s,l,c,d,p,g;return T(this,(function(_){switch(_.label){case 0:i=[],_.label=1;case 1:_.trys.push([1,6,7,8]),a=Re(r),s=a.next(),_.label=2;case 2:return s.done?[3,5]:(l=s.value,[4,this.get(l)]);case 3:(c=_.sent())!=null&&c._updateUnreadMemberState(this._sdkState.userId,e)&&(c._updateUnreadCount(0,0),i.push(c)),_.label=4;case 4:return s=a.next(),[3,2];case 5:return[3,8];case 6:return d=_.sent(),p={error:d},[3,8];case 7:try{s&&!s.done&&(g=a.return)&&g.call(a)}finally{if(p)throw p.error}return[7];case 8:return i.length>0?[4,this.upsert(i)]:[3,10];case 9:_.sent(),_.label=10;case 10:return[2]}}))}))},n})(ei),qE={invitedUserIds:void 0,channelUrl:void 0,coverUrl:void 0,coverImage:void 0,isDistinct:void 0,isSuper:void 0,isBroadcast:void 0,isExclusive:void 0,isPublic:void 0,isDiscoverable:void 0,isStrict:void 0,isEphemeral:void 0,accessCode:void 0,name:void 0,data:void 0,customType:void 0,operatorUserIds:void 0,messageSurvivalSeconds:void 0},TN=function(t){return Tt("string",t.invitedUserIds,!0)&&Q("string",t.channelUrl,!0)&&Q("string",t.coverUrl,!0)&&(Ai(t.coverImage)||Q("string",t.coverImage,!0))&&Q("boolean",t.isDistinct,!0)&&Q("boolean",t.isSuper,!0)&&Q("boolean",t.isBroadcast,!0)&&Q("boolean",t.isExclusive,!0)&&Q("boolean",t.isPublic,!0)&&Q("boolean",t.isStrict,!0)&&Q("boolean",t.isDiscoverable,!0)&&Q("boolean",t.isEphemeral,!0)&&Q("string",t.accessCode,!0)&&Q("string",t.name,!0)&&Q("string",t.data,!0)&&Q("string",t.customType,!0)&&Tt("string",t.operatorUserIds,!0)&&Q("number",t.messageSurvivalSeconds,!0)},N1={customTypes:void 0,includeEmpty:!1,includeFrozen:!0,includeMetaData:!0,includeChatNotification:!1},SN=function(t){return Tt("string",t.customTypes,!0)&&Q("boolean",t.includeEmpty,!0)&&Q("boolean",t.includeFrozen,!0)&&Q("boolean",t.includeMetaData,!0)&&Q("boolean",t.includeChatNotification,!0)},Nx={myMemberStateFilter:ms.ALL},Tx=function(t){return Nt(ms,t.myMemberStateFilter)};(function(t){t.GROUP_CHANNEL_UNREAD_MENTION_COUNT="group_channel_unread_mention_count",t.NONSUPER_UNREAD_MENTION_COUNT="non_super_group_channel_unread_mention_count",t.SUPER_UNREAD_MENTION_COUNT="super_group_channel_unread_mention_count",t.GROUP_CHANNEL_UNREAD_MESSAGE_COUNT="group_channel_unread_message_count",t.NONSUPER_UNREAD_MESSAGE_COUNT="non_super_group_channel_unread_message_count",t.SUPER_UNREAD_MESSAGE_COUNT="super_group_channel_unread_message_count",t.GROUP_CHANNEL_INVITATION_COUNT="group_channel_invitation_count",t.NONSUPER_INVITATION_COUNT="non_super_group_channel_invitation_count",t.SUPER_INVITATION_COUNT="super_group_channel_invitation_count"})(mr||(mr={}));var DB={keys:[mr.GROUP_CHANNEL_UNREAD_MENTION_COUNT,mr.NONSUPER_UNREAD_MENTION_COUNT,mr.SUPER_UNREAD_MENTION_COUNT,mr.GROUP_CHANNEL_UNREAD_MESSAGE_COUNT,mr.NONSUPER_UNREAD_MESSAGE_COUNT,mr.SUPER_UNREAD_MESSAGE_COUNT,mr.GROUP_CHANNEL_INVITATION_COUNT,mr.NONSUPER_INVITATION_COUNT,mr.SUPER_INVITATION_COUNT],customTypeFilters:void 0,customTypesFilter:void 0},xB={channelCustomTypesFilter:void 0,superChannelFilter:_s.ALL},PB=function(t){return Tt("string",t.channelCustomTypesFilter,!0)&&Nt(_s,t.superChannelFilter)},UB={channelUrl:void 0,scheduledStatus:void 0,messageTypeFilter:ea.ALL};z({},ge);var WE=function(t){return t.startsWith("EVENT_")||t===ge.SYNC_CHANNEL_CHANGELOGS||t===ge.REFRESH_CHANNEL},It=(function(t){function n(e){var r=e.channels,i=e.context,a=e.isWebSocketEventComing,s=a!==void 0&&a,l=e.ts,c=t.call(this)||this;return c.channels=r,c.context=i,c.isWebSocketEventComing=s,c.ts=l,c}return U(n,t),n})(kn),wc=(function(t){function n(e){var r=e.channelUrls,i=e.context,a=e.isWebSocketEventComing,s=a!==void 0&&a,l=t.call(this)||this;return l.channelUrls=r,l.context=i,l.isWebSocketEventComing=s,l}return U(n,t),n})(kn),Sx=(function(t){function n(e){var r=e.channel,i=t.call(this)||this;return i.channel=r,i}return U(n,t),n})(kn),LB=(function(){function t(n){var e=n.groupChannelCache,r=n.userInfoCache,i=n.messageCache,a=n.unsentMessageCache,s=n.dispatcher,l=this;this._observers=new Map,s.on((function(c){return S(l,void 0,void 0,(function(){var d,p,g,_,y,C,w,A,M,I,D,P,H,L,G,Y,F,ne,J=this;return T(this,(function(re){switch(re.label){case 0:if(!(c instanceof It))return[3,19];if(d=c.channels,H=c.context,L=c.isWebSocketEventComing,p=d.filter((function(Oe){return Oe instanceof Ao})),H.source!==ge.EVENT_CHANNEL_RESET_HISTORY&&H.source!==ge.EVENT_CHANNEL_HIDDEN)return[3,9];re.label=1;case 1:re.trys.push([1,6,7,8]),g=Re(p),_=g.next(),re.label=2;case 2:return _.done?[3,5]:(M=_.value,[4,i.removeUnderOffset(M.url,M.messageOffsetTimestamp)]);case 3:re.sent(),re.label=4;case 4:return _=g.next(),[3,2];case 5:return[3,8];case 6:return y=re.sent(),G={error:y},[3,8];case 7:try{_&&!_.done&&(Y=g.return)&&Y.call(g)}finally{if(G)throw G.error}return[7];case 8:return[3,17];case 9:C=e.filterOffsetChanged(p),re.label=10;case 10:re.trys.push([10,15,16,17]),w=Re(C),A=w.next(),re.label=11;case 11:return A.done?[3,14]:(M=A.value,[4,i.removeUnderOffset(M.url,M.messageOffsetTimestamp)]);case 12:re.sent(),re.label=13;case 13:return A=w.next(),[3,11];case 14:return[3,17];case 15:return I=re.sent(),F={error:I},[3,17];case 16:try{A&&!A.done&&(ne=w.return)&&ne.call(w)}finally{if(F)throw F.error}return[7];case 17:return[4,e.upsert(p,c.ts)];case 18:return D=re.sent(),L||this._broadcastUpdateEvent(D,H),[3,25];case 19:return c instanceof wc?(P=c.channelUrls,H=c.context,L=c.isWebSocketEventComing,[4,e.remove(P)]):[3,22];case 20:return re.sent(),[4,gr((function(){return S(J,void 0,void 0,(function(){var Oe,Z,ue,q,le,pe;return T(this,(function(Pe){switch(Pe.label){case 0:Pe.trys.push([0,6,7,8]),Oe=Re(P),Z=Oe.next(),Pe.label=1;case 1:return Z.done?[3,5]:(ue=Z.value,[4,i.removeMessagesOfChannel(ue)]);case 2:return Pe.sent(),[4,a.removeMessagesOfChannel(ue)];case 3:Pe.sent(),Pe.label=4;case 4:return Z=Oe.next(),[3,1];case 5:return[3,8];case 6:return q=Pe.sent(),le={error:q},[3,8];case 7:try{Z&&!Z.done&&(pe=Oe.return)&&pe.call(Oe)}finally{if(le)throw le.error}return[7];case 8:return[2]}}))}))}))];case 21:return re.sent(),L||this._broadcastRemoveEvent(P,H),[3,25];case 22:return c instanceof lx?[4,e.fetch({token:Number.MAX_SAFE_INTEGER,limit:Number.MAX_SAFE_INTEGER})]:[3,25];case 23:return re.sent(),[4,r.fetch({limit:Number.MAX_SAFE_INTEGER})];case 24:re.sent(),re.label=25;case 25:return[2]}}))}))}))}return t.prototype._broadcastUpdateEvent=function(n,e){var r,i;try{for(var a=Re(this._observers.values()),s=a.next();!s.done;s=a.next()){var l=s.value;l.onUpdate&&l.onUpdate(n,e)}}catch(c){r={error:c}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}},t.prototype._broadcastRemoveEvent=function(n,e){var r,i;try{for(var a=Re(this._observers.values()),s=a.next();!s.done;s=a.next()){var l=s.value;l.onRemove&&l.onRemove(n,e)}}catch(c){r={error:c}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}},t.prototype.subscribe=function(n,e){this._observers.set(n,e)},t.prototype.unsubscribe=function(n){this._observers.delete(n)},t.prototype.unsubscribeAll=function(){this._observers.clear()},t})(),FB=(function(t){function n(e){var r=e.userId,i=e.ts,a=e.token,s=e.filter,l=e.includeChatNotification,c=l!==void 0&&l,d=t.call(this)||this,p=z(z({},N1),s),g=p.customTypes,_=p.includeEmpty,y=p.includeFrozen;return d.method=ye.GET,d.path="".concat(nn,"/").concat(encodeURIComponent(r),"/my_group_channels/changelogs"),d.params=Le(Qe({show_delivery_receipt:!0,show_member:!0,show_read_receipt:!0,change_ts:i||null,token:a,custom_types:g,show_empty:_,show_frozen:y,include_chat_notification:c})),d}return U(n,t),n})(Ee),HB=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.updatedChannels=r.updated.map((function(a){return new Ao(e,Object.assign(a,{ts:r.ts}))})),i.deletedChannelUrls=r.deleted,i.hasMore=r.has_more,i.token=r.next,i.ts=r.ts,i}return U(n,t),n})(Se),AN=(function(t){function n(e){var r=e.channelUrl,i=e.isInternalCall,a=e.showLatestMessage,s=t.call(this)||this;return s.method=ye.GET,s.path="".concat(i?B9:Ta,"/").concat(encodeURIComponent(r)),s.params={show_member:!0,show_read_receipt:!0,show_delivery_receipt:!0,show_latest_message:a!=null&&a,show_conversation:!0},s}return U(n,t),n})(Ee),IN=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.channel=new Ao(e,r),i}return U(n,t),n})(Se),Zm={includeEmpty:!1,myMemberStateFilter:ms.ALL,unreadChannelFilter:ph.ALL,superChannelFilter:_s.ALL,publicChannelFilter:Vu.ALL,hiddenChannelFilter:Xo.ALL,userIdsFilter:{queryType:Lc.AND},order:Tr.LATEST_LAST_MESSAGE},jB=(function(t){function n(e){var r=this,i=e.userId,a=e.token,s=e.limit,l=e.order,c=e.includeEmpty,d=e.myMemberStateFilter,p=e.superChannelFilter,g=e.publicChannelFilter,_=e.unreadChannelFilter,y=e.nicknameContainsFilter,C=e.nicknameStartsWithFilter,w=e.nicknameExactMatchFilter,A=e.channelNameContainsFilter,M=e.channelUrlsFilter,I=e.customTypesFilter,D=e.customTypeStartsWithFilter,P=e.hiddenChannelFilter,H=e.metadataOrderKeyFilter,L=e.metadataKey,G=e.metadataValues,Y=e.metadataValueStartsWith,F=e.includeFrozen,ne=e.includeMetaData,J=e.searchFilter,re=e.userIdsFilter,Oe=e.includeChatNotification,Z=Oe!==void 0&&Oe,ue=e.includeLeftChannel,q=ue!==void 0&&ue,le=e.createdAfter,pe=e.createdBefore;return(r=t.call(this)||this).method=ye.GET,r.path="".concat(nn,"/").concat(encodeURIComponent(i),"/my_group_channels"),r.params=Le({token:a,limit:s,order:l??Zm.order,show_member:!0,show_read_receipt:!0,show_delivery_receipt:!0,show_empty:c??Zm.includeEmpty,member_state_filter:d??Zm.myMemberStateFilter,super_mode:p??Zm.superChannelFilter,public_mode:g??Zm.publicChannelFilter,unread_filter:_??Zm.unreadChannelFilter,members_nickname_contains:y,members_nickname_startswith:C,members_nickname:w,name_contains:A,channel_urls:M,custom_types:I,custom_type_startswith:D,hidden_mode:P,metadata_order_key:H,metadata_key:L,metadata_values:G,metadata_value_startswith:Y,show_frozen:F,show_metadata:ne,include_chat_notification:Z,include_left_channel:q,created_after:le,created_before:pe}),J&&J.query&&J.fields&&(r.params.search_query=J.query,r.params.search_fields=J.fields),re&&re.userIds&&re.userIds.length>0&&(re.includeMode?(r.params.members_include_in=re.userIds,r.params.query_type=re.queryType.toUpperCase()):r.params.members_exactly_in=re.userIds),r}return U(n,t),n})(Ee),GB=(function(t){function n(e,r){var i=t.call(this,e,r)||this;i.channels=[];var a=r.next,s=r.channels,l=r.ts;return i.token=a,s&&s.length>0&&(i.channels=s.map((function(c){return c.ts=l,new Ao(e,c)}))),i.ts=l??0,i}return U(n,t),n})(Se),VB=(function(t){function n(e){var r=e.userId,i=e.filter,a=t.call(this)||this,s=i.myMemberStateFilter;return a.method=ye.GET,a.path="".concat(nn,"/").concat(encodeURIComponent(r),"/group_channel_count"),a.params={state:s??ms.ALL},a}return U(n,t),n})(Ee),BB=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.groupChannelCount=r.group_channel_count,i}return U(n,t),n})(Se),zB=(function(t){function n(e){var r=e.userId,i=e.filter,a=t.call(this)||this,s=i.keys,l=i.customTypeFilters,c=i.customTypesFilter;return a.method=ye.GET,a.path="".concat(nn,"/").concat(encodeURIComponent(r),"/unread_item_count"),a.params=Le({item_keys:s,custom_types:c??l}),a}return U(n,t),n})(Ee),qB=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return typeof r[mr.GROUP_CHANNEL_UNREAD_MENTION_COUNT]=="number"&&(i.groupChannelUnreadMentionCount=r[mr.GROUP_CHANNEL_UNREAD_MENTION_COUNT]),typeof r[mr.GROUP_CHANNEL_UNREAD_MESSAGE_COUNT]=="number"&&(i.groupChannelUnreadMessageCount=r[mr.GROUP_CHANNEL_UNREAD_MESSAGE_COUNT]),typeof r[mr.GROUP_CHANNEL_INVITATION_COUNT]=="number"&&(i.groupChannelInvitationCount=r[mr.GROUP_CHANNEL_INVITATION_COUNT]),typeof r[mr.SUPER_UNREAD_MENTION_COUNT]=="number"&&(i.superGroupChannelUnreadMentionCount=r[mr.SUPER_UNREAD_MENTION_COUNT]),typeof r[mr.SUPER_UNREAD_MESSAGE_COUNT]=="number"&&(i.superGroupChannelUnreadMessageCount=r[mr.SUPER_UNREAD_MESSAGE_COUNT]),typeof r[mr.SUPER_INVITATION_COUNT]=="number"&&(i.superGroupChannelInvitationCount=r[mr.SUPER_INVITATION_COUNT]),typeof r[mr.NONSUPER_UNREAD_MENTION_COUNT]=="number"&&(i.nonSuperGroupChannelUnreadMentionCount=r[mr.NONSUPER_UNREAD_MENTION_COUNT]),typeof r[mr.NONSUPER_UNREAD_MESSAGE_COUNT]=="number"&&(i.nonSuperGroupChannelUnreadMessageCount=r[mr.NONSUPER_UNREAD_MESSAGE_COUNT]),typeof r[mr.NONSUPER_INVITATION_COUNT]=="number"&&(i.nonSuperGroupChannelInvitationCount=r[mr.NONSUPER_INVITATION_COUNT]),i}return U(n,t),n})(Se),WB=(function(t){function n(e){var r=e.userId,i=t.call(this)||this;return i.method=ye.GET,i.path="".concat(nn,"/").concat(encodeURIComponent(r),"/unread_channel_count"),i}return U(n,t),n})(Ee),KB=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.unreadCount=r.unread_count,i}return U(n,t),n})(Se),YB=(function(t){function n(e){var r=e.userId,i=e.filter,a=e.includeFeedChannel,s=a!==void 0&&a,l=t.call(this)||this,c=i.channelCustomTypesFilter,d=i.superChannelFilter;return l.method=ye.GET,l.path="".concat(nn,"/").concat(encodeURIComponent(r),"/unread_message_count"),l.params={super_mode:d??_s.ALL,custom_types:c,include_feed_channel:s},l}return U(n,t),n})(Ee),QB=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.unreadCount=r.unread_count,i.unreadFeedCount=r.unread_feed_count,i}return U(n,t),n})(Se),$B=(function(t){function n(e){var r=e.channelUrl,i=e.scheduledStatus,a=e.messageTypeFilter,s=t.call(this)||this;return s.method=ye.GET,s.path="".concat(PR,"/count"),s.params={channel_url:r,status:ZB(i)},a&&(s.params.message_type=a),s}return U(n,t),n})(Ee),XB=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.count=r.count,i}return U(n,t),n})(Se),ZB=function(t){if(!t)return[];var n=[];return t.forEach((function(e){switch(e){case lh.PENDING:n.push(Eo.PENDING);break;case lh.SENT:n.push(Eo.IN_QUEUE),n.push(Eo.SENT);break;case lh.CANCELED:n.push(Eo.CANCELED);break;case lh.FAILED:n.push(Eo.FAILED)}})),n},JB=(function(t){function n(e){var r=this,i=e.userId,a=e.channelUrl,s=e.coverUrl,l=e.coverImage,c=e.isDistinct,d=e.isSuper,p=e.isBroadcast,g=e.isPublic,_=e.isExclusive,y=e.isDiscoverable,C=e.isStrict,w=e.isEphemeral,A=e.accessCode,M=e.name,I=e.data,D=e.customType,P=e.messageSurvivalSeconds,H=e.invitedUserIds,L=e.operatorUserIds;return(r=t.call(this)||this).method=ye.POST,r.path=Ta,r.params=Le({user_ids:Je([i],Ye(H??[]),!1).filter((function(G,Y,F){return Y===F.indexOf(G)})),channel_url:a,cover_url:s,cover_file:l,is_distinct:c,is_super:d,is_broadcast:p,is_exclusive:_,is_public:g,is_discoverable:y,strict:C,is_ephemeral:w,access_code:A,name:M,data:I,custom_type:D,operator_ids:L,message_survival_seconds:P}),r}return U(n,t),n})(Ee),ez=(function(t){function n(e,r){var i,a=this;return(a=t.call(this,e,r)||this).channel=new Ao(e,r),a.isCreated=(i=r.is_created)===null||i===void 0||i,a}return U(n,t),n})(Se),DM=(function(t){function n(e){var r=e.userId,i=e.channelUrls,a=t.call(this)||this;return a.method=ye.PUT,a.path="".concat(nn,"/").concat(encodeURIComponent(r),"/mark_as_read_all"),a.params={channel_urls:i},a}return U(n,t),n})(Ee);(function(t){function n(){return t!==null&&t.apply(this,arguments)||this}U(n,t)})(Se);var tz=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.userId,s=e.accessCode;return(r=t.call(this)||this).method=ye.PUT,r.path="".concat(Ta,"/").concat(encodeURIComponent(i),"/join"),r.params={user_id:a,access_code:s},r}return U(n,t),n})(Ee),nz=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.channel=new Ao(e,r),i}return U(n,t),n})(Se),rz=(function(t){function n(e,r,i){var a=t.call(this,e,r,i)||this,s=i.data,l=s.member_count,c=l===void 0?0:l,d=s.joined_member_count,p=d===void 0?0:d,g=s.users,_=g===void 0?null:g;return a.memberCount=c,a.joinedMemberCount=p,a.members=Array.isArray(_)?_.map((function(y){return new Co(e,y)})):[new Co(e,i.data)],a}return U(n,t),n})($c),iz=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.userId,s=e.shouldRemoveOperatorStatus;return(r=t.call(this)||this).method=ye.PUT,r.path="".concat(Ta,"/").concat(encodeURIComponent(i),"/leave"),r.params={user_id:a,should_remove_operator_status:s},r}return U(n,t),n})(Ee);(function(t){function n(e,r){return t.call(this,e,r)||this}U(n,t)})(Se);var az=(function(t){function n(e,r,i){var a=t.call(this,e,r,i)||this,s=i.data,l=s.member_count,c=l===void 0?0:l,d=s.joined_member_count,p=d===void 0?0:d;return a.memberCount=c,a.joinedMemberCount=p,a.member=new Co(a._iid,i.data),a}return U(n,t),n})($c),sz=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.userIds;return(r=t.call(this)||this).method=ye.POST,r.path="".concat(Ta,"/").concat(encodeURIComponent(i),"/invite"),r.params={user_ids:a},r}return U(n,t),n})(Ee),oz=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.channel=new Ao(e,r),i}return U(n,t),n})(Se),lz=(function(t){function n(e,r,i){var a=t.call(this,e,r,i)||this;a.inviter=null;var s=i.data,l=s.member_count,c=l===void 0?0:l,d=s.joined_member_count,p=d===void 0?0:d,g=s.inviter,_=s.invitees,y=_===void 0?[]:_;return a.memberCount=c,a.joinedMemberCount=p,g&&Object.keys(g).length>0&&(a.inviter=new St(e,g)),a.invitees=y.map((function(C){return new Co(e,C)})),a}return U(n,t),n})($c),uz=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.userId;return(r=t.call(this)||this).method=ye.PUT,r.path="".concat(Ta,"/").concat(encodeURIComponent(i),"/decline"),r.params={user_id:a},r}return U(n,t),n})(Ee);(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.channel=new Ao(e,r),i.channel.myMemberState=kr.NONE,i}U(n,t)})(Se);var cz=(function(t){function n(e,r,i){var a=t.call(this,e,r,i)||this,s=i.data,l=s.member_count,c=s.joined_member_count,d=s.inviter,p=s.invitee;return a.memberCount=l??0,a.joinedMemberCount=c??0,a.inviter=new St(e,d),a.invitee=new Co(e,p),a}return U(n,t),n})($c),MN={hidePreviousMessages:!1,allowAutoUnhide:!0},dz=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.userId,s=e.hidePreviousMessages,l=e.allowAutoUnhide;return(r=t.call(this)||this).method=ye.PUT,r.path="".concat(Ta,"/").concat(encodeURIComponent(i),"/hide"),r.params={user_id:a,hide_previous_messages:s??MN.hidePreviousMessages,allow_auto_unhide:l??MN.allowAutoUnhide},r}return U(n,t),n})(Ee),hz=(function(t){function n(e,r){var i=t.call(this,e,r)||this,a=r.ts_message_offset;return i.messageOffsetTimestamp=a,i}return U(n,t),n})(Se),fz=(function(t){function n(e,r,i){var a,s,l,c=this;return(c=t.call(this,e,"SYEV",i)||this).allowAutoUnhide=null,c.hidePreviousMessages=null,c.messageOffsetTimestamp=null,i.data&&(c.allowAutoUnhide=(a=i.data.allow_auto_unhide)!==null&&a!==void 0?a:null,c.hidePreviousMessages=(s=i.data.hide_previous_messages)!==null&&s!==void 0?s:null),c.messageOffsetTimestamp=(l=i.ts_message_offset)!==null&&l!==void 0?l:null,c}return U(n,t),n})(Xn),pz=(function(t){function n(e){var r=e.channelUrl,i=e.time;return t.call(this,{code:"TPST",ackRequired:!1,payload:{channel_url:r,time:i}})||this}return U(n,t),n})(na),mz=(function(t){function n(e,r,i){var a=t.call(this,e,"SYEV",i)||this;return a.user=new St(e,i.data),a}return U(n,t),n})(Xn),gz=(function(t){function n(e){var r=e.channelUrl,i=e.time;return t.call(this,{code:"TPEN",ackRequired:!1,payload:{channel_url:r,time:i}})||this}return U(n,t),n})(na),vz=(function(t){function n(e,r,i){var a=t.call(this,e,"SYEV",i)||this;return a.user=new St(e,i.data),a}return U(n,t),n})(Xn),_z=(function(t){function n(e){var r=e.channelUrl,i=e.messageId;return t.call(this,{code:"MACK",ackRequired:!1,payload:{channel_url:r,msg_id:i}})||this}return U(n,t),n})(na),Ax=(function(t){function n(e,r){var i,a,s,l,c,d,p,g,_,y,C,w,A,M,I,D,P,H,L,G,Y,F,ne,J=this;return(J=t.call(this,e,r)||this).includeEmpty=!1,J.includeFrozen=!0,J.includeMetaData=!0,J.includeChatNotification=!1,J.channelUrlsFilter=null,J.customTypesFilter=null,J.customTypeStartsWithFilter=null,J.nicknameContainsFilter=null,J.nicknameStartsWithFilter=null,J.nicknameExactMatchFilter=null,J.channelNameContainsFilter="",J.myMemberStateFilter=ms.ALL,J.unreadChannelFilter=ph.ALL,J.superChannelFilter=_s.ALL,J.publicChannelFilter=Vu.ALL,J.hiddenChannelFilter=Xo.UNHIDDEN,J.searchFilter={fields:[],query:null},J.userIdsFilter={userIds:[],includeMode:!0,queryType:Lc.AND},J.metadataKey=null,J.metadataValues=null,J.metadataOrderKeyFilter=null,J.metadataValueStartsWith=null,J.order=Tr.LATEST_LAST_MESSAGE,J.includeEmpty=(i=r.includeEmpty)!==null&&i!==void 0&&i,J.includeFrozen=(a=r.includeFrozen)===null||a===void 0||a,J.includeMetaData=(s=r.includeMetaData)===null||s===void 0||s,J.includeChatNotification=(l=r.includeChatNotification)!==null&&l!==void 0&&l,J.channelUrlsFilter=(c=r.channelUrlsFilter)!==null&&c!==void 0?c:null,J.customTypesFilter=(d=r.customTypesFilter)!==null&&d!==void 0?d:null,J.customTypeStartsWithFilter=(p=r.customTypeStartsWithFilter)!==null&&p!==void 0?p:"",J.nicknameContainsFilter=(g=r.nicknameContainsFilter)!==null&&g!==void 0?g:null,J.nicknameStartsWithFilter=(_=r.nicknameStartsWithFilter)!==null&&_!==void 0?_:null,J.nicknameExactMatchFilter=(y=r.nicknameExactMatchFilter)!==null&&y!==void 0?y:null,J.channelNameContainsFilter=(C=r.channelNameContainsFilter)!==null&&C!==void 0?C:"",J.myMemberStateFilter=(w=r.myMemberStateFilter)!==null&&w!==void 0?w:ms.ALL,J.unreadChannelFilter=(A=r.unreadChannelFilter)!==null&&A!==void 0?A:ph.ALL,J.superChannelFilter=(M=r.superChannelFilter)!==null&&M!==void 0?M:_s.ALL,J.publicChannelFilter=(I=r.publicChannelFilter)!==null&&I!==void 0?I:Vu.ALL,J.hiddenChannelFilter=(D=r.hiddenChannelFilter)!==null&&D!==void 0?D:Xo.UNHIDDEN,J.searchFilter=(P=r.searchFilter)!==null&&P!==void 0?P:{fields:[],query:null},J.userIdsFilter=(H=r.userIdsFilter)!==null&&H!==void 0?H:{userIds:[],includeMode:!0,queryType:Lc.AND},J.metadataKey=(L=r.metadataKey)!==null&&L!==void 0?L:null,J.metadataValues=(G=r.metadataValues)!==null&&G!==void 0?G:null,J.metadataOrderKeyFilter=(Y=r.metadataOrderKeyFilter)!==null&&Y!==void 0?Y:null,J.metadataValueStartsWith=(F=r.metadataValueStartsWith)!==null&&F!==void 0?F:null,J.order=(ne=r.order)!==null&&ne!==void 0?ne:Tr.LATEST_LAST_MESSAGE,r.createdAfter&&(J.createdAfter=r.createdAfter),r.createdBefore&&(J.createdBefore=r.createdBefore),J}return U(n,t),n.prototype._validate=function(){return t.prototype._validate.call(this)&&Q("boolean",this.includeEmpty)&&Q("boolean",this.includeFrozen)&&Q("boolean",this.includeMetaData)&&Q("string",this.channelNameContainsFilter)&&Tt("string",this.channelUrlsFilter,!0)&&Tt("string",this.customTypesFilter,!0)&&Q("string",this.customTypeStartsWithFilter)&&Q("string",this.nicknameContainsFilter,!0)&&Q("string",this.nicknameStartsWithFilter,!0)&&Q("string",this.nicknameExactMatchFilter,!0)&&Nt(ms,this.myMemberStateFilter)&&Nt(_s,this.superChannelFilter)&&Nt(Vu,this.publicChannelFilter)&&Nt(ph,this.unreadChannelFilter)&&Nt(Xo,this.hiddenChannelFilter)&&Tt(D0,this.searchFilter.fields)&&Q("string",this.searchFilter.query,!0)&&Tt("string",this.userIdsFilter.userIds)&&Q("boolean",this.userIdsFilter.includeMode)&&Nt(Lc,this.userIdsFilter.queryType)&&Nt(Tr,this.order)&&Q("string",this.metadataOrderKeyFilter,!0)&&Q("string",this.metadataKey,!0)&&Tt("string",this.metadataValues,!0)&&Q("string",this.metadataValueStartsWith,!0)&&gI(this.createdAfter)&&gI(this.createdBefore)},n.prototype.serialize=function(){return kg(this)},n.prototype.next=function(){return S(this,void 0,void 0,(function(){var e,r,i;return T(this,(function(a){switch(a.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,[4,fi.of(this._iid).getMyGroupChannels(this._token,Qe(z({},this)),this.limit,ge.REQUEST_CHANNEL,!0)]):[3,2]:[3,5];case 1:return e=a.sent(),r=e.channels,i=e.token,this._token=i,this._hasNext=!!i,this._isLoading=!1,[2,r];case 2:return[2,[]];case 3:throw X.queryInProgress;case 4:return[3,6];case 5:throw X.invalidParameters;case 6:return[2]}}))}))},n})(Yc),yz=(function(t){function n(e){var r=e.channelUrl,i=e.userId,a=t.call(this)||this;return a.method=ye.PUT,a.path="".concat(Ta,"/").concat(encodeURIComponent(r),"/messages/mark_as_delivered"),a.params=Le({user_id:i}),a}return U(n,t),n})(Ee);(function(t){function n(){return t!==null&&t.apply(this,arguments)||this}U(n,t)})(Se);var ON,bz=(function(t){function n(e,r,i){var a=t.call(this,e,"DLVR",i)||this;return a.channelUrl=i.channel_url,a.deliveredStateUpdate=i.updated,a}return U(n,t),n})(Xn),Wl=(function(){function t(n){var e=n.top,r=e===void 0?Number.MAX_SAFE_INTEGER:e,i=n.bottom,a=i===void 0?0:i;this.top=r,this.bottom=a}return t.prototype.includes=function(){for(var n=this,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.every((function(i){return n.top<=i&&i<=n.bottom}))},t.prototype.overlap=function(n){return this.includes(n.top)||this.includes(n.bottom)},t.prototype.intersect=function(){for(var n=this,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.some((function(i){return n.top<=i&&i<=n.bottom}))},t.prototype.extends=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];this.top=Math.min.apply(Math,Je([this.top],Ye(n),!1)),this.bottom=Math.max.apply(Math,Je([this.bottom],Ye(n),!1))},t})(),Ll={},Ix=function(t,n){return"sendbird:".concat(t,"@groupchannel/").concat(n,"/message/sync.meta")},Ez=(function(){function t(n){var e=n._iid,r=n.channel,i=n.limit,a=i===void 0?100:i,s=this;this.ref=0,this._iid=e,this._channel=r,this._limit=a,this._prevSyncLoopCount=0;var l=W.of(this._iid),c=l.sdkState,d=l.cacheContext,p=l.dispatcher,g=l.logger,_=l.statManager,y=l.messageBackgroundSyncThrottleController;this._metadataKey=Ix(c.userId,r.url);var C,w,A=(C=c.userId,w=r.url,"sendbird:".concat(C,"@groupchannel/").concat(w,"/message/sync"));this._prevSync=new Vc(A,(function(M){return S(s,void 0,void 0,(function(){var I=this;return T(this,(function(D){switch(D.label){case 0:return[4,y.run("message-background-sync-".concat(r.url,"-prev"),(function(){return S(I,void 0,void 0,(function(){var P,H,L,G,Y,F,ne,J,re,Oe,Z,ue;return T(this,(function(q){switch(q.label){case 0:return P={hasNext:!0,nextToken:0},this._prevSyncLoopCount++,[4,this.loadMetadata()];case 1:if(q.sent(),g.debug("message background prev sync from",(F=this._metadata)===null||F===void 0?void 0:F.range.top),(ne=this._metadata)===null||ne===void 0?void 0:ne.previousComplete)return[3,10];q.label=2;case 2:return q.trys.push([2,5,8,9]),[4,gi.of(this._iid)._getMessagesByTimestampForCollection(this._channel.url,this._channel.channelType,!((re=(J=this._metadata)===null||J===void 0?void 0:J.range)===null||re===void 0)&&re.top?this._metadata.range.top:M,{prevResultSize:this._limit,nextResultSize:0,replyType:ta.ALL,includeReactions:!0,includeMetaArray:!0,includeParentMessageInfo:!0,includeThreadInfo:!0,isInclusive:!0},ge.SYNC_MESSAGE_BACKGROUND,!1,!1,Ko.INTERNAL_BACKSYNC)];case 3:return(H=q.sent().messages).length>0&&(L=H.map((function(le){return le.createdAt})),!((Oe=this._metadata)===null||Oe===void 0)&&(Y=Oe.range).intersect.apply(Y,Je([],Ye(L),!1))?this.extendRange(H):this._metadata={range:new Wl({top:Math.min.apply(Math,Je([],Ye(L),!1)),bottom:Math.max.apply(Math,Je([],Ye(L),!1))}),previousComplete:!1}),P.hasNext=H.length>=this._limit&&this._prevSyncLoopCount<1,this._metadata&&(P.nextToken=this._metadata.range.top,this._metadata.previousComplete=H.length<this._limit),g.debug("message background prev sync progress",P),[4,this.saveMetadata()];case 4:return q.sent(),[3,9];case 5:return G=q.sent(),g.debug("message background prev sync error",G),G instanceof X&&G.isInvalidTokenError?[4,this.clearMetadata()]:[3,7];case 6:q.sent(),q.label=7;case 7:throw G;case 8:return _.put(new qn({type:An.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:r.url,measured_on:"back_sync",event:"cache_fetch",max_db_size:(ue=(Z=d.localCacheConfig)===null||Z===void 0?void 0:Z.maxSize)!==null&&ue!==void 0?ue:0,use_local_cache:d.localCacheEnabled,starting_point:0,message_init_policy:""}})),[7];case 9:return[3,11];case 10:P.hasNext=!1,q.label=11;case 11:return[2,P]}}))}))}))];case 1:return[2,D.sent()]}}))}))})),this._nextSync=new Vc(A,(function(M){return S(s,void 0,void 0,(function(){var I=this;return T(this,(function(D){switch(D.label){case 0:return[4,y.run("message-background-sync-".concat(r.url,"-next"),(function(){return S(I,void 0,void 0,(function(){var P,H,L,G,Y,F,ne,J,re,Oe,Z;return T(this,(function(ue){switch(ue.label){case 0:return P={hasNext:!0,nextToken:0},[4,this.loadMetadata()];case 1:ue.sent(),g.debug("message background next sync from",(F=this._metadata)===null||F===void 0?void 0:F.range.bottom),ue.label=2;case 2:return ue.trys.push([2,5,6,7]),[4,gi.of(this._iid)._getMessagesByTimestampForCollection(this._channel.url,this._channel.channelType,!((J=(ne=this._metadata)===null||ne===void 0?void 0:ne.range)===null||J===void 0)&&J.bottom?this._metadata.range.bottom:M,{prevResultSize:0,nextResultSize:this._limit,replyType:ta.ALL,includeReactions:!0,includeMetaArray:!0,includeParentMessageInfo:!0,includeThreadInfo:!0,isInclusive:!0},ge.SYNC_MESSAGE_BACKGROUND,!1,!1,Ko.INTERNAL_BACKSYNC)];case 3:return(H=ue.sent().messages).length>0&&(L=H.map((function(q){return q.createdAt})),!((re=this._metadata)===null||re===void 0)&&(Y=re.range).intersect.apply(Y,Je([],Ye(L),!1))?this.extendRange(H):this._metadata={range:new Wl({top:Math.min.apply(Math,Je([],Ye(L),!1)),bottom:Math.max.apply(Math,Je([],Ye(L),!1))}),previousComplete:!1}),P.hasNext=H.length>=this._limit,this._metadata&&(P.nextToken=this._metadata.range.bottom),g.debug("message background next sync progress",P),[4,this.saveMetadata()];case 4:return ue.sent(),[3,7];case 5:throw G=ue.sent(),g.debug("message background next sync error",G),G;case 6:return _.put(new qn({type:An.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:r.url,measured_on:"back_sync",event:"cache_fetch",max_db_size:(Z=(Oe=d.localCacheConfig)===null||Oe===void 0?void 0:Oe.maxSize)!==null&&Z!==void 0?Z:0,use_local_cache:d.localCacheEnabled,starting_point:0,message_init_policy:""}})),[7];case 7:return[2,P]}}))}))}))];case 1:return[2,D.sent()]}}))}))})),this._connectionEventContext=p.on((function(M){M instanceof Bs&&(M.stateType===en.CONNECTED?s.resume():s.pause())}))}return t.of=function(n,e){return Ll[n]||(Ll[n]={}),Ll[n][e.url]||(Ll[n][e.url]=new t({_iid:n,channel:e})),Ll[n][e.url].ref++,Ll[n][e.url]},t.clear=function(n,e){Ll[n]&&Ll[n][e]&&(Ll[n][e].close(),delete Ll[n])},Object.defineProperty(t.prototype,"range",{get:function(){var n,e;return(e=(n=this._metadata)===null||n===void 0?void 0:n.range)!==null&&e!==void 0?e:new Wl({})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"previousComplete",{get:function(){var n;return!!(!((n=this._metadata)===null||n===void 0)&&n.previousComplete)},enumerable:!1,configurable:!0}),t.prototype.isWrappingMessages=function(n){var e;return(e=this.range)===null||e===void 0?void 0:e.includes.apply(e,Je([],Ye(n.map((function(r){return r.createdAt}))),!1))},t.prototype.extendRange=function(n){var e;this._metadata&&(e=this._metadata.range).extends.apply(e,Je([],Ye(n.map((function(r){return r.createdAt}))),!1))},t.prototype.loadMetadata=function(){return S(this,void 0,void 0,(function(){var n;return T(this,(function(e){switch(e.label){case 0:return this._metadata?[3,2]:[4,W.of(this._iid).cacheContext.preference.get(this._metadataKey)];case 1:n=e.sent(),this._metadata=n?{range:new Wl(n.range),previousComplete:n.previousComplete}:{range:new Wl({}),previousComplete:!1},e.label=2;case 2:return[2,this._metadata]}}))}))},t.prototype.saveMetadata=function(){return S(this,void 0,void 0,(function(){return T(this,(function(n){switch(n.label){case 0:return this._metadata?[4,W.of(this._iid).cacheContext.preference.set(this._metadataKey,this._metadata)]:[3,2];case 1:return n.sent(),[2,!0];case 2:return[2,!1]}}))}))},t.prototype.clearMetadata=function(){return S(this,void 0,void 0,(function(){return T(this,(function(n){switch(n.label){case 0:return[4,W.of(this._iid).cacheContext.preference.remove(this._metadataKey)];case 1:return n.sent(),this._metadata=void 0,[2]}}))}))},t.prototype.resume=function(n){var e,r,i,a;n===void 0&&(n=Date.now());var s=W.of(this._iid),l=s.logger,c=s.sessionManager;s.cacheContext.localCacheEnabled&&c.session.hasSession&&(l.debug("message background sync resume()"),this._prevSyncLoopCount=0,this._metadata&&this._metadata.previousComplete||this._prevSync.start((r=(e=this._metadata)===null||e===void 0?void 0:e.range.top)!==null&&r!==void 0?r:n),this._nextSync.start((a=(i=this._metadata)===null||i===void 0?void 0:i.range.bottom)!==null&&a!==void 0?a:n))},t.prototype.pause=function(){W.of(this._iid).logger.debug("message background sync stop()"),this._prevSync.stop(),this._nextSync.stop()},t.prototype.close=function(){this.ref--,this.ref<=0&&(this.ref=0,this.pause(),this._connectionEventContext.close(),delete Ll[this._iid][this._channel.url])},t})(),Cz=(function(){function t(n){var e=n._iid,r=n.cacheContext,i=n.groupChannelCache,a=n.messageCache,s=n.unsentMessageCache,l=n.activeChannelCount,c=l===void 0?2e3:l;this._iid=e,this._cacheContext=r,this._groupChannelCache=i,this._messageCache=a,this._unsentMessageCache=s,this.activeChannelCount=c}return t.prototype.removeChannelMessages=function(n){return S(this,void 0,void 0,(function(){return T(this,(function(e){switch(e.label){case 0:return[4,this._messageCache.removeMessagesOfChannel(n)];case 1:return e.sent(),[4,this._unsentMessageCache.removeMessagesOfChannel(n)];case 2:return e.sent(),[2]}}))}))},Object.defineProperty(t.prototype,"channelRotationEnabled",{get:function(){var n,e,r=W.of(this._iid).appInfo;return(e=(n=r?.channelRotationInfo)===null||n===void 0?void 0:n.enabled)!==null&&e!==void 0&&e},enumerable:!1,configurable:!0}),t.prototype.removeChannelsByRotation=function(){return S(this,void 0,void 0,(function(){var n,e,r,i,a,s,l,c,d=this;return T(this,(function(p){switch(p.label){case 0:return n=W.of(this._iid),e=n.appInfo,r=n.connectedAt,e?.channelRotationInfo&&e.channelRotationInfo.enabled?(i=e.channelRotationInfo,a=i.orderBy,s=i.excludeRecentHours,l=i.bufferRatio,a==="LAST_MESSAGE_TS_EXCLUDING_RECENT_JOINS"?[3,1]:[3,5]):[3,5];case 1:return[4,this._groupChannelCache.fetch({token:0,order:Tr.LATEST_LAST_MESSAGE,offset:this.activeChannelCount*l,limit:Number.MAX_SAFE_INTEGER})];case 2:return c=p.sent(),typeof s=="number"&&(c=c.filter((function(g){return 1e3*g.joinedAt<r-3600*s*1e3}))),[4,this._groupChannelCache.remove(c.map((function(g){return g.url})))];case 3:return p.sent(),[4,Promise.all(c.map((function(g){return d.removeChannelMessages(g.url)})))];case 4:return p.sent(),[3,5];case 5:return[2]}}))}))},t})(),Pf={},fi=(function(t){function n(e,r){var i,a=this;return(a=t.call(this,e,z(z({},r),{channelType:Rt.GROUP}))||this)._leftChannels=new Map,a._markAsReadAllLastSentAt=0,a._forceDisableMack=(i=r.forceDisableMack)!==null&&i!==void 0&&i,a._groupChannelHandlers=new Map,a._groupChannelCache=new RB(a._iid,{sdkState:r.sdkState,cacheContext:r.cacheContext}),a._groupChannelRotationManager=new Cz({_iid:a._iid,cacheContext:r.cacheContext,groupChannelCache:a._groupChannelCache,messageCache:a._messageCache,unsentMessageCache:a._unsentMessageCache}),a._userInfoCache=new wN(a._iid,{sdkState:r.sdkState,cacheContext:r.cacheContext}),a._groupChannelBroadcast=new LB({dispatcher:r.dispatcher,groupChannelCache:a._groupChannelCache,userInfoCache:a._userInfoCache,messageCache:lp.of(a._iid),unsentMessageCache:Ep.of(a._iid)}),setInterval((function(){var s,l,c=function(g){g.invalidateTypingStatus()&&(a._dispatcher.dispatch(new It({channels:[g],context:{source:ge.EVENT_CHANNEL_TYPING_STATUS_UPDATE}})),a._groupChannelHandlers.forEach((function(_){_.onTypingStatusUpdated&&_.onTypingStatusUpdated(g)})))};try{for(var d=Re(a._groupChannelCache.channels),p=d.next();!p.done;p=d.next())c(p.value)}catch(g){s={error:g}}finally{try{p&&!p.done&&(l=d.return)&&l.call(d)}finally{if(s)throw s.error}}}),1e3),a._dispatcher.on((function(s){if(s instanceof Xn)a._handleEvent(s).catch((function(p){if(Ca(p)&&a._sdkState.appState==="foreground")throw p}));else if(s instanceof ox)S(a,void 0,void 0,(function(){var p,g;return T(this,(function(_){switch(_.label){case 0:return p=s.message,[4,this.getChannelFromCache(p.channelUrl)];case 1:return(g=_.sent())&&!g.isFrozen?[3,3]:[4,this.getChannelWithoutCache(p.channelUrl,!0)];case 2:g=_.sent(),_.label=3;case 3:return g.isFrozen||(p instanceof Ji?g._autoResendUserMessage(p):p instanceof Xr&&g._autoResendFileMessage(p)),[2]}}))}));else if(s instanceof ux)a.reduceDBSize();else if(s instanceof hx){var l=s.appConfigsInfo,c=s.configTs,d=l.message_purge_offset;d&&a._messageDataRetention(d),a._dispatcher.dispatch(new cx({configTs:c}))}else s instanceof UD?S(a,void 0,void 0,(function(){var p,g,_,y,C,w=this;return T(this,(function(A){switch(A.label){case 0:return p=s.channelUrl,g=s.channelType,_=s.parentMessage,y=new sx(this._iid,{channel_type:Rt.GROUP,channel_url:p,parent_message_id:_.messageId,thread_info:v1.payloadify(_.threadInfo)}),g!==Rt.GROUP?[3,2]:[4,this.getChannel(p,!0)];case 1:C=A.sent(),$e((function(){return S(w,void 0,void 0,(function(){var M,I,D,P,H;return T(this,(function(L){try{for(M=Re(this._groupChannelHandlers.values()),I=M.next();!I.done;I=M.next())(D=I.value).onThreadInfoUpdated&&D.onThreadInfoUpdated(C,y)}catch(G){P={error:G}}finally{try{I&&!I.done&&(H=M.return)&&H.call(M)}finally{if(P)throw P.error}}return[2]}))}))})),A.label=2;case 2:return[2]}}))})):s instanceof Sx?S(a,void 0,void 0,(function(){var p;return T(this,(function(g){switch(g.label){case 0:return p=s.channel,[4,this._groupChannelCache.upsert([p])];case 1:return g.sent(),[2]}}))})):s instanceof lD&&S(a,void 0,void 0,(function(){return T(this,(function(p){switch(p.label){case 0:return[4,this._expandMessageChunk(s)];case 1:return p.sent(),[2]}}))}))})),Pf[e]||(Pf[e]=a),a}return U(n,t),Object.defineProperty(n.prototype,"_messageCache",{get:function(){return lp.of(this._iid)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_unsentMessageCache",{get:function(){return Ep.of(this._iid)},enumerable:!1,configurable:!0}),n.of=function(e){return Pf[e]||(Pf[e]=new n(e,W.of(e))),Pf[e]},n.clear=function(e){Pf[e]&&delete Pf[e]},Object.defineProperty(n.prototype,"handlers",{get:function(){return Je([],Ye(this._groupChannelHandlers.values()),!1)},enumerable:!1,configurable:!0}),n.prototype.buildGroupChannelFromSerializedData=function(e){var r=Uc(e);return new Ao(this._iid,Ao.payloadify(r))},n.prototype.buildGroupChannelListQueryFromSerializedData=function(e){var r=Uc(e);return new Ax(this._iid,r)},n.prototype.buildMemberFromSerializedData=function(e){var r=Uc(e);return new Co(this._iid,Co.payloadify(r))},n.prototype.getChannelFromCache=function(e){var r;return S(this,void 0,void 0,(function(){return T(this,(function(i){switch(i.label){case 0:return[4,this._groupChannelCache.get(e)];case 1:return[2,(r=i.sent())!==null&&r!==void 0?r:null]}}))}))},n.prototype.getChannelsFromCache=function(e,r,i,a,s){return S(this,void 0,void 0,(function(){return T(this,(function(l){switch(l.label){case 0:return[4,this._groupChannelCache.fetch({token:e,filter:r,order:i,limit:a,borderlineChannelUrl:s})];case 1:return[2,l.sent()]}}))}))},n.prototype.upsertChannelsToCache=function(e){return S(this,void 0,void 0,(function(){return T(this,(function(r){switch(r.label){case 0:return[4,this._groupChannelCache.upsert(e)];case 1:return[2,r.sent()]}}))}))},n.prototype.removeChannelsFromCache=function(e){return S(this,void 0,void 0,(function(){return T(this,(function(r){switch(r.label){case 0:return[4,this._groupChannelCache.remove(e)];case 1:return r.sent(),[2]}}))}))},n.prototype.clearChannelsFromCache=function(){return S(this,void 0,void 0,(function(){return T(this,(function(e){switch(e.label){case 0:return[4,this._groupChannelCache.clear()];case 1:return e.sent(),[2]}}))}))},n.prototype.removeChannelsByRotation=function(){return S(this,void 0,void 0,(function(){return T(this,(function(e){switch(e.label){case 0:return[4,this._groupChannelRotationManager.removeChannelsByRotation()];case 1:return e.sent(),[2]}}))}))},n.prototype.reduceDBSize=function(){return S(this,void 0,void 0,(function(){var e,r,i,a,s,l,c,d,p,g,_,y,C,w,A;return T(this,(function(M){switch(M.label){case 0:return e=lp.of(this._iid),r=W.of(this._iid).cacheContext,i=r.localCacheConfig,a=r.nestdb,r.localCacheEnabled&&a&&a.state==ql.OPENED?(s=1024*i.maxSize*1024,[4,a.estimateUsage()]):[2];case 1:if((l=M.sent())<s)return[2];c=[],d=this._groupChannelCache.channels,p={},C=0,M.label=2;case 2:return C<d.length?[4,this.getMessagesFromCache(d[C].url,0,"prev",new vh)]:[3,5];case 3:g=M.sent(),p[d[C].url]=JSON.stringify(g).length,_=new F9({channel:d[C],cachedMessageCount:g.length}),c.push(_),M.label=4;case 4:return C++,[3,2];case 5:y=c.sort(i.clearOrderComparator),C=0,M.label=6;case 6:return C<y.length?[4,e.removeMessagesOfChannel(y[C].channel.url)]:[3,10];case 7:return M.sent(),[4,e._getGroupChannelPreferenceSize(y[C].channel.url)];case 8:if(w=M.sent(),A=p[y[C].channel.url]+w,(l-=A)<s)return[3,10];M.label=9;case 9:return C++,[3,6];case 10:return[4,wN.of(this._iid).clear()];case 11:return M.sent(),[2]}}))}))},n.prototype._messageDataRetention=function(e){var r;return S(this,void 0,void 0,(function(){var i,a,s,l,c,d,p,g,_,y,C=this;return T(this,(function(w){switch(w.label){case 0:i=[],a=lp.of(this._iid),s=function(A){var M,I;return T(this,(function(D){switch(D.label){case 0:return M=A.customType,I=(r=e[M])!==null&&r!==void 0?r:e.global,[4,a.removeUnderOffset(A.url,I,!0)];case 1:return D.sent(),A.lastMessage&&A.lastMessage.createdAt<=I&&(A.lastMessage=null,i.push(A),$e((function(){return S(C,void 0,void 0,(function(){var P,H,L,G,Y;return T(this,(function(F){try{for(P=Re(this._groupChannelHandlers.values()),H=P.next();!H.done;H=P.next())(L=H.value).onChannelChanged&&L.onChannelChanged(A)}catch(ne){G={error:ne}}finally{try{H&&!H.done&&(Y=P.return)&&Y.call(P)}finally{if(G)throw G.error}}return[2]}))}))}))),l._dispatcher.dispatch(new bD({channelUrl:A.url,messageDeletionTimestamp:I,source:ge.EVENT_MESSAGE_OFFSET_UPDATED})),[2]}}))},l=this,w.label=1;case 1:w.trys.push([1,6,7,8]),c=Re(this._groupChannelCache.channels),d=c.next(),w.label=2;case 2:return d.done?[3,5]:(p=d.value,[5,s(p)]);case 3:w.sent(),w.label=4;case 4:return d=c.next(),[3,2];case 5:return[3,8];case 6:return g=w.sent(),_={error:g},[3,8];case 7:try{d&&!d.done&&(y=c.return)&&y.call(c)}finally{if(_)throw _.error}return[7];case 8:return i.length>0&&this._dispatcher.dispatch(new It({channels:i,context:{source:ge.EVENT_CHANNEL_UPDATED}})),[2]}}))}))},n.prototype._expandMessageChunk=function(e){var r;return S(this,void 0,void 0,(function(){var i,a,s,l,c,d,p,g;return T(this,(function(_){switch(_.label){case 0:return i=W.of(this._iid).cacheContext,a=e.previousMessageId,s=e.messageCreatedAt,l=e.channelUrl,i.localCacheEnabled&&((r=i.nestdb)===null||r===void 0?void 0:r.state)===ql.OPENED&&a?[4,this.getMessageFromCache(a)]:[2];case 1:return c=_.sent(),d=Ix(this._sdkState.userId,l),[4,i.preference.get(d)];case 2:return(p=_.sent())?[3,5]:c?(g={range:new Wl({top:c.createdAt,bottom:s}),previousComplete:!1},[4,i.preference.set(d,g)]):[3,4];case 3:_.sent(),_.label=4;case 4:return[3,7];case 5:return c&&p.range.includes(c.createdAt)?(p.range.extends(c.createdAt,s),[4,i.preference.set(d,p)]):[3,7];case 6:_.sent(),_.label=7;case 7:return[2]}}))}))},n.prototype._isSuperGroupMackDisabled=function(e){var r=W.of(this._iid).appInfo;return!(!e.isSuper||e.isBroadcast||!r?.disableSuperGroupMack)},n.prototype._getCachedUserInfo=function(e){return this._userInfoCache.getUserInfoFromCache(e)},n.prototype._upsertCachedUserInfo=function(e,r){W.of(this._iid).useMemberInfoInMessage&&this._userInfoCache.upsert(e,r)},n.prototype._handleEvent=function(e){var r,i;return S(this,void 0,void 0,(function(){var a,s,l,c,d,p,g,_,y,C,w,A,M,I,D,P,H,L,G,Y,F,ne,J,re,Oe,Z,ue,q,le,pe,Pe,qe,$,fe,Ie,We,Ne,He,tt,At,bt,vr,wn,Rn,xn,Zt,Pn,Zn,fn,_r,jn,Un,gt,Dn,Cr,gn,rr,Lt,Wn,cr,dn,ti,_i,Sr,Dr,Kn,Yn,Jt,Lr,aa,Mt,Dt,vt,Ze,Ae,Et,_t,yt,Gn,xt,zi,sa,yi,qs,Cs,qi,Wi,rt,Ct,ct,Ot,ht,Vt,Nn,ni,Fr,Ar,ee,Xe,Be,Pt,hn,Kt,ln,Ir,Hr,Br,Ln,oa,Ws,Io,Ku,Ks,zr,la,bi,Zl,Yu,ul,Ys,Mo,Jl,xi,ws,cl,Qu,Qs,eu,dl,ua,Aa,tu,Oo,Ns,ko,Ro,Do,ca,hl,fl,Pi,$s,Ch,ed,wh,wr,Ka,$u,pl,Ya,nu,Vn,Qn,Xu,ru,Nh,Mi,xo,iu,ml,Th,qr,gl,Ia,vl,Zu,Ki,Sh,td,Ju,nd,Ah,pn=this;return T(this,(function(ot){switch(ot.label){case 0:switch(ot.trys.push([0,88,,89]),e.code){case"MESG":case"FILE":case"ADMM":case"BRDM":return[3,1];case"MEDI":case"FEDI":case"AEDI":return[3,4];case"DELM":return[3,7];case"READ":return[3,10];case"DLVR":return[3,13];case"MRCT":return[3,15];case"MTHD":return[3,27];case"MCNT":return[3,31];case"PEDI":return[3,40];case"VOTE":return[3,43];case"SYEV":return[3,46];case"USEV":return[3,86]}return[3,87];case 1:return y=null,e.code==="MESG"?y=e.as(fS):e.code==="FILE"?y=e.as(lS):e.code!=="ADMM"&&e.code!="BRDM"||(y=e.as(gx)),y?(a=y.message,s=y.isMentioned,l=y.forceUpdateLastMessage,a.channelType!==Rt.GROUP?[3,3]:(He=this._groupChannelCache.isCachedInMemory(a.channelUrl),Z=a instanceof Rr&&a.sender.userId===this._sdkState.userId,[4,this.getChannel(a.channelUrl,!0)])):[3,3];case 2:if(c=ot.sent(),d=W.of(this._iid),M=d.useMemberInfoInMessage,wr=d.requestDeduplicator,this._forceDisableMack||this._isSuperGroupMackDisabled(c)||a instanceof _p||Z||gr((function(){return S(pn,void 0,void 0,(function(){var Ce;return T(this,(function(ce){switch(ce.label){case 0:return Ce=new _z(a),[4,this._requestQueue.send(Ce)];case 1:return ce.sent(),[2]}}))}))})),a instanceof Rr){p=a.sender,c.isSuper&&this._upsertCachedUserInfo(p,a.createdAt);try{for(g=Re(c.members),_=g.next();!_.done;_=g.next())if((zr=_.value).userId===a.sender.userId){M&&(zr.nickname=a.sender.nickname,zr.plainProfileUrl=a.sender.plainProfileUrl,zr.metaData=a.sender.metaData,zr.isBlockedByMe=a.sender.isBlockedByMe);break}}catch(Ce){Qn={error:Ce}}finally{try{_&&!_.done&&(Xu=g.return)&&Xu.call(g)}finally{if(Qn)throw Qn.error}}M&&s&&((r=a.mentionedUsers)===null||r===void 0||r.forEach((function(Ce){var ce,ft;try{for(var at=Re(c.members),dt=at.next();!dt.done;dt=at.next()){var Jn=dt.value;if(Ce.userId===Jn.userId){Jn.nickname=Ce.nickname,Jn.plainProfileUrl=Ce.plainProfileUrl,Jn.metaData=Ce.metaData;break}}}catch(mn){ce={error:mn}}finally{try{dt&&!dt.done&&(ft=at.return)&&ft.call(at)}finally{if(ce)throw ce.error}}}))),Z&&(L=this._sessionManager.currentUser)&&(L.nickname=a.sender.nickname,L.plainProfileUrl=a.sender.plainProfileUrl,L.metaData=a.sender.metaData)}a.silent&&!Z||(c.isEphemeral||He)&&(c._updateLastMessage(a),Z||c._shouldUpdateUnreadCountWith(a)&&c._updateUnreadCount(c.unreadMessageCount+1,c.unreadMentionCount+(s?1:0))),l&&c._updateLastMessage(a),wr.updatePendingResponse(c,Date.now()),this._dispatcher.dispatch(new It({channels:[c],context:{source:ge.EVENT_MESSAGE_RECEIVED}})),a.silent&&!Z||$e((function(){return S(pn,void 0,void 0,(function(){var Ce,ce,ft,at,dt;return T(this,(function(Jn){try{for(Ce=Re(this._groupChannelHandlers.values()),ce=Ce.next();!ce.done;ce=Ce.next())(ft=ce.value).onChannelChanged&&ft.onChannelChanged(c)}catch(mn){at={error:mn}}finally{try{ce&&!ce.done&&(dt=Ce.return)&&dt.call(Ce)}finally{if(at)throw at.error}}return[2]}))}))})),this._dispatcher.dispatch(new lr({messages:[a],source:ge.EVENT_MESSAGE_RECEIVED})),$e((function(){return S(pn,void 0,void 0,(function(){var Ce,ce,ft,at,dt;return T(this,(function(Jn){try{for(Ce=Re(this._groupChannelHandlers.values()),ce=Ce.next();!ce.done;ce=Ce.next())(ft=ce.value).onMessageReceived&&ft.onMessageReceived(c,a),s&&ft.onMentionReceived&&ft.onMentionReceived(c,a)}catch(mn){at={error:mn}}finally{try{ce&&!ce.done&&(dt=Ce.return)&&dt.call(Ce)}finally{if(at)throw at.error}}return[2]}))}))})),ot.label=3;case 3:return[3,87];case 4:return y=null,e.code==="MEDI"?y=e.as(_1):e.code==="FEDI"?y=e.as(y1):e.code==="AEDI"&&(y=e.as(vx)),y?(C=y.message,w=y.mentionCountChange,A=W.of(this._iid),M=A.useMemberInfoInMessage,wr=A.requestDeduplicator,C.threadInfo&&(C.threadInfo.unreadReplyCount=void 0),C.channelType!==Rt.GROUP?[3,6]:(He=this._groupChannelCache.isCachedInMemory(C.channelUrl),[4,this.getChannel(C.channelUrl,!0)])):[3,6];case 5:if(I=ot.sent(),Z=!1,C instanceof Rr){Z=C.sender.userId===this._sdkState.userId,I.isSuper&&this._upsertCachedUserInfo(C.sender,C.updatedAt);try{for(D=Re(I.members),P=D.next();!P.done;P=D.next())if((zr=P.value).userId===C.sender.userId){M&&(zr.nickname=C.sender.nickname,zr.plainProfileUrl=C.sender.plainProfileUrl,zr.metaData=C.sender.metaData,zr.isBlockedByMe=C.sender.isBlockedByMe);break}}catch(Ce){ru={error:Ce}}finally{try{P&&!P.done&&(Nh=D.return)&&Nh.call(D)}finally{if(ru)throw ru.error}}}fe=!1,Z?(H=C.sender,(L=this._sessionManager.currentUser)&&(L.nickname=H.nickname,L.plainProfileUrl=H.plainProfileUrl,L.metaData=H.metaData)):I.isReadMessage(C)||w!==0&&!C.silent&&He&&(I._updateUnreadCount(I.unreadMessageCount,I.unreadMentionCount+w),fe=!0),I._updateLastMessage(C)?fe=!0:!((i=I.lastMessage)===null||i===void 0)&&i.isIdentical(C)&&(He?I._updateLastMessage(C)&&(fe=!0):fe=!0),G=!1,I.lastPinnedMessage&&I.lastPinnedMessage.messageId===C.messageId&&(I.lastPinnedMessage=C,fe=!0,G=!0),fe&&(wr.updatePendingResponse(I,Date.now()),this._dispatcher.dispatch(new It({channels:[I],context:{source:G?ge.EVENT_PINNED_MESSAGE_UPDATED:ge.EVENT_MESSAGE_UPDATED}})),C.silent&&!Z||$e((function(){return S(pn,void 0,void 0,(function(){var Ce,ce,ft,at,dt;return T(this,(function(Jn){try{for(Ce=Re(this._groupChannelHandlers.values()),ce=Ce.next();!ce.done;ce=Ce.next())(ft=ce.value).onChannelChanged&&ft.onChannelChanged(I)}catch(mn){at={error:mn}}finally{try{ce&&!ce.done&&(dt=Ce.return)&&dt.call(Ce)}finally{if(at)throw at.error}}return[2]}))}))})),G&&$e((function(){return S(pn,void 0,void 0,(function(){var Ce,ce,ft,at,dt;return T(this,(function(Jn){try{for(Ce=Re(this._groupChannelHandlers.values()),ce=Ce.next();!ce.done;ce=Ce.next())(ft=ce.value).onPinnedMessageUpdated&&ft.onPinnedMessageUpdated(I)}catch(mn){at={error:mn}}finally{try{ce&&!ce.done&&(dt=Ce.return)&&dt.call(Ce)}finally{if(at)throw at.error}}return[2]}))}))}))),this._dispatcher.dispatch(new lr({messages:[C],source:ge.EVENT_MESSAGE_UPDATED})),$e((function(){return S(pn,void 0,void 0,(function(){var Ce,ce,ft,at,dt;return T(this,(function(Jn){try{for(Ce=Re(this._groupChannelHandlers.values()),ce=Ce.next();!ce.done;ce=Ce.next())(ft=ce.value).onMessageUpdated&&ft.onMessageUpdated(I,C),w>0&&ft.onMentionReceived&&ft.onMentionReceived(I,C)}catch(mn){at={error:mn}}finally{try{ce&&!ce.done&&(dt=Ce.return)&&dt.call(Ce)}finally{if(at)throw at.error}}return[2]}))}))})),ot.label=6;case 6:return[3,87];case 7:return Y=e.as(GR),Jt=Y.channelUrl,Lr=Y.channelType,F=Y.messageId,ne=Y.silent,J=Y.messageCreatedAt,re=Y.senderId,Lr!==Rt.GROUP?[3,9]:[4,this.getChannel(Jt,!0)];case 8:Oe=ot.sent(),Z=re===this._sdkState.userId,ne||Z||J>0&&Oe.myLastRead<J&&Oe.unreadMessageCount>0&&(Oe._updateUnreadCount(Oe.unreadMessageCount-1,0),(wr=W.of(this._iid).requestDeduplicator).updatePendingResponse(Oe,Date.now())),this._dispatcher.dispatch(new aS({messageIds:[F],source:ge.EVENT_MESSAGE_DELETED})),$e((function(){return S(pn,void 0,void 0,(function(){var Ce,ce,ft,at,dt;return T(this,(function(Jn){try{for(Ce=Re(this._groupChannelHandlers.values()),ce=Ce.next();!ce.done;ce=Ce.next())(ft=ce.value).onMessageDeleted&&ft.onMessageDeleted(Oe,F)}catch(mn){at={error:mn}}finally{try{ce&&!ce.done&&(dt=Ce.return)&&dt.call(Ce)}finally{if(at)throw at.error}}return[2]}))}))})),ot.label=9;case 9:return[3,87];case 10:return(ue=e.as(PD).readStatus).channelType!==Rt.GROUP?[3,12]:(He=this._groupChannelCache.isCachedInMemory(ue.channelUrl),[4,this.getChannel(ue.channelUrl,!0)]);case 11:if(q=ot.sent(),le=ue.reader.userId===this._sdkState.userId,pe=!0,He&&(pe=q._updateUnreadMemberState(ue.reader.userId,ue.readAt,ue.isExcluded)),ue.isExcluded){if(pe){try{for(Pe=Re(this._groupChannelHandlers.values()),qe=Pe.next();!qe.done;qe=Pe.next())($=qe.value).onUserMarkedUnread!==it?$.onUserMarkedUnread(q,[ue.reader.userId]):$.onUnreadMemberStatusUpdated&&$.onUnreadMemberStatusUpdated(q)}catch(Ce){Mi={error:Ce}}finally{try{qe&&!qe.done&&(xo=Pe.return)&&xo.call(Pe)}finally{if(Mi)throw Mi.error}}this._dispatcher.dispatch(new It({channels:[q],context:{source:ge.EVENT_CHANNEL_UNREAD,userIds:[ue.reader.userId]}}))}}else fe=!0,le&&(He?q.unreadMentionCount>0||q.unreadMessageCount>0?q._updateUnreadCount(0,0):fe=!1:q.unreadMessageCount!==0&&q.unreadMentionCount!==0&&(fe=!1)),fe&&(this._dispatcher.dispatch(new It({channels:[q],context:{source:pe?ge.EVENT_CHANNEL_READ:ge.EVENT_CHANNEL_UPDATED,userIds:[ue.reader.userId]}})),$e((function(){return S(pn,void 0,void 0,(function(){var Ce,ce,ft,at,dt;return T(this,(function(Jn){try{for(Ce=Re(this._groupChannelHandlers.values()),ce=Ce.next();!ce.done;ce=Ce.next())ft=ce.value,le?ft.onChannelChanged!==it&&ft.onChannelChanged(q):pe&&(ft.onUserMarkedRead!==it?ft.onUserMarkedRead(q,[ue.reader.userId]):ft.onUnreadMemberStatusUpdated!==it&&ft.onUnreadMemberStatusUpdated(q))}catch(mn){at={error:mn}}finally{try{ce&&!ce.done&&(dt=Ce.return)&&dt.call(Ce)}finally{if(at)throw at.error}}return[2]}))}))})));ot.label=12;case 12:return[3,87];case 13:return Ie=e.as(bz),Jt=Ie.channelUrl,We=Ie.deliveredStateUpdate,Ne=We===void 0?{}:We,He=this._groupChannelCache.isCachedInMemory(Jt),[4,this.getChannel(Jt,!0)];case 14:return tt=ot.sent(),He&&Object.keys(Ne).forEach((function(Ce){tt._updateUndeliveredMemberState(Ce,Ne[Ce])})),Object.keys(Ne).some((function(Ce){return Ce!==pn._sdkState.userId}))&&(this._dispatcher.dispatch(new It({channels:[tt],context:{source:ge.EVENT_CHANNEL_DELIVERED}})),$e((function(){return S(pn,void 0,void 0,(function(){var Ce,ce,ft,at,dt;return T(this,(function(Jn){try{for(Ce=Re(this._groupChannelHandlers.values()),ce=Ce.next();!ce.done;ce=Ce.next())(ft=ce.value).onUndeliveredMemberStatusUpdated&&ft.onUndeliveredMemberStatusUpdated(tt)}catch(mn){at={error:mn}}finally{try{ce&&!ce.done&&(dt=Ce.return)&&dt.call(Ce)}finally{if(at)throw at.error}}return[2]}))}))}))),[3,87];case 15:return At=e.as(_x),Jt=At.channelUrl,Lr=At.channelType,bt=At.event,Lr!==Rt.GROUP?[3,26]:[4,this.getChannel(Jt,!0)];case 16:return vr=ot.sent(),[4,this.getMessageFromCache(bt.messageId)];case 17:if(jn=ot.sent(),!vr.isSuper)return[3,25];ot.label=18;case 18:ot.trys.push([18,23,24,25]),wn=Re(Object.keys(bt._sampledUserInfoList)),Rn=wn.next(),ot.label=19;case 19:return Rn.done?[3,22]:(xn=Rn.value,[4,this._userInfoCache.get(xn)]);case 20:(Zt=ot.sent())?(Zt.plainProfileUrl=bt._sampledUserInfoList[xn].profile_url,Zt.nickname=bt._sampledUserInfoList[xn].nickname,this._upsertCachedUserInfo(Zt,bt.updatedAt)):(Pn=new St(this._iid,{user_id:xn,nickname:bt._sampledUserInfoList[xn].nickname,profile_url:bt._sampledUserInfoList[xn].profile_url,require_auth_for_profile_image:bt._sampledUserInfoList[xn].require_auth_for_profile_image}),this._upsertCachedUserInfo(Pn,bt.updatedAt)),ot.label=21;case 21:return Rn=wn.next(),[3,19];case 22:return[3,25];case 23:return Zn=ot.sent(),iu={error:Zn},[3,25];case 24:try{Rn&&!Rn.done&&(ml=wn.return)&&ml.call(wn)}finally{if(iu)throw iu.error}return[7];case 25:jn?jn instanceof ba&&(jn.applyReactionEvent(bt),this._dispatcher.dispatch(new lr({messages:[jn],source:ge.EVENT_MESSAGE_REACTION_UPDATED}))):this._dispatcher.dispatch(new ED({event:bt,source:ge.EVENT_MESSAGE_REACTION_UPDATED})),$e((function(){return S(pn,void 0,void 0,(function(){var Ce,ce,ft,at,dt;return T(this,(function(Jn){try{for(Ce=Re(this._groupChannelHandlers.values()),ce=Ce.next();!ce.done;ce=Ce.next())(ft=ce.value).onReactionUpdated&&ft.onReactionUpdated(vr,bt)}catch(mn){at={error:mn}}finally{try{ce&&!ce.done&&(dt=Ce.return)&&dt.call(Ce)}finally{if(at)throw at.error}}return[2]}))}))})),ot.label=26;case 26:return[3,87];case 27:return(fn=e.as(yx).event).channelType!==Rt.GROUP?[3,30]:[4,this.getChannel(fn.channelUrl,!0)];case 28:return _r=ot.sent(),[4,this.getMessageFromCache(fn.targetMessageId)];case 29:if((jn=ot.sent())?jn instanceof ba&&(jn.applyThreadInfoUpdateEvent(fn),this._dispatcher.dispatch(new lr({messages:[jn],source:ge.EVENT_MESSAGE_THREADINFO_UPDATED}))):this._dispatcher.dispatch(new CD({event:fn,source:ge.EVENT_MESSAGE_THREADINFO_UPDATED})),_r.isSuper)try{for(Un=Re(fn.threadInfo.mostRepliedUsers),gt=Un.next();!gt.done;gt=Un.next())Ln=gt.value,this._upsertCachedUserInfo(Ln,fn.threadInfo.updatedAt)}catch(Ce){Th={error:Ce}}finally{try{gt&&!gt.done&&(qr=Un.return)&&qr.call(Un)}finally{if(Th)throw Th.error}}$e((function(){return S(pn,void 0,void 0,(function(){var Ce,ce,ft,at,dt;return T(this,(function(Jn){try{for(Ce=Re(this._groupChannelHandlers.values()),ce=Ce.next();!ce.done;ce=Ce.next())(ft=ce.value).onThreadInfoUpdated&&ft.onThreadInfoUpdated(_r,fn)}catch(mn){at={error:mn}}finally{try{ce&&!ce.done&&(dt=Ce.return)&&dt.call(Ce)}finally{if(at)throw at.error}}return[2]}))}))})),ot.label=30;case 30:return[3,87];case 31:Dn=e.as(bx).groupChannelMemberCounts,Cr=[],ot.label=32;case 32:ot.trys.push([32,37,38,39]),gn=Re(Dn),rr=gn.next(),ot.label=33;case 33:return rr.done?[3,36]:(Lt=rr.value,Jt=Lt.channelUrl,hn=Lt.memberCount,Kt=Lt.joinedMemberCount,Wn=Lt.updatedAt,[4,this.getChannelFromCache(Jt)]);case 34:(cr=ot.sent())&&cr._setLatestMemberCount(hn,Kt,Wn)&&Cr.push(cr),ot.label=35;case 35:return rr=gn.next(),[3,33];case 36:return[3,39];case 37:return dn=ot.sent(),gl={error:dn},[3,39];case 38:try{rr&&!rr.done&&(Ia=gn.return)&&Ia.call(gn)}finally{if(gl)throw gl.error}return[7];case 39:return Cr.length>0&&(this._dispatcher.dispatch(new It({channels:Cr,context:{source:ge.EVENT_CHANNEL_MEMBER_COUNT_UPDATED}})),$e((function(){return S(pn,void 0,void 0,(function(){var Ce,ce,ft,at,dt;return T(this,(function(Jn){try{for(Ce=Re(this._groupChannelHandlers.values()),ce=Ce.next();!ce.done;ce=Ce.next())(ft=ce.value).onChannelMemberCountChanged&&ft.onChannelMemberCountChanged(Cr)}catch(mn){at={error:mn}}finally{try{ce&&!ce.done&&(dt=Ce.return)&&dt.call(Ce)}finally{if(at)throw at.error}}return[2]}))}))}))),[3,87];case 40:return ti=e.as(Ex),_i=ti.event,Sr=ti.status,Jt=ti.channelUrl,Lr=ti.channelType,Jt&&Lr===Rt.GROUP?[4,this.getChannel(Jt,!0)]:[3,42];case 41:Dr=ot.sent(),this._dispatcher.dispatch(new sS({event:_i,source:ge.EVENT_POLL_UPDATED})),$e(Sr===TD?function(){return S(pn,void 0,void 0,(function(){var Ce,ce,ft,at,dt;return T(this,(function(Jn){try{for(Ce=Re(this._groupChannelHandlers.values()),ce=Ce.next();!ce.done;ce=Ce.next())(ft=ce.value).onPollDeleted&&ft.onPollDeleted(Dr,_i.pollId)}catch(mn){at={error:mn}}finally{try{ce&&!ce.done&&(dt=Ce.return)&&dt.call(Ce)}finally{if(at)throw at.error}}return[2]}))}))}:function(){return S(pn,void 0,void 0,(function(){var Ce,ce,ft,at,dt;return T(this,(function(Jn){try{for(Ce=Re(this._groupChannelHandlers.values()),ce=Ce.next();!ce.done;ce=Ce.next())(ft=ce.value).onPollUpdated&&ft.onPollUpdated(Dr,_i)}catch(mn){at={error:mn}}finally{try{ce&&!ce.done&&(dt=Ce.return)&&dt.call(Ce)}finally{if(at)throw at.error}}return[2]}))}))}),ot.label=42;case 42:return[3,87];case 43:return Kn=e.as(pS),Yn=Kn.event,Jt=Kn.channelUrl,Lr=Kn.channelType,Jt&&Lr===Rt.GROUP?[4,this.getChannel(Jt,!0)]:[3,45];case 44:aa=ot.sent(),this._dispatcher.dispatch(new e2({event:Yn,source:ge.EVENT_POLL_VOTED})),$e((function(){return S(pn,void 0,void 0,(function(){var Ce,ce,ft,at,dt;return T(this,(function(Jn){try{for(Ce=Re(this._groupChannelHandlers.values()),ce=Ce.next();!ce.done;ce=Ce.next())(ft=ce.value).onPollVoted&&ft.onPollVoted(aa,Yn)}catch(mn){at={error:mn}}finally{try{ce&&!ce.done&&(dt=Ce.return)&&dt.call(Ce)}finally{if(at)throw at.error}}return[2]}))}))})),ot.label=45;case 45:return[3,87];case 46:if(!(Mt=e.as($c).event).isGroupChannelEvent)return[3,85];switch(Mt.category){case _n.CHANNEL_JOIN:return[3,47];case _n.CHANNEL_LEAVE:return[3,49];case _n.CHANNEL_OPERATOR_UPDATE:return[3,53];case _n.CHANNEL_INVITE:return[3,55];case _n.CHANNEL_DECLINE_INVITE:return[3,57];case _n.TYPING_START:case _n.TYPING_END:return[3,59];case _n.USER_CHANNEL_MUTE:case _n.USER_CHANNEL_UNMUTE:return[3,61];case _n.USER_CHANNEL_BAN:return[3,63];case _n.USER_CHANNEL_UNBAN:return[3,67];case _n.CHANNEL_FREEZE:case _n.CHANNEL_UNFREEZE:return[3,69];case _n.CHANNEL_HIDE:return[3,71];case _n.CHANNEL_UNHIDE:return[3,73];case _n.CHANNEL_DELETED:return[3,75];case _n.CHANNEL_PROP_CHANGED:return[3,76];case _n.CHANNEL_META_DATA_CHANGED:return[3,79];case _n.CHANNEL_META_COUNTERS_CHANGED:return[3,81];case _n.PINNED_MESSAGE_CHANGED:return[3,83]}return[3,85];case 47:return[4,this.getChannel(Mt.channelUrl,!0)];case 48:if(Dt=ot.sent(),vt=e.as(rz),Ze=vt.memberCount,Ae=vt.joinedMemberCount,Et=vt.members,_t=!1,Et.forEach((function(Ce){Dt.isExclusive||Dt.isSuper||Dt.isBroadcast?_t=_t||Dt._setLatestMemberCount(Ze,Ae,Mt.ts):(Ce.state=kr.JOINED,Dt.addMember(Ce,Mt.ts),pn._updateJoinedMemberCount(Dt)),Ce.userId===pn._sdkState.userId&&(Dt.myMemberState=kr.JOINED)})),Dt.isSuper)try{for(yt=Re(Et),Gn=yt.next();!Gn.done;Gn=yt.next())zr=Gn.value,this._upsertCachedUserInfo(zr,Mt.ts)}catch(Ce){vl={error:Ce}}finally{try{Gn&&!Gn.done&&(Zu=yt.return)&&Zu.call(yt)}finally{if(vl)throw vl.error}}return(wr=W.of(this._iid).requestDeduplicator).updatePendingResponse(Dt,Date.now()),this._dispatcher.dispatch(new It({channels:[Dt],context:{source:ge.EVENT_CHANNEL_JOINED,users:Et}})),$e((function(){return S(pn,void 0,void 0,(function(){return T(this,(function(Ce){return this._groupChannelHandlers.forEach((function(ce){var ft,at;try{for(var dt=Re(Et),Jn=dt.next();!Jn.done;Jn=dt.next()){var mn=Jn.value;ce.onUserJoined&&ce.onUserJoined(Dt,mn)}}catch(Nr){ft={error:Nr}}finally{try{Jn&&!Jn.done&&(at=dt.return)&&at.call(dt)}finally{if(ft)throw ft.error}}Dt.isBroadcast&&_t&&ce.onChannelMemberCountChanged&&ce.onChannelMemberCountChanged([Dt])})),[2]}))}))})),[3,85];case 49:return(la=this._leftChannels.get(Mt.channelUrl))?(zi=la.channel,[3,52]):[3,50];case 50:return[4,this.getChannel(Mt.channelUrl,!0)];case 51:zi=ot.sent(),ot.label=52;case 52:return xt=zi,sa=e.as(az),hn=sa.memberCount,Kt=sa.joinedMemberCount,yi=sa.member,qs=!1,Cs=W.of(this._iid),qi=Cs.appInfo,wr=Cs.requestDeduplicator,xt.isExclusive||xt.isSuper||xt.isBroadcast?qs=xt._setLatestMemberCount(hn,Kt,Mt.ts):(qi?.enabledChannelMemberShipHistory?((Wi=xt.members.find((function(Ce){return Ce.userId===yi.userId})))&&(Wi.state=kr.LEFT),xt.memberCount=hn):xt.removeMember(yi),this._updateJoinedMemberCount(xt)),yi.userId===this._sdkState.userId?(xt.myMemberState=kr.NONE,xt.invitedAt=0,xt.joinedAt=0,xt._updateUnreadCount(0,0),xt.isPublic?this._dispatcher.dispatch(new It({channels:[xt],context:{source:ge.EVENT_CHANNEL_LEFT,user:yi}})):(this._markAsLeave(xt),this._dispatcher.dispatch(new wc({channelUrls:[xt.url],context:{source:ge.EVENT_CHANNEL_LEFT,user:yi}})))):this._dispatcher.dispatch(new It({channels:[xt],context:{source:ge.EVENT_CHANNEL_LEFT,user:yi}})),wr.updatePendingResponse(xt,Date.now()),xt.isSuper&&this._upsertCachedUserInfo(yi,Mt.ts),$e((function(){return S(pn,void 0,void 0,(function(){return T(this,(function(Ce){return this._groupChannelHandlers.forEach((function(ce){ce.onUserLeft&&ce.onUserLeft(xt,yi),xt.isBroadcast&&qs&&ce.onChannelMemberCountChanged&&ce.onChannelMemberCountChanged([xt])})),[2]}))}))})),[3,85];case 53:return[4,this.getChannel(Mt.channelUrl,!0)];case 54:rt=ot.sent(),Ct=e.as(fx).operators,ct=Ct.map((function(Ce){return Ce.userId}));try{for(Ot=Re(rt.members),ht=Ot.next();!ht.done;ht=Ot.next())(zr=ht.value).role=ct.includes(zr.userId)?Jo.OPERATOR:Jo.NONE}catch(Ce){Ki={error:Ce}}finally{try{ht&&!ht.done&&(Sh=Ot.return)&&Sh.call(Ot)}finally{if(Ki)throw Ki.error}}return rt.myRole=ct.includes(this._sdkState.userId)?Jo.OPERATOR:Jo.NONE,(wr=W.of(this._iid).requestDeduplicator).updatePendingResponse(rt,Date.now()),this._dispatcher.dispatch(new It({channels:[rt],context:{source:ge.EVENT_CHANNEL_OPERATOR_UPDATED,operators:Ct}})),$e((function(){return S(pn,void 0,void 0,(function(){return T(this,(function(Ce){return this._groupChannelHandlers.forEach((function(ce){ce.onOperatorUpdated&&ce.onOperatorUpdated(rt,Ct)})),[2]}))}))})),[3,85];case 55:return[4,this.getChannel(Mt.channelUrl,!0)];case 56:Vt=ot.sent(),Nn=e.as(lz),hn=Nn.memberCount,Kt=Nn.joinedMemberCount,ni=Nn.inviter,(Fr=Nn.invitees).forEach((function(Ce){return Ce.state=kr.INVITED}));try{for(Ar=Re(Fr),ee=Ar.next();!ee.done;ee=Ar.next())Xe=ee.value,Vt.isExclusive||Vt.isSuper||Vt.isBroadcast?(Vt.isSuper&&this._userInfoCache.upsert(Xe,Mt.ts),Vt._setLatestMemberCount(hn,Kt,Mt.ts)):Vt.addMember(Xe,Mt.ts),this._sdkState.userId===Xe.userId&&(Vt.hiddenState=yo.UNHIDDEN,Vt.myMemberState!==kr.JOINED&&(Vt.myMemberState=kr.INVITED),Vt.invitedAt=Mt.ts)}catch(Ce){td={error:Ce}}finally{try{ee&&!ee.done&&(Ju=Ar.return)&&Ju.call(Ar)}finally{if(td)throw td.error}}return(wr=W.of(this._iid).requestDeduplicator).updatePendingResponse(Vt,Date.now()),this._dispatcher.dispatch(new It({channels:[Vt],context:{source:ge.EVENT_CHANNEL_INVITED,inviter:ni,invitees:Fr}})),$e((function(){return S(pn,void 0,void 0,(function(){return T(this,(function(Ce){return this._groupChannelHandlers.forEach((function(ce){ce.onUserReceivedInvitation&&ce.onUserReceivedInvitation(Vt,ni,Fr)})),[2]}))}))})),[3,85];case 57:return[4,this.getChannel(Mt.channelUrl,!0)];case 58:return Be=ot.sent(),Pt=e.as(cz),hn=Pt.memberCount,Kt=Pt.joinedMemberCount,ln=Pt.inviter,Ir=Pt.invitee,Be.isExclusive||Be.isSuper||Be.isBroadcast?(Be.isSuper&&this._userInfoCache.upsert(Ir,Mt.ts),Be._setLatestMemberCount(hn,Kt,Mt.ts)):Be.removeMember(Ir),this._sdkState.userId===Ir.userId?(Be.invitedAt=0,Be.myMemberState=kr.NONE,Be.isPublic?this._dispatcher.dispatch(new It({channels:[Be],context:{source:ge.EVENT_CHANNEL_DECLINED_INVITE,inviter:ln,invitee:Ir}})):this._dispatcher.dispatch(new wc({channelUrls:[Be.url],context:{source:ge.EVENT_CHANNEL_DECLINED_INVITE,inviter:ln,invitee:Ir}}))):this._dispatcher.dispatch(new It({channels:[Be],context:{source:ge.EVENT_CHANNEL_DECLINED_INVITE,inviter:ln,invitee:Ir}})),(wr=W.of(this._iid).requestDeduplicator).updatePendingResponse(Be,Date.now()),$e((function(){return S(pn,void 0,void 0,(function(){return T(this,(function(Ce){return this._groupChannelHandlers.forEach((function(ce){ce.onUserDeclinedInvitation&&ce.onUserDeclinedInvitation(Be,ln,Ir)})),[2]}))}))})),[3,85];case 59:return[4,this.getChannel(Mt.channelUrl,!0)];case 60:return Hr=ot.sent(),Br=Mt.category===_n.TYPING_START,Ln=e.as(Br?mz:vz).user,Hr._updateTypingStatus(Ln,Br?Mt.ts:0),(wr=W.of(this._iid).requestDeduplicator).updatePendingResponse(Hr,Date.now()),this._dispatcher.dispatch(new It({channels:[Hr],context:{source:ge.EVENT_CHANNEL_TYPING_STATUS_UPDATE}})),$e((function(){return S(pn,void 0,void 0,(function(){return T(this,(function(Ce){return this._groupChannelHandlers.forEach((function(ce){ce.onTypingStatusUpdated&&ce.onTypingStatusUpdated(Hr)})),[2]}))}))})),[3,85];case 61:return[4,this.getChannel(Mt.channelUrl,!0)];case 62:oa=ot.sent(),Ws=Mt.category===_n.USER_CHANNEL_MUTE,(Io=e.as(Ws?WD:KD).user).userId===this._sdkState.userId&&(oa.myMutedState=Ws?Qo.MUTED:Qo.UNMUTED,oa._myMutedRemainingTime=Io.restrictionInfo.remainingDuration);try{for(Ku=Re(oa.members),Ks=Ku.next();!Ks.done;Ks=Ku.next())if((zr=Ks.value).userId===Io.userId){zr.isMuted=Ws;break}}catch(Ce){nd={error:Ce}}finally{try{Ks&&!Ks.done&&(Ah=Ku.return)&&Ah.call(Ku)}finally{if(nd)throw nd.error}}return oa.isSuper&&this._userInfoCache.upsert(Io,Mt.ts),(wr=W.of(this._iid).requestDeduplicator).updatePendingResponse(oa,Date.now()),this._dispatcher.dispatch(new It({channels:[oa],context:{source:Ws?ge.EVENT_CHANNEL_MUTED:ge.EVENT_CHANNEL_UNMUTED,user:Io}})),$e((function(){return S(pn,void 0,void 0,(function(){return T(this,(function(Ce){return this._groupChannelHandlers.forEach((function(ce){Ws?ce.onUserMuted&&ce.onUserMuted(oa,Io):ce.onUserUnmuted&&ce.onUserUnmuted(oa,Io)})),[2]}))}))})),[3,85];case 63:return(la=this._leftChannels.get(Mt.channelUrl))?(Zl=la.channel,[3,66]):[3,64];case 64:return[4,this.getChannel(Mt.channelUrl,!0)];case 65:Zl=ot.sent(),ot.label=66;case 66:return bi=Zl,this._markAsLeave(bi),Yu=e.as(YD).user,Mo=Yu.userId===this._sdkState.userId,bi.isSuper&&this._userInfoCache.upsert(Yu,Mt.ts),Mo&&this._dispatcher.dispatch(new wc({channelUrls:[bi.url],context:{source:ge.EVENT_CHANNEL_BANNED,user:Yu}})),$e((function(){return S(pn,void 0,void 0,(function(){return T(this,(function(Ce){return this._groupChannelHandlers.forEach((function(ce){ce.onUserBanned&&ce.onUserBanned(bi,Yu)})),[2]}))}))})),[3,85];case 67:return[4,this.getChannel(Mt.channelUrl,!0)];case 68:return ul=ot.sent(),Ys=e.as(QD).user,Mo=Ys.userId===this._sdkState.userId,ul.isSuper&&this._userInfoCache.upsert(Ys,Mt.ts),Mo&&this._dispatcher.dispatch(new wc({channelUrls:[ul.url],context:{source:ge.EVENT_CHANNEL_UNBANNED,user:Ys}})),$e((function(){return S(pn,void 0,void 0,(function(){return T(this,(function(Ce){return this._groupChannelHandlers.forEach((function(ce){ce.onUserUnbanned&&ce.onUserUnbanned(ul,Ys)})),[2]}))}))})),[3,85];case 69:return[4,this.getChannel(Mt.channelUrl,!0)];case 70:return Jl=ot.sent(),xi=e.as($D).freeze,Jl.isFrozen=xi,(wr=W.of(this._iid).requestDeduplicator).updatePendingResponse(Jl,Date.now()),this._dispatcher.dispatch(new It({channels:[Jl],context:{source:xi?ge.EVENT_CHANNEL_FROZEN:ge.EVENT_CHANNEL_UNFROZEN}})),$e((function(){return S(pn,void 0,void 0,(function(){return T(this,(function(Ce){return this._groupChannelHandlers.forEach((function(ce){xi?ce.onChannelFrozen&&ce.onChannelFrozen(Jl):ce.onChannelUnfrozen&&ce.onChannelUnfrozen(Jl)})),[2]}))}))})),[3,85];case 71:return[4,this.getChannel(Mt.channelUrl,!0)];case 72:return ws=ot.sent(),cl=e.as(fz),Qu=cl.allowAutoUnhide,Qs=cl.hidePreviousMessages,eu=cl.messageOffsetTimestamp,Qu!==null&&(ws.hiddenState=Qu?yo.HIDDEN_ALLOW_AUTO_UNHIDE:yo.HIDDEN_PREVENT_AUTO_UNHIDE),Qs!==null&&Qs&&ws._updateUnreadCount(0,0),eu!==null&&(ws.messageOffsetTimestamp=eu),(wr=W.of(this._iid).requestDeduplicator).updatePendingResponse(ws,Date.now()),this._dispatcher.dispatch(new It({channels:[ws],context:{source:ge.EVENT_CHANNEL_HIDDEN}})),$e((function(){return S(pn,void 0,void 0,(function(){return T(this,(function(Ce){return this._groupChannelHandlers.forEach((function(ce){ce.onChannelHidden&&ce.onChannelHidden(ws)})),[2]}))}))})),[3,85];case 73:return[4,this.getChannel(Mt.channelUrl,!0)];case 74:return(dl=ot.sent()).hiddenState=yo.UNHIDDEN,(wr=W.of(this._iid).requestDeduplicator).updatePendingResponse(dl,Date.now()),this._dispatcher.dispatch(new It({channels:[dl],context:{source:ge.EVENT_CHANNEL_UNHIDDEN}})),$e((function(){return S(pn,void 0,void 0,(function(){return T(this,(function(Ce){return this._groupChannelHandlers.forEach((function(ce){ce.onChannelChanged&&ce.onChannelChanged(dl)})),[2]}))}))})),[3,85];case 75:return this._dispatcher.dispatch(new wc({channelUrls:[Mt.channelUrl],context:{source:ge.EVENT_CHANNEL_DELETED}})),$e((function(){return S(pn,void 0,void 0,(function(){return T(this,(function(Ce){return this._groupChannelHandlers.forEach((function(ce){ce.onChannelDeleted&&ce.onChannelDeleted(Mt.channelUrl,Rt.GROUP)})),[2]}))}))})),[3,85];case 76:return[4,ya(50)];case 77:return ot.sent(),[4,this.getChannelWithoutCache(Mt.channelUrl,!0,!1)];case 78:return ua=ot.sent(),this._dispatcher.dispatch(new It({channels:[ua],context:{source:ge.EVENT_CHANNEL_UPDATED}})),$e((function(){return S(pn,void 0,void 0,(function(){return T(this,(function(Ce){return this._groupChannelHandlers.forEach((function(ce){ce.onChannelChanged&&ce.onChannelChanged(ua)})),[2]}))}))})),[3,85];case 79:return[4,this.getChannel(Mt.channelUrl,!0)];case 80:return Aa=ot.sent(),tu=e.as(zD),Oo=tu.created,Ns=tu.updated,ko=tu.deleted,Oo&&(Aa._upsertCachedMetaData(Oo,Mt.ts),this._dispatcher.dispatch(new It({channels:[Aa],context:{source:ge.EVENT_CHANNEL_METADATA_CREATED,metaData:Oo},ts:Mt.ts}))),Ns&&(Aa._upsertCachedMetaData(Ns,Mt.ts),this._dispatcher.dispatch(new It({channels:[Aa],context:{source:ge.EVENT_CHANNEL_METADATA_UPDATED,metaData:Ns},ts:Mt.ts}))),ko&&(Aa._removeFromCachedMetaData(ko,Mt.ts),this._dispatcher.dispatch(new It({channels:[Aa],context:{source:ge.EVENT_CHANNEL_METADATA_DELETED,metaDataKeys:ko},ts:Mt.ts}))),(Oo||Ns||ko)&&(wr=W.of(this._iid).requestDeduplicator).updatePendingResponse(Aa,Date.now()),$e((function(){return S(pn,void 0,void 0,(function(){return T(this,(function(Ce){return this._groupChannelHandlers.forEach((function(ce){Oo&&ce.onMetaDataCreated&&ce.onMetaDataCreated(Aa,Oo),Ns&&ce.onMetaDataUpdated&&ce.onMetaDataUpdated(Aa,Ns),ko&&ce.onMetaDataDeleted&&ce.onMetaDataDeleted(Aa,ko)})),[2]}))}))})),[3,85];case 81:return[4,this.getChannel(Mt.channelUrl,!0)];case 82:return Ro=ot.sent(),Do=e.as(qD),ca=Do.created,hl=Do.updated,fl=Do.deleted,ca&&this._dispatcher.dispatch(new It({channels:[Ro],context:{source:ge.EVENT_CHANNEL_METACOUNTER_CREATED,metaCounters:ca}})),hl&&this._dispatcher.dispatch(new It({channels:[Ro],context:{source:ge.EVENT_CHANNEL_METACOUNTER_UPDATED,metaCounters:hl}})),fl&&this._dispatcher.dispatch(new It({channels:[Ro],context:{source:ge.EVENT_CHANNEL_METACOUNTER_DELETED,metaCounterKeys:fl}})),$e((function(){return S(pn,void 0,void 0,(function(){return T(this,(function(Ce){return this._groupChannelHandlers.forEach((function(ce){ca&&ce.onMetaCounterCreated&&ce.onMetaCounterCreated(Ro,ca),hl&&ce.onMetaCounterUpdated&&ce.onMetaCounterUpdated(Ro,hl),fl&&ce.onMetaCounterDeleted&&ce.onMetaCounterDeleted(Ro,fl)})),[2]}))}))})),[3,85];case 83:return[4,this.getChannel(Mt.channelUrl,!0)];case 84:return Pi=ot.sent(),$s=e.as(px),Ch=$s.pinnedMessageIds,ed=$s.latestPinnedMessage,(wh=$s.ts)>Pi._pinnedMessagesUpdatedAt&&(Pi.pinnedMessageIds=Ch??[],Pi.lastPinnedMessage=ed,Pi._pinnedMessagesUpdatedAt=wh,(wr=W.of(this._iid).requestDeduplicator).updatePendingResponse(Pi,Date.now()),this._dispatcher.dispatch(new It({channels:[Pi],context:{source:ge.EVENT_PINNED_MESSAGE_UPDATED}})),$e((function(){return S(pn,void 0,void 0,(function(){var Ce,ce,ft,at,dt;return T(this,(function(Jn){try{for(Ce=Re(this._groupChannelHandlers.values()),ce=Ce.next();!ce.done;ce=Ce.next())(ft=ce.value).onChannelChanged&&ft.onChannelChanged(Pi)}catch(mn){at={error:mn}}finally{try{ce&&!ce.done&&(dt=Ce.return)&&dt.call(Ce)}finally{if(at)throw at.error}}return[2]}))}))})),$e((function(){return S(pn,void 0,void 0,(function(){return T(this,(function(Ce){return this._groupChannelHandlers.forEach((function(ce){ce.onPinnedMessageUpdated&&ce.onPinnedMessageUpdated(Pi)})),[2]}))}))}))),[3,85];case 85:return[3,87];case 86:switch((Ka=e.as(dx).event).category){case R0.USER_BLOCK:$u=C1.getDataAsUserBlockEvent(this._iid,Ka),Ya=$u.blocker,nu=$u.blockee,this._groupChannelCache.block(Ya.userId,nu.userId);break;case R0.USER_UNBLOCK:pl=C1.getDataAsUserBlockEvent(this._iid,Ka),Ya=pl.blocker,nu=pl.blockee,this._groupChannelCache.unblock(Ya.userId,nu.userId)}return[3,87];case 87:return[3,89];case 88:if(Vn=ot.sent(),Ca(Vn))throw Vn;return[3,89];case 89:return[2]}}))}))},n.prototype._markAsLeave=function(e){var r,i=this,a=(r=this._leftChannels.get(e.url))!==null&&r!==void 0?r:{channel:e,ref:0};a.ref++,this._leftChannels.set(e.url,a),setTimeout((function(){a.ref--,a.ref===0&&i._leftChannels.delete(e.url)}),1e4)},n.prototype.addHandler=function(e,r){this._groupChannelHandlers.set(e,r)},n.prototype.removeHandler=function(e){this._groupChannelHandlers.delete(e)},n.prototype.clearHandler=function(){this._groupChannelHandlers.clear()},n.prototype.subscribeChannelEvent=function(e,r){this._groupChannelBroadcast.subscribe(e,r)},n.prototype.unsubscribeChannelEvent=function(e){this._groupChannelBroadcast.unsubscribe(e)},n.prototype._updateJoinedMemberCount=function(e){e.joinedMemberCount=e.members.filter((function(r){return r.state===kr.JOINED})).length},n.prototype.getChannel=function(e,r){return r===void 0&&(r=!1),S(this,void 0,void 0,(function(){var i;return T(this,(function(a){switch(a.label){case 0:Te(Q("string",e)).throw(X.invalidParameters),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.getChannelFromCache(e)];case 2:return(i=a.sent())?[2,i]:[3,4];case 3:return a.sent(),[3,4];case 4:return[4,this.getChannelWithoutCache(e,r)];case 5:return[2,a.sent()]}}))}))},n.prototype.getChannelWithoutCache=function(e,r,i){return r===void 0&&(r=!1),i===void 0&&(i=!0),S(this,void 0,void 0,(function(){var a,s,l,c,d,p,g,_,y,C,w,A,M,I=this;return T(this,(function(D){switch(D.label){case 0:return Te(Q("string",e)).throw(X.invalidParameters),a=W.of(this._iid).requestDeduplicator,s=new AN({channelUrl:e,isInternalCall:r}),[4,a.requestGetChannel(s.path,(function(){return I._requestQueue.send(s)}),s.params,i)];case 1:switch(l=D.sent(),c=l.as(IN).channel,d=c.unreadMessageCount,p=c.unreadMentionCount,c.myCountPreference){case _o.UNREAD_MESSAGE_COUNT_ONLY:p=0;break;case _o.UNREAD_MENTION_COUNT_ONLY:d=0;break;case _o.OFF:d=0,p=0}c._updateUnreadCount(d,p),g=this._groupChannelCache.filterOffsetChanged([c]),D.label=2;case 2:D.trys.push([2,7,8,9]),_=Re(g),y=_.next(),D.label=3;case 3:return y.done?[3,6]:(C=y.value,[4,this._messageCache.removeUnderOffset(C.url,C.messageOffsetTimestamp)]);case 4:D.sent(),D.label=5;case 5:return y=_.next(),[3,3];case 6:return[3,9];case 7:return w=D.sent(),A={error:w},[3,9];case 8:try{y&&!y.done&&(M=_.return)&&M.call(_)}finally{if(A)throw A.error}return[7];case 9:return[4,this._groupChannelCache.upsert([c])];case 10:return[2,D.sent()[0]]}}))}))},n.prototype.refreshChannel=function(e,r,i,a){return r===void 0&&(r=!0),i===void 0&&(i=ge.REFRESH_CHANNEL),a===void 0&&(a=!1),S(this,void 0,void 0,(function(){var s,l,c,d,p,g,_=this;return T(this,(function(y){switch(y.label){case 0:return y.trys.push([0,5,,6]),s=W.of(this._iid).requestDeduplicator,l=new AN({channelUrl:e,isInternalCall:r,showLatestMessage:a}),[4,s.requestGetChannel(l.path,(function(){return _._requestQueue.send(l)}),l.params)];case 1:return c=y.sent(),(d=c.as(IN).channel).myMemberState!==kr.NONE?[3,2]:(this._dispatcher.dispatch(new wc({channelUrls:[d.url],context:{source:i}})),[3,4]);case 2:return[4,this.upsertChannelsToCache([d])];case 3:p=y.sent(),this._dispatcher.dispatch(new It({channels:p,context:{source:i}})),y.label=4;case 4:return[3,6];case 5:return(g=y.sent()).code!==ze.NON_AUTHORIZED&&g.code!==ze.NOT_FOUND_IN_DATABASE||this._dispatcher.dispatch(new wc({channelUrls:[e],context:{source:i}})),[3,6];case 6:return[2]}}))}))},n.prototype.getMyGroupChannels=function(e,r,i,a,s){return a===void 0&&(a=ge.REQUEST_CHANNEL),s===void 0&&(s=!1),S(this,void 0,void 0,(function(){var l,c,d,p,g,_,y,C,w;return T(this,(function(A){switch(A.label){case 0:return r.createdAfter&&(r.createdAfter=Math.floor(r.createdAfter/1e3)),r.createdBefore&&(r.createdBefore=Math.floor(r.createdBefore/1e3)),l=!1,s&&(c=W.of(this._iid),d=c.appInfo,(p=c.cacheContext)&&!p.localCacheEnabled&&d?.enabledChannelMemberShipHistory&&d?.applicationAttributes.includes("left_user_view_support")&&(l=!0)),g=new jB(z(z({},r),{userId:this._sdkState.userId,token:e,limit:i,includeLeftChannel:s&&l})),[4,this._requestQueue.send(g)];case 1:return _=A.sent(),y=_.as(GB),C=y.channels,w=y.token,this._dispatcher.dispatch(new It({channels:C,context:{source:a}})),[2,{channels:C,token:w}]}}))}))},n.prototype.getMyGroupChannelChangeLogs=function(e,r,i){return i===void 0&&(i=ge.REQUEST_CHANNEL_CHANGELOGS),S(this,void 0,void 0,(function(){var a,s,l,c,d,p,g,_;return T(this,(function(y){switch(y.label){case 0:return a=z(z({},N1),r),Te((Q("string",e)||Q("number",e))&&SN(a)).throw(X.invalidParameters),s=new FB(Qe({userId:this._sdkState.userId,ts:typeof e=="number"?e:null,token:typeof e=="string"?e:null,filter:a})),[4,this._requestQueue.send(s)];case 1:return l=y.sent(),c=l.as(HB),d=c.updatedChannels,p=c.deletedChannelUrls,g=c.hasMore,_=c.ts,d.length>0&&this._dispatcher.dispatch(new It({channels:d,context:{source:i},ts:_})),p.length>0&&this._dispatcher.dispatch(new wc({channelUrls:p,context:{source:i}})),[2,{updatedChannels:d,deletedChannelUrls:p,hasMore:g,token:c.token}]}}))}))},n.prototype.getGroupChannelCount=function(e){return S(this,void 0,void 0,(function(){var r,i,a;return T(this,(function(s){switch(s.label){case 0:return r=z(z({},Nx),e),Te(Tx(r)).throw(X.invalidParameters),i=new VB({userId:this._sdkState.userId,filter:r}),[4,this._requestQueue.send(i)];case 1:return a=s.sent(),[2,a.as(BB).groupChannelCount]}}))}))},n.prototype.getUnreadItemCount=function(e){return S(this,void 0,void 0,(function(){var r,i,a,s,l,c,d,p,g,_,y,C,w,A,M,I;return T(this,(function(D){switch(D.label){case 0:return r=z(z({},DB),e),Te((function(P){return Tt(mr,P.keys)&&Tt("string",P.customTypeFilters,!0)&&Tt("string",P.customTypesFilter,!0)})(r)).throw(X.invalidParameters),i=W.of(this._iid),a=i.sdkState,s=i.requestQueue,l=new zB({userId:a.userId,filter:r}),[4,s.send(l)];case 1:return c=D.sent(),d=c.as(qB),p=d.groupChannelUnreadMentionCount,g=d.groupChannelUnreadMessageCount,_=d.groupChannelInvitationCount,y=d.superGroupChannelUnreadMentionCount,C=d.superGroupChannelUnreadMessageCount,w=d.superGroupChannelInvitationCount,A=d.nonSuperGroupChannelUnreadMentionCount,M=d.nonSuperGroupChannelUnreadMessageCount,I=d.nonSuperGroupChannelInvitationCount,[2,Le({groupChannelUnreadMentionCount:p,groupChannelUnreadMessageCount:g,groupChannelInvitationCount:_,superGroupChannelUnreadMentionCount:y,superGroupChannelUnreadMessageCount:C,superGroupChannelInvitationCount:w,nonSuperGroupChannelUnreadMentionCount:A,nonSuperGroupChannelUnreadMessageCount:M,nonSuperGroupChannelInvitationCount:I})]}}))}))},n.prototype.getTotalUnreadChannelCount=function(){return S(this,void 0,void 0,(function(){var e,r,i,a,s;return T(this,(function(l){switch(l.label){case 0:return e=W.of(this._iid),r=e.sdkState,i=e.requestQueue,a=new WB({userId:r.userId}),[4,i.send(a)];case 1:return s=l.sent(),[2,s.as(KB).unreadCount]}}))}))},n.prototype.getTotalUnreadMessageCount=function(e){return S(this,void 0,void 0,(function(){var r,i,a,s,l,c;return T(this,(function(d){switch(d.label){case 0:return r=z(z({},xB),e),Te(PB(r)).throw(X.invalidParameters),i=W.of(this._iid),a=i.sdkState,s=i.requestQueue,l=new YB({userId:a.userId,filter:r}),[4,s.send(l)];case 1:return c=d.sent(),[2,c.as(QB).unreadCount]}}))}))},n.prototype.getTotalScheduledMessageCount=function(e){return e===void 0&&(e={}),S(this,void 0,void 0,(function(){var r,i,a,s;return T(this,(function(l){switch(l.label){case 0:return r=z(z({},UB),e),Te((function(c){return Q("string",c.channelUrl,!0)&&Tt(lh,c.scheduledStatus,!0)&&Nt(ea,c.messageTypeFilter)})(r)).throw(X.invalidParameters),i=W.of(this._iid).requestQueue,a=new $B(r),[4,i.send(a)];case 1:return s=l.sent(),[2,s.as(XB).count]}}))}))},n.prototype.getSubscribedTotalUnreadMessageCount=function(){var e=W.of(this._iid).subscribedUnreadMessageCount;return e.all>=0?e.all:0},n.prototype.getSubscribedCustomTypeTotalUnreadMessageCount=function(){var e=0,r=W.of(this._iid).subscribedUnreadMessageCount;return Object.keys(r.customTypes).forEach((function(i){e+=r.customTypes[i]})),e},n.prototype.getSubscribedCustomTypeUnreadMessageCount=function(e){var r;return(r=W.of(this._iid).subscribedUnreadMessageCount.customTypes[e])!==null&&r!==void 0?r:0},n.prototype.createChannel=function(e){return S(this,void 0,void 0,(function(){var r,i,a,s;return T(this,(function(l){switch(l.label){case 0:return r=z(z({},qE),e),Te(TN(r)).throw(X.invalidParameters),r.isPublic||(r.accessCode=void 0),i=new JB(z({userId:this._sdkState.userId},r)),[4,this._requestQueue.send(i)];case 1:return a=l.sent(),s=a.as(ez).channel,[4,this.upsertChannelsToCache([s])];case 2:return l.sent(),[2,s]}}))}))},n.prototype.markAsReadAll=function(){return S(this,void 0,void 0,(function(){var e,r,i,a,s,l,c,d;return T(this,(function(p){switch(p.label){case 0:return e=Date.now(),Te(e-this._markAsReadAllLastSentAt>=1e3).throw(X.markAsReadAllRateLimitExceeded),this._markAsReadAllLastSentAt=e,r=new DM({userId:this._sdkState.userId}),[4,this._requestQueue.send(r)];case 1:p.sent(),i=this._groupChannelCache.channels;try{for(a=Re(i),s=a.next();!s.done;s=a.next())(l=s.value)._updateUnreadMemberState(this._sdkState.userId,e),l._updateUnreadCount(0,0)}catch(g){c={error:g}}finally{try{s&&!s.done&&(d=a.return)&&d.call(a)}finally{if(c)throw c.error}}return i.length>0?[4,this.upsertChannelsToCache(i)]:[3,3];case 2:p.sent(),p.label=3;case 3:return[2]}}))}))},n.prototype.markAsReadWithChannelUrls=function(e){return S(this,void 0,void 0,(function(){var r,i,a,s,l,c,d,p,g;return T(this,(function(_){switch(_.label){case 0:return r=Date.now(),Te(Tt("string",e)&&r-this._markAsReadAllLastSentAt>=1e3).throw(X.markAsReadAllRateLimitExceeded),this._markAsReadAllLastSentAt=r,i=new DM({userId:this._sdkState.userId,channelUrls:e}),[4,this._requestQueue.send(i)];case 1:_.sent(),a=this._groupChannelCache.channels,s=[];try{for(l=Re(a),c=l.next();!c.done;c=l.next())d=c.value,e.includes(d.url)&&(d._updateUnreadMemberState(this._sdkState.userId,r),d._updateUnreadCount(0,0),s.push(d))}catch(y){p={error:y}}finally{try{c&&!c.done&&(g=l.return)&&g.call(l)}finally{if(p)throw p.error}}return s.length>0?[4,this.upsertChannelsToCache(s)]:[3,3];case 2:_.sent(),_.label=3;case 3:return[2]}}))}))},n.prototype.markAsDelivered=function(e){return S(this,void 0,void 0,(function(){return T(this,(function(r){switch(r.label){case 0:return[4,this.getChannel(e)];case 1:return[4,r.sent().markAsDelivered()];case 2:return r.sent(),[2]}}))}))},n.prototype.getMessageFromCache=function(e){var r;return S(this,void 0,void 0,(function(){return T(this,(function(i){switch(i.label){case 0:return[4,this._messageCache.get(e)];case 1:return[2,(r=i.sent())!==null&&r!==void 0?r:null]}}))}))},n.prototype.getExactlyMatchingMessagesForTokenFromCache=function(e,r,i){return S(this,void 0,void 0,(function(){return T(this,(function(a){switch(a.label){case 0:return[4,this._messageCache.fetch({channelUrl:e,token:r,filter:i,exactMatch:!0})];case 1:return[2,a.sent()]}}))}))},n.prototype.getMessagesFromCache=function(e,r,i,a,s,l){return s===void 0&&(s=ex),l===void 0&&(l=!0),S(this,void 0,void 0,(function(){return T(this,(function(c){switch(c.label){case 0:return[4,this._messageCache.fetch({channelUrl:e,token:r,limit:s,filter:a,backward:i==="next",inclusive:l})];case 1:return[2,c.sent()]}}))}))},n.prototype.getPollMessagesFromCache=function(e,r,i,a){return S(this,void 0,void 0,(function(){return T(this,(function(s){switch(s.label){case 0:return[4,this._messageCache.fetch({channelUrl:e,token:r,limit:a,filter:i,backward:!1,isPollOnly:!0})];case 1:return[2,s.sent()]}}))}))},n.prototype.getCachedMessageCountBetween=function(e,r,i,a){return S(this,void 0,void 0,(function(){return T(this,(function(s){switch(s.label){case 0:return[4,this._messageCache.countBetween(e,r,new Wl({top:i,bottom:a}))];case 1:return[2,s.sent()]}}))}))},n.prototype.getUnsentMessagesFromCache=function(e,r){return S(this,void 0,void 0,(function(){return T(this,(function(i){switch(i.label){case 0:return[4,this._unsentMessageCache.fetch({channelUrl:e,filter:r})];case 1:return[2,i.sent()]}}))}))},n.prototype.removeFailedMessageFromCache=function(e){return S(this,void 0,void 0,(function(){return T(this,(function(r){switch(r.label){case 0:return[4,this._unsentMessageCache.remove([e])];case 1:return r.sent(),[2]}}))}))},n})(mx),mo=function(t,n){return n instanceof Rr?t.findIndex((function(e){return e instanceof Rr&&n.isIdentical(e)})):t.findIndex((function(e){return e.isIdentical(n)}))},I_=function(t,n){return t.findIndex((function(e){return e instanceof ba?e.messageId===n:e instanceof yp?e.notificationId===n:void 0}))},ow=function(t,n){if(t.length>0){for(var e=0,r=t.length-1,i=Math.floor((e+r)/2);e<r;){var a=t[i].createdAt-n.createdAt;if(a>0)r=i,i=Math.floor((e+r)/2);else{if(!(a<0))return i;e=i+1,i=Math.floor((e+r)/2)}}return t[i].createdAt>n.createdAt?i:i+1}return t.length},Fl={},wz=(function(){function t(n){var e=n._iid,r=n.channel,i=n.includeParams,a=this;this.ref=0,this._iid=e,this._channel=r,this._includeParams=i;var s,l,c=W.of(this._iid),d=c.logger,p=c.sdkState,g=c.dispatcher;this._metadataKey=(s=p.userId,l=r.url,"sendbird:".concat(s,"@groupchannel/").concat(l,"/message/changelogs.meta"));var _=(function(y,C){return"sendbird:".concat(y,"@groupchannel/").concat(C,"/message/changelogs")})(p.userId,this._channel.url);this._sync=new Vc(_,(function(){return S(a,void 0,void 0,(function(){var y,C,w,A,M,I,D,P,H;return T(this,(function(L){switch(L.label){case 0:return y={hasNext:!0,nextToken:0},[4,this.loadMetadata()];case 1:L.sent(),d.debug("message changelog sync from",(H=this._metadata)===null||H===void 0?void 0:H.token),L.label=2;case 2:return L.trys.push([2,5,,8]),[4,gi.of(this._iid).getMessageChangelogs(this._channel.url,this._channel.channelType,this._metadata.token,z({replyType:ta.ALL},this._includeParams),ge.SYNC_MESSAGE_CHANGELOGS)];case 3:return C=L.sent(),w=C.updatedMessages,A=C.deletedMessageIds,M=C.hasMore,I=C.token,D=C.forceUseNextToken,y.hasNext=M,y.nextToken=I,w.length>0||A.length>0?this._metadata&&(this._metadata.token=I):D&&this._metadata&&(this._metadata.token=I),d.debug("message changelog sync progress",y),[4,this.saveMetadata()];case 4:return L.sent(),[3,8];case 5:return P=L.sent(),d.debug("message changelog sync error",P),P instanceof X&&P.isInvalidTokenError?[4,this.clearMetadata()]:[3,7];case 6:L.sent(),L.label=7;case 7:throw P;case 8:return[2,y]}}))}))})),this._connectionEventContext=g.on((function(y){y instanceof Bs&&(y.stateType===en.CONNECTED?a.resume():a.pause())}))}return t.of=function(n,e,r){return Fl[n]||(Fl[n]={}),Fl[n][e.url]||(Fl[n][e.url]=new t({_iid:n,channel:e,includeParams:r})),Fl[n][e.url].ref++,Fl[n][e.url]},t.clear=function(n,e){Fl[n]&&Fl[n][e]&&(Fl[n][e].close(),delete Fl[n])},t.prototype.loadMetadata=function(){return S(this,void 0,void 0,(function(){var n,e,r,i;return T(this,(function(a){switch(a.label){case 0:return this._metadata?[3,2]:(n=W.of(this._iid),e=n.cacheContext,r=n.firstConnectedAt,[4,e.preference.get(this._metadataKey)]);case 1:i=a.sent(),this._metadata={token:i?i.token:r},a.label=2;case 2:return[2,this._metadata]}}))}))},t.prototype.saveMetadata=function(){return S(this,void 0,void 0,(function(){return T(this,(function(n){switch(n.label){case 0:return this._metadata?[4,W.of(this._iid).cacheContext.preference.set(this._metadataKey,this._metadata)]:[3,2];case 1:return n.sent(),[2,!0];case 2:return[2,!1]}}))}))},t.prototype.clearMetadata=function(){return S(this,void 0,void 0,(function(){return T(this,(function(n){switch(n.label){case 0:return[4,W.of(this._iid).cacheContext.preference.remove(this._metadataKey)];case 1:return n.sent(),this._metadata=void 0,[2]}}))}))},t.prototype.resume=function(){var n=W.of(this._iid),e=n.logger;n.sessionManager.session.hasSession&&(e.debug("message changelog sync resume()"),this._sync.start(0))},t.prototype.pause=function(){W.of(this._iid).logger.debug("message changelog sync pause()"),this._sync.stop()},t.prototype.close=function(){this.ref--,this.ref<=0&&(this.ref=0,this.pause(),this._connectionEventContext.close(),delete Fl[this._iid][this._channel.url])},t})(),Uf={},Nz=(function(){function t(n){var e=n._iid,r=n.channel,i=n.hasPollMessage,a=this;this.ref=0,this._iid=e,this._channel=r;var s,l,c=W.of(this._iid),d=c.logger,p=c.sdkState,g=c.dispatcher;this._metadataKey=(s=p.userId,l=r.url,"sendbird:".concat(s,"@groupchannel/").concat(l,"/poll/changelogs.meta"));var _=(function(y,C){return"sendbird:".concat(y,"@groupchannel/").concat(C,"/poll/changelogs")})(p.userId,this._channel.url);this._sync=new Vc(_,(function(){return S(a,void 0,void 0,(function(){var y,C,w,A,M,I,D,P;return T(this,(function(H){switch(H.label){case 0:return y={hasNext:!0,nextToken:0},[4,this.loadMetadata()];case 1:return H.sent(),d.debug("poll changelog sync from",(P=this._metadata)===null||P===void 0?void 0:P.token),(C=!this._metadata||!this._metadata.token)?[4,i()]:[3,3];case 2:C=!H.sent(),H.label=3;case 3:if(C)return[2,{hasNext:!1,nextToken:0}];this._metadata||(w=W.of(this._iid).firstConnectedAt,this._metadata={token:w}),H.label=4;case 4:return H.trys.push([4,7,,10]),[4,p1.of(this._iid).getPollChangeLogs(this._channel.url,this._channel.channelType,this._metadata.token)];case 5:return A=H.sent(),M=A.hasMore,I=A.token,y.hasNext=M,y.nextToken=I,this._metadata.token=I,d.debug("poll changelog sync progress",y),[4,this.saveMetadata()];case 6:return H.sent(),[3,10];case 7:return D=H.sent(),d.debug("poll changelog sync error",D),D instanceof X&&D.isInvalidTokenError?[4,this.clearMetadata()]:[3,9];case 8:H.sent(),H.label=9;case 9:throw D;case 10:return[2,y]}}))}))})),this._connectionEventContext=g.on((function(y){y instanceof Bs&&(y.stateType===en.CONNECTED?a.resume():a.pause())}))}return t.of=function(n,e,r){return Uf[n]||(Uf[n]={}),Uf[n][e.url]||(Uf[n][e.url]=new t({_iid:n,channel:e,hasPollMessage:r})),Uf[n][e.url].ref++,Uf[n][e.url]},t.prototype.loadMetadata=function(){return S(this,void 0,void 0,(function(){var n;return T(this,(function(e){switch(e.label){case 0:return this._metadata?[3,2]:[4,W.of(this._iid).cacheContext.preference.get(this._metadataKey)];case 1:n=e.sent(),this._metadata=n?{token:n.token}:void 0,e.label=2;case 2:return[2]}}))}))},t.prototype.saveMetadata=function(){return S(this,void 0,void 0,(function(){return T(this,(function(n){switch(n.label){case 0:return this._metadata?[4,W.of(this._iid).cacheContext.preference.set(this._metadataKey,this._metadata)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},t.prototype.clearMetadata=function(){return S(this,void 0,void 0,(function(){return T(this,(function(n){switch(n.label){case 0:return[4,W.of(this._iid).cacheContext.preference.remove(this._metadataKey)];case 1:return n.sent(),this._metadata=void 0,[2]}}))}))},t.prototype.resume=function(){W.of(this._iid).logger.debug("poll changelog sync resume()"),this._sync.start(0)},t.prototype.pause=function(){W.of(this._iid).logger.debug("poll changelog sync pause()"),this._sync.stop()},t.prototype.close=function(){this.ref--,this.ref<=0&&(this.ref=0,this.pause(),this._connectionEventContext.close(),delete Uf[this._iid][this._channel.url])},t})(),Tz=(function(t){function n(e){var r,i,a,s,l,c,d,p,g,_,y=this;return(y=t.call(this)||this).method=ye.GET,y.path="".concat(Xt(e.channelType),"/").concat(e.channelUrl,"/messages_gap"),y.params=Le({prev_start_ts:e.prevStart,prev_end_ts:e.prevEnd,prev_cache_count:e.prevCount,next_start_ts:e.nextStart,next_end_ts:e.nextEnd,next_cache_count:e.nextCount,huge_gap_threshold:(r=e.threshold)!==null&&r!==void 0?r:null,reverse:!0,custom_types:(i=e.customTypes)!==null&&i!==void 0?i:["*"],message_type:(a=e.messageType)!==null&&a!==void 0?a:null,include_reply_type:(s=e.replyType)!==null&&s!==void 0?s:ta.NONE,include_reactions_summary:(l=e.includeReactions)===null||l===void 0||l,include_meta_array:(c=e.includeMetaArray)===null||c===void 0||c,include_thread_info:(d=e.includeThreadInfo)===null||d===void 0||d,include_parent_message_info:(p=e.includeParentMessageInfo)===null||p===void 0||p,with_sorted_meta_array:(g=e.includeMetaArray)===null||g===void 0||g,show_subchannel_messages_only:(_=e.showSubchannelMessagesOnly)!==null&&_!==void 0&&_,include_poll_details:!0,checking_continuous_messages:e.checkingContinuousMessages}),y}return U(n,t),n})(Ee),Sz=(function(t){function n(e,r){var i,a,s,l,c,d,p=this;return(p=t.call(this,e,r)||this).isHugeGap=r.is_huge_gap,p.prevMessages=((i=r.prev_messages)!==null&&i!==void 0?i:[]).map((function(g){return ia(e,g)})),p.prevHasMore=(a=r.prev_hasmore)!==null&&a!==void 0&&a,p.isContinuousPrevMessages=(s=r.is_continuous_prev_messages)!==null&&s!==void 0&&s,p.nextMessages=((l=r.next_messages)!==null&&l!==void 0?l:[]).map((function(g){return ia(e,g)})),p.nextHasmore=(c=r.next_hasmore)!==null&&c!==void 0&&c,p.isContinuousNextMessages=(d=r.is_continuous_next_messages)!==null&&d!==void 0&&d,p}return U(n,t),n})(Se),xM={includeMetaArray:!0,includeReactions:!0,includeThreadInfo:!0,includeParentMessageInfo:!0};(function(t){t.CACHE_AND_REPLACE_BY_API="cache_and_replace_by_api"})(ON||(ON={}));var f0,p0,m0,Az=(function(){function t(){this._onCacheResult=it,this._onApiResult=it}return t.prototype._invokeResponse=function(n,e,r){var i=this;$e((function(){return S(i,void 0,void 0,(function(){return T(this,(function(a){switch(n){case"local":this._onCacheResult(e,r);break;case"remote":this._onApiResult(e,r)}return[2]}))}))}))},t.prototype.onCacheResult=function(n){return this._onCacheResult=n,this},t.prototype.onApiResult=function(n){return this._onApiResult=n,this},t})(),Iz=(function(){function t(n,e){var r=e.filter,i=e.startingPoint,a=e.limit,s=e.prevResultLimit,l=e.nextResultLimit,c=e.channel,d=e.channelManager,p=e.disableBackgroundSync,g=p!==void 0&&p,_=this;this._messages=[],this._unsentMessages=[],this._isLoadingPrevious=!1,this._isLoadingNext=!1,this._iid=n,this._key="mc-".concat(So()),this._isDisposed=!1,this.filter=r??new vh,this._channel=c,this._syncRange=new Wl({}),this._hasPrevious=!0,this._hasNext=!0,this._startingPoint=typeof i=="number"&&Number.isFinite(i)?i:Number.MAX_SAFE_INTEGER,this._limit=a||ex,this._prevResultLimit=s??Math.floor(this._limit/2),this._nextResultLimit=l??Math.floor(this._limit/2),this._channelManager=d;var y=W.of(this._iid).statManager;this._channelManager.subscribeChannelEvent(this._key,{onUpdate:function(I,D){var P=D.source,H=I.findIndex((function(L){return L.isIdentical(_.channel)}));H>=0&&(_._replaceChannelOfCollection(I[H]),_.channel._runIfHandleableWithGroupChannel((function(L){switch(P){case ge.EVENT_CHANNEL_UPDATED:for(var G=!1,Y=0;Y<_._messages.length;Y++)if(_._messages[Y].createdAt>=L.messageOffsetTimestamp){G=!0;var F=Y;if(F>0){var ne=_._messages.splice(0,F);_._removeMessagesFromView(ne.map((function(Oe){return _.keyOf(Oe)})),ge.EVENT_MESSAGE_OFFSET_UPDATED)}break}!G&&_._messages.length>0&&_._removeMessagesFromView(_._messages.map((function(Oe){return _.keyOf(Oe)})),ge.EVENT_MESSAGE_OFFSET_UPDATED);break;case ge.EVENT_CHANNEL_UNMUTED:var J=W.of(_._iid).sdkState,re=D.user;J.userId===re.userId&&_._clearCheckMyMutedTimer();break;case ge.EVENT_CHANNEL_MUTED:J=W.of(_._iid).sdkState,re=D.user,J.userId===re.userId&&L._myMutedRemainingTime!==-1&&_._startCheckMyMutedTimer(L._myMutedRemainingTime);break;case ge.EVENT_CHANNEL_LEFT:L.isPublic&&_._clearCheckMyMutedTimer()}$e((function(){return S(_,void 0,void 0,(function(){var Oe;return T(this,(function(Z){return WE(P)&&!((Oe=this._handler)===null||Oe===void 0)&&Oe.onChannelUpdated&&this._handler.onChannelUpdated(D,this.channel),[2]}))}))}))})),_._postprocessChannelUpdateEvent(I[H],P))},onRemove:function(I,D){var P=I.indexOf(_.channel.url);P>=0&&_._channel._runIfHandleableWithGroupChannel((function(H){H.myMemberState=kr.NONE,_._clearCheckMyMutedTimer(),$e((function(){return S(_,void 0,void 0,(function(){var L;return T(this,(function(G){return!((L=this._handler)===null||L===void 0)&&L.onChannelDeleted&&this._handler.onChannelDeleted(D,this.channel.url),[2]}))}))})),_._postprocessChannelRemoveEvent(I[P])}))}}),this._channelManager.subscribeMessageEvent(this._key,{onUpdate:function(I,D){var P,H,L=[],G=[];try{for(var Y=Re(I),F=Y.next();!F.done;F=Y.next()){var ne=F.value;ne.channelUrl===_._channel.url&&(_.filter.match(ne)?L.push(ne):G.push(_.keyOf(ne)))}}catch(J){P={error:J}}finally{try{F&&!F.done&&(H=Y.return)&&H.call(Y)}finally{if(P)throw P.error}}if(Sc(D)){if(L.length>0)switch(D){case ge.LOCAL_MESSAGE_CANCELED:case ge.LOCAL_MESSAGE_RESEND_STARTED:case ge.EVENT_MESSAGE_SENT_FAILED:case ge.EVENT_MESSAGE_SENT_SUCCESS:case ge.EVENT_MESSAGE_UPDATED:case ge.EVENT_MESSAGE_THREADINFO_UPDATED:case ge.EVENT_MESSAGE_REACTION_UPDATED:case ge.EVENT_MESSAGE_FEEDBACK_ADDED:case ge.EVENT_MESSAGE_FEEDBACK_UPDATED:case ge.EVENT_MESSAGE_FEEDBACK_DELETED:case ge.SYNC_MESSAGE_CHANGELOGS:_._updateMessagesToView(L,D);break;case ge.EVENT_MESSAGE_SENT_PENDING:_._addMessagesToView(L,D);break;case ge.EVENT_MESSAGE_RECEIVED:_.hasNext||_._addMessagesToView(L,D);break;case ge.SYNC_MESSAGE_FILL:_._addMessagesToView(L,D)}G.length>0&&_._removeMessagesFromView(G,D)}_._postprocessMessageUpdateEvent(I,D)},onRemove:function(I,D){_._removeMessagesFromView(I,D),_._postprocessMessageRemoveEvent(I)},onRemoveUnsent:function(I,D){_._removeUnsentMessageFromView(I,D)},onPollChangeLogUpdate:function(I,D){_._updatePollsToView(I,D)},onPollUpdate:function(I,D){_._applyPollUpdateEventToView(I,D)},onPollVote:function(I,D){_._applyPollVoteEventToView(I,D)},onReactionUpdate:function(I,D){_._applyReactionEventToView(I,D)},onThreadInfoUpdate:function(I,D){_._applyThreadInfoEventToView(I,D)},onDeletedByRetentionPolicy:function(I,D,P){D===_.channel.url&&_._messageRetention(I,P)}});var C=W.of(this._iid),w=C.cacheContext,A=C.dispatcher,M=C.messageBackgroundSyncThrottleController;this._channel._updateMessageCollectionLastAccessedAt(),A.dispatch(new It({channels:[this._channel],context:{source:ge.CHANNEL_LASTACCESSEDAT_UPDATED}})),this._backgroundSync=Ez.of(this._iid,this._channel),!g&&this._shouldStartBackgroundSync()&&this._backgroundSync.resume(this._startingPoint),this._changelogSync=wz.of(this._iid,this._channel,this.changelogIncludeParams),this._changelogSync.resume(),this._pollChangelogSync=Nz.of(this._iid,this._channel,this._hasPollMessage.bind(this)),this._pollChangelogSync.resume(),this._prevFill=new Vc(this._key,(function(I){return S(_,void 0,void 0,(function(){var D=this;return T(this,(function(P){switch(P.label){case 0:return[4,M.run("message-fill-sync-".concat(c.url,"-prev"),(function(){return S(D,void 0,void 0,(function(){var H,L,G,Y,F,ne,J;return T(this,(function(re){switch(re.label){case 0:return[4,this._getRemoteMessages(I,{prevLimit:this._prevResultLimit,source:ge.SYNC_MESSAGE_FILL,checkingContinuousMessages:w.localCacheEnabled,sdkSource:Ko.INTERNAL_FILL_GAP})];case 1:return H=re.sent(),L=H.messages,G=H.isContinuousMessages,L.length>0?(Y=Math.min.apply(Math,Je([],Ye(L.map((function(Oe){return Oe.createdAt}))),!1)),this._syncRange.extends(Y),G&&((F=this._backgroundSync)===null||F===void 0||F.range.extends(Y)),[2,{hasNext:L.length>=this._prevResultLimit&&this.viewTop<Y,nextToken:this._syncRange.top}]):(w.localCacheEnabled&&y.put(new qn({type:An.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,measured_on:"gap_check",event:"cache_fetch",max_db_size:(J=(ne=w.localCacheConfig)===null||ne===void 0?void 0:ne.maxSize)!==null&&J!==void 0?J:0,use_local_cache:w.localCacheEnabled,starting_point:0,message_init_policy:""}})),[2,{hasNext:!1,nextToken:0}])}}))}))}))];case 1:return[2,P.sent()]}}))}))})),this._nextFill=new Vc(this._key,(function(I){return S(_,void 0,void 0,(function(){var D=this;return T(this,(function(P){switch(P.label){case 0:return[4,M.run("message-fill-sync-".concat(c.url,"-next"),(function(){return S(D,void 0,void 0,(function(){var H,L,G,Y,F,ne,J,re;return T(this,(function(Oe){switch(Oe.label){case 0:return[4,this._getRemoteMessages(I,{nextLimit:this._nextResultLimit,source:ge.SYNC_MESSAGE_FILL,checkingHasNext:!0,checkingContinuousMessages:w.localCacheEnabled,sdkSource:Ko.INTERNAL_FILL_GAP})];case 1:return H=Oe.sent(),L=H.messages,G=H.isContinuousMessages,Y=H.hasNext,L.length>0?(F=Math.max.apply(Math,Je([],Ye(L.map((function(Z){return Z.createdAt}))),!1)),this._syncRange.extends(F),G&&((ne=this._backgroundSync)===null||ne===void 0||ne.range.extends(F)),[2,{hasNext:Y,nextToken:this._syncRange.bottom}]):(w.localCacheEnabled&&y.put(new qn({type:An.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,measured_on:"gap_check",event:"cache_fetch",max_db_size:(re=(J=w.localCacheConfig)===null||J===void 0?void 0:J.maxSize)!==null&&re!==void 0?re:0,use_local_cache:w.localCacheEnabled,starting_point:0,message_init_policy:""}})),[2,{hasNext:!1,nextToken:0}])}}))}))}))];case 1:return[2,P.sent()]}}))}))})),this._connectionEventContext=A.on((function(I){if(I instanceof Bs)switch(I.stateType){case en.CONNECTED:gr((function(){return S(_,void 0,void 0,(function(){return T(this,(function(D){return this._activate(),[2]}))}))}));break;case en.LOGOUT:_.dispose();break;default:_._clearCheckMyMutedTimer(),_._prevFill.stop(),_._nextFill.stop()}}))}return t.prototype.keyOf=function(n){return 0},Object.defineProperty(t.prototype,"changelogIncludeParams",{get:function(){return{includeReactions:!0,includeThreadInfo:!0,includeMetaArray:!0,includeParentMessageInfo:!0}},enumerable:!1,configurable:!0}),t.prototype._postprocessChannelUpdateEvent=function(n,e){},t.prototype._postprocessChannelRemoveEvent=function(n){},t.prototype._postprocessMessageUpdateEvent=function(n,e){},t.prototype._postprocessMessageRemoveEvent=function(n){},Object.defineProperty(t.prototype,"channel",{get:function(){return this._channel},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"succeededMessages",{get:function(){return Je([],Ye(this._messages),!1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"failedMessages",{get:function(){return this._unsentMessages.filter((function(n){return n.sendingStatus===cn.FAILED}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pendingMessages",{get:function(){return this._unsentMessages.filter((function(n){return n.sendingStatus===cn.PENDING}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPrevious",{get:function(){return this._hasPrevious},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasNext",{get:function(){return this._hasNext},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"viewTop",{get:function(){return Math.min.apply(Math,Je(Je([],Ye(this._messages.map((function(n){return n.createdAt}))),!1),[Number.MAX_SAFE_INTEGER],!1))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"viewBottom",{get:function(){return Math.max.apply(Math,Je(Je([],Ye(this._messages.map((function(n){return n.createdAt}))),!1),[0],!1))},enumerable:!1,configurable:!0}),t.prototype._activate=function(){return S(this,void 0,void 0,(function(){return T(this,(function(n){switch(n.label){case 0:return W.of(this._iid).logger.debug("check huge gap"),this._checkHugeGap(),[4,this._refreshChannel(ge.SYNC_CHANNEL_CHANGELOGS)];case 1:return n.sent(),[2]}}))}))},t.prototype._replaceChannelOfCollection=function(n){this._channel.isGroupChannel()?this._channel=n:this._channel.isFeedChannel()&&(this._channel._groupChannel=n._groupChannel)},t.prototype._shouldStartBackgroundSync=function(){var n=W.of(this._iid).cacheContext;return this.channel.isGroupChannel()?n.localCacheEnabled&&!this.channel.isSuper:n.localCacheEnabled},t.prototype._setBaseMessageCollectionHandler=function(n){this._handler=n},t.prototype._filterUnderOffsetMessage=function(n){var e;return this._channel._runIfHandleableWithGroupChannel((function(r){e=n.filter((function(i){return i.createdAt>=r.messageOffsetTimestamp}))})),e!==void 0?e:n},t.prototype._updateChildMessagesInView=function(n){var e=[];return this._messages.forEach((function(r){r instanceof ba&&r.parentMessageId===n.messageId&&r.applyParentMessage(n)&&e.push(r)})),e},t.prototype._updatePollsToView=function(n,e){var r,i,a=this,s=[];try{for(var l=Re(n),c=l.next();!c.done;c=l.next()){var d=c.value,p=I_(this._messages,d.messageId);if(p>=0){var g=this._messages[p];g.isUserMessage()&&g.applyPoll(d),s.push(g)}}}catch(_){r={error:_}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}return s.length>0&&Sc(e)&&$e((function(){return S(a,void 0,void 0,(function(){var _,y,C;return T(this,(function(w){return _={source:e},s.length>0&&((C=(y=this._handler).onMessagesUpdated)===null||C===void 0||C.call(y,_,this.channel,s)),[2]}))}))})),s},t.prototype._applyPollUpdateEventToView=function(n,e){var r=this,i=I_(this._messages,n.messageId);if(i>=0){var a=this._messages[i];a&&a.isUserMessage()&&a.poll&&a.poll.applyPollUpdateEvent(n)&&Sc(e)&&$e((function(){return S(r,void 0,void 0,(function(){var s,l,c;return T(this,(function(d){return s={source:e},(c=(l=this._handler)===null||l===void 0?void 0:l.onMessagesUpdated)===null||c===void 0||c.call(l,s,this.channel,[a]),[2]}))}))}))}},t.prototype._applyPollVoteEventToView=function(n,e){var r=this,i=I_(this._messages,n.messageId);if(i>=0){var a=this._messages[i];a&&a.isUserMessage()&&a.poll&&a.poll.applyPollVoteEvent(n)&&Sc(e)&&$e((function(){return S(r,void 0,void 0,(function(){var s,l,c;return T(this,(function(d){return s={source:e},(c=(l=this._handler)===null||l===void 0?void 0:l.onMessagesUpdated)===null||c===void 0||c.call(l,s,this.channel,[a]),[2]}))}))}))}},t.prototype._applyReactionEventToView=function(n,e){var r=this,i=I_(this._messages,n.messageId);if(i>=0){var a=this._messages[i];a&&(a.isUserMessage()||a.isFileMessage()||a.isMultipleFilesMessage())&&Sc(e)&&(a.applyReactionEvent(n),$e((function(){return S(r,void 0,void 0,(function(){var s,l,c;return T(this,(function(d){return s={source:e},(c=(l=this._handler)===null||l===void 0?void 0:l.onMessagesUpdated)===null||c===void 0||c.call(l,s,this.channel,[a]),[2]}))}))})))}},t.prototype._applyThreadInfoEventToView=function(n,e){var r=this,i=I_(this._messages,n.targetMessageId);if(i>=0){var a=this._messages[i];a&&(a.isUserMessage()||a.isFileMessage()||a.isMultipleFilesMessage())&&Sc(e)&&(a.applyThreadInfoUpdateEvent(n),$e((function(){return S(r,void 0,void 0,(function(){var s,l,c;return T(this,(function(d){return s={source:e},(c=(l=this._handler)===null||l===void 0?void 0:l.onMessagesUpdated)===null||c===void 0||c.call(l,s,this.channel,[a]),[2]}))}))})))}},t.prototype._removeMessagesFromView=function(n,e){var r,i,a=this,s=[],l=[],c=function(_){var y=d._messages.findIndex((function(w){return a.keyOf(w)===_}));if(y>=0){var C=d._messages[y];s.push(d.keyOf(C)),l.push(C),d._messages.splice(y,1)}},d=this;try{for(var p=Re(n),g=p.next();!g.done;g=p.next())c(g.value)}catch(_){r={error:_}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}return Sc(e)&&l.length>0&&$e((function(){return S(a,void 0,void 0,(function(){var _,y,C;return T(this,(function(w){return _={source:e},(C=(y=this._handler)===null||y===void 0?void 0:y.onMessagesDeleted)===null||C===void 0||C.call(y,_,this.channel,s,l),[2]}))}))})),s},t.prototype._messageRetention=function(n,e){var r,i,a=[];try{for(var s=Re(this._messages),l=s.next();!l.done;l=s.next()){var c=l.value;c.createdAt<=n&&a.push(this.keyOf(c))}}catch(d){r={error:d}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}a.length>0&&this._removeMessagesFromView(a,e)},t.prototype._removeUnsentMessageFromView=function(n,e){var r=this._unsentMessages.findIndex((function(i){return i.reqId===n}));r>=0&&this._unsentMessages.splice(r,1)},t.prototype._getLocalMessages=function(n,e){var r=e.prevLimit,i=r===void 0?0:r,a=e.nextLimit,s=a===void 0?0:a,l=e.inclusive,c=l===void 0||l;return S(this,void 0,void 0,(function(){var d,p,g,_,y;return T(this,(function(C){switch(C.label){case 0:return d=[],c?[4,this._channelManager.getExactlyMatchingMessagesForTokenFromCache(this._channel.url,n,this.filter)]:[3,2];case 1:d=C.sent(),C.label=2;case 2:return i>0?[4,this._channelManager.getMessagesFromCache(this._channel.url,n,"prev",this.filter,i,!1)]:[3,4];case 3:return g=C.sent(),[3,5];case 4:g=[],C.label=5;case 5:return p=g,s>0?[4,this._channelManager.getMessagesFromCache(this._channel.url,n,"next",this.filter,s,!1)]:[3,7];case 6:return y=C.sent(),[3,8];case 7:y=[],C.label=8;case 8:return _=y,[2,{messages:Je(Je(Je([],Ye(d),!1),Ye(p),!1),Ye(_),!1).sort((function(w,A){return A.createdAt-w.createdAt})),prevMessagesCount:p.length,nextMessagesCount:_.length}]}}))}))},t.prototype._getRemoteMessages=function(n,e){var r=e.prevLimit,i=r===void 0?0:r,a=e.nextLimit,s=a===void 0?0:a,l=e.source,c=l===void 0?ge.REQUEST_MESSAGE:l,d=e.reverse,p=d!==void 0&&d,g=e.checkingHasNext,_=g!==void 0&&g,y=e.checkingContinuousMessages,C=y!==void 0&&y,w=e.sdkSource;return S(this,void 0,void 0,(function(){var A,M;return T(this,(function(I){switch(I.label){case 0:return A=gi.of(this._iid),i>0||s>0?[4,A._getMessagesByTimestampForCollection(this._channel.url,this._channel.channelType,n,Qe(z(z(z({},this.filter),xM),{isInclusive:!0,reverse:p,prevResultSize:i,nextResultSize:s})),c,_,C,w)]:[3,2];case 1:return M=I.sent(),[3,3];case 2:M={messages:[],isContinuousMessages:!1},I.label=3;case 3:return[2,M]}}))}))},t.prototype._checkHugeGap=function(){var n,e,r,i,a;return S(this,void 0,void 0,(function(){var s,l,c,d,p,g,_,y,C,w,A,M,I,D,P,H,L,G,Y,F,ne,J,re,Oe,Z,ue=this;return T(this,(function(q){switch(q.label){case 0:return s=W.of(this._iid),l=s.dispatcher,c=s.requestQueue,d=s.cacheContext,p=s.statManager,g=s.logger,this._messages.length>0?(_=this._syncRange.top,y=this.viewTop,C=this._syncRange.bottom,w=this.hasNext?this.viewBottom:Number.MAX_SAFE_INTEGER,[4,this._channelManager.getCachedMessageCountBetween(this._channel.url,this.filter,y,_)]):[3,8];case 1:return A=q.sent(),[4,this._channelManager.getCachedMessageCountBetween(this._channel.url,this.filter,C,w)];case 2:M=q.sent(),q.label=3;case 3:return q.trys.push([3,5,6,7]),[4,$1((function(){return S(ue,void 0,void 0,(function(){var le,pe,Pe,qe,$,fe,Ie,We,Ne,He,tt,At,bt,vr,wn,Rn,xn,Zt=this;return T(this,(function(Pn){switch(Pn.label){case 0:return le=new Tz(z(z({channelUrl:this._channel.url,channelType:this._channel.channelType,prevStart:y,prevEnd:_,prevCount:A,nextStart:C,nextEnd:w,nextCount:M,checkingContinuousMessages:d.localCacheEnabled},this.filter),xM)),[4,c.send(le)];case 1:return pe=Pn.sent(),Pe=pe.as(Sz),qe=Pe.isHugeGap,$=Pe.prevMessages,fe=$===void 0?[]:$,Ie=Pe.prevHasMore,We=Pe.isContinuousPrevMessages,Ne=Pe.nextMessages,He=Ne===void 0?[]:Ne,tt=Pe.nextHasmore,At=Pe.isContinuousNextMessages,qe?$e((function(){return S(Zt,void 0,void 0,(function(){var Zn;return T(this,(function(fn){return!((Zn=this._handler)===null||Zn===void 0)&&Zn.onHugeGapDetected&&this._handler.onHugeGapDetected(),[2]}))}))})):(bt=this.viewTop,vr=this.viewBottom,wn=Math.min.apply(Math,Je([Number.MAX_SAFE_INTEGER,bt],Ye(fe.map((function(Zn){return Zn.createdAt}))),!1)),Rn=Math.max.apply(Math,Je([0,vr],Ye(He.map((function(Zn){return Zn.createdAt}))),!1)),l.dispatch(new lr({messages:fe,source:ge.SYNC_MESSAGE_FILL})),l.dispatch(new lr({messages:He,source:ge.SYNC_MESSAGE_FILL})),this._syncRange.extends(wn,Rn),(We||At)&&((xn=this._backgroundSync)===null||xn===void 0||xn.range.extends(wn,Rn)),Ie&&this._prevFill.start(wn),tt&&this._nextFill.start(Rn)),[2]}}))}))}),1)];case 4:return q.sent(),[3,7];case 5:return I=q.sent(),g.debug("Failed HugeGap Check ",I),[3,7];case 6:return d.localCacheEnabled&&p.put(new qn({type:An.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,measured_on:"gap_check",event:"cache_fetch",max_db_size:(e=(n=d.localCacheConfig)===null||n===void 0?void 0:n.maxSize)!==null&&e!==void 0?e:0,use_local_cache:d.localCacheEnabled,starting_point:0,message_init_policy:""}})),[7];case 7:return[3,13];case 8:D=Date.now(),q.label=9;case 9:return q.trys.push([9,11,12,13]),[4,this._getRemoteMessages(D,{prevLimit:this._prevResultLimit,nextLimit:this._nextResultLimit,source:ge.SYNC_MESSAGE_FILL,checkingHasNext:!0,checkingContinuousMessages:d.localCacheEnabled,sdkSource:Ko.INTERNAL_FILL_GAP})];case 10:if(P=q.sent(),H=P.messages,L=P.isContinuousMessages,G=P.hasNext,H.length>0){for(Y=H.map((function(le){return le.createdAt})),F=0,ne=0,J=0;J<Y.length;J++)(re=Y[J])<=D?F++:re>=D&&ne++;this._hasPrevious=F>=this._prevResultLimit,this._hasNext=G??ne>=this._nextResultLimit,(Z=this._syncRange).extends.apply(Z,Je([],Ye(Y),!1)),L&&((r=this._backgroundSync)===null||r===void 0||r.range.extends(this._syncRange.top,this._syncRange.bottom)),this._addMessagesToView(H,ge.SYNC_MESSAGE_FILL)}else this._hasPrevious=!1,this._hasNext=!1;return[3,13];case 11:return(Oe=q.sent())instanceof X&&Oe.code===ze.NOT_FOUND_IN_DATABASE&&(this._hasPrevious=!1,this._hasNext=!1),[3,13];case 12:return d.localCacheEnabled&&p.put(new qn({type:An.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,measured_on:"gap_check",event:"cache_fetch",max_db_size:(a=(i=d.localCacheConfig)===null||i===void 0?void 0:i.maxSize)!==null&&a!==void 0?a:0,use_local_cache:d.localCacheEnabled,starting_point:0,message_init_policy:""}})),[7];case 13:return[2]}}))}))},t.prototype._loadUnsentMessages=function(){return S(this,void 0,void 0,(function(){var n;return T(this,(function(e){switch(e.label){case 0:return n=this,[4,this._channelManager.getUnsentMessagesFromCache(this._channel.url,this.filter)];case 1:return n._unsentMessages=e.sent(),[2]}}))}))},t.prototype._hasPollMessage=function(){return S(this,void 0,void 0,(function(){return T(this,(function(n){switch(n.label){case 0:return[4,this._channelManager.getPollMessagesFromCache(this._channel.url,Date.now()+6e5,this.filter,1)];case 1:return n.sent().length>0?[2,!0]:[2,!1]}}))}))},t.prototype._refreshChannel=function(n,e){return e===void 0&&(e=!1),S(this,void 0,void 0,(function(){var r,i,a=this;return T(this,(function(s){switch(s.label){case 0:r=W.of(this._iid).logger,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this._channelManager.refreshChannel(this.channel.url,!0,n,e)];case 2:return s.sent(),this.channel._runIfHandleableWithGroupChannel((function(l){l.myMutedState===Qo.MUTED&&gr((function(){return S(a,void 0,void 0,(function(){var c;return T(this,(function(d){switch(d.label){case 0:return[4,this.channel.getMyMutedInfo()];case 1:return(c=d.sent()).isMuted&&c.remainingDuration!==-1&&this._startCheckMyMutedTimer(c.remainingDuration),[2]}}))}))}))})),[3,4];case 3:return i=s.sent(),r.warn("Failed to refresh channel",i),[3,4];case 4:return[2]}}))}))},t.prototype._startCheckMyMutedTimer=function(n){var e=this;this._clearCheckMyMutedTimer(),this._checkMyMutedStateTimer=setTimeout((function(){return S(e,void 0,void 0,(function(){var r,i,a,s=this;return T(this,(function(l){switch(l.label){case 0:this._checkMyMutedStateTimer=void 0,r=!0,l.label=1;case 1:return l.trys.push([1,3,4,5]),[4,this._channel.getMyMutedInfo()];case 2:return i=l.sent(),r=!i.isMuted,[3,5];case 3:return l.sent(),r=!0,[3,5];case 4:return r&&(a=W.of(this._iid).sessionManager,this.channel._runIfHandleableWithGroupChannel((function(c){var d,p;c.myMutedState=Qo.UNMUTED;var g={source:ge.EVENT_CHANNEL_UNMUTED,user:a.currentUser};(p=(d=s._handler)===null||d===void 0?void 0:d.onChannelUpdated)===null||p===void 0||p.call(d,g,s.channel)}))),[7];case 5:return[2]}}))}))}),n+1e3)},t.prototype._clearCheckMyMutedTimer=function(){this._checkMyMutedStateTimer&&(clearTimeout(this._checkMyMutedStateTimer),this._checkMyMutedStateTimer=void 0)},t.prototype._setHasNextAndHasPrevious=function(n,e){for(var r=n.map((function(c){return c.createdAt})),i=0,a=0,s=0;s<r.length;s++){var l=r[s];l<this._startingPoint?i++:l>this._startingPoint&&a++}this._hasPrevious=i>=this._prevResultLimit,this._hasNext=e??a>=this._nextResultLimit},t.prototype.initialize=function(n){var e=this,r=new Az;this._messages=[],this._unsentMessages=[],this._syncRange=new Wl({}),this._hasNext=!0,this._hasPrevious=!0;var i=[],a={messages:[],prevMessagesCount:0,nextMessagesCount:0};return $e((function(){return S(e,void 0,void 0,(function(){var s,l,c,d,p,g=this;return T(this,(function(_){switch(_.label){case 0:return[4,(p=this._backgroundSync)===null||p===void 0?void 0:p.loadMetadata()];case 1:return s=_.sent(),l=W.of(this._iid),c=l.cacheContext,d=l.statManager,n===ON.CACHE_AND_REPLACE_BY_API&&this._getLocalMessages(this._startingPoint,{prevLimit:this._prevResultLimit,nextLimit:this._nextResultLimit}).then((function(y){return S(g,void 0,void 0,(function(){return T(this,(function(C){switch(C.label){case 0:return a=y,i=this._filterUnderOffsetMessage(a.messages),this._addMessagesToView(i,ge.REQUEST_MESSAGE),[4,this._loadUnsentMessages()];case 1:return C.sent(),r._invokeResponse("local",null,i),[2]}}))}))})).catch((function(y){if(Ca(y))throw y;r._invokeResponse("local",y,null)})).finally((function(){return S(g,void 0,void 0,(function(){var y,C,w,A,M,I,D,P=this;return T(this,(function(H){switch(H.label){case 0:return y=W.of(this._iid).cacheContext,C=!0,w=!0,A=!1,y.localCacheEnabled&&(i.length>0&&(M=s.range).includes.apply(M,Je([],Ye(i.map((function(L){return L.createdAt}))),!1))?!s.previousComplete&&a.prevMessagesCount<this._prevResultLimit?w=!0:this._startingPoint>s.range.bottom||a.nextMessagesCount<this._nextResultLimit?A=!0:w=!1:i.length===0&&(A=!0)),[4,this._refreshChannel(ge.REFRESH_CHANNEL,A)];case 1:return H.sent(),A&&this._channel._runIfHandleableWithGroupChannel((function(L){var G=Math.max.apply(Math,Je([],Ye(i.map((function(Y){return Y.createdAt}))),!1));L._latestMessageInfo&&G>=L._latestMessageInfo.createdAt&&(w=!1)})),w?(C=!1,this._getRemoteMessages(this._startingPoint,{prevLimit:this._prevResultLimit,nextLimit:this._nextResultLimit,reverse:!0,checkingHasNext:!0,checkingContinuousMessages:y.localCacheEnabled,sdkSource:Ko.EXTERNAL_COLLECTION}).then((function(L){var G,Y,F,ne=L.messages,J=L.isContinuousMessages,re=L.hasNext,Oe=P._filterUnderOffsetMessage(ne);P._messages=[],Oe.length>0?(P._setHasNextAndHasPrevious(Oe,re),(G=P._syncRange).extends.apply(G,Je([],Ye(Oe.map((function(Z){return Z.createdAt}))),!1)),J&&!((Y=P._backgroundSync)===null||Y===void 0)&&Y.range.overlap(P._syncRange)&&((F=P._backgroundSync)===null||F===void 0||F.range.extends(P._syncRange.top,P._syncRange.bottom)),P._addMessagesToView(Oe,ge.REQUEST_MESSAGE)):(P._hasPrevious=!1,P._hasNext=!1),r._invokeResponse("remote",null,Oe)})).catch((function(L){if(Ca(L))throw L;r._invokeResponse("remote",L,null)}))):(this._setHasNextAndHasPrevious(i),r._invokeResponse("remote",null,i)),y.localCacheEnabled&&d.put(new qn({type:An.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,starting_point:this._startingPoint,measured_on:"initial_load",event:C?"cache_hit":"cache_miss",max_db_size:(D=(I=y.localCacheConfig)===null||I===void 0?void 0:I.maxSize)!==null&&D!==void 0?D:0,message_init_policy:n,use_local_cache:y.localCacheEnabled,collection_id:this._key}})),[2]}}))}))})),d.put(new O0({type:An.FEATURE_LOCALCACHE,data:{use_local_cache:c.localCacheEnabled,collection_interface:{message_init_policy:n,message:!0}}})),[2]}}))}))})),r},t.prototype.loadPrevious=function(){var n,e,r;return S(this,void 0,void 0,(function(){var i,a,s,l,c,d,p,g,_=this;return T(this,(function(y){switch(y.label){case 0:if(this._isDisposed)throw new X({code:ze.COLLECTION_DISPOSED,message:"Collection has been disposed."});return i=W.of(this._iid),a=i.cacheContext,s=i.statManager,l=i.logger,this._hasPrevious?this._isLoadingPrevious?(l.warn("Messages are already fetching."),[2,[]]):(this._isLoadingPrevious=!0,c=this.viewTop,d=[],[4,gr((function(){return S(_,void 0,void 0,(function(){var C;return T(this,(function(w){switch(w.label){case 0:return[4,this._getLocalMessages(c,{prevLimit:this._prevResultLimit,inclusive:!1})];case 1:return C=w.sent(),d=this._filterUnderOffsetMessage(C.messages),[2]}}))}))}))]):[2,[]];case 1:return y.sent(),p=d.length>=this._prevResultLimit,a.localCacheEnabled&&s.put(new qn({type:An.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,starting_point:this._startingPoint,measured_on:"load_prev",event:p?"cache_hit":"cache_miss",max_db_size:(e=(n=a.localCacheConfig)===null||n===void 0?void 0:n.maxSize)!==null&&e!==void 0?e:0,use_local_cache:a.localCacheEnabled,collection_id:this._key,message_init_policy:""}})),p&&!((r=this._backgroundSync)===null||r===void 0)&&r.isWrappingMessages(d)?[3,3]:(g=!1,[4,gr((function(){return S(_,void 0,void 0,(function(){var C,w,A,M,I,D,P,H=this;return T(this,(function(L){switch(L.label){case 0:return C=W.of(this._iid).cacheContext,[4,this._getRemoteMessages(c,{prevLimit:this._prevResultLimit,reverse:!0,checkingContinuousMessages:C.localCacheEnabled,sdkSource:Ko.EXTERNAL_COLLECTION})];case 1:return w=L.sent(),(d=this._filterUnderOffsetMessage(w.messages)).length>0&&((A=this._syncRange).extends.apply(A,Je([],Ye(d.map((function(G){return G.createdAt}))),!1)),!((M=this._backgroundSync)===null||M===void 0)&&M.range.overlap(this._syncRange)&&w.isContinuousMessages&&(g=!0,(I=this._backgroundSync)===null||I===void 0||I.range.extends(this._syncRange.top))),d=d.filter((function(G){return mo(H._messages,G)<0})),this._hasPrevious=d.length>=this._prevResultLimit,C.localCacheEnabled&&g&&s.put(new qn({type:An.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,starting_point:this._startingPoint,measured_on:"load_prev",event:"cache_fetch",max_db_size:(P=(D=C.localCacheConfig)===null||D===void 0?void 0:D.maxSize)!==null&&P!==void 0?P:0,use_local_cache:C.localCacheEnabled,collection_id:this._key,message_init_policy:""}})),[2]}}))}))}))]);case 2:return y.sent(),this._addMessagesToView(d,ge.REQUEST_MESSAGE),[3,4];case 3:this._hasPrevious=d.length>=this._prevResultLimit,d.length>0&&this._addMessagesToView(d,ge.REQUEST_MESSAGE),y.label=4;case 4:return this._isLoadingPrevious=!1,[2,d]}}))}))},t.prototype.loadNext=function(){var n,e,r;return S(this,void 0,void 0,(function(){var i,a,s,l,c,d,p,g,_=this;return T(this,(function(y){switch(y.label){case 0:if(this._isDisposed)throw new X({code:ze.COLLECTION_DISPOSED,message:"Collection has been disposed."});return i=W.of(this._iid),a=i.cacheContext,s=i.statManager,l=i.logger,this._hasNext?this._isLoadingNext?(l.warn("Messages are already fetching."),[2,[]]):(this._isLoadingNext=!0,c=this.viewBottom,d=[],[4,gr((function(){return S(_,void 0,void 0,(function(){var C;return T(this,(function(w){switch(w.label){case 0:return[4,this._getLocalMessages(c,{nextLimit:this._nextResultLimit,inclusive:!1})];case 1:return C=w.sent(),d=this._filterUnderOffsetMessage(C.messages),[2]}}))}))}))]):[2,[]];case 1:return y.sent(),p=d.length>=this._nextResultLimit,a.localCacheEnabled&&s.put(new qn({type:An.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,starting_point:this._startingPoint,measured_on:"load_next",event:p?"cache_hit":"cache_miss",max_db_size:(e=(n=a.localCacheConfig)===null||n===void 0?void 0:n.maxSize)!==null&&e!==void 0?e:0,use_local_cache:a.localCacheEnabled,collection_id:this._key,message_init_policy:""}})),p&&!((r=this._backgroundSync)===null||r===void 0)&&r.isWrappingMessages(d)?[3,3]:(g=!1,[4,gr((function(){return S(_,void 0,void 0,(function(){var C,w,A,M,I,D,P,H,L=this;return T(this,(function(G){switch(G.label){case 0:return C=W.of(this._iid).cacheContext,[4,this._getRemoteMessages(c,{nextLimit:this._nextResultLimit,reverse:!0,checkingHasNext:!0,checkingContinuousMessages:C.localCacheEnabled,sdkSource:Ko.EXTERNAL_COLLECTION})];case 1:return w=G.sent(),(d=this._filterUnderOffsetMessage(w.messages)).length>0&&((A=this._syncRange).extends.apply(A,Je([],Ye(d.map((function(Y){return Y.createdAt}))),!1)),!((M=this._backgroundSync)===null||M===void 0)&&M.range.overlap(this._syncRange)&&w.isContinuousMessages&&(g=!0,(I=this._backgroundSync)===null||I===void 0||I.range.extends(this._syncRange.bottom))),d=d.filter((function(Y){return mo(L._messages,Y)<0})),this._hasNext=(D=w.hasNext)!==null&&D!==void 0?D:d.length>=this._nextResultLimit,C.localCacheEnabled&&g&&s.put(new qn({type:An.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,starting_point:this._startingPoint,measured_on:"load_next",event:"cache_fetch",max_db_size:(H=(P=C.localCacheConfig)===null||P===void 0?void 0:P.maxSize)!==null&&H!==void 0?H:0,use_local_cache:C.localCacheEnabled,collection_id:this._key,message_init_policy:""}})),[2]}}))}))}))]);case 2:return y.sent(),this._addMessagesToView(d,ge.REQUEST_MESSAGE),[3,4];case 3:this._hasNext=d.length>=this._nextResultLimit,d.length>0&&this._addMessagesToView(d,ge.REQUEST_MESSAGE),y.label=4;case 4:return this._isLoadingNext=!1,[2,d]}}))}))},t.prototype.removeFailedMessage=function(n){return S(this,void 0,void 0,(function(){var e;return T(this,(function(r){switch(r.label){case 0:if(this._isDisposed)throw new X({code:ze.COLLECTION_DISPOSED,message:"Collection has been disposed."});return[4,this._channelManager.removeFailedMessageFromCache(n)];case 1:return r.sent(),(e=this._unsentMessages.findIndex((function(i){return i.reqId===n})))>-1&&this._unsentMessages.splice(e,1),[2]}}))}))},t.prototype.dispose=function(){var n,e,r,i=this;if(!this._isDisposed){this._isDisposed=!0;var a=W.of(this._iid),s=a.cacheContext,l=a.dispatcher;this._messages=[],this._clearCheckMyMutedTimer(),this._channel._runIfHandleableWithGroupChannel((function(c){c.myMemberState!==kr.NONE&&(i._channel._updateMessageCollectionLastAccessedAt(),l.dispatch(new It({channels:[i._channel],context:{source:ge.CHANNEL_LASTACCESSEDAT_UPDATED}})))})),s.localCacheEnabled&&(this._prevFill.stop(),this._nextFill.stop()),(n=this._backgroundSync)===null||n===void 0||n.close(),(e=this._changelogSync)===null||e===void 0||e.close(),(r=this._pollChangelogSync)===null||r===void 0||r.close(),this._channelManager.unsubscribeChannelEvent(this._key),this._channelManager.unsubscribeMessageEvent(this._key),this._connectionEventContext&&this._connectionEventContext.close()}},t})(),Mz=(function(t){function n(e,r){return t.call(this,e,z(z({},r),{channelManager:fi.of(e)}))||this}return U(n,t),n.prototype.keyOf=function(e){return e.messageId},n.prototype.initialize=function(e){return t.prototype.initialize.call(this,e)},n.prototype.setMessageCollectionHandler=function(e){this._setBaseMessageCollectionHandler(e)},n.prototype._addMessagesToView=function(e,r){var i,a,s=this,l=this._filterUnderOffsetMessage(e),c=[],d=[];try{for(var p=Re(l),g=p.next();!g.done;g=p.next()){var _=g.value;if(r===ge.SYNC_MESSAGE_FILL)if(_.messageId>0){if((A=mo(this._messages,_))<0){mo(this._unsentMessages,_)<0&&c.push(_);var y=ow(this._messages,_);this._messages.splice(y,0,_)}}else _ instanceof Rr&&(A=mo(this._unsentMessages,_))<0&&mo(this._messages,_)<0&&(this._unsentMessages.push(_),c.push(_));else if(_.messageId>0){if((A=mo(this._messages,_))<0){var C=mo(this._unsentMessages,_);C<0?c.push(_):(this._unsentMessages.splice(C,1),d.push(_)),y=ow(this._messages,_),this._messages.splice(y,0,_)}else d.push(_),this._messages[A]=_;if(_.updatedAt>0){var w=this._updateChildMessagesInView(_);d.push.apply(d,Je([],Ye(w),!1))}}else if(_ instanceof Rr){var A;(A=mo(this._unsentMessages,_))<0?mo(this._messages,_)<0&&(this._unsentMessages.push(_),c.push(_)):(d.push(_),this._unsentMessages[A]=_)}}}catch(M){i={error:M}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}Sc(r)&&$e((function(){return S(s,void 0,void 0,(function(){var M,I,D,P,H;return T(this,(function(L){return M={source:r},c.length>0&&((D=(I=this._handler)===null||I===void 0?void 0:I.onMessagesAdded)===null||D===void 0||D.call(I,M,this.channel,c)),d.length>0&&((H=(P=this._handler)===null||P===void 0?void 0:P.onMessagesUpdated)===null||H===void 0||H.call(P,M,this.channel,d)),[2]}))}))}))},n.prototype._updateMessagesToView=function(e,r){var i,a,s=this,l=[],c=[],d=[];try{for(var p=Re(e),g=p.next();!g.done;g=p.next()){var _,y=g.value;if(y.messageId>0)if((_=mo(this._messages,y))>=0)c.push(y),this._messages[_]=y;else{var C=mo(this._unsentMessages,y);if(C>=0){var w=Ye(this._unsentMessages.splice(C,1),1)[0];if(this.hasNext&&w)d.push(w);else{c.push(y);var A=ow(this._messages,y);this._messages.splice(A,0,y)}}else{var M=this._messages.map((function(I){return I.createdAt}));(y.createdAt<Math.min.apply(Math,Je([],Ye(M),!1))&&!this._hasPrevious||y.createdAt>Math.max.apply(Math,Je([],Ye(M),!1))&&!this._hasNext)&&l.push(y)}}else y instanceof Rr&&(_=mo(this._unsentMessages,y))>=0&&(c.push(y),this._unsentMessages[_]=y)}}catch(I){i={error:I}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}return Sc(r)&&$e((function(){return S(s,void 0,void 0,(function(){var I,D,P,H,L;return T(this,(function(G){return I={source:r},c.length>0?(P=(D=this._handler)===null||D===void 0?void 0:D.onMessagesUpdated)===null||P===void 0||P.call(D,I,this.channel,c):d.length>0?(L=(H=this._handler)===null||H===void 0?void 0:H.onMessagesDeleted)===null||L===void 0||L.call(H,I,this.channel,[],d):l.length>0&&this._addMessagesToView(l,r),[2]}))}))})),c},n})(Iz),Oz={coverUrl:void 0,coverImage:void 0,isDistinct:void 0,isPublic:void 0,isDiscoverable:void 0,accessCode:void 0,name:void 0,data:void 0,customType:void 0,operatorUserIds:void 0,messageSurvivalSeconds:void 0},kz=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.token,s=e.limit,l=e.order,c=e.mutedMemberFilter,d=e.memberStateFilter,p=e.nicknameStartsWithFilter,g=e.operatorFilter;return(r=t.call(this)||this).method=ye.GET,r.path="".concat(Ta,"/").concat(encodeURIComponent(i),"/members"),r.params={token:a,limit:s,order:l,muted_member_filter:c,member_state_filter:d,nickname_startswith:p,operator_filter:g,show_member_is_muted:!0,show_read_receipt:!0,show_delivery_receipt:!0},r}return U(n,t),n})(Ee),Rz=(function(t){function n(e,r){var i=t.call(this,e,r)||this;i.members=[];var a=r.next,s=r.members;return i.token=a,s&&s.length>0&&(i.members=s.map((function(l){return new Co(e,l)}))),i}return U(n,t),n})(Se);(function(t){t.ALL="all",t.MUTED="muted",t.UNMUTED="unmuted"})(f0||(f0={})),(function(t){t.MEMBER_NICKNAME_ALPHABETICAL="member_nickname_alphabetical",t.OPERATOR_THEN_MEMBER_ALPHABETICAL="operator_then_member_alphabetical"})(p0||(p0={})),(function(t){t.ALL="all",t.JOINED="joined_only",t.INVITED="invited_only",t.INVITED_BY_FRIEND="invited_by_friend",t.INVITED_BY_NON_FRIEND="invited_by_non_friend"})(m0||(m0={}));var Dz=(function(t){function n(e,r,i){var a,s,l,c,d=this;return(d=t.call(this,e,r,Rt.GROUP,i)||this).mutedMemberFilter=f0.ALL,d.memberStateFilter=m0.ALL,d.nicknameStartsWithFilter=null,d.operatorFilter=w1.ALL,d.order=p0.MEMBER_NICKNAME_ALPHABETICAL,d.mutedMemberFilter=(a=i.mutedMemberFilter)!==null&&a!==void 0?a:f0.ALL,d.memberStateFilter=(s=i.memberStateFilter)!==null&&s!==void 0?s:m0.ALL,d.nicknameStartsWithFilter=(l=i.nicknameStartsWithFilter)!==null&&l!==void 0?l:null,d.order=(c=i.order)!==null&&c!==void 0?c:p0.MEMBER_NICKNAME_ALPHABETICAL,d}return U(n,t),n.prototype._validate=function(){return t.prototype._validate.call(this)&&Nt(f0,this.mutedMemberFilter)&&Nt(m0,this.memberStateFilter)&&(Q("string",this.nicknameStartsWithFilter)||this.nicknameStartsWithFilter===null)&&Nt(w1,this.operatorFilter)&&Nt(p0,this.order)},n.prototype.next=function(){return S(this,void 0,void 0,(function(){var e,r,i,a,s,l;return T(this,(function(c){switch(c.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=W.of(this._iid).requestQueue,r=new kz(Qe(z(z({},this),{token:this._token}))),[4,e.send(r)]):[3,2]:[3,5];case 1:return i=c.sent(),a=i.as(Rz),s=a.members,l=a.token,this._token=l,this._hasNext=!!l,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw X.queryInProgress;case 4:return[3,6];case 5:throw X.invalidParameters;case 6:return[2]}}))}))},n})(Wu),xz=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.userId,s=e.accessCode;return(r=t.call(this)||this).method=ye.PUT,r.path="".concat(Ta,"/").concat(encodeURIComponent(i),"/accept"),r.params={user_id:a,access_code:s},r}return U(n,t),n})(Ee),Pz=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.channel=new Ao(e,r),i.channel.myMemberState=kr.JOINED,i}return U(n,t),n})(Se),Uz=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.isDistinct,s=e.isPublic,l=e.isDiscoverable,c=e.coverUrl,d=e.coverImage,p=e.accessCode,g=e.name,_=e.data,y=e.customType,C=e.operatorUserIds,w=e.messageSurvivalSeconds;return(r=t.call(this)||this).method=ye.PUT,r.path="".concat(Ta,"/").concat(encodeURIComponent(i)),r.params=Le({is_distinct:a,is_public:s,is_discoverable:l,name:g,data:_,custom_type:y,cover_url:c,cover_file:d,access_code:p,operator_ids:C,message_survival_seconds:w}),r}return U(n,t),n})(Ee),Lz=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.channel=new Ao(e,r),i}return U(n,t),n})(Se),Fz=(function(t){function n(e){var r=this,i=e.channelUrl;return(r=t.call(this)||this).method=ye.DELETE,r.path="".concat(Ta,"/").concat(encodeURIComponent(i)),r}return U(n,t),n})(Ee);(function(t){function n(e,r){return t.call(this,e,r)||this}U(n,t)})(Se);var Hz=(function(t){function n(e){var r=this,i=e.channelUrl;return(r=t.call(this)||this).method=ye.DELETE,r.path="".concat(Ta,"/").concat(encodeURIComponent(i),"/hide"),r}return U(n,t),n})(Ee);(function(t){function n(){return t!==null&&t.apply(this,arguments)||this}U(n,t)})(Se);var jz=(function(t){function n(e){var r=e.userId,i=e.channelUrl,a=e.countPreference,s=t.call(this)||this;return s.method=ye.PUT,s.path="".concat(nn,"/").concat(encodeURIComponent(r),"/count_preference/").concat(encodeURIComponent(i)),s.params={count_preference:a},s}return U(n,t),n})(Ee),Gz=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.countPreference=r.count_preference,i}return U(n,t),n})(Se),Vz=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.locale;return(r=t.call(this)||this).method=ye.PUT,r.path="".concat(Ta,"/").concat(encodeURIComponent(i),"/reset_user_history"),r.params=Le({locale:a}),r}return U(n,t),n})(Ee),Bz=(function(t){function n(e,r){var i=t.call(this,e,r)||this,a=r.ts_message_offset;return i.messageOffsetTimestamp=a,i}return U(n,t),n})(Se),zz=z(z({},uS),{scheduledAt:void 0,file:void 0,fileUrl:void 0,fileName:void 0,mimeType:void 0,fileSize:void 0,thumbnailSizes:void 0,requireAuth:!1}),qz=z(z({},VD),{scheduledAt:void 0}),Wz=(function(t){function n(e){var r,i,a=this;a=t.call(this)||this;var s=[];e.mentionType===ra.USERS&&(e.mentionedUserIds?s=e.mentionedUserIds:e.mentionedUsers&&(s=e.mentionedUsers.map((function(p){return p.userId}))));var l=e.channelType,c=e.channelUrl,d=e.scheduledMessageId;return a.method=ye.PUT,a.path="".concat(Xt(l),"/").concat(encodeURIComponent(c),"/scheduled_messages/").concat(encodeURIComponent(d)),a.params=Le(Qe({req_id:e.reqId,scheduled_at:e.scheduledAt,message_type:gg.FILE,url:e.fileUrl,file_name:e.fileName,file_size:e.fileSize,file_type:e.mimeType,thumbnails:(r=e._thumbnails)===null||r===void 0?void 0:r.map((function(p){return Qc.payloadify(p)})),custom_type:e.customType,data:e.data,require_auth:e.requireAuth,mention_type:e.mentionType,mentioned_user_ids:s,sorted_metaarray:(i=e.metaArrays)===null||i===void 0?void 0:i.map((function(p){return wa.payloadify(p)})),apple_critical_alert_options:e.appleCriticalAlertOptions?sl.payloadify(e.appleCriticalAlertOptions):null,push_option:e.pushNotificationDeliveryOption})),a}return U(n,t),n})(Ee),Kz=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.message=new Xr(e,r),i}return U(n,t),n})(Se),Yz=(function(t){function n(e){var r,i=this;i=t.call(this)||this;var a=[];e.mentionType===ra.USERS&&(e.mentionedUserIds?a=e.mentionedUserIds:e.mentionedUsers&&(a=e.mentionedUsers.map((function(d){return d.userId}))));var s=e.channelType,l=e.channelUrl,c=e.scheduledMessageId;return i.method=ye.PUT,i.path="".concat(Xt(s),"/").concat(encodeURIComponent(l),"/scheduled_messages/").concat(encodeURIComponent(c)),i.params=Le(Qe({req_id:e.reqId,scheduled_at:e.scheduledAt,message_type:gg.USER,message:e.message,custom_type:e.customType,data:e.data,mention_type:e.mentionType,mentioned_user_ids:a,sorted_metaarray:(r=e.metaArrays)===null||r===void 0?void 0:r.map((function(d){return wa.payloadify(d)})),apple_critical_alert_options:e.appleCriticalAlertOptions?sl.payloadify(e.appleCriticalAlertOptions):null,target_langs:e.translationTargetLanguages,push_option:e.pushNotificationDeliveryOption})),i}return U(n,t),n})(Ee);(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.message=new Ji(e,r),i}U(n,t)})(Se);var PM,UM,Qz=(function(t){function n(e){var r=t.call(this)||this,i=e.channelType,a=e.channelUrl,s=e.scheduledMessageId;return r.method=ye.DELETE,r.path="".concat(Xt(i),"/").concat(encodeURIComponent(a),"/scheduled_messages/").concat(encodeURIComponent(s)),r}return U(n,t),n})(Ee),$z=(function(t){function n(e){var r=t.call(this)||this,i=e.channelType,a=e.channelUrl,s=e.scheduledMessageId;return r.method=ye.POST,r.path="".concat(Xt(i),"/").concat(encodeURIComponent(a),"/scheduled_messages/").concat(encodeURIComponent(s),"/send_now"),r}return U(n,t),n})(Ee),Xz=(function(t){function n(e){var r=e.userId,i=e.channelUrl,a=e.pushTriggerOption,s=t.call(this)||this;return s.method=ye.PUT,s.path="".concat(nn,"/").concat(encodeURIComponent(r),"/push_preference/").concat(encodeURIComponent(i)),s.params={push_trigger_option:a},s}return U(n,t),n})(Ee),Zz=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.pushTriggerOption=r.push_trigger_option,i.enabled=r.enable,i}return U(n,t),n})(Se),Jz=(function(t){function n(e){var r=e.userId,i=e.channelUrl,a=t.call(this)||this;return a.method=ye.GET,a.path="".concat(nn,"/").concat(encodeURIComponent(r),"/push_preference/").concat(encodeURIComponent(i)),a}return U(n,t),n})(Ee),eq=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.pushTriggerOption=r.push_trigger_option,i.enabled=r.enable,i}return U(n,t),n})(Se),tq=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.channelType;return(r=t.call(this)||this).method=ye.GET,r.path="".concat(Xt(a),"/").concat(encodeURIComponent(i),"/message_purge_offset"),r}return U(n,t),n})(Ee),nq=(function(t){function n(e,r){var i=t.call(this,e,r)||this,a=r.message_purge_offset;return i.messageDeletionTimestamp=a,i}return U(n,t),n})(Se),LM=(function(){function t(n){this.url=n.channel_url,this.lastMessageTs=n.last_message_ts}return t.payloadify=function(n){return{channel_url:n.url,last_message_ts:n.lastMessageTs}},t})(),FM=(function(){function t(n){var e,r,i,a;this.type=n.type,this.ticketId=(e=n.ticket_id)!==null&&e!==void 0?e:void 0,this.timestamp=(r=n.timestamp)!==null&&r!==void 0?r:void 0,this.estimatedAgentJoinAt=(i=n.estimated_agent_join_at)!==null&&i!==void 0?i:void 0,this.requestedAt=(a=n.requested_at)!==null&&a!==void 0?a:void 0}return t.payloadify=function(n){return Le({type:n.type,ticket_id:n.ticketId,timestamp:n.timestamp,estimated_agent_join_at:n.estimatedAgentJoinAt,requested_at:n.requestedAt})},t})(),HM=(function(){function t(n){this.isResolved=n.is_resolved,this.determinedBy=n.determined_by}return t.payloadify=function(n){return{is_resolved:n.isResolved,determined_by:n.determinedBy}},t})();(function(t){t.DEFAULT="default",t.PROACTIVE="proactive"})(PM||(PM={})),(function(t){t.OPEN="open",t.CLOSED="closed"})(UM||(UM={}));var _o,yo,x0=(function(){function t(n){var e,r,i,a,s,l;this.id=n.id,this.aiAgentId=n.ai_agent_id,this.type=n.conversation_type,this.status=n.status,this.channelInfo=new LM(n.channel),this.summary=(e=n.summary_text)!==null&&e!==void 0?e:void 0,this.csat=(r=n.csat)!==null&&r!==void 0?r:void 0,this.csatReason=(i=n.csat_reason)!==null&&i!==void 0?i:void 0,this.csatExpireAt=(a=n.csat_expire_at)!==null&&a!==void 0?a:void 0,this.resolution=n.resolution?new HM(n.resolution):void 0,this.topics=(s=n.topics)!==null&&s!==void 0?s:[],this.handoff=n.handoff?new FM(n.handoff):void 0,this.handedOverAt=(l=n.handed_over_at)!==null&&l!==void 0?l:void 0}return t.payloadify=function(n){return Le(Qe({id:n.id,ai_agent_id:n.aiAgentId,conversation_type:n.type,status:n.status,channel:LM.payloadify(n.channelInfo),summary_text:n.summary,csat:n.csat,csat_reason:n.csatReason,csat_expire_at:n.csatExpireAt,resolution:n.resolution&&HM.payloadify(n.resolution),topics:n.topics,handoff:n.handoff&&FM.payloadify(n.handoff),handed_over_at:n.handedOverAt}))},t})(),rq=(function(t){function n(e){var r=this,i=e.channelUrl;return(r=t.call(this)||this).method=ye.POST,r.path="".concat(Y3,"/").concat(encodeURIComponent(i),"/submit_csat"),r.params=Le({csat:e.csat,csat_reason:e.csatReason,csat_type:e.csatType,is_resolved:e.isResolved,resolution_score:e.resolutionScore,csat_started_at:e.csatStartedAt}),r}return U(n,t),n})(Ee),iq=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.conversation=new x0(r.conversation),i}return U(n,t),n})(Se),aq=(function(t){function n(e){var r=this,i=e.channelUrl;return(r=t.call(this)||this).method=ye.POST,r.path="".concat(Y3,"/").concat(encodeURIComponent(i),"/handoff"),r.params={},r}return U(n,t),n})(Ee),sq=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.conversation=new x0(r.conversation),i}return U(n,t),n})(Se),oq=(function(t){function n(e){var r=this,i=e.channelUrl;return(r=t.call(this)||this).method=ye.POST,r.path="".concat(Y3,"/").concat(encodeURIComponent(i),"/close_conversation"),r.params={},r}return U(n,t),n})(Ee),lq=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.conversation=new x0(r.conversation),i}return U(n,t),n})(Se),uq=(function(t){function n(e){var r=e.aiAgentId,i=e.channelUrl,a=e.context,s=t.call(this)||this;return s.method=ye.PUT,s.path="".concat(K3,"/ai_agents/").concat(encodeURIComponent(r),"/channels/").concat(encodeURIComponent(i),"/ai_agent_context"),s.params=Le(Qe({context:a})),s}return U(n,t),n})(Ee),cq=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.contextObject=r,i}return U(n,t),n})(Se),dq=(function(t){function n(e){var r=e.aiAgentId,i=e.channelUrl,a=t.call(this)||this;return a.method=ye.GET,a.path="".concat(K3,"/ai_agents/").concat(encodeURIComponent(r),"/channels/").concat(encodeURIComponent(i),"/ai_agent_context"),a}return U(n,t),n})(Ee),hq=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.contextObject=r,i}return U(n,t),n})(Se),fq=(function(t){function n(e){var r=e.aiAgentId,i=e.channelUrl,a=e.context,s=t.call(this)||this;return s.method=ye.PATCH,s.path="".concat(K3,"/ai_agents/").concat(encodeURIComponent(r),"/channels/").concat(encodeURIComponent(i),"/ai_agent_context"),s.params=Le(Qe({context:a})),s}return U(n,t),n})(Ee),pq=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.contextObject=r,i}return U(n,t),n})(Se),jM=(function(){function t(n){this.type=n.type,this.ticketStatus=n.ticket_status}return t.payloadify=function(n){return Le({type:n.type,ticket_status:n.ticketStatus})},t})();(function(t){t.ALL="all",t.UNREAD_MESSAGE_COUNT_ONLY="unread_message_count_only",t.UNREAD_MENTION_COUNT_ONLY="unread_mention_count_only",t.OFF="off"})(_o||(_o={})),(function(t){t.UNHIDDEN="unhidden",t.HIDDEN_ALLOW_AUTO_UNHIDE="hidden_allow_auto_unhide",t.HIDDEN_PREVENT_AUTO_UNHIDE="hidden_prevent_auto_unhide"})(yo||(yo={}));var g0,Ao=(function(t){function n(e,r){var i,a,s,l,c,d,p,g,_,y,C,w,A,M,I,D,P,H,L,G,Y,F=this;return(F=t.call(this,e,r)||this)._unreadMemberStateMap=new Map,F._undeliveredMemberStateMap=new Map,F._typingStatus=new Map,F._lastMemberCountUpdated=0,F._typingStarted=0,F._typingEnded=0,F._aiAgentAdditionalData={},F.isDistinct=!1,F.isSuper=!1,F.isBroadcast=!1,F.isExclusive=!1,F.isPublic=!1,F.isDiscoverable=!0,F.isChatNotification=!1,F.isAccessCodeRequired=!1,F.isPushEnabled=!1,F.unreadMessageCount=0,F.unreadMentionCount=0,F.totalUnreadReplyCount=0,F.members=[],F.memberCount=0,F.joinedMemberCount=0,F.hiddenState=yo.UNHIDDEN,F.lastMessage=null,F.messageOffsetTimestamp=0,F.messageSurvivalSeconds=-1,F.myMemberState=kr.NONE,F.myRole=Jo.NONE,F.myMutedState=Qo.UNMUTED,F.myLastRead=0,F.myCountPreference=_o.ALL,F.myPushTriggerOption=tp.DEFAULT,F.inviter=null,F.invitedAt=0,F.joinedAt=0,F.lastPinnedMessage=null,F.conversation=null,F.helpdeskInfo=null,F._latestMessageInfo=null,F._pinnedMessagesUpdatedAt=0,F._myMutedRemainingTime=-1,F._messageDeletionTimestamp=0,F.channelType=Rt.GROUP,F.isDistinct=(a=r.is_distinct)!==null&&a!==void 0&&a,F.isSuper=(s=r.is_super)!==null&&s!==void 0&&s,F.isBroadcast=(l=r.is_broadcast)!==null&&l!==void 0&&l,F.isExclusive=(c=r.is_exclusive)!==null&&c!==void 0&&c,F.isPublic=(d=r.is_public)!==null&&d!==void 0&&d,F.isDiscoverable=(p=r.is_discoverable)!==null&&p!==void 0?p:F.isPublic,F.isChatNotification=(g=r.is_chat_notification)!==null&&g!==void 0&&g,F.isAccessCodeRequired=(_=r.is_access_code_required)!==null&&_!==void 0&&_,F.isPushEnabled=(y=r.is_push_enabled)!==null&&y!==void 0&&y,Array.isArray(r.members)&&(i=F.members).push.apply(i,Je([],Ye(r.members.map((function(ne){return new Co(F._iid,ne)}))),!1)),F.memberCount=(C=r.member_count)!==null&&C!==void 0?C:0,F.joinedMemberCount=(w=r.joined_member_count)!==null&&w!==void 0?w:0,F.hiddenState=Nt(yo,r.hidden_state)?r.hidden_state:yo.UNHIDDEN,F.messageOffsetTimestamp=(A=r.ts_message_offset)!==null&&A!==void 0?A:0,F.messageSurvivalSeconds=(M=r.message_survival_seconds)!==null&&M!==void 0?M:-1,F.lastMessage=r.last_message?ia(F._iid,z({channel_type:F.channelType},r.last_message)):null,r.read_receipt&&Object.keys(r.read_receipt).forEach((function(ne){Q("number",r.read_receipt[ne])&&F._updateUnreadMemberState(ne,r.read_receipt[ne])})),r.delivery_receipt&&Object.keys(r.delivery_receipt).forEach((function(ne){Q("number",r.delivery_receipt[ne])&&F._updateUndeliveredMemberState(ne,r.delivery_receipt[ne])})),F.myMemberState=Nt(kr,r.member_state)?r.member_state:kr.NONE,F.myRole=Nt(Jo,r.my_role)?r.my_role:Jo.NONE,Nt(Qo,r.is_muted)?F.myMutedState=r.is_muted:Q("boolean",r.is_muted)?F.myMutedState=r.is_muted?Qo.MUTED:Qo.UNMUTED:F.myMutedState=Qo.UNMUTED,F.myCountPreference=Nt(_o,r.count_preference)?r.count_preference:_o.ALL,F.myPushTriggerOption=Nt(tp,r.push_trigger_option)?r.push_trigger_option:tp.ALL,F.myLastRead=(I=r.user_last_read)!==null&&I!==void 0?I:0,F.inviter=r.inviter?new St(F._iid,r.inviter):null,F.invitedAt=(D=r.invited_at)!==null&&D!==void 0?D:0,F.joinedAt=(P=r.joined_ts)!==null&&P!==void 0?P:0,F._updateUnreadCount((H=r.unread_message_count)!==null&&H!==void 0?H:0,(L=r.unread_mention_count)!==null&&L!==void 0?L:0),F.totalUnreadReplyCount=(G=r.total_unread_thread_message_count)!==null&&G!==void 0?G:0,F.lastPinnedMessage=r.latest_pinned_message?ia(F._iid,z({channel_type:F.channelType},r.latest_pinned_message)):null,F.conversation=r.conversation?new x0(r.conversation):null,F.helpdeskInfo=r.helpdesk_info?new jM(r.helpdesk_info):null,r.latest_message&&(F._latestMessageInfo={messageId:r.latest_message.message_id,createdAt:r.latest_message.created_at}),F._aiAgentAdditionalData={hasBot:r.has_bot,hasAIBot:r.has_ai_bot,isAIAgent:r.is_ai_agent_channel,isDesk:r.is_desk_channel},F._messageDeletionTimestamp=(Y=r.message_purge_offset)!==null&&Y!==void 0?Y:0,F}return U(n,t),Object.defineProperty(n.prototype,"isHidden",{get:function(){return this.hiddenState!==yo.UNHIDDEN},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isTyping",{get:function(){return this._typingStatus.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"cachedUnreadMemberState",{get:function(){var e,r,i={};try{for(var a=Re(this._unreadMemberStateMap),s=a.next();!s.done;s=a.next()){var l=Ye(s.value,2),c=l[0],d=l[1];i[c]=d}}catch(p){e={error:p}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return i},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"cachedUndeliveredMemberState",{get:function(){var e,r,i={};try{for(var a=Re(this._undeliveredMemberStateMap),s=a.next();!s.done;s=a.next()){var l=Ye(s.value,2),c=l[0],d=l[1];i[c]=d}}catch(p){e={error:p}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return i},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hasBot",{get:function(){return!!this._aiAgentAdditionalData.hasBot},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hasAiBot",{get:function(){return!!this._aiAgentAdditionalData.hasAIBot},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isDesk",{get:function(){return!!this._aiAgentAdditionalData.isDesk},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isAIAgent",{get:function(){return!!this._aiAgentAdditionalData.isAIAgent},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"messageDeletionTimestamp",{get:function(){return this._messageDeletionTimestamp},enumerable:!1,configurable:!0}),n.payloadify=function(e,r){r===void 0&&(r=!1);var i=z(z({},t.payloadify.call(this,e,r)),{is_access_code_required:e.isAccessCodeRequired,is_distinct:e.isDistinct,is_super:e.isSuper,is_broadcast:e.isBroadcast,is_exclusive:e.isExclusive,is_public:e.isPublic,is_discoverable:e.isDiscoverable,is_muted:e.myMutedState,is_push_enabled:e.isPushEnabled,unread_message_count:e.unreadMessageCount,unread_mention_count:e.unreadMentionCount,total_unread_thread_message_count:e.totalUnreadReplyCount,push_trigger_option:e.myPushTriggerOption,count_preference:e.myCountPreference,hidden_state:e.hiddenState,member_count:e.memberCount,joined_member_count:e.joinedMemberCount,member_state:e.myMemberState,my_role:e.myRole,user_last_read:e.myLastRead,ts_message_offset:e.messageOffsetTimestamp,message_survival_seconds:e.messageSurvivalSeconds,read_receipt:e.cachedUnreadMemberState,delivery_receipt:e.cachedUndeliveredMemberState,members:e.members.map((function(a){return Co.payloadify(a)})),last_message:e.lastMessage?gN(e.lastMessage):null,inviter:e.inviter?St.payloadify(e.inviter):null,invited_at:e.invitedAt,joined_ts:e.joinedAt,latest_pinned_message:e.lastPinnedMessage?gN(e.lastPinnedMessage):null,latest_message:e._latestMessageInfo?{message_id:e._latestMessageInfo.messageId,created_at:e._latestMessageInfo.createdAt}:null,has_bot:e._aiAgentAdditionalData.hasBot,has_ai_bot:e._aiAgentAdditionalData.hasAIBot,is_desk_channel:e._aiAgentAdditionalData.isDesk,is_ai_agent_channel:e._aiAgentAdditionalData.isAIAgent,message_purge_offset:e.messageDeletionTimestamp,conversation:e.conversation?x0.payloadify(e.conversation):null,helpdesk_info:e.helpdeskInfo?jM.payloadify(e.helpdeskInfo):null});return r?i:Le(Qe(i))},n.prototype._shouldUpdateLastMessageWith=function(e){if(e.silent)return!1;var r=W.of(this._iid).appInfo;switch(r?.lastMessageThreadingPolicy){case ap.NONE:case ap.INCLUDE_REPLY:break;case ap.EXCLUDE_REPLY:if(e.parentMessageId>0)return!1;break;case ap.INCLUDE_REPLY_TO_CHANNEL:if(e instanceof Rr&&e.parentMessageId>0&&!e.replyToChannel)return!1}return!this.lastMessage||this.lastMessage.createdAt<e.createdAt||this.lastMessage.createdAt===e.createdAt&&this.lastMessage.messageId===e.messageId&&this.lastMessage.updatedAt<=e.updatedAt},n.prototype._tryUpdateLastMessageAndCallEvents=function(e,r){var i=W.of(this._iid).dispatcher,a=fi.of(this._iid);this._updateLastMessage(r),a.handlers.map((function(s){s.onChannelChanged&&s.onChannelChanged(e)})),i.dispatch(new It({channels:[e],context:{source:ge.EVENT_MESSAGE_SENT}}))},n.prototype._shouldUpdateUnreadCountWith=function(e){var r=W.of(this._iid).appInfo;switch(r?.unreadCountThreadingPolicy){case ip.NONE:case ip.INCLUDE_REPLY:break;case ip.EXCLUDE_REPLY:if(e.parentMessageId>0)return!1;break;case ip.INCLUDE_REPLY_TO_CHANNEL:if(e instanceof Rr&&e.parentMessageId>0&&!e.replyToChannel)return!1}return!0},n.prototype._updateLastMessage=function(e){return!!this._shouldUpdateLastMessageWith(e)&&(this.lastMessage=e,!0)},n.prototype._updateUnreadCount=function(e,r){if(typeof e=="number"&&e>=0)if(this.myCountPreference===_o.ALL||this.myCountPreference===_o.UNREAD_MESSAGE_COUNT_ONLY)if(this.isExclusive||this.isSuper||this.isBroadcast){var i=W.of(this._iid).maxSuperGroupChannelUnreadCount;this.unreadMessageCount=i&&e>=i?i:e}else this.unreadMessageCount=e;else this.unreadMessageCount=0;else this.unreadMessageCount=0;typeof r=="number"&&r>=0&&(this.myCountPreference===_o.ALL||this.myCountPreference===_o.UNREAD_MENTION_COUNT_ONLY)?this.unreadMentionCount=r:this.unreadMentionCount=0},n.prototype._updateUnreadMemberState=function(e,r,i){i===void 0&&(i=!1);var a=this._unreadMemberStateMap.get(e);return!!(!a||i||!i&&a<r)&&a!==r&&(this._unreadMemberStateMap.set(e,r),W.of(this._iid).sdkState.userId===e&&(this.myLastRead=r),!0)},n.prototype._updateUndeliveredMemberState=function(e,r){var i=this._undeliveredMemberStateMap.get(e);return(!i||i<r)&&(this._undeliveredMemberStateMap.set(e,r),!0)},n.prototype._updateTypingStatus=function(e,r){r===void 0&&(r=new Date().getTime()),r>0?this._typingStatus.set(e.userId,{user:e,ts:r}):this._typingStatus.delete(e.userId)},n.prototype._clearTypingStatus=function(){this._typingStatus.clear(),this._typingStarted=0,this._typingEnded=0},n.prototype._update=function(e){e._typingStatus=this._typingStatus,e._typingStarted=this._typingStarted,e._typingEnded=this._typingEnded,t.prototype._update.call(this,e)},n.prototype._setLatestMemberCount=function(e,r,i){var a=!1;return i>=this._lastMemberCountUpdated&&(this._lastMemberCountUpdated=i,a=e!==this.memberCount||r!==this.joinedMemberCount,this.memberCount=e,this.joinedMemberCount=r),a},n.prototype.isReadMessage=function(e){var r=W.of(this._iid).sdkState,i=this._unreadMemberStateMap.get(r.userId);return!!i&&i>=e.createdAt},n.prototype.serialize=function(){var e=this;return kg(this,(function(r){r.cachedUnreadMemberState=e.cachedUnreadMemberState,r.cachedUndeliveredMemberState=e.cachedUndeliveredMemberState,Object.assign(r,e._serializeCachedMetaData())}))},n.prototype.createMessageCollection=function(e){return e===void 0&&(e={}),new Mz(this._iid,z(z({},e),{channel:this}))},n.prototype.createMemberListQuery=function(e){return e===void 0&&(e={}),new Dz(this._iid,this.url,e)},n.prototype.createThreadedParentMessageListQuery=function(e){return e===void 0&&(e={}),new TB(this._iid,this.url,this.channelType,e)},n.prototype.addMember=function(e,r){if(r===void 0&&(r=0),!this.isExclusive&&!this.isSuper&&!this.isBroadcast){var i=this.members.findIndex((function(s){return s.userId===e.userId}));if(i>-1){var a=this.members[i];a.state===kr.JOINED&&(e.state=a.state),this.members.splice(i,1),this.memberCount--}this.members.push(e),this.memberCount++,this._updateUnreadMemberState(e.userId,r),this._updateUndeliveredMemberState(e.userId,r)}},n.prototype.removeMember=function(e){if(!this.isExclusive&&!this.isSuper&&!this.isBroadcast){var r=e instanceof Co?e.userId:e,i=this.members.findIndex((function(a){return a.userId===r}));if(i>-1)return this.members.splice(i,1),this.memberCount--,!0}return!1},n.prototype.getUnreadMemberCount=function(e){var r,i;if(e instanceof Rr&&!this.isExclusive&&!this.isSuper&&!this.isBroadcast){var a=W.of(this._iid).sdkState,s=e.createdAt,l=0;try{for(var c=Re(this.members),d=c.next();!d.done;d=c.next()){var p=d.value;a.userId!==p.userId&&p.state===kr.JOINED&&e.sender.userId!==p.userId&&(this.cachedUnreadMemberState[p.userId]||0)<s&&l++}}catch(g){r={error:g}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}return l}return 0},n.prototype.getUndeliveredMemberCount=function(e){var r,i;if(e instanceof Rr&&!this.isExclusive&&!this.isSuper&&!this.isBroadcast){var a=W.of(this._iid).sdkState,s=e.createdAt,l=0;try{for(var c=Re(this.members),d=c.next();!d.done;d=c.next()){var p=d.value;a.userId!==p.userId&&p.state===kr.JOINED&&e.sender.userId!==p.userId&&(this.cachedUndeliveredMemberState[p.userId]||0)<s&&l++}}catch(g){r={error:g}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}return l}return 0},n.prototype.getReadMembers=function(e,r){var i=this;r===void 0&&(r=!1);var a=W.of(this._iid).sdkState;if(!a.userId||this.isExclusive||this.isSuper||this.isBroadcast)return[];var s=e instanceof Rr?e.sender:null,l=[];return this.members.forEach((function(c){if(r||c.userId!==a.userId&&c.userId!==s?.userId){var d=i._unreadMemberStateMap.get(c.userId);d&&d>=e.createdAt&&l.push(c)}})),l},n.prototype.getUnreadMembers=function(e,r){var i=this;r===void 0&&(r=!1);var a=W.of(this._iid).sdkState;if(!a.userId||this.isExclusive||this.isSuper||this.isBroadcast)return[];var s=e instanceof Rr?e.sender:null,l=[];return this.members.forEach((function(c){if(r||c.userId!==a.userId&&c.userId!==s?.userId){var d=i._unreadMemberStateMap.get(c.userId);d&&d<e.createdAt&&l.push(c)}})),l},n.prototype.getReadStatus=function(e){var r=this;e===void 0&&(e=!1);var i=W.of(this._iid).sdkState;if(!i.userId||this.isExclusive||this.isSuper||this.isBroadcast)return null;var a={};return this.members.forEach((function(s){if(e||s.userId!==i.userId){var l=r._unreadMemberStateMap.get(s.userId);a[s.userId]=new xD(r._iid,{channel_url:r.url,channel_type:r.channelType,user:Co.payloadify(s),ts:l??0})}})),a},n.prototype.getDeliveryStatus=function(e){var r=this;e===void 0&&(e=!0);var i=W.of(this._iid).sdkState;if(!i.userId||this.isExclusive||this.isSuper||this.isBroadcast)return null;var a={};return this.members.forEach((function(s){if(e||s.userId!==i.userId){var l=r._undeliveredMemberStateMap.get(s.userId);a[s.userId]=new kB(r._iid,{channel_url:r.url,channel_type:r.channelType,user:Co.payloadify(s),ts:l??0})}})),a},n.prototype.getTypingUsers=function(){var e=[];return this._typingStatus.forEach((function(r){var i=r.user;e.push(i)})),e},n.prototype.invalidateTypingStatus=function(){var e=this;if(!this.isTyping)return!1;var r=W.of(this._iid).typingIndicatorInvalidateTime,i=Date.now(),a=!1;return this._typingStatus.forEach((function(s,l){var c=s.ts;i-c>=r&&(e._typingStatus.delete(l),a=!0)})),a},n.prototype.refresh=function(){return S(this,void 0,void 0,(function(){return T(this,(function(e){return[2,this._refresh()]}))}))},n.prototype._refresh=function(e){return e===void 0&&(e=!1),S(this,void 0,void 0,(function(){var r,i,a,s,l,c;return T(this,(function(d){switch(d.label){case 0:return r=W.of(this._iid),i=r.requestQueue,a=r.dispatcher,s=new AN({channelUrl:this.url}),[4,i.send(s)];case 1:return l=d.sent(),c=l.as(IN).channel,this._update(c),e||a.dispatch(new It({channels:[c],context:{source:ge.REFRESH_CHANNEL}})),[2,this]}}))}))},n.prototype.freeze=function(){return S(this,void 0,void 0,(function(){return T(this,(function(e){switch(e.label){case 0:return[4,t.prototype.freeze.call(this)];case 1:return e.sent(),W.of(this._iid).dispatcher.dispatch(new It({channels:[this],context:{source:ge.EVENT_CHANNEL_FROZEN},isWebSocketEventComing:!0})),[2]}}))}))},n.prototype.unfreeze=function(){return S(this,void 0,void 0,(function(){return T(this,(function(e){switch(e.label){case 0:return[4,t.prototype.unfreeze.call(this)];case 1:return e.sent(),W.of(this._iid).dispatcher.dispatch(new It({channels:[this],context:{source:ge.EVENT_CHANNEL_UNFROZEN},isWebSocketEventComing:!0})),[2]}}))}))},n.prototype.updateChannel=function(e){return S(this,void 0,void 0,(function(){var r,i,a,s,l,c,d;return T(this,(function(p){switch(p.label){case 0:return r=z(z({},Oz),e),Te((function(g){return Q("string",g.coverUrl,!0)&&(Ai(g.coverImage)||Q("string",g.coverImage,!0))&&Q("boolean",g.isDistinct,!0)&&Q("boolean",g.isPublic,!0)&&Q("boolean",g.isDiscoverable,!0)&&Q("string",g.accessCode,!0)&&Q("string",g.name,!0)&&Q("string",g.data,!0)&&Q("string",g.customType,!0)&&Tt("string",g.operatorUserIds,!0)&&Q("number",g.messageSurvivalSeconds,!0)})(r)).throw(X.invalidParameters),i=W.of(this._iid),a=i.dispatcher,s=i.requestQueue,l=new Uz(z({channelUrl:this.url},r)),[4,s.send(l)];case 1:return c=p.sent(),d=c.as(Lz).channel,this._update(d),a.dispatch(new It({channels:[d],context:{source:ge.EVENT_CHANNEL_UPDATED},isWebSocketEventComing:!0})),[2,this]}}))}))},n.prototype.invite=function(e){return S(this,void 0,void 0,(function(){return T(this,(function(r){return Te(e.every((function(i){return i instanceof St}))).throw(X.invalidParameters),[2,this.inviteWithUserIds(e.map((function(i){return i.userId})))]}))}))},n.prototype.inviteWithUserIds=function(e){return S(this,void 0,void 0,(function(){var r,i,a,s,l,c,d;return T(this,(function(p){switch(p.label){case 0:return Te(Tt("string",e)).throw(X.invalidParameters),r=W.of(this._iid),i=r.dispatcher,a=r.requestQueue,s=r.sessionManager,l=new sz({channelUrl:this.url,userIds:e}),[4,a.send(l)];case 1:return c=p.sent(),d=c.as(oz).channel,this._update(d),i.dispatch(new It({channels:[d],context:{source:ge.EVENT_CHANNEL_INVITED,inviter:s.currentUser,invitees:[]},isWebSocketEventComing:!0})),[2,this]}}))}))},n.prototype.join=function(e){return S(this,void 0,void 0,(function(){var r,i,a,s,l,c,d;return T(this,(function(p){switch(p.label){case 0:return Te(Q("string",e,!0)).throw(X.invalidParameters),r=W.of(this._iid),i=r.dispatcher,a=r.sdkState,s=r.requestQueue,l=new tz({channelUrl:this.url,userId:a.userId,accessCode:e}),[4,s.send(l)];case 1:return c=p.sent(),(d=c.as(nz).channel).myMemberState=this.myMemberState=kr.JOINED,this._update(d),i.dispatch(new It({channels:[d],context:{source:ge.EVENT_CHANNEL_JOINED,users:[]},isWebSocketEventComing:!0})),[2,this]}}))}))},n.prototype.leave=function(e){return e===void 0&&(e=!1),S(this,void 0,void 0,(function(){var r,i,a,s;return T(this,(function(l){switch(l.label){case 0:return r=W.of(this._iid),i=r.sdkState,a=r.requestQueue,s=new iz({channelUrl:this.url,userId:i.userId,shouldRemoveOperatorStatus:e}),[4,a.send(s)];case 1:return l.sent(),this.myMemberState=kr.NONE,[2]}}))}))},n.prototype.acceptInvitation=function(e){return S(this,void 0,void 0,(function(){var r,i,a,s,l,c,d;return T(this,(function(p){switch(p.label){case 0:return Te(Q("string",e,!0)).throw(X.invalidParameters),r=W.of(this._iid),i=r.dispatcher,a=r.sdkState,s=r.requestQueue,l=new xz({channelUrl:this.url,userId:a.userId,accessCode:e}),[4,s.send(l)];case 1:return c=p.sent(),(d=c.as(Pz).channel).myMemberState=this.myMemberState=kr.JOINED,this._update(d),i.dispatch(new It({channels:[d],context:{source:ge.EVENT_CHANNEL_ACCEPTED_INVITE},isWebSocketEventComing:!0})),[2,this]}}))}))},n.prototype.declineInvitation=function(){return S(this,void 0,void 0,(function(){var e,r,i,a;return T(this,(function(s){switch(s.label){case 0:return e=W.of(this._iid),r=e.sdkState,i=e.requestQueue,a=new uz({channelUrl:this.url,userId:r.userId}),[4,i.send(a)];case 1:return s.sent(),this.myMemberState=kr.NONE,[2,this]}}))}))},n.prototype.sendUserMessage=function(e){var r=this,i=new Fs,a=W.of(this._iid).dispatcher,s=z_.of(this._iid);return t.prototype.sendUserMessage.call(this,e).onPending((function(l){s.completeCurrentAndProcessNextAutoResend(l),i._trigger(l)})).onFailed((function(l,c){c&&s.completeCurrentAndProcessNextAutoResend(c),i._triggerFailed(l,c)})).onSucceeded((function(l){s.completeCurrentAndProcessNextAutoResend(l),r._updateLastMessage(l),fi.of(r._iid).handlers.map((function(c){c.onChannelChanged&&c.onChannelChanged(r)})),a.dispatch(new It({channels:[r],context:{source:ge.EVENT_MESSAGE_SENT}})),i._trigger(l)})),i},n.prototype.updateUserMessage=function(e,r){return S(this,void 0,void 0,(function(){var i,a,s,l,c=this;return T(this,(function(d){switch(d.label){case 0:return i=W.of(this._iid).dispatcher,[4,t.prototype.updateUserMessage.call(this,e,r)];case 1:return a=d.sent(),s=this._updateLastMessage(a),l=!1,this.lastPinnedMessage&&this.lastPinnedMessage.messageId===a.messageId&&(this.lastPinnedMessage=a,s=!0,l=!0),s&&(fi.of(this._iid).handlers.map((function(p){p.onChannelChanged&&p.onChannelChanged(c)})),i.dispatch(new It({channels:[this],context:{source:l?ge.EVENT_PINNED_MESSAGE_UPDATED:ge.EVENT_MESSAGE_UPDATED}}))),l&&fi.of(this._iid).handlers.map((function(p){p.onPinnedMessageUpdated&&p.onPinnedMessageUpdated(c)})),i.dispatch(new lr({messages:[a],source:ge.EVENT_MESSAGE_UPDATED})),[2,a]}}))}))},n.prototype._autoResendUserMessage=function(e){var r=this,i=new Fs,a=W.of(this._iid).dispatcher,s=z_.of(this._iid);return t.prototype._autoResendUserMessage.call(this,e).onPending((function(l){s.completeCurrentAndProcessNextAutoResend(l),i._trigger(l)})).onFailed((function(l,c){s.completeCurrentAndProcessNextAutoResend(c),i._triggerFailed(l,c)})).onSucceeded((function(l){var c=fi.of(r._iid);s.completeCurrentAndProcessNextAutoResend(l),r._updateLastMessage(l),c.handlers.map((function(d){d.onChannelChanged&&d.onChannelChanged(r)})),a.dispatch(new It({channels:[r],context:{source:ge.EVENT_MESSAGE_SENT}})),i._trigger(l)})),i},n.prototype.sendFileMessage=function(e){var r=this,i=new Fs,a=W.of(this._iid).dispatcher,s=z_.of(this._iid);return t.prototype.sendFileMessage.call(this,e).onPending((function(l){s.completeCurrentAndProcessNextAutoResend(l),i._trigger(l)})).onFailed((function(l,c){c&&s.completeCurrentAndProcessNextAutoResend(c),i._triggerFailed(l,c)})).onSucceeded((function(l){var c=fi.of(r._iid);s.completeCurrentAndProcessNextAutoResend(l),r._updateLastMessage(l),c.handlers.map((function(d){d.onChannelChanged&&d.onChannelChanged(r)})),a.dispatch(new It({channels:[r],context:{source:ge.EVENT_MESSAGE_SENT}})),i._trigger(l)})),i},n.prototype.sendMultipleFilesMessage=function(e){var r=this,i=new VE,a=W.of(this._iid).dispatcher;return t.prototype.sendMultipleFilesMessage.call(this,e).onPending((function(s){i._trigger(s)})).onFailed((function(s,l){i._triggerFailed(s,l)})).onSucceeded((function(s){var l=fi.of(r._iid);r._updateLastMessage(s),l.handlers.map((function(c){c.onChannelChanged&&c.onChannelChanged(r)})),a.dispatch(new It({channels:[r],context:{source:ge.EVENT_MESSAGE_SENT}})),i._trigger(s)})).onFileUploaded((function(s,l,c,d){i._triggerOnFileUploaded(s,l,c,d)})),i},n.prototype.updateFileMessage=function(e,r){return S(this,void 0,void 0,(function(){var i,a,s,l,c=this;return T(this,(function(d){switch(d.label){case 0:return i=W.of(this._iid).dispatcher,[4,t.prototype.updateFileMessage.call(this,e,r)];case 1:return a=d.sent(),s=this._updateLastMessage(a),l=!1,this.lastPinnedMessage&&this.lastPinnedMessage.messageId===a.messageId&&(this.lastPinnedMessage=a,s=!0,l=!0),s&&(fi.of(this._iid).handlers.map((function(p){p.onChannelChanged&&p.onChannelChanged(c)})),i.dispatch(new It({channels:[this],context:{source:l?ge.EVENT_PINNED_MESSAGE_UPDATED:ge.EVENT_MESSAGE_UPDATED}}))),l&&fi.of(this._iid).handlers.map((function(p){p.onPinnedMessageUpdated&&p.onPinnedMessageUpdated(c)})),i.dispatch(new lr({messages:[a],source:ge.EVENT_MESSAGE_UPDATED})),[2,a]}}))}))},n.prototype._autoResendFileMessage=function(e){var r=this,i=new Fs,a=W.of(this._iid).dispatcher,s=z_.of(this._iid);return t.prototype._autoResendFileMessage.call(this,e).onPending((function(l){s.completeCurrentAndProcessNextAutoResend(l),i._trigger(l)})).onFailed((function(l,c){s.completeCurrentAndProcessNextAutoResend(c),i._triggerFailed(l,c)})).onSucceeded((function(l){var c=fi.of(r._iid);s.completeCurrentAndProcessNextAutoResend(l),r._updateLastMessage(l),c.handlers.map((function(d){d.onChannelChanged&&d.onChannelChanged(r)})),a.dispatch(new It({channels:[r],context:{source:ge.EVENT_MESSAGE_SENT}})),i._trigger(l)})),i},n.prototype.deleteMessage=function(e){return S(this,void 0,void 0,(function(){return T(this,(function(r){switch(r.label){case 0:return[4,t.prototype.deleteMessage.call(this,e)];case 1:return r.sent(),e.messageId===0&&e instanceof Rr&&W.of(this._iid).dispatcher.dispatch(new wD({reqId:e.reqId,source:ge.EVENT_MESSAGE_DELETED})),[2]}}))}))},n.prototype.hide=function(e){return S(this,void 0,void 0,(function(){var r,i,a,s,l,c,d,p;return T(this,(function(g){switch(g.label){case 0:return r=z(z({},MN),e),Te((function(_){return Q("boolean",_.hidePreviousMessages,!0)&&Q("boolean",_.allowAutoUnhide,!0)})(r)).throw(X.invalidParameters),i=W.of(this._iid),a=i.dispatcher,s=i.sdkState,l=i.requestQueue,c=new dz(z({channelUrl:this.url,userId:s.userId},r)),[4,l.send(c)];case 1:return d=g.sent(),p=d.as(hz).messageOffsetTimestamp,this.hiddenState=r.allowAutoUnhide?yo.HIDDEN_ALLOW_AUTO_UNHIDE:yo.HIDDEN_PREVENT_AUTO_UNHIDE,r.hidePreviousMessages&&this._updateUnreadCount(0,0),p&&(this.messageOffsetTimestamp=p),a.dispatch(new It({channels:[this],context:{source:ge.EVENT_CHANNEL_HIDDEN},isWebSocketEventComing:!0})),[2,this]}}))}))},n.prototype.unhide=function(){return S(this,void 0,void 0,(function(){var e,r,i,a;return T(this,(function(s){switch(s.label){case 0:return e=W.of(this._iid),r=e.dispatcher,i=e.requestQueue,a=new Hz({channelUrl:this.url}),[4,i.send(a)];case 1:return s.sent(),this.hiddenState=yo.UNHIDDEN,r.dispatch(new It({channels:[this],context:{source:ge.EVENT_CHANNEL_UNHIDDEN},isWebSocketEventComing:!0})),[2,this]}}))}))},n.prototype.delete=function(){return S(this,void 0,void 0,(function(){var e,r;return T(this,(function(i){switch(i.label){case 0:return e=W.of(this._iid).requestQueue,r=new Fz({channelUrl:this.url}),[4,e.send(r)];case 1:return i.sent(),[2]}}))}))},n.prototype.markAsRead=function(){return S(this,void 0,void 0,(function(){var e,r,i,a,s,l,c,d=this;return T(this,(function(p){switch(p.label){case 0:return e=W.of(this._iid),r=e.dispatcher,i=e.requestQueue,a=new Jj({channelUrl:this.url}),[4,i.send(a)];case 1:return s=p.sent(),l=s.as(PD).readStatus,this._updateUnreadMemberState(l.reader.userId,l.readAt),c=!1,(this.unreadMessageCount>0||this.unreadMentionCount>0)&&(this._updateUnreadCount(0,0),c=!0),fi.of(this._iid).handlers.map((function(g){c&&g.onChannelChanged&&g.onChannelChanged(d),g.onUserMarkedRead&&g.onUserMarkedRead(d,[l.reader.userId])})),r.dispatch(new It({channels:[this],context:{source:ge.EVENT_CHANNEL_READ,userIds:[l.reader.userId]}})),[2]}}))}))},n.prototype.markAsUnread=function(e){return S(this,void 0,void 0,(function(){var r,i,a,s,l,c,d,p,g,_,y,C,w=this;return T(this,(function(A){switch(A.label){case 0:return r=W.of(this._iid),i=r.sdkState,a=r.dispatcher,s=r.requestQueue,l=new eG({channelUrl:this.url,channelType:this.channelType,messageId:e.messageId,userId:i.userId,isExcluded:!0,uniqueId:"read-".concat(So())}),[4,s.send(l)];case 1:return c=A.sent(),d=c.as(tG),p=d.readAt,g=d.unreadMessageCount,_=d.userId,y=d.isExcluded,C=d.totalUnreadCount,this._updateUnreadMemberState(_,p,y),this._updateUnreadCount(g,this.unreadMentionCount),a.dispatch(new tS(C)),fi.of(this._iid).handlers.map((function(M){M.onChannelChanged&&M.onChannelChanged(w),M.onUserMarkedUnread&&M.onUserMarkedUnread(w,[_])})),a.dispatch(new It({channels:[this],context:{source:ge.EVENT_CHANNEL_UNREAD,userIds:[_]}})),[2]}}))}))},n.prototype.markAsDelivered=function(){return S(this,void 0,void 0,(function(){var e,r,i,a;return T(this,(function(s){switch(s.label){case 0:return e=W.of(this._iid),r=e.sdkState,i=e.requestQueue,a=new yz({channelUrl:this.url,userId:r.userId}),[4,i.send(a)];case 1:return s.sent(),[2]}}))}))},n.prototype.startTyping=function(){return S(this,void 0,void 0,(function(){var e,r,i,a,s;return T(this,(function(l){switch(l.label){case 0:return e=W.of(this._iid),r=e.requestQueue,i=e.typingIndicatorThrottle,(a=new Date().getTime())-this._typingStarted>=i?(this._typingStarted=a,this._typingEnded=0,s=new pz({channelUrl:this.url,time:this._typingStarted}),[4,r.send(s)]):[3,2];case 1:l.sent(),l.label=2;case 2:return[2]}}))}))},n.prototype.endTyping=function(){return S(this,void 0,void 0,(function(){var e,r,i,a,s;return T(this,(function(l){switch(l.label){case 0:return e=W.of(this._iid),r=e.requestQueue,i=e.typingIndicatorThrottle,(a=new Date().getTime())-this._typingEnded>=i?(this._typingStarted=0,this._typingEnded=a,s=new gz({channelUrl:this.url,time:this._typingStarted}),[4,r.send(s)]):[3,2];case 1:l.sent(),l.label=2;case 2:return[2]}}))}))},n.prototype.createScheduledUserMessage=function(e){e=z(z({},uB),e),Te(cB(e)).throw(X.invalidParameters);var r=new Fs;return this._createScheduledUserMessage(e,r),r},n.prototype.updateScheduledUserMessage=function(e,r){return S(this,void 0,void 0,(function(){var i,a,s,l;return T(this,(function(c){switch(c.label){case 0:return i=z(z({},qz),r),Te((function(d){return BD(d)&&Q("number",d.scheduledAt,!0)})(i)).throw(X.invalidParameters),a=W.of(this._iid).requestQueue,s=new Yz(z({reqId:this._generateRequestId(),scheduledMessageId:e,channelType:this.channelType,channelUrl:this.url},i)),[4,a.send(s)];case 1:return l=c.sent(),[2,l.as(XD).message]}}))}))},n.prototype.createScheduledFileMessage=function(e){var r=this;e=z(z({},dB),e),Te(hB(e)).throw(X.invalidParameters);var i=Date.now(),a=this._generateRequestId(),s=new Fs;return ya(HV).then((function(){var l=r._createPendingScheduledFileMessage(e,a,i);$e((function(){return S(r,void 0,void 0,(function(){return T(this,(function(c){return[2,s._trigger(l)]}))}))}))})),Ai(e.file)?this._uploadFileAndUpdateParams(e).then((function(){return r._createScheduledFileMessage(e,s,a,i)})):this._createScheduledFileMessage(e,s,a,i),s},n.prototype.updateScheduledFileMessage=function(e,r){return S(this,void 0,void 0,(function(){var i,a,s;return T(this,(function(l){switch(l.label){case 0:return i=z(z({},zz),r),Te((function(c){return cS(c)&&Q("number",c.scheduledAt,!0)&&(Ai(c.file)||Q("string",c.fileUrl))&&Q("string",c.fileName,!0)&&Q("string",c.mimeType,!0)&&Q("number",c.fileSize,!0)&&(c.thumbnailSizes===null||c.thumbnailSizes===void 0||c.thumbnailSizes.every((function(d){return Q("object",d)&&d.maxWidth>0&&d.maxHeight>0})))})(i)).throw(X.invalidParameters),Ai(i.file)?[4,this._uploadFileAndUpdateParams(i)]:[3,2];case 1:l.sent(),l.label=2;case 2:return a=new Wz(z({reqId:this._generateRequestId(),scheduledMessageId:e,channelType:this.channelType,channelUrl:this.url},i)),[4,W.of(this._iid).requestQueue.send(a)];case 3:return s=l.sent(),[2,s.as(Kz).message]}}))}))},n.prototype.cancelScheduledMessage=function(e){return S(this,void 0,void 0,(function(){var r;return T(this,(function(i){switch(i.label){case 0:return r=new Qz({scheduledMessageId:e,channelType:this.channelType,channelUrl:this.url}),[4,W.of(this._iid).requestQueue.send(r)];case 1:return i.sent(),[2]}}))}))},n.prototype.sendScheduledMessageNow=function(e){return S(this,void 0,void 0,(function(){var r;return T(this,(function(i){switch(i.label){case 0:return r=new $z({scheduledMessageId:e,channelType:this.channelType,channelUrl:this.url}),[4,W.of(this._iid).requestQueue.send(r)];case 1:return i.sent(),[2]}}))}))},n.prototype.getMyPushTriggerOption=function(){return S(this,void 0,void 0,(function(){var e,r,i,a,s,l;return T(this,(function(c){switch(c.label){case 0:return e=W.of(this._iid),r=e.sdkState,i=e.requestQueue,a=new Jz({userId:r.userId,channelUrl:this.url}),[4,i.send(a)];case 1:return s=c.sent(),l=s.as(eq).pushTriggerOption,this.myPushTriggerOption=l,[2,l]}}))}))},n.prototype.setMyPushTriggerOption=function(e){return S(this,void 0,void 0,(function(){var r,i,a,s,l,c,d;return T(this,(function(p){switch(p.label){case 0:return Te(Nt(tp,e)).throw(X.invalidParameters),r=W.of(this._iid),i=r.dispatcher,a=r.sdkState,s=r.requestQueue,l=new Xz({userId:a.userId,channelUrl:this.url,pushTriggerOption:e}),[4,s.send(l)];case 1:return c=p.sent(),d=c.as(Zz).pushTriggerOption,this.myPushTriggerOption=d,i.dispatch(new It({channels:[this],context:{source:ge.EVENT_CHANNEL_UPDATED},isWebSocketEventComing:!0})),[2,d]}}))}))},n.prototype.setMyCountPreference=function(e){return S(this,void 0,void 0,(function(){var r,i,a,s,l,c,d;return T(this,(function(p){switch(p.label){case 0:return Te(Nt(_o,e)).throw(X.invalidParameters),r=W.of(this._iid),i=r.dispatcher,a=r.sdkState,s=r.requestQueue,l=new jz({channelUrl:this.url,userId:a.userId,countPreference:e}),[4,s.send(l)];case 1:return c=p.sent(),d=c.as(Gz).countPreference,this.myCountPreference=d,this._updateUnreadCount(this.unreadMessageCount,this.unreadMentionCount),i.dispatch(new It({channels:[this],context:{source:ge.EVENT_CHANNEL_UPDATED},isWebSocketEventComing:!0})),[2,d]}}))}))},n.prototype.resetMyHistory=function(){return S(this,void 0,void 0,(function(){var e,r,i,a,s,l;return T(this,(function(c){switch(c.label){case 0:return e=W.of(this._iid),r=e.dispatcher,i=e.requestQueue,a=new Vz({channelUrl:this.url}),[4,i.send(a)];case 1:return s=c.sent(),l=s.as(Bz).messageOffsetTimestamp,this.messageOffsetTimestamp=l,this.lastMessage&&this.lastMessage.createdAt<l&&(this.lastMessage=null),this._updateUnreadCount(0,0),this.totalUnreadReplyCount=0,r.dispatch(new It({channels:[this],context:{source:ge.EVENT_CHANNEL_RESET_HISTORY},isWebSocketEventComing:!0})),[2,this]}}))}))},n.prototype._uploadFileAndUpdateParams=function(e){return S(this,void 0,void 0,(function(){var r,i,a,s,l,c,d,p,g,_;return T(this,(function(y){switch(y.label){case 0:return Ai(e.file)?(r=W.of(this._iid).requestQueue,i=new m1({file:e.file,channelUrl:this.url,thumbnailSizes:e.thumbnailSizes,requestId:this._generateRequestId()}),[4,r.send(i)]):[3,2];case 1:a=y.sent(),s=a.as(g1),l=s.url,c=s.fileSize,d=c===void 0?e.fileSize:c,p=s.thumbnails,g=s.requireAuth,_=g!==void 0&&g,e.fileUrl=l,e.fileSize=d,e.requireAuth=_,e._thumbnails=p,y.label=2;case 2:return[2]}}))}))},n.prototype.resendMessage=function(e,r){var i,a=this;if(Te(e instanceof Rr&&!e.scheduledInfo&&e.isResendable).throw(X.invalidParameters),e.isUserMessage()){var s=(i=e.messageParams)!==null&&i!==void 0?i:yN(e),l=new Fs;return this._sendUserMessage(s,Xi.RESEND,e.reqId).onPending((function(g){l._trigger(g)})).onFailed((function(g,_){l._triggerFailed(g,_)})).onSucceeded((function(g){a._tryUpdateLastMessageAndCallEvents(a,g),l._trigger(g)})),l}if(e.isFileMessage()){var c=this._validateFailedFileMessageHasFile(e,r);Te(c).throw(X.invalidParameters),s=bN(e,r);var d=new Fs;return this._sendFileMessage(s,Xi.RESEND,e.reqId).onPending((function(g){d._trigger(g)})).onFailed((function(g,_){d._triggerFailed(g,_)})).onSucceeded((function(g){a._tryUpdateLastMessageAndCallEvents(a,g),d._trigger(g)})),d}if(e.isMultipleFilesMessage()){s=e.messageParams;var p=new VE;return this._sendMultipleFilesMessage(s,Xi.RESEND,e.reqId).onPending((function(g){p._trigger(g)})).onFailed((function(g,_){p._triggerFailed(g,_)})).onSucceeded((function(g){a._tryUpdateLastMessageAndCallEvents(a,g),p._trigger(g)})).onFileUploaded((function(g,_,y,C){p._triggerOnFileUploaded(g,_,y,C)})),p}},n.prototype.copyMessage=function(e,r){var i=this;if(Te(e instanceof b1&&r instanceof Rr&&r.sendingStatus===cn.SUCCEEDED&&this.url===r.channelUrl&&!r.scheduledInfo).throw(X.invalidParameters),r.isUserMessage()){Te(!r.poll).throw(X.notSupportedError);var a=HD(r),s=new Fs;return e._sendUserMessage(a).onPending((function(d){s._trigger(d)})).onFailed((function(d,p){s._triggerFailed(d,p)})).onSucceeded((function(d){e.isGroupChannel()&&i._tryUpdateLastMessageAndCallEvents(e,d),s._trigger(d)})),s}if(r.isFileMessage()){a=GD(r);var l=new Fs;return e._sendFileMessage(a).onPending((function(d){l._trigger(d)})).onFailed((function(d,p){l._triggerFailed(d,p)})).onSucceeded((function(d){e.isGroupChannel()&&i._tryUpdateLastMessageAndCallEvents(e,d),l._trigger(d)})),l}if(r.isMultipleFilesMessage()){if(e.isGroupChannel()){a=OV(r);var c=new VE;return e._sendMultipleFilesMessage(a,Xi.COPY).onPending((function(d){c._trigger(d)})).onFailed((function(d,p){c._triggerFailed(d,p)})).onSucceeded((function(d){i._tryUpdateLastMessageAndCallEvents(e,d),c._trigger(d)})).onFileUploaded((function(d,p,g,_){c._triggerOnFileUploaded(d,p,g,_)})),c}throw X.channelTypeNotSupportedError}},n.prototype.getMessageDeletionTimestamp=function(){return S(this,void 0,void 0,(function(){var e,r,i,a,s,l;return T(this,(function(c){switch(c.label){case 0:return e=W.of(this._iid),r=e.requestQueue,i=e.dispatcher,a=new tq({channelUrl:this.url,channelType:this.channelType}),[4,r.send(a)];case 1:return s=c.sent(),l=s.as(nq).messageDeletionTimestamp,this._messageDeletionTimestamp=l,i.dispatch(new Sx({channel:this})),[2,l]}}))}))},n.prototype.submitCSAT=function(e){return S(this,void 0,void 0,(function(){var r,i,a,s,l,c;return T(this,(function(d){switch(d.label){case 0:return Te(Q("number",e.csat)&&Q("string",e.csatType)&&Q("string",e.csatReason,!0)&&Q("boolean",e.isResolved,!0)&&Q("number",e.resolutionScore,!0)&&Q("number",e.csatStartedAt,!0)).throw(X.invalidParameters),r=W.of(this._iid),i=r.requestQueue,a=r.dispatcher,s=new rq(z({channelUrl:this.url},e)),[4,i.send(s)];case 1:return l=d.sent(),c=l.as(iq).conversation,this.conversation=c,a.dispatch(new It({channels:[this],context:{source:ge.EVENT_CHANNEL_CSAT_SUBMITTED}})),[2,c]}}))}))},n.prototype.markConversationAsHandoff=function(){return S(this,void 0,void 0,(function(){var e,r,i,a,s,l;return T(this,(function(c){switch(c.label){case 0:return e=W.of(this._iid),r=e.requestQueue,i=e.dispatcher,a=new aq({channelUrl:this.url}),[4,r.send(a)];case 1:return s=c.sent(),l=s.as(sq).conversation,this.conversation=l,i.dispatch(new It({channels:[this],context:{source:ge.EVENT_CHANNEL_CONVERSATION_HANDEDOFF}})),[2,l]}}))}))},n.prototype.closeConversation=function(){return S(this,void 0,void 0,(function(){var e,r,i,a,s,l;return T(this,(function(c){switch(c.label){case 0:return e=W.of(this._iid),r=e.requestQueue,i=e.dispatcher,a=new oq({channelUrl:this.url}),[4,r.send(a)];case 1:return s=c.sent(),l=s.as(lq).conversation,this.conversation=l,i.dispatch(new It({channels:[this],context:{source:ge.EVENT_CHANNEL_UPDATED}})),[2,l]}}))}))},n.prototype.getContextObject=function(e){return S(this,void 0,void 0,(function(){var r,i,a;return T(this,(function(s){switch(s.label){case 0:return r=W.of(this._iid).requestQueue,i=new dq({aiAgentId:e,channelUrl:this.url}),[4,r.send(i)];case 1:return a=s.sent(),[2,a.as(hq).contextObject]}}))}))},n.prototype.updateContext=function(e,r){return S(this,void 0,void 0,(function(){var i,a,s;return T(this,(function(l){switch(l.label){case 0:return i=W.of(this._iid).requestQueue,a=new uq({aiAgentId:e,channelUrl:this.url,context:r}),[4,i.send(a)];case 1:return s=l.sent(),[2,s.as(cq).contextObject]}}))}))},n.prototype.patchContext=function(e,r){return S(this,void 0,void 0,(function(){var i,a,s;return T(this,(function(l){switch(l.label){case 0:return i=W.of(this._iid).requestQueue,a=new fq({aiAgentId:e,channelUrl:this.url,context:r}),[4,i.send(a)];case 1:return s=l.sent(),[2,s.as(pq).contextObject]}}))}))},n})(b1),$d={},mq=(function(){function t(n){var e=n._iid,r=n.limit,i=r===void 0?100:r,a=this;this.ref=0,this._iid=e,this._limit=i;var s,l=W.of(this._iid),c=l.sdkState,d=l.dispatcher,p=l.logger,g=l.cacheContext,_=l.statManager;this._metadataKey=(s=c.userId,"sendbird:".concat(s,"@groupchannel/sync.meta"));var y=(function(C){return"sendbird:".concat(C,"@groupchannel/sync")})(c.userId);this._sync=new Vc(y,(function(){return S(a,void 0,void 0,(function(){var C,w,A,M,I,D,P,H,L,G,Y,F,ne,J,re,Oe;return T(this,(function(Z){switch(Z.label){case 0:return C={hasNext:!0,nextToken:""},[4,this.loadMetadata()];case 1:if(Z.sent(),p.debug("channel background sync from",(L=this._metadata)===null||L===void 0?void 0:L.token),(G=this._metadata)===null||G===void 0?void 0:G.completed)return[3,14];w={includeEmpty:!0,includeMetaData:!0,hiddenChannelFilter:Xo.ALL,order:Tr.CHRONOLOGICAL},Z.label=2;case 2:if(Z.trys.push([2,9,12,13]),w.order!==Tr.LATEST_LAST_MESSAGE)return[3,6];Z.label=3;case 3:return Z.trys.push([3,5,,6]),[4,g.preference.get(nS(c.appId))];case 4:return A=Z.sent(),w.includeChatNotification=!!A,[3,6];case 5:return Z.sent(),w.includeChatNotification=!1,[3,6];case 6:return[4,fi.of(this._iid).getMyGroupChannels((F=(Y=this._metadata)===null||Y===void 0?void 0:Y.token)!==null&&F!==void 0?F:"",w,this._limit,ge.SYNC_CHANNEL_BACKGROUND)];case 7:return M=Z.sent(),I=M.channels,D=M.token,C.hasNext=I.length>=this._limit&&!!D,C.nextToken=D,this._metadata&&(this._metadata.token=D,(H=this._metadata.range).extends.apply(H,Je([],Ye(I.map((function(ue){return ue.createdAt}))),!1)),this._metadata.completed=!C.hasNext),p.debug("channel background sync progress",C),[4,this.saveMetadata()];case 8:return Z.sent(),[3,13];case 9:return P=Z.sent(),p.debug("channel background sync error",P),P instanceof X&&P.isInvalidTokenError?[4,this.clearMetaData()]:[3,11];case 10:Z.sent(),Z.label=11;case 11:throw P;case 12:return _.put(new qn({type:An.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:"",measured_on:"channel_back_sync",event:"cache_fetch",max_db_size:(J=(ne=g.localCacheConfig)===null||ne===void 0?void 0:ne.maxSize)!==null&&J!==void 0?J:0,use_local_cache:g.localCacheEnabled,starting_point:0,message_init_policy:(Oe=(re=w.order)===null||re===void 0?void 0:re.toString())!==null&&Oe!==void 0?Oe:"",collection_id:c.userId}})),[7];case 13:return[3,15];case 14:C.hasNext=!1,C.nextToken="",Z.label=15;case 15:return[2,C]}}))}))})),this._connectionEventContext=d.on((function(C){C instanceof Bs&&(C.stateType===en.CONNECTED?a.resume():a.pause())}))}return t.of=function(n){return $d[n]||($d[n]=new t({_iid:n})),$d[n].ref++,$d[n]},t.clear=function(n){$d[n]&&($d[n].close(),delete $d[n])},Object.defineProperty(t.prototype,"range",{get:function(){var n,e;return(e=(n=this._metadata)===null||n===void 0?void 0:n.range)!==null&&e!==void 0?e:new Wl({})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"completed",{get:function(){var n;return!!(!((n=this._metadata)===null||n===void 0)&&n.completed)},enumerable:!1,configurable:!0}),t.prototype.loadMetadata=function(){return S(this,void 0,void 0,(function(){var n;return T(this,(function(e){switch(e.label){case 0:return this._metadata?[3,2]:[4,W.of(this._iid).cacheContext.preference.get(this._metadataKey)];case 1:n=e.sent(),this._metadata={token:n?n.token:"",range:new Wl(n?n.range:{top:Number.MAX_SAFE_INTEGER,bottom:0}),completed:!!n&&n.completed},e.label=2;case 2:return[2,this._metadata]}}))}))},t.prototype.saveMetadata=function(){return S(this,void 0,void 0,(function(){return T(this,(function(n){switch(n.label){case 0:return this._metadata?[4,W.of(this._iid).cacheContext.preference.set(this._metadataKey,this._metadata)]:[3,2];case 1:return n.sent(),[2,!0];case 2:return[2,!1]}}))}))},t.prototype.clearMetaData=function(){return S(this,void 0,void 0,(function(){return T(this,(function(n){switch(n.label){case 0:return[4,W.of(this._iid).cacheContext.preference.remove(this._metadataKey)];case 1:return n.sent(),this._metadata=void 0,[2]}}))}))},t.prototype.resume=function(){var n,e,r=W.of(this._iid),i=r.logger;r.sessionManager.session.hasSession&&(i.debug("channel background sync resume()"),this._sync.start((e=(n=this._metadata)===null||n===void 0?void 0:n.token)!==null&&e!==void 0?e:""))},t.prototype.pause=function(){W.of(this._iid).logger.debug("channel background sync stop()"),this._sync.stop()},t.prototype.close=function(){this.ref--,this.ref<=0&&(this.ref=0,this.pause(),this._connectionEventContext.close(),delete $d[this._iid])},t})(),Xd={},gq=(function(){function t(n){var e=n._iid,r=this;this.ref=0,this._iid=e;var i,a=W.of(this._iid),s=a.logger,l=a.sdkState,c=a.dispatcher,d=a.cacheContext,p=a.statManager;this._metadataKey=(i=l.userId,"sendbird:".concat(i,"@groupchannel/changelogs.meta")),this._subscribers=new Ap;var g=(function(_){return"sendbird:".concat(_,"@groupchannel/changelogs")})(l.userId);this._sync=new Vc(g,(function(){return S(r,void 0,void 0,(function(){var _,y,C,w,A,M,I,D,P,H,L,G,Y;return T(this,(function(F){switch(F.label){case 0:return _={hasNext:!0,nextToken:0},[4,this.loadMetadata()];case 1:F.sent(),s.debug("channel changelog sync from",(L=this._metadata)===null||L===void 0?void 0:L.token),y=fi.of(this._iid),F.label=2;case 2:F.trys.push([2,9,12,16]),C={includeEmpty:!0,includeMetaData:!0},F.label=3;case 3:return F.trys.push([3,5,,6]),[4,d.preference.get(nS(l.appId))];case 4:return w=F.sent(),C.includeChatNotification=!!w,[3,6];case 5:return F.sent(),C.includeChatNotification=!1,[3,6];case 6:return[4,y.getMyGroupChannelChangeLogs((Y=(G=this._metadata)===null||G===void 0?void 0:G.token)!==null&&Y!==void 0?Y:"",C,ge.SYNC_CHANNEL_CHANGELOGS)];case 7:return A=F.sent(),M=A.updatedChannels,I=A.deletedChannelUrls,D=A.hasMore,P=A.token,this._subscribers.dispatch("progress",{updatedChannels:M,deletedChannelUrls:I,hasMore:D,token:P}),_.hasNext=D,_.nextToken=P,this._metadata&&(this._metadata.token=P),s.debug("channel changelog sync progress",_),[4,this.saveMetadata()];case 8:return F.sent(),d.localCacheEnabled&&p.put(new qn({type:An.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:"",measured_on:"channel_change_log_sync",event:M.length>0||I.length>0?"cache_miss":"cache_hit",max_db_size:M.length,use_local_cache:d.localCacheEnabled,starting_point:0,message_init_policy:I.length.toString(),collection_id:l.userId}})),[3,16];case 9:return H=F.sent(),s.debug("channel changelog sync error",H),H instanceof X&&H.isInvalidTokenError?[4,this.clearMetadata()]:[3,11];case 10:F.sent(),F.label=11;case 11:throw H;case 12:return _.hasNext?[3,15]:[4,ya(500)];case 13:return F.sent(),[4,y.removeChannelsByRotation()];case 14:F.sent(),F.label=15;case 15:return[7];case 16:return[2,_]}}))}))})),this._sync.on("stop",(function(){r._subscribers.dispatch("pause")})),this._connectionEventContext=c.on((function(_){_ instanceof Bs&&(_.stateType===en.CONNECTED?r.resume():r.pause())}))}return t.of=function(n){return Xd[n]||(Xd[n]=new t({_iid:n})),Xd[n].ref++,Xd[n]},t.clear=function(n){Xd[n]&&(Xd[n].close(),delete Xd[n])},Object.defineProperty(t.prototype,"isRunning",{get:function(){return this._sync.isRunning},enumerable:!1,configurable:!0}),t.prototype.loadMetadata=function(){return S(this,void 0,void 0,(function(){var n,e,r,i;return T(this,(function(a){switch(a.label){case 0:return this._metadata?[3,2]:(n=W.of(this._iid),e=n.cacheContext,r=n.firstConnectedAt,[4,e.preference.get(this._metadataKey)]);case 1:i=a.sent(),this._metadata={token:i?i.token:r},a.label=2;case 2:return[2,this._metadata]}}))}))},t.prototype.saveMetadata=function(){return S(this,void 0,void 0,(function(){return T(this,(function(n){switch(n.label){case 0:return this._metadata?[4,W.of(this._iid).cacheContext.preference.set(this._metadataKey,this._metadata)]:[3,2];case 1:return n.sent(),[2,!0];case 2:return[2,!1]}}))}))},t.prototype.clearMetadata=function(){return S(this,void 0,void 0,(function(){return T(this,(function(n){switch(n.label){case 0:return[4,W.of(this._iid).cacheContext.preference.remove(this._metadataKey)];case 1:return n.sent(),this._metadata=void 0,[2]}}))}))},t.prototype.on=function(n,e){return this._subscribers.on(n,e)},t.prototype.resume=function(){W.of(this._iid).sessionManager.session.hasSession&&this._sync.start(0)},t.prototype.pause=function(){this._sync.stop()},t.prototype.close=function(){this.ref--,this.ref<=0&&(this.ref=0,this.pause(),this._connectionEventContext.close(),delete Xd[this._iid])},t})(),KE=function(t,n){return t.findIndex((function(e){return e.isIdentical(n)}))},GM=function(t,n,e){if(t.length>0){for(var r=KE(t,n),i=0,a=t.length-1,s=Math.floor((i+a)/2);i<a;){var l=VM(t[s],n,e);if(l>0)a=s,s=Math.floor((i+a)/2);else{if(!(l<0))return{place:s,oldPosition:r};i=s+1,s=Math.floor((i+a)/2)}}return{place:VM(t[s],n,e)>=0?s:s+1,oldPosition:r}}return{place:t.length,oldPosition:-1}},VM=function(t,n,e){switch(e){case Tr.LATEST_LAST_MESSAGE:return t.lastMessage&&n.lastMessage?(r=n.lastMessage.createdAt-t.lastMessage.createdAt)===0?n.createdAt-t.createdAt:r:t.lastMessage?-1:n.lastMessage?1:n.createdAt-t.createdAt;case Tr.CHRONOLOGICAL:return n.createdAt-t.createdAt;case Tr.CHANNEL_NAME_ALPHABETICAL:var r;return(r=t.name.localeCompare(n.name))===0?t.createdAt-n.createdAt:r;default:return 0}},vq=(function(){function t(n,e){var r=e.filter,i=r===void 0?new wx:r,a=e.order,s=a===void 0?Tr.LATEST_LAST_MESSAGE:a,l=e.limit,c=l===void 0?ZD:l,d=e.includeChangesOnInitialLoad,p=d!==void 0&&d,g=this;this.channels=[],this._isInitialized=!1,this._iid=n,this._key="gcc-".concat(So()),this._isDisposed=!1,this._isGetRemoteChannelsSucceeded=!0,this._includeChangesOnInitialLoad=p,this.filter=i,this.order=s,this._hasMore=!0,this._token="",this._limit=c;var _=W.of(this._iid),y=_.sdkState,C=_.cacheContext,w=_.dispatcher;C.localCacheEnabled&&(this._backgroundSync=mq.of(n),this._backgroundSync.resume()),this._changelogSync=gq.of(n),this._changelogSync.resume(),fi.of(this._iid).subscribeChannelEvent(this._key,{onUpdate:function(A,M){var I=M.source;if(WE(I)){var D=A.filter((function(H){return g.filter.match(H,y.userId)})),P=A.filter((function(H){return!g.filter.match(H,y.userId)})).map((function(H){return H.url}));D.length>0&&g._addChannelsToView(D,M),P.length>0&&g._removeChannelsFromView(P,M)}},onRemove:function(A,M){g._removeChannelsFromView(A,M)}}),w.on((function(A){A instanceof Bs&&(A.stateType===en.CONNECTED?g._isGetRemoteChannelsSucceeded||S(g,void 0,void 0,(function(){return T(this,(function(M){switch(M.label){case 0:return[4,this._revokeLoadMore()];case 1:return M.sent(),[2]}}))})):A.stateType===en.LOGOUT&&g.dispose())}))}return Object.defineProperty(t.prototype,"hasMore",{get:function(){return!this._isDisposed&&this._hasMore},enumerable:!1,configurable:!0}),t.prototype.setGroupChannelCollectionHandler=function(n){this._handler=n},t.prototype._addChannelsToView=function(n,e,r){var i,a,s,l,c=this;r===void 0&&(r=!1);var d=[],p=[],g=[];try{for(var _=Re(n),y=_.next();!y.done;y=_.next()){var C=y.value,w=KE(this.channels,C);w>=0&&this.channels.splice(w,1);var A=GM(this.channels,C,this.order).place;if(w<0)A===this.channels.length?!r&&this._hasMore||(d.push(C),this.channels.push(C)):(d.push(C),this.channels.splice(A,0,C));else switch(e.source){case ge.EVENT_CHANNEL_UPDATED:case ge.EVENT_MESSAGE_RECEIVED:case ge.SYNC_CHANNEL_CHANGELOGS:case ge.EVENT_MESSAGE_SENT:this.order===Tr.CHANNEL_NAME_ALPHABETICAL&&this._hasMore&&A===this.channels.length?g.push(C):(this.channels.splice(A,0,C),p.push(C));break;default:this.channels.splice(A,0,C),p.push(C)}}}catch(P){i={error:P}}finally{try{y&&!y.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}if(g.length>0)try{for(var M=Re(g),I=M.next();!I.done;I=M.next()){C=I.value;var D=KE(this.channels,C);D!==-1&&this.channels.splice(D,1)}}catch(P){s={error:P}}finally{try{I&&!I.done&&(l=M.return)&&l.call(M)}finally{if(s)throw s.error}}WE(e.source)&&$e((function(){return S(c,void 0,void 0,(function(){var P,H,L;return T(this,(function(G){return d.length>0&&!((P=this._handler)===null||P===void 0)&&P.onChannelsAdded&&this._handler.onChannelsAdded(e,d),p.length>0&&!((H=this._handler)===null||H===void 0)&&H.onChannelsUpdated&&this._handler.onChannelsUpdated(e,p),g.length>0&&!((L=this._handler)===null||L===void 0)&&L.onChannelsDeleted&&this._handler.onChannelsDeleted(e,g.map((function(Y){return Y.url}))),[2]}))}))}))},t.prototype._removeChannelsFromView=function(n,e){var r,i,a=this,s=[],l=function(g){var _=c.channels.findIndex((function(y){return y.url===g}));_>=0&&(s.push(c.channels[_].url),c.channels.splice(_,1))},c=this;try{for(var d=Re(n),p=d.next();!p.done;p=d.next())l(p.value)}catch(g){r={error:g}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}return WE(e.source)&&s.length>0&&$e((function(){return S(a,void 0,void 0,(function(){var g;return T(this,(function(_){return!((g=this._handler)===null||g===void 0)&&g.onChannelsDeleted&&this._handler.onChannelsDeleted(e,s),[2]}))}))})),s},t.prototype._getLocalChannels=function(){return S(this,void 0,void 0,(function(){var n,e;return T(this,(function(r){switch(r.label){case 0:return n=fi.of(this._iid),e=this.channels.length>0?(function(i,a){var s,l,c,d;switch(a){case Tr.LATEST_LAST_MESSAGE:return(l=(s=i.lastMessage)===null||s===void 0?void 0:s.createdAt)!==null&&l!==void 0?l:i.createdAt;case Tr.CHRONOLOGICAL:return i.createdAt;case Tr.CHANNEL_NAME_ALPHABETICAL:return i.name;default:return(d=(c=i.lastMessage)===null||c===void 0?void 0:c.createdAt)!==null&&d!==void 0?d:i.createdAt}})(this.channels[this.channels.length-1],this.order):null,[4,n.getChannelsFromCache(e,this.filter,this.order,this._limit,e?this.channels[this.channels.length-1].url:void 0)];case 1:return[2,r.sent()]}}))}))},t.prototype._getRemoteChannels=function(){return S(this,void 0,void 0,(function(){var n,e,r;return T(this,(function(i){switch(i.label){case 0:return[4,fi.of(this._iid).getMyGroupChannels(this._token,Qe(z(z({},this.filter),{userIdsFilter:this.filter.userIdsFilter,searchFilter:this.filter.searchFilter,order:this.order})),this._limit)];case 1:return n=i.sent(),e=n.channels,r=n.token,this._token=r,this._hasMore=!!r,[2,e]}}))}))},t.prototype._revokeLoadMore=function(){return S(this,void 0,void 0,(function(){var n;return T(this,(function(e){switch(e.label){case 0:if(this._isDisposed)return[2];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this._getRemoteChannels()];case 2:return n=e.sent(),this._isGetRemoteChannelsSucceeded=!0,this._addChannelsToView(n,{source:ge.REQUEST_CHANNEL},!0),[3,4];case 3:return e.sent(),this._isGetRemoteChannelsSucceeded=!1,[3,4];case 4:return[2]}}))}))},t.prototype.loadMore=function(){var n;return S(this,void 0,void 0,(function(){var e,r,i,a,s,l,c,d,p,g,_,y,C,w,A,M,I,D,P,H,L,G=this;return T(this,(function(Y){switch(Y.label){case 0:if(this._isDisposed)throw new X({code:ze.COLLECTION_DISPOSED,message:"Collection has been disposed."});return e=null,this._includeChangesOnInitialLoad&&this.channels.length===0&&this._changelogSync.isRunning?[4,new Promise((function(F){G._changelogSyncSubscriberContext=G._changelogSync.on("progress",(function(ne){return F(ne)})).on("pause",(function(){return F(null)}))}))]:[3,2];case 1:e=Y.sent(),(n=this._changelogSyncSubscriberContext)===null||n===void 0||n.close(),Y.label=2;case 2:return r=W.of(this._iid),i=r.cacheContext,a=r.connectionManager,s=r.statManager,this._isInitialized?[3,5]:(this._isInitialized=!0,i.localCacheEnabled?[4,this._backgroundSync.loadMetadata()]:[3,4]);case 3:Y.sent(),Y.label=4;case 4:s.put(new O0({type:An.FEATURE_LOCALCACHE,data:{use_local_cache:i.localCacheEnabled,collection_interface:{group_channel:!0}}})),Y.label=5;case 5:return l=[],this._hasMore?!i.localCacheEnabled||a.isConnected&&!this._backgroundSync.completed?[3,7]:[4,gr((function(){return S(G,void 0,void 0,(function(){return T(this,(function(F){switch(F.label){case 0:return[4,this._getLocalChannels()];case 1:return l=F.sent(),[2]}}))}))}))]:[3,11];case 6:return Y.sent(),this._hasMore=l.length>=this._limit,[3,10];case 7:return Y.trys.push([7,9,,10]),[4,this._getRemoteChannels()];case 8:return l=Y.sent(),this._isGetRemoteChannelsSucceeded=!0,[3,10];case 9:return Y.sent(),this._isGetRemoteChannelsSucceeded=!1,[3,10];case 10:this._addChannelsToView(l,{source:ge.REQUEST_CHANNEL},!0),Y.label=11;case 11:if(e){c=W.of(this._iid).sdkState,d=e.updatedChannels.filter((function(F){return G.filter.match(F,c.userId)}));try{for(p=Re(d),g=p.next();!g.done;g=p.next())_=g.value,(I=KE(l,_))>=0?l[I]=_:(y=GM(l,_,this.order).place,l.splice(y,0,_)),this._addChannelsToView([_],{source:ge.REQUEST_CHANNEL},!0)}catch(F){D={error:F}}finally{try{g&&!g.done&&(P=p.return)&&P.call(p)}finally{if(D)throw D.error}}C=l.map((function(F){return F.url}));try{for(w=Re(e.deletedChannelUrls),A=w.next();!A.done;A=w.next())M=A.value,(I=C.indexOf(M))>=0&&(l.splice(I,1),C.splice(I,1))}catch(F){H={error:F}}finally{try{A&&!A.done&&(L=w.return)&&L.call(w)}finally{if(H)throw H.error}}this._removeChannelsFromView(e.deletedChannelUrls,{source:ge.REQUEST_CHANNEL})}return[2,l]}}))}))},t.prototype.dispose=function(){var n,e,r;this._isDisposed||(this._isDisposed=!0,this.channels.length>0&&this.channels.splice(0,this.channels.length),(n=this._backgroundSync)===null||n===void 0||n.close(),(e=this._changelogSync)===null||e===void 0||e.close(),(r=this._changelogSyncSubscriberContext)===null||r===void 0||r.close(),fi.of(this._iid).unsubscribeChannelEvent(this._key))},t})(),_q=(function(t){function n(e){var r=this,i=e.token,a=e.limit,s=e.order,l=e.includeEmpty,c=e.membershipFilter,d=e.channelNameContainsFilter,p=e.channelUrlsFilter,g=e.customTypesFilter,_=e.customTypeStartsWithFilter,y=e.superChannelFilter,C=e.metadataOrderKeyFilter,w=e.metadataKey,A=e.metadataValues,M=e.metadataValueStartsWith,I=e.includeFrozen,D=e.includeMetaData;return(r=t.call(this)||this).method=ye.GET,r.path=Ta,r.params=Le(Qe({token:i,limit:a,order:s,show_member:!0,show_read_receipt:!0,show_delivery_receipt:!0,show_empty:l,public_mode:Vu.PUBLIC,public_membership_mode:c,name_contains:d,channel_urls:p,custom_types:g,custom_type_startswith:_,super_mode:y,metadata_order_key:C,metadata_key:w,metadata_values:A,metadata_value_startswith:M,show_frozen:I,show_metadata:D})),r}return U(n,t),n})(Ee),yq=(function(t){function n(e,r){var i=t.call(this,e,r)||this;i.channels=[];var a=r.next,s=r.channels,l=r.ts;return i.token=a,s&&s.length>0&&(i.channels=s.map((function(c){return c.ts=l,new Ao(e,c)}))),i.ts=typeof l=="number"?l:0,i}return U(n,t),n})(Se);(function(t){t.ALL="all",t.JOINED="joined"})(g0||(g0={}));var bq=(function(t){function n(e,r){var i,a,s,l,c,d,p,g,_,y,C,w,A,M,I=this;return(I=t.call(this,e,r)||this).includeEmpty=!1,I.includeFrozen=!0,I.includeMetaData=!0,I.channelUrlsFilter=null,I.customTypesFilter=null,I.customTypeStartsWithFilter=null,I.channelNameContainsFilter=null,I.membershipFilter=g0.ALL,I.superChannelFilter=_s.ALL,I.metadataKey=null,I.metadataValues=null,I.metadataOrderKeyFilter=null,I.metadataValueStartsWith=null,I.order=h0.CHRONOLOGICAL,I.includeEmpty=(i=r.includeEmpty)!==null&&i!==void 0&&i,I.includeFrozen=(a=r.includeFrozen)===null||a===void 0||a,I.includeMetaData=(s=r.includeMetaData)===null||s===void 0||s,I.channelUrlsFilter=(l=r.channelUrlsFilter)!==null&&l!==void 0?l:null,I.customTypesFilter=(c=r.customTypesFilter)!==null&&c!==void 0?c:null,I.customTypeStartsWithFilter=(d=r.customTypeStartsWithFilter)!==null&&d!==void 0?d:null,I.channelNameContainsFilter=(p=r.channelNameContainsFilter)!==null&&p!==void 0?p:null,I.membershipFilter=(g=r.membershipFilter)!==null&&g!==void 0?g:g0.ALL,I.superChannelFilter=(_=r.superChannelFilter)!==null&&_!==void 0?_:_s.ALL,I.metadataKey=(y=r.metadataKey)!==null&&y!==void 0?y:null,I.metadataValues=(C=r.metadataValues)!==null&&C!==void 0?C:null,I.metadataOrderKeyFilter=(w=r.metadataOrderKeyFilter)!==null&&w!==void 0?w:null,I.metadataValueStartsWith=(A=r.metadataValueStartsWith)!==null&&A!==void 0?A:null,I.order=(M=r.order)!==null&&M!==void 0?M:h0.CHRONOLOGICAL,I}return U(n,t),n.prototype._validate=function(){return t.prototype._validate.call(this)&&Q("boolean",this.includeEmpty)&&Q("boolean",this.includeFrozen)&&Q("boolean",this.includeMetaData)&&Q("string",this.channelNameContainsFilter,!0)&&Tt("string",this.channelUrlsFilter,!0)&&Tt("string",this.customTypesFilter,!0)&&Q("string",this.customTypeStartsWithFilter,!0)&&Nt(g0,this.membershipFilter)&&Nt(_s,this.superChannelFilter)&&Nt(h0,this.order)&&Q("string",this.metadataOrderKeyFilter,!0)&&Q("string",this.metadataKey,!0)&&Tt("string",this.metadataValues,!0)&&Q("string",this.metadataValueStartsWith,!0)},n.prototype.next=function(){return S(this,void 0,void 0,(function(){var e,r,i,a,s,l,c;return T(this,(function(d){switch(d.label){case 0:return this._validate()?this._isLoading?[3,3]:(e=[],this._hasNext?(this._isLoading=!0,r=W.of(this._iid).requestQueue,i=new _q(Qe(z(z({},this),{token:this._token}))),[4,r.send(i)]):[3,2]):[3,5];case 1:return a=d.sent(),s=a.as(yq),l=s.channels,c=s.token,this._token=c,this._hasNext=!!c,this._isLoading=!1,[2,l];case 2:return[2,e];case 3:throw X.queryInProgress;case 4:return[3,6];case 5:throw X.invalidParameters;case 6:return[2]}}))}))},n})(Yc),Eq=(function(t){function n(e){e===void 0&&(e={});var r=t.call(this)||this;return Object.keys(e).forEach((function(i){r.hasOwnProperty(i)&&(r[i]=e[i])})),r}return U(n,t),n})((function(t){function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.onUserJoined=it,e.onUserLeft=it,e.onUserReceivedInvitation=it,e.onUserDeclinedInvitation=it,e.onChannelHidden=it,e.onUnreadMemberStatusUpdated=it,e.onUserMarkedRead=it,e.onUserMarkedUnread=it,e.onUndeliveredMemberStatusUpdated=it,e.onTypingStatusUpdated=it,e.onPollUpdated=it,e.onPollVoted=it,e.onPollDeleted=it,e.onPinnedMessageUpdated=it,e}return U(n,t),n})(Cx)),Cq=(function(t){function n(e){var r=this,i=e.token,a=e.limit,s=e.order,l=e.reverse,c=e.channelUrl,d=e.messageTypeFilter,p=e.scheduledStatus;return(r=t.call(this)||this).method=ye.GET,r.path="".concat(PR),r.params=Le(Qe({token:i,limit:a,reverse:l,channel_url:c,order:s,message_type:d,status:p})),r}return U(n,t),n})(Ee),wq=(function(t){function n(e,r){var i=t.call(this,e,r)||this;i.scheduledMessages=[];var a=r.next,s=r.scheduled_messages;return i.token=a,i.scheduledMessages=s.map((function(l){return ia(e,l)})),i}return U(n,t),n})(Se),Nq=(function(t){function n(e,r){var i,a,s,l,c,d=this;return(d=t.call(this,e,r)||this).channelUrl=null,d.order=null,d.reverse=!1,d.scheduledStatus=null,d.messageTypeFilter=ea.ALL,d.channelUrl=(i=r.channelUrl)!==null&&i!==void 0?i:null,d.order=(a=r.order)!==null&&a!==void 0?a:null,d.reverse=(s=r.reverse)!==null&&s!==void 0&&s,d.scheduledStatus=(l=r.scheduledStatus)!==null&&l!==void 0?l:null,d.messageTypeFilter=(c=r.messageTypeFilter)!==null&&c!==void 0?c:ea.ALL,d}return U(n,t),n.prototype._validate=function(){return t.prototype._validate.call(this)&&Q("string",this.channelUrl,!0)&&(Nt(NN,this.order)||this.order===null)&&Q("boolean",this.reverse)&&(Tt(lh,this.scheduledStatus)||this.scheduledStatus===null)&&Nt(ea,this.messageTypeFilter)},n.prototype.next=function(){return S(this,void 0,void 0,(function(){var e,r,i,a,s,l;return T(this,(function(c){switch(c.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=W.of(this._iid).requestQueue,r=new Cq(Qe(z(z({},this),{token:this._token}))),[4,e.send(r)]):[3,2]:[3,5];case 1:return i=c.sent(),a=i.as(wq),s=a.scheduledMessages,l=a.token,this._token=l,this._hasNext=!!l,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw X.queryInProgress;case 4:return[3,6];case 5:throw X.invalidParameters;case 6:return[2]}}))}))},n})(Yc),Tq=(function(t){function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.name="groupChannel",e}return U(n,t),n.prototype.init=function(e,r){var i=r.sdkState,a=r.dispatcher,s=r.sessionManager,l=r.requestQueue,c=r.logger,d=r.onlineDetector,p=r.cacheContext;t.prototype.init.call(this,e,{sdkState:i,dispatcher:a,sessionManager:s,requestQueue:l,logger:c,onlineDetector:d,cacheContext:p}),this._manager=new fi(e,{sdkState:i,cacheContext:p,dispatcher:a,sessionManager:s,requestQueue:l,logger:c})},n.prototype.createGroupChannelCollection=function(e){return e===void 0&&(e={}),new vq(this._iid,e)},n.prototype.createMyGroupChannelListQuery=function(e){return e===void 0&&(e={}),new Ax(this._iid,e)},n.prototype.createPublicGroupChannelListQuery=function(e){return e===void 0&&(e={}),new bq(this._iid,e)},n.prototype.createScheduledMessageListQuery=function(e){return e===void 0&&(e={}),new Nq(this._iid,e)},n.prototype.addGroupChannelHandler=function(e,r){Te(Q("string",e)&&r instanceof Eq).throw(X.invalidParameters),this._manager.addHandler(e,r)},n.prototype.removeGroupChannelHandler=function(e){Te(Q("string",e)).throw(X.invalidParameters),this._manager.removeHandler(e)},n.prototype.removeAllGroupChannelHandlers=function(){this._manager.clearHandler()},n.prototype.buildGroupChannelFromSerializedData=function(e){return this._manager.buildGroupChannelFromSerializedData(e)},n.prototype.buildGroupChannelListQueryFromSerializedData=function(e){return this._manager.buildGroupChannelListQueryFromSerializedData(e)},n.prototype.buildMemberFromSerializedData=function(e){return this._manager.buildMemberFromSerializedData(e)},n.prototype.getChannel=function(e){return S(this,void 0,void 0,(function(){return T(this,(function(r){return Te(Q("string",e)).throw(X.invalidParameters),[2,this._manager.getChannel(e)]}))}))},n.prototype.getChannelWithoutCache=function(e){return S(this,void 0,void 0,(function(){return T(this,(function(r){return Te(Q("string",e)).throw(X.invalidParameters),[2,this._manager.getChannelWithoutCache(e)]}))}))},n.prototype.getMyGroupChannelChangeLogsByToken=function(e,r){return r===void 0&&(r={}),S(this,void 0,void 0,(function(){var i;return T(this,(function(a){switch(a.label){case 0:return i=z(z({},N1),r),Te(Q("string",e)&&SN(i)).throw(X.invalidParameters),[4,this._manager.getMyGroupChannelChangeLogs(e,i)];case 1:return[2,a.sent()]}}))}))},n.prototype.getMyGroupChannelChangeLogsByTimestamp=function(e,r){return r===void 0&&(r={}),S(this,void 0,void 0,(function(){var i;return T(this,(function(a){switch(a.label){case 0:return i=z(z({},N1),r),Te(Q("number",e)&&SN(i)).throw(X.invalidParameters),[4,this._manager.getMyGroupChannelChangeLogs(e,i)];case 1:return[2,a.sent()]}}))}))},n.prototype.getGroupChannelCount=function(e){return S(this,void 0,void 0,(function(){var r;return T(this,(function(i){return r=z(z({},Nx),e),Te(Tx(r)).throw(X.invalidParameters),[2,this._manager.getGroupChannelCount(r)]}))}))},n.prototype.getUnreadItemCount=function(e){return e===void 0&&(e={}),S(this,void 0,void 0,(function(){return T(this,(function(r){switch(r.label){case 0:return[4,this._manager.getUnreadItemCount(e)];case 1:return[2,r.sent()]}}))}))},n.prototype.getTotalUnreadChannelCount=function(){return S(this,void 0,void 0,(function(){return T(this,(function(e){switch(e.label){case 0:return[4,this._manager.getTotalUnreadChannelCount()];case 1:return[2,e.sent()]}}))}))},n.prototype.getTotalUnreadMessageCount=function(e){return e===void 0&&(e={}),S(this,void 0,void 0,(function(){return T(this,(function(r){switch(r.label){case 0:return[4,this._manager.getTotalUnreadMessageCount(e)];case 1:return[2,r.sent()]}}))}))},n.prototype.getTotalScheduledMessageCount=function(e){return e===void 0&&(e={}),S(this,void 0,void 0,(function(){return T(this,(function(r){switch(r.label){case 0:return[4,this._manager.getTotalScheduledMessageCount(e)];case 1:return[2,r.sent()]}}))}))},n.prototype.getSubscribedTotalUnreadMessageCount=function(){return this._manager.getSubscribedTotalUnreadMessageCount()},n.prototype.getSubscribedCustomTypeTotalUnreadMessageCount=function(){return this._manager.getSubscribedCustomTypeTotalUnreadMessageCount()},n.prototype.getSubscribedCustomTypeUnreadMessageCount=function(e){return this._manager.getSubscribedCustomTypeUnreadMessageCount(e)},n.prototype.createChannel=function(e){return e===void 0&&(e={}),S(this,void 0,void 0,(function(){var r;return T(this,(function(i){return r=z(z({},qE),e),Te(TN(r)).throw(X.invalidParameters),[2,this._manager.createChannel(r)]}))}))},n.prototype.createDistinctChannelIfNotExist=function(e){return e===void 0&&(e={}),S(this,void 0,void 0,(function(){var r;return T(this,(function(i){return r=z(z({},qE),e),Te(TN(r)).throw(X.invalidParameters),r&&(r.isDistinct=!0),[2,this.createChannel(r)]}))}))},n.prototype.createChannelWithUserIds=function(e,r,i,a,s,l){return r===void 0&&(r=!1),s===void 0&&(s=""),l===void 0&&(l=""),S(this,void 0,void 0,(function(){var c;return T(this,(function(d){return c=z(z({},qE),{invitedUserIds:e,isDistinct:r,name:i,data:s,customType:l}),typeof a=="string"?c.coverUrl=a:c.coverImage=a,[2,this.createChannel(c)]}))}))},n.prototype.markAsReadAll=function(){return S(this,void 0,void 0,(function(){return T(this,(function(e){return this._manager.markAsReadAll(),[2]}))}))},n.prototype.markAsReadWithChannelUrls=function(e){return S(this,void 0,void 0,(function(){return T(this,(function(r){return Te(Tt("string",e)).throw(X.invalidParameters),this._manager.markAsReadWithChannelUrls(e),[2]}))}))},n.prototype.markAsDelivered=function(e){return S(this,void 0,void 0,(function(){return T(this,(function(r){switch(r.label){case 0:return Te(Q("string",e)).throw(X.invalidParameters),[4,this.getChannel(e)];case 1:return[4,r.sent().markAsDelivered()];case 2:return r.sent(),[2]}}))}))},n})(J1);Tr.LATEST_LAST_MESSAGE;function _S(t){const n=k.useRef(t);return n.current=t,k.useCallback((...e)=>n.current(...e),[n])}var Sq=(function(t){function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.name="poll",e}return U(n,t),n.prototype.init=function(e,r){var i=r.sdkState,a=r.dispatcher,s=r.sessionManager,l=r.requestQueue,c=r.logger,d=r.onlineDetector,p=r.cacheContext;t.prototype.init.call(this,e,{sdkState:i,dispatcher:a,sessionManager:s,requestQueue:l,logger:c,onlineDetector:d,cacheContext:p}),this._manager=new p1(e,{sdkState:i,dispatcher:a,sessionManager:s,requestQueue:l,logger:c,onlineDetector:d,cacheContext:p})},n.prototype.create=function(e){return S(this,void 0,void 0,(function(){var r;return T(this,(function(i){return r=z(z({},Wj),e),Te(AD(r)).throw(X.invalidParameters),[2,this._manager.create(r)]}))}))},n.prototype.get=function(e){return S(this,void 0,void 0,(function(){var r;return T(this,(function(i){return r=z(z({},Yj),e),Te(MD(r)).throw(X.invalidParameters),[2,this._manager.get(r)]}))}))},n.prototype.getOption=function(e){return S(this,void 0,void 0,(function(){var r;return T(this,(function(i){return r=z(z({},Kj),e),Te(ID(r)).throw(X.invalidParameters),[2,this._manager.getOption(r)]}))}))},n.prototype.buildPollFromSerializedData=function(e){return this._manager.buildPollFromSerializedData(e)},n})(J1),Aq=function(t){return["-lastMessageUpdatedAt","-createdAt","syncIndex"]},BM=(function(t){function n(){return t!==null&&t.apply(this,arguments)||this}return U(n,t),n})(kn),Mx=function(t){this.key=t.key,this.url=t.url},Ox=function(t){this.id=t.id,this.name=t.name,this.url=t.url,this.emojis=t.emojis?t.emojis.map((function(n){return new Mx(n)})):[]},Iq=function(t){this.emojiHash=t.emoji_hash||"",this.emojiCategories=t.emoji_categories?t.emoji_categories.map((function(n){return new Ox(n)})):[]},Mq={profileImage:void 0,profileUrl:void 0,nickname:void 0},zM=function(t){return{v2:function(){return S(void 0,void 0,void 0,(function(){return T(this,(function(n){switch(n.label){case 0:return[4,t.commitSchema([{collectionName:JD,keyName:CV,index:[zE(Tr.LATEST_LAST_MESSAGE),zE(Tr.CHRONOLOGICAL),zE(Tr.CHANNEL_NAME_ALPHABETICAL)]},{collectionName:mS,keyName:wV,index:[Lu(Gi.CHANNEL_LATEST),Lu(Gi.NEWEST_CHILD_MESSAGE)]},{collectionName:ix,keyName:fB,index:[Lu(Gi.CHANNEL_LATEST),Lu(Gi.NEWEST_CHILD_MESSAGE)]},{collectionName:TV,keyName:SV}])];case 1:return[2,n.sent()]}}))}))},v3:function(){return S(void 0,void 0,void 0,(function(){return T(this,(function(n){switch(n.label){case 0:return[4,t.commitSchema([{collectionName:AV,keyName:IV,index:[Aq()]}])];case 1:return[2,n.sent()]}}))}))},v4:function(){return S(void 0,void 0,void 0,(function(){return T(this,(function(n){switch(n.label){case 0:return[4,t.commitSchema([{collectionName:tx,keyName:NV,index:[lB()]}])];case 1:return[2,n.sent()]}}))}))},v5:function(){return S(void 0,void 0,void 0,(function(){return T(this,(function(n){switch(n.label){case 0:return[4,t.commitSchema([{collectionName:nx,keyName:MV,index:[["-userId","-updatedAt"]]}])];case 1:return[2,n.sent()]}}))}))}}},qM=function(t){var n=new rx;return function(e,r){return S(void 0,void 0,void 0,(function(){var i,a,s,l;return T(this,(function(c){switch(c.label){case 0:switch(e){case 1:case 2:case 3:case 4:return[3,1];case 5:return[3,2];case 6:return[3,4];case 7:return[3,11]}return[3,15];case 1:return r(),[3,16];case 2:return[4,t.reset()];case 3:return c.sent(),r(),[3,16];case 4:return c.trys.push([4,9,,10]),i=zM(t),a=i.v2,s=i.v3,l=i.v4,[4,a()];case 5:return c.sent(),[4,s()];case 6:return c.sent(),[4,l()];case 7:return c.sent(),[4,t.collection(mS).removeIf({where:{channelType:Rt.OPEN}})];case 8:return c.sent(),[3,10];case 9:return c.sent(),n.warn("Failed to migrate to v2, v3, v4"),[3,10];case 10:return r(),[3,16];case 11:return c.trys.push([11,13,,14]),[4,(0,zM(t).v5)()];case 12:return c.sent(),[3,14];case 13:return c.sent(),n.warn("Failed to migrate to v5"),[3,14];case 14:return r(),[3,16];case 15:r(),c.label=16;case 16:return[2]}}))}))}},Oq=function(){return typeof document<"u"?document.visibilityState:"visible"},kq=(function(t){function n(e){var r=e.getVisibilityState,i=r===void 0?Oq:r,a=e.initialState,s=a===void 0?"visible":a,l=e.isEnabled,c=l===void 0||l,d=e.pauseCheckDelay,p=d===void 0?3e4:d,g=t.call(this)||this;return g._pauseCheckDelay=3e4,g._currentState="visible",g._getVisibilityState=i,g._pauseCheckDelay=p,g._currentState=s,g._isEnabled=c,g._boundToggleState=g._toggleState.bind(g),g}return U(n,t),Object.defineProperty(n.prototype,"currentState",{get:function(){return this._currentState},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isAvailable",{get:function(){return typeof window<"u"&&!!window.addEventListener&&!!window.removeEventListener},enumerable:!1,configurable:!0}),n.prototype._toggleState=function(){var e=this,r=this._getVisibilityState();r!=="hidden"?this._currentState==="hidden"&&(this._pauseDelayTimer&&(clearTimeout(this._pauseDelayTimer),this._pauseDelayTimer=void 0),this.dispatch("resume")):this._currentState!=="hidden"&&(this._pauseDelayTimer=setTimeout((function(){e._pauseDelayTimer=void 0,e.dispatch("pause")}),this._pauseCheckDelay)),this._currentState=r},n.prototype.start=function(){this._isEnabled&&this.isAvailable&&(this._boundToggleState=this._toggleState.bind(this),window.addEventListener("visibilitychange",this._boundToggleState,{capture:!0}))},n.prototype.stop=function(){this._isEnabled&&this.isAvailable&&this._boundToggleState&&window.removeEventListener("visibilitychange",this._boundToggleState,{capture:!0})},n})(Ap),Rq=(function(){function t(n){var e=n.logger,r=n.connectionDelegate,i=r===void 0?null:r,a=this;this._onlineWorker=function(){var s;return(s=a.connectionDelegate)===null||s===void 0?void 0:s.reconnect()},this._offlineWorker=function(){var s;return(s=a.connectionDelegate)===null||s===void 0?void 0:s.disconnect()},this.unsubscribes=[],this._onlineListener=function(s){if(a.isAvailableOnWeb)return window.addEventListener("online",s),function(){return window.removeEventListener("online",s,!1)}},this._offlineListener=function(s){if(a.isAvailableOnWeb)return window.addEventListener("offline",s),function(){return window.removeEventListener("offline",s,!1)}},this.logger=e,i&&(this.connectionDelegate=i)}return Object.defineProperty(t.prototype,"isAvailableOnWeb",{get:function(){return typeof window<"u"&&!!window.addEventListener&&"ononline"in window&&"onoffline"in window&&typeof navigator<"u"&&navigator.onLine!==void 0},enumerable:!1,configurable:!0}),t.prototype.setOnlineListener=function(n){n&&typeof n=="function"&&(this._onlineListener=n)},t.prototype.setOfflineListener=function(n){n&&typeof n=="function"&&(this._offlineListener=n)},t.prototype.start=function(){this.unsubscribes=[this._onlineListener(this._onlineWorker),this._offlineListener(this._offlineWorker)]},t.prototype.stop=function(){var n=this;this.unsubscribes.forEach((function(e){try{e?.()}catch(r){n.logger.warn(r.message)}})),this.unsubscribes=[]},t.prototype.isOnline=function(){return S(this,void 0,void 0,(function(){return T(this,(function(n){return this.isAvailableOnWeb?[2,navigator.onLine]:[2,new Promise((function(e){fetch("https://www.google.com",{method:ye.GET,mode:"no-cors"}).then((function(){return e(!0)})).catch((function(){return e(!1)}))}))]}))}))},t})(),Dq=(function(t){function n(e){var r,i=this;return(i=t.call(this)||this).method=ye.GET,i.path=J9,i.params=Le(Qe({ts:typeof e.token=="number"?e.token:void 0,token:typeof e.token=="string"?e.token:void 0,limit:(r=e.limit)!==null&&r!==void 0?r:100})),i}return U(n,t),n})(Ee),xq=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.configs=r.configs,i.hasMore=r.has_more,i.nextToken=r.next,i.ts=r.ts,i}return U(n,t),n})(Se),WM=(function(t){function n(e){var r=e.userId,i=e.nickname,a=e.profileUrl,s=e.profileImage,l=e.preferredLanguages,c=t.call(this)||this;return c.method=ye.PUT,c.path="".concat(nn,"/").concat(encodeURIComponent(r)),c.params=Le(Qe({nickname:i,profile_url:a,profile_file:s,preferred_languages:l})),c}return U(n,t),n})(Ee),KM=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.user=new St(e,z({},r)),i}return U(n,t),n})(Se),Pq=(function(t){function n(e){var r=e.userId,i=e.token,a=e.deviceOS,s=e.deviceManufacturer,l=e.systemPushEnabled,c=t.call(this)||this;return c.method=ye.POST,c.path="".concat(nn,"/").concat(encodeURIComponent(r),"/push/apns"),c.params=Le({apns_device_token:i,always_push:!0,device_os:a,device_manufacturer:s,system_push_enabled:l}),c}return U(n,t),n})(Ee);(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.token=r.token,i.type=r.type?Si[r.type.toLowerCase()]:Si.UNKNOWN,i.user=new St(e,r.user),i}U(n,t)})(Se);var Uq=(function(t){function n(e){var r=e.userId,i=e.token,a=e.deviceOS,s=e.deviceManufacturer,l=e.systemPushEnabled,c=t.call(this)||this;return c.method=ye.POST,c.path="".concat(nn,"/").concat(encodeURIComponent(r),"/push/gcm"),c.params=Le({gcm_reg_token:i,always_push:!0,device_os:a,device_manufacturer:s,system_push_enabled:l}),c}return U(n,t),n})(Ee);(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.token=r.token,i.type=r.type?Si[r.type.toLowerCase()]:Si.UNKNOWN,i.user=new St(e,r.user),i}U(n,t)})(Se);var Lq=(function(t){function n(e){var r=e.userId,i=e.token,a=t.call(this)||this;return a.method=ye.DELETE,a.path="".concat(nn,"/").concat(encodeURIComponent(r),"/push/apns/").concat(encodeURIComponent(i)),a}return U(n,t),n})(Ee),Fq=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.token=r.token,i.user=new St(e,r.user),i.lastDeletedAt=r.device_token_last_deleted_at,i}return U(n,t),n})(Se),Hq=(function(t){function n(e){var r=e.userId,i=e.token,a=t.call(this)||this;return a.method=ye.DELETE,a.path="".concat(nn,"/").concat(encodeURIComponent(r),"/push/gcm/").concat(encodeURIComponent(i)),a}return U(n,t),n})(Ee),jq=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.token=r.token,i.user=new St(e,r.user),i.lastDeletedAt=r.device_token_last_deleted_at,i}return U(n,t),n})(Se),Gq=(function(t){function n(e){var r=e.userId,i=t.call(this)||this;return i.method=ye.DELETE,i.path="".concat(nn,"/").concat(encodeURIComponent(r),"/push/apns"),i}return U(n,t),n})(Ee),Vq=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.type=r.type?Si[r.type.toLowerCase()]:Si.UNKNOWN,i.user=new St(e,r.user),i.lastDeletedAt=r.device_token_last_deleted_at,i}return U(n,t),n})(Se),Bq=(function(t){function n(e){var r=e.userId,i=t.call(this)||this;return i.method=ye.DELETE,i.path="".concat(nn,"/").concat(encodeURIComponent(r),"/push/gcm"),i}return U(n,t),n})(Ee),zq=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.type=r.type?Si[r.type.toLowerCase()]:Si.UNKNOWN,i.user=new St(e,r.user),i.lastDeletedAt=r.device_token_last_deleted_at,i}return U(n,t),n})(Se),qq=(function(t){function n(e){var r=e.userId,i=e.type,a=e.token,s=e.ts,l=t.call(this)||this;return l.method=ye.GET,l.path="".concat(nn,"/").concat(encodeURIComponent(r),"/push/").concat(encodeURIComponent(i),"/device_tokens"),l.params={created_ts:s,token:a},l}return U(n,t),n})(Ee),Wq=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.pushTokens={type:r.type?Si[r.type.toLowerCase()]:Si.UNKNOWN,deviceTokens:r.device_tokens,hasMore:r.has_more,token:r.token},i}return U(n,t),n})(Se),Kq=(function(t){function n(e){var r=e.userId,i=t.call(this)||this;return i.method=ye.GET,i.path="".concat(nn,"/").concat(encodeURIComponent(r),"/channel_invitation_preference"),i}return U(n,t),n})(Ee),Yq=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.autoAccept=r.auto_accept,i}return U(n,t),n})(Se),Qq=(function(t){function n(e){var r=e.userId,i=e.willAutoAccept,a=t.call(this)||this;return a.method=ye.PUT,a.path="".concat(nn,"/").concat(encodeURIComponent(r),"/channel_invitation_preference"),a.params={auto_accept:i},a}return U(n,t),n})(Ee),$q=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.autoAccept=r.auto_accept,i}return U(n,t),n})(Se),Xq=(function(t){function n(e){var r=e.userId,i=t.call(this)||this;return i.method=ye.GET,i.path="".concat(nn,"/").concat(encodeURIComponent(r),"/push_preference"),i}return U(n,t),n})(Ee),Zq=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.preference={doNotDisturbOn:r.do_not_disturb,startHour:r.start_hour,startMin:r.start_min,endHour:r.end_hour,endMin:r.end_min,timezone:r.timezone},i}return U(n,t),n})(Se),Jq=(function(t){function n(e){var r=e.userId,i=e.doNotDisturbOn,a=e.startHour,s=e.startMin,l=e.endHour,c=e.endMin,d=e.timezone,p=t.call(this)||this;return p.method=ye.PUT,p.path="".concat(nn,"/").concat(encodeURIComponent(r),"/push_preference"),p.params={do_not_disturb:i,start_hour:a,start_min:s,end_hour:l,end_min:c,timezone:d},p}return U(n,t),n})(Ee),eW=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.preference={doNotDisturbOn:r.do_not_disturb,startHour:r.start_hour,startMin:r.start_min,endHour:r.end_hour,endMin:r.end_min,timezone:r.timezone},i}return U(n,t),n})(Se),tW=(function(t){function n(e){var r=e.userId,i=t.call(this)||this;return i.method=ye.GET,i.path="".concat(nn,"/").concat(encodeURIComponent(r),"/push_preference"),i}return U(n,t),n})(Ee),nW=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.snoozePeriod={isSnoozeOn:r.snooze_enabled},typeof r.snooze_start_ts=="number"&&(i.snoozePeriod.startTs=r.snooze_start_ts),typeof r.snooze_end_ts=="number"&&(i.snoozePeriod.endTs=r.snooze_end_ts),i}return U(n,t),n})(Se),rW=(function(t){function n(e){var r=e.userId,i=e.snoozeOn,a=e.startTs,s=e.endTs,l=t.call(this)||this;return l.method=ye.PUT,l.path="".concat(nn,"/").concat(encodeURIComponent(r),"/push_preference"),l.params={snooze_enabled:i,snooze_start_ts:a,snooze_end_ts:s},l}return U(n,t),n})(Ee),iW=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.snoozePeriod={isSnoozeOn:r.snooze_enabled},typeof r.snooze_start_ts=="number"&&(i.snoozePeriod.startTs=r.snooze_start_ts),typeof r.snooze_end_ts=="number"&&(i.snoozePeriod.endTs=r.snooze_end_ts),i}return U(n,t),n})(Se),aW=(function(t){function n(e){var r=e.userId,i=e.blockedUserId,a=t.call(this)||this;return a.method=ye.POST,a.path="".concat(nn,"/").concat(encodeURIComponent(r),"/block"),a.params={target_id:i},a}return U(n,t),n})(Ee);(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.user=new St(e,r),i}U(n,t)})(Se);var sW=(function(t){function n(e){var r=e.userId,i=e.unblockedUserId,a=t.call(this)||this;return a.method=ye.DELETE,a.path="".concat(nn,"/").concat(encodeURIComponent(r),"/block/").concat(encodeURIComponent(i)),a}return U(n,t),n})(Ee);(function(t){function n(){return t!==null&&t.apply(this,arguments)||this}U(n,t)})(Se);var oW=(function(t){function n(e){var r=e.userId,i=t.call(this)||this;return i.method=ye.GET,i.path="".concat(nn,"/").concat(encodeURIComponent(r),"/push_preference"),i}return U(n,t),n})(Ee),lW=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.pushTriggerOption=r.push_trigger_option,i}return U(n,t),n})(Se),uW=(function(t){function n(e){var r=e.userId,i=e.pushTriggerOption,a=t.call(this)||this;return a.method=ye.PUT,a.path="".concat(nn,"/").concat(encodeURIComponent(r),"/push_preference"),a.params={push_trigger_option:i},a}return U(n,t),n})(Ee),cW=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.pushTriggerOption=r.push_trigger_option,i}return U(n,t),n})(Se),dW=(function(t){function n(e){var r=e.userId,i=t.call(this)||this;return i.method=ye.GET,i.path="".concat(nn,"/").concat(encodeURIComponent(r),"/push/template"),i}return U(n,t),n})(Ee),hW=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.name=r.name,i}return U(n,t),n})(Se),fW=(function(t){function n(e){var r=e.userId,i=e.templateName,a=t.call(this)||this;return a.method=ye.PUT,a.path="".concat(nn,"/").concat(encodeURIComponent(r),"/push/template"),a.params={name:i},a}return U(n,t),n})(Ee),pW=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.name=r.name,i}return U(n,t),n})(Se),mW=(function(t){function n(e){var r=e.userId,i=e.token,a=t.call(this)||this;return a.method=ye.GET,a.path="".concat(nn,"/").concat(encodeURIComponent(r),"/friends/changelogs"),a.params={token:i},a}return U(n,t),n})(Ee),gW=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.changelogs={addedUsers:r.added.map((function(a){return new St(e,a)})),updatedUsers:r.updated.map((function(a){return new St(e,a)})),deletedUserIds:r.deleted,hasMore:r.has_more,token:r.next},i}return U(n,t),n})(Se),vW=(function(t){function n(e){var r=e.userId,i=e.discoveries,a=t.call(this)||this;return a.method=ye.PUT,a.path="".concat(nn,"/").concat(encodeURIComponent(r),"/friend_discoveries"),a.params={friend_discoveries:i.map((function(s){return{friend_discovery_key:s.friendDiscoveryKey,friend_name:s.friendName}}))},a}return U(n,t),n})(Ee),_W=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.friendDiscoveryRequestId=r.friend_discovery_request_id,i}return U(n,t),n})(Se),yW=(function(t){function n(e){var r=e.userId,i=e.discoveryKeys,a=t.call(this)||this;return a.method=ye.DELETE,a.path="".concat(nn,"/").concat(encodeURIComponent(r),"/friend_discoveries"),a.params={friend_discovery_keys:i},a}return U(n,t),n})(Ee);(function(t){function n(){return t!==null&&t.apply(this,arguments)||this}U(n,t)})(Se);var bW=(function(t){function n(e){var r=e.userId,i=e.userIds,a=t.call(this)||this;return a.method=ye.POST,a.path="".concat(nn,"/").concat(encodeURIComponent(r),"/friends"),a.params={user_ids:i},a}return U(n,t),n})(Ee),EW=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.users=r.users.map((function(a){return new St(e,a)})),i}return U(n,t),n})(Se),CW=(function(t){function n(e){var r=e.userId,i=e.userIds,a=t.call(this)||this;return a.method=ye.DELETE,a.path="".concat(nn,"/").concat(encodeURIComponent(r),"/friends"),a.params={user_ids:i},a}return U(n,t),n})(Ee);(function(t){function n(){return t!==null&&t.apply(this,arguments)||this}U(n,t)})(Se);var wW=(function(t){function n(e){var r=e.userId,i=t.call(this)||this;return i.method=ye.GET,i.path="".concat(nn,"/").concat(encodeURIComponent(r),"/allow_friend_discovery"),i.params={},i}return U(n,t),n})(Ee),NW=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.allowFriendDiscovery=r.allow_friend_discovery,i}return U(n,t),n})(Se),TW=(function(t){function n(e){var r=e.userId,i=e.allowFriendDiscovery,a=t.call(this)||this;return a.method=ye.PUT,a.path="".concat(nn,"/").concat(encodeURIComponent(r),"/allow_friend_discovery"),a.params={allow_friend_discovery:i},a}return U(n,t),n})(Ee);(function(t){function n(){return t!==null&&t.apply(this,arguments)||this}U(n,t)})(Se);var T1,SW=(function(t){function n(){var e=t.call(this)||this;return e.method=ye.GET,e.path=xR,e}return U(n,t),n})(Ee),AW=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.emojiContainer=new Iq(r),i}return U(n,t),n})(Se),IW=(function(t){function n(e){var r=e.categoryId,i=t.call(this)||this;return i.method=ye.GET,i.path="".concat(xR,"/").concat(r),i}return U(n,t),n})(Ee),MW=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.emojiCategory=new Ox(r),i}return U(n,t),n})(Se),OW=(function(t){function n(e){var r=e.key,i=t.call(this)||this;return i.method=ye.GET,i.path="".concat(W9,"/").concat(r),i}return U(n,t),n})(Ee),kW=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.emoji=new Mx(r),i}return U(n,t),n})(Se),RW=(function(t){function n(){var e=t.call(this)||this;return e.method=ye.GET,e.path="".concat(K9),e}return U(n,t),n})(Ee),DW=(function(t){function n(e,r){var i,a=this,s=r??{};return(a=t.call(this,e,r)||this).uikitConfiguration={string:JSON.stringify(s),json:s},a.updatedAt=(i=r?.updated_at)!==null&&i!==void 0?i:0,a}return U(n,t),n})(Se);(function(t){t.DELIVERED="DELIVERED",t.CLICKED="CLICKED"})(T1||(T1={}));var M_,YM=(function(t){function n(e){var r=e.deviceToken,i=e.pushTrackingId,a=e.messageId,s=e.allowedPushNotification,l=e.channelKey,c=e.templateKey,d=e.eventType,p=e.notificationEventDeadline,g=t.call(this)||this;return g.method=ye.POST,g.path=$9,g.params=Le({device_token:r,push_tracking_id:i,message_id:a,allowed_push_notification:s,channel_key:l,template_key:c,event_type:d,notification_event_deadline:p}),g}return U(n,t),n})(Ee),xW=(function(){function t(n,e,r){var i=this;this._storeInitialized=!1,this._iid=n,this.options=e;var a=W.of(n),s=a.sdkState,l=a.cacheContext,c=a.dispatcher,d=a.sessionManager,p=a.requestQueue,g=a.logger,_=a.userEventHandlers,y=a.appStateToggleEnabled;this._onlineDetector=new Rq({logger:g,connectionDelegate:{reconnect:function(){return S(i,void 0,void 0,(function(){var w,A,M,I,D,P;return T(this,(function(H){switch(H.label){case 0:if(w=W.of(n),A=w.sdkState,M=w.connectionManager,(I=w.sessionManager).session.hasSession)return[3,5];H.label=1;case 1:return H.trys.push([1,3,,4]),[4,M.connect(I.session.authToken)];case 2:return H.sent(),[3,4];case 3:if(D=H.sent(),Ca(D))throw D;return g.debug("connect failed by reconnect event = ",D),[3,4];case 4:return[3,9];case 5:if(A.appState!=="foreground")return[3,9];H.label=6;case 6:return H.trys.push([6,8,,9]),[4,M.resetAndReconnect()];case 7:return H.sent(),[3,9];case 8:if(P=H.sent(),Ca(P))throw P;return g.debug("resetAndReconnect failed by reconnect event = ",P),[3,9];case 9:return c.dispatch(new BM),[2]}}))}))},disconnect:function(){gr((function(){return S(i,void 0,void 0,(function(){var w,A,M;return T(this,(function(I){switch(I.label){case 0:return w=W.of(n),A=w.connectionManager,M=w.dispatcher,[4,A.disconnect()];case 1:return I.sent(),M.dispatch(new Dc(new qn({type:An.WEBSOCKET_DISCONNECT,data:{success:!0,error_code:ze.NETWORK_ERROR,error_description:"cause=network_closed"}}))),[2]}}))}))}))}}});var C=new z_(n,{localCacheEnabled:l.localCacheEnabled,enableAutoResend:l.localCacheConfig.enableAutoResend,dispatcher:c,sdkState:s,logger:g});r.forEach((function(w){w.init(n,{sdkState:s,cacheContext:l,dispatcher:c,sessionManager:d,requestQueue:p,logger:g,onlineDetector:i._onlineDetector}),i[w.name]=w})),this._appStateChangeDetector=new kq({isEnabled:y}),this._appStateChangeDetector.on("resume",(function(){g.debug("the page resumes from freeze"),i.setForegroundState()})).on("pause",(function(){g.debug("the page freezes"),i.setBackgroundState()})),c.on((function(w){var A;if(w instanceof Bs)w.stateType===en.CONNECTED&&C.processNonAutoResendRegisteredPendingMessages();else if(w instanceof Xn){if(w.code==="USEV"){var M=w.as(dx).event;if(M.category===R0.FRIEND_DISCOVERED){var I=C1.getDataAsFriendDiscoveredEvent(n,M).friendDiscoveries;$e((function(){return S(i,void 0,void 0,(function(){return T(this,(function(L){return[2,_.forEach((function(G){G.onFriendsDiscovered&&G.onFriendsDiscovered(I)}))]}))}))}))}}}else if(w instanceof tS){var D=W.of(i._iid).subscribedUnreadMessageCount,P=!1,H=w.ts;typeof H=="number"&&H>D.ts&&(D.all!==w.all&&(P=!0),D.all=w.all>=0?w.all:0,w.customTypes&&Object.keys(w.customTypes).forEach((function(L){D.customTypes[L]!==w.customTypes[L]&&(P=!0),D.customTypes[L]=w.customTypes[L]})),P=P&&D.ts>0,D.ts=H),P&&$e((function(){return S(i,void 0,void 0,(function(){return T(this,(function(L){return[2,_.forEach((function(G){G.onTotalUnreadMessageCountChanged&&G.onTotalUnreadMessageCountChanged({groupChannelCount:D.all,feedChannelCount:D.feed,customTypeUnreadCount:D.customTypes}),G.onTotalUnreadMessageCountUpdated&&G.onTotalUnreadMessageCountUpdated(D.all,D.customTypes)}))]}))}))}))}else w instanceof dD?(l.preference.set(i._getUserProfileCacheKey(s.userId),fN.payloadify(w.userProfile)),!((A=w.userProfile.appInfo.notificationInfo)===null||A===void 0)&&A.isEnabled&&l.preference.set(nS(i.appId),{value:!0})):w instanceof fD?w.configSyncNeeded&&gr((function(){return S(i,void 0,void 0,(function(){return T(this,(function(L){switch(L.label){case 0:return[4,this._getAppConfigsInfo()];case 1:return L.sent(),[2]}}))}))})):w instanceof cx?l.preference.set(h1(i.appId),{configTs:w.configTs}):w instanceof _g&&w.error&&w.error.isSessionInvalidatedError&&(g.debug("session revoked."),i._internalDisconnect(w.error))}))}return t.init=function(n){var e=n.appId,r=n.appVersion,i=n.modules,a=i===void 0?[]:i,s=n.options,l=s===void 0?new kR:s,c=n.debugMode,d=c!==void 0&&c,p=n.customApiHost,g=n.customWebSocketHost,_=n.newInstance,y=_!==void 0&&_,C=n.logLevel,w=n.localCacheEnabled,A=w!==void 0&&w,M=n.localCacheConfig,I=M===void 0?new DR:M,D=n.localCacheEncryption,P=n.useAsyncStorageStore,H=P===void 0?null:P,L=n.useMMKVStorageStore,G=L===void 0?null:L,Y=n.appStateToggleEnabled,F=Y===void 0||Y;if(!M_||y){var ne="su-".concat(So()),J=D??{encrypt:function(q){return q},decrypt:function(q){return q}},re=new rx;re.level=C??Oc.WARN;var Oe=new $f({encryption:J});d||(lN()?G?Oe=new sB({MMKV:G,encryption:J}):H&&(Oe=new aB({AsyncStorage:H,encryption:J}),re.warn("AsyncStorage store is deprecated due to the small size limit. Please use MMKVStorage store instead.")):Oe=new iB({encryption:J})),new W(ne,{appId:e,appVersion:r,options:l,apiHost:p??"https://api-".concat(e,".sendbird.com"),websocketHost:g??"wss://ws-".concat(e,".sendbird.com"),store:Oe,encryption:J,logger:re,localCacheEnabled:A,localCacheConfig:I,debugMode:d,appStateToggleEnabled:F});var Z=[new IB,new Sq],ue=new t(ne,l,Je(Je([],Ye(a),!1),Ye(Z),!1));return M_||(M_=ue),ue}return M_},Object.defineProperty(t,"instance",{get:function(){return M_},enumerable:!1,configurable:!0}),Object.defineProperty(t,"version",{get:function(){return MR},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"appId",{get:function(){return W.of(this._iid).sdkState.appId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"appInfo",{get:function(){var n=W.of(this._iid).appInfo;return n??null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"appVersion",{get:function(){var n;return(n=W.of(this._iid).sdkState.appVersion)!==null&&n!==void 0?n:""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"debugMode",{get:function(){return!!W.of(this._iid).debugMode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"logLevel",{get:function(){return W.of(this._iid).logger.level},set:function(n){W.of(this._iid).logger.level=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCacheEnabled",{get:function(){return W.of(this._iid).cacheContext.localCacheEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localCacheConfig",{get:function(){var n=W.of(this._iid).cacheContext;return n.localCacheEnabled?n.localCacheConfig:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ekey",{get:function(){return W.of(this._iid).sessionManager.ekey},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentUser",{get:function(){var n;return(n=W.of(this._iid).sessionManager.currentUser)!==null&&n!==void 0?n:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"connectionState",{get:function(){var n=W.of(this._iid).connectionManager;return n.isConnected?zl.OPEN:n.isConnecting?zl.CONNECTING:zl.CLOSED},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastConnectedAt",{get:function(){var n=W.of(this._iid),e=n.connectedAt;return n.connectionManager.isConnected?e:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fcmPushToken",{get:function(){var n;return(n=this._fcmPushToken)!==null&&n!==void 0?n:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"apnsPushToken",{get:function(){var n;return(n=this._apnsPushToken)!==null&&n!==void 0?n:null},enumerable:!1,configurable:!0}),t.prototype._getNestDBVersion=function(){return 8},t.prototype._getPreferenceVersion=function(){return 9},t.prototype._getPreferenceCacheKey=function(n){return"sendbird@".concat(this.appId,"/").concat(n,".pref")},t.prototype._getUserProfileCacheKey=function(n){return"sendbird@".concat(this.appId,"/").concat(n,".profile")},t.prototype._internalDisconnect=function(n){return S(this,void 0,void 0,(function(){var e,r,i,a;return T(this,(function(s){switch(s.label){case 0:return e=W.of(this._iid),r=e.connectionManager,i=e.sdkState,a=e.requestQueue,this._appStateChangeDetector.stop(),this._onlineDetector.stop(),a.cancelAll(),[4,r.logout(n)];case 1:return s.sent(),[4,this.clearCachedData()];case 2:return s.sent(),i.appState="foreground",[2]}}))}))},t.prototype._getAppConfigsInfo=function(){return S(this,void 0,void 0,(function(){var n,e,r,i,a,s,l,c,d=this;return T(this,(function(p){switch(p.label){case 0:return n=W.of(this._iid),e=n.requestQueue,r=n.dispatcher,i=n.cacheContext,a=n.sdkState,s={},[4,i.preference.get(h1(a.appId))];case 1:return(c=p.sent())&&(l=c.configTs),new Vc("appConfigsInfo",(function(g){return S(d,void 0,void 0,(function(){var _,y,C,w,A,M,I,D;return T(this,(function(P){switch(P.label){case 0:return _={hasNext:!0,nextToken:g},y=new Dq({token:g}),[4,e.send(y)];case 1:return C=P.sent(),w=C.as(xq),A=w.configs,M=w.hasMore,I=w.nextToken,D=w.ts,Object.keys(A).forEach((function(H){s[H]=A[H]})),_.hasNext=M,_.nextToken=I,M||r.dispatch(new hx({appConfigsInfo:s,configTs:D})),[2,_]}}))}))})).start(l),[2]}}))}))},t.prototype.getMemoryStoreForDebugging=function(){var n=W.of(this._iid),e=n.debugMode,r=n.cacheContext;if(e)return r.store instanceof $f?r.store:null;throw X.debugModeRequired},t.prototype.addExtension=function(n,e){var r=W.of(this._iid).sdkState;["sb_uikit","sb_syncmanager","device-os-platform"].indexOf(n)>-1&&r.extensions&&(r.extensions[n]=e)},t.prototype.addSendbirdExtensions=function(n,e,r){var i,a,s=W.of(this._iid),l=s.logger,c=s.sdkState,d=new RegExp(iH);if(n.length===0)return l.debug("sb.addSendbirdExtensions() has failed because the given sendbirdExtensions is empty."),!1;if(n.find((function(w){return!d.test(w.version)})))return l.debug("sb.addSendbirdExtensions() has failed because the given version did not satisfy the SemVer specification."),!1;if(r)try{for(var p=Re(Object.entries(r)),g=p.next();!g.done;g=p.next()){var _=Ye(g.value,2),y=_[0],C=_[1];if(/&|=/.test(y)||/&|=/.test(C))return l.debug("sb.addSendbirdExtensions() has failed because the given customData includes at least one invalid character: = or &."),!1}}catch(w){i={error:w}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}return c.sendbirdRuntimeEnvironment={sendbirdExtensions:n,deviceOS:e,customData:r},!0},t.prototype.setOnlineListener=function(n){this._onlineDetector.setOnlineListener(n)},t.prototype.setOfflineListener=function(n){this._onlineDetector.setOfflineListener(n)},t.prototype._safeInitializeStore=function(n){return S(this,void 0,void 0,(function(){var e;return T(this,(function(r){switch(r.label){case 0:e=W.of(this._iid).cacheContext,r.label=1;case 1:return r.trys.push([1,3,,5]),[4,e.store.init(n)];case 2:return r.sent(),this._storeInitialized=!0,[3,5];case 3:return r.sent(),e.replaceStore(new $f),[4,this._safeInitializeStore(n)];case 4:return r.sent(),[3,5];case 5:return[2]}}))}))},t.prototype.initializeCache=function(n){return S(this,void 0,void 0,(function(){var e,r,i,a,s,l,c,d,p;return T(this,(function(g){switch(g.label){case 0:if(e=W.of(this._iid),r=e.sdkState,i=e.cacheContext,a=e.dispatcher,s=e.logger,r.userId&&r.userId===n)return[3,13];l="sendbird@".concat(r.appId,"/").concat(n,".db"),g.label=1;case 1:return g.trys.push([1,9,11,13]),i.localCacheEnabled?i.nestdb&&i.nestdb.state!==ql.CLOSED&&i.nestdb.name===l?[3,3]:(c="sendbird@".concat(r.appId,"/").concat(n,".db"),(d=i.nestdb=new oB({name:c,version:this._getNestDBVersion(),store:i.store,config:new Y0({dbname:c,cacheLimit:64,itemSizeLimit:61440})})).on("upgrade",qM(d)),d.on("storeReplaced",(function(_){i.replaceStore(_),i.localCacheEnabled=!1,d.on("upgrade",qM(d))})),[4,d.open()]):[3,6];case 2:return g.sent(),this._storeInitialized=!0,a.dispatch(new lx(this._iid,{userId:n})),[3,5];case 3:return[4,this._safeInitializeStore(l)];case 4:g.sent(),g.label=5;case 5:return r.userId=n,[3,8];case 6:return[4,this._safeInitializeStore(l)];case 7:g.sent(),r.userId=n,g.label=8;case 8:return[3,13];case 9:return p=g.sent(),s.warn("Nest DB Open Failed. ",p),i.store instanceof $f||(i.replaceStore(new $f),i.localCacheEnabled=!1),[4,this._safeInitializeStore(l)];case 10:throw g.sent(),r.userId=n,X.databaseError;case 11:return[4,this._setupPreference(n)];case 12:return g.sent(),[7];case 13:return[2]}}))}))},t.prototype.getCacheDataSize=function(){return S(this,void 0,void 0,(function(){var n;return T(this,(function(e){switch(e.label){case 0:return(n=W.of(this._iid).cacheContext).localCacheEnabled&&n.nestdb?[4,n.nestdb.estimateUsage()]:[3,2];case 1:return[2,e.sent()];case 2:return[2,0]}}))}))},t.prototype.clearCachedData=function(){return S(this,void 0,void 0,(function(){var n;return T(this,(function(e){switch(e.label){case 0:return(n=W.of(this._iid).cacheContext).localCacheEnabled&&n.nestdb?[4,n.nestdb.clear()]:[3,2];case 1:e.sent(),e.label=2;case 2:return this._storeInitialized?[4,n.preference.clear()]:[3,4];case 3:e.sent(),e.label=4;case 4:return[2]}}))}))},t.prototype.clearCachedMessages=function(n){return S(this,void 0,void 0,(function(){var e,r,i=this;return T(this,(function(a){switch(a.label){case 0:return Te(Tt("string",n)).throw(X.invalidParameters),e=lp.of(this._iid),r=Ep.of(this._iid),e&&r?[4,Promise.all(n.map((function(s){return S(i,void 0,void 0,(function(){return T(this,(function(l){switch(l.label){case 0:return[4,e.removeMessagesOfChannel(s)];case 1:return l.sent(),[4,r.removeMessagesOfChannel(s)];case 2:return l.sent(),[2]}}))}))})))]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}}))}))},t.prototype._setupPreference=function(n){return S(this,void 0,void 0,(function(){var e,r,i,a,s;return T(this,(function(l){switch(l.label){case 0:return e=W.of(this._iid),r=e.sdkState,i=e.cacheContext,a=e.statManager,[4,i.preference.init(this._getPreferenceCacheKey(n),this._getPreferenceVersion())];case 1:return l.sent(),[4,i.preference.get(this._getUserProfileCacheKey(n))];case 2:return(s=l.sent())&&new fN(this._iid,s).apply(),[4,a.init("sendbird@".concat(r.appId,"/").concat(n,".statlog"))];case 3:return l.sent(),[2]}}))}))},t.prototype._ready=function(n,e,r){return r===void 0&&(r={}),S(this,void 0,void 0,(function(){var i,a,s,l,c,d;return T(this,(function(p){switch(p.label){case 0:return Te(Q("string",n)&&Q("string",e,!0)).throw(X.invalidParameters),i=W.of(this._iid),a=i.sdkState,s=i.cacheContext,l=i.connectionManager,c=r.errorForOtherUser,a.userId&&a.userId!==n?c?[3,2]:[4,l.logout()]:[3,3];case 1:return p.sent(),[3,3];case 2:throw c;case 3:return p.trys.push([3,5,,6]),[4,this.initializeCache(n)];case 4:return p.sent(),W.of(this._iid).dispatcher.dispatch(new ux),[3,6];case 5:return p.sent(),d=W.of(this._iid).logger,s.localCacheEnabled=!1,d.warn("Cache initialization failed - cache is not available."),[3,6];case 6:return[2]}}))}))},t.prototype.authenticateFeed=function(n,e){return S(this,void 0,void 0,(function(){return T(this,(function(r){switch(r.label){case 0:return[4,this.authenticate(n,e)];case 1:return[2,r.sent()]}}))}))},t.prototype.authenticate=function(n,e,r){var i;return r===void 0&&(r=i1.SESSION_TOKEN),S(this,void 0,void 0,(function(){var a,s,l;return T(this,(function(c){switch(c.label){case 0:return a=W.of(this._iid),s=a.sessionManager,l=a.connectionManager,[4,this._ready(n,e,{errorForOtherUser:l.isConnected?X.alreadyConnectedAsAnotherUser:void 0})];case 1:return c.sent(),!((i=s.session.services)===null||i===void 0)&&i.includes(s1.CHAT)?[3,3]:(s.handler||e&&r!==i1.ACCESS_TOKEN||this.setSessionHandler(new EM),[4,s.authenticate(n,e)]);case 2:c.sent(),c.label=3;case 3:return[2,this.currentUser]}}))}))},t.prototype.connect=function(n,e){return S(this,void 0,void 0,(function(){return T(this,(function(r){switch(r.label){case 0:return[4,this._ready(n,e)];case 1:r.sent(),r.label=2;case 2:return r.trys.push([2,,4,5]),[4,W.of(this._iid).connectionManager.connect(e)];case 3:return r.sent(),[3,5];case 4:return this._onlineDetector.start(),this._appStateChangeDetector.start(),[7];case 5:return[2,this.currentUser]}}))}))},t.prototype.reconnect=function(){var n=W.of(this._iid),e=n.connectionManager,r=n.sdkState,i=n.sessionManager,a=n.dispatcher,s=i.session.hasSession;return s&&(a.dispatch(new Dc(new qn({type:An.WEBSOCKET_DISCONNECT,data:{success:!0,error_code:0,error_description:"cause=explicit_reconnect"}}))),this._appStateChangeDetector.start(),this._onlineDetector.start(),e.resetAndReconnect().then((function(){r.appState="foreground"})).catch((function(){}))),s},t.prototype.disconnect=function(){return S(this,void 0,void 0,(function(){return T(this,(function(n){switch(n.label){case 0:return[4,this._internalDisconnect()];case 1:return n.sent(),[2]}}))}))},t.prototype.disconnectWebSocket=function(){return S(this,void 0,void 0,(function(){var n,e,r;return T(this,(function(i){switch(i.label){case 0:return n=W.of(this._iid),e=n.connectionManager,r=n.requestQueue,n.dispatcher.dispatch(new Dc(new qn({type:An.WEBSOCKET_DISCONNECT,data:{success:!0,error_code:0,error_description:"cause=explicit_disconnect_websocket"}}))),this._appStateChangeDetector.stop(),this._onlineDetector.stop(),r.cancelAll(),[4,e.disconnectWebSocket(!0)];case 1:return i.sent(),[2]}}))}))},t.prototype.setBackgroundState=function(){var n=W.of(this._iid),e=n.connectionManager,r=n.sdkState,i=n.logger,a=n.dispatcher;r.appState==="foreground"&&(r.appState="background",i.debug("going background state"),a.dispatch(new Dc(new qn({type:An.WEBSOCKET_DISCONNECT,data:{success:!0,error_code:ze.WEBSOCKET_CONNECTION_CLOSED,error_description:"cause=background"}}))),e.background().catch((function(s){i.debug("setBackgroundState error = ",s)})))},t.prototype.setForegroundState=function(){var n=W.of(this._iid),e=n.connectionManager,r=n.sdkState,i=n.dispatcher,a=n.logger;r.appState==="background"&&(r.appState="foreground",a.debug("going foreground state"),e.resetAndReconnect().catch((function(s){a.debug("setForgroundState error = ",s)})),i.dispatch(new BM))},t.prototype.setSessionHandler=function(n){Te(n instanceof EM).throw(X.invalidParameters),W.of(this._iid).sessionManager.handler=n},t.prototype.addUserEventHandler=function(n,e){Te(Q("string",n)&&e instanceof GV).throw(X.invalidParameters),W.of(this._iid).userEventHandlers.set(n,e)},t.prototype.removeUserEventHandler=function(n){W.of(this._iid).userEventHandlers.delete(n)},t.prototype.removeAllUserEventHandler=function(){W.of(this._iid).userEventHandlers.clear()},t.prototype.addConnectionHandler=function(n,e){Te(Q("string",n)&&e instanceof jV).throw(X.invalidParameters),W.of(this._iid).connectionHandlers.set(n,e)},t.prototype.removeConnectionHandler=function(n){W.of(this._iid).connectionHandlers.delete(n)},t.prototype.removeAllConnectionHandler=function(){W.of(this._iid).connectionHandlers.clear()},t.prototype.createApplicationUserListQuery=function(n){return n===void 0&&(n={}),new zV(this._iid,n)},t.prototype.createBlockedUserListQuery=function(n){return n===void 0&&(n={}),new KV(this._iid,n)},t.prototype.createFriendListQuery=function(n){return n===void 0&&(n={}),new $V(this._iid,n)},t.prototype.createMessageSearchQuery=function(n){return new CB(this._iid,n)},t.prototype.createPollListQuery=function(n){return new OD(this._iid,z({},n))},t.prototype.createPollVoterListQuery=function(n){return new kD(this._iid,z({},n))},t.prototype.buildUserFromSerializedData=function(n){var e=Uc(n);return new St(this._iid,St.payloadify(e))},t.prototype.updateCurrentUserInfo=function(n){return n===void 0&&(n={}),S(this,void 0,void 0,(function(){var e,r,i,a,s,l,c;return T(this,(function(d){switch(d.label){case 0:return e=z(z({},Mq),n),Te((function(p){return Ai(p.profileImage,!0)&&Q("string",p.profileUrl,!0)&&Q("string",p.nickname,!0)})(e)).throw(X.invalidParameters),this.currentUser?(r=W.of(this._iid),i=r.sdkState,a=r.requestQueue,s=new WM(z({userId:i.userId},e)),[4,a.send(s)]):[3,2];case 1:return l=d.sent(),c=l.as(KM).user,this.currentUser&&(e.nickname&&(this.currentUser.nickname=c.nickname),(e.profileUrl||e.profileImage)&&(this.currentUser.plainProfileUrl=c.profileUrl)),[2,c];case 2:throw X.connectionRequired}}))}))},t.prototype.updateCurrentUserInfoWithPreferredLanguages=function(n){return S(this,void 0,void 0,(function(){var e,r,i,a,s,l;return T(this,(function(c){switch(c.label){case 0:return Te(Tt("string",n)).throw(X.invalidParameters),this.currentUser?(e=W.of(this._iid),r=e.sdkState,i=e.requestQueue,a=new WM({userId:r.userId,preferredLanguages:n}),[4,i.send(a)]):[3,2];case 1:return s=c.sent(),l=s.as(KM).user,this.currentUser&&(this.currentUser.preferredLanguages=l.preferredLanguages),[2,l];case 2:throw X.connectionRequired}}))}))},t.prototype.registerFCMPushTokenForCurrentUser=function(n,e){var r,i;return S(this,void 0,void 0,(function(){var a,s,l,c,d,p,g=this;return T(this,(function(_){switch(_.label){case 0:if(Te(Q("string",n)&&Q("string",e?.deviceManufacturer,!0)).throw(X.invalidParameters),e?.deviceOS&&Te(Nt(oh,e.deviceOS.platform,!0)&&Q("string",e.deviceOS.version,!0)).throw(X.invalidParameters),!this.currentUser)return[3,6];a={deviceOS:"".concat(((r=e?.deviceOS)===null||r===void 0?void 0:r.platform)||oh.ANDROID,"-").concat(((i=e?.deviceOS)===null||i===void 0?void 0:i.version)||"unknown"),deviceManufacturer:e?.deviceManufacturer,systemPushEnabled:e?.systemPushEnabled},_.label=1;case 1:return _.trys.push([1,4,,5]),s=W.of(this._iid),l=s.sessionManager,c=s.sdkState,d=s.requestQueue,l.hasDeviceToken(Si.FCM,n)?[2,Va.SUCCESS]:(p=new Uq({userId:c.userId,token:n,deviceOS:a.deviceOS,deviceManufacturer:a.deviceManufacturer,systemPushEnabled:a.systemPushEnabled}),[4,d.send(p)]);case 2:return _.sent(),[4,gr((function(){return S(g,void 0,void 0,(function(){return T(this,(function(y){switch(y.label){case 0:return l.setDeviceToken(Si.FCM,n,a),[4,l.saveDeviceToken()];case 1:return y.sent(),[2]}}))}))}))];case 3:return _.sent(),this._fcmPushToken="",[2,Va.SUCCESS];case 4:return _.sent(),[2,Va.ERROR];case 5:return[3,7];case 6:return this._fcmPushToken=n,[2,Va.PENDING];case 7:return[2]}}))}))},t.prototype.unregisterFCMPushTokenForCurrentUser=function(n){return S(this,void 0,void 0,(function(){var e,r,i,a,s,l,c,d=this;return T(this,(function(p){switch(p.label){case 0:if(Te(Q("string",n)).throw(X.invalidParameters),!this.currentUser)return[3,6];p.label=1;case 1:return p.trys.push([1,4,,5]),e=W.of(this._iid),r=e.sessionManager,i=e.sdkState,a=e.requestQueue,s=new Hq({userId:i.userId,token:n}),[4,a.send(s)];case 2:return l=p.sent(),c=l.as(jq).lastDeletedAt,[4,gr((function(){return S(d,void 0,void 0,(function(){return T(this,(function(g){switch(g.label){case 0:return r.unsetDeviceToken(Si.FCM,n),r.setDeviceTokenDeletedAt(c),[4,r.saveDeviceToken()];case 1:return g.sent(),[2]}}))}))}))];case 3:return p.sent(),this._fcmPushToken="",[2,Va.SUCCESS];case 4:return p.sent(),[2,Va.ERROR];case 5:return[3,7];case 6:return this._fcmPushToken=n,[2,Va.PENDING];case 7:return[2]}}))}))},t.prototype.unregisterFCMPushTokenAllForCurrentUser=function(){return S(this,void 0,void 0,(function(){var n,e,r,i,a,s,l,c=this;return T(this,(function(d){switch(d.label){case 0:return this.currentUser?(n=W.of(this._iid),e=n.sessionManager,r=n.sdkState,i=n.requestQueue,a=new Bq({userId:r.userId}),[4,i.send(a)]):[3,3];case 1:return s=d.sent(),l=s.as(zq).lastDeletedAt,[4,gr((function(){return S(c,void 0,void 0,(function(){return T(this,(function(p){switch(p.label){case 0:return e.unsetDeviceTokens(Si.FCM),e.setDeviceTokenDeletedAt(l),[4,e.saveDeviceToken()];case 1:return p.sent(),[2]}}))}))}))];case 2:d.sent(),d.label=3;case 3:return[2]}}))}))},t.prototype.registerAPNSPushTokenForCurrentUser=function(n,e){var r,i;return S(this,void 0,void 0,(function(){var a,s,l,c,d,p,g=this;return T(this,(function(_){switch(_.label){case 0:if(Te(Q("string",n)&&Q("string",e?.deviceManufacturer,!0)).throw(X.invalidParameters),e?.deviceOS&&Te(Nt(oh,e.deviceOS.platform,!0)&&Q("string",e.deviceOS.version,!0)).throw(X.invalidParameters),!this.currentUser)return[3,6];a={deviceOS:"".concat(((r=e?.deviceOS)===null||r===void 0?void 0:r.platform)||oh.IOS,"-").concat(((i=e?.deviceOS)===null||i===void 0?void 0:i.version)||"unknown"),deviceManufacturer:e?.deviceManufacturer,systemPushEnabled:e?.systemPushEnabled},_.label=1;case 1:return _.trys.push([1,4,,5]),s=W.of(this._iid),l=s.sessionManager,c=s.sdkState,d=s.requestQueue,l.hasDeviceToken(Si.APNS,n)?[2,Va.SUCCESS]:(p=new Pq({userId:c.userId,token:n,deviceOS:a.deviceOS,deviceManufacturer:a.deviceManufacturer,systemPushEnabled:a.systemPushEnabled}),[4,d.send(p)]);case 2:return _.sent(),[4,gr((function(){return S(g,void 0,void 0,(function(){return T(this,(function(y){switch(y.label){case 0:return l.setDeviceToken(Si.APNS,n,a),[4,l.saveDeviceToken()];case 1:return y.sent(),[2]}}))}))}))];case 3:return _.sent(),this._apnsPushToken="",[2,Va.SUCCESS];case 4:return _.sent(),[2,Va.ERROR];case 5:return[3,7];case 6:return this._apnsPushToken=n,[2,Va.PENDING];case 7:return[2]}}))}))},t.prototype.unregisterAPNSPushTokenForCurrentUser=function(n){return S(this,void 0,void 0,(function(){var e,r,i,a,s,l,c,d=this;return T(this,(function(p){switch(p.label){case 0:if(Te(Q("string",n)).throw(X.invalidParameters),!this.currentUser)return[3,6];p.label=1;case 1:return p.trys.push([1,4,,5]),e=W.of(this._iid),r=e.sessionManager,i=e.sdkState,a=e.requestQueue,s=new Lq({userId:i.userId,token:n}),[4,a.send(s)];case 2:return l=p.sent(),c=l.as(Fq).lastDeletedAt,[4,gr((function(){return S(d,void 0,void 0,(function(){return T(this,(function(g){switch(g.label){case 0:return r.unsetDeviceToken(Si.APNS,n),r.setDeviceTokenDeletedAt(c),[4,r.saveDeviceToken()];case 1:return g.sent(),[2]}}))}))}))];case 3:return p.sent(),this._apnsPushToken="",[2,Va.SUCCESS];case 4:return p.sent(),[2,Va.ERROR];case 5:return[3,7];case 6:return this._apnsPushToken=n,[2,Va.PENDING];case 7:return[2]}}))}))},t.prototype.unregisterAPNSPushTokenAllForCurrentUser=function(){return S(this,void 0,void 0,(function(){var n,e,r,i,a,s,l,c=this;return T(this,(function(d){switch(d.label){case 0:return this.currentUser?(n=W.of(this._iid),e=n.sessionManager,r=n.sdkState,i=n.requestQueue,a=new Gq({userId:r.userId}),[4,i.send(a)]):[3,3];case 1:return s=d.sent(),l=s.as(Vq).lastDeletedAt,[4,gr((function(){return S(c,void 0,void 0,(function(){return T(this,(function(p){switch(p.label){case 0:return e.unsetDeviceTokens(Si.APNS),e.setDeviceTokenDeletedAt(l),[4,e.saveDeviceToken()];case 1:return p.sent(),[2]}}))}))}))];case 2:d.sent(),d.label=3;case 3:return[2]}}))}))},t.prototype.markPushNotificationAsDelivered=function(n,e){var r;return e===void 0&&(e=!0),S(this,void 0,void 0,(function(){var i,a,s,l,c,d,p,g,_,y,C,w,A,M,I,D,P,H,L;return T(this,(function(G){switch(G.label){case 0:if(i=W.of(this._iid),a=i.logger,s=i.sessionManager,l=i.requestQueue,c=i.pushNotificationAckManager,a.debug("markPushNotificationAsDelivered:",n),d=T1.DELIVERED,p=c.parseData(n),g=p.pushTrackingId,_=p.sessionTopics,y=p.sessionKey,C=p.messageId,w=p.channelKey,A=p.templateKey,M=p.notificationEventDeadline,!y||!_.includes(f1.PUSH_ACKNOWLEDGEMENT))throw a.info("Can't use markPushNotificationAsDelivered() feature."),X.malformedDataError;if(c.isAcked(g,d))return a.info("already delivered push notification:",g),[2];I=!!w,D=e&&I,P=(r=s.deviceTokens[0])===null||r===void 0?void 0:r.token,H=new YM({deviceToken:P??"",pushTrackingId:g,eventType:d,messageId:C,channelKey:w,templateKey:A,notificationEventDeadline:M,allowedPushNotification:D}),y&&(H.headers["Session-Key"]=y),G.label=1;case 1:return G.trys.push([1,3,,4]),[4,l.send(H)];case 2:return G.sent(),c.markAsAcked(g,d),[3,4];case 3:throw L=G.sent(),a.debug("failed to mark push notification as delivered. push tracking id: ".concat(g,". error: ").concat(L)),L;case 4:return[2]}}))}))},t.prototype.markPushNotificationAsClicked=function(n){var e;return S(this,void 0,void 0,(function(){var r,i,a,s,l,c,d,p,g,_,y,C,w,A,M,I,D;return T(this,(function(P){switch(P.label){case 0:if(r=W.of(this._iid),i=r.logger,a=r.sessionManager,s=r.requestQueue,l=r.pushNotificationAckManager,i.debug("markPushNotificationAsClicked:",n),c=T1.CLICKED,d=l.parseData(n),p=d.pushTrackingId,g=d.sessionTopics,_=d.sessionKey,y=d.messageId,C=d.channelKey,w=d.templateKey,A=d.notificationEventDeadline,!_||!g.includes(f1.PUSH_ACKNOWLEDGEMENT))throw i.info("Can't use markPushNotificationAsClicked() feature."),X.malformedDataError;if(l.isAcked(p,c))return i.info("already clicked push notification:",p),[2];M=(e=a.deviceTokens[0])===null||e===void 0?void 0:e.token,I=new YM({deviceToken:M??"",pushTrackingId:p,eventType:c,messageId:y,channelKey:C,templateKey:w,notificationEventDeadline:A}),_&&(I.headers["Session-Key"]=_),P.label=1;case 1:return P.trys.push([1,3,,4]),[4,s.send(I)];case 2:return P.sent(),l.markAsAcked(p,c),[3,4];case 3:throw D=P.sent(),i.debug("failed to mark push notification as clicked. push tracking id: ".concat(p,". error: ").concat(D)),D;case 4:return[2]}}))}))},t.prototype.getChannelInvitationPreference=function(){return S(this,void 0,void 0,(function(){var n,e,r,i,a;return T(this,(function(s){switch(s.label){case 0:return n=W.of(this._iid),e=n.sdkState,r=n.requestQueue,i=new Kq({userId:e.userId}),[4,r.send(i)];case 1:return a=s.sent(),[2,{autoAccept:a.as(Yq).autoAccept}]}}))}))},t.prototype.setChannelInvitationPreference=function(n){return S(this,void 0,void 0,(function(){var e,r,i,a,s;return T(this,(function(l){switch(l.label){case 0:return Te(Q("boolean",n)).throw(X.invalidParameters),e=W.of(this._iid),r=e.sdkState,i=e.requestQueue,a=new Qq({userId:r.userId,willAutoAccept:n}),[4,i.send(a)];case 1:return s=l.sent(),[2,{autoAccept:s.as($q).autoAccept}]}}))}))},t.prototype.getDoNotDisturb=function(){return S(this,void 0,void 0,(function(){var n,e,r,i,a;return T(this,(function(s){switch(s.label){case 0:return n=W.of(this._iid),e=n.sdkState,r=n.requestQueue,i=new Xq({userId:e.userId}),[4,r.send(i)];case 1:return a=s.sent(),[2,a.as(Zq).preference]}}))}))},t.prototype.setDoNotDisturb=function(n,e,r,i,a,s){return e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=0),a===void 0&&(a=0),s===void 0&&(s=""),S(this,void 0,void 0,(function(){var l,c,d,p,g;return T(this,(function(_){switch(_.label){case 0:return Te(Q("boolean",n)&&Q("number",e)&&Q("number",r)&&Q("number",i)&&Q("number",a)&&Q("string",s)).throw(X.invalidParameters),l=W.of(this._iid),c=l.sdkState,d=l.requestQueue,p=new Jq({userId:c.userId,doNotDisturbOn:n,startHour:e,startMin:r,endHour:i,endMin:a,timezone:s}),[4,d.send(p)];case 1:return g=_.sent(),[2,g.as(eW).preference]}}))}))},t.prototype.getSnoozePeriod=function(){return S(this,void 0,void 0,(function(){var n,e,r,i,a;return T(this,(function(s){switch(s.label){case 0:return n=W.of(this._iid),e=n.sdkState,r=n.requestQueue,i=new tW({userId:e.userId}),[4,r.send(i)];case 1:return a=s.sent(),[2,a.as(nW).snoozePeriod]}}))}))},t.prototype.setSnoozePeriod=function(n,e,r){return e===void 0&&(e=0),r===void 0&&(r=0),S(this,void 0,void 0,(function(){var i,a,s,l,c;return T(this,(function(d){switch(d.label){case 0:return Te(Q("boolean",n)&&Q("number",e)&&Q("number",r)).throw(X.invalidParameters),i=W.of(this._iid),a=i.sdkState,s=i.requestQueue,l=new rW({userId:a.userId,snoozeOn:n,startTs:e,endTs:r}),[4,s.send(l)];case 1:return c=d.sent(),[2,c.as(iW).snoozePeriod]}}))}))},t.prototype.getMyPushTokensByToken=function(n,e){return S(this,void 0,void 0,(function(){var r,i,a,s,l,c,d,p,g,_,y,C;return T(this,(function(w){switch(w.label){case 0:return Te(Q("string",n)&&Nt(Si,e)).throw(X.invalidParameters),r=W.of(this._iid),i=r.sdkState,a=r.requestQueue,s=r.sessionManager,l=new qq({userId:i.userId,type:e,token:n}),[4,a.send(l)];case 1:c=w.sent(),d=c.as(Wq).pushTokens;try{for(p=Re(d.deviceTokens),g=p.next();!g.done;g=p.next())_=g.value,s.setDeviceToken(d.type,_)}catch(A){y={error:A}}finally{try{g&&!g.done&&(C=p.return)&&C.call(p)}finally{if(y)throw y.error}}return[4,s.saveDeviceToken()];case 2:return w.sent(),[2,d]}}))}))},t.prototype.getPushTriggerOption=function(){return S(this,void 0,void 0,(function(){var n,e,r,i;return T(this,(function(a){switch(a.label){case 0:return n=W.of(this._iid),e=n.sdkState,r=n.requestQueue,i=new oW({userId:e.userId}),[4,r.send(i)];case 1:return[2,a.sent().as(lW).pushTriggerOption]}}))}))},t.prototype.setPushTriggerOption=function(n){return S(this,void 0,void 0,(function(){var e,r,i,a;return T(this,(function(s){switch(s.label){case 0:return Te(Nt(tp,n)).throw(X.invalidParameters),e=W.of(this._iid),r=e.sdkState,i=e.requestQueue,a=new uW({userId:r.userId,pushTriggerOption:n}),[4,i.send(a)];case 1:return[2,s.sent().as(cW).pushTriggerOption]}}))}))},t.prototype.getPushTemplate=function(){return S(this,void 0,void 0,(function(){var n,e,r,i;return T(this,(function(a){switch(a.label){case 0:return n=W.of(this._iid),e=n.sdkState,r=n.requestQueue,i=new dW({userId:e.userId}),[4,r.send(i)];case 1:return[2,a.sent().as(hW).name]}}))}))},t.prototype.setPushTemplate=function(n){return S(this,void 0,void 0,(function(){var e,r,i,a;return T(this,(function(s){switch(s.label){case 0:return Te(Nt(rN,n)).throw(X.invalidParameters),e=W.of(this._iid),r=e.sdkState,i=e.requestQueue,a=new fW({userId:r.userId,templateName:n}),[4,i.send(a)];case 1:return[2,s.sent().as(pW).name]}}))}))},t.prototype.blockUser=function(n){return S(this,void 0,void 0,(function(){var e,r,i,a;return T(this,(function(s){switch(s.label){case 0:return Te(n instanceof St||Q("string",n)).throw(X.invalidParameters),e=W.of(this._iid),r=e.sdkState,i=e.requestQueue,a=new aW({userId:r.userId,blockedUserId:n instanceof St?n.userId:n}),[4,i.send(a)];case 1:return s.sent(),[2]}}))}))},t.prototype.blockUserWithUserId=function(n){return S(this,void 0,void 0,(function(){return T(this,(function(e){return[2,this.blockUser(n)]}))}))},t.prototype.unblockUser=function(n){return S(this,void 0,void 0,(function(){var e,r,i,a;return T(this,(function(s){switch(s.label){case 0:return Te(n instanceof St||Q("string",n)).throw(X.invalidParameters),e=W.of(this._iid),r=e.sdkState,i=e.requestQueue,a=new sW({userId:r.userId,unblockedUserId:n instanceof St?n.userId:n}),[4,i.send(a)];case 1:return s.sent(),[2]}}))}))},t.prototype.unblockUserWithUserId=function(n){return S(this,void 0,void 0,(function(){return T(this,(function(e){return[2,this.unblockUser(n)]}))}))},t.prototype.getFriendChangeLogsByToken=function(n){return S(this,void 0,void 0,(function(){var e,r,i,a,s;return T(this,(function(l){switch(l.label){case 0:return Te(Q("string",n)).throw(X.invalidParameters),e=W.of(this._iid),r=e.sdkState,i=e.requestQueue,a=new mW({userId:r.userId,token:n}),[4,i.send(a)];case 1:return s=l.sent(),[2,s.as(gW).changelogs]}}))}))},t.prototype.getAllowFriendDiscovery=function(){return S(this,void 0,void 0,(function(){var n,e,r,i,a;return T(this,(function(s){switch(s.label){case 0:return n=W.of(this._iid),e=n.sdkState,r=n.requestQueue,i=new wW({userId:e.userId}),[4,r.send(i)];case 1:return a=s.sent(),[2,a.as(NW).allowFriendDiscovery]}}))}))},t.prototype.setAllowFriendDiscovery=function(n){return S(this,void 0,void 0,(function(){var e,r,i,a;return T(this,(function(s){switch(s.label){case 0:return Te(Q("boolean",n)).throw(X.invalidParameters),e=W.of(this._iid),r=e.sdkState,i=e.requestQueue,a=new TW({userId:r.userId,allowFriendDiscovery:n}),[4,i.send(a)];case 1:return s.sent(),[2,n]}}))}))},t.prototype.uploadFriendDiscoveries=function(n){return S(this,void 0,void 0,(function(){var e,r,i,a,s;return T(this,(function(l){switch(l.label){case 0:return e=W.of(this._iid),r=e.sdkState,i=e.requestQueue,a=new vW({userId:r.userId,discoveries:n}),[4,i.send(a)];case 1:return s=l.sent(),[2,s.as(_W).friendDiscoveryRequestId]}}))}))},t.prototype.deleteFriendDiscovery=function(n){return S(this,void 0,void 0,(function(){return T(this,(function(e){return[2,this.deleteFriendDiscoveries([n])]}))}))},t.prototype.deleteFriendDiscoveries=function(n){return S(this,void 0,void 0,(function(){var e,r,i,a;return T(this,(function(s){switch(s.label){case 0:return Te(Tt("string",n)).throw(X.invalidParameters),e=W.of(this._iid),r=e.sdkState,i=e.requestQueue,a=new yW({userId:r.userId,discoveryKeys:n}),[4,i.send(a)];case 1:return s.sent(),[2]}}))}))},t.prototype.addFriends=function(n){return S(this,void 0,void 0,(function(){var e,r,i,a,s;return T(this,(function(l){switch(l.label){case 0:return Te(Tt("string",n)).throw(X.invalidParameters),e=W.of(this._iid),r=e.sdkState,i=e.requestQueue,a=new bW({userId:r.userId,userIds:n}),[4,i.send(a)];case 1:return s=l.sent(),[2,s.as(EW).users]}}))}))},t.prototype.deleteFriend=function(n){return S(this,void 0,void 0,(function(){return T(this,(function(e){return[2,this.deleteFriends([n])]}))}))},t.prototype.deleteFriends=function(n){return S(this,void 0,void 0,(function(){var e,r,i,a;return T(this,(function(s){switch(s.label){case 0:return Te(Tt("string",n)).throw(X.invalidParameters),e=W.of(this._iid),r=e.sdkState,i=e.requestQueue,a=new CW({userId:r.userId,userIds:n}),[4,i.send(a)];case 1:return s.sent(),[2]}}))}))},t.prototype.getAllEmoji=function(){return S(this,void 0,void 0,(function(){var n,e,r;return T(this,(function(i){switch(i.label){case 0:return n=W.of(this._iid).requestQueue,e=new SW,[4,n.send(e)];case 1:return r=i.sent(),[2,r.as(AW).emojiContainer]}}))}))},t.prototype.getEmojiCategory=function(n){return S(this,void 0,void 0,(function(){var e,r,i;return T(this,(function(a){switch(a.label){case 0:return e=W.of(this._iid).requestQueue,r=new IW({categoryId:n}),[4,e.send(r)];case 1:return i=a.sent(),[2,i.as(MW).emojiCategory]}}))}))},t.prototype.getEmoji=function(n){return S(this,void 0,void 0,(function(){var e,r,i;return T(this,(function(a){switch(a.label){case 0:return e=W.of(this._iid).requestQueue,r=new OW({key:n}),[4,e.send(r)];case 1:return i=a.sent(),[2,i.as(kW).emoji]}}))}))},t.prototype.getUIKitConfiguration=function(){return S(this,void 0,void 0,(function(){var n,e,r,i;return T(this,(function(a){switch(a.label){case 0:return n=W.of(this._iid),Te(n.hasExtension("sb_uikit")).throw(X.notSupportedError),e=n.requestQueue,r=new RW,[4,e.send(r)];case 1:return i=a.sent(),[2,i.as(DW).uikitConfiguration]}}))}))},t.prototype.getReportCategoryInfoList=function(){return S(this,void 0,void 0,(function(){return T(this,(function(n){switch(n.label){case 0:return[4,W.of(this._iid).reportCategoryManager.categories()];case 1:return[2,n.sent()]}}))}))},t})();const kx=()=>({common:{enableUsingDefaultUserProfile:!1},groupChannel:{channel:{enableMention:!1,enableOgtag:!0,enableReactions:!0,enableReactionsSupergroup:!1,enableTypingIndicator:!0,enableVoiceMessage:!1,input:{camera:{enablePhoto:!0,enableVideo:!0},enableDocument:!0,gallery:{enablePhoto:!0,enableVideo:!0}},replyType:"quote_reply",threadReplySelectType:"thread",typingIndicatorTypes:new Set(["text"]),enableFeedback:!1,enableSuggestedReplies:!1,showSuggestedRepliesFor:"last_message_only",suggestedRepliesDirection:"vertical",enableMarkdownForUserMessage:!1,enableFormTypeMessage:!1,enableMarkAsUnread:!1},channelList:{enableMessageReceiptStatus:!1,enableTypingIndicator:!1},setting:{enableMessageSearch:!1}},openChannel:{channel:{enableOgtag:!0,input:{camera:{enablePhoto:!0,enableVideo:!0},enableDocument:!0,gallery:{enablePhoto:!0,enableVideo:!0}}}}});function PW(t){return delete t.groupChannel.channel.typingIndicatorTypes,delete t.groupChannel.channel.enableFeedback,delete t.groupChannel.channel.enableSuggestedReplies,delete t.groupChannel.channel.showSuggestedRepliesFor,delete t.groupChannel.channel.suggestedRepliesDirection,delete t.groupChannel.channel.enableMarkdownForUserMessage,delete t.groupChannel.channel.enableFormTypeMessage,t}const UW=()=>{const t=kx();return PW(t)},QM=kx();UW();k.createContext({initDashboardConfigs:()=>Promise.resolve(),configs:QM,configsWithAppAttr:()=>QM});var LW=1024*1024,S1=10,yS=100,lw=250,FW=1e3,HW="sendbird-global-audio-player-id",jW="Voice_message.mp3",Rx="audio/mp3;sbu_type=voice",GW="KEY_VOICE_MESSAGE_DURATION",VW="KEY_INTERNAL_MESSAGE_TYPE",BW="voice/mp3",wE="32px",zW=10,qW=25*1024*1024,WW=function(t){return/iPhone|iPad|iPod/i.test(t)},KW=function(t){return/WebKit/i.test(t)},YW=function(t){return/Chrome/i.test(t)},Dx=function(t){return!YW(t)&&/Safari/i.test(t)},$M=function(t){return WW(t)&&(KW(t)||Dx(t))},kc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},xx={exports:{}},uw={},XM;function QW(){if(XM)return uw;XM=1;var t=O;function n(g,_){return g===_&&(g!==0||1/g===1/_)||g!==g&&_!==_}var e=typeof Object.is=="function"?Object.is:n,r=t.useState,i=t.useEffect,a=t.useLayoutEffect,s=t.useDebugValue;function l(g,_){var y=_(),C=r({inst:{value:y,getSnapshot:_}}),w=C[0].inst,A=C[1];return a(function(){w.value=y,w.getSnapshot=_,c(w)&&A({inst:w})},[g,y,_]),i(function(){return c(w)&&A({inst:w}),g(function(){c(w)&&A({inst:w})})},[g]),s(y),y}function c(g){var _=g.getSnapshot;g=g.value;try{var y=_();return!e(g,y)}catch{return!0}}function d(g,_){return _()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:l;return uw.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:p,uw}xx.exports=QW();var Px=xx.exports,$W=typeof kc=="object"&&kc&&kc.Object===Object&&kc,Ux=$W,XW=Ux,ZW=typeof self=="object"&&self&&self.Object===Object&&self,JW=XW||ZW||Function("return this")(),Xc=JW,eK=Xc,tK=eK.Symbol,bS=tK,ZM=bS,Lx=Object.prototype,nK=Lx.hasOwnProperty,rK=Lx.toString,O_=ZM?ZM.toStringTag:void 0;function iK(t){var n=nK.call(t,O_),e=t[O_];try{t[O_]=void 0;var r=!0}catch{}var i=rK.call(t);return r&&(n?t[O_]=e:delete t[O_]),i}var aK=iK,sK=Object.prototype,oK=sK.toString;function lK(t){return oK.call(t)}var uK=lK,JM=bS,cK=aK,dK=uK,hK="[object Null]",fK="[object Undefined]",eO=JM?JM.toStringTag:void 0;function pK(t){return t==null?t===void 0?fK:hK:eO&&eO in Object(t)?cK(t):dK(t)}var ES=pK;function mK(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}var Fx=mK,gK=ES,vK=Fx,_K="[object AsyncFunction]",yK="[object Function]",bK="[object GeneratorFunction]",EK="[object Proxy]";function CK(t){if(!vK(t))return!1;var n=gK(t);return n==yK||n==bK||n==_K||n==EK}var wK=CK,NK=Xc,TK=NK["__core-js_shared__"],SK=TK,cw=SK,tO=(function(){var t=/[^.]+$/.exec(cw&&cw.keys&&cw.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""})();function AK(t){return!!tO&&tO in t}var IK=AK,MK=Function.prototype,OK=MK.toString;function kK(t){if(t!=null){try{return OK.call(t)}catch{}try{return t+""}catch{}}return""}var Hx=kK,RK=wK,DK=IK,xK=Fx,PK=Hx,UK=/[\\^$.*+?()[\]{}|]/g,LK=/^\[object .+?Constructor\]$/,FK=Function.prototype,HK=Object.prototype,jK=FK.toString,GK=HK.hasOwnProperty,VK=RegExp("^"+jK.call(GK).replace(UK,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function BK(t){if(!xK(t)||DK(t))return!1;var n=RK(t)?VK:LK;return n.test(PK(t))}var zK=BK;function qK(t,n){return t?.[n]}var WK=qK,KK=zK,YK=WK;function QK(t,n){var e=YK(t,n);return KK(e)?e:void 0}var Rg=QK,$K=Rg,XK=Xc,ZK=$K(XK,"Map"),JK=ZK,eY=Rg;eY(Object,"create");var tY=Xc;tY.Uint8Array;var nO=bS,rO=nO?nO.prototype:void 0;rO&&rO.valueOf;function nY(t){return t!=null&&typeof t=="object"}var rY=nY,iY=ES,aY=rY,sY="[object Arguments]";function oY(t){return aY(t)&&iY(t)==sY}var lY=oY,uY=lY;uY((function(){return arguments})());var A1={exports:{}};function cY(){return!1}var dY=cY;A1.exports;(function(t,n){var e=Xc,r=dY,i=n&&!n.nodeType&&n,a=i&&!0&&t&&!t.nodeType&&t,s=a&&a.exports===i,l=s?e.Buffer:void 0,c=l?l.isBuffer:void 0,d=c||r;t.exports=d})(A1,A1.exports);A1.exports;var I1={exports:{}};I1.exports;(function(t,n){var e=Ux,r=n&&!n.nodeType&&n,i=r&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===r,s=a&&e.process,l=(function(){try{var c=i&&i.require&&i.require("util").types;return c||s&&s.binding&&s.binding("util")}catch{}})();t.exports=l})(I1,I1.exports);var hY=I1.exports,iO=hY;iO&&iO.isTypedArray;var fY=Rg,pY=Xc,mY=fY(pY,"DataView"),gY=mY,vY=Rg,_Y=Xc,yY=vY(_Y,"Promise"),bY=yY,EY=Rg,CY=Xc,wY=EY(CY,"Set"),NY=wY,TY=Rg,SY=Xc,AY=TY(SY,"WeakMap"),IY=AY,kN=gY,RN=JK,DN=bY,xN=NY,PN=IY,jx=ES,Dg=Hx,aO="[object Map]",MY="[object Object]",sO="[object Promise]",oO="[object Set]",lO="[object WeakMap]",uO="[object DataView]",OY=Dg(kN),kY=Dg(RN),RY=Dg(DN),DY=Dg(xN),xY=Dg(PN),Jm=jx;(kN&&Jm(new kN(new ArrayBuffer(1)))!=uO||RN&&Jm(new RN)!=aO||DN&&Jm(DN.resolve())!=sO||xN&&Jm(new xN)!=oO||PN&&Jm(new PN)!=lO)&&(Jm=function(t){var n=jx(t),e=n==MY?t.constructor:void 0,r=e?Dg(e):"";if(r)switch(r){case OY:return uO;case kY:return aO;case RY:return sO;case DY:return oO;case xY:return lO}return n});var PY={onUserProfileMessage:void 0,disableUserProfile:!1,isReactionEnabled:!0,isMentionEnabled:!1,isVoiceMessageEnabled:!0,replyType:"NONE",showSearchIcon:!0,isTypingIndicatorEnabledOnChannelList:!1,isMessageReceiptStatusEnabledOnChannelList:!1,setCurrenttheme:function(){}};ke(ke({},PY),{appId:"",userId:"",accessToken:void 0,theme:"light",isOnline:!1,allowProfileEdit:!0,forceLeftToRightMessageLayout:!1,disableMarkAsDelivered:!1,isMultipleFilesMessageEnabled:!1,htmlTextDirection:"ltr",uikitUploadSizeLimit:qW,uikitMultipleFilesMessageLimit:zW,imageCompression:void 0,voiceRecord:void 0,userMention:void 0,renderUserProfile:void 0,onStartDirectMessage:void 0,setCurrentTheme:void 0,userListQuery:void 0,pubSub:void 0,logger:void 0,markAsReadScheduler:void 0,markAsDeliveredScheduler:void 0,common:{enableUsingDefaultUserProfile:!1},groupChannel:{enableOgtag:!0,enableTypingIndicator:!0,enableReactions:!0,enableMention:!1,replyType:"none",threadReplySelectType:"thread",enableVoiceMessage:!0,typingIndicatorTypes:void 0,enableDocument:!1,enableFeedback:!1,enableSuggestedReplies:!1,showSuggestedRepliesFor:"all_messages",suggestedRepliesDirection:"vertical",enableMarkdownForUserMessage:!1,enableFormTypeMessage:!1,enableMarkAsUnread:!1,enableReactionsSupergroup:void 0},groupChannelList:{enableTypingIndicator:!1,enableMessageReceiptStatus:!1},groupChannelSettings:{enableMessageSearch:!1},openChannel:{enableOgtag:!0,enableDocument:!1}});var UY=O.createContext(null),LY=(function(t){function n(){var e=t!==null&&t.apply(this,arguments)||this;return e._channels=new Map,e._enteredChannelUrls=[],e}return U(n,t),Object.defineProperty(n.prototype,"enteredChannels",{get:function(){var e=this;return this._enteredChannelUrls.map((function(r){return e._channels.get(r)})).filter((function(r){return!!r}))},enumerable:!1,configurable:!0}),n.prototype.isEnteredChannel=function(e){return this._enteredChannelUrls.includes(e)},n.prototype.enter=function(e){this._enteredChannelUrls.indexOf(e)<0&&this._enteredChannelUrls.push(e)},n.prototype.exit=function(e){var r=this._enteredChannelUrls.indexOf(e);r>=0&&this._enteredChannelUrls.splice(r,1)},n.prototype.exitAll=function(){this._enteredChannelUrls=[]},n.prototype.get=function(e){return S(this,void 0,void 0,(function(){return T(this,(function(r){return[2,this._channels.get(e)]}))}))},n.prototype.upsert=function(e){return S(this,void 0,void 0,(function(){var r,i=this;return T(this,(function(a){return r=[],e.forEach((function(s){if(i._channels.has(s.url)){var l=i._channels.get(s.url);Object.assign(l,s),r.push(l)}else i._channels.set(s.url,s),r.push(s)})),[2,r]}))}))},n.prototype.remove=function(e){return S(this,void 0,void 0,(function(){return T(this,(function(r){return this._channels.delete(e),this.exit(e),[2]}))}))},n.prototype.clear=function(){return S(this,void 0,void 0,(function(){return T(this,(function(e){return this._channels.clear(),this._enteredChannelUrls=[],[2]}))}))},n})(ei),Gx={channelUrl:void 0,name:void 0,coverUrlOrImage:void 0,data:void 0,customType:void 0,operatorUserIds:void 0,isEphemeral:void 0},FY=(function(t){function n(e){var r=e.channelUrl,i=e.isInternalCall,a=t.call(this)||this;return a.method=ye.GET,a.path="".concat(i?z9:Ip,"/").concat(encodeURIComponent(r)),a.params={show_pinned_messages:!0},a}return U(n,t),n})(Ee),cO=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.channel=new wg(e,r),i}return U(n,t),n})(Se),HY=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.coverUrlOrImage,s=e.name,l=e.data,c=e.customType,d=e.operatorUserIds,p=e.isEphemeral;return(r=t.call(this)||this).method=ye.POST,r.path=Ip,r.params=Le(Qe({channel_url:i,cover_url:Q("string",a)?a:null,cover_file:Ai(a)?a:null,name:s,data:l,custom_type:c,operators:d,is_ephemeral:p})),r}return U(n,t),n})(Ee);(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.channel=new wg(e,r),i}U(n,t)})(Se);var jY=(function(t){function n(e){var r=e.channelUrl;return t.call(this,{code:"ENTR",payload:{channel_url:r},ackRequired:!0})||this}return U(n,t),n})(na),Vx=(function(t){function n(e,r,i){var a,s,l=this;return l=t.call(this,e,"SYEV",i)||this,i.data&&(l.participantCount=(a=i.data.participant_count)!==null&&a!==void 0?a:0,l.user=new St(e,i.data),l.ts=(s=i.data.edge_ts)!==null&&s!==void 0?s:0),l}return U(n,t),n})($c),GY=(function(t){function n(e){var r=e.channelUrl;return t.call(this,{code:"EXIT",payload:{channel_url:r},ackRequired:!0})||this}return U(n,t),n})(na),Bx=(function(t){function n(e,r,i){var a,s,l=this;return l=t.call(this,e,"EXIT",i)||this,i.data&&(l.participantCount=(a=i.data.participant_count)!==null&&a!==void 0?a:0,l.user=new St(e,i.data),l.ts=(s=i.data.edge_ts)!==null&&s!==void 0?s:0),l}return U(n,t),n})($c),dw={},Gl=(function(t){function n(e,r){var i=t.call(this,e,z(z({},r),{channelType:Rt.OPEN}))||this;return i.subscribeChannelEvent=it,i.unsubscribeChannelEvent=it,i.refreshChannel=function(){return S(i,void 0,void 0,(function(){return T(this,(function(a){return[2,it()]}))}))},i._openChannelCache=new LY(e),i._openChannelHandlers=new Map,i._dispatcher.on((function(a){var s,l;if(a instanceof Xn)i._handleEvent(a).catch((function(g){if(Ca(g)&&i._sdkState.appState==="foreground")throw g}));else if(a instanceof Bs&&a.stateType===en.CONNECTED){var c=i._openChannelCache.enteredChannels;try{for(var d=Re(c),p=d.next();!p.done;p=d.next())p.value.enter()}catch(g){s={error:g}}finally{try{p&&!p.done&&(l=d.return)&&l.call(d)}finally{if(s)throw s.error}}}})),dw[e]||(dw[e]=i),i}return U(n,t),n.of=function(e){return dw[e]},n.prototype.buildOpenChannelFromSerializedData=function(e){var r=Uc(e);return new wg(this._iid,wg.payloadify(r))},n.prototype.getChannelFromCache=function(e){var r;return S(this,void 0,void 0,(function(){return T(this,(function(i){switch(i.label){case 0:return[4,this._openChannelCache.get(e)];case 1:return[2,(r=i.sent())!==null&&r!==void 0?r:null]}}))}))},n.prototype.upsertChannelsToCache=function(e){return S(this,void 0,void 0,(function(){return T(this,(function(r){switch(r.label){case 0:return[4,this._openChannelCache.upsert(e)];case 1:return[2,r.sent()]}}))}))},n.prototype.removeChannelsFromCache=function(e){return S(this,void 0,void 0,(function(){var r,i,a,s,l,c;return T(this,(function(d){switch(d.label){case 0:d.trys.push([0,5,6,7]),r=Re(e),i=r.next(),d.label=1;case 1:return i.done?[3,4]:(a=i.value,[4,this._openChannelCache.remove(a)]);case 2:d.sent(),d.label=3;case 3:return i=r.next(),[3,1];case 4:return[3,7];case 5:return s=d.sent(),l={error:s},[3,7];case 6:try{i&&!i.done&&(c=r.return)&&c.call(r)}finally{if(l)throw l.error}return[7];case 7:return[2]}}))}))},n.prototype.setEnteredToCache=function(e){this._openChannelCache.enter(e.url)},n.prototype.setExitedToCache=function(e){this._openChannelCache.exit(e.url)},Object.defineProperty(n.prototype,"handlers",{get:function(){return Je([],Ye(this._openChannelHandlers.values()),!1)},enumerable:!1,configurable:!0}),n.prototype._handleEvent=function(e){return S(this,void 0,void 0,(function(){var r,i,a,s,l,c,d,p,g,_,y,C,w,A,M,I,D,P,H,L,G,Y,F,ne,J,re,Oe,Z,ue,q,le,pe,Pe,qe,$,fe,Ie,We,Ne,He,tt,At,bt,vr,wn,Rn,xn,Zt,Pn,Zn,fn,_r,jn,Un,gt,Dn,Cr,gn,rr,Lt,Wn,cr,dn,ti,_i,Sr,Dr,Kn,Yn,Jt,Lr,aa,Mt,Dt=this;return T(this,(function(vt){switch(vt.label){case 0:switch(vt.trys.push([0,62,,63]),e.code){case"MESG":case"FILE":case"ADMM":case"BRDM":return[3,1];case"MEDI":case"FEDI":case"AEDI":return[3,4];case"DELM":return[3,7];case"MRCT":return[3,10];case"MTHD":return[3,13];case"MCNT":return[3,16];case"PEDI":return[3,27];case"VOTE":return[3,30];case"SYEV":return[3,33]}return[3,61];case 1:return s=null,e.code==="MESG"?s=e.as(fS):e.code==="FILE"?s=e.as(lS):e.code!=="ADMM"&&e.code!="BRDM"||(s=e.as(gx)),s?(r=s.message,i=s.isMentioned,r.channelType!==Rt.OPEN?[3,3]:[4,this.getChannel(r.channelUrl,!0)]):[3,3];case 2:a=vt.sent(),$e((function(){return S(Dt,void 0,void 0,(function(){var Ze,Ae,Et,_t,yt;return T(this,(function(Gn){try{for(Ze=Re(this._openChannelHandlers.values()),Ae=Ze.next();!Ae.done;Ae=Ze.next())Et=Ae.value,this._openChannelCache.isEnteredChannel(a.url)&&(Et.onMessageReceived&&Et.onMessageReceived(a,r),i&&Et.onMentionReceived&&Et.onMentionReceived(a,r))}catch(xt){_t={error:xt}}finally{try{Ae&&!Ae.done&&(yt=Ze.return)&&yt.call(Ze)}finally{if(_t)throw _t.error}}return[2]}))}))})),vt.label=3;case 3:return[3,61];case 4:return s=null,e.code==="MEDI"?s=e.as(_1):e.code==="FEDI"?s=e.as(y1):e.code==="AEDI"&&(s=e.as(vx)),s?(l=s.message,c=s.mentionCountChange,l.channelType!==Rt.OPEN?[3,6]:[4,this.getChannel(l.channelUrl,!0)]):[3,6];case 5:d=vt.sent(),p=!1,d.lastPinnedMessage&&d.lastPinnedMessage.messageId===l.messageId&&d.lastPinnedMessage.updatedAt<l.updatedAt&&(d.lastPinnedMessage=l,p=!0,W.of(this._iid).requestDeduplicator.updatePendingResponse(d,Date.now())),$e((function(){return S(Dt,void 0,void 0,(function(){var Ze,Ae,Et,_t,yt,Gn,xt;return T(this,(function(zi){try{for(Ze=Re(this._openChannelHandlers.values()),Ae=Ze.next();!Ae.done;Ae=Ze.next())Et=Ae.value,this._openChannelCache.isEnteredChannel(d.url)&&(p&&((Gn=Et.onPinnedMessageUpdated)===null||Gn===void 0||Gn.call(Et,d),(xt=Et.onChannelChanged)===null||xt===void 0||xt.call(Et,d)),Et.onMessageUpdated&&Et.onMessageUpdated(d,l),c>0&&Et.onMentionReceived&&Et.onMentionReceived(d,l))}catch(sa){_t={error:sa}}finally{try{Ae&&!Ae.done&&(yt=Ze.return)&&yt.call(Ze)}finally{if(_t)throw _t.error}}return[2]}))}))})),vt.label=6;case 6:return[3,61];case 7:return g=e.as(GR),pe=g.channelUrl,Pe=g.channelType,_=g.messageId,Pe!==Rt.OPEN?[3,9]:[4,this.getChannel(pe,!0)];case 8:y=vt.sent(),$e((function(){return S(Dt,void 0,void 0,(function(){var Ze,Ae,Et,_t,yt;return T(this,(function(Gn){try{for(Ze=Re(this._openChannelHandlers.values()),Ae=Ze.next();!Ae.done;Ae=Ze.next())Et=Ae.value,this._openChannelCache.isEnteredChannel(y.url)&&Et.onMessageDeleted&&Et.onMessageDeleted(y,_)}catch(xt){_t={error:xt}}finally{try{Ae&&!Ae.done&&(yt=Ze.return)&&yt.call(Ze)}finally{if(_t)throw _t.error}}return[2]}))}))})),vt.label=9;case 9:return[3,61];case 10:return C=e.as(_x),pe=C.channelUrl,Pe=C.channelType,w=C.event,Pe!==Rt.OPEN?[3,12]:[4,this.getChannel(pe,!0)];case 11:A=vt.sent(),$e((function(){return S(Dt,void 0,void 0,(function(){var Ze,Ae,Et,_t,yt;return T(this,(function(Gn){try{for(Ze=Re(this._openChannelHandlers.values()),Ae=Ze.next();!Ae.done;Ae=Ze.next())Et=Ae.value,this._openChannelCache.isEnteredChannel(A.url)&&Et.onReactionUpdated&&Et.onReactionUpdated(A,w)}catch(xt){_t={error:xt}}finally{try{Ae&&!Ae.done&&(yt=Ze.return)&&yt.call(Ze)}finally{if(_t)throw _t.error}}return[2]}))}))})),vt.label=12;case 12:return[3,61];case 13:return(M=e.as(yx).event).channelType!==Rt.OPEN?[3,15]:[4,this.getChannel(M.channelUrl,!0)];case 14:I=vt.sent(),$e((function(){return S(Dt,void 0,void 0,(function(){var Ze,Ae,Et,_t,yt;return T(this,(function(Gn){try{for(Ze=Re(this._openChannelHandlers.values()),Ae=Ze.next();!Ae.done;Ae=Ze.next())Et=Ae.value,this._openChannelCache.isEnteredChannel(I.url)&&Et.onThreadInfoUpdated&&Et.onThreadInfoUpdated(I,M)}catch(xt){_t={error:xt}}finally{try{Ae&&!Ae.done&&(yt=Ze.return)&&yt.call(Ze)}finally{if(_t)throw _t.error}}return[2]}))}))})),vt.label=15;case 15:return[3,61];case 16:D=e.as(bx).openChannelMemberCounts,P=[],vt.label=17;case 17:vt.trys.push([17,22,23,24]),H=Re(D),L=H.next(),vt.label=18;case 18:return L.done?[3,21]:(G=L.value,pe=G.channelUrl,At=G.participantCount,Y=G.updatedAt,[4,this.getChannelFromCache(pe)]);case 19:(F=vt.sent())&&F._updateParticipantCount(At,Y)&&P.push(F),vt.label=20;case 20:return L=H.next(),[3,18];case 21:return[3,24];case 22:return ne=vt.sent(),aa={error:ne},[3,24];case 23:try{L&&!L.done&&(Mt=H.return)&&Mt.call(H)}finally{if(aa)throw aa.error}return[7];case 24:return P.length>0?[4,this.upsertChannelsToCache(P)]:[3,26];case 25:J=vt.sent(),$e((function(){return S(Dt,void 0,void 0,(function(){var Ze,Ae,Et,_t,yt;return T(this,(function(Gn){try{for(Ze=Re(this._openChannelHandlers.values()),Ae=Ze.next();!Ae.done;Ae=Ze.next())(Et=Ae.value).onChannelMemberCountChanged&&Et.onChannelMemberCountChanged(J)}catch(xt){_t={error:xt}}finally{try{Ae&&!Ae.done&&(yt=Ze.return)&&yt.call(Ze)}finally{if(_t)throw _t.error}}return[2]}))}))})),vt.label=26;case 26:return[3,61];case 27:return re=e.as(Ex),Oe=re.event,Z=re.status,pe=re.channelUrl,Pe=re.channelType,pe&&Pe===Rt.OPEN?[4,this.getChannel(pe,!0)]:[3,29];case 28:ue=vt.sent(),this._dispatcher.dispatch(new sS({event:Oe,source:ge.EVENT_POLL_UPDATED})),$e(Z===TD?function(){return S(Dt,void 0,void 0,(function(){var Ze,Ae,Et,_t,yt;return T(this,(function(Gn){try{for(Ze=Re(this._openChannelHandlers.values()),Ae=Ze.next();!Ae.done;Ae=Ze.next())(Et=Ae.value).onPollDeleted&&Et.onPollDeleted(ue,Oe.pollId)}catch(xt){_t={error:xt}}finally{try{Ae&&!Ae.done&&(yt=Ze.return)&&yt.call(Ze)}finally{if(_t)throw _t.error}}return[2]}))}))}:function(){return S(Dt,void 0,void 0,(function(){var Ze,Ae,Et,_t,yt;return T(this,(function(Gn){try{for(Ze=Re(this._openChannelHandlers.values()),Ae=Ze.next();!Ae.done;Ae=Ze.next())(Et=Ae.value).onPollUpdated&&Et.onPollUpdated(ue,Oe)}catch(xt){_t={error:xt}}finally{try{Ae&&!Ae.done&&(yt=Ze.return)&&yt.call(Ze)}finally{if(_t)throw _t.error}}return[2]}))}))}),vt.label=29;case 29:return[3,61];case 30:return q=e.as(pS),le=q.event,pe=q.channelUrl,Pe=q.channelType,pe&&Pe===Rt.OPEN?[4,this.getChannel(pe,!0)]:[3,32];case 31:qe=vt.sent(),this._dispatcher.dispatch(new e2({event:le,source:ge.EVENT_POLL_VOTED})),$e((function(){return S(Dt,void 0,void 0,(function(){var Ze,Ae,Et,_t,yt;return T(this,(function(Gn){try{for(Ze=Re(this._openChannelHandlers.values()),Ae=Ze.next();!Ae.done;Ae=Ze.next())(Et=Ae.value).onPollVoted&&Et.onPollVoted(qe,le)}catch(xt){_t={error:xt}}finally{try{Ae&&!Ae.done&&(yt=Ze.return)&&yt.call(Ze)}finally{if(_t)throw _t.error}}return[2]}))}))})),vt.label=32;case 32:return[3,61];case 33:if(!($=e.as($c).event).isOpenChannelEvent)return[3,60];switch($.category){case _n.CHANNEL_ENTER:return[3,34];case _n.CHANNEL_EXIT:return[3,36];case _n.CHANNEL_OPERATOR_UPDATE:return[3,38];case _n.USER_CHANNEL_MUTE:case _n.USER_CHANNEL_UNMUTE:return[3,41];case _n.USER_CHANNEL_BAN:case _n.USER_CHANNEL_UNBAN:return[3,43];case _n.CHANNEL_FREEZE:case _n.CHANNEL_UNFREEZE:return[3,45];case _n.CHANNEL_DELETED:return[3,48];case _n.CHANNEL_PROP_CHANGED:return[3,50];case _n.CHANNEL_META_DATA_CHANGED:return[3,52];case _n.CHANNEL_META_COUNTERS_CHANGED:return[3,54];case _n.PINNED_MESSAGE_CHANGED:return[3,56]}return[3,60];case 34:return[4,this.getChannel($.channelUrl,!0)];case 35:return fe=vt.sent(),Ie=e.as(Vx),At=Ie.participantCount,We=Ie.user,Ne=fe._updateParticipantCount(At,$.ts),W.of(this._iid).requestDeduplicator.updatePendingResponse(fe,Date.now()),$e((function(){return S(Dt,void 0,void 0,(function(){return T(this,(function(Ze){return this._openChannelHandlers.forEach((function(Ae){Ae.onUserEntered&&Ae.onUserEntered(fe,We),Ne&&Ae.onChannelParticipantCountChanged&&Ae.onChannelParticipantCountChanged(fe)})),[2]}))}))})),[3,60];case 36:return[4,this.getChannel($.channelUrl,!0)];case 37:return He=vt.sent(),tt=e.as(Bx),At=tt.participantCount,bt=tt.user,vr=He._updateParticipantCount(At,$.ts),W.of(this._iid).requestDeduplicator.updatePendingResponse(He,Date.now()),$e((function(){return S(Dt,void 0,void 0,(function(){return T(this,(function(Ze){return this._openChannelHandlers.forEach((function(Ae){Ae.onUserExited&&Ae.onUserExited(He,bt),vr&&Ae.onChannelParticipantCountChanged&&Ae.onChannelParticipantCountChanged(He)})),[2]}))}))})),[3,60];case 38:return[4,this.getChannel($.channelUrl,!0)];case 39:return wn=vt.sent(),Rn=e.as(fx).operators,wn.operators=Rn,W.of(this._iid).requestDeduplicator.updatePendingResponse(wn,Date.now()),[4,this.upsertChannelsToCache([wn])];case 40:return vt.sent(),$e((function(){return S(Dt,void 0,void 0,(function(){return T(this,(function(Ze){return this._openChannelHandlers.forEach((function(Ae){Ae.onOperatorUpdated&&Ae.onOperatorUpdated(wn,Rn)})),[2]}))}))})),[3,60];case 41:return[4,this.getChannel($.channelUrl,!0)];case 42:return xn=vt.sent(),Zt=$.category===_n.USER_CHANNEL_MUTE,Pn=e.as(Zt?WD:KD).user,$e((function(){return S(Dt,void 0,void 0,(function(){return T(this,(function(Ze){return this._openChannelHandlers.forEach((function(Ae){Zt?Ae.onUserMuted&&Ae.onUserMuted(xn,Pn):Ae.onUserUnmuted&&Ae.onUserUnmuted(xn,Pn)})),[2]}))}))})),[3,60];case 43:return[4,this.getChannel($.channelUrl,!0)];case 44:return Zn=vt.sent(),fn=$.category===_n.USER_CHANNEL_BAN,_r=e.as(fn?YD:QD).user,$e((function(){return S(Dt,void 0,void 0,(function(){return T(this,(function(Ze){return this._openChannelHandlers.forEach((function(Ae){fn?Ae.onUserBanned&&Ae.onUserBanned(Zn,_r):Ae.onUserUnbanned&&Ae.onUserUnbanned(Zn,_r)})),[2]}))}))})),[3,60];case 45:return[4,this.getChannel($.channelUrl,!0)];case 46:return jn=vt.sent(),Un=e.as($D).freeze,jn.isFrozen=Un,W.of(this._iid).requestDeduplicator.updatePendingResponse(jn,Date.now()),[4,this.upsertChannelsToCache([jn])];case 47:return vt.sent(),$e((function(){return S(Dt,void 0,void 0,(function(){return T(this,(function(Ze){return this._openChannelHandlers.forEach((function(Ae){Un?Ae.onChannelFrozen&&Ae.onChannelFrozen(jn):Ae.onChannelUnfrozen&&Ae.onChannelUnfrozen(jn)})),[2]}))}))})),[3,60];case 48:return[4,this.removeChannelsFromCache([$.channelUrl])];case 49:return vt.sent(),$e((function(){return S(Dt,void 0,void 0,(function(){return T(this,(function(Ze){return this._openChannelHandlers.forEach((function(Ae){Ae.onChannelDeleted&&Ae.onChannelDeleted($.channelUrl,Rt.OPEN)})),[2]}))}))})),[3,60];case 50:return[4,this.getChannelWithoutCache($.channelUrl,!0,!1)];case 51:return gt=vt.sent(),$e((function(){return S(Dt,void 0,void 0,(function(){return T(this,(function(Ze){return this._openChannelHandlers.forEach((function(Ae){Ae.onChannelChanged&&Ae.onChannelChanged(gt)})),[2]}))}))})),[3,60];case 52:return[4,this.getChannel($.channelUrl,!0)];case 53:return Dn=vt.sent(),Cr=e.as(zD),gn=Cr.created,rr=Cr.updated,Lt=Cr.deleted,gn&&Dn._upsertCachedMetaData(gn,$.ts),rr&&Dn._upsertCachedMetaData(rr,$.ts),Lt&&Dn._removeFromCachedMetaData(Lt,$.ts),(gn||rr||Lt)&&W.of(this._iid).requestDeduplicator.updatePendingResponse(Dn,Date.now()),$e((function(){return S(Dt,void 0,void 0,(function(){return T(this,(function(Ze){return this._openChannelHandlers.forEach((function(Ae){gn&&Ae.onMetaDataCreated&&Ae.onMetaDataCreated(Dn,gn),rr&&Ae.onMetaDataUpdated&&Ae.onMetaDataUpdated(Dn,rr),Lt&&Ae.onMetaDataDeleted&&Ae.onMetaDataDeleted(Dn,Lt)})),[2]}))}))})),[3,60];case 54:return[4,this.getChannel($.channelUrl,!0)];case 55:return Wn=vt.sent(),cr=e.as(qD),dn=cr.created,ti=cr.updated,_i=cr.deleted,$e((function(){return S(Dt,void 0,void 0,(function(){return T(this,(function(Ze){return this._openChannelHandlers.forEach((function(Ae){dn&&Ae.onMetaCounterCreated&&Ae.onMetaCounterCreated(Wn,dn),ti&&Ae.onMetaCounterUpdated&&Ae.onMetaCounterUpdated(Wn,ti),_i&&Ae.onMetaCounterDeleted&&Ae.onMetaCounterDeleted(Wn,_i)})),[2]}))}))})),[3,60];case 56:return[4,this.getChannel($.channelUrl,!0)];case 57:return Sr=vt.sent(),Dr=e.as(px),Kn=Dr.pinnedMessageIds,Yn=Dr.latestPinnedMessage,(Jt=Dr.ts)>Sr._pinnedMessagesUpdatedAt?(Sr.pinnedMessageIds=Kn,Sr.lastPinnedMessage=Yn,Sr._pinnedMessagesUpdatedAt=Jt,W.of(this._iid).requestDeduplicator.updatePendingResponse(Sr,Date.now()),[4,this.upsertChannelsToCache([Sr])]):[3,59];case 58:vt.sent(),$e((function(){return S(Dt,void 0,void 0,(function(){var Ze,Ae,Et,_t,yt;return T(this,(function(Gn){try{for(Ze=Re(this._openChannelHandlers.values()),Ae=Ze.next();!Ae.done;Ae=Ze.next())(Et=Ae.value).onChannelChanged&&Et.onChannelChanged(Sr)}catch(xt){_t={error:xt}}finally{try{Ae&&!Ae.done&&(yt=Ze.return)&&yt.call(Ze)}finally{if(_t)throw _t.error}}return[2]}))}))})),$e((function(){return S(Dt,void 0,void 0,(function(){return T(this,(function(Ze){return this._openChannelHandlers.forEach((function(Ae){Ae.onPinnedMessageUpdated&&Ae.onPinnedMessageUpdated(Sr)})),[2]}))}))})),vt.label=59;case 59:return[3,60];case 60:return[3,61];case 61:return[3,63];case 62:if(Lr=vt.sent(),Ca(Lr))throw Lr;return[3,63];case 63:return[2]}}))}))},n.prototype.addHandler=function(e,r){this._openChannelHandlers.set(e,r)},n.prototype.removeHandler=function(e){this._openChannelHandlers.delete(e)},n.prototype.clearHandler=function(){this._openChannelHandlers.clear()},n.prototype.getChannel=function(e,r){return r===void 0&&(r=!1),S(this,void 0,void 0,(function(){var i;return T(this,(function(a){switch(a.label){case 0:Te(Q("string",e)).throw(X.invalidParameters),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.getChannelFromCache(e)];case 2:return(i=a.sent())?[2,i]:[3,4];case 3:return a.sent(),[3,4];case 4:return[4,this.getChannelWithoutCache(e,r)];case 5:return[2,a.sent()]}}))}))},n.prototype.getChannelWithoutCache=function(e,r,i){return r===void 0&&(r=!1),i===void 0&&(i=!0),S(this,void 0,void 0,(function(){var a,s,l,c,d=this;return T(this,(function(p){switch(p.label){case 0:return Te(Q("string",e)).throw(X.invalidParameters),a=W.of(this._iid).requestDeduplicator,s=new FY({channelUrl:e,isInternalCall:r}),[4,a.requestGetChannel(s.path,(function(){return d._requestQueue.send(s)}),s.params,i)];case 1:return l=p.sent(),c=l.as(cO).channel,[4,this.upsertChannelsToCache([c])];case 2:return[2,p.sent()[0]]}}))}))},n.prototype.createChannel=function(e){return S(this,void 0,void 0,(function(){var r,i,a,s;return T(this,(function(l){switch(l.label){case 0:return r=z(z({},Gx),e),Te((function(c){return Tt("string",c.operatorUserIds,!0)&&(Q("string",c.coverUrlOrImage,!0)||Ai(c.coverUrlOrImage,!0))&&Q("string",c.name,!0)&&Q("string",c.data,!0)&&Q("string",c.customType,!0)&&(Q("string",c.channelUrl)&&/^\w+$/.test(c.channelUrl)||c.channelUrl===null||c.channelUrl===void 0)&&Q("boolean",c.isEphemeral,!0)})(r)).throw(X.invalidParameters),i=new HY(r),[4,this._requestQueue.send(i)];case 1:return a=l.sent(),s=a.as(cO).channel,[4,this.upsertChannelsToCache([s])];case 2:return l.sent(),[2,s]}}))}))},n})(mx),dO={name:void 0,coverUrlOrImage:void 0,data:void 0,customType:void 0,operatorUserIds:void 0},VY=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.token,s=e.limit;return(r=t.call(this)||this).method=ye.GET,r.path="".concat(Ip,"/").concat(encodeURIComponent(i),"/participants"),r.params={token:a,limit:s},r}return U(n,t),n})(Ee),BY=(function(t){function n(e,r){var i=t.call(this,e,r)||this;i.participants=[];var a=r.next,s=r.participants;return i.token=a,i.participants=s.map((function(l){return new bG(e,l)})),i}return U(n,t),n})(Se),zY=(function(t){function n(e,r,i){return t.call(this,e,r,Rt.OPEN,i)||this}return U(n,t),n.prototype._validate=function(){return t.prototype._validate.call(this)},n.prototype.next=function(){return S(this,void 0,void 0,(function(){var e,r,i,a,s,l;return T(this,(function(c){switch(c.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,e=W.of(this._iid).requestQueue,r=new VY(z(z({},this),{token:this._token})),[4,e.send(r)]):[3,2]:[3,5];case 1:return i=c.sent(),a=i.as(BY),s=a.participants,l=a.token,this._token=l,this._hasNext=!!l,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw X.queryInProgress;case 4:return[3,6];case 5:throw X.invalidParameters;case 6:return[2]}}))}))},n})(Wu),qY=(function(t){function n(e){var r=this,i=e.channelUrl,a=e.coverUrlOrImage,s=e.name,l=e.data,c=e.customType,d=e.operatorUserIds;return(r=t.call(this)||this).method=ye.PUT,r.path="".concat(Ip,"/").concat(encodeURIComponent(i)),r.params=Le(Qe({cover_url:Q("string",a)?a:null,cover_file:Ai(a)?a:null,name:s,data:l,custom_type:c,operators:d})),r}return U(n,t),n})(Ee),WY=(function(t){function n(e,r){var i=t.call(this,e,r)||this;return i.channel=new wg(e,r),i}return U(n,t),n})(Se),KY=(function(t){function n(e){var r=this,i=e.channelUrl;return(r=t.call(this)||this).method=ye.DELETE,r.path="".concat(Ip,"/").concat(encodeURIComponent(i)),r}return U(n,t),n})(Ee);(function(t){function n(e,r){return t.call(this,e,r)||this}U(n,t)})(Se);var wg=(function(t){function n(e,r){var i,a=this;return(a=t.call(this,e,r)||this)._lastParticipantCountUpdated=0,a.participantCount=0,a.operators=[],a.lastPinnedMessage=null,a._pinnedMessagesUpdatedAt=0,a.channelType=Rt.OPEN,a.participantCount=(i=r.participant_count)!==null&&i!==void 0?i:0,a.operators=Array.isArray(r.operators)?r.operators.map((function(s){return new St(e,s)})):[],a.lastPinnedMessage=r.latest_pinned_message?ia(a._iid,z({channel_type:a.channelType},r.latest_pinned_message)):null,a}return U(n,t),n.payloadify=function(e,r){r===void 0&&(r=!1);var i=z(z({},b1.payloadify(e,r)),{participant_count:e.participantCount,operators:e.operators.map((function(a){return St.payloadify(a)})),latest_pinned_message:e.lastPinnedMessage?gN(e.lastPinnedMessage):null});return r?i:Le(Qe(i))},n.prototype.serialize=function(){return kg(this)},n.prototype.isOperator=function(e){return e instanceof St?this.isOperator(e.userId):this.operators.some((function(r){return r.userId===e}))},n.prototype._updateParticipantCount=function(e,r){return r>this._lastParticipantCountUpdated&&(this.participantCount=e,this._lastParticipantCountUpdated=r,!0)},n.prototype.createParticipantListQuery=function(e){return new zY(this._iid,this.url,e)},n.prototype.refresh=function(){return S(this,void 0,void 0,(function(){return T(this,(function(e){switch(e.label){case 0:return[4,Gl.of(this._iid).getChannelWithoutCache(this.url)];case 1:return[2,e.sent()]}}))}))},n.prototype.enter=function(){return S(this,void 0,void 0,(function(){var e,r,i,a,s,l;return T(this,(function(c){switch(c.label){case 0:return e=W.of(this._iid).requestQueue,r=new jY({channelUrl:this.url}),[4,e.send(r)];case 1:return i=c.sent(),a=i.as(Vx),s=a.participantCount,l=a.ts,this._updateParticipantCount(s,l),Gl.of(this._iid).setEnteredToCache(this),[2]}}))}))},n.prototype.exit=function(){return S(this,void 0,void 0,(function(){var e,r,i,a,s,l;return T(this,(function(c){switch(c.label){case 0:return e=W.of(this._iid).requestQueue,r=new GY({channelUrl:this.url}),[4,e.send(r)];case 1:return i=c.sent(),a=i.as(Bx),s=a.participantCount,l=a.ts,this._updateParticipantCount(s,l),Gl.of(this._iid).setExitedToCache(this),gi.of(this._iid).fileMessageQueue.cancel(this),[2]}}))}))},n.prototype.updateChannel=function(e){return S(this,void 0,void 0,(function(){var r,i,a,s,l;return T(this,(function(c){switch(c.label){case 0:return r=z(z({},dO),e),Te((function(d){return Tt("string",d.operatorUserIds,!0)&&(Q("string",d.coverUrlOrImage,!0)||Ai(d.coverUrlOrImage,!0))&&Q("string",d.name,!0)&&Q("string",d.data,!0)&&Q("string",d.customType,!0)})(r)).throw(X.invalidParameters),i=W.of(this._iid).requestQueue,a=new qY(z({channelUrl:this.url},r)),[4,i.send(a)];case 1:return s=c.sent(),l=s.as(WY).channel,this._update(l),[4,Gl.of(this._iid).upsertChannelsToCache([l])];case 2:return c.sent(),[2,this]}}))}))},n.prototype.updateChannelWithOperatorUserIds=function(e,r,i,a,s){return S(this,void 0,void 0,(function(){var l;return T(this,(function(c){return l=z(z({},dO),{name:e,coverUrlOrImage:r,data:i,operatorUserIds:a,customType:s}),[2,this.updateChannel(l)]}))}))},n.prototype.delete=function(){return S(this,void 0,void 0,(function(){var e,r;return T(this,(function(i){switch(i.label){case 0:return e=W.of(this._iid).requestQueue,r=new KY({channelUrl:this.url}),[4,e.send(r)];case 1:return i.sent(),[4,Gl.of(this._iid).removeChannelsFromCache([this.url])];case 2:return i.sent(),[2]}}))}))},n.prototype.updateUserMessage=function(e,r){return S(this,void 0,void 0,(function(){var i,a,s,l=this;return T(this,(function(c){switch(c.label){case 0:return[4,t.prototype.updateUserMessage.call(this,e,r)];case 1:return i=c.sent(),a=!1,s=!1,this.lastPinnedMessage&&this.lastPinnedMessage.messageId===i.messageId&&(this.lastPinnedMessage=i,a=!0,s=!0),a&&Gl.of(this._iid).handlers.map((function(d){d.onChannelChanged&&d.onChannelChanged(l)})),s&&Gl.of(this._iid).handlers.map((function(d){d.onPinnedMessageUpdated&&d.onPinnedMessageUpdated(l)})),[2,i]}}))}))},n.prototype.updateFileMessage=function(e,r){return S(this,void 0,void 0,(function(){var i,a,s,l=this;return T(this,(function(c){switch(c.label){case 0:return[4,t.prototype.updateFileMessage.call(this,e,r)];case 1:return i=c.sent(),a=!1,s=!1,this.lastPinnedMessage&&this.lastPinnedMessage.messageId===i.messageId&&(this.lastPinnedMessage=i,a=!0,s=!0),a&&Gl.of(this._iid).handlers.map((function(d){d.onChannelChanged&&d.onChannelChanged(l)})),s&&Gl.of(this._iid).handlers.map((function(d){d.onPinnedMessageUpdated&&d.onPinnedMessageUpdated(l)})),[2,i]}}))}))},n})(b1);(function(t){function n(e){e===void 0&&(e={});var r=t.call(this)||this;return Object.keys(e).forEach((function(i){r.hasOwnProperty(i)&&(r[i]=e[i])})),r}return U(n,t),n})((function(t){function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.onUserEntered=it,e.onUserExited=it,e.onChannelParticipantCountChanged=it,e.onPollUpdated=it,e.onPollVoted=it,e.onPollDeleted=it,e.onPinnedMessageUpdated=it,e}return U(n,t),n})(Cx));var YY=(function(t){function n(e){var r=this,i=e.token,a=e.limit,s=e.nameKeyword,l=e.urlKeyword,c=e.customTypes,d=e.includeFrozen,p=e.includeMetaData;return(r=t.call(this)||this).method=ye.GET,r.path=Ip,r.params=Le({token:i,limit:a,name_contains:s,url_contains:l,custom_types:c,show_frozen:d,show_metadata:p,show_pinned_messages:!0}),r}return U(n,t),n})(Ee),QY=(function(t){function n(e,r){var i=t.call(this,e,r)||this;i.channels=[];var a=r.next,s=r.channels,l=r.ts;return i.token=a,s&&s.length>0&&(i.channels=s.map((function(c){return new wg(e,c)}))),i.ts=typeof l=="number"?l:null,i}return U(n,t),n})(Se),$Y=(function(t){function n(e,r){var i,a,s,l,c,d=this;return(d=t.call(this,e,r)||this).includeFrozen=!0,d.includeMetaData=!0,d.nameKeyword=null,d.urlKeyword=null,d.customTypes=null,d.includeFrozen=(i=r.includeFrozen)===null||i===void 0||i,d.includeMetaData=(a=r.includeMetaData)===null||a===void 0||a,d.nameKeyword=(s=r.nameKeyword)!==null&&s!==void 0?s:null,d.urlKeyword=(l=r.urlKeyword)!==null&&l!==void 0?l:null,d.customTypes=(c=r.customTypes)!==null&&c!==void 0?c:null,d}return U(n,t),n.prototype._validate=function(){return t.prototype._validate.call(this)&&Q("boolean",this.includeFrozen)&&Q("boolean",this.includeMetaData)&&Q("string",this.nameKeyword,!0)&&Q("string",this.urlKeyword,!0)&&Tt("string",this.customTypes,!0)},n.prototype.next=function(){return S(this,void 0,void 0,(function(){var e,r,i,a,s,l;return T(this,(function(c){switch(c.label){case 0:return this._validate()?this._isLoading?[3,4]:this._hasNext?(this._isLoading=!0,e=W.of(this._iid).requestQueue,r=new YY(Qe(z(z({},this),{token:this._token}))),[4,e.send(r)]):[3,3]:[3,6];case 1:return i=c.sent(),a=i.as(QY),s=a.channels,l=a.token,this._token=l,this._hasNext=!!l,[4,Gl.of(this._iid).upsertChannelsToCache(s)];case 2:return c.sent(),this._isLoading=!1,[2,s];case 3:return[2,[]];case 4:throw X.queryInProgress;case 5:return[3,7];case 6:throw X.invalidParameters;case 7:return[2]}}))}))},n})(Yc),XY=(function(t){function n(){var e=t!==null&&t.apply(this,arguments)||this;return e.name="openChannel",e}return U(n,t),n.prototype.init=function(e,r){var i=r.sdkState,a=r.dispatcher,s=r.sessionManager,l=r.requestQueue,c=r.logger,d=r.onlineDetector,p=r.cacheContext;t.prototype.init.call(this,e,{sdkState:i,dispatcher:a,sessionManager:s,requestQueue:l,logger:c,onlineDetector:d,cacheContext:p}),this._manager=new Gl(e,{sdkState:i,dispatcher:a,requestQueue:l,logger:c,cacheContext:p,sessionManager:s})},n.prototype.createOpenChannelListQuery=function(e){return e===void 0&&(e={}),new $Y(this._iid,e)},n.prototype.addOpenChannelHandler=function(e,r){this._manager.addHandler(e,r)},n.prototype.removeOpenChannelHandler=function(e){this._manager.removeHandler(e)},n.prototype.removeAllOpenChannelHandlers=function(){this._manager.clearHandler()},n.prototype.buildOpenChannelFromSerializedData=function(e){return this._manager.buildOpenChannelFromSerializedData(e)},n.prototype.getChannel=function(e){return S(this,void 0,void 0,(function(){return T(this,(function(r){return[2,this._manager.getChannel(e)]}))}))},n.prototype.getChannelWithoutCache=function(e){return S(this,void 0,void 0,(function(){return T(this,(function(r){return[2,this._manager.getChannelWithoutCache(e)]}))}))},n.prototype.createChannel=function(e){return e===void 0&&(e={}),S(this,void 0,void 0,(function(){return T(this,(function(r){return[2,this._manager.createChannel(e)]}))}))},n.prototype.createChannelWithOperatorUserIds=function(e,r,i,a,s){return S(this,void 0,void 0,(function(){var l;return T(this,(function(c){return(l=z({},Gx)).name=e,l.coverUrlOrImage=r,l.data=i,l.operatorUserIds=a,l.customType=s,[2,this._manager.createChannel(l)]}))}))},n})(J1),NE=function(t,n){return ke(ke({},t),{stores:ke(ke({},t.stores),{appInfoStore:ke(ke({},t.stores.appInfoStore),n)})})},TE=function(t,n){return ke(ke({},t),{stores:ke(ke({},t.stores),{sdkStore:ke(ke({},t.stores.sdkStore),n)})})},hw=function(t,n){return ke(ke({},t),{stores:ke(ke({},t.stores),{userStore:ke(ke({},t.stores.userStore),n)})})};function ZY(t){var n=t.appId,e=t.customApiHost,r=t.customWebSocketHost,i=t.sdkInitParams,a=i===void 0?{}:i,s=Object.assign(a,{appId:n,modules:[new Tq,new XY],localCacheEnabled:typeof a.localCacheEnabled<"u"?a.localCacheEnabled:!0});return e&&(s.customApiHost=e),r&&(s.customWebSocketHost=r),xW.init(s)}var fw="3.17.4";function JY(t,n){var e,r,i=n.logger,a=n.sessionHandler,s=n.isMobile,l=n.customExtensionParams;(e=i.info)===null||e===void 0||e.call(i,"SendbirdProvider | useConnect/setupConnection/setVersion",{version:fw}),t.addExtension("sb_uikit",fw),t.addSendbirdExtensions([{product:oN.UIKIT_CHAT,version:fw,platform:T0?.JS}],{platform:s?oh.MOBILE_WEB:oh.WEB},l),a&&((r=i.info)===null||r===void 0||r.call(i,"SendbirdProvider | useConnect/setupConnection/configureSession",a),t.setSessionHandler(a))}var eQ="No sendbird state value available. Make sure you are rendering `<SendbirdProvider>` at the top of your app.",qa=function(){var t,n=k.useContext(UY);if(!n)throw new Error(eQ);var e=Px.useSyncExternalStore(n.subscribe,n.getState),r={initMessageTemplateInfo:k.useCallback(function(d){var p=d.payload;n.setState(function(g){return NE(g,{messageTemplatesInfo:p,waitingTemplateKeysMap:{}})})},[n]),upsertMessageTemplates:k.useCallback(function(d){var p=d.payload,g=e.stores.appInfoStore,_=g.messageTemplatesInfo;if(!_)return e;var y=ke({},g.waitingTemplateKeysMap);p.forEach(function(C){var w=C.key,A=C.template;_.templatesMap[w]=A,delete y[w]}),n.setState(function(C){return NE(C,{waitingTemplateKeysMap:y,messageTemplatesInfo:_})})},[n,e.stores.appInfoStore]),upsertWaitingTemplateKeys:k.useCallback(function(d){var p=d.payload,g=e.stores.appInfoStore,_=p.keys,y=p.requestedAt,C=ke({},g.waitingTemplateKeysMap);_.forEach(function(w){var A,M;C[w]={erroredMessageIds:(M=(A=C[w])===null||A===void 0?void 0:A.erroredMessageIds)!==null&&M!==void 0?M:[],requestedAt:y}}),n.setState(function(w){return NE(w,{waitingTemplateKeysMap:C})})},[n,e.stores.appInfoStore]),markErrorWaitingTemplateKeys:k.useCallback(function(d){var p=d.payload,g=e.stores.appInfoStore,_=p.keys,y=p.messageId,C=ke({},g.waitingTemplateKeysMap);_.forEach(function(w){var A=C[w];A&&A.erroredMessageIds.indexOf(y)===-1&&A.erroredMessageIds.push(y)}),n.setState(function(w){return NE(w,{waitingTemplateKeysMap:C})})},[n,e.stores.appInfoStore])},i={setSdkLoading:k.useCallback(function(d){n.setState(function(p){return TE(p,{initialized:!1,loading:d})})},[n]),sdkError:k.useCallback(function(){n.setState(function(d){return TE(d,{initialized:!1,loading:!1,error:!0})})},[n]),initSdk:k.useCallback(function(d){n.setState(function(p){return TE(p,{sdk:d,initialized:!0,loading:!1,error:!1})})},[n]),resetSdk:k.useCallback(function(){n.setState(function(d){return TE(d,{sdk:{},initialized:!1,loading:!1,error:!1})})},[n])},a={initUser:k.useCallback(function(d){n.setState(function(p){return hw(p,{initialized:!0,loading:!1,user:d})})},[n]),resetUser:k.useCallback(function(){n.setState(function(d){return hw(d,{initialized:!1,loading:!1,user:{}})})},[n]),updateUserInfo:k.useCallback(function(d){n.setState(function(p){return hw(p,{user:d})})},[n])},s=k.useCallback(function(d){return nl(void 0,[d],void 0,function(p){var g,_,y=p.logger;return rl(this,function(C){switch(C.label){case 0:return i.setSdkLoading(!0),g=e.stores.sdkStore.sdk,g?.disconnectWebSocket?[4,g.disconnectWebSocket()]:[3,2];case 1:C.sent(),C.label=2;case 2:return i.resetSdk(),a.resetUser(),(_=y.info)===null||_===void 0||_.call(y,"SendbirdProvider | useSendbird/disconnect completed"),[2]}})})},[n,(t=e.stores.sdkStore)===null||t===void 0?void 0:t.sdk,i,a]),l=k.useCallback(function(d){return nl(void 0,void 0,void 0,function(){var p,g,_,y,C,w,A,M,I,D,P,H,L,G,Y,F,ne,J,re,Oe,Z,ue,q,le;return rl(this,function(pe){switch(pe.label){case 0:return p=d.logger,g=d.userId,_=d.appId,y=d.accessToken,C=d.nickname,w=d.profileUrl,A=d.isMobile,M=d.sdkInitParams,I=d.customApiHost,D=d.customWebSocketHost,P=d.customExtensionParams,H=d.eventHandlers,L=d.initializeMessageTemplatesInfo,G=d.configureSession,Y=d.initDashboardConfigs,[4,s({logger:p})];case 1:pe.sent(),F=ZY({appId:_,customApiHost:I,customWebSocketHost:D,sdkInitParams:M}),JY(F,{logger:p,isMobile:A,customExtensionParams:P,sessionHandler:G?G(F):void 0}),i.setSdkLoading(!0),pe.label=2;case 2:return pe.trys.push([2,8,,9]),[4,F.connect(g,y)];case 3:return ne=pe.sent(),a.initUser(ne),C||w?[4,F.updateCurrentUserInfo({nickname:C||ne.nickname||"",profileUrl:w||ne.profileUrl})]:[3,5];case 4:pe.sent(),pe.label=5;case 5:return[4,L?.(F)];case 6:return pe.sent(),[4,Y?.(F)];case 7:return pe.sent(),i.initSdk(F),(Z=(Oe=H?.connection)===null||Oe===void 0?void 0:Oe.onConnected)===null||Z===void 0||Z.call(Oe,ne),[3,9];case 8:return J=pe.sent(),re=J,i.resetSdk(),a.resetUser(),(ue=p.error)===null||ue===void 0||ue.call(p,"SendbirdProvider | useSendbird/connect failed",re),(le=(q=H?.connection)===null||q===void 0?void 0:q.onFailed)===null||le===void 0||le.call(q,re),[3,9];case 9:return[2]}})})},[n,i,a,s]),c=k.useMemo(function(){return ke(ke(ke(ke({},r),i),a),{disconnect:s,connect:l})},[r,i,a,s,l]);return{state:e,actions:c}},zx={IDLE:"IDLE",PLAYING:"PLAYING"},tQ=function(){return{audioFile:null,playbackTime:0,duration:1e3,playingStatus:zx.IDLE}},nQ=function(t,n){return t===void 0&&(t=""),n===void 0&&(n=""),"".concat(t,"-").concat(n)},pw=function(){},rQ={currentGroupKey:"",currentPlayer:null,audioStorage:{}},iQ=k.createContext({play:pw,pause:pw,stop:pw,voicePlayerStore:rQ}),aQ=function(){return k.useContext(iQ)},sQ={en:{MESSAGE_STATUS__YESTERDAY:"Yesterday",CHANNEL__MESSAGE_LIST__NOTIFICATION__NEW_MESSAGE:"new message",CHANNEL__MESSAGE_LIST__NOTIFICATION__NEW_MESSAGE_S:"new messages",CHANNEL__MESSAGE_LIST__NOTIFICATION__UNREAD_MESSAGE:"unread message",CHANNEL__MESSAGE_LIST__NOTIFICATION__UNREAD_MESSAGE_S:"unread messages",CHANNEL__MESSAGE_LIST__NOTIFICATION__ON:"on",CHANNEL_PREVIEW_MOBILE_LEAVE:"Leave channel",CHANNEL_SETTING__HEADER__TITLE:"Channel information",CHANNEL_SETTING__PROFILE__EDIT:"Edit",CHANNEL_SETTING__MEMBERS__TITLE:"Members",CHANNEL_SETTING__MEMBERS__SEE_ALL_MEMBERS:"All members",CHANNEL_SETTING__MEMBERS__INVITE_MEMBER:"Invite users",CHANNEL_SETTING__MEMBERS__YOU:" (You)",CHANNEL_SETTING__MEMBERS__SELECT_TITLE:"Select members",CHANNEL_SETTING__MEMBERS__OPERATOR:"Operator",CHANNEL_SETTING__LEAVE_CHANNEL__TITLE:"Leave channel",CHANNEL_SETTING__OPERATORS__TITLE:"Operators",CHANNEL_SETTING__OPERATORS__TITLE_ALL:"All operators",CHANNEL_SETTING__OPERATORS__TITLE_ADD:"Add operator",CHANNEL_SETTING__OPERATORS__ADD_BUTTON:"Add",CHANNEL_SETTING__MUTED_MEMBERS__TITLE:"Muted members",CHANNEL_SETTING__MUTED_MEMBERS__TITLE_ALL:"All muted members",CHANNEL_SETTING__NO_UNMUTED:"No muted members yet",CHANNEL_SETTING__BANNED_MEMBERS__TITLE:"Banned users",CHANNEL_SETTING__FREEZE_CHANNEL:"Freeze Channel",CHANNEL_SETTING__MODERATION__REGISTER_AS_OPERATOR:"Register as operator",CHANNEL_SETTING__MODERATION__UNREGISTER_OPERATOR:"Unregister operator",CHANNEL_SETTING__MODERATION__MUTE:"Mute",CHANNEL_SETTING__MODERATION__UNMUTE:"Unmute",CHANNEL_SETTING__MODERATION__BAN:"Ban",CHANNEL_SETTING__MODERATION__UNBAN:"Unban",CHANNEL_SETTING__MODERATION__EMPTY_BAN:"No banned members yet",CHANNEL_SETTING__MODERATION__ALL_BAN:"All banned members",OPEN_CHANNEL_CONVERSATION__TITLE_PARTICIPANTS:"participants",OPEN_CHANNEL_CONVERSATION__SELECT_PARTICIPANTS:"Select participants",OPEN_CHANNEL_LIST__TITLE:"Channels",CREATE_OPEN_CHANNEL_LIST__TITLE:"New channel profile",CREATE_OPEN_CHANNEL_LIST__SUBTITLE__IMG_SECTION:"Channel image",CREATE_OPEN_CHANNEL_LIST__SUBTITLE__IMG_UPLOAD:"Upload",CREATE_OPEN_CHANNEL_LIST__SUBTITLE__TEXT_SECTION:"Channel name",CREATE_OPEN_CHANNEL_LIST__SUBTITLE__TEXT_PLACE_HOLDER:"Enter channel name",CREATE_OPEN_CHANNEL_LIST__SUBMIT:"Create",OPEN_CHANNEL_SETTINGS__OPERATOR_TITLE:"Channel Information",OPEN_CHANNEL_SETTINGS__OPERATOR_URL:"URL",OPEN_CHANNEL_SETTINGS__PARTICIPANTS_ACCORDION_TITLE:"Participants",OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_PANEL:"Delete channel",OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_TITLE:"Delete channel?",OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_CONTEXT:"Once deleted, this channel can't be restored.",OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_SUBMIT:"Delete",OPEN_CHANNEL_SETTINGS__OPERATORS_TITLE:"Operators",OPEN_CHANNEL_SETTINGS__OPERATORS__TITLE_ADD:"Add operator",OPEN_CHANNEL_SETTINGS__OPERATORS__TITLE_ALL:"All operators",OPEN_CHANNEL_SETTINGS__MUTED_MEMBERS__TITLE:"Muted participants",OPEN_CHANNEL_SETTINGS__MUTED_MEMBERS__TITLE_ALL:"All muted participants",OPEN_CHANNEL_SETTINGS__MUTED_MEMBERS__NO_ONE:"No muted participants yet",OPEN_CHANNEL_SETTINGS__BANNED_MEMBERS__TITLE:"Banned users",OPEN_CHANNEL_SETTINGS__BANNED_MEMBERS__TITLE_ALL:"All banned users",OPEN_CHANNEL_SETTINGS__BANNED_MEMBERS__NO_ONE:"No banned users yet",OPEN_CHANNEL_SETTINGS__MEMBERS__YOU:" (You)",OPEN_CHANNEL_SETTINGS__MEMBERS__OPERATOR:"Operator",OPEN_CHANNEL_SETTINGS__PARTICIPANTS_TITLE:"Participants",OPEN_CHANNEL_SETTINGS__EMPTY_LIST:"No participants yet",OPEN_CHANNEL_SETTINGS__SEE_ALL:"See all participants",OPEN_CHANNEL_SETTINGS__ALL_PARTICIPANTS_TITLE:"All participants",OPEN_CHANNEL_SETTINGS__NO_TITLE:"(No title)",OPEN_CHANNEL_SETTING__MODERATION__REGISTER_AS_OPERATOR:"Register as operator",OPEN_CHANNEL_SETTING__MODERATION__UNREGISTER_OPERATOR:"Unregister operator",OPEN_CHANNEL_SETTING__MODERATION__MUTE:"Mute",OPEN_CHANNEL_SETTING__MODERATION__UNMUTE:"Unmute",OPEN_CHANNEL_SETTING__MODERATION__BAN:"Ban",OPEN_CHANNEL_SETTING__MODERATION__UNBAN:"Unban",TRYING_TO_CONNECT:"Trying to connect",TYPING_INDICATOR__IS_TYPING:"is typing...",TYPING_INDICATOR__AND:"and",TYPING_INDICATOR__ARE_TYPING:"are typing...",TYPING_INDICATOR__MULTIPLE_TYPING:"Several people are typing...",CHANNEL_FROZEN:"Channel is frozen",PLACE_HOLDER__NO_CHANNEL:"No channels",PLACE_HOLDER__WRONG:"Something went wrong",PLACE_HOLDER__RETRY_TO_CONNECT:"Retry",PLACE_HOLDER__NO_MESSAGES:"No messages",TOOLTIP__AND_YOU:", and you",TOOLTIP__YOU:"you",TOOLTIP__UNKNOWN_USER:"(no name)",UNKNOWN__UNKNOWN_MESSAGE_TYPE:"(Unknown message type)",UNKNOWN__CANNOT_READ_MESSAGE:"Cannot read this message.",UNKNOWN__TEMPLATE_ERROR:"(Template error)",FORM_VERSION_ERROR:"Form type messages are not available in this version.",UNKNOWN__CANNOT_READ_TEMPLATE:"Cannot read this template.",MESSAGE_EDITED:"(edited)",MODAL__DELETE_MESSAGE__TITLE:"Delete this message?",MODAL__CHANNEL_INFORMATION__TITLE:"Edit channel information",MODAL__CHANNEL_INFORMATION__CHANNEL_IMAGE:"Channel image",MODAL__CHANNEL_INFORMATION__UPLOAD:"Upload",MODAL__CHANNEL_INFORMATION__CHANNEL_NAME:"Channel name",MODAL__CHANNEL_INFORMATION__INPUT__PLACE_HOLDER:"Enter name",MODAL__INVITE_MEMBER__TITLE:"Invite member",MODAL__INVITE_MEMBER__SELECTED:"selected",MODAL__CHOOSE_CHANNEL_TYPE__TITLE:"New channel",MODAL__CHOOSE_CHANNEL_TYPE__GROUP:"Group",MODAL__CHOOSE_CHANNEL_TYPE__SUPER_GROUP:"Super group",MODAL__CHOOSE_CHANNEL_TYPE__BROADCAST:"Broadcast",MODAL__CREATE_CHANNEL__TITLE:"New channel",MODAL__CREATE_CHANNEL__GROUP:"Group",MODAL__CREATE_CHANNEL__SUPER:"Super group",MODAL__CREATE_CHANNEL__BROADCAST:"Broadcast",MODAL__CREATE_CHANNEL__SELECTED:"selected",MODAL__LEAVE_CHANNEL__TITLE:"Leave this channel?",MODAL__LEAVE_CHANNEL__FOOTER:"Leave",MODAL__VOICE_MESSAGE_INPUT_DISABLED__TITLE_MUTED:"You're muted by the operator.",MODAL__VOICE_MESSAGE_INPUT_DISABLED__TITLE_FROZEN:"Channel is frozen.",USER_PROFILE__MESSAGE:"Message",USER_PROFILE__USER_ID:"User ID",EDIT_PROFILE__TITLE:"My profile",EDIT_PROFILE__IMAGE_LABEL:"Profile image",EDIT_PROFILE__IMAGE_UPLOAD:"Upload",EDIT_PROFILE__NICKNAME_LABEL:"Nickname",EDIT_PROFILE__NICKNAME_PLACEHOLDER:"Enter your nickname",EDIT_PROFILE__USERID_LABEL:"User ID",EDIT_PROFILE__THEME_LABEL:"Dark theme",MESSAGE_INPUT__PLACE_HOLDER:"Enter message",MESSAGE_INPUT__PLACE_HOLDER__DISABLED:"Chat is unavailable in this channel",MESSAGE_INPUT__PLACE_HOLDER__SUGGESTED_REPLIES:"Please choose one from above",MESSAGE_INPUT__PLACE_HOLDER__MESSAGE_FORM:"Please fill out the message form.",MESSAGE_INPUT__PLACE_HOLDER__FROZEN:"Chat is unavailable in this channel",MESSAGE_INPUT__PLACE_HOLDER__MUTED:"Chat is unavailable because you're muted",MESSAGE_INPUT__PLACE_HOLDER__MUTED_SHORT:"You're muted",MESSAGE_INPUT__QUOTE_REPLY__PLACE_HOLDER:"Reply to message",BUTTON__SUBMIT:"Submit",BUTTON__CANCEL:"Cancel",BUTTON__DELETE:"Delete",BUTTON__SAVE:"Save",BUTTON__CREATE:"Create",BUTTON__INVITE:"Invite",BUTTON__OK:"OK",BADGE__OVER:"+",NO_TITLE:"No title",NO_NAME:"(No name)",NO_MEMBERS:"(No members)",LABEL__OPERATOR:"Operator",MESSAGE_MENU__COPY:"Copy",MESSAGE_MENU__REPLY:"Reply",MESSAGE_MENU__THREAD:"Reply in thread",MESSAGE_MENU__OPEN_IN_CHANNEL:"Open in channel",MESSAGE_MENU__EDIT:"Edit",MESSAGE_MENU__RESEND:"Resend",MESSAGE_MENU__DELETE:"Delete",MESSAGE_MENU__SAVE:"Save",MESSAGE_MENU__MARK_AS_UNREAD:"Mark as unread",CONTEXT_MENU_DROPDOWN__COPY:"Copy",CONTEXT_MENU_DROPDOWN__EDIT:"Edit",CONTEXT_MENU_DROPDOWN__RESEND:"Resend",CONTEXT_MENU_DROPDOWN__DELETE:"Delete",CONTEXT_MENU_DROPDOWN__SAVE:"Save",SEARCH:"Search",SEARCH_IN_CHANNEL:"Search in channel",SEARCH_IN:"Search in",SEARCHING:"Searching for messages...",NO_SEARCHED_MESSAGE:"No results found.",QUOTE_MESSAGE_INPUT__REPLY_TO:"Reply to",QUOTE_MESSAGE_INPUT__FILE_TYPE_IMAGE:"Photo",QUOTE_MESSAGE_INPUT__FILE_TYPE_GIF:"GIF",QUOTE_MESSAGE_INPUT__FILE_TYPE__VIDEO:"Video",QUOTED_MESSAGE__REPLIED_TO:"replied to",QUOTED_MESSAGE__CURRENT_USER:"You",QUOTED_MESSAGE__UNAVAILABLE:"Message unavailable",THREAD__HEADER_TITLE:"Thread",CHANNEL__THREAD_REPLY:"reply",CHANNEL__THREAD_REPLIES:"replies",CHANNEL__THREAD_OVER_MAX:"99+",THREAD__THREAD_REPLY:"reply",THREAD__THREAD_REPLIES:"replies",THREAD__INPUT__REPLY_TO_THREAD:"Reply to thread",THREAD__INPUT__REPLY_IN_THREAD:"Reply in thread",MENTION_NAME__NO_NAME:"(No name)",MENTION_COUNT__OVER_LIMIT:"You can mention up to %d times at a time.",UI__FILE_VIEWER__UNSUPPORT:"Unsupported message",VOICE_RECORDING_PERMISSION_DENIED:`You cannot record the voice since
        voice recording is not permitted in your device system setting`,VOICE_MESSAGE:"Voice Message",CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_GIF:"GIF",CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_PHOTO:"Photo",CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_VIDEO:"Video",CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_AUDIO:"Audio",CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_VOICE_MESSAGE:"Voice message",CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_GENERAL:"File",CHANNEL_PREVIEW_LAST_MESSAGE_TEMPLATE_MESSAGE:"Message",DATE_FORMAT__MESSAGE_LIST__NOTIFICATION__UNREAD_SINCE:"p 'on' MMM dd",DATE_FORMAT__MESSAGE_LIST__DATE_SEPARATOR:"MMMM dd, yyyy",DATE_FORMAT__THREAD_LIST__DATE_SEPARATOR:"MMM dd, yyyy",DATE_FORMAT__MESSAGE_CREATED_AT:"p",DATE_FORMAT__UNREAD_SINCE:"p MMM dd",DATE_FORMAT__LAST_MESSAGE_CREATED_AT__TODAY:"p",DATE_FORMAT__LAST_MESSAGE_CREATED_AT__THIS_YEAR:"MMM d",DATE_FORMAT__LAST_MESSAGE_CREATED_AT__PREVIOUS_YEAR:"yyyy/M/d",FILE_UPLOAD_NOTIFICATION__COUNT_LIMIT:"Up to %d files can be attached.",FILE_UPLOAD_NOTIFICATION__SIZE_LIMIT:"The maximum size per file is %d MB.",FEEDBACK_LIKE:"Like",FEEDBACK_DISLIKE:"Dislike",EDIT_COMMENT:"Edit comment",REMOVE_FEEDBACK:"Remove Feedback",FEEDBACK_MODAL_TITLE:"Provide additional feedback (optional)",FEEDBACK_CONTENT_PLACEHOLDER:"Leave a comment",BUTTON__REMOVE_FEEDBACK:"Remove feedback",FEEDBACK_FAILED_SUBMIT:"Couldnt submit. Try again.",FEEDBACK_FAILED_SAVE:"Couldnt save. Try again.",FEEDBACK_FAILED_DELETE:"Couldnt delete. Try again.",FORM_ITEM_REQUIRED:"This field is required",FORM_ITEM_INVALID:"Please check the value",FORM_ITEM_OPTIONAL_EMPTY:"No Response"}},CS=function(t){return t===void 0&&(t="en"),sQ[t]},oQ={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},lQ=function(t,n,e){var r,i=oQ[t];return typeof i=="string"?r=i:n===1?r=i.one:r=i.other.replace("{{count}}",n.toString()),e!=null&&e.addSuffix?e.comparison&&e.comparison>0?"in "+r:r+" ago":r};function mw(t){return function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=n.width?String(n.width):t.defaultWidth,r=t.formats[e]||t.formats[t.defaultWidth];return r}}var uQ={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},cQ={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dQ={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},hQ={date:mw({formats:uQ,defaultWidth:"full"}),time:mw({formats:cQ,defaultWidth:"full"}),dateTime:mw({formats:dQ,defaultWidth:"full"})},fQ={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},pQ=function(t,n,e,r){return fQ[t]};function k_(t){return function(n,e){var r=e!=null&&e.context?String(e.context):"standalone",i;if(r==="formatting"&&t.formattingValues){var a=t.defaultFormattingWidth||t.defaultWidth,s=e!=null&&e.width?String(e.width):a;i=t.formattingValues[s]||t.formattingValues[a]}else{var l=t.defaultWidth,c=e!=null&&e.width?String(e.width):t.defaultWidth;i=t.values[c]||t.values[l]}var d=t.argumentCallback?t.argumentCallback(n):n;return i[d]}}var mQ={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},gQ={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},vQ={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},_Q={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},yQ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},bQ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},EQ=function(t,n){var e=Number(t),r=e%100;if(r>20||r<10)switch(r%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"},CQ={ordinalNumber:EQ,era:k_({values:mQ,defaultWidth:"wide"}),quarter:k_({values:gQ,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:k_({values:vQ,defaultWidth:"wide"}),day:k_({values:_Q,defaultWidth:"wide"}),dayPeriod:k_({values:yQ,defaultWidth:"wide",formattingValues:bQ,defaultFormattingWidth:"wide"})};function R_(t){return function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=n.match(i);if(!a)return null;var s=a[0],l=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?NQ(l,function(g){return g.test(s)}):wQ(l,function(g){return g.test(s)}),d;d=t.valueCallback?t.valueCallback(c):c,d=e.valueCallback?e.valueCallback(d):d;var p=n.slice(s.length);return{value:d,rest:p}}}function wQ(t,n){for(var e in t)if(t.hasOwnProperty(e)&&n(t[e]))return e}function NQ(t,n){for(var e=0;e<t.length;e++)if(n(t[e]))return e}function TQ(t){return function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.match(t.matchPattern);if(!r)return null;var i=r[0],a=n.match(t.parsePattern);if(!a)return null;var s=t.valueCallback?t.valueCallback(a[0]):a[0];s=e.valueCallback?e.valueCallback(s):s;var l=n.slice(i.length);return{value:s,rest:l}}}var SQ=/^(\d+)(th|st|nd|rd)?/i,AQ=/\d+/i,IQ={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},MQ={any:[/^b/i,/^(a|c)/i]},OQ={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},kQ={any:[/1/i,/2/i,/3/i,/4/i]},RQ={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},DQ={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},xQ={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},PQ={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},UQ={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},LQ={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},FQ={ordinalNumber:TQ({matchPattern:SQ,parsePattern:AQ,valueCallback:function(t){return parseInt(t,10)}}),era:R_({matchPatterns:IQ,defaultMatchWidth:"wide",parsePatterns:MQ,defaultParseWidth:"any"}),quarter:R_({matchPatterns:OQ,defaultMatchWidth:"wide",parsePatterns:kQ,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:R_({matchPatterns:RQ,defaultMatchWidth:"wide",parsePatterns:DQ,defaultParseWidth:"any"}),day:R_({matchPatterns:xQ,defaultMatchWidth:"wide",parsePatterns:PQ,defaultParseWidth:"any"}),dayPeriod:R_({matchPatterns:UQ,defaultMatchWidth:"any",parsePatterns:LQ,defaultParseWidth:"any"})},qx={code:"en-US",formatDistance:lQ,formatLong:hQ,formatRelative:pQ,localize:CQ,match:FQ,options:{weekStartsOn:0,firstWeekContainsDate:1}},HQ={stringSet:CS("en"),dateLocale:qx},Zc=O.createContext(HQ),Wa=function(){var t=O.useContext(Zc);if(!t)throw new Error("`useLocalization` hook must be used within `SendbirdProvider` that includes `LocalizationProvider`.");return t},vi=function(){};function wS(t){var n=t;n&&(!n.startsWith("http://")&&!n.startsWith("https://")&&(n="https://"+n),window.open(n,"_blank","noopener,noreferrer"))}function Bi(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")}var jQ=!1,GQ=O.createContext({breakpoint:jQ,isMobile:!1}),Jc=function(){return O.useContext(GQ)},Fc=O.forwardRef(function(t,n){var e=t.className,r=e===void 0?"":e,i=t.children,a=t.disabled,s=a===void 0?!1:a,l=t.width,c=l===void 0?"56px":l,d=t.height,p=d===void 0?"56px":d,g=t.type,_=g===void 0?"button":g,y=t.style,C=y===void 0?{}:y,w=t.onBlur,A=w===void 0?function(){}:w,M=t.onClick,I=M===void 0?function(){}:M,D=t.testID,P=k.useState(!1),H=P[0],L=P[1];return O.createElement("button",{"data-testid":D,className:et(et([],Array.isArray(r)?r:[r],!0),["sendbird-iconbutton",H?"sendbird-iconbutton--pressed":""],!1).join(" "),disabled:s,ref:n,type:_,style:ke(ke({},C),{height:p,width:c}),onClick:function(G){s||(L(!0),I?.(G))},onBlur:function(G){L(!1),A?.(G)}},O.createElement("span",{className:"sendbird-iconbutton__inner"},i))}),fo={H_1:"H_1",H_2:"H_2",SUBTITLE_1:"SUBTITLE_1",SUBTITLE_2:"SUBTITLE_2",BODY_1:"BODY_1",BODY_2:"BODY_2",BUTTON_1:"BUTTON_1",BUTTON_2:"BUTTON_2",BUTTON_3:"BUTTON_3",CAPTION_1:"CAPTION_1",CAPTION_2:"CAPTION_2",CAPTION_3:"CAPTION_3"},po={ONBACKGROUND_1:"ONBACKGROUND_1",ONBACKGROUND_2:"ONBACKGROUND_2",ONBACKGROUND_3:"ONBACKGROUND_3",ONBACKGROUND_4:"ONBACKGROUND_4",ONCONTENT_1:"ONCONTENT_1",ONCONTENT_2:"ONCONTENT_2",ONCONTENT_3:"ONCONTENT_3",ONCONTENT_INVERSE_1:"ONCONTENT_INVERSE_1",ONCONTENT_INVERSE_3:"ONCONTENT_INVERSE_3",PRIMARY:"PRIMARY",ERROR:"ERROR",SECONDARY_3:"SECONDARY_3"};function VQ(t){switch(t){case fo.H_1:return"sendbird-label--h-1";case fo.H_2:return"sendbird-label--h-2";case fo.SUBTITLE_1:return"sendbird-label--subtitle-1";case fo.SUBTITLE_2:return"sendbird-label--subtitle-2";case fo.BODY_1:return"sendbird-label--body-1";case fo.BODY_2:return"sendbird-label--body-2";case fo.BUTTON_1:return"sendbird-label--button-1";case fo.BUTTON_2:return"sendbird-label--button-2";case fo.BUTTON_3:return"sendbird-label--button-3";case fo.CAPTION_1:return"sendbird-label--caption-1";case fo.CAPTION_2:return"sendbird-label--caption-2";case fo.CAPTION_3:return"sendbird-label--caption-3";default:return""}}function Wx(t){switch(t){case po.ONBACKGROUND_1:return"sendbird-label--color-onbackground-1";case po.ONBACKGROUND_2:return"sendbird-label--color-onbackground-2";case po.ONBACKGROUND_3:return"sendbird-label--color-onbackground-3";case po.ONBACKGROUND_4:return"sendbird-label--color-onbackground-4";case po.ONCONTENT_1:return"sendbird-label--color-oncontent-1";case po.ONCONTENT_2:return"sendbird-label--color-oncontent-2";case po.ONCONTENT_3:return"sendbird-label--color-oncontent-3";case po.ONCONTENT_INVERSE_1:return"sendbird-label--color-oncontent-inverse-1";case po.ONCONTENT_INVERSE_3:return"sendbird-label--color-oncontent-inverse-3";case po.PRIMARY:return"sendbird-label--color-primary";case po.ERROR:return"sendbird-label--color-error";case po.SECONDARY_3:return"sendbird-label--color-secondary-3";default:return""}}var jt=k.forwardRef(function(t,n){var e=t.className,r=e===void 0?[]:e,i=t.type,a=t.color,s=t.children,l=s===void 0?null:s,c=t.testID;return O.createElement("span",{className:et(et([],Array.isArray(r)?r:[r],!0),["sendbird-label",VQ(i),Wx(a)],!1).join(" "),ref:n,"data-testid":c},l)}),Ft=fo,pt=po;CS("en");var Vi;(function(t){t.PRIMARY="PRIMARY",t.SECONDARY="SECONDARY",t.DANGER="DANGER",t.DISABLED="DISABLED",t.WARNING="WARNING"})(Vi||(Vi={}));var _h;(function(t){t.BIG="BIG",t.SMALL="SMALL"})(_h||(_h={}));function BQ(t){switch(t){case Vi.PRIMARY:return"sendbird-button--primary";case Vi.SECONDARY:return"sendbird-button--secondary";case Vi.DANGER:return"sendbird-button--danger";case Vi.DISABLED:return"sendbird-button--disabled";case Vi.WARNING:return"sendbird-button--warning";default:return""}}function zQ(t){switch(t){case _h.BIG:return"sendbird-button--big";case _h.SMALL:return"sendbird-button--small";default:return""}}function Ng(t){var n=t.className,e=t.type,r=e===void 0?Vi.PRIMARY:e,i=t.size,a=i===void 0?_h.BIG:i,s=t.children,l=s===void 0?"Button":s,c=t.disabled,d=c===void 0?!1:c,p=t.onClick,g=p===void 0?function(){}:p,_=t.labelType,y=_===void 0?Ft.BUTTON_1:_,C=t.labelColor,w=C===void 0?pt.ONCONTENT_1:C,A=et(et([],Array.isArray(n)?n:[n],!0),["sendbird-button",d?"sendbird-button__disabled":"",BQ(r),zQ(a)],!1).join(" ");return O.createElement("button",{className:A,type:"button",onClick:g,disabled:d},O.createElement(jt,{className:"sendbird-button__text",type:y,color:w},l))}var Ue={ADD:"ADD",ARROW_LEFT:"ARROW_LEFT",ATTACH:"ATTACH",AUDIO_ON_LINED:"AUDIO_ON_LINED",BAN:"BAN",BROADCAST:"BROADCAST",CAMERA:"CAMERA",CHANNELS:"CHANNELS",CHAT:"CHAT",CHAT_FILLED:"CHAT_FILLED",CHEVRON_DOWN:"CHEVRON_DOWN",CHEVRON_RIGHT:"CHEVRON_RIGHT",CLOSE:"CLOSE",COLLAPSE:"COLLAPSE",COPY:"COPY",CREATE:"CREATE",DELETE:"DELETE",DISCONNECTED:"DISCONNECTED",DOCUMENT:"DOCUMENT",DONE:"DONE",DONE_ALL:"DONE_ALL",DOWNLOAD:"DOWNLOAD",EDIT:"EDIT",EMOJI_MORE:"EMOJI_MORE",ERROR:"ERROR",EXPAND:"EXPAND",FILE_AUDIO:"FILE_AUDIO",FILE_DOCUMENT:"FILE_DOCUMENT",FREEZE:"FREEZE",GIF:"GIF",INFO:"INFO",LEAVE:"LEAVE",MARK_AS_UNREAD:"MARK_AS_UNREAD",MEMBERS:"MEMBERS",MESSAGE:"MESSAGE",MODERATIONS:"MODERATIONS",MORE:"MORE",MUTE:"MUTE",NOTIFICATIONS:"NOTIFICATIONS",NOTIFICATIONS_OFF_FILLED:"NOTIFICATIONS_OFF_FILLED",OPERATOR:"OPERATOR",PHOTO:"PHOTO",PLAY:"PLAY",PLUS:"PLUS",QUESTION:"QUESTION",REFRESH:"REFRESH",REPLY:"REPLY",REMOVE:"REMOVE",SEARCH:"SEARCH",SEND:"SEND",SETTINGS_FILLED:"SETTINGS_FILLED",SLIDE_LEFT:"SLIDE_LEFT",SPINNER:"SPINNER",SUPERGROUP:"SUPERGROUP",THREAD:"THREAD",THUMBNAIL_NONE:"THUMBNAIL_NONE",TOGGLE_OFF:"TOGGLE_OFF",TOGGLE_ON:"TOGGLE_ON",USER:"USER",FEEDBACK_LIKE:"FEEDBACK_LIKE",FEEDBACK_DISLIKE:"FEEDBACK_DISLIKE",FLOATING_BUTTON_CLOSE:"FLOATING_BUTTON_CLOSE"},Ri={DEFAULT:"DEFAULT",PRIMARY:"PRIMARY",PRIMARY_2:"PRIMARY_2",SECONDARY:"SECONDARY",SECONDARY_2:"SECONDARY_2",CONTENT:"CONTENT",CONTENT_INVERSE:"CONTENT_INVERSE",CONTENT_INVERSE_3:"CONTENT_INVERSE_3",WHITE:"WHITE",GRAY:"GRAY",THUMBNAIL_ICON:"THUMBNAIL_ICON",SENT:"SENT",READ:"READ",ON_BACKGROUND_1:"ON_BACKGROUND_1",ON_BACKGROUND_2:"ON_BACKGROUND_2",ON_BACKGROUND_3:"ON_BACKGROUND_3",ON_BACKGROUND_4:"ON_BACKGROUND_4",BACKGROUND_3:"BACKGROUND_3",ERROR:"ERROR"};function qQ(t){switch(t){case Ri.PRIMARY:return"sendbird-icon-color--primary";case Ri.PRIMARY_2:return"sendbird-icon-color--primary-2";case Ri.SECONDARY:return"sendbird-icon-color--secondary";case Ri.SECONDARY_2:return"sendbird-icon-color--secondary-2";case Ri.CONTENT:return"sendbird-icon-color--content";case Ri.CONTENT_INVERSE:return"sendbird-icon-color--content-inverse";case Ri.CONTENT_INVERSE_3:return"sendbird-icon-color--content-inverse-3";case Ri.WHITE:return"sendbird-icon-color--white";case Ri.GRAY:return"sendbird-icon-color--gray";case Ri.THUMBNAIL_ICON:return"sendbird-icon-color--thumbnail-icon";case Ri.SENT:return"sendbird-icon-color--sent";case Ri.READ:return"sendbird-icon-color--read";case Ri.ON_BACKGROUND_1:return"sendbird-icon-color--on-background-1";case Ri.ON_BACKGROUND_2:return"sendbird-icon-color--on-background-2";case Ri.ON_BACKGROUND_3:return"sendbird-icon-color--on-background-3";case Ri.ON_BACKGROUND_4:return"sendbird-icon-color--on-background-4";case Ri.BACKGROUND_3:return"sendbird-icon-color--background-3";case Ri.ERROR:return"sendbird-icon-color--error";default:return""}}function WQ(t){switch(t){case Ue.ADD:return"sendbird-icon-add";case Ue.ARROW_LEFT:return"sendbird-icon-arrow-left";case Ue.ATTACH:return"sendbird-icon-attach";case Ue.AUDIO_ON_LINED:return"sendbird-icon-audio-on-lined";case Ue.BAN:return"sendbird-icon-ban";case Ue.BROADCAST:return"sendbird-icon-broadcast";case Ue.CAMERA:return"sendbird-icon-camera";case Ue.CHANNELS:return"sendbird-icon-channels";case Ue.CHAT:return"sendbird-icon-chat";case Ue.CHAT_FILLED:return"sendbird-icon-chat-filled";case Ue.CHEVRON_DOWN:return"sendbird-icon-chevron-down";case Ue.CHEVRON_RIGHT:return"sendbird-icon-chevron-right";case Ue.CLOSE:return"sendbird-icon-close";case Ue.COLLAPSE:return"sendbird-icon-collapse";case Ue.COPY:return"sendbird-icon-copy";case Ue.CREATE:return"sendbird-icon-create";case Ue.DELETE:return"sendbird-icon-delete";case Ue.DISCONNECTED:return"sendbird-icon-disconnected";case Ue.DOCUMENT:return"sendbird-icon-document";case Ue.DONE:return"sendbird-icon-done";case Ue.DONE_ALL:return"sendbird-icon-done-all";case Ue.DOWNLOAD:return"sendbird-icon-down-load";case Ue.EDIT:return"sendbird-icon-edit";case Ue.EMOJI_MORE:return"sendbird-icon-emoji-more";case Ue.ERROR:return"sendbird-icon-error";case Ue.EXPAND:return"sendbird-icon-expand";case Ue.FILE_AUDIO:return"sendbird-icon-file-audio";case Ue.FILE_DOCUMENT:return"sendbird-icon-file-document";case Ue.FREEZE:return"sendbird-icon-freeze";case Ue.GIF:return"sendbird-icon-gif";case Ue.INFO:return"sendbird-icon-info";case Ue.LEAVE:return"sendbird-icon-leave";case Ue.MARK_AS_UNREAD:return"sendbird-icon-mark-as-unread";case Ue.MEMBERS:return"sendbird-icon-members";case Ue.MESSAGE:return"sendbird-icon-message";case Ue.MODERATIONS:return"sendbird-icon-moderations";case Ue.MORE:return"sendbird-icon-more";case Ue.MUTE:return"sendbird-icon-mute";case Ue.NOTIFICATIONS:return"sendbird-icon-notifications";case Ue.NOTIFICATIONS_OFF_FILLED:return"sendbird-icon-notifications-off-filled";case Ue.OPERATOR:return"sendbird-icon-operator";case Ue.PHOTO:return"sendbird-icon-photo";case Ue.PLAY:return"sendbird-icon-play";case Ue.PLUS:return"sendbird-iconn-plus";case Ue.QUESTION:return"sendbird-icon-question";case Ue.REFRESH:return"sendbird-icon-refresh";case Ue.REMOVE:return"sendbird-icon-remove";case Ue.REPLY:return"sendbird-icon-reply";case Ue.SEARCH:return"sendbird-icon-search";case Ue.SEND:return"sendbird-icon-send";case Ue.SETTINGS_FILLED:return"sendbird-icon-settings-filled";case Ue.SPINNER:return"sendbird-icon-spinner";case Ue.SUPERGROUP:return"sendbird-icon-supergroup";case Ue.THREAD:return"sendbird-icon-thread";case Ue.THUMBNAIL_NONE:return"sendbird-icon-thumbnail-none";case Ue.TOGGLE_OFF:return"sendbird-icon-toggle-off";case Ue.TOGGLE_ON:return"sendbird-icon-toggle-on";case Ue.USER:return"sendbird-icon-user";case Ue.FEEDBACK_LIKE:return"sendbird-icon-feedback-like";case Ue.FEEDBACK_DISLIKE:return"sendbird-icon-feedback-dislike";default:return"sendbird-icon-unknown"}}var hO;function UN(){return UN=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},UN.apply(null,arguments)}const KQ=t=>k.createElement("svg",UN({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),hO||(hO=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M50.667 5.333a8 8 0 0 1 8 8v37.334a8 8 0 0 1-8 8H13.333a8 8 0 0 1-8-8V13.333a8 8 0 0 1 8-8zm0 5.334H13.333a2.667 2.667 0 0 0-2.666 2.666v37.334a2.667 2.667 0 0 0 2.666 2.666h37.334a2.667 2.667 0 0 0 2.666-2.666V13.333a2.667 2.667 0 0 0-2.666-2.666m-18.667 8a2.667 2.667 0 0 1 2.649 2.355l.018.311v8h8a2.667 2.667 0 0 1 .311 5.316l-.311.018h-8v8a2.667 2.667 0 0 1-5.316.311l-.018-.311v-8h-8a2.667 2.667 0 0 1-.311-5.316l.311-.018h8v-8A2.667 2.667 0 0 1 32 18.667",className:"icon-add_svg__fill"})));var fO;function LN(){return LN=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},LN.apply(null,arguments)}const YQ=t=>k.createElement("svg",LN({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),fO||(fO=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M33.886 8.781a2.67 2.67 0 0 1 .221 3.52l-.221.251-16.78 16.781H56a2.667 2.667 0 0 1 .311 5.316l-.311.018-38.895-.001 16.78 16.782a2.666 2.666 0 0 1 .222 3.52l-.221.251a2.67 2.67 0 0 1-3.52.222l-.252-.222L8.781 33.886a2.67 2.67 0 0 1-.222-3.52l.222-.252L30.114 8.781a2.67 2.67 0 0 1 3.772 0",className:"icon-arrow-left_svg__fill"})));var pO;function FN(){return FN=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},FN.apply(null,arguments)}const QQ=t=>k.createElement("svg",FN({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),pO||(pO=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"m55.334 28.926-24.506 23.34c-5.222 4.973-13.74 4.973-18.962 0-5.149-4.903-5.149-12.797 0-17.7l24.506-23.34c3.138-2.988 8.278-2.988 11.416 0 3.064 2.919 3.064 7.594 0 10.513L23.255 45.077c-1.055 1.005-2.815 1.005-3.87.001-.98-.933-.98-2.39 0-3.325l22.64-21.535a2.667 2.667 0 0 0-3.676-3.864L15.709 37.89a7.58 7.58 0 0 0-.001 11.05c3.113 2.966 8.11 2.966 11.224 0l24.533-23.338c5.272-5.021 5.272-13.217 0-18.238-5.197-4.95-13.573-4.95-18.77 0L8.187 30.704c-7.356 7.005-7.356 18.419 0 25.424 7.281 6.935 19.036 6.935 26.318 0l24.506-23.34a2.666 2.666 0 1 0-3.678-3.862z",className:"icon-attach_svg__fill"})));var mO,gO;function HN(){return HN=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},HN.apply(null,arguments)}const $Q=t=>k.createElement("svg",HN({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 64 64"},t),mO||(mO=k.createElement("g",{clipPath:"url(#icon-audio-on-lined_svg__a)"},k.createElement("path",{d:"M32 0C26.11 0 21.333 4.776 21.333 10.667V32c0 5.891 4.776 10.667 10.667 10.667S42.667 37.89 42.667 32V10.667C42.667 4.776 37.89 0 32 0m-5.333 10.667a5.333 5.333 0 0 1 10.666 0V32a5.333 5.333 0 0 1-10.666 0z",className:"icon-audio-on-lined_svg__fill",clipRule:"evenodd"}),k.createElement("path",{d:"M16 26.667a2.667 2.667 0 1 0-5.333 0V32c0 10.879 8.143 19.856 18.666 21.168v5.499h-8a2.667 2.667 0 0 0 0 5.333h21.334a2.667 2.667 0 1 0 0-5.333h-8v-5.499C45.19 51.856 53.333 42.88 53.333 32v-5.333a2.667 2.667 0 1 0-5.333 0V32c0 8.837-7.163 16-16 16s-16-7.163-16-16z",className:"icon-audio-on-lined_svg__fill"}))),gO||(gO=k.createElement("defs",null,k.createElement("clipPath",{id:"icon-audio-on-lined_svg__a"},k.createElement("path",{fill:"#fff",d:"M0 0h64v64H0z"})))));var vO;function jN(){return jN=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},jN.apply(null,arguments)}const XQ=t=>k.createElement("svg",jN({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),vO||(vO=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333 2.667 48.2 2.667 32 15.8 2.667 32 2.667M32 8C18.745 8 8 18.745 8 32s10.745 24 24 24 24-10.745 24-24S45.255 8 32 8m12.333 21.333a1 1 0 0 1 1 1v3.334a1 1 0 0 1-1 1H19.667a1 1 0 0 1-1-1v-3.334a1 1 0 0 1 1-1z",className:"icon-ban_svg__fill"})));var _O;function GN(){return GN=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},GN.apply(null,arguments)}const ZQ=t=>k.createElement("svg",GN({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),_O||(_O=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M58.545 5.498q.121.389.122.796v46.079a2.666 2.666 0 0 1-3.462 2.546l-17.951-5.61c-.645 5.273-5.14 9.358-10.587 9.358C20.776 58.667 16 53.89 16 48v-5.334h-5.333a8 8 0 0 1-7.997-7.75l-.003-.25V24a8 8 0 0 1 8-8H16L55.205 3.749a2.665 2.665 0 0 1 3.34 1.75zM21.333 44.587V48a5.333 5.333 0 0 0 10.652.398L32 47.92zm32-34.667-32 9.997v18.83l32 9.997zM16 21.333h-5.333a2.67 2.67 0 0 0-2.65 2.356L8 24v10.667a2.667 2.667 0 0 0 2.667 2.666H16z",className:"icon-broadcast_svg__fill"})));var yO;function VN(){return VN=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},VN.apply(null,arguments)}const JQ=t=>k.createElement("svg",VN({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),yO||(yO=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M40 5.333c.892 0 1.724.446 2.219 1.188l4.541 6.812H56a8 8 0 0 1 7.986 7.53l.014.47v29.334a8 8 0 0 1-8 8H8a8 8 0 0 1-8-8V21.333a8 8 0 0 1 8-8h9.237l4.544-6.812a2.67 2.67 0 0 1 1.888-1.167l.331-.02zm-1.43 5.334H25.428l-4.542 6.812a2.66 2.66 0 0 1-1.887 1.167l-.331.02H8a2.67 2.67 0 0 0-2.667 2.667v29.334A2.667 2.667 0 0 0 8 53.333h48a2.667 2.667 0 0 0 2.667-2.666V21.333A2.667 2.667 0 0 0 56 18.667H45.333a2.67 2.67 0 0 1-2.218-1.188zM32 21.333c7.364 0 13.333 5.97 13.333 13.334S39.363 48 32 48s-13.333-5.97-13.333-13.333S24.637 21.333 32 21.333m0 5.334a8 8 0 1 0 0 16 8 8 0 0 0 0-16",className:"icon-camera_svg__fill"})));var bO;function BN(){return BN=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},BN.apply(null,arguments)}const e$=t=>k.createElement("svg",BN({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),bO||(bO=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"m42.65 5.333.311.017a2.666 2.666 0 0 1 2.373 2.633l-.017.311-1.45 13.04h9.466a2.667 2.667 0 0 1 .311 5.315l-.31.018H43.271l-1.184 10.666h11.245a2.667 2.667 0 0 1 .312 5.316l-.31.018H41.495l-1.512 13.627a2.667 2.667 0 0 1-5.318-.277l.017-.311 1.448-13.04H25.496l-1.512 13.628a2.667 2.667 0 0 1-5.318-.277l.017-.311 1.448-13.04h-9.464a2.667 2.667 0 0 1-.311-5.315l.31-.018h10.057l1.186-10.667H10.667a2.667 2.667 0 0 1-.311-5.315l.31-.018h11.835l1.515-13.627a2.67 2.67 0 0 1 2.634-2.373l.311.017a2.666 2.666 0 0 1 2.373 2.633l-.017.311-1.45 13.04H38.5l1.515-13.628a2.67 2.67 0 0 1 2.634-2.373zm-5.927 32 1.186-10.667H27.272l-1.184 10.667z",className:"icon-channels_svg__fill"})));var EO;function zN(){return zN=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},zN.apply(null,arguments)}const t$=t=>k.createElement("svg",zN({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),EO||(EO=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58q-8.947 2.868-12.504 1.981-4.198-1.047-1.657-3.663 1.757-2.094 2.928-5.234.934-2.502-.737-7A29.15 29.15 0 0 1 2.666 32C2.667 15.8 15.8 2.667 32 2.667M32 8C18.745 8 8 18.745 8 32c0 3.5.747 6.88 2.168 9.978l.405.837.137.271.106.285c1.517 4.085 1.89 7.622.734 10.72l-.382.972-.192.433.235-.05a62 62 0 0 0 4.886-1.363l1.721-.568 2.04-.696 1.95.917A23.9 23.9 0 0 0 32 56c13.255 0 24-10.745 24-24S45.255 8 32 8",className:"icon-chat_svg__fill"})));var CO;function qN(){return qN=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},qN.apply(null,arguments)}const n$=t=>k.createElement("svg",qN({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),CO||(CO=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58q-8.947 2.868-12.504 1.981-4.198-1.047-1.657-3.663 1.757-2.094 2.928-5.234.934-2.502-.737-7A29.15 29.15 0 0 1 2.666 32C2.667 15.8 15.8 2.667 32 2.667",className:"icon-chat-filled_svg__fill"})));var wO;function WN(){return WN=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},WN.apply(null,arguments)}const r$=t=>k.createElement("svg",WN({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),wO||(wO=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M16.121 21.879a3 3 0 0 0-4.242 0 3 3 0 0 0 0 4.242l18 18a3 3 0 0 0 4.242 0l18-18a3 3 0 0 0 0-4.242 3 3 0 0 0-4.242 0L32 37.757z",className:"icon-chevron-down_svg__fill"})));var NO;function KN(){return KN=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},KN.apply(null,arguments)}const i$=t=>k.createElement("svg",KN({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),NO||(NO=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M22.114 46.114a2.668 2.668 0 0 0 3.772 3.772l16-16a2.67 2.67 0 0 0 0-3.772l-16-16a2.668 2.668 0 0 0-3.772 3.772L36.23 32z",className:"icon-chevron-right_svg__fill"})));var TO;function YN(){return YN=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},YN.apply(null,arguments)}const a$=t=>k.createElement("svg",YN({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),TO||(TO=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M52.552 11.448a2.666 2.666 0 0 1 .222 3.52l-.222.251-16.781 16.78 16.781 16.782a2.665 2.665 0 0 1 0 3.771 2.666 2.666 0 0 1-3.52.222l-.251-.222L32 35.771 15.219 52.552a2.665 2.665 0 0 1-3.771 0 2.666 2.666 0 0 1-.222-3.52l.222-.251L28.228 32l-16.78-16.781a2.665 2.665 0 0 1 0-3.771 2.666 2.666 0 0 1 3.52-.222l.251.222 16.78 16.78 16.782-16.78a2.665 2.665 0 0 1 3.771 0",className:"icon-close_svg__fill"})));var SO;function QN(){return QN=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},QN.apply(null,arguments)}const s$=t=>k.createElement("svg",QN({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),SO||(SO=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M16 8a2.667 2.667 0 0 0-2.649 2.356l-.018.31v42.667a2.667 2.667 0 0 0 5.316.311l.018-.31V34.666h25.56l-6.113 6.114a2.67 2.67 0 0 0-.221 3.52l.221.251a2.666 2.666 0 0 0 3.52.222l.252-.222 10.666-10.666a2.666 2.666 0 0 0 .222-3.52l-.222-.252-10.666-10.666a2.666 2.666 0 0 0-3.993 3.52l.221.251 6.113 6.114h-25.56V10.667A2.667 2.667 0 0 0 16 8",className:"icon-collapse_svg__fill"})));var AO;function $N(){return $N=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},$N.apply(null,arguments)}const o$=t=>k.createElement("svg",$N({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),AO||(AO=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M53.333 21.333a8 8 0 0 1 8 8v24a8 8 0 0 1-8 8h-24a8 8 0 0 1-8-8v-24a8 8 0 0 1 8-8zm0 5.334h-24a2.667 2.667 0 0 0-2.666 2.666v24A2.667 2.667 0 0 0 29.333 56h24A2.667 2.667 0 0 0 56 53.333v-24a2.667 2.667 0 0 0-2.667-2.666m-18.666-24a8 8 0 0 1 7.986 7.53l.014.47v2.666a2.667 2.667 0 0 1-5.316.311l-.018-.31v-2.667a2.67 2.67 0 0 0-2.355-2.65L34.667 8h-24a2.67 2.67 0 0 0-2.65 2.356l-.017.31v24a2.67 2.67 0 0 0 2.356 2.65l.31.017h2.667a2.667 2.667 0 0 1 .311 5.316l-.31.018h-2.667a8 8 0 0 1-7.987-7.53l-.013-.47v-24c0-4.26 3.33-7.743 7.53-7.987l.47-.013z",className:"icon-copy_svg__fill"})));var IO;function XN(){return XN=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},XN.apply(null,arguments)}const l$=t=>k.createElement("svg",XN({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),IO||(IO=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58q-8.947 2.868-12.504 1.981-4.198-1.047-1.657-3.663 1.757-2.094 2.928-5.234.934-2.502-.737-7A29.15 29.15 0 0 1 2.666 32C2.667 15.8 15.8 2.667 32 2.667M32 8C18.745 8 8 18.745 8 32c0 3.5.747 6.88 2.168 9.978l.405.837.137.271.106.285c1.517 4.085 1.89 7.622.734 10.72l-.382.972-.192.433.235-.05a62 62 0 0 0 4.886-1.363l1.721-.568 2.04-.696 1.95.917A23.9 23.9 0 0 0 32 56c13.255 0 24-10.745 24-24S45.255 8 32 8m2.667 16v5.333H40c3.556 0 3.556 5.334 0 5.334h-5.333V40c0 3.556-5.334 3.556-5.334 0v-5.333H24c-3.556 0-3.556-5.334 0-5.334h5.333V24c0-3.556 5.334-3.556 5.334 0",className:"icon-create_svg__fill"})));var MO;function ZN(){return ZN=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},ZN.apply(null,arguments)}const u$=t=>k.createElement("svg",ZN({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),MO||(MO=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M37.333 2.667c4.26 0 7.743 3.33 7.987 7.53l.013.47v2.666H56a2.667 2.667 0 0 1 .311 5.316l-.311.018h-2.668l.001 34.666c0 4.26-3.33 7.743-7.53 7.987l-.47.013H18.667a8 8 0 0 1-7.987-7.53l-.013-.47V18.667H8a2.667 2.667 0 0 1-.311-5.316L8 13.333h10.666v-2.666a8 8 0 0 1 7.53-7.987l.47-.013zm10.666 16H16v34.666a2.67 2.67 0 0 0 2.356 2.65l.31.017h26.667a2.67 2.67 0 0 0 2.65-2.356l.017-.31zm-21.332 8a2.667 2.667 0 0 1 2.648 2.355l.018.311v16a2.667 2.667 0 0 1-5.316.311l-.017-.31v-16a2.667 2.667 0 0 1 2.667-2.667m10.666 0a2.67 2.67 0 0 1 2.65 2.355l.017.311v16a2.667 2.667 0 0 1-5.315.311l-.018-.31v-16a2.667 2.667 0 0 1 2.666-2.667m0-18.667H26.667a2.67 2.67 0 0 0-2.65 2.356l-.017.31v2.667h16v-2.666a2.67 2.67 0 0 0-2.356-2.65L37.334 8z",className:"icon-delete_svg__fill"})));var OO;function JN(){return JN=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},JN.apply(null,arguments)}const c$=t=>k.createElement("svg",JN({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),OO||(OO=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"m54.534 6.069-.248.217-9.736 9.735-.04.04-9.573 9.573q-.226.178-.405.404L6.286 54.286a2.423 2.423 0 0 0 3.18 3.645l.248-.217 13.374-13.373a2.42 2.42 0 0 0 1.88-.401 12.12 12.12 0 0 1 14.04 0 2.424 2.424 0 1 0 2.808-3.952 16.95 16.95 0 0 0-11.303-3.072l6.743-6.744a24.1 24.1 0 0 1 10.159 5.021 2.424 2.424 0 0 0 3.11-3.719 29 29 0 0 0-9.34-5.23l5.633-5.634a36.2 36.2 0 0 1 9.225 5.934 2.425 2.425 0 0 0 3.211-3.633 41 41 0 0 0-8.796-5.941l7.256-7.256a2.423 2.423 0 0 0-3.18-3.645m-35.04 21.474a29 29 0 0 0-6.032 3.942 2.424 2.424 0 0 0 3.137 3.697 24 24 0 0 1 5.022-3.282 2.425 2.425 0 0 0-2.127-4.357M4.748 22.909a2.424 2.424 0 0 0 3.207 3.636 36.36 36.36 0 0 1 26.978-8.977 2.424 2.424 0 0 0 .389-4.832A41.2 41.2 0 0 0 4.748 22.909",className:"icon-disconnected_svg__fill"})));var kO;function eT(){return eT=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},eT.apply(null,arguments)}const d$=t=>k.createElement("svg",eT({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),kO||(kO=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M37.333 2.667a3 3 0 0 1 .274.014l.085.01.058.008q.07.01.141.026l.029.007q.075.016.146.037l.034.01q.357.107.663.303l.034.022q.053.034.104.072l.057.043q.045.033.085.068.091.075.176.16l-.126-.117q.075.065.143.135L55.21 19.438q.07.07.134.143l.035.04q.04.047.076.096l.04.054.07.1.024.038c.16.253.279.535.347.836l.01.048q.014.064.024.13l.006.048.007.051.004.041q.014.135.014.27v32a8 8 0 0 1-8 8H16a8 8 0 0 1-8-8V10.667a8 8 0 0 1 8-8zM34.666 8H16a2.667 2.667 0 0 0-2.667 2.667v42.666A2.667 2.667 0 0 0 16 56h32a2.667 2.667 0 0 0 2.667-2.667L50.666 24H37.333a2.667 2.667 0 0 1-2.648-2.356l-.018-.31zm12.227 10.667-6.894-6.894.001 6.894z",className:"icon-document_svg__fill"})));var RO;function tT(){return tT=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},tT.apply(null,arguments)}const h$=t=>k.createElement("svg",tT({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),RO||(RO=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M12.552 31.448a2.665 2.665 0 1 0-3.771 3.771l13.333 13.333a2.666 2.666 0 0 0 3.772 0L55.219 19.22a2.667 2.667 0 0 0-3.771-3.771L24 42.895z",className:"icon-done_svg__fill"})));var DO;function nT(){return nT=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},nT.apply(null,arguments)}const f$=t=>k.createElement("svg",nT({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),DO||(DO=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M5.886 31.448 19.219 44.78a2.667 2.667 0 0 1-3.771 3.771L2.114 35.22a2.667 2.667 0 0 1 3.772-3.771zm52.228-16a2.666 2.666 0 1 1 3.772 3.771L32.552 48.552a2.665 2.665 0 0 1-3.771 0L15.448 35.22a2.665 2.665 0 0 1 0-3.771 2.665 2.665 0 0 1 3.771 0l11.448 11.447zm-9.562 0a2.665 2.665 0 0 1 0 3.771L32.556 35.215a2.665 2.665 0 0 1-3.771 0 2.664 2.664 0 0 1 0-3.77L44.78 15.447a2.665 2.665 0 0 1 3.771 0z",className:"icon-done-all_svg__fill"})));var xO;function rT(){return rT=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},rT.apply(null,arguments)}const p$=t=>k.createElement("svg",rT({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),xO||(xO=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M56 42.667a2.667 2.667 0 0 1 2.649 2.355l.018.311v8c0 4.26-3.33 7.743-7.53 7.987l-.47.013H13.333a8 8 0 0 1-7.986-7.53l-.014-.47v-8a2.667 2.667 0 0 1 5.316-.311l.018.311v8a2.67 2.67 0 0 0 2.355 2.65l.311.017h37.334a2.667 2.667 0 0 0 2.648-2.356l.018-.31v-8A2.667 2.667 0 0 1 56 42.667m-36.552-8.781a2.666 2.666 0 0 1 3.52-3.993l.251.221 6.114 6.114V5.333a2.667 2.667 0 0 1 5.316-.311l.018.311v30.894l6.114-6.113a2.67 2.67 0 0 1 3.52-.221l.251.221a2.666 2.666 0 0 1 .222 3.52l-.222.252-10.658 10.657a2 2 0 0 1-.135.128l.127-.119a3 3 0 0 1-.195.176l-.056.045-.086.064-.056.04-.086.056-.06.036-.081.046-.079.04a3 3 0 0 1-.14.065l-.09.036q-.034.014-.067.025l-.09.03-.063.019q-.064.018-.13.034l-.013.003-.144.028-.064.01q-.045.008-.092.012l-.084.008-.103.006-.069.002h-.095q-.042 0-.082-.003l.139.003q-.126 0-.249-.011l-.061-.007-.092-.012-.09-.015-.118-.025-.04-.01a3 3 0 0 1-.34-.11l-.015-.006q-.074-.03-.145-.063l-.042-.02L30.71 45l-.067-.039q-.045-.026-.087-.054l-.062-.041q-.045-.03-.088-.063l-.04-.03-.008-.007a3 3 0 0 1-.251-.223z",className:"icon-download_svg__fill"})));var PO;function iT(){return iT=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},iT.apply(null,arguments)}const m$=t=>k.createElement("svg",iT({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 65 65"},t),PO||(PO=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M56 56a2.667 2.667 0 0 1 .311 5.315l-.311.018H8a2.667 2.667 0 0 1-.311-5.316L8 56zM35.448 3.448a2.665 2.665 0 0 1 3.771 0l10.667 10.666a2.67 2.67 0 0 1 0 3.772L20.552 47.219c-.5.5-1.178.781-1.885.781H8a2.667 2.667 0 0 1-2.667-2.667V34.667c0-.708.281-1.386.781-1.886zm1.885 5.659L10.667 35.77v6.896h6.89L44.227 16z",className:"icon-edit_svg__fill"})));var UO;function aT(){return aT=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},aT.apply(null,arguments)}const g$=t=>k.createElement("svg",aT({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),UO||(UO=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32.097 3.22c2.65 0 5.255.357 7.763 1.054a2.134 2.134 0 0 1-1.144 4.111 24.7 24.7 0 0 0-6.619-.899c-13.603 0-24.63 11.027-24.63 24.63s11.027 24.63 24.63 24.63 24.63-11.027 24.63-24.63c0-2.227-.295-4.413-.87-6.518a2.13 2.13 0 0 1 1.494-2.62 2.13 2.13 0 0 1 2.62 1.494 29 29 0 0 1 1.023 7.644c0 15.96-12.938 28.897-28.897 28.897-15.96 0-28.897-12.937-28.897-28.897S16.138 3.22 32.097 3.22m10.705 34.792a2.133 2.133 0 0 1 2.024 2.808c-1.873 5.623-6.937 9.488-12.729 9.488s-10.856-3.865-12.73-9.488a2.134 2.134 0 0 1 1.875-2.803l.15-.005zm-3.477 4.266H24.867l.294.382c1.539 1.887 3.718 3.113 6.115 3.342l.314.024.507.015c2.617 0 5.037-1.188 6.743-3.151l.193-.23zM21.392 21.954c1.087 0 1.985.814 2.116 1.866l.017.267v5.353a2.133 2.133 0 0 1-4.25.268l-.017-.268v-5.353c0-1.178.955-2.133 2.134-2.133m21.41 0c1.088 0 1.985.814 2.117 1.866l.017.267v5.353a2.133 2.133 0 0 1-4.25.268l-.017-.268v-5.353c0-1.178.955-2.133 2.133-2.133M54.853 0a.8.8 0 0 1 .8.8v7.786h7.76a.8.8 0 0 1 .8.8v2.667a.8.8 0 0 1-.8.8h-7.76v7.758a.8.8 0 0 1-.8.8h-2.666a.8.8 0 0 1-.8-.8v-7.758h-7.785a.8.8 0 0 1-.8-.8V9.387a.8.8 0 0 1 .8-.8l7.784-.001V.8a.8.8 0 0 1 .8-.8z",className:"icon-emoji-more_svg__fill"})));var LO;function sT(){return sT=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},sT.apply(null,arguments)}const v$=t=>k.createElement("svg",sT({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),LO||(LO=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 5.06a8 8 0 0 1 6.561 3.424l.287.439 22.608 37.744a8 8 0 0 1 .022 7.962 8 8 0 0 1-6.356 4.014l-.535.024H9.384a8 8 0 0 1-6.862-4.038 8.01 8.01 0 0 1-.226-7.493l.27-.506L25.16 8.91A8 8 0 0 1 32 5.06m0 5.333c-.816 0-1.58.372-2.076.99l-.196.28-22.565 37.67a2.67 2.67 0 0 0 1.909 3.973l.341.027h45.144a2.67 2.67 0 0 0 2.45-3.659l-.148-.304L34.28 11.676A2.67 2.67 0 0 0 32 10.393m0 32.274A2.667 2.667 0 1 1 32 48a2.667 2.667 0 0 1 0-5.333m0-21.334a2.667 2.667 0 0 1 2.649 2.356l.018.311v10.667a2.667 2.667 0 0 1-5.316.311l-.018-.311V24A2.667 2.667 0 0 1 32 21.333",className:"icon-error_svg__fill"})));var FO;function oT(){return oT=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},oT.apply(null,arguments)}const _$=t=>k.createElement("svg",oT({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),FO||(FO=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M48 8a2.667 2.667 0 0 1 2.649 2.356l.018.31V32l-.001.027v21.306a2.667 2.667 0 0 1-5.315.311l-.018-.31V34.665H19.772l6.114 6.115a2.67 2.67 0 0 1 .221 3.52l-.221.251a2.666 2.666 0 0 1-3.52.222l-.252-.222-10.666-10.666a2.666 2.666 0 0 1-.222-3.52l.222-.252 10.666-10.666a2.666 2.666 0 0 1 3.993 3.52l-.221.251-6.113 6.114h25.56V10.667A2.667 2.667 0 0 1 48 8",className:"icon-expand_svg__fill"})));var HO;function lT(){return lT=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},lT.apply(null,arguments)}const y$=t=>k.createElement("svg",lT({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),HO||(HO=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M30.52 12.51c1.685-1.226 4.139-.103 4.139 1.893v35.194c0 1.996-2.454 3.119-4.138 1.893l-12.45-9.909H7.898c-1.416 0-2.564-1.074-2.564-2.399V24.818c0-1.325 1.148-2.4 2.564-2.4h10.175zm20.427.163c10.293 10.667 10.293 27.987 0 38.654a2.137 2.137 0 0 1-3.156-.047c-.86-.942-.84-2.448.044-3.364 8.49-8.799 8.49-23.033 0-31.832-.884-.916-.904-2.422-.044-3.364a2.137 2.137 0 0 1 3.156-.047m-8.492 8.799c5.597 5.8 5.597 15.231 0 21.031a2.136 2.136 0 0 1-3.156-.046c-.86-.942-.84-2.448.044-3.364 3.794-3.932 3.794-10.279 0-14.211-.884-.916-.904-2.422-.044-3.363a2.136 2.136 0 0 1 3.156-.047",className:"icon-file-audio_svg__fill"})));var jO;function uT(){return uT=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},uT.apply(null,arguments)}const b$=t=>k.createElement("svg",uT({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),jO||(jO=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M39.414 6.4a2.4 2.4 0 0 1 1.71.701l12.642 12.75c.407.41.634.953.634 1.516v29.765c0 3.542-4.342 6.468-8 6.468H16.16c-3.658 0-6.4-2.926-6.4-6.468L9.6 12.868c0-3.542 2.902-6.468 6.56-6.468zm3.331 35.173-21.49.027-.147.005c-1.066.08-1.908 1.014-1.908 2.155 0 1.193.92 2.16 2.055 2.16l21.49-.027.147-.005c1.066-.08 1.908-1.014 1.908-2.155 0-1.193-.92-2.16-2.055-2.16m0-8.533-21.49.027-.147.005c-1.066.08-1.908 1.014-1.908 2.155 0 1.193.92 2.16 2.055 2.16l21.49-.027.147-.005c1.066-.08 1.908-1.014 1.908-2.155 0-1.193-.92-2.16-2.055-2.16m-11.807-8.507h-9.6l-.153.006a2.15 2.15 0 0 0-1.985 2.154c0 1.193.957 2.16 2.138 2.16h9.6l.152-.005a2.15 2.15 0 0 0 1.985-2.155c0-1.193-.957-2.16-2.137-2.16",className:"icon-file-document_svg__fill"})));var GO;function cT(){return cT=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},cT.apply(null,arguments)}const E$=t=>k.createElement("svg",cT({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),GO||(GO=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"m41.636 3.226.251.222a2.67 2.67 0 0 1 .222 3.52l-.222.251-7.219 7.218V27.38l11.209-6.472 2.643-9.86a2.667 2.667 0 0 1 5.218 1.051l-.067.329-2.237 8.35 8.352 2.24a2.67 2.67 0 0 1 1.952 2.938l-.067.328a2.67 2.67 0 0 1-2.937 1.952l-.329-.066-9.861-2.643L37.334 32l11.209 6.47 9.862-2.64.329-.067a2.67 2.67 0 0 1 2.937 1.952l.067.328a2.67 2.67 0 0 1-1.952 2.938l-8.353 2.237 2.238 8.353.067.329a2.666 2.666 0 0 1-5.218 1.052l-2.643-9.861-11.209-6.472v12.944l7.219 7.218a2.667 2.667 0 0 1-3.52 3.993l-.251-.222L32 54.437l-6.114 6.115a2.666 2.666 0 0 1-3.52.222l-.251-.222a2.666 2.666 0 0 1-.222-3.52l.222-.251 7.218-7.22V36.62l-11.209 6.47-2.642 9.863a2.666 2.666 0 0 1-5.218-1.052l.067-.329 2.236-8.351-8.35-2.24a2.665 2.665 0 0 1-1.953-2.937l.067-.328a2.665 2.665 0 0 1 2.937-1.952l.329.066 9.861 2.642L26.667 32l-11.209-6.472-9.86 2.643-.329.066a2.665 2.665 0 0 1-2.937-1.952l-.067-.328a2.67 2.67 0 0 1 1.952-2.938l8.35-2.239-2.235-8.351-.067-.329a2.667 2.667 0 0 1 5.218-1.052l2.642 9.862 11.209 6.47V14.439L22.116 7.22a2.665 2.665 0 0 1 0-3.771 2.666 2.666 0 0 1 3.52-.222l.251.222 6.114 6.112 6.115-6.112a2.666 2.666 0 0 1 3.52-.222z",className:"icon-freeze_svg__fill"})));var VO;function dT(){return dT=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},dT.apply(null,arguments)}const C$=t=>k.createElement("svg",dT({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),VO||(VO=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M16.664 45.333q3.233 0 5.89-.953 2.658-.954 4.113-2.683V31.34h-10.29v3.94h4.902v4.474q-1.292 1.284-4.327 1.283-3.017 0-4.58-2.085-1.561-2.085-1.562-6.168v-1.657q.018-4.047 1.455-6.097t4.184-2.05q2.155 0 3.385 1.034t1.59 3.262h5.243q-.486-4.206-3.107-6.408t-7.273-2.201q-3.34 0-5.827 1.506t-3.807 4.35q-1.32 2.843-1.32 6.728v1.765q.036 3.78 1.428 6.578 1.392 2.797 3.95 4.269 2.56 1.47 5.953 1.47m20.67 0V18.667H32v26.666h5.333zm10.396 0V34.436h9.721v-4.432H47.73v-6.887h10.937v-4.45h-16v26.666z",className:"icon-gif_svg__fill"})));var BO;function hT(){return hT=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},hT.apply(null,arguments)}const w$=t=>k.createElement("svg",hT({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),BO||(BO=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333 2.667 48.2 2.667 32 15.8 2.667 32 2.667M32 8C18.745 8 8 18.745 8 32s10.745 24 24 24 24-10.745 24-24S45.255 8 32 8m1.667 21.333a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1h-3.334a1 1 0 0 1-1-1v-14a1 1 0 0 1 1-1zm-1.667-8a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334",className:"icon-info_svg__fill"})));var zO;function fT(){return fT=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},fT.apply(null,arguments)}const N$=t=>k.createElement("svg",fT({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),zO||(zO=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 5.333a2.667 2.667 0 0 1 .311 5.316l-.311.018H10.667a2.67 2.67 0 0 0-2.65 2.355L8 13.333v37.334a2.667 2.667 0 0 0 2.356 2.648l.31.018H32a2.667 2.667 0 0 1 .311 5.316l-.311.018H10.667a8 8 0 0 1-7.987-7.53l-.013-.47V13.333a8 8 0 0 1 7.53-7.986l.47-.014zm17.634 13.893.252.222 10.666 10.666a2.666 2.666 0 0 1 .222 3.52l-.222.252-10.666 10.666a2.666 2.666 0 0 1-3.993-3.52l.221-.251 4.78-4.782L20 36a2.667 2.667 0 0 1-.311-5.315l.311-.018h33.56l-7.446-7.448a2.67 2.67 0 0 1-.221-3.52l.221-.251a2.666 2.666 0 0 1 3.52-.222",className:"icon-leave_svg__fill"})));var qO;function pT(){return pT=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},pT.apply(null,arguments)}const T$=t=>k.createElement("svg",pT({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),qO||(qO=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M34.667 37.333c7.17 0 13.018 5.66 13.32 12.755l.013.579V56a2.667 2.667 0 0 1-5.315.311L42.667 56v-5.333c0-4.26-3.33-7.743-7.53-7.987l-.47-.013H13.333a8 8 0 0 0-7.986 7.53l-.014.47V56a2.667 2.667 0 0 1-5.316.311L0 56v-5.333c0-7.17 5.66-13.019 12.755-13.321l.578-.013zM54 37.765a13.33 13.33 0 0 1 9.986 12.297l.014.605V56a2.667 2.667 0 0 1-5.315.311L58.667 56v-5.331a8 8 0 0 0-6-7.74A2.667 2.667 0 1 1 54 37.765M24 5.333c7.364 0 13.333 5.97 13.333 13.334S31.363 32 24 32s-13.333-5.97-13.333-13.333S16.637 5.333 24 5.333m19.328.43a13.333 13.333 0 0 1 0 25.834 2.667 2.667 0 1 1-1.323-5.167 8 8 0 0 0 0-15.5 2.667 2.667 0 1 1 1.323-5.167M24 10.667a8 8 0 1 0 0 16 8 8 0 0 0 0-16",className:"icon-members_svg__fill"})));var WO;function mT(){return mT=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},mT.apply(null,arguments)}const S$=t=>k.createElement("svg",mT({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),WO||(WO=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58q-8.947 2.868-12.504 1.981-4.198-1.047-1.657-3.663 1.757-2.094 2.928-5.234.934-2.502-.737-7A29.15 29.15 0 0 1 2.666 32C2.667 15.8 15.8 2.667 32 2.667M32 8C18.745 8 8 18.745 8 32c0 3.5.747 6.88 2.168 9.978l.405.837.137.271.106.285c1.517 4.085 1.89 7.622.734 10.72l-.382.972-.192.433.235-.05a62 62 0 0 0 4.886-1.363l1.721-.568 2.04-.696 1.95.917A23.9 23.9 0 0 0 32 56c13.255 0 24-10.745 24-24S45.255 8 32 8M18.667 29.333a2.667 2.667 0 1 1-.001 5.333 2.667 2.667 0 0 1 .001-5.333m13.333 0a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334m13.333 0a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334",className:"icon-message_svg__fill"})));var KO;function gT(){return gT=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},gT.apply(null,arguments)}const A$=t=>k.createElement("svg",gT({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),KO||(KO=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M18.667 34.667a2.667 2.667 0 0 1 .311 5.316l-.311.017h-5.334v16a2.667 2.667 0 0 1-5.316.311L8 56V40H2.667a2.667 2.667 0 0 1-.311-5.315l.31-.018h16zM32 29.333a2.667 2.667 0 0 1 2.649 2.356l.018.311v24a2.667 2.667 0 0 1-5.316.311L29.333 56V32A2.667 2.667 0 0 1 32 29.333M61.333 40a2.667 2.667 0 0 1 .311 5.315l-.31.018h-5.335L56 56a2.667 2.667 0 0 1-5.315.311L50.667 56l-.001-10.668-5.333.001a2.667 2.667 0 0 1-.311-5.316l.311-.017zm-8-34.667a2.67 2.67 0 0 1 2.65 2.356L56 8v24a2.667 2.667 0 0 1-5.315.311L50.667 32V8a2.667 2.667 0 0 1 2.666-2.667m-42.666 0a2.667 2.667 0 0 1 2.648 2.356l.018.311v18.667a2.667 2.667 0 0 1-5.316.311L8 26.667V8a2.667 2.667 0 0 1 2.667-2.667m21.333 0a2.667 2.667 0 0 1 2.649 2.356l.018.311-.001 10.666H40a2.668 2.668 0 0 1 .311 5.317L40 24H24a2.667 2.667 0 0 1-.311-5.315l.311-.018h5.333V8A2.667 2.667 0 0 1 32 5.333",className:"icon-moderations_svg__fill"})));var YO;function vT(){return vT=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},vT.apply(null,arguments)}const I$=t=>k.createElement("svg",vT({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),YO||(YO=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 45.333a5.333 5.333 0 1 1 0 10.666 5.333 5.333 0 0 1 0-10.666M32 28a5.333 5.333 0 1 1 0 10.668A5.333 5.333 0 0 1 32 28m0-17.333c2.946 0 5.333 2.387 5.333 5.333S34.946 21.333 32 21.333 26.667 18.946 26.667 16s2.387-5.333 5.333-5.333",className:"icon-more_svg__fill"})));var QO;function _T(){return _T=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},_T.apply(null,arguments)}const M$=t=>k.createElement("svg",_T({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),QO||(QO=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"m55.62 19.616.067.123A26.55 26.55 0 0 1 58.667 32c0 4.326-1.03 8.41-2.864 12.025q-1.518 4.089-.67 6.363 1.066 2.855 2.662 4.758 2.31 2.379-1.506 3.33-3.135.782-10.879-1.646l-.488-.155-1.594-.527A26.6 26.6 0 0 1 32 58.667a26.55 26.55 0 0 1-12.326-3.014l-.059-.03 4-4A21.2 21.2 0 0 0 32 53.333c2.993 0 5.89-.614 8.562-1.786l.498-.226 1.925-.905 3.613 1.196.695.219q1.093.337 2.054.595l.472.125.485.121-.167-.42-.2-.594c-.814-2.685-.484-5.681.713-9.065l.154-.425.106-.284.528-1.084a21.2 21.2 0 0 0 1.895-8.8 21.2 21.2 0 0 0-1.71-8.385zm2.266-13.502a2.67 2.67 0 0 1 .221 3.52l-.221.252-48 48a2.668 2.668 0 0 1-3.993-3.52l.221-.252 5.238-5.237a26.56 26.56 0 0 1-6.015-16.412L5.333 32C5.333 17.272 17.273 5.333 32 5.333a26.55 26.55 0 0 1 16.877 6.02l5.237-5.239a2.67 2.67 0 0 1 3.772 0M32 10.667c-11.782 0-21.333 9.55-21.333 21.333 0 4.836 1.614 9.401 4.48 13.084l29.936-29.938A21.25 21.25 0 0 0 32 10.666z",className:"icon-mute_svg__fill"})));var $O;function yT(){return yT=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},yT.apply(null,arguments)}const O$=t=>k.createElement("svg",yT({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),$O||($O=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M36.613 53.333c2.056 0 3.338 2.227 2.307 4.005a8 8 0 0 1-13.84 0c-.98-1.689.129-3.783 2.004-3.988l.303-.017zM32 2.667c11.56 0 20.972 9.194 21.323 20.669l.01.664v13.333a5.334 5.334 0 0 0 4.936 5.319l.753.033c2.963.318 3.077 4.616.342 5.24l-.342.056-.355.019H5.333l-.355-.019c-3.082-.33-3.082-4.965 0-5.296l.753-.033a5.335 5.335 0 0 0 4.92-4.9l.016-.419V24c0-11.782 9.55-21.333 21.333-21.333M32 8c-8.636 0-15.674 6.842-15.989 15.4L16 24v13.333c0 1.562-.336 3.046-.939 4.383l-.275.564-.218.387h34.861l-.215-.387a10.6 10.6 0 0 1-1.146-3.74l-.055-.674-.013-.533V24c0-8.837-7.163-16-16-16",className:"icon-notifications_svg__fill"})));var XO;function bT(){return bT=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},bT.apply(null,arguments)}const k$=t=>k.createElement("svg",bT({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),XO||(XO=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M36.613 53.333c2.056 0 3.338 2.227 2.307 4.005a8 8 0 0 1-13.84 0c-.98-1.689.129-3.783 2.004-3.988l.303-.017zM32 2.667c7.173 0 13.52 3.54 17.387 8.97l5.686-5.687a2.105 2.105 0 0 1 2.85-.117l.127.117a2.105 2.105 0 0 1 0 2.977L8.927 58.05c-.78.781-2.023.82-2.85.117l-.127-.117a2.105 2.105 0 0 1 0-2.977L13.023 48h-7.69l-.355-.019c-3.082-.33-3.082-4.965 0-5.296l.753-.033a5.335 5.335 0 0 0 4.92-4.9l.016-.419V24c0-11.782 9.55-21.333 21.333-21.333m20.85 16.795c.271 1.253.433 2.548.473 3.874l.01.664v13.333a5.334 5.334 0 0 0 4.936 5.319l.753.033c2.963.318 3.077 4.616.342 5.24l-.342.056-.355.019H24.31z",className:"icon-notifications-off-filled_svg__fill"})));var ZO;function ET(){return ET=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},ET.apply(null,arguments)}const R$=t=>k.createElement("svg",ET({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),ZO||(ZO=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M29.83 6.45a2.667 2.667 0 0 1 4.34 0l11.697 16.374L57 13.918c1.88-1.504 4.573.054 4.32 2.35l-.047.29-8 37.334A2.666 2.666 0 0 1 50.666 56H13.333a2.666 2.666 0 0 1-2.607-2.108l-8-37.333c-.525-2.452 2.315-4.207 4.273-2.641l11.132 8.906zM32 12.587l-11.163 15.63a2.667 2.667 0 0 1-3.836.532l-7.497-5.997 5.984 27.915h33.021l5.984-27.915L47 28.749a2.667 2.667 0 0 1-3.632-.281l-.204-.251zM32 32a5.333 5.333 0 1 1 0 10.668A5.333 5.333 0 0 1 32 32",className:"icon-operator_svg__fill"})));var JO;function CT(){return CT=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},CT.apply(null,arguments)}const D$=t=>k.createElement("svg",CT({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),JO||(JO=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M50.667 5.333a8 8 0 0 1 8 8v37.334a8 8 0 0 1-8 8H13.333a8 8 0 0 1-8-8V13.333a8 8 0 0 1 8-8zm-8 25.107L19.77 53.332l30.896.001a2.667 2.667 0 0 0 2.661-2.498l.005-.168v-9.564L42.666 30.44zm8-19.773H13.333a2.667 2.667 0 0 0-2.666 2.666v37.334c0 1.143.72 2.119 1.731 2.498L40.781 24.78a2.67 2.67 0 0 1 3.52-.222l.251.222 8.78 8.78.001-20.228a2.667 2.667 0 0 0-2.498-2.661zm-28 5.333a6.666 6.666 0 1 1 0 13.333 6.666 6.666 0 0 1 0-13.333m0 5.333a1.334 1.334 0 1 0 0 2.667 1.334 1.334 0 0 0 0-2.667",className:"icon-photo_svg__fill"})));var e6;function wT(){return wT=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},wT.apply(null,arguments)}const x$=t=>k.createElement("svg",wT({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),e6||(e6=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M51.908 34.75c1.9-1.233 1.896-3.26.013-4.514L19.376 8.577c-1.893-1.26-3.404-.391-3.376 1.968l.522 42.888c.028 2.347 1.596 3.247 3.493 2.016z",className:"icon-play_svg__fill"})));var t6;function NT(){return NT=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},NT.apply(null,arguments)}const P$=t=>k.createElement("svg",NT({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),t6||(t6=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M34.667 29.333h18.666c3.556 0 3.556 5.334 0 5.334H34.667v18.666c0 3.556-5.334 3.556-5.334 0V34.667H10.667c-3.556 0-3.556-5.334 0-5.334h18.666V10.667c0-3.556 5.334-3.556 5.334 0z",className:"icon-plus_svg__fill"})));var n6;function TT(){return TT=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},TT.apply(null,arguments)}const U$=t=>k.createElement("svg",TT({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),n6||(n6=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 61.333C15.8 61.333 2.667 48.2 2.667 32S15.8 2.667 32 2.667 61.333 15.8 61.333 32 48.2 61.333 32 61.333M32 56c13.255 0 24-10.745 24-24S45.255 8 32 8 8 18.745 8 32s10.745 24 24 24m2.213-18.63a2.667 2.667 0 1 1-5.333 0v-2.69c0-1.148.734-2.168 1.823-2.53.173-.058.532-.195 1.01-.407.809-.36 1.616-.79 2.354-1.282 1.835-1.223 2.813-2.528 2.813-3.786a5.333 5.333 0 0 0-10.364-1.777 2.667 2.667 0 0 1-5.032-1.77 10.668 10.668 0 0 1 20.729 3.551c0 3.413-2.022 6.109-5.187 8.22a21 21 0 0 1-2.813 1.578zm-5.333 7.523a2.667 2.667 0 1 1 5.333 0v.44a2.667 2.667 0 1 1-5.333 0v-.44",className:"icon-question_svg__fill"})));var r6;function ST(){return ST=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},ST.apply(null,arguments)}const L$=t=>k.createElement("svg",ST({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),r6||(r6=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"m46.14 14.43.562.537 6.631 6.167v-7.8a2.67 2.67 0 0 1 2.356-2.65l.311-.017a2.667 2.667 0 0 1 2.649 2.355l.018.311v16a2.67 2.67 0 0 1-2.356 2.65L56 32H40a2.667 2.667 0 0 1-.311-5.315l.311-.018h11.452l-8.44-7.85c-5.964-5.893-15.168-7.182-22.563-3.156-7.38 4.018-11.172 12.357-9.314 20.455 1.859 8.107 8.935 14.032 17.362 14.518 8.43.487 16.162-4.585 18.967-12.426a2.667 2.667 0 0 1 5.022 1.797C48.88 50.082 38.973 56.582 28.19 55.959c-10.785-.623-19.862-8.222-22.254-18.65C3.542 26.872 8.426 16.135 17.9 10.977c9.227-5.024 20.65-3.579 28.241 3.453z",className:"icon-refresh_svg__fill"})));var i6;function AT(){return AT=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},AT.apply(null,arguments)}const F$=t=>k.createElement("svg",AT({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),i6||(i6=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333 2.667 48.2 2.667 32 15.8 2.667 32 2.667m9.886 19.447a2.67 2.67 0 0 0-3.772 0L32 28.23l-6.114-6.115-.134-.124a2.667 2.667 0 0 0-3.638.124l-.124.134a2.667 2.667 0 0 0 .124 3.638L28.23 32l-6.115 6.114-.124.134a2.667 2.667 0 0 0 .124 3.638l.134.124a2.667 2.667 0 0 0 3.638-.124L32 35.77l6.114 6.115.134.124a2.667 2.667 0 0 0 3.638-.124l.124-.134a2.667 2.667 0 0 0-.124-3.638L35.77 32l6.115-6.114.124-.134a2.667 2.667 0 0 0-.124-3.638z",className:"icon-remove_svg__fill"})));var a6;function IT(){return IT=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},IT.apply(null,arguments)}const H$=t=>k.createElement("svg",IT({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 12"},t),a6||(a6=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M11.774 10.5c.062 0 .12-.025.164-.07a.22.22 0 0 0 .062-.164c-.069-1.447-.495-2.678-1.268-3.66-.618-.785-1.455-1.409-2.49-1.855a9.3 9.3 0 0 0-2.406-.655 10 10 0 0 0-.862-.078V2.225a.23.23 0 0 0-.128-.203.23.23 0 0 0-.24.028L.084 5.692A.22.22 0 0 0 0 5.865c0 .068.03.132.082.175l4.523 3.737c.067.056.16.068.24.03a.22.22 0 0 0 .13-.202v-1.95c1.134-.08 2.178.003 3.107.25a6.4 6.4 0 0 1 2.087.96c1.018.724 1.398 1.5 1.401 1.507a.23.23 0 0 0 .204.128",className:"icon-reply-filled_svg__fill"})));var s6;function MT(){return MT=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},MT.apply(null,arguments)}const j$=t=>k.createElement("svg",MT({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),s6||(s6=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M26.667 48C14.885 48 5.333 38.449 5.333 26.667S14.885 5.333 26.667 5.333 48 14.885 48 26.667c0 4.93-1.672 9.469-4.48 13.081l13.67 13.67a2.668 2.668 0 0 1-3.772 3.772l-13.67-13.67A21.24 21.24 0 0 1 26.667 48m0-5.333c8.836 0 16-7.164 16-16s-7.164-16-16-16-16 7.163-16 16 7.163 16 16 16",className:"icon-search_svg__fill"})));var o6;function OT(){return OT=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},OT.apply(null,arguments)}const G$=t=>k.createElement("svg",OT({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),o6||(o6=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M59.795 29.43 7.329 2.979C4.691 1.802 1.76 4.153 2.932 6.798l6.925 18.609a2 2 0 0 0 1.544 1.275l32.273 5.394L11.4 37.47a2 2 0 0 0-1.544 1.275L2.932 57.353c-.879 2.645 1.76 4.997 4.397 3.527l52.466-26.453c2.051-.882 2.051-3.82 0-4.996z",className:"icon-send_svg__fill"})));var l6;function kT(){return kT=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},kT.apply(null,arguments)}const V$=t=>k.createElement("svg",kT({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),l6||(l6=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 2.667A5.33 5.33 0 0 1 37.333 8v.24A4.4 4.4 0 0 0 40 12.267a4.4 4.4 0 0 0 4.853-.88l.16-.16a5.33 5.33 0 0 1 7.547 0 5.333 5.333 0 0 1 0 7.546l-.16.16a4.4 4.4 0 0 0-.88 4.854V24a4.4 4.4 0 0 0 4.027 2.667H56c2.946 0 5.333 2.387 5.333 5.333S58.946 37.333 56 37.333h-.24A4.4 4.4 0 0 0 51.733 40a4.4 4.4 0 0 0 .88 4.853l.16.16a5.33 5.33 0 0 1 0 7.547 5.333 5.333 0 0 1-7.546 0l-.16-.16a4.4 4.4 0 0 0-4.854-.88 4.4 4.4 0 0 0-2.666 4.027V56a5.333 5.333 0 0 1-10.667 0v-.24A4.4 4.4 0 0 0 24 51.733a4.4 4.4 0 0 0-4.853.88l-.16.16a5.33 5.33 0 0 1-7.547 0 5.333 5.333 0 0 1 0-7.546l.16-.16a4.4 4.4 0 0 0 .88-4.854 4.4 4.4 0 0 0-4.027-2.666H8A5.333 5.333 0 0 1 8 26.88h.24A4.4 4.4 0 0 0 12.267 24a4.4 4.4 0 0 0-.88-4.853l-.16-.16a5.33 5.33 0 0 1 0-7.547 5.333 5.333 0 0 1 7.546 0l.16.16a4.4 4.4 0 0 0 4.854.88H24a4.4 4.4 0 0 0 2.667-4.027V8A5.33 5.33 0 0 1 32 2.667M32 24a8 8 0 1 0 0 16 8 8 0 0 0 0-16",className:"icon-settings-filled_svg__fill"})));var u6;function RT(){return RT=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},RT.apply(null,arguments)}const B$=t=>k.createElement("svg",RT({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 32"},t),u6||(u6=k.createElement("path",{d:"M21.943 24.39a1.333 1.333 0 0 1-1.886 1.886l-9.333-9.333a1.333 1.333 0 0 1 0-1.886l9.333-9.333a1.333 1.333 0 1 1 1.886 1.885L13.553 16z",className:"icon-slide-left_svg__fill",clipRule:"evenodd"})));var c6;function DT(){return DT=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},DT.apply(null,arguments)}const z$=t=>k.createElement("svg",DT({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),c6||(c6=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 61.333C48.2 61.333 61.333 48.2 61.333 32S48.2 2.667 32 2.667 2.667 15.8 2.667 32a2.838 2.838 0 1 0 5.678 0C8.344 18.935 18.934 8.344 32 8.344c13.065 0 23.656 10.591 23.656 23.656S45.065 55.656 32 55.656a2.838 2.838 0 1 0 0 5.677",className:"icon-spinner_svg__fill"})));var d6;function xT(){return xT=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},xT.apply(null,arguments)}const q$=t=>k.createElement("svg",xT({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),d6||(d6=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M36.889 43.013c6.608 0 12.121 4.685 12.43 10.734l.014.537V58a2.667 2.667 0 0 1-5.316.311L44 58v-3.716c0-3.07-2.87-5.718-6.636-5.925l-.475-.013H27.11c-3.838 0-6.86 2.525-7.096 5.557l-.015.381V58a2.667 2.667 0 0 1-5.315.311L14.667 58v-3.716c0-6.126 5.324-10.986 11.864-11.26l.58-.011zm18.578-17.291q.401 0 .784.118c4.632 1.426 7.518 4.801 7.736 9.688l.013.594v12.8a2.667 2.667 0 0 1-5.315.311l-.018-.311V36.124c-.002-2.595-1.163-4.171-3.528-5.034l-.104-.037-2.502.002a2.667 2.667 0 0 1-2.648-2.356l-.018-.31a2.67 2.67 0 0 1 2.355-2.65l.311-.017zm-44 0 .31.018a2.666 2.666 0 0 1 2.356 2.648l-.018.311a2.666 2.666 0 0 1-2.648 2.356l-2.51-.002-.119.042c-2.246.85-3.503 2.574-3.505 5.147v12.68l-.018.31A2.666 2.666 0 0 1 0 48.922V36.24l.014-.591c.225-4.874 3.203-8.415 7.712-9.809q.384-.117.788-.118zM32 19.958c5.512 0 10 4.409 10 9.871s-4.488 9.872-10 9.872-10-4.41-10-9.872 4.488-9.871 10-9.871m0 5.333c-2.588 0-4.667 2.043-4.667 4.538s2.08 4.538 4.667 4.538c2.588 0 4.667-2.042 4.667-4.538 0-2.495-2.08-4.538-4.667-4.538M17.333 2.667c5.513 0 10 4.409 10 9.871s-4.487 9.871-10 9.871c-5.512 0-10-4.409-10-9.871s4.488-9.871 10-9.871m29.334 0c5.512 0 10 4.409 10 9.871s-4.488 9.871-10 9.871c-5.513 0-10-4.409-10-9.871s4.487-9.871 10-9.871M17.333 8c-2.587 0-4.666 2.042-4.666 4.538s2.079 4.538 4.666 4.538S22 15.034 22 12.538 19.921 8 17.333 8m29.334 0C44.079 8 42 10.042 42 12.538s2.079 4.538 4.667 4.538 4.666-2.042 4.666-4.538S49.254 8 46.667 8",className:"icon-supergroup_svg__fill"})));var h6,f6;function PT(){return PT=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},PT.apply(null,arguments)}const W$=t=>k.createElement("svg",PT({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 64 64"},t),h6||(h6=k.createElement("path",{d:"M38.824 25.895a2.95 2.95 0 0 1 4.16-.074L57.1 39.378a2.92 2.92 0 0 1 .002 4.213L42.985 57.177a2.95 2.95 0 0 1-4.158-.07 2.92 2.92 0 0 1 .07-4.14l11.928-11.48-11.926-11.451a2.92 2.92 0 0 1-.075-4.14",className:"icon-thread_svg__fill",clipRule:"evenodd"})),f6||(f6=k.createElement("path",{d:"M8.866 6c1.583 0 2.866 1.216 2.866 2.716V25.5c0 7.672 6.846 14.068 15.475 14.068h22.927c1.583 0 2.866 1.216 2.866 2.716S51.717 45 50.134 45H27.207C15.604 45 6 36.35 6 25.5V8.716C6 7.216 7.283 6 8.866 6",className:"icon-thread_svg__fill",clipRule:"evenodd"})));var p6;function UT(){return UT=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},UT.apply(null,arguments)}const K$=t=>k.createElement("svg",UT({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),p6||(p6=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M34.667 5.333a2.667 2.667 0 0 1 0 5.334H13.333a2.667 2.667 0 0 0-2.666 2.666v37.334c0 1.143.72 2.118 1.73 2.497l28.384-28.383a2.667 2.667 0 0 1 3.771 0l8.781 8.78v-4.228a2.667 2.667 0 0 1 2.498-2.661l.169-.005a2.667 2.667 0 0 1 2.667 2.666v21.334a8 8 0 0 1-8 8H13.33a8 8 0 0 1-7.998-8V13.333a8 8 0 0 1 8-8zm8 25.105L19.77 53.333h30.897a2.667 2.667 0 0 0 2.661-2.498l.005-.168v-9.563zM22.667 16a6.666 6.666 0 1 1 0 13.333 6.666 6.666 0 0 1 0-13.333m0 5.333a1.334 1.334 0 1 0 0 2.667 1.334 1.334 0 0 0 0-2.667M56.78 3.448a2.665 2.665 0 0 1 3.771 0 2.665 2.665 0 0 1 0 3.771l-4.782 4.78 4.782 4.782c.998.998 1.04 2.59.125 3.638l-.125.133a2.665 2.665 0 0 1-3.771 0l-4.782-4.781-4.78 4.781a2.667 2.667 0 0 1-3.638.125l-.133-.125a2.665 2.665 0 0 1 0-3.771L48.228 12l-4.78-4.781a2.667 2.667 0 0 1-.125-3.638l.125-.133a2.665 2.665 0 0 1 3.771 0l4.78 4.78z",className:"icon-thumbnail-none_svg__fill"})));var m6;function LT(){return LT=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},LT.apply(null,arguments)}const Y$=t=>k.createElement("svg",LT({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 88 48"},t),m6||(m6=k.createElement("g",{fill:"none",fillRule:"evenodd"},k.createElement("rect",{width:80,height:40,x:4,y:4,fill:"#000",className:"icon-toggleoff_svg__fill",rx:20}),k.createElement("circle",{cx:24,cy:24,r:12,fill:"#FFF"}),k.createElement("path",{fill:"#FFF",d:"M64 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4zm0 2H24C14.059 6 6 14.059 6 24c0 9.764 7.774 17.712 17.47 17.992L24 42h40c9.941 0 18-8.059 18-18 0-9.764-7.774-17.712-17.47-17.992z"}),k.createElement("path",{fill:"#000",d:"M64 0H24C10.745 0 0 10.745 0 24s10.745 24 24 24h40c13.255 0 24-10.745 24-24S77.255 0 64 0m0 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4z",className:"icon-toggleoff_svg__fill"}))));var g6;function FT(){return FT=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},FT.apply(null,arguments)}const Q$=t=>k.createElement("svg",FT({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 88 48"},t),g6||(g6=k.createElement("g",{fill:"none",fillRule:"evenodd"},k.createElement("rect",{width:80,height:40,x:4,y:4,fill:"#000",className:"icon-toggleon_svg__fill",rx:20}),k.createElement("circle",{cx:64,cy:24,r:12,fill:"#FFF"}),k.createElement("path",{fill:"#FFF",d:"M64 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4zm0 2H24C14.059 6 6 14.059 6 24c0 9.764 7.774 17.712 17.47 17.992L24 42h40c9.941 0 18-8.059 18-18 0-9.764-7.774-17.712-17.47-17.992z"}),k.createElement("path",{fill:"#000",d:"M64 0H24C10.745 0 0 10.745 0 24s10.745 24 24 24h40c13.255 0 24-10.745 24-24S77.255 0 64 0m0 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4z",className:"icon-toggleon_svg__fill"}))));var v6;function HT(){return HT=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},HT.apply(null,arguments)}const $$=t=>k.createElement("svg",HT({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),v6||(v6=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M42.667 37.333c7.17 0 13.018 5.66 13.32 12.755l.013.579V56a2.667 2.667 0 0 1-5.315.311L50.667 56v-5.333c0-4.26-3.33-7.743-7.53-7.987l-.47-.013H21.333a8 8 0 0 0-7.986 7.53l-.014.47V56a2.667 2.667 0 0 1-5.316.311L8 56v-5.333c0-7.17 5.66-13.019 12.755-13.321l.578-.013zM32 5.333c7.364 0 13.333 5.97 13.333 13.334S39.363 32 32 32s-13.333-5.97-13.333-13.333S24.637 5.333 32 5.333m0 5.334a8 8 0 1 0 0 16 8 8 0 0 0 0-16",className:"icon-user_svg__fill"})));var _6;function jT(){return jT=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},jT.apply(null,arguments)}const X$=t=>k.createElement("svg",jT({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},t),_6||(_6=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M12.346 5.336v-.001c.405-.523 1.182-.524 1.58-.037.162.2.25.443.25.69v3.678c0 .518.42.938.938.938H18.6c.359 0 .7.179.911.488l.001.001.369.548.003.004c.174.256.226.583.134.895l-1.532 5.316c-.131.459-.559.782-1.044.782h-7.075c-.3 0-.593-.127-.8-.345l-1.13-1.222v-6.647zm-4.73 3.078 3.245-4.223.002-.002c1.125-1.456 3.339-1.521 4.517-.075.421.52.671 1.177.671 1.874v2.74h2.55c.99 0 1.908.496 2.462 1.31l.002.004.368.547.002.002a2.93 2.93 0 0 1 .382 2.475v.003l-1.528 5.302a2.96 2.96 0 0 1-2.847 2.142h-7.075a2.99 2.99 0 0 1-2.166-.935l-.007-.007-.066-.072a2.13 2.13 0 0 1-1.821 1.025H4.192a2.13 2.13 0 0 1-2.13-2.13v-8.3a2.13 2.13 0 0 1 2.13-2.13h2.115c.493 0 .948.168 1.31.45m-3.678 1.68c0-.141.114-.255.254-.255h2.115c.14 0 .254.114.254.255v8.3c0 .14-.114.255-.254.255H4.192a.255.255 0 0 1-.255-.255z",clipRule:"evenodd"})));var y6;function GT(){return GT=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},GT.apply(null,arguments)}const Z$=t=>k.createElement("svg",GT({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},t),y6||(y6=k.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M11.654 18.664v.001c-.405.523-1.182.524-1.58.037-.162-.2-.25-.444-.25-.69v-3.678a.94.94 0 0 0-.938-.938H5.4c-.359 0-.7-.179-.911-.488l-.001-.001-.369-.548-.003-.004a1.05 1.05 0 0 1-.134-.895l1.532-5.316c.131-.459.559-.782 1.044-.782h7.075c.3 0 .593.127.8.345l1.13 1.222v6.647zm4.73-3.078-3.245 4.223-.002.002c-1.125 1.456-3.339 1.521-4.517.075a2.98 2.98 0 0 1-.671-1.874v-2.74h-2.55c-.99 0-1.908-.496-2.462-1.31l-.002-.004-.368-.547-.002-.002a2.93 2.93 0 0 1-.382-2.475v-.003L3.711 5.63a2.96 2.96 0 0 1 2.847-2.142h7.075c.823 0 1.608.345 2.166.935l.007.007.066.072a2.13 2.13 0 0 1 1.821-1.025h2.115a2.13 2.13 0 0 1 2.13 2.13v8.3a2.13 2.13 0 0 1-2.13 2.13h-2.115a2.12 2.12 0 0 1-1.31-.45m3.678-1.68c0 .141-.114.255-.254.255h-2.115a.255.255 0 0 1-.255-.255v-8.3c0-.14.115-.255.255-.255h2.115c.14 0 .255.114.255.255z",clipRule:"evenodd"})));var b6;function VT(){return VT=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},VT.apply(null,arguments)}const J$=t=>k.createElement("svg",VT({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},t),b6||(b6=k.createElement("g",{fill:"#000",fillRule:"evenodd"},k.createElement("path",{d:"M40 5.333C38.835 6.879 37.003 8.33 36.266 9.6H12c-.597 0-1.067.469-1.067 1.067v36.458l2.863-4.458H52c.597 0 1.067-.469 1.067-1.067V26.398c1.917-.402 3.779-1.178 5.333-2.398v17.6c0 3.542-2.891 6.4-6.4 6.4H16L5.333 58.667V12c0-3.542 2.891-6.4 6.4-6.4H40Z",className:"icon-mark-as-unread_svg__fill"}),k.createElement("circle",{cx:50.667,cy:13.333,r:9.333,className:"icon-mark-as-unread_svg__fill"}))));var E6;function BT(){return BT=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)({}).hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},BT.apply(null,arguments)}const eX=t=>k.createElement("svg",BT({xmlns:"http://www.w3.org/2000/svg",width:14,height:16,fill:"none"},t),E6||(E6=k.createElement("path",{fill:"#742DDD",fillRule:"evenodd",d:"M11.496 4.504c.21.21.226.541.048.77l-.048.055L7.825 9l3.671 3.672a.583.583 0 0 1-.77.873l-.055-.048-3.67-3.671-3.672 3.67a.583.583 0 0 1-.873-.77l.048-.054L6.175 9l-3.67-3.67a.583.583 0 0 1 .77-.874l.054.048L7 8.174l3.671-3.67a.583.583 0 0 1 .825 0",clipRule:"evenodd"})));function tX(t){switch(t){case Ue.ADD:return O.createElement(KQ,null);case Ue.ARROW_LEFT:return O.createElement(YQ,null);case Ue.ATTACH:return O.createElement(QQ,null);case Ue.AUDIO_ON_LINED:return O.createElement($Q,null);case Ue.BAN:return O.createElement(XQ,null);case Ue.BROADCAST:return O.createElement(ZQ,null);case Ue.CAMERA:return O.createElement(JQ,null);case Ue.CHANNELS:return O.createElement(e$,null);case Ue.CHAT:return O.createElement(t$,null);case Ue.CHAT_FILLED:return O.createElement(n$,null);case Ue.CHEVRON_DOWN:return O.createElement(r$,null);case Ue.CHEVRON_RIGHT:return O.createElement(i$,null);case Ue.CLOSE:return O.createElement(a$,null);case Ue.COLLAPSE:return O.createElement(s$,null);case Ue.COPY:return O.createElement(o$,null);case Ue.CREATE:return O.createElement(l$,null);case Ue.DELETE:return O.createElement(u$,null);case Ue.DISCONNECTED:return O.createElement(c$,null);case Ue.DOCUMENT:return O.createElement(d$,null);case Ue.DONE:return O.createElement(h$,null);case Ue.DONE_ALL:return O.createElement(f$,null);case Ue.DOWNLOAD:return O.createElement(p$,null);case Ue.EDIT:return O.createElement(m$,null);case Ue.EMOJI_MORE:return O.createElement(g$,null);case Ue.ERROR:return O.createElement(v$,null);case Ue.EXPAND:return O.createElement(_$,null);case Ue.FILE_AUDIO:return O.createElement(y$,null);case Ue.FILE_DOCUMENT:return O.createElement(b$,null);case Ue.FREEZE:return O.createElement(E$,null);case Ue.GIF:return O.createElement(C$,null);case Ue.INFO:return O.createElement(w$,null);case Ue.LEAVE:return O.createElement(N$,null);case Ue.MEMBERS:return O.createElement(T$,null);case Ue.MESSAGE:return O.createElement(S$,null);case Ue.MODERATIONS:return O.createElement(A$,null);case Ue.MORE:return O.createElement(I$,null);case Ue.MUTE:return O.createElement(M$,null);case Ue.NOTIFICATIONS:return O.createElement(O$,null);case Ue.NOTIFICATIONS_OFF_FILLED:return O.createElement(k$,null);case Ue.OPERATOR:return O.createElement(R$,null);case Ue.PHOTO:return O.createElement(D$,null);case Ue.PLAY:return O.createElement(x$,null);case Ue.PLUS:return O.createElement(P$,null);case Ue.QUESTION:return O.createElement(U$,null);case Ue.REFRESH:return O.createElement(L$,null);case Ue.REMOVE:return O.createElement(F$,null);case Ue.REPLY:return O.createElement(H$,null);case Ue.SEARCH:return O.createElement(j$,null);case Ue.SEND:return O.createElement(G$,null);case Ue.SETTINGS_FILLED:return O.createElement(V$,null);case Ue.SLIDE_LEFT:return O.createElement(B$,null);case Ue.SPINNER:return O.createElement(z$,null);case Ue.SUPERGROUP:return O.createElement(q$,null);case Ue.THREAD:return O.createElement(W$,null);case Ue.THUMBNAIL_NONE:return O.createElement(K$,null);case Ue.TOGGLE_OFF:return O.createElement(Y$,null);case Ue.TOGGLE_ON:return O.createElement(Q$,null);case Ue.USER:return O.createElement($$,null);case Ue.FEEDBACK_LIKE:return O.createElement(X$,null);case Ue.FEEDBACK_DISLIKE:return O.createElement(Z$,null);case Ue.MARK_AS_UNREAD:return O.createElement(J$,null);case Ue.FLOATING_BUTTON_CLOSE:return O.createElement(eX,null);default:return"icon"}}function tn(t){var n=t.className,e=n===void 0?"":n,r=t.type,i=t.fillColor,a=i===void 0?Ri.DEFAULT:i,s=t.width,l=s===void 0?26:s,c=t.height,d=c===void 0?26:c,p=t.onClick,g=p===void 0?vi:p,_=t.children,y=_===void 0?null:_,C=t.testID,w={width:typeof l=="string"?l:"".concat(l,"px"),minWidth:typeof l=="string"?l:"".concat(l,"px"),height:typeof d=="string"?d:"".concat(d,"px"),minHeight:typeof d=="string"?d:"".concat(d,"px")};return O.createElement("div",{className:et(et([],Array.isArray(e)?e:[e],!0),["sendbird-icon",WQ(r),qQ(a)],!1).join(" "),"data-testid":C,role:"button",onClick:g,onKeyDown:g,tabIndex:0,style:w},y||tX(r))}var Gt=Ue,Wt=Ri,Cp=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=Math.random()*16|0,e=t==="x"?n:n&3|8;return e.toString(16)})},Kx="sendbird-modal-root",nX=function(t){var n=t.titleText,e=t.onCloseClick;return O.createElement("div",{className:"sendbird-modal__header"},O.createElement(jt,{type:Ft.H_1,color:pt.ONBACKGROUND_1},n),O.createElement("div",{className:"sendbird-modal__close"},O.createElement(Fc,{width:"32px",height:"32px",onClick:e},O.createElement(tn,{type:Gt.CLOSE,fillColor:Wt.DEFAULT,width:"24px",height:"24px"}))))},rX=function(t){var n=t.children;return O.createElement("div",{className:"sendbird-modal__body"},O.createElement(jt,{type:Ft.SUBTITLE_1,color:pt.ONBACKGROUND_2},n))},P0=function(t){var n=t.submitText,e=t.disabled,r=e===void 0?!1:e,i=t.hideCancelButton,a=i===void 0?!1:i,s=t.type,l=s===void 0?Vi.DANGER:s,c=t.onSubmit,d=t.onCancel,p=k.useContext(Zc).stringSet;return O.createElement("div",{className:"sendbird-modal__footer"},!a&&O.createElement(Ng,{type:Vi.SECONDARY,onClick:d},O.createElement(jt,{type:Ft.BUTTON_1,color:pt.ONBACKGROUND_1},p.BUTTON__CANCEL)),O.createElement(Ng,{type:l,disabled:r,onClick:c},n))};function NS(t){var n,e=t.children,r=e===void 0?null:e,i=t.className,a=i===void 0?"":i,s=t.contentClassName,l=s===void 0?"":s,c=t.isCloseOnClickOutside,d=c===void 0?!1:c,p=t.isFullScreenOnMobile,g=p===void 0?!1:p,_=t.titleText,y=t.submitText,C=t.disabled,w=C===void 0?!1:C,A=t.hideFooter,M=A===void 0?!1:A,I=t.type,D=I===void 0?Vi.DANGER:I,P=t.renderHeader,H=t.onSubmit,L=H===void 0?vi:H,G=t.onClose,Y=t.onCancel,F=t.customFooter,ne=(n=G??Y)!==null&&n!==void 0?n:vi,J=qa().state.eventHandlers,re=k.useState(function(){return"sbu-modal-".concat(Cp())})[0];k.useEffect(function(){var Z,ue;return(ue=(Z=J?.modal)===null||Z===void 0?void 0:Z.onMounted)===null||ue===void 0?void 0:ue.call(Z,{close:ne,id:re})},[]);var Oe=Jc().isMobile;return q3.createPortal(O.createElement("div",{className:Bi("sendbird-modal",a,g&&Oe&&"sendbird-modal--full-mobile")},O.createElement("div",{className:Bi.apply(void 0,et(["sendbird-modal__content"],Array.isArray(l)?l:[l],!1))},P?.()||O.createElement(nX,{titleText:_??"",onCloseClick:ne}),O.createElement(rX,null,r),!M&&(F??O.createElement(P0,{disabled:w,onCancel:ne,onSubmit:L,submitText:y??"",type:D}))),O.createElement("div",{className:Bi("sendbird-modal__backdrop",d&&"sendbird-modal__backdrop--clickoutside"),onClick:function(Z){Z?.stopPropagation(),d&&ne()}})),document.getElementById(Kx))}var iX=k.createContext({start:vi,stop:vi,isRecordable:!1}),Yx=function(){return k.useContext(iX)},M1=Symbol("@ts-pattern/matcher"),C6="@ts-pattern/anonymous-select-key",w6=function(t){return!!(t&&typeof t=="object")},gw=function(t){return t&&!!t[M1]},aX=function t(n,e,r){if(w6(n)){if(gw(n)){var i=n[M1]().match(e),a=i.matched,s=i.selections;return a&&s&&Object.keys(s).forEach(function(c){return r(c,s[c])}),a}if(!w6(e))return!1;if(Array.isArray(n))return!!Array.isArray(e)&&n.length===e.length&&n.every(function(c,d){return t(c,e[d],r)});if(n instanceof Map)return e instanceof Map&&Array.from(n.keys()).every(function(c){return t(n.get(c),e.get(c),r)});if(n instanceof Set){if(!(e instanceof Set))return!1;if(n.size===0)return e.size===0;if(n.size===1){var l=Array.from(n.values())[0];return gw(l)?Array.from(e.values()).every(function(c){return t(l,c,r)}):e.has(l)}return Array.from(n.values()).every(function(c){return e.has(c)})}return Object.keys(n).every(function(c){var d,p=n[c];return(c in e||gw(d=p)&&d[M1]().matcherType==="optional")&&t(p,e[c],r)})}return Object.is(e,n)};function Op(t){var n;return(n={})[M1]=function(){return{match:function(e){return{matched:!!t(e)}}}},n}Op(function(t){return!0});Op(function(t){return typeof t=="string"});Op(function(t){return typeof t=="number"});Op(function(t){return typeof t=="boolean"});Op(function(t){return typeof t=="bigint"});Op(function(t){return typeof t=="symbol"});Op(function(t){return t==null});function Bc(t){return new sX(t,[])}var sX=(function(){function t(e,r){this.value=void 0,this.cases=void 0,this.value=e,this.cases=r}var n=t.prototype;return n.with=function(){var e=[].slice.call(arguments),r=e[e.length-1],i=[e[0]],a=[];return e.length===3&&typeof e[1]=="function"?(i.push(e[0]),a.push(e[1])):e.length>2&&i.push.apply(i,e.slice(1,e.length-1)),new t(this.value,this.cases.concat([{match:function(s){var l={},c=!!(i.some(function(d){return aX(d,s,function(p,g){l[p]=g})})&&a.every(function(d){return d(s)}));return{matched:c,value:c&&Object.keys(l).length?C6 in l?l[C6]:l:s}},handler:r}]))},n.when=function(e,r){return new t(this.value,this.cases.concat([{match:function(i){return{matched:!!e(i),value:i}},handler:r}]))},n.otherwise=function(e){return new t(this.value,this.cases.concat([{match:function(r){return{matched:!0,value:r}},handler:e}])).run()},n.exhaustive=function(){return this.run()},n.run=function(){for(var e=this.value,r=void 0,i=0;i<this.cases.length;i++){var a=this.cases[i],s=a.match(this.value);if(s.matched){e=s.value,r=a.handler;break}}if(!r){var l;try{l=JSON.stringify(this.value)}catch{l=this.value}throw new Error("Pattern matching error: no pattern matches value "+l)}return r(e,this.value)},t})(),oX=k.createContext({openModal:vi}),Qx=function(){return k.useContext(oX)};(function(){function t(n){var e=this,r,i=n.sdk,a=n.logger;(r=i?.getAllEmoji)===null||r===void 0||r.call(i).then(function(s){e._emojiContainer=s,a?.info("EmojiManager | Succeeded getting all emojis. ",s)}).catch(function(){a?.warning("EmojiManager | Failed getting all emojis.")})}return Object.defineProperty(t.prototype,"AllEmojisAsArray",{get:function(){return this._emojiContainer.emojiCategories.flatMap(function(n){return n.emojis})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"AllEmojisAsMap",{get:function(){return this._emojiContainer.emojiCategories.flatMap(function(n){return n.emojis}).reduce(function(n,e){return n.set(e.key,e.url),n},new Map)},enumerable:!1,configurable:!0}),t.prototype.getAllEmojis=function(n){var e=this;return Bc(n).when(function(r){return["array","arr"].includes(r)},function(){return e.AllEmojisAsArray}).when(function(r){return["map"].includes(r)},function(){return e.AllEmojisAsMap}).otherwise(function(){return e.AllEmojisAsArray})},t.prototype.getEmojiUrl=function(n){var e,r;return(r=(e=this.AllEmojisAsArray.find(function(i){return i.key===n}))===null||e===void 0?void 0:e.url)!==null&&r!==void 0?r:""},Object.defineProperty(t.prototype,"emojiContainer",{get:function(){return this._emojiContainer},enumerable:!1,configurable:!0}),t})();var $x={100:"extra-light",200:"light",300:"main",400:"dark",500:"extra-dark","overlay-01":"overlay-dark","overlay-02":"overlay-light","onlight-01":"onlight-text-high-emphasis","onlight-02":"onlight-text-mid-emphasis","onlight-03":"onlight-text-low-emphasis","onlight-04":"onlight-text-disabled","ondark-01":"ondark-text-high-emphasis","ondark-02":"ondark-text-mid-emphasis","ondark-03":"ondark-text-low-emphasis","ondark-04":"ondark-text-disabled"};Object.values($x).sort(function(t,n){return n.length-t.length});new Map(Object.entries($x).map(function(t){var n=t[0],e=t[1];return[e,n]}));var js;(function(t){t.NONE="NONE",t.PENDING="PENDING",t.SENT="SENT",t.FAILED="FAILED",t.DELIVERED="DELIVERED",t.READ="READ"})(js||(js={}));function O1(t){"@babel/helpers - typeof";return O1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},O1(t)}function Sa(t,n){if(n.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+n.length+" present")}function Xl(t){Sa(1,arguments);var n=Object.prototype.toString.call(t);return t instanceof Date||O1(t)==="object"&&n==="[object Date]"?new Date(t.getTime()):typeof t=="number"||n==="[object Number]"?new Date(t):((typeof t=="string"||n==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}var N6,sh={IMAGE:["image/jpeg","image/jpg","image/png","image/gif","image/svg+xml","image/webp","image/bmp"],VIDEO:["video/mpeg","video/ogg","video/webm","video/mp4"],AUDIO:["audio/aac","audio/midi","audio/x-midi","audio/mpeg","audio/ogg","audio/opus","audio/wav","audio/webm","audio/3gpp","audio/3gpp2","audio/mp3"],DOCUMENT:["text/plain","text/css","text/csv","text/html","text/calendar","text/javascript","text/xml","text/x-log","video/quicktime"],APPLICATION:["application/x-abiword","application/x-freearc","application/vnd.amazon.ebook","application/octet-stream","application/x-bzip","application/x-bzip2","application/x-cdf","application/x-csh","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-fontobject","application/epub+zip","application/gzip","application/java-archive","application/json","application/ld+json","application/vnd.apple.installer+xml","application/vnd.oasis.opendocument.presentation","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.text","application/ogg","application/pdf","application/x-httpd-php","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.rar","application/rtf","application/x-sh","application/x-tar","application/vnd.visio","application/xhtml+xml","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/xml","application/vnd.mozilla.xul+xml","application/zip","application/x-7z-compressed"],ARCHIVE:["application/zip","application/x-rar-compressed","application/x-7z-compressed","application/x-tar","application/gzip","application/x-bzip","application/x-bzip2","application/x-xz","application/x-iso9660-image"]},D_={IMAGE:[".apng",".avif",".gif",".jpg",".jpeg",".jfif",".pjpeg",".pjp",".png",".svg",".webp",".bmp",".ico",".cur",".tif",".tiff",".heic",".heif"],VIDEO:[".mp4",".webm",".ogv",".3gp",".3g2",".avi",".mov",".wmv",".mpg",".mpeg",".m4v",".mkv"],AUDIO:[".aac",".midi",".mp3",".oga",".opus",".wav",".weba",".3gp",".3g2"],DOCUMENT:[".txt",".log",".csv",".rtf",".pdf",".doc",".docx",".xls",".xlsx",".ppt",".pptx"],ARCHIVE:[".zip",".rar",".7z",".tar",".gz",".bz2",".xz",".iso"]},lX=function(t){if(Array.isArray(t)&&t.length>0){var n=t.reduce(function(e,r){var i=r.toLowerCase();switch(i){case"image":{e.push.apply(e,et(et([],sh.IMAGE,!1),D_.IMAGE,!1));break}case"video":{e.push.apply(e,et(et([],sh.VIDEO,!1),D_.VIDEO,!1));break}case"audio":{e.push.apply(e,et(et([],sh.AUDIO,!1),D_.AUDIO,!1));break}case"archive":{e.push.apply(e,et(et([],sh.ARCHIVE,!1),D_.ARCHIVE,!1));break}default:{e.push(r);break}}return e},[]);return Array.from(new Set(n)).join(",")}return et(et([],Object.values(sh).flat(),!0),Object.values(D_).flat(),!0).join(",")},th={ADMIN:"ADMIN",TEXT:"TEXT",FILE:"FILE",MULTIPLE_FILES:"MULTIPLE_FILES",THUMBNAIL:"THUMBNAIL",OG:"OG",UNKNOWN:"UNKNOWN"},uX={VOICE:"VOICE"},cX=function(t){return t==="video/quicktime"},dX=function(t){return Dx(navigator.userAgent)&&cX(t)},kp=function(t){return sh.IMAGE.indexOf(t)>=0},a2=function(t){return sh.VIDEO.indexOf(t)>=0||dX(t)},Xx=function(t){return t==="image/gif"},zT=function(t){return kp(t)||a2(t)},hX=function(t){return sh.AUDIO.indexOf(t)>=0},fX=function(t){return t&&(t.isAdminMessage&&typeof t.isAdminMessage=="function"?t.isAdminMessage():t?.messageType==="admin")},s2=function(t){return t&&(t.isUserMessage&&typeof t.isUserMessage=="function"?t.isUserMessage():t?.messageType==="user")},zs=function(t){return!!t&&(t.isFileMessage&&typeof t.isFileMessage=="function"?t.isFileMessage():t?.messageType==="file")},il=function(t){return t&&(t.isMultipleFilesMessage&&typeof t.isMultipleFilesMessage=="function"?t.isMultipleFilesMessage():t.messageType==="file"&&Object.prototype.hasOwnProperty.call(t,"fileInfoList"))},pX={default:"default"};N6={},N6[pX.default]="ui_container_type__default";var mX=function(t){return!t||!s2(t)?!1:!!t.ogMetaData&&!!(t.ogMetaData.url||t.ogMetaData.title||t.ogMetaData.description||t.ogMetaData.defaultImage)},Q0=function(t){return!t||!zs(t)?!1:zT(t.type)},Zx=function(t){return!t||!zs(t)?!1:Q0(t)&&kp(t.type)},qT=function(t){return!t||!zs(t)?!1:Q0(t)&&a2(t.type)},T6=function(t){return!t||!zs(t)?!1:Q0(t)&&Xx(t.type)},gX=function(t){return!t||!zs(t)?!1:hX(t.type)},vX=function(t){return t?!!t.mimeType&&(kp(t.mimeType)||Xx(t.mimeType)):!1},_X=function(t){return/^audio\//.test(t)},yX=function(t){return/^voice\//.test(t)},k1=function(t){var n,e,r,i;if(!t||!zs(t)||!t.type)return!1;var a=t.type.split(";"),s=a[0],l=a[1];if(!_X(s))return!1;if(l){var c=l.split("="),d=c[0],p=c[1];return d==="sbu_type"&&p==="voice"}return yX((i=(r=(e=(n=t?.metaArrays)===null||n===void 0?void 0:n.find(function(g){return g.key==="KEY_INTERNAL_MESSAGE_TYPE"}))===null||e===void 0?void 0:e.value)===null||r===void 0?void 0:r[0])!==null&&i!==void 0?i:"")},bX=function(t){return s2(t)&&t?.updatedAt>0},EX=function(t){return fX(t)?th.ADMIN:s2(t)?mX(t)?th.OG:th.TEXT:il(t)?th.MULTIPLE_FILES:zs(t)?Q0(t)?th.THUMBNAIL:k1(t)?uX.VOICE:th.FILE:th.UNKNOWN},CX=function(t,n){return Array.isArray(n)?et(et([],t,!0),n,!0):(t.push(n),t)},wX=function(t){return Array.isArray(t)?t.reduce(CX,[]).join(" "):t},S6;(function(t){t.normal="normal",t.mention="mention",t.url="url"})(S6||(S6={}));var NX=function(t,n){if(Array.isArray(t)&&Array.isArray(n)&&t.length===n.length){for(var e=0;e<t.length;e++)if(t[e]!==n[e])return!1;return!0}return!1},TX="sendbird-app__layout",SX=60,AX=(function(t){IR(n,t);function n(e){var r=t.call(this,e)||this;return r.menuRef=O.createRef(),r.setupEvents=function(){var i=r.props.closeDropdown,a=r.menuRef,s=function(l){var c,d;a?.current&&!(!((d=(c=a?.current)===null||c===void 0?void 0:c.contains)===null||d===void 0)&&d.call(c,l.target))&&i?.()};r.setState({handleClickOutside:s}),document.addEventListener("mousedown",s)},r.cleanUpEvents=function(){var i=r.state.handleClickOutside;document.removeEventListener("mousedown",i)},r.getMenuPosition=function(){var i,a,s,l=r.props,c=l.parentRef,d=l.openLeft,p=document.getElementById(TX),g=((i=p?.getBoundingClientRect)===null||i===void 0?void 0:i.call(p))||{top:0,left:0,width:window.innerWidth,height:window.innerHeight},_=(s=(a=c?.current)===null||a===void 0?void 0:a.getBoundingClientRect)===null||s===void 0?void 0:s.call(a),y=(_?.x||_?.left||0)-g.left,C=(_?.y||_?.top||0)-g.top,w={top:C,left:y};if(!r.menuRef.current)return w;var A=r.menuRef.current.getBoundingClientRect();if(C+A.height+SX>g.height&&(w.top-=A.height),y+A.width>g.width&&!d&&(w.left-=A.width),w.top<0&&(w.top=A.height<g.height?(g.height-A.height)/2:0),w.top+=32,d){var M=Number.isNaN(A.width-30)?108:A.width-30;w.left-=M}return w.left<0&&(w.left=A.width<g.width?(g.width-A.width)/2:0),r.setState({menuStyle:w}),w},r.state={menuStyle:{top:0,left:0},handleClickOutside:function(){}},r}return n.prototype.componentDidMount=function(){this.setupEvents(),this.getMenuPosition()},n.prototype.componentWillUnmount=function(){this.cleanUpEvents()},n.prototype.render=function(){var e=document.getElementById(OX);if(!e)return O.createElement(O.Fragment,null);var r=this.state.menuStyle,i=this.props,a=i.children,s=i.style,l=i.className,c=l===void 0?"":l,d=i.testID,p=i.id;return q3.createPortal(O.createElement("div",{className:Bi(MX,c),"data-testid":d,id:p},O.createElement("div",{className:"sendbird-dropdown__menu-backdrop"}),O.createElement("ul",{className:"".concat(c," sendbird-dropdown__menu"),ref:this.menuRef,style:ke({display:"inline-block",position:"fixed",left:"".concat(Math.round(r.left),"px"),top:"".concat(Math.round(r.top),"px")},s),"data-testid":"sendbird-dropdown-menu"},a)),e)},n})(O.Component);k.createContext(void 0);var IX=function(t){var n=t.className,e=t.disabled,r=t.tabIndex,i=r===void 0?0:r,a=t.testID,s=t.onClick,l=t.children,c=function(d){!e&&s&&s(d)};return O.createElement("li",{className:Bi("sendbird-menu-item",n),role:"menuitem","aria-disabled":e,"data-testid":a,tabIndex:i,onClick:c,onKeyDown:function(d){d.code==="Enter"&&c(d)}},O.createElement(jt,{className:"sendbird-menu-item__text",type:Ft.SUBTITLE_2,color:e?pt.ONBACKGROUND_4:pt.ONBACKGROUND_1},l))},MX="sendbird-observing-message-menu",Bu=AX,Na=function(t){var n=t.className,e=n===void 0?"":n,r=t.children,i=t.onClick,a=t.disable,s=a===void 0?!1:a,l=t.dataSbId,c=l===void 0?"":l,d=t.testID;return O.createElement(IX,{className:Bi.apply(void 0,et(et([],Array.isArray(e)?e:[e],!1),["sendbird-dropdown__menu-item",s?"disable":""],!1)),disabled:s,testID:d??c,onClick:i},r)},OX="sendbird-dropdown-portal";function zu(t){var n=t.menuTrigger,e=t.menuItems,r=t.isOpen,i=t.onClick,a=k.useState(!1),s=a[0],l=a[1];return O.createElement("div",{className:"sendbird-context-menu",onClick:i},n?.(function(){return l(!s)}),(s||r)&&e(function(){return l(!1)}))}var kX=O.createContext({disableUserProfile:!0,isOpenChannel:!1}),$0=function(){return k.useContext(kX)},RX=10,DX=15,v0="@",xX=1,A6;(function(t){t.PARENT="PARENT",t.THREAD="THREAD"})(A6||(A6={}));var WT=function(t){return t?t.isFrozen&&t.myRole!=="operator":!1},R1=function(t){return t?t.myMutedState==="muted":!1},I6=function(t,n){var e,r,i,a;return n&&Array.isArray((r=(e=t?.lastMessage)===null||e===void 0?void 0:e.extendedMessagePayload)===null||r===void 0?void 0:r.suggested_replies)&&!!(!((a=(i=t?.lastMessage)===null||i===void 0?void 0:i.extendedMessagePayload)===null||a===void 0)&&a.disable_chat_input)},PX=function(t){return t<=xX},M6=function(t,n){return n&&t.some(function(e){var r;return!!e.messageForm&&!e.messageForm.isSubmitted&&!!(!((r=e.extendedMessagePayload)===null||r===void 0)&&r.disable_chat_input)&&PX(e.messageForm.version)})},No;(function(t){t.CHANNEL="CHANNEL",t.THREAD="THREAD"})(No||(No={}));var Jx=function(t,n){return!n||n.length===0?!0:n.includes(t)};function UX(t){return Jx(No.CHANNEL,t)}function LX(t){return Jx(No.THREAD,t)}var KT;(function(t){t.USER_UPDATED="USER_UPDATED",t.SEND_MESSAGE_START="SEND_MESSAGE_START",t.SEND_MESSAGE_FAILED="SEND_MESSAGE_FAILED",t.SEND_USER_MESSAGE="SEND_USER_MESSAGE",t.SEND_FILE_MESSAGE="SEND_FILE_MESSAGE",t.ON_FILE_INFO_UPLOADED="ON_FILE_INFO_UPLOADED",t.UPDATE_USER_MESSAGE="UPDATE_USER_MESSAGE",t.DELETE_MESSAGE="DELETE_MESSAGE",t.LEAVE_CHANNEL="LEAVE_CHANNEL",t.CREATE_CHANNEL="CREATE_CHANNEL",t.UPDATE_OPEN_CHANNEL="UPDATE_OPEN_CHANNEL"})(KT||(KT={}));var To=KT;k.createContext(null);var O6;(function(t){t.Text="text",t.Bubble="bubble"})(O6||(O6={}));function X0(t){var n=t.className,e=n===void 0?"":n,r=t.width,i=r===void 0?"26px":r,a=t.height,s=a===void 0?"26px":a,l=t.children,c=t.testID;return O.createElement("div",{className:et(et([],Array.isArray(e)?e:[e],!0),["sendbird-loader"],!1).join(" "),"data-testid":c,style:{width:typeof i=="string"?i:"".concat(i,"px"),height:typeof s=="string"?s:"".concat(s,"px")}},l||O.createElement(tn,{type:Gt.SPINNER,width:"26px",height:"26px"}))}var ma={LOADING:"LOADING",NO_CHANNELS:"NO_CHANNELS",NO_MESSAGES:"NO_MESSAGES",WRONG:"WRONG",SEARCH_IN:"SEARCH_IN",SEARCHING:"SEARCHING",NO_RESULTS:"NO_RESULTS"};function FX(t){var n=t.className,e=n===void 0?"":n,r=t.type,i=t.iconSize,a=t.searchInString,s=a===void 0?"":a,l=t.retryToConnect,c=k.useContext(Zc).stringSet;return O.createElement("div",{className:et(et([],Array.isArray(e)?e:[e],!0),["sendbird-place-holder"],!1).join(" ")},r===ma.LOADING&&O.createElement(X0,{width:i||"48px",height:i||"48px"},O.createElement(tn,{type:Gt.SPINNER,fillColor:Wt.PRIMARY,width:i||"48px",height:i||"48px"})),(r===ma.NO_CHANNELS||r===ma.NO_MESSAGES||r===ma.WRONG)&&O.createElement("div",{className:"sendbird-place-holder__body"},r===ma.NO_CHANNELS&&O.createElement(tn,{className:"sendbird-place-holder__body__icon",type:Gt.CHAT,fillColor:Wt.ON_BACKGROUND_3,width:i||"64px",height:i||"64px"}),r===ma.WRONG&&O.createElement(tn,{className:"sendbird-place-holder__body__icon",type:Gt.ERROR,fillColor:Wt.ON_BACKGROUND_3,width:i||"64px",height:i||"64px"}),r===ma.NO_MESSAGES&&O.createElement(tn,{className:"sendbird-place-holder__body__icon",type:Gt.MESSAGE,fillColor:Wt.ON_BACKGROUND_3,width:i||"64px",height:i||"64px"}),O.createElement(jt,{className:"sendbird-place-holder__body__text",type:Ft.BODY_1,color:pt.ONBACKGROUND_2},r===ma.NO_CHANNELS&&c.PLACE_HOLDER__NO_CHANNEL,r===ma.WRONG&&c.PLACE_HOLDER__WRONG,r===ma.NO_MESSAGES&&c.PLACE_HOLDER__NO_MESSAGES),l&&O.createElement("div",{className:"sendbird-place-holder__body__reconnect",role:"button",onClick:l,onKeyPress:l,tabIndex:0},O.createElement(tn,{className:"sendbird-place-holder__body__reconnect__icon",type:Gt.REFRESH,fillColor:Wt.PRIMARY,width:"20px",height:"20px"}),O.createElement(jt,{className:"sendbird-place-holder__body__reconnect__text",type:Ft.BUTTON_1,color:pt.PRIMARY},c.PLACE_HOLDER__RETRY_TO_CONNECT))),(r===ma.NO_RESULTS||r===ma.SEARCH_IN||r===ma.SEARCHING)&&O.createElement("div",{className:"sendbird-place-holder__body--align-top"},r===ma.SEARCH_IN&&O.createElement("div",{className:"sendbird-place-holder__body--align-top__text"},O.createElement(jt,{className:"sendbird-place-holder__body--align-top__text__search-in",type:Ft.BUTTON_2,color:pt.ONBACKGROUND_2},c.SEARCH_IN),O.createElement(jt,{className:"sendbird-place-holder__body--align-top__text__channel-name",type:Ft.BUTTON_2,color:pt.PRIMARY},"'".concat(s)),O.createElement(jt,{className:"sendbird-place-holder__body--align-top__text__quote",type:Ft.BUTTON_2,color:pt.PRIMARY},"'")),r===ma.SEARCHING&&O.createElement(jt,{className:"sendbird-place-hlder__body--align-top__searching",type:Ft.BODY_1,color:pt.ONBACKGROUND_2},c.SEARCHING),r===ma.NO_RESULTS&&O.createElement(jt,{className:"sendbird-place-hlder__body--align-top__no-result",type:Ft.BODY_1,color:pt.ONBACKGROUND_2},c.NO_SEARCHED_MESSAGE)))}var eP=(function(t){if(t!==null)return typeof t=="number"?"".concat(t,"px"):t});function k6(t,n,e){var r;return"min(".concat(n??e,", ").concat((r=eP(t))!==null&&r!==void 0?r:e,")")}function HX(t){var n=t.width,e=t.height,r=t.maxSideLength,i=t.defaultMinLength,a=k.useMemo(function(){return k6(n,r,i)},[n]),s=k.useMemo(function(){return k6(e,r,i)},[e]);return[a,s]}var jX=function(){var t=k.useState(!1),n=t[0],e=t[1],r=k.useState(null),i=r[0],a=r[1],s=k.useCallback(function(l){l!==null&&a(l)},[]);return k.useEffect(function(){if(i){var l=new IntersectionObserver(function(c){var d=c[0];e(d.isIntersecting)});return l.observe(i),function(){l.disconnect()}}},[i]),[s,n]},GX=function(){var t=k.useRef(!1),n=jX(),e=n[0],r=n[1];return r&&(t.current=!0),[e,t.current]};function R6(t,n){return t===void 0&&(t=!1),n===void 0&&(n=null),t?"50%":eP(n)}var vo=function(t){var n=t.className,e=n===void 0?"":n,r=t.url,i=t.alt,a=i===void 0?"":i,s=t.width,l=s===void 0?null:s,c=t.maxSideLength,d=c===void 0?null:c,p=t.height,g=p===void 0?null:p,_=t.circle,y=_===void 0?!1:_,C=t.fixedSize,w=C===void 0?!1:C,A=t.placeHolder,M=A===void 0?null:A,I=t.defaultComponent,D=I===void 0?null:I,P=t.borderRadius,H=P===void 0?null:P,L=t.onLoad,G=L===void 0?vi:L,Y=t.onError,F=Y===void 0?vi:Y,ne=t.shadeOnHover,J=t.isUploaded,re=J===void 0?!0:J,Oe=GX(),Z=Oe[0],ue=Oe[1],q=ue?r:null,le=k.useState(!1),pe=le[0],Pe=le[1],qe=k.useState(!0),$=qe[0],fe=qe[1],Ie=HX({width:l,height:g,maxSideLength:d,defaultMinLength:"400px"}),We=Ie[0],Ne=Ie[1],He=function(){return typeof M=="function"?M({style:{width:"100%",minWidth:We,maxWidth:w?We:"400px",height:Ne,position:"absolute",display:"flex",justifyContent:"center",alignItems:"center"}}):M},tt=function(){return typeof D=="function"?D():D},At=function(){var bt=q?{backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"cover",backgroundImage:"url(".concat(q,")")}:{};return O.createElement("div",{className:"sendbird-image-renderer__image",style:ke({width:"100%",minWidth:We,maxWidth:w?We:"400px",height:Ne,position:"absolute",borderRadius:R6(y,H)},bt)})};return We&&Ne&&O.createElement("div",{ref:Z,className:et(et([],Array.isArray(e)?e:[e],!0),["sendbird-image-renderer"],!1).join(" "),style:{width:"100%",minWidth:We,maxWidth:w?We:"400px",height:Ne}},$&&He(),!q||pe?tt():At(),ne&&O.createElement("div",{className:"sendbird-multiple-files-image-renderer__image-cover",style:ke({borderRadius:R6(y,H)},re?{}:{display:"inline-flex"})}),q&&O.createElement(VX,{src:q,alt:a,onLoadStart:function(){fe(!0),Pe(!1)},onLoad:function(){fe(!1),Pe(!1),G()},onError:function(){fe(!1),Pe(!0),F()}}))},VX=function(t){var n=t.src,e=t.alt,r=t.onLoadStart,i=r===void 0?vi:r,a=t.onLoad,s=a===void 0?vi:a,l=t.onError,c=l===void 0?vi:l,d=k.useRef({currSrc:n,prevSrc:n,loadFailure:!1});return d.current.currSrc!==n&&(d.current.prevSrc=d.current.currSrc,d.current.currSrc=n),k.useLayoutEffect(function(){if(n){var p=d.current.prevSrc!==d.current.currSrc,g=d.current.loadFailure;(p||g)&&i()}},[n,navigator.onLine]),O.createElement("img",{className:"sendbird-image-renderer__hidden-image-loader",src:n,alt:e,onLoad:function(){d.current.loadFailure=!1,s()},onError:function(){d.current.loadFailure=!0,c()}})},D1=function(t){if(typeof t=="number")return t;if(typeof t=="string"){var n=Number.parseFloat(t);if(!Number.isNaN(n))return n}return NaN},BX=function(t){var n=t.width,e=t.height,r=t.text,i=D1(n),a=D1(e);return typeof i=="number"&&!Number.isNaN(i)&&(i*=.575),typeof a=="number"&&!Number.isNaN(a)&&(a*=.575),O.createElement("div",{className:Bi("sendbird-avatar-img--default",r&&"text"),style:{width:n,height:e}},r?O.createElement("div",{className:"sendbird-avatar-text"},r):O.createElement(tn,{type:Gt.USER,fillColor:Wt.CONTENT,width:i,height:a}))},Cc="sendbird-avatar-img",zX=function(t){var n=t.src,e=n===void 0?"":n,r=t.alt,i=r===void 0?"":r,a=t.height,s=t.width,l=t.customDefaultComponent,c=function(){return l?l({width:s,height:a}):O.createElement(BX,{width:s,height:a})};return typeof e=="string"?O.createElement(vo,{className:Cc,url:e,height:a,width:s,alt:i,defaultComponent:c}):e&&e.length?e.length===1?O.createElement(vo,{className:Cc,url:e[0],height:a,width:s,alt:i,defaultComponent:c}):e.length===2?O.createElement("div",{className:"sendbird-avatar--inner__two-child"},O.createElement(vo,{className:Cc,url:e[0],height:a,width:s,alt:i,defaultComponent:c}),O.createElement(vo,{className:Cc,url:e[1],height:a,width:s,alt:i,defaultComponent:c})):e.length===3?O.createElement(O.Fragment,null,O.createElement("div",{className:"sendbird-avatar--inner__three-child--upper"},O.createElement(vo,{className:Cc,url:e[0],height:a,width:s,alt:i,defaultComponent:c})),O.createElement("div",{className:"sendbird-avatar--inner__three-child--lower"},O.createElement(vo,{className:Cc,url:e[1],height:a,width:s,alt:i,defaultComponent:c}),O.createElement(vo,{className:Cc,url:e[2],height:a,width:s,alt:i,defaultComponent:c}))):O.createElement("div",{className:"sendbird-avatar--inner__four-child"},e.slice(0,4).map(function(d,p){return O.createElement(vo,{className:Cc,url:d,height:a,width:s,alt:i,key:"".concat(d,"-").concat(p),defaultComponent:c})})):O.createElement(vo,{className:Cc,url:"",height:a,width:s,alt:i,defaultComponent:c})};function qX(t,n){var e=t.className,r=e===void 0?"":e,i=t.src,a=i===void 0?"":i,s=t.alt,l=s===void 0?"":s,c=t.width,d=c===void 0?"56px":c,p=t.height,g=p===void 0?"56px":p,_=t.zIndex,y=_===void 0?0:_,C=t.left,w=C===void 0?"":C,A=t.bottom,M=A===void 0?"":A,I=t.onClick,D=t.customDefaultComponent;return O.createElement("div",{className:et(et([],Array.isArray(r)?r:[r],!0),["sendbird-avatar"],!1).join(" "),role:"button",ref:n,style:{height:g,width:d,zIndex:y,left:w,bottom:M},onClick:I,onKeyDown:I,tabIndex:0},O.createElement(zX,{src:a,width:d,height:g,alt:l,customDefaultComponent:D}))}var zc=O.forwardRef(qX),Bl;(function(t){t.ONBACKGROUND_1="ONBACKGROUND_1",t.ONBACKGROUND_2="ONBACKGROUND_2",t.ONBACKGROUND_3="ONBACKGROUND_3",t.ONBACKGROUND_4="ONBACKGROUND_4",t.ONCONTENT_1="ONCONTENT_1",t.PRIMARY="PRIMARY",t.ERROR="ERROR"})(Bl||(Bl={}));var YT=function(t){switch(t){case Bl.ONBACKGROUND_1:return"sendbird-color--onbackground-1";case Bl.ONBACKGROUND_2:return"sendbird-color--onbackground-2";case Bl.ONBACKGROUND_3:return"sendbird-color--onbackground-3";case Bl.ONBACKGROUND_4:return"sendbird-color--onbackground-4";case Bl.ONCONTENT_1:return"sendbird-color--oncontent-1";case Bl.PRIMARY:return"sendbird-color--primary";case Bl.ERROR:return"sendbird-color--error";default:return""}},TS=function(t){var n=t.className,e=n===void 0?"":n,r=t.color,i=r===void 0?Bl.ONBACKGROUND_1:r,a=t.disabled,s=a===void 0?!1:a,l=t.disableUnderline,c=l===void 0?!1:l,d=t.onClick,p=d===void 0?function(){}:d,g=t.children;return O.createElement("div",{className:et(et([],Array.isArray(e)?e:[e],!0),[YT(i),c?"sendbird-textbutton--not-underline":"sendbird-textbutton",s?"sendbird-textbutton--disabled":""],!1).join(" "),role:"button",tabIndex:0,onClick:function(_){return p(_)},onKeyPress:function(_){return p(_)}},g)},WX=function(t){var n,e=t.className,r=t.renderLeft,i=t.renderRight,a=t.renderMiddle,s=!1;try{s=(n=Jc?.())===null||n===void 0?void 0:n.isMobile}catch{}return O.createElement("div",{className:Bi("sendbird-ui-header",e),"data-testid":"sendbird-ui-header"},r?O.createElement("div",{className:Bi("sendbird-ui-header__left",s?"sendbird-ui-header--is-mobile":"sendbird-ui-header--is-desktop")},r?.()):null,O.createElement("div",{className:"sendbird-ui-header__middle"},a?.()),i?O.createElement("div",{className:Bi("sendbird-ui-header__right",s?"sendbird-ui-header--is-mobile":"sendbird-ui-header--is-desktop")},i?.()):null)},KX=function(t){var n=t.title,e=t.subtitle,r=t.onClickSubtitle;return O.createElement("div",{className:"sendbird-ui-header__middle"},n&&O.createElement(jt,{className:"sendbird-ui-header__middle__title",type:Ft.H_2,color:pt.ONBACKGROUND_1},n),e&&(r?O.createElement(TS,{className:"sendbird-ui-header__middle__subtitle__container",onClick:r,disableUnderline:!0},O.createElement(jt,{className:"sendbird-ui-header__middle__subtitle",type:Ft.CAPTION_3,color:pt.ONBACKGROUND_2},e)):O.createElement(jt,{className:"sendbird-ui-header__middle__subtitle",type:Ft.BODY_1,color:pt.ONBACKGROUND_2},e)))},YX=function(t){var n=t.className,e=t.onClick,r=t.type,i=t.color,a=t.width,s=a===void 0?"32px":a,l=t.height,c=l===void 0?"32px":l,d=t.renderIcon,p=d===void 0?function(g){return O.createElement(tP,ke({},g))}:d;return O.createElement(Fc,{className:n,width:s,height:c,onClick:e},p({type:r,color:i}))},tP=function(t){var n=t.className,e=t.type,r=t.color,i=t.width,a=i===void 0?"22px":i,s=t.height,l=s===void 0?"22px":s,c=t.onClick,d=c===void 0?vi:c;return O.createElement(tn,{className:n,type:e,fillColor:r,width:a,height:l,onClick:function(p){return d?.(p)}})};Object.assign(WX,{Title:KX,IconButton:YX,Icon:tP});function QX(t){return Sa(1,arguments),t instanceof Date||O1(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function $X(t){if(Sa(1,arguments),!QX(t)&&typeof t!="number")return!1;var n=Xl(t);return!isNaN(Number(n))}function wp(t){if(t===null||t===!0||t===!1)return NaN;var n=Number(t);return isNaN(n)?n:n<0?Math.ceil(n):Math.floor(n)}function XX(t,n){Sa(2,arguments);var e=Xl(t).getTime(),r=wp(n);return new Date(e+r)}function ZX(t,n){Sa(2,arguments);var e=wp(n);return XX(t,-e)}var JX=864e5;function eZ(t){Sa(1,arguments);var n=Xl(t),e=n.getTime();n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0);var r=n.getTime(),i=e-r;return Math.floor(i/JX)+1}function x1(t){Sa(1,arguments);var n=1,e=Xl(t),r=e.getUTCDay(),i=(r<n?7:0)+r-n;return e.setUTCDate(e.getUTCDate()-i),e.setUTCHours(0,0,0,0),e}function nP(t){Sa(1,arguments);var n=Xl(t),e=n.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(e+1,0,4),r.setUTCHours(0,0,0,0);var i=x1(r),a=new Date(0);a.setUTCFullYear(e,0,4),a.setUTCHours(0,0,0,0);var s=x1(a);return n.getTime()>=i.getTime()?e+1:n.getTime()>=s.getTime()?e:e-1}function tZ(t){Sa(1,arguments);var n=nP(t),e=new Date(0);e.setUTCFullYear(n,0,4),e.setUTCHours(0,0,0,0);var r=x1(e);return r}var nZ=6048e5;function rZ(t){Sa(1,arguments);var n=Xl(t),e=x1(n).getTime()-tZ(n).getTime();return Math.round(e/nZ)+1}var iZ={};function o2(){return iZ}function P1(t,n){var e,r,i,a,s,l,c,d;Sa(1,arguments);var p=o2(),g=wp((e=(r=(i=(a=n?.weekStartsOn)!==null&&a!==void 0?a:n==null||(s=n.locale)===null||s===void 0||(l=s.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&i!==void 0?i:p.weekStartsOn)!==null&&r!==void 0?r:(c=p.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&e!==void 0?e:0);if(!(g>=0&&g<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var _=Xl(t),y=_.getUTCDay(),C=(y<g?7:0)+y-g;return _.setUTCDate(_.getUTCDate()-C),_.setUTCHours(0,0,0,0),_}function rP(t,n){var e,r,i,a,s,l,c,d;Sa(1,arguments);var p=Xl(t),g=p.getUTCFullYear(),_=o2(),y=wp((e=(r=(i=(a=n?.firstWeekContainsDate)!==null&&a!==void 0?a:n==null||(s=n.locale)===null||s===void 0||(l=s.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&i!==void 0?i:_.firstWeekContainsDate)!==null&&r!==void 0?r:(c=_.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&e!==void 0?e:1);if(!(y>=1&&y<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var C=new Date(0);C.setUTCFullYear(g+1,0,y),C.setUTCHours(0,0,0,0);var w=P1(C,n),A=new Date(0);A.setUTCFullYear(g,0,y),A.setUTCHours(0,0,0,0);var M=P1(A,n);return p.getTime()>=w.getTime()?g+1:p.getTime()>=M.getTime()?g:g-1}function aZ(t,n){var e,r,i,a,s,l,c,d;Sa(1,arguments);var p=o2(),g=wp((e=(r=(i=(a=n?.firstWeekContainsDate)!==null&&a!==void 0?a:n==null||(s=n.locale)===null||s===void 0||(l=s.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&i!==void 0?i:p.firstWeekContainsDate)!==null&&r!==void 0?r:(c=p.locale)===null||c===void 0||(d=c.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&e!==void 0?e:1),_=rP(t,n),y=new Date(0);y.setUTCFullYear(_,0,g),y.setUTCHours(0,0,0,0);var C=P1(y,n);return C}var sZ=6048e5;function oZ(t,n){Sa(1,arguments);var e=Xl(t),r=P1(e,n).getTime()-aZ(e,n).getTime();return Math.round(r/sZ)+1}function Er(t,n){for(var e=t<0?"-":"",r=Math.abs(t).toString();r.length<n;)r="0"+r;return e+r}var Zd={y:function(t,n){var e=t.getUTCFullYear(),r=e>0?e:1-e;return Er(n==="yy"?r%100:r,n.length)},M:function(t,n){var e=t.getUTCMonth();return n==="M"?String(e+1):Er(e+1,2)},d:function(t,n){return Er(t.getUTCDate(),n.length)},a:function(t,n){var e=t.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return e.toUpperCase();case"aaa":return e;case"aaaaa":return e[0];default:return e==="am"?"a.m.":"p.m."}},h:function(t,n){return Er(t.getUTCHours()%12||12,n.length)},H:function(t,n){return Er(t.getUTCHours(),n.length)},m:function(t,n){return Er(t.getUTCMinutes(),n.length)},s:function(t,n){return Er(t.getUTCSeconds(),n.length)},S:function(t,n){var e=n.length,r=t.getUTCMilliseconds(),i=Math.floor(r*Math.pow(10,e-3));return Er(i,n.length)}},eg={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},lZ={G:function(t,n,e){var r=t.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return e.era(r,{width:"abbreviated"});case"GGGGG":return e.era(r,{width:"narrow"});default:return e.era(r,{width:"wide"})}},y:function(t,n,e){if(n==="yo"){var r=t.getUTCFullYear(),i=r>0?r:1-r;return e.ordinalNumber(i,{unit:"year"})}return Zd.y(t,n)},Y:function(t,n,e,r){var i=rP(t,r),a=i>0?i:1-i;if(n==="YY"){var s=a%100;return Er(s,2)}return n==="Yo"?e.ordinalNumber(a,{unit:"year"}):Er(a,n.length)},R:function(t,n){var e=nP(t);return Er(e,n.length)},u:function(t,n){var e=t.getUTCFullYear();return Er(e,n.length)},Q:function(t,n,e){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"Q":return String(r);case"QQ":return Er(r,2);case"Qo":return e.ordinalNumber(r,{unit:"quarter"});case"QQQ":return e.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return e.quarter(r,{width:"narrow",context:"formatting"});default:return e.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,n,e){var r=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"q":return String(r);case"qq":return Er(r,2);case"qo":return e.ordinalNumber(r,{unit:"quarter"});case"qqq":return e.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return e.quarter(r,{width:"narrow",context:"standalone"});default:return e.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,n,e){var r=t.getUTCMonth();switch(n){case"M":case"MM":return Zd.M(t,n);case"Mo":return e.ordinalNumber(r+1,{unit:"month"});case"MMM":return e.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return e.month(r,{width:"narrow",context:"formatting"});default:return e.month(r,{width:"wide",context:"formatting"})}},L:function(t,n,e){var r=t.getUTCMonth();switch(n){case"L":return String(r+1);case"LL":return Er(r+1,2);case"Lo":return e.ordinalNumber(r+1,{unit:"month"});case"LLL":return e.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return e.month(r,{width:"narrow",context:"standalone"});default:return e.month(r,{width:"wide",context:"standalone"})}},w:function(t,n,e,r){var i=oZ(t,r);return n==="wo"?e.ordinalNumber(i,{unit:"week"}):Er(i,n.length)},I:function(t,n,e){var r=rZ(t);return n==="Io"?e.ordinalNumber(r,{unit:"week"}):Er(r,n.length)},d:function(t,n,e){return n==="do"?e.ordinalNumber(t.getUTCDate(),{unit:"date"}):Zd.d(t,n)},D:function(t,n,e){var r=eZ(t);return n==="Do"?e.ordinalNumber(r,{unit:"dayOfYear"}):Er(r,n.length)},E:function(t,n,e){var r=t.getUTCDay();switch(n){case"E":case"EE":case"EEE":return e.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return e.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return e.day(r,{width:"short",context:"formatting"});default:return e.day(r,{width:"wide",context:"formatting"})}},e:function(t,n,e,r){var i=t.getUTCDay(),a=(i-r.weekStartsOn+8)%7||7;switch(n){case"e":return String(a);case"ee":return Er(a,2);case"eo":return e.ordinalNumber(a,{unit:"day"});case"eee":return e.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return e.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return e.day(i,{width:"short",context:"formatting"});default:return e.day(i,{width:"wide",context:"formatting"})}},c:function(t,n,e,r){var i=t.getUTCDay(),a=(i-r.weekStartsOn+8)%7||7;switch(n){case"c":return String(a);case"cc":return Er(a,n.length);case"co":return e.ordinalNumber(a,{unit:"day"});case"ccc":return e.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return e.day(i,{width:"narrow",context:"standalone"});case"cccccc":return e.day(i,{width:"short",context:"standalone"});default:return e.day(i,{width:"wide",context:"standalone"})}},i:function(t,n,e){var r=t.getUTCDay(),i=r===0?7:r;switch(n){case"i":return String(i);case"ii":return Er(i,n.length);case"io":return e.ordinalNumber(i,{unit:"day"});case"iii":return e.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return e.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return e.day(r,{width:"short",context:"formatting"});default:return e.day(r,{width:"wide",context:"formatting"})}},a:function(t,n,e){var r=t.getUTCHours(),i=r/12>=1?"pm":"am";switch(n){case"a":case"aa":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return e.dayPeriod(i,{width:"narrow",context:"formatting"});default:return e.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,n,e){var r=t.getUTCHours(),i;switch(r===12?i=eg.noon:r===0?i=eg.midnight:i=r/12>=1?"pm":"am",n){case"b":case"bb":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return e.dayPeriod(i,{width:"narrow",context:"formatting"});default:return e.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,n,e){var r=t.getUTCHours(),i;switch(r>=17?i=eg.evening:r>=12?i=eg.afternoon:r>=4?i=eg.morning:i=eg.night,n){case"B":case"BB":case"BBB":return e.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return e.dayPeriod(i,{width:"narrow",context:"formatting"});default:return e.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,n,e){if(n==="ho"){var r=t.getUTCHours()%12;return r===0&&(r=12),e.ordinalNumber(r,{unit:"hour"})}return Zd.h(t,n)},H:function(t,n,e){return n==="Ho"?e.ordinalNumber(t.getUTCHours(),{unit:"hour"}):Zd.H(t,n)},K:function(t,n,e){var r=t.getUTCHours()%12;return n==="Ko"?e.ordinalNumber(r,{unit:"hour"}):Er(r,n.length)},k:function(t,n,e){var r=t.getUTCHours();return r===0&&(r=24),n==="ko"?e.ordinalNumber(r,{unit:"hour"}):Er(r,n.length)},m:function(t,n,e){return n==="mo"?e.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):Zd.m(t,n)},s:function(t,n,e){return n==="so"?e.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):Zd.s(t,n)},S:function(t,n){return Zd.S(t,n)},X:function(t,n,e,r){var i=r._originalDate||t,a=i.getTimezoneOffset();if(a===0)return"Z";switch(n){case"X":return x6(a);case"XXXX":case"XX":return qf(a);default:return qf(a,":")}},x:function(t,n,e,r){var i=r._originalDate||t,a=i.getTimezoneOffset();switch(n){case"x":return x6(a);case"xxxx":case"xx":return qf(a);default:return qf(a,":")}},O:function(t,n,e,r){var i=r._originalDate||t,a=i.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+D6(a,":");default:return"GMT"+qf(a,":")}},z:function(t,n,e,r){var i=r._originalDate||t,a=i.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+D6(a,":");default:return"GMT"+qf(a,":")}},t:function(t,n,e,r){var i=r._originalDate||t,a=Math.floor(i.getTime()/1e3);return Er(a,n.length)},T:function(t,n,e,r){var i=r._originalDate||t,a=i.getTime();return Er(a,n.length)}};function D6(t,n){var e=t>0?"-":"+",r=Math.abs(t),i=Math.floor(r/60),a=r%60;if(a===0)return e+String(i);var s=n;return e+String(i)+s+Er(a,2)}function x6(t,n){if(t%60===0){var e=t>0?"-":"+";return e+Er(Math.abs(t)/60,2)}return qf(t,n)}function qf(t,n){var e=n||"",r=t>0?"-":"+",i=Math.abs(t),a=Er(Math.floor(i/60),2),s=Er(i%60,2);return r+a+e+s}var P6=function(t,n){switch(t){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});default:return n.date({width:"full"})}},iP=function(t,n){switch(t){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});default:return n.time({width:"full"})}},uZ=function(t,n){var e=t.match(/(P+)(p+)?/)||[],r=e[1],i=e[2];if(!i)return P6(t,n);var a;switch(r){case"P":a=n.dateTime({width:"short"});break;case"PP":a=n.dateTime({width:"medium"});break;case"PPP":a=n.dateTime({width:"long"});break;default:a=n.dateTime({width:"full"});break}return a.replace("{{date}}",P6(r,n)).replace("{{time}}",iP(i,n))},cZ={p:iP,P:uZ};function dZ(t){var n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),t.getTime()-n.getTime()}var hZ=["D","DD"],fZ=["YY","YYYY"];function pZ(t){return hZ.indexOf(t)!==-1}function mZ(t){return fZ.indexOf(t)!==-1}function U6(t,n,e){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(n,"`) for formatting years to the input `").concat(e,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(n,"`) for formatting years to the input `").concat(e,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(n,"`) for formatting days of the month to the input `").concat(e,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(n,"`) for formatting days of the month to the input `").concat(e,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var gZ=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,vZ=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,_Z=/^'([^]*?)'?$/,yZ=/''/g,bZ=/[a-zA-Z]/;function xg(t,n,e){var r,i,a,s,l,c,d,p,g,_,y,C,w,A,M,I,D,P;Sa(2,arguments);var H=String(n),L=o2(),G=(r=(i=e?.locale)!==null&&i!==void 0?i:L.locale)!==null&&r!==void 0?r:qx,Y=wp((a=(s=(l=(c=e?.firstWeekContainsDate)!==null&&c!==void 0?c:e==null||(d=e.locale)===null||d===void 0||(p=d.options)===null||p===void 0?void 0:p.firstWeekContainsDate)!==null&&l!==void 0?l:L.firstWeekContainsDate)!==null&&s!==void 0?s:(g=L.locale)===null||g===void 0||(_=g.options)===null||_===void 0?void 0:_.firstWeekContainsDate)!==null&&a!==void 0?a:1);if(!(Y>=1&&Y<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var F=wp((y=(C=(w=(A=e?.weekStartsOn)!==null&&A!==void 0?A:e==null||(M=e.locale)===null||M===void 0||(I=M.options)===null||I===void 0?void 0:I.weekStartsOn)!==null&&w!==void 0?w:L.weekStartsOn)!==null&&C!==void 0?C:(D=L.locale)===null||D===void 0||(P=D.options)===null||P===void 0?void 0:P.weekStartsOn)!==null&&y!==void 0?y:0);if(!(F>=0&&F<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!G.localize)throw new RangeError("locale must contain localize property");if(!G.formatLong)throw new RangeError("locale must contain formatLong property");var ne=Xl(t);if(!$X(ne))throw new RangeError("Invalid time value");var J=dZ(ne),re=ZX(ne,J),Oe={firstWeekContainsDate:Y,weekStartsOn:F,locale:G,_originalDate:ne},Z=H.match(vZ).map(function(ue){var q=ue[0];if(q==="p"||q==="P"){var le=cZ[q];return le(ue,G.formatLong)}return ue}).join("").match(gZ).map(function(ue){if(ue==="''")return"'";var q=ue[0];if(q==="'")return EZ(ue);var le=lZ[q];if(le)return!(e!=null&&e.useAdditionalWeekYearTokens)&&mZ(ue)&&U6(ue,n,String(t)),!(e!=null&&e.useAdditionalDayOfYearTokens)&&pZ(ue)&&U6(ue,n,String(t)),le(re,ue,G.localize,Oe);if(q.match(bZ))throw new RangeError("Format string contains an unescaped latin alphabet character `"+q+"`");return ue}).join("");return Z}function EZ(t){var n=t.match(_Z);return n?n[1].replace(yZ,"'"):t}function L6(t){if(t){var n=t.querySelectorAll("[data-sb-mention='true']"),e=Array.from(n);return e}return[]}function aP(t,n){var e=t.ref,r=n.logger,i=e.current,a=k.useState([]),s=a[0],l=a[1];return k.useLayoutEffect(function(){if(i){var c=L6(i);l(c)}},[i]),k.useEffect(function(){var c={childList:!0,subtree:!0},d=function(g){var _=g.length>0;_&&l(L6(i))},p=new MutationObserver(d);return i&&p.observe(i,c),function(){try{p.disconnect()}catch{r.error("useDirtyGetMentions: observer disconnect failed",{observer:p})}}},[i]),s}var CZ=function(t){var n=t.children,e=n===void 0?void 0:n,r=t.className,i=r===void 0?"":r,a=t.separatorColor,s=a===void 0?Bl.ONBACKGROUND_4:a;return O.createElement("div",{className:et(et([],Array.isArray(i)?i:[i],!0),["sendbird-separator"],!1).join(" ")},O.createElement("div",{className:["sendbird-separator__left","".concat(YT(s),"--background-color")].join(" ")}),O.createElement("div",{className:"sendbird-separator__text"},e||O.createElement(jt,{type:Ft.CAPTION_2,color:pt.ONBACKGROUND_2},"Date Separator")),O.createElement("div",{className:["sendbird-separator__right","".concat(YT(s),"--background-color")].join(" ")}))},Kl={Enter:"Enter",ArrowUp:"ArrowUp",ArrowDown:"ArrowDown",Backspace:"Backspace"},QT={ElementNode:1,TextNode:3},vw={Span:"SPAN",Br:"BR",Div:"DIV"};const{entries:sP,setPrototypeOf:F6,isFrozen:wZ,getPrototypeOf:NZ,getOwnPropertyDescriptor:TZ}=Object;let{freeze:bs,seal:ol,create:$T}=Object,{apply:XT,construct:ZT}=typeof Reflect<"u"&&Reflect;bs||(bs=function(t){return t});ol||(ol=function(t){return t});XT||(XT=function(t,n){for(var e=arguments.length,r=new Array(e>2?e-2:0),i=2;i<e;i++)r[i-2]=arguments[i];return t.apply(n,r)});ZT||(ZT=function(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];return new t(...e)});const SE=Es(Array.prototype.forEach),SZ=Es(Array.prototype.lastIndexOf),H6=Es(Array.prototype.pop),x_=Es(Array.prototype.push),AZ=Es(Array.prototype.splice),YE=Es(String.prototype.toLowerCase),_w=Es(String.prototype.toString),yw=Es(String.prototype.match),P_=Es(String.prototype.replace),IZ=Es(String.prototype.indexOf),MZ=Es(String.prototype.trim),Vl=Es(Object.prototype.hasOwnProperty),hs=Es(RegExp.prototype.test),U_=OZ(TypeError);function Es(t){return function(n){n instanceof RegExp&&(n.lastIndex=0);for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];return XT(t,n,r)}}function OZ(t){return function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return ZT(t,e)}}function On(t,n){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:YE;F6&&F6(t,null);let r=n.length;for(;r--;){let i=n[r];if(typeof i=="string"){const a=e(i);a!==i&&(wZ(n)||(n[r]=a),i=a)}t[i]=!0}return t}function kZ(t){for(let n=0;n<t.length;n++)Vl(t,n)||(t[n]=null);return t}function Nc(t){const n=$T(null);for(const[e,r]of sP(t))Vl(t,e)&&(Array.isArray(r)?n[e]=kZ(r):r&&typeof r=="object"&&r.constructor===Object?n[e]=Nc(r):n[e]=r);return n}function L_(t,n){for(;t!==null;){const r=TZ(t,n);if(r){if(r.get)return Es(r.get);if(typeof r.value=="function")return Es(r.value)}t=NZ(t)}function e(){return null}return e}const j6=bs(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),bw=bs(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Ew=bs(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),RZ=bs(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Cw=bs(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),DZ=bs(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),G6=bs(["#text"]),V6=bs(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),ww=bs(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),B6=bs(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),AE=bs(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),xZ=ol(/\{\{[\w\W]*|[\w\W]*\}\}/gm),PZ=ol(/<%[\w\W]*|[\w\W]*%>/gm),UZ=ol(/\$\{[\w\W]*/gm),LZ=ol(/^data-[\-\w.\u00B7-\uFFFF]+$/),FZ=ol(/^aria-[\-\w]+$/),oP=ol(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),HZ=ol(/^(?:\w+script|data):/i),jZ=ol(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),lP=ol(/^html$/i),GZ=ol(/^[a-z][.\w]*(-[.\w]+)+$/i);var z6=Object.freeze({__proto__:null,ARIA_ATTR:FZ,ATTR_WHITESPACE:jZ,CUSTOM_ELEMENT:GZ,DATA_ATTR:LZ,DOCTYPE_NAME:lP,ERB_EXPR:PZ,IS_ALLOWED_URI:oP,IS_SCRIPT_OR_DATA:HZ,MUSTACHE_EXPR:xZ,TMPLIT_EXPR:UZ});const F_={element:1,text:3,progressingInstruction:7,comment:8,document:9},VZ=function(){return typeof window>"u"?null:window},BZ=function(t,n){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let e=null;const r="data-tt-policy-suffix";n&&n.hasAttribute(r)&&(e=n.getAttribute(r));const i="dompurify"+(e?"#"+e:"");try{return t.createPolicy(i,{createHTML(a){return a},createScriptURL(a){return a}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}},q6=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function uP(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:VZ();const n=ee=>uP(ee);if(n.version="3.3.0",n.removed=[],!t||!t.document||t.document.nodeType!==F_.document||!t.Element)return n.isSupported=!1,n;let{document:e}=t;const r=e,i=r.currentScript,{DocumentFragment:a,HTMLTemplateElement:s,Node:l,Element:c,NodeFilter:d,NamedNodeMap:p=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:g,DOMParser:_,trustedTypes:y}=t,C=c.prototype,w=L_(C,"cloneNode"),A=L_(C,"remove"),M=L_(C,"nextSibling"),I=L_(C,"childNodes"),D=L_(C,"parentNode");if(typeof s=="function"){const ee=e.createElement("template");ee.content&&ee.content.ownerDocument&&(e=ee.content.ownerDocument)}let P,H="";const{implementation:L,createNodeIterator:G,createDocumentFragment:Y,getElementsByTagName:F}=e,{importNode:ne}=r;let J=q6();n.isSupported=typeof sP=="function"&&typeof D=="function"&&L&&L.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:re,ERB_EXPR:Oe,TMPLIT_EXPR:Z,DATA_ATTR:ue,ARIA_ATTR:q,IS_SCRIPT_OR_DATA:le,ATTR_WHITESPACE:pe,CUSTOM_ELEMENT:Pe}=z6;let{IS_ALLOWED_URI:qe}=z6,$=null;const fe=On({},[...j6,...bw,...Ew,...Cw,...G6]);let Ie=null;const We=On({},[...V6,...ww,...B6,...AE]);let Ne=Object.seal($T(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),He=null,tt=null;const At=Object.seal($T(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let bt=!0,vr=!0,wn=!1,Rn=!0,xn=!1,Zt=!0,Pn=!1,Zn=!1,fn=!1,_r=!1,jn=!1,Un=!1,gt=!0,Dn=!1;const Cr="user-content-";let gn=!0,rr=!1,Lt={},Wn=null;const cr=On({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let dn=null;const ti=On({},["audio","video","img","source","image","track"]);let _i=null;const Sr=On({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Dr="http://www.w3.org/1998/Math/MathML",Kn="http://www.w3.org/2000/svg",Yn="http://www.w3.org/1999/xhtml";let Jt=Yn,Lr=!1,aa=null;const Mt=On({},[Dr,Kn,Yn],_w);let Dt=On({},["mi","mo","mn","ms","mtext"]),vt=On({},["annotation-xml"]);const Ze=On({},["title","style","font","a","script"]);let Ae=null;const Et=["application/xhtml+xml","text/html"],_t="text/html";let yt=null,Gn=null;const xt=e.createElement("form"),zi=function(ee){return ee instanceof RegExp||ee instanceof Function},sa=function(){let ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Gn&&Gn===ee)){if((!ee||typeof ee!="object")&&(ee={}),ee=Nc(ee),Ae=Et.indexOf(ee.PARSER_MEDIA_TYPE)===-1?_t:ee.PARSER_MEDIA_TYPE,yt=Ae==="application/xhtml+xml"?_w:YE,$=Vl(ee,"ALLOWED_TAGS")?On({},ee.ALLOWED_TAGS,yt):fe,Ie=Vl(ee,"ALLOWED_ATTR")?On({},ee.ALLOWED_ATTR,yt):We,aa=Vl(ee,"ALLOWED_NAMESPACES")?On({},ee.ALLOWED_NAMESPACES,_w):Mt,_i=Vl(ee,"ADD_URI_SAFE_ATTR")?On(Nc(Sr),ee.ADD_URI_SAFE_ATTR,yt):Sr,dn=Vl(ee,"ADD_DATA_URI_TAGS")?On(Nc(ti),ee.ADD_DATA_URI_TAGS,yt):ti,Wn=Vl(ee,"FORBID_CONTENTS")?On({},ee.FORBID_CONTENTS,yt):cr,He=Vl(ee,"FORBID_TAGS")?On({},ee.FORBID_TAGS,yt):Nc({}),tt=Vl(ee,"FORBID_ATTR")?On({},ee.FORBID_ATTR,yt):Nc({}),Lt=Vl(ee,"USE_PROFILES")?ee.USE_PROFILES:!1,bt=ee.ALLOW_ARIA_ATTR!==!1,vr=ee.ALLOW_DATA_ATTR!==!1,wn=ee.ALLOW_UNKNOWN_PROTOCOLS||!1,Rn=ee.ALLOW_SELF_CLOSE_IN_ATTR!==!1,xn=ee.SAFE_FOR_TEMPLATES||!1,Zt=ee.SAFE_FOR_XML!==!1,Pn=ee.WHOLE_DOCUMENT||!1,_r=ee.RETURN_DOM||!1,jn=ee.RETURN_DOM_FRAGMENT||!1,Un=ee.RETURN_TRUSTED_TYPE||!1,fn=ee.FORCE_BODY||!1,gt=ee.SANITIZE_DOM!==!1,Dn=ee.SANITIZE_NAMED_PROPS||!1,gn=ee.KEEP_CONTENT!==!1,rr=ee.IN_PLACE||!1,qe=ee.ALLOWED_URI_REGEXP||oP,Jt=ee.NAMESPACE||Yn,Dt=ee.MATHML_TEXT_INTEGRATION_POINTS||Dt,vt=ee.HTML_INTEGRATION_POINTS||vt,Ne=ee.CUSTOM_ELEMENT_HANDLING||{},ee.CUSTOM_ELEMENT_HANDLING&&zi(ee.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ne.tagNameCheck=ee.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ee.CUSTOM_ELEMENT_HANDLING&&zi(ee.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ne.attributeNameCheck=ee.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ee.CUSTOM_ELEMENT_HANDLING&&typeof ee.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Ne.allowCustomizedBuiltInElements=ee.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),xn&&(vr=!1),jn&&(_r=!0),Lt&&($=On({},G6),Ie=[],Lt.html===!0&&(On($,j6),On(Ie,V6)),Lt.svg===!0&&(On($,bw),On(Ie,ww),On(Ie,AE)),Lt.svgFilters===!0&&(On($,Ew),On(Ie,ww),On(Ie,AE)),Lt.mathMl===!0&&(On($,Cw),On(Ie,B6),On(Ie,AE))),ee.ADD_TAGS&&(typeof ee.ADD_TAGS=="function"?At.tagCheck=ee.ADD_TAGS:($===fe&&($=Nc($)),On($,ee.ADD_TAGS,yt))),ee.ADD_ATTR&&(typeof ee.ADD_ATTR=="function"?At.attributeCheck=ee.ADD_ATTR:(Ie===We&&(Ie=Nc(Ie)),On(Ie,ee.ADD_ATTR,yt))),ee.ADD_URI_SAFE_ATTR&&On(_i,ee.ADD_URI_SAFE_ATTR,yt),ee.FORBID_CONTENTS&&(Wn===cr&&(Wn=Nc(Wn)),On(Wn,ee.FORBID_CONTENTS,yt)),gn&&($["#text"]=!0),Pn&&On($,["html","head","body"]),$.table&&(On($,["tbody"]),delete He.tbody),ee.TRUSTED_TYPES_POLICY){if(typeof ee.TRUSTED_TYPES_POLICY.createHTML!="function")throw U_('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof ee.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw U_('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');P=ee.TRUSTED_TYPES_POLICY,H=P.createHTML("")}else P===void 0&&(P=BZ(y,i)),P!==null&&typeof H=="string"&&(H=P.createHTML(""));bs&&bs(ee),Gn=ee}},yi=On({},[...bw,...Ew,...RZ]),qs=On({},[...Cw,...DZ]),Cs=function(ee){let Xe=D(ee);(!Xe||!Xe.tagName)&&(Xe={namespaceURI:Jt,tagName:"template"});const Be=YE(ee.tagName),Pt=YE(Xe.tagName);return aa[ee.namespaceURI]?ee.namespaceURI===Kn?Xe.namespaceURI===Yn?Be==="svg":Xe.namespaceURI===Dr?Be==="svg"&&(Pt==="annotation-xml"||Dt[Pt]):!!yi[Be]:ee.namespaceURI===Dr?Xe.namespaceURI===Yn?Be==="math":Xe.namespaceURI===Kn?Be==="math"&&vt[Pt]:!!qs[Be]:ee.namespaceURI===Yn?Xe.namespaceURI===Kn&&!vt[Pt]||Xe.namespaceURI===Dr&&!Dt[Pt]?!1:!qs[Be]&&(Ze[Be]||!yi[Be]):!!(Ae==="application/xhtml+xml"&&aa[ee.namespaceURI]):!1},qi=function(ee){x_(n.removed,{element:ee});try{D(ee).removeChild(ee)}catch{A(ee)}},Wi=function(ee,Xe){try{x_(n.removed,{attribute:Xe.getAttributeNode(ee),from:Xe})}catch{x_(n.removed,{attribute:null,from:Xe})}if(Xe.removeAttribute(ee),ee==="is")if(_r||jn)try{qi(Xe)}catch{}else try{Xe.setAttribute(ee,"")}catch{}},rt=function(ee){let Xe=null,Be=null;if(fn)ee="<remove></remove>"+ee;else{const Kt=yw(ee,/^[\r\n\t ]+/);Be=Kt&&Kt[0]}Ae==="application/xhtml+xml"&&Jt===Yn&&(ee='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ee+"</body></html>");const Pt=P?P.createHTML(ee):ee;if(Jt===Yn)try{Xe=new _().parseFromString(Pt,Ae)}catch{}if(!Xe||!Xe.documentElement){Xe=L.createDocument(Jt,"template",null);try{Xe.documentElement.innerHTML=Lr?H:Pt}catch{}}const hn=Xe.body||Xe.documentElement;return ee&&Be&&hn.insertBefore(e.createTextNode(Be),hn.childNodes[0]||null),Jt===Yn?F.call(Xe,Pn?"html":"body")[0]:Pn?Xe.documentElement:hn},Ct=function(ee){return G.call(ee.ownerDocument||ee,ee,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null)},ct=function(ee){return ee instanceof g&&(typeof ee.nodeName!="string"||typeof ee.textContent!="string"||typeof ee.removeChild!="function"||!(ee.attributes instanceof p)||typeof ee.removeAttribute!="function"||typeof ee.setAttribute!="function"||typeof ee.namespaceURI!="string"||typeof ee.insertBefore!="function"||typeof ee.hasChildNodes!="function")},Ot=function(ee){return typeof l=="function"&&ee instanceof l};function ht(ee,Xe,Be){SE(ee,Pt=>{Pt.call(n,Xe,Be,Gn)})}const Vt=function(ee){let Xe=null;if(ht(J.beforeSanitizeElements,ee,null),ct(ee))return qi(ee),!0;const Be=yt(ee.nodeName);if(ht(J.uponSanitizeElement,ee,{tagName:Be,allowedTags:$}),Zt&&ee.hasChildNodes()&&!Ot(ee.firstElementChild)&&hs(/<[/\w!]/g,ee.innerHTML)&&hs(/<[/\w!]/g,ee.textContent)||ee.nodeType===F_.progressingInstruction||Zt&&ee.nodeType===F_.comment&&hs(/<[/\w]/g,ee.data))return qi(ee),!0;if(!(At.tagCheck instanceof Function&&At.tagCheck(Be))&&(!$[Be]||He[Be])){if(!He[Be]&&ni(Be)&&(Ne.tagNameCheck instanceof RegExp&&hs(Ne.tagNameCheck,Be)||Ne.tagNameCheck instanceof Function&&Ne.tagNameCheck(Be)))return!1;if(gn&&!Wn[Be]){const Pt=D(ee)||ee.parentNode,hn=I(ee)||ee.childNodes;if(hn&&Pt){const Kt=hn.length;for(let ln=Kt-1;ln>=0;--ln){const Ir=w(hn[ln],!0);Ir.__removalCount=(ee.__removalCount||0)+1,Pt.insertBefore(Ir,M(ee))}}}return qi(ee),!0}return ee instanceof c&&!Cs(ee)||(Be==="noscript"||Be==="noembed"||Be==="noframes")&&hs(/<\/no(script|embed|frames)/i,ee.innerHTML)?(qi(ee),!0):(xn&&ee.nodeType===F_.text&&(Xe=ee.textContent,SE([re,Oe,Z],Pt=>{Xe=P_(Xe,Pt," ")}),ee.textContent!==Xe&&(x_(n.removed,{element:ee.cloneNode()}),ee.textContent=Xe)),ht(J.afterSanitizeElements,ee,null),!1)},Nn=function(ee,Xe,Be){if(gt&&(Xe==="id"||Xe==="name")&&(Be in e||Be in xt))return!1;if(!(vr&&!tt[Xe]&&hs(ue,Xe))&&!(bt&&hs(q,Xe))&&!(At.attributeCheck instanceof Function&&At.attributeCheck(Xe,ee))){if(!Ie[Xe]||tt[Xe]){if(!(ni(ee)&&(Ne.tagNameCheck instanceof RegExp&&hs(Ne.tagNameCheck,ee)||Ne.tagNameCheck instanceof Function&&Ne.tagNameCheck(ee))&&(Ne.attributeNameCheck instanceof RegExp&&hs(Ne.attributeNameCheck,Xe)||Ne.attributeNameCheck instanceof Function&&Ne.attributeNameCheck(Xe,ee))||Xe==="is"&&Ne.allowCustomizedBuiltInElements&&(Ne.tagNameCheck instanceof RegExp&&hs(Ne.tagNameCheck,Be)||Ne.tagNameCheck instanceof Function&&Ne.tagNameCheck(Be))))return!1}else if(!_i[Xe]&&!hs(qe,P_(Be,pe,""))&&!((Xe==="src"||Xe==="xlink:href"||Xe==="href")&&ee!=="script"&&IZ(Be,"data:")===0&&dn[ee])&&!(wn&&!hs(le,P_(Be,pe,"")))&&Be)return!1}return!0},ni=function(ee){return ee!=="annotation-xml"&&yw(ee,Pe)},Fr=function(ee){ht(J.beforeSanitizeAttributes,ee,null);const{attributes:Xe}=ee;if(!Xe||ct(ee))return;const Be={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Ie,forceKeepAttr:void 0};let Pt=Xe.length;for(;Pt--;){const hn=Xe[Pt],{name:Kt,namespaceURI:ln,value:Ir}=hn,Hr=yt(Kt),Br=Ir;let Ln=Kt==="value"?Br:MZ(Br);if(Be.attrName=Hr,Be.attrValue=Ln,Be.keepAttr=!0,Be.forceKeepAttr=void 0,ht(J.uponSanitizeAttribute,ee,Be),Ln=Be.attrValue,Dn&&(Hr==="id"||Hr==="name")&&(Wi(Kt,ee),Ln=Cr+Ln),Zt&&hs(/((--!?|])>)|<\/(style|title|textarea)/i,Ln)){Wi(Kt,ee);continue}if(Hr==="attributename"&&yw(Ln,"href")){Wi(Kt,ee);continue}if(Be.forceKeepAttr)continue;if(!Be.keepAttr){Wi(Kt,ee);continue}if(!Rn&&hs(/\/>/i,Ln)){Wi(Kt,ee);continue}xn&&SE([re,Oe,Z],Ws=>{Ln=P_(Ln,Ws," ")});const oa=yt(ee.nodeName);if(!Nn(oa,Hr,Ln)){Wi(Kt,ee);continue}if(P&&typeof y=="object"&&typeof y.getAttributeType=="function"&&!ln)switch(y.getAttributeType(oa,Hr)){case"TrustedHTML":{Ln=P.createHTML(Ln);break}case"TrustedScriptURL":{Ln=P.createScriptURL(Ln);break}}if(Ln!==Br)try{ln?ee.setAttributeNS(ln,Kt,Ln):ee.setAttribute(Kt,Ln),ct(ee)?qi(ee):H6(n.removed)}catch{Wi(Kt,ee)}}ht(J.afterSanitizeAttributes,ee,null)},Ar=function ee(Xe){let Be=null;const Pt=Ct(Xe);for(ht(J.beforeSanitizeShadowDOM,Xe,null);Be=Pt.nextNode();)ht(J.uponSanitizeShadowNode,Be,null),Vt(Be),Fr(Be),Be.content instanceof a&&ee(Be.content);ht(J.afterSanitizeShadowDOM,Xe,null)};return n.sanitize=function(ee){let Xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Be=null,Pt=null,hn=null,Kt=null;if(Lr=!ee,Lr&&(ee="<!-->"),typeof ee!="string"&&!Ot(ee))if(typeof ee.toString=="function"){if(ee=ee.toString(),typeof ee!="string")throw U_("dirty is not a string, aborting")}else throw U_("toString is not a function");if(!n.isSupported)return ee;if(Zn||sa(Xe),n.removed=[],typeof ee=="string"&&(rr=!1),rr){if(ee.nodeName){const Hr=yt(ee.nodeName);if(!$[Hr]||He[Hr])throw U_("root node is forbidden and cannot be sanitized in-place")}}else if(ee instanceof l)Be=rt("<!---->"),Pt=Be.ownerDocument.importNode(ee,!0),Pt.nodeType===F_.element&&Pt.nodeName==="BODY"||Pt.nodeName==="HTML"?Be=Pt:Be.appendChild(Pt);else{if(!_r&&!xn&&!Pn&&ee.indexOf("<")===-1)return P&&Un?P.createHTML(ee):ee;if(Be=rt(ee),!Be)return _r?null:Un?H:""}Be&&fn&&qi(Be.firstChild);const ln=Ct(rr?ee:Be);for(;hn=ln.nextNode();)Vt(hn),Fr(hn),hn.content instanceof a&&Ar(hn.content);if(rr)return ee;if(_r){if(jn)for(Kt=Y.call(Be.ownerDocument);Be.firstChild;)Kt.appendChild(Be.firstChild);else Kt=Be;return(Ie.shadowroot||Ie.shadowrootmode)&&(Kt=ne.call(r,Kt,!0)),Kt}let Ir=Pn?Be.outerHTML:Be.innerHTML;return Pn&&$["!doctype"]&&Be.ownerDocument&&Be.ownerDocument.doctype&&Be.ownerDocument.doctype.name&&hs(lP,Be.ownerDocument.doctype.name)&&(Ir="<!DOCTYPE "+Be.ownerDocument.doctype.name+`>
`+Ir),xn&&SE([re,Oe,Z],Hr=>{Ir=P_(Ir,Hr," ")}),P&&Un?P.createHTML(Ir):Ir},n.setConfig=function(){let ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};sa(ee),Zn=!0},n.clearConfig=function(){Gn=null,Zn=!1},n.isValidAttribute=function(ee,Xe,Be){Gn||sa({});const Pt=yt(ee),hn=yt(Xe);return Nn(Pt,hn,Be)},n.addHook=function(ee,Xe){typeof Xe=="function"&&x_(J[ee],Xe)},n.removeHook=function(ee,Xe){if(Xe!==void 0){const Be=SZ(J[ee],Xe);return Be===-1?void 0:AZ(J[ee],Be,1)[0]}return H6(J[ee])},n.removeHooks=function(ee){J[ee]=[]},n.removeAllHooks=function(){J=q6()},n}var cP=uP(),zZ="sendbird-mention-user-label",qZ="sendbird-text-message-item-body",WZ="sendbird-og-message-item-body__text-bubble";function JT(t){var n=t.userId,e=t.nickname,r='<span data-userid="'.concat(n,'" data-sb-mention="true" class="').concat(zZ,'">').concat(e,"</span>"),i=cP(window),a=i.sanitize(r),s=a.split(" "),l=s[0],c=s.slice(1),d=et([l,'contenteditable="false"'],c,!0).join(" ");return d}var U0=function(t){return t===void 0&&(t=""),t?t.replace(/[<>]/g,function(n){return n==="<"?"&#60;":"&#62;"}):""},e3=function(t){return t?Array.from(t):[]};function KZ(t){var n;return t&&((n=t.isGroupChannel)===null||n===void 0?void 0:n.call(t))&&!t.isBroadcast&&!t.isSuper}function Nw(t){return t.nodeType===QT.ElementNode}function W6(t){var n="",e="",r=!1;return t.forEach(function(i){if(Nw(i)&&i.nodeName===vw.Span){var a=i.innerText,s=i.dataset,l=s===void 0?{}:s,c=l.userid,d=c===void 0?"":c;d&&(r=!0),n+=a,e+="".concat(v0,"{").concat(d,"}")}else if(Nw(i)&&i.nodeName===vw.Br)n+=`
`,e+=`
`;else if(Nw(i)&&i.nodeName===vw.Div){var p=i.textContent,g=p===void 0?"":p;n+=`
`.concat(g),e+=`
`.concat(g)}else{var _=i.textContent,g=_===void 0?"":_;n+=g,e+=g}}),{messageText:n,mentionTemplate:e,isMentionedMessage:r}}function YZ(t){var n=t.map(function(e){var r=e.text,i=e.userId;return i?JT({userId:i,nickname:r}):U0(r)}).join(" ").concat(" ");document.execCommand("insertHTML",!1,n)}var dP="sendbird-word__mention",hP="sendbird-mention-user-label",fP=".".concat(dP,", .").concat(hP);function K6(t,n){var e=et([t],Array.from(t.querySelectorAll(n)),!0).find(function(r){return r.matches(n)});return e}function QZ(t){var n=K6(t,".".concat(WZ));if(n)return e3(n.childNodes);var e=K6(t,".".concat(qZ));return e3(e?e.childNodes:t.childNodes)}function $Z(t){return!!t?.querySelector(fP)}function XZ(t){var n=t?.reduce(function(e,r){var i,a,s,l=r?.innerText;if(r instanceof Text&&(s=!1,l=(i=r.textContent)!==null&&i!==void 0?i:""),r instanceof HTMLElement&&(s=r.classList.contains(dP)||r.classList.contains(hP)?r:r.querySelector(fP)),s){var c=r?.innerText,d=(a=s.dataset)===null||a===void 0?void 0:a.userid;return et(et([],e,!0),[{text:c,userId:d}],!1)}return et(et([],e,!0),[{text:l}],!1)},[]);return n}function ZZ(t,n){var e={},r=n.members;return t.forEach(function(i){if(i.userId){var a=r.find(function(s){return s.userId===i.userId});a&&(e[i.userId]=a)}}),Object.values(e)}function Y6(t){var n=window.getSelection();if(n&&n.rangeCount>0){var e=n.getRangeAt(n.rangeCount-1);e.deleteContents();var r=document.createTextNode(t+"");e.insertNode(r),e.setStart(r,r.length),e.collapse(!0),n.removeAllRanges(),n.addRange(e)}}function JZ(t){var n=document.createElement("div");return n.innerHTML=t,n}function eJ(t){var n=t.ref,e=t.setIsInput,r=t.channel,i=t.setMentionedUsers;return k.useCallback(function(a){a.preventDefault();var s=a.clipboardData.getData("text/html"),l=a.clipboardData.getData("text")||tJ(a);if(!s){Y6(U0(l)),e(!0);return}var c=cP(window),d=c.sanitize(s),p=JZ(d);if(!$Z(p)){Y6(U0(l)),p.remove(),e(!0);return}var g=QZ(p),_=XZ(g),y=r.isGroupChannel()?ZZ(_,r):[];i(y),YZ(_),p.remove(),e(!0)},[n,e,r,i])}function tJ(t){var n=t.clipboardData.getData("text/uri-list");return n.length===0?"":n.split(`
`).reduce(function(e,r){var i=r.trim();return i!==""&&!i.startsWith("#")&&(e+=i+`
`),e},"")}var Z0="@",Ii={string:"string",mention:"mention",url:"url",undetermined:"undetermined",markdown:"markdown"},nJ=/\[(.*?)\]\((.*?)\)|\*\*(.*?)\*\*/g;function rJ(t,n){var e=n||Z0;return RegExp("(".concat(t.map(function(r){var i=r.userId.replace(/([.*+?^${}()|[\]\\])/g,"\\$1");return"".concat(e,"\\{").concat(i,"\\}")}).join("|"),")"),"g")}function iJ(t){var n=t.tokens,e=t.mentionedUsers,r=e===void 0?[]:e,i=t.templatePrefix,a=i===void 0?Z0:i;if(!r?.length)return n;var s=rJ(r,a),l=n.map(function(c){if(c.type!==Ii.undetermined)return c;var d=c.value,p=d.split(s),g=p.map(function(_){if(_.match(s)){var y=r.find(function(w){return"@{".concat(w?.userId,"}")===_}),C=y?.nickname||"(No name)";return{value:C,type:Ii.mention,userId:y?.userId}}else return{value:_,type:Ii.undetermined}});return g}).flat();return l}function aJ(t){var n=/(?:https?:\/\/|www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.(xn--)?[a-z]{2,20}\b([-a-zA-Z0-9@:%_+[\],.~#?&/=]*[-a-zA-Z0-9@:%_+~#?&/=])*/g,e=t.map(function(r){if(r.type!==Ii.undetermined)return r;var i=r.value,a=i===void 0?"":i,s=Array.from(a.matchAll(n)),l=s.map(function(p){var g,_=p[0],y=(g=p.index)!==null&&g!==void 0?g:0,C=y+_.length;return{text:_,start:y,end:C}}),c=[{value:a,type:Ii.string}],d=0;return l.forEach(function(p){var g=p.text,_=p.start,y=p.end,C=c.pop().value,w=C.slice(0,_-d),A=g,M=C.slice(y-d);w.length>0&&c.push({value:w,type:Ii.string}),c.push({value:A,type:Ii.url}),M.length>0&&c.push({value:M,type:Ii.string}),d=y}),c}).flat();return e}function pP(t){var n=t,e=[];return n.forEach(function(r){if(r.type===Ii.mention||r.type===Ii.markdown){e.push(r);return}var i=r.value,a=Array.from(i.matchAll(nJ)),s=a.map(function(p){var g,_=p[0],y=(g=p.index)!==null&&g!==void 0?g:0,C=y+_.length;return{text:_,start:y,end:C,groups:p.filter(function(w){return typeof w=="string"})}}),l=i,c=0;if(s.forEach(function(p){var g=p.text,_=p.start,y=p.end,C=p.groups,w={type:Ii.undetermined,value:l.slice(0,_-c)};e.push(w);var A;g.startsWith("[")?A="url":g.startsWith("**")&&(A="bold");var M={type:Ii.markdown,markdownType:A,value:g,groups:C};e.push(M),l=i.slice(y),c=y}),l){var d={type:Ii.undetermined,value:l};e.push(d)}}),e}function mP(t){var n=t.reduce(function(e,r){var i=e[e.length-1];return i?.type===Ii.string&&r.type===Ii.string?(i.value="".concat(i.value).concat(r.value),e):et(et([],e,!0),[r],!1)},[]);return n}function gP(t){var n=t.messageText,e=t.mentionedUsers,r=e===void 0?[]:e,i=t.templatePrefix,a=i===void 0?Z0:i,s=t.includeMarkdown,l=s===void 0?!1:s,c=[{type:Ii.undetermined,value:n}],d=iJ({tokens:c,mentionedUsers:r,templatePrefix:a}),p=aJ(l?pP(d):d),g=mP(p);return g}function Q6(t){var n=t.messageText,e=[{type:Ii.undetermined,value:n}],r=mP(pP(e));return r}function sJ(t){var n="",e=t.split(`
`),r=e.map(function(a){var s,l,c=((s=a.match(/^\s*/))===null||s===void 0?void 0:s[0])||"",d=((l=a.match(/\s*$/))===null||l===void 0?void 0:l[0])||"",p=c.replace(/ /g,n),g=d.replace(/ /g,n);return p+a.trim()+g}),i=r.join(`
`);return i}var U1;(function(t){t.BASE="base",t.GROUP="group",t.OPEN="open"})(U1||(U1={}));var oJ=function(t){var n=t.channel,e=t.config,r=Bc(n?.channelType).with(U1.GROUP,function(){var i;return(i=e?.groupChannel)===null||i===void 0?void 0:i.enableDocument}).with(U1.OPEN,function(){var i;return(i=e?.openChannel)===null||i===void 0?void 0:i.enableDocument}).otherwise(function(){return!0});return r},lJ="sendbird-message-input-text-field",fs=function(){return null},Tw=function(t){t&&t.current&&(t.current.innerHTML="")},$6={targetString:"",startNodeIndex:null,startOffsetIndex:null,endNodeIndex:null,endOffsetIndex:null},l2=O.forwardRef(function(t,n){var e,r,i,a,s,l=t.channel,c=t.className,d=c===void 0?"":c,p=t.messageFieldId,g=p===void 0?"":p,_=t.isEdit,y=_===void 0?!1:_,C=t.isMobile,w=C===void 0?!1:C,A=t.isMentionEnabled,M=A===void 0?!1:A,I=t.isVoiceMessageEnabled,D=I===void 0?!0:I,P=t.isSelectingMultipleFilesEnabled,H=P===void 0?!1:P,L=t.disabled,G=L===void 0?!1:L,Y=t.message,F=Y===void 0?null:Y,ne=t.placeholder,J=ne===void 0?"":ne,re=t.maxLength,Oe=re===void 0?5e3:re,Z=t.onFileUpload,ue=Z===void 0?fs:Z,q=t.onSendMessage,le=q===void 0?fs:q,pe=t.onUpdateMessage,Pe=pe===void 0?fs:pe,qe=t.onCancelEdit,$=qe===void 0?fs:qe,fe=t.onStartTyping,Ie=fe===void 0?fs:fe,We=t.channelUrl,Ne=We===void 0?"":We,He=t.mentionSelectedUser,tt=He===void 0?null:He,At=t.onUserMentioned,bt=At===void 0?fs:At,vr=t.onMentionStringChange,wn=vr===void 0?fs:vr,Rn=t.onMentionedUserIdsUpdated,xn=Rn===void 0?fs:Rn,Zt=t.onVoiceMessageIconClick,Pn=Zt===void 0?fs:Zt,Zn=t.onKeyUp,fn=Zn===void 0?fs:Zn,_r=t.onKeyDown,jn=_r===void 0?fs:_r,Un=t.renderFileUploadIcon,gt=Un===void 0?fs:Un,Dn=t.renderVoiceMessageIcon,Cr=Dn===void 0?fs:Dn,gn=t.renderSendMessageIcon,rr=gn===void 0?fs:gn,Lt=t.setMentionedUsers,Wn=Lt===void 0?fs:Lt,cr=t.acceptableMimeTypes,dn=n&&"current"in n?n:k.useRef(null),ti=k.useRef(null),_i=g||lJ,Sr=Wa().stringSet,Dr=qa().state,Kn=Dr.config,Yn=Dr.eventHandlers,Jt=oJ({channel:l,config:Kn}),Lr=k.useRef(),aa=k.useState(!1),Mt=aa[0],Dt=aa[1],vt=k.useState([]),Ze=vt[0],Ae=vt[1],Et=k.useState(ke({},$6)),_t=Et[0],yt=Et[1],Gn=t?.value;k.useEffect(function(){var rt=dn?.current;Ae([]),Dt(rt?.textContent?rt.textContent.trim().length>0:!1)},[Gn]),k.useEffect(function(){y||(Dt(!1),Tw(dn))},[Ne]),k.useEffect(function(){var rt,Ct;if(y&&F?.messageId){var ct=dn?.current;if(M&&F?.mentionedUsers&&F.mentionedUsers.length>0&&F?.mentionedMessageTemplate&&F.mentionedMessageTemplate.length>0){var Ot=F.mentionedUsers,ht=Ot===void 0?[]:Ot,Vt=gP({messageText:F?.mentionedMessageTemplate,mentionedUsers:ht,includeMarkdown:l.isGroupChannel()&&Kn.groupChannel.enableMarkdownForUserMessage});ct&&(ct.innerHTML=Vt.map(function(Nn){if(Nn.type===Ii.mention){var ni=ht.find(function(Ar){return Ar.userId===Nn.userId}),Fr="".concat(Z0).concat(ni?.nickname||Nn.value||Sr.MENTION_NAME__NO_NAME);return JT({userId:Nn.userId,nickname:Fr})}return U0(Nn.value)}).join(""))}else{try{ct&&(ct.innerHTML=(rt=U0(F?.message))!==null&&rt!==void 0?rt:"")}catch{}Ae([])}Dt(ct?.textContent?((Ct=ct?.textContent)===null||Ct===void 0?void 0:Ct.trim().length)>0:!1)}},[y,F]);var xt=k.useCallback(function(){var rt,Ct=dn?.current;if(M&&Ct){var ct=Array.from(Ct.getElementsByClassName("sendbird-mention-user-label")).map(function(Ot){var ht;return(ht=Ot?.dataset)===null||ht===void 0?void 0:ht.userid});(!NX(Ze,ct)||ct.length===0)&&(xn(ct),Ae(ct))}Dt(Ct?.textContent?((rt=Ct.textContent)===null||rt===void 0?void 0:rt.trim().length)>0:!1)},[_t,M]);k.useEffect(function(){var rt,Ct,ct,Ot;if(M&&tt){var ht=_t.targetString,Vt=_t.startNodeIndex,Nn=_t.startOffsetIndex,ni=_t.endNodeIndex,Fr=_t.endOffsetIndex,Ar=dn?.current;if(ht&&Vt!==null&&Nn!==null&&Fr!==null&&ni!==null&&Ar){var ee=e3(Ar?.childNodes),Xe=(Ct=(rt=ee[Vt])===null||rt===void 0?void 0:rt.textContent)!==null&&Ct!==void 0?Ct:"",Be=document.createTextNode(Xe.slice(0,Nn)),Pt=(Ot=(ct=ee[ni])===null||ct===void 0?void 0:ct.textContent)!==null&&Ot!==void 0?Ot:"",hn=Fr&&document.createTextNode("".concat(Pt.slice(Fr))),Kt=JT({userId:tt?.userId,nickname:"".concat(v0).concat(tt?.nickname||Sr.MENTION_NAME__NO_NAME)}),ln=document.createElement("div");ln.innerHTML=Kt;var Ir=et(et(et([],ee.slice(0,Vt),!0),[Be,ln.childNodes[0],hn],!1),ee.slice(ni+1),!0);if(Ar&&(Ar.innerHTML="",Ir.forEach(function(Ln){Ln&&Ar.appendChild(Ln)})),bt(tt),window.getSelection||document.getSelection){var Hr=window.getSelection()||document.getSelection();Hr?.removeAllRanges();var Br=new Range;Br.selectNodeContents(Ar),Br.setStart(Ar.childNodes[Vt+2],1),Br.setEnd(Ar.childNodes[Vt+2],1),Br.collapse(!1),Hr?.addRange(Br),Ar.focus()}yt(ke({},$6)),xt()}}},[tt,M]);var zi=k.useCallback(function(){var rt,Ct,ct=((rt=window?.getSelection)===null||rt===void 0?void 0:rt.call(window))||((Ct=document?.getSelection)===null||Ct===void 0?void 0:Ct.call(document)),Ot=dn?.current;if(ct?.anchorNode===Ot&&wn(""),M&&Ot&&ct&&ct.anchorNode===ct.focusNode&&ct.anchorOffset===ct.focusOffset)for(var ht="",Vt=null,Nn=null,ni=function(ee){var Xe=Ot.childNodes[ee];if(Xe.nodeType===QT.TextNode){var Be=(function(){var ln;return Xe===ct.anchorNode?Xe?.textContent?Xe?.textContent.slice(0,ct.anchorOffset):"":(ln=Xe?.textContent)!==null&&ln!==void 0?ln:""})();if(ht.length>0)ht+=Be;else{for(var Pt=Be.lastIndexOf(v0),hn=Pt-1;hn>-1&&Be[hn]===v0;hn-=1)Pt=hn;Pt>-1&&(ht=Be,Vt=ee,Nn=Pt)}}else ht="",Vt=null,Nn=null;if(Xe===ct.anchorNode){var Kt=ht&&Nn!==null?ht.slice(Nn):"";return yt({targetString:Kt,startNodeIndex:Vt,startOffsetIndex:Nn,endNodeIndex:ee,endOffsetIndex:ct.anchorOffset}),wn(Kt),{value:void 0}}},Fr=0;Fr<Ot.childNodes.length;Fr+=1){var Ar=ni(Fr);if(typeof Ar=="object")return Ar.value}},[M]),sa=function(){var rt,Ct;try{var ct=dn?.current;if(!y&&ct?.textContent){var Ot=W6(ct.childNodes),ht=Ot.messageText,Vt=Ot.mentionTemplate,Nn=Ot.isMentionedMessage,ni={message:ht,mentionTemplate:Vt};Nn||(ni.mentionTemplate=""),le(ni),Tw(dn),$M(navigator.userAgent)?(ti.current&&ti.current.focus(),requestAnimationFrame(function(){return ct.focus()})):ct.focus(),Dt(!1)}}catch(Fr){(Ct=(rt=Yn?.message)===null||rt===void 0?void 0:rt.onSendMessageFailed)===null||Ct===void 0||Ct.call(rt,F,Fr)}},yi=!(!((r=(e=dn?.current)===null||e===void 0?void 0:e.textContent)===null||r===void 0)&&r.trim()),qs=function(){var rt,Ct;try{var ct=dn?.current,Ot=F?.messageId;if(y&&Ot&&ct){var ht=W6(ct.childNodes),Vt=ht.messageText,Nn=ht.mentionTemplate,ni={messageId:Ot,message:Vt,mentionTemplate:Nn};Pe(ni),Tw(dn)}}catch(Fr){(Ct=(rt=Yn?.message)===null||rt===void 0?void 0:rt.onUpdateMessageFailed)===null||Ct===void 0||Ct.call(rt,F,Fr)}},Cs=eJ({ref:dn,setMentionedUsers:Wn,channel:l,setIsInput:Dt}),qi=function(rt){var Ct,ct,Ot=rt.currentTarget.files;try{Ot&&ue(Array.from(Ot))}catch(ht){(ct=(Ct=Yn?.message)===null||Ct===void 0?void 0:Ct.onFileUploadFailed)===null||ct===void 0||ct.call(Ct,ht)}finally{rt.target.value=""}},Wi=function(){var rt,Ct=dn,ct=window.getSelection();if(!(!ct||ct.rangeCount===0)){var Ot=ct.getRangeAt(ct.rangeCount-1),ht=Ot.getBoundingClientRect(),Vt=(rt=Ct.current)===null||rt===void 0?void 0:rt.getBoundingClientRect();if(!(!Vt||!Ct.current)){if(ht.bottom>Vt.bottom){var Nn=Math.min(ht.bottom-Vt.bottom,Ct.current.scrollHeight-Ct.current.clientHeight);Ct.current.scrollTop+=Nn}else if(ht.top<Vt.top){var Nn=Math.min(Vt.top-ht.top,Ct.current.scrollTop);Ct.current.scrollTop-=Nn}}}};return O.createElement("form",{className:Bi.apply(void 0,et(et([],Array.isArray(d)?d:[d],!1),[y&&"sendbird-message-input__edit",G&&"sendbird-message-input-form__disabled"],!1))},O.createElement("div",{className:Bi("sendbird-message-input",G&&"sendbird-message-input__disabled"),"data-testid":"sendbird-message-input"},$M(navigator.userAgent)&&O.createElement("input",{id:"ghost-input-reset-ime-cjk",ref:ti,style:{opacity:0,padding:0,margin:0,height:0,border:"none",position:"absolute",top:-9999},defaultValue:"_"}),O.createElement("div",{id:"".concat(_i).concat(y?F?.messageId:""),className:"sendbird-message-input--textarea ".concat(_i),contentEditable:!G,role:"textbox","aria-label":"Text Input",ref:dn,disabled:G,maxLength:Oe,onKeyDown:function(rt){var Ct,ct,Ot,ht,Vt=jn(rt);Vt?rt.preventDefault():(!rt.shiftKey&&rt.key===Kl.Enter&&!w&&!((Ct=dn?.current)===null||Ct===void 0)&&Ct.textContent&&dn.current.textContent.trim().length>0&&((ct=rt?.nativeEvent)===null||ct===void 0?void 0:ct.isComposing)!==!0&&(rt.preventDefault(),sa()),rt.key===Kl.Backspace&&((ht=(Ot=dn?.current)===null||Ot===void 0?void 0:Ot.childNodes)===null||ht===void 0?void 0:ht.length)===2&&!dn.current.childNodes[0].textContent&&dn.current.childNodes[1].nodeType===QT.ElementNode&&dn.current.removeChild(dn.current.childNodes[1]))},onKeyUp:function(rt){var Ct=fn(rt);Ct?rt.preventDefault():zi()},onClick:function(){zi()},onInput:function(){var rt;Ie(),Dt(!((rt=dn?.current)===null||rt===void 0)&&rt.textContent?dn.current.textContent.trim().length>0:!1),xt()},onPaste:function(rt){Cs(rt),setTimeout(Wi)}}),((s=(a=(i=dn?.current)===null||i===void 0?void 0:i.textContent)===null||a===void 0?void 0:a.length)!==null&&s!==void 0?s:0)===0&&O.createElement(jt,{className:"sendbird-message-input--placeholder",type:Ft.BODY_1,color:G?pt.ONBACKGROUND_4:pt.ONBACKGROUND_3},J||Sr.MESSAGE_INPUT__PLACE_HOLDER),!y&&Mt&&O.createElement(Fc,{className:"sendbird-message-input--send",height:"32px",width:"32px",onClick:function(){return sa()},testID:"sendbird-message-input-send-button"},rr?.()||O.createElement(tn,{type:Gt.SEND,fillColor:G?Wt.ON_BACKGROUND_4:Wt.PRIMARY,width:"20px",height:"20px"})),!y&&!Mt&&(gt?.()||Jt&&O.createElement(Fc,{className:Bi("sendbird-message-input--attach",D&&"is-voice-message-enabled"),height:"32px",width:"32px",onClick:function(){var rt,Ct;(Ct=(rt=Lr?.current)===null||rt===void 0?void 0:rt.click)===null||Ct===void 0||Ct.call(rt)}},O.createElement(tn,{type:Gt.ATTACH,fillColor:G?Wt.ON_BACKGROUND_4:Wt.CONTENT_INVERSE,width:"20px",height:"20px"}),O.createElement("input",{className:"sendbird-message-input--attach-input",type:"file",ref:Lr,onChange:function(rt){return qi(rt)},accept:lX(cr),multiple:H&&KZ(l)}))),D&&!y&&!Mt&&O.createElement(Fc,{className:"sendbird-message-input--voice-message",width:"32px",height:"32px",onClick:Pn},Cr?.()||O.createElement(tn,{type:Gt.AUDIO_ON_LINED,fillColor:G?Wt.ON_BACKGROUND_4:Wt.CONTENT_INVERSE,width:"20px",height:"20px"}))),y&&O.createElement("div",{className:"sendbird-message-input--edit-action","data-testid":"sendbird-message-input--edit-action"},O.createElement(Ng,{className:"sendbird-message-input--edit-action__cancel",type:Vi.SECONDARY,size:_h.SMALL,onClick:$},Sr.BUTTON__CANCEL),O.createElement(Ng,{className:"sendbird-message-input--edit-action__save",type:Vi.PRIMARY,size:_h.SMALL,disabled:yi,onClick:function(){return qs()}},Sr.BUTTON__SAVE)))});function X6(t){Sa(1,arguments);var n=Xl(t);return n.setHours(0,0,0,0),n}function uJ(t,n){Sa(2,arguments);var e=X6(t),r=X6(n);return e.getTime()===r.getTime()}var Lf,Ff;Lf={},Lf[js.SENT]=Gt.DONE,Lf[js.DELIVERED]=Gt.DONE_ALL,Lf[js.READ]=Gt.DONE_ALL,Lf[js.FAILED]=Gt.ERROR,Lf[js.PENDING]=void 0,Lf[js.NONE]=void 0;Ff={},Ff[js.SENT]=Wt.SENT,Ff[js.DELIVERED]=Wt.SENT,Ff[js.READ]=Wt.READ,Ff[js.FAILED]=Wt.ERROR,Ff[js.PENDING]=void 0,Ff[js.NONE]=void 0;var cJ=300;function Z6(t){dJ(t)&&t.touches.length<2&&t.preventDefault&&t.preventDefault()}function dJ(t){return t&&"touches"in t}function J0(t,n){var e=t.onLongPress,r=t.onClick,i=n===void 0?{}:n,a=i.delay,s=a===void 0?cJ:a,l=i.shouldPreventDefault,c=l===void 0?!0:l,d=i.shouldStopPropagation,p=d===void 0?!1:d,g=Jc().isMobile,_=k.useState(!1),y=_[0],C=_[1],w=k.useState(!1),A=w[0],M=w[1],I=k.useRef(),D=k.useRef(),P=k.useCallback(function(L){L.persist();var G=ke({},L);M(!1),p&&L.stopPropagation(),c&&L.target&&(L.target.addEventListener("touchend",Z6,{passive:!1}),D.current=L.target),I.current=setTimeout(function(){e(G),C(!0)},s)},[e,s,c,p,g]),H=k.useCallback(function(L,G,Y){G===void 0&&(G=!0),Y===void 0&&(Y=!1),M(!!Y),I?.current&&clearTimeout(I.current),G&&!y&&!A&&r?.(L),C(!1),c&&D.current&&D.current.removeEventListener("touchend",Z6)},[c,r,y,A]);return{onMouseDown:function(L){return P(L)},onMouseUp:function(L){return H(L)},onMouseLeave:function(L){return H(L,!1)},onTouchStart:function(L){return P(L)},onTouchMove:function(L){return H(L,!1,!0)},onTouchEnd:function(L){return H(L)}}}O.forwardRef(function(t,n){var e=t.className,r=t.width,i=t.height,a=t.selected,s=t.dataSbId,l=s===void 0?"":s,c=t.testID,d=t.onClick,p=t.children,g=J0({onLongPress:vi,onClick:d},{shouldPreventDefault:!0,shouldStopPropagation:!0});return O.createElement("div",ke({className:et(et([],Array.isArray(e)?e:[e],!0),["sendbird-reaction-button".concat(a?"--selected":"")],!1).join(" "),ref:n,role:"button",style:{width:r,height:i}},g,{tabIndex:0,"data-sb-id":c??l,"data-testid":c??l}),O.createElement("div",{className:"sendbird-reaction-button__inner"},p))});O.forwardRef(function(t,n){var e=t.className,r=e===void 0?"":e,i=t.testID,a=t.children,s=t.count,l=s===void 0?"":s,c=t.isAdd,d=c===void 0?!1:c,p=t.selected,g=p===void 0?!1:p,_=t.onClick,y=_===void 0?function(){}:_,C=function(){return g&&!d?"--selected":d?"--is-add":""};return O.createElement("div",{className:et(et([],Array.isArray(r)?r:[r],!0),["sendbird-reaction-badge".concat(C())],!1).join(" "),"data-testid":i,role:"button",ref:n,onClick:y,onKeyDown:y,onTouchEnd:y,tabIndex:0},O.createElement("div",{className:"sendbird-reaction-badge__inner"},O.createElement("div",{className:"sendbird-reaction-badge__inner__icon"},a),O.createElement(jt,{className:a&&l?"sendbird-reaction-badge__inner__count":"",type:Ft.CAPTION_3,color:pt.ONBACKGROUND_1},l)))});var hJ=function(t){var n=t.stores,e=n===void 0?{}:n,r=e.sdkStore,i=r===void 0?{}:r,a=i.sdk;return a},fJ=function(t){var n=t.config,e=n===void 0?{}:n,r=e.pubSub;return r},pJ=function(t){return(function(n){return new Promise(function(e,r){var i=hJ(t),a=fJ(t);i||r(new Error("Sdk not found")),i.groupChannel||r(new Error("Not found GroupChannelModule")),i.groupChannel.createChannel&&typeof i.groupChannel.createChannel=="function"||r(new Error('Not found the function "createChannel"')),i.groupChannel.createChannel(n).then(function(s){e(s),a.publish(To.CREATE_CHANNEL,{channel:s})}).catch(r)})})};function ey(t){var n,e,r=t.user,i=t.currentUserId,a=t.disableMessaging,s=a===void 0?!1:a,l=t.onSuccess,c=qa().state,d=pJ(c),p=(n=c?.config)===null||n===void 0?void 0:n.logger,g=k.useContext(Zc).stringSet,_=i||((e=c?.config)===null||e===void 0?void 0:e.userId),y=$0().onStartDirectMessage;return O.createElement("div",{className:"sendbird__user-profile"},O.createElement("section",{className:"sendbird__user-profile-avatar"},O.createElement(zc,{height:"80px",width:"80px",src:r?.profileUrl})),O.createElement("section",{className:"sendbird__user-profile-name"},O.createElement(jt,{type:Ft.H_2,color:pt.ONBACKGROUND_1},r?.nickname||g.NO_NAME)),r?.userId!==_&&!s&&O.createElement("section",{className:"sendbird__user-profile-message"},O.createElement(Ng,{type:Vi.SECONDARY,onClick:function(){var C={isDistinct:!1,invitedUserIds:r?.userId?[r?.userId]:[],operatorUserIds:[_]};l?.(),d(C).then(function(w){p.info("UserProfile, channel create",w),y?.(w)})}},g.USER_PROFILE__MESSAGE)),O.createElement("div",{className:"sendbird__user-profile-separator"}),O.createElement("section",{className:"sendbird__user-profile-userId"},O.createElement(jt,{className:"sendbird__user-profile-userId--label",type:Ft.CAPTION_2,color:pt.ONBACKGROUND_2},g.USER_PROFILE__USER_ID),O.createElement(jt,{className:"sendbird__user-profile-userId--value",type:Ft.BODY_1,color:pt.ONBACKGROUND_1},r?.userId)))}var mJ={message:{},isByMe:!1},vP=O.createContext(mJ),gJ=function(t){var n=t.children,e=t.message,r=t.isByMe,i=r===void 0?!1:r;return O.createElement(vP.Provider,{value:{message:e,isByMe:i}},n)},vJ=function(){var t=O.useContext(vP);if(t===void 0)throw new Error("useMessageContext must be used within a MessageProvider");return t};function _J(t){return Bc(t).when(zs,function(){var n;return(n=t?.type)!==null&&n!==void 0?n:""}).when(il,function(){var n,e;return(e=(n=u2(t))===null||n===void 0?void 0:n.mimeType)!==null&&e!==void 0?e:""}).otherwise(function(){return""})}function u2(t){var n=t.fileInfoList;return n.length>0?n[0]:null}function yJ(t){return Bc(t).when(zs,function(){var n;return(n=t?.name)!==null&&n!==void 0?n:""}).when(il,function(){var n,e;return(e=(n=u2(t))===null||n===void 0?void 0:n.fileName)!==null&&e!==void 0?e:""}).otherwise(function(){return""})}function bJ(t){return Bc(t).when(zs,function(){var n;return(n=t?.url)!==null&&n!==void 0?n:""}).when(il,function(){var n,e;return(e=(n=u2(t))===null||n===void 0?void 0:n.url)!==null&&e!==void 0?e:""}).otherwise(function(){return""})}function EJ(t){return Bc(t).when(zs,function(){return t.thumbnails}).when(il,function(){var n,e;return(e=(n=u2(t))===null||n===void 0?void 0:n.thumbnails)!==null&&e!==void 0?e:[]}).otherwise(function(){return[]})}function CJ(t){var n=EJ(t);return n&&n.length>0?n[0].url:""}function wJ(t,n){var e,r=t.className,i=t.threadInfo,a=t.onClick,s=i.mostRepliedUsers,l=s===void 0?[]:s,c=i.replyCount,d=Wa().stringSet;return O.createElement("div",{className:"sendbird-ui-thread-replies ".concat(r),role:"button",onClick:function(p){a?.(p),p?.stopPropagation()},onKeyDown:function(p){a?.(p),p?.stopPropagation()},ref:n},O.createElement("div",{className:"sendbird-ui-thread-replies__user-profiles"},l.slice(0,4).map(function(p){return O.createElement(zc,{key:p.userId,className:"sendbird-ui-thread-replies__user-profiles__avatar",src:p?.profileUrl,alt:"user profile",width:"20px",height:"20px"})}),l?.length>=5&&O.createElement("div",{className:"sendbird-ui-thread-replies__user-profiles__avatar"},O.createElement(zc,{className:"sendbird-ui-thread-replies__user-profiles__avatar__image",src:(e=l?.[4])===null||e===void 0?void 0:e.profileUrl,alt:"user profile",width:"20px",height:"20px"}),O.createElement("div",{className:"sendbird-ui-thread-replies__user-profiles__avatar__cover"}),O.createElement("div",{className:"sendbird-ui-thread-replies__user-profiles__avatar__plus"},O.createElement(tn,{type:Gt.PLUS,fillColor:Wt.WHITE,width:"16px",height:"16px"})))),c>0&&O.createElement(jt,{className:"sendbird-ui-thread-replies__reply-counts",type:Ft.CAPTION_2,color:pt.PRIMARY},c===1?"".concat(c," ").concat(d.CHANNEL__THREAD_REPLY):"".concat(c>99?d.CHANNEL__THREAD_OVER_MAX:c," ").concat(d.CHANNEL__THREAD_REPLIES)),O.createElement(tn,{className:"sendbird-ui-thread-replies__icon",type:Gt.CHEVRON_RIGHT,fillColor:Wt.PRIMARY,width:"16px",height:"16px"}))}O.forwardRef(wJ);function NJ(t){var n,e,r,i=t.mentionTemplate,a=t.mentionedUserId,s=t.mentionedUserNickname,l=t.isByMe,c=k.useRef(),d=qa().state,p=(n=d?.config)===null||n===void 0?void 0:n.userId,g=(r=(e=d?.stores)===null||e===void 0?void 0:e.sdkStore)===null||r===void 0?void 0:r.sdk,_=p===a,y=k.useState(),C=y[0],w=y[1],A=k.useCallback(function(M){if(C||!g?.createApplicationUserListQuery){M();return}var I=g?.createApplicationUserListQuery({userIdsFilter:[a]});I.next().then(function(D){D?.length>0&&w(D[0]),M()})},[g,a]);return O.createElement(zu,{menuTrigger:function(M){return O.createElement("a",{className:Bi("sendbird-word__mention",_&&"sendbird-word__mention--me"),onClick:function(){return A(M)},ref:c,"data-userid":a,"data-nickname":s,"data-sb-mention":!0},O.createElement(jt,{type:Ft.CAPTION_1,color:l?pt.ONCONTENT_1:pt.ONBACKGROUND_1},"".concat(i).concat(s)))},menuItems:function(M){return O.createElement(Bu,{parentRef:c,parentContainRef:c,closeDropdown:M,style:{paddingTop:"0px",paddingBottom:"0px"}},O.createElement(ey,{user:C,onSuccess:M,currentUserId:p}))}})}var TJ=/https?:\/\//;function _P(t){var n=t.className,e=n===void 0?"":n,r=t.src,i=t.type,a=t.color,s=t.children,l=TJ.test(r)?r:"http://".concat(r);return O.createElement("a",{className:et(et([],Array.isArray(e)?e:[e],!0),["sendbird-link-label",Wx(a)],!1).join(" "),href:l,target:"_blank",rel:"noopener noreferrer",onTouchEnd:function(c){c.preventDefault(),c.nativeEvent.stopImmediatePropagation(),wS(l)}},O.createElement(jt,{className:"sendbird-link-label__label",testID:"sendbird-link-label__label",type:i,color:a},s))}function SJ(t,n,e){return"sb-msg_".concat(t,"_").concat(n,"_").concat(e)}var AJ=["https:","http:","tel:","mailto:"];function IJ(t){var n=decodeURIComponent(t);try{var e=new URL(n).protocol;return AJ.some(function(r){return r===e.toLowerCase()})?n:"#"}catch{!n.startsWith("http://")&&!n.startsWith("https://")&&(n="https://"+n)}return n}function t3(t){var n=t.tokens,e=vJ(),r=e?.message,i=e?.isByMe,a=r.updatedAt,s=r.createdAt;return O.createElement(O.Fragment,null,n?.map(function(l,c){var d=SJ(s,a,c);return Bc(l.type).with(Ii.markdown,function(){var p=l,g=p.groups;return O.createElement("span",{className:"sendbird-word",key:d,"data-testid":"sendbird-ui-word"},Bc(p.markdownType).with("bold",function(){return O.createElement("span",{style:{fontWeight:"bold"}},O.createElement(t3,{tokens:Q6({messageText:g[1]})}))}).with("url",function(){return O.createElement("a",{className:i?"sendbird-label--color-oncontent-1":"sendbird-label--color-onbackground-1",href:IJ(g[2]),target:"_blank",rel:"noopener noreferrer"},O.createElement(t3,{tokens:Q6({messageText:g[1]})}))}).otherwise(function(){return O.createElement(O.Fragment,null)}))}).with(Ii.mention,function(){return O.createElement("span",{className:"sendbird-word",key:d,"data-testid":"sendbird-ui-word"},O.createElement(NJ,{mentionTemplate:Z0,mentionedUserId:l.userId,mentionedUserNickname:l.value,isByMe:i}))}).with(Ii.url,function(){return O.createElement("span",{className:"sendbird-word",key:d,"data-testid":"sendbird-ui-word"},O.createElement(_P,{src:l.value,type:Ft.BODY_1,color:i?pt.ONCONTENT_1:pt.ONBACKGROUND_1},l.value))}).otherwise(function(){return O.createElement(O.Fragment,{key:d},sJ(l.value))})}))}function MJ(t,n){k.useLayoutEffect(function(){var r;(r=t.current)===null||r===void 0||r.focus()},[t.current]);var e=_S(function(r){var i=n[r.key];i?.(r),r.stopPropagation()});return e}var ty={MULTI:"MULTI"};function OJ(t){var n=t.props;if(n.viewerType===ty.MULTI){var e=n,r=e.fileInfoList,i=e.currentIndex;return r[i]}var a=n;return{name:a.name,type:a.type,url:a.url}}function kJ(t){if(t.viewerType!==ty.MULTI){var n=t.onDelete,e=t.isByMe,r=t.disableDelete,i=t.className;return e?O.createElement("div",{className:"sendbird-fileviewer__header__right__actions__delete ".concat(i)},O.createElement(tn,{className:r?"disabled":"",type:Gt.DELETE,fillColor:r?Wt.GRAY:Wt.ON_BACKGROUND_1,height:"24px",width:"24px",onClick:function(a){r||n?.(a)}})):O.createElement(O.Fragment,null)}return O.createElement(O.Fragment,null)}function RJ(t){if(t.viewerType===ty.MULTI){var n=t.onClickLeft,e=t.onClickRight;return O.createElement("div",{className:"sendbird-file-viewer-slider"},O.createElement("div",{className:"sendbird-file-viewer-arrow--left"},O.createElement(tn,{type:Gt.SLIDE_LEFT,fillColor:Wt.ON_BACKGROUND_1,height:wE,width:wE,onClick:function(r){n?.(),r.stopPropagation()}})),O.createElement("div",{className:"sendbird-file-viewer-arrow--right"},O.createElement(tn,{type:Gt.SLIDE_LEFT,fillColor:Wt.ON_BACKGROUND_1,height:wE,width:wE,onClick:function(r){r.stopPropagation(),e?.()}})))}return O.createElement(O.Fragment,null)}var J6=function(t){var n=t.profileUrl,e=t.nickname,r=t.onClose,i=t.onDownloadClick,a=t,s=a.onClickLeft,l=a.onClickRight,c=k.useRef(null),d=MJ(c,{Escape:function(w){return r?.(w)},ArrowLeft:function(){return s?.()},ArrowRight:function(){return l?.()}}),p=OJ({props:t}),g=p.name,_=p.type,y=p.url,C=k.useContext(Zc).stringSet;return O.createElement(NS,{onClose:r},O.createElement("div",{className:"sendbird-fileviewer","data-testid":"sendbird-fileviewer",onKeyDown:d,tabIndex:1,ref:c},O.createElement("div",{className:"sendbird-fileviewer__header"},O.createElement("div",{className:"sendbird-fileviewer__header__left"},O.createElement("div",{className:"sendbird-fileviewer__header__left__avatar"},O.createElement(zc,{height:"32px",width:"32px",src:n})),O.createElement("div",{className:"sendbird-fileviewer__header__left__text-container"},O.createElement(jt,{className:"sendbird-fileviewer__header__left__filename",type:Ft.H_2,color:pt.ONBACKGROUND_1},g),O.createElement(jt,{className:"sendbird-fileviewer__header__left__sender-name",type:Ft.BODY_1,color:pt.ONBACKGROUND_2},e))),O.createElement("div",{className:"sendbird-fileviewer__header__right"},zT(_)&&O.createElement("div",{className:"sendbird-fileviewer__header__right__actions"},O.createElement("a",{className:"sendbird-fileviewer__header__right__actions__download",rel:"noopener noreferrer",href:y,target:"_blank",onClick:i},O.createElement(tn,{type:Gt.DOWNLOAD,fillColor:Wt.ON_BACKGROUND_1,height:"24px",width:"24px"})),O.createElement(kJ,ke({className:"sendbird-fileviewer__header__right__actions__delete"},t))),O.createElement("div",{className:"sendbird-fileviewer__header__right__actions__close"},O.createElement(tn,{type:Gt.CLOSE,fillColor:Wt.ON_BACKGROUND_1,height:"24px",width:"24px",onClick:function(w){return r?.(w)}})))),O.createElement("div",{className:"sendbird-fileviewer__content"},a2(_)&&O.createElement("video",{controls:!0,className:"sendbird-fileviewer__content__video"},O.createElement("source",{src:y,type:_})),kp(_)&&O.createElement("img",{src:y,alt:g,className:t.viewerType===ty.MULTI?"sendbird-fileviewer__content__img__multi":"sendbird-fileviewer__content__img"}),!zT(_)&&O.createElement("div",{className:"sendbird-fileviewer__content__unsupported"},O.createElement(jt,{type:Ft.H_1,color:pt.ONBACKGROUND_1},C?.UI__FILE_VIEWER__UNSUPPORT||"Unsupported message")),O.createElement(RJ,ke({},t)))))};function DJ(t){var n,e,r,i=t.message,a=t.statefulFileInfoList,s=a===void 0?[]:a,l=t.onClose,c=t.isByMe,d=c===void 0?!1:c,p=t.onDelete,g=t.currentIndex,_=t.onClickLeft,y=t.onClickRight,C=t.onDownloadClick;if(il(i)){var w=i;return O.createElement(J6,{profileUrl:w.sender.profileUrl,nickname:w.sender.nickname,viewerType:ty.MULTI,fileInfoList:s.filter(function(A){return A.url}).map(function(A){return{name:A.fileName||"",type:A.mimeType||"",url:A.url||""}}),currentIndex:g||0,onClickLeft:_||vi,onClickRight:y||vi,onClose:l,onDownloadClick:C})}else if(zs(i)){var w=i;return q3.createPortal(O.createElement(J6,{profileUrl:(n=w.sender)===null||n===void 0?void 0:n.profileUrl,nickname:(e=w.sender)===null||e===void 0?void 0:e.nickname,name:w.name,type:w.type,url:w?.url,isByMe:d,disableDelete:(((r=w.threadInfo)===null||r===void 0?void 0:r.replyCount)||0)>0,onClose:l,onDelete:p||vi,onDownloadClick:C}),document.getElementById(Kx))}return O.createElement(O.Fragment,null)}var xJ={PRIMARY:"progress-bar-color--primary"},PJ=function(t){var n=t.className,e=n===void 0?"":n,r=t.disabled,i=r===void 0?!1:r,a=t.maxSize,s=t.currentSize,l=s===void 0?0:s,c=t.colorType,d=c===void 0?xJ.PRIMARY:c,p=k.useMemo(function(){return"".concat(l/a*100,"%")},[l,a]);return O.createElement("div",{className:Bi("sendbird-progress-bar",e,d,i&&"progress-bar--disabled")},O.createElement("div",{className:"sendbird-progress-bar__fill",style:{width:p}}))},UJ=function(t){var n,e=t.key,r=e===void 0?"":e,i=t.channelUrl,a=i===void 0?"":i,s=t.audioFile,l=t.audioFileUrl,c=l===void 0?"":l,d=t.audioFileMimeType,p=d===void 0?Rx:d,g=nQ(a,r),_=aQ(),y=_.play,C=_.pause,w=_.stop,A=_.voicePlayerStore,M=Yx().isRecordable,I=((n=A?.audioStorage)===null||n===void 0?void 0:n[g])||tQ(),D=function(){M||y?.({groupKey:g,audioFile:s,audioFileUrl:c,audioFileMimeType:p})},P=function(){C?.(g)},H=function(L){L===void 0&&(L=""),w?.(L)};return k.useEffect(function(){return function(){var L;if(s||c){var G=document.getElementById(HW);(L=G?.pause)===null||L===void 0||L.call(G)}}},[]),{play:D,pause:P,stop:H,playbackTime:(I?.playbackTime||0)*1e3,duration:(I?.duration||0)*1e3,playingStatus:I.playingStatus}},LJ=function(t){var n=t.className,e=t.time,r=e===void 0?0:e,i=t.labelType,a=i===void 0?Ft.CAPTION_2:i,s=t.labelColor,l=s===void 0?pt.ONCONTENT_1:s,c=r<0?0:r,d=Math.floor(c/36e5),p=Math.floor(c%36e5/6e4),g=Math.floor(c%36e5%6e4/1e3);return O.createElement("div",{className:"sendbird-ui-play-time ".concat(n)},O.createElement(jt,{type:a,color:l},"".concat(d?d+":":"").concat(p<10?"0":"").concat(p||"0",":").concat(g<10?"0":"").concat(g)))},FJ=Object.defineProperty,HJ=Object.defineProperties,jJ=Object.getOwnPropertyDescriptors,L1=Object.getOwnPropertySymbols,yP=Object.prototype.hasOwnProperty,bP=Object.prototype.propertyIsEnumerable,ek=(t,n,e)=>n in t?FJ(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e,lt=(t,n)=>{for(var e in n||(n={}))yP.call(n,e)&&ek(t,e,n[e]);if(L1)for(var e of L1(n))bP.call(n,e)&&ek(t,e,n[e]);return t},pp=(t,n)=>HJ(t,jJ(n)),GJ=(t,n)=>{var e={};for(var r in t)yP.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&L1)for(var r of L1(t))n.indexOf(r)<0&&bP.call(t,r)&&(e[r]=t[r]);return e},c2=(t=>(t.Box="box",t.Text="text",t.Image="image",t.TextButton="textButton",t.ImageButton="imageButton",t.Carousel="carouselView",t.Cascade="cascadeView",t))(c2||{}),F1=(t,n)=>typeof n[t]!="string"?{}:{[t]:VJ(n[t])};function VJ(t){return t.startsWith("#")?t.length===9?`#${t.slice(3)}${t[1]}${t[2]}`:t.length===5?`#${t.slice(2)}${t[1]}`:t:t}var Sw=t=>t?{viewStyle:lt(lt(lt({},t),F1("backgroundColor",t)),F1("borderColor",t))}:{},BJ=t=>t?{textStyle:lt(lt({},t),F1("color",t))}:{},zJ=t=>t?{imageStyle:lt(lt({},t),F1("tintColor",t))}:{},qJ={run(t){return t.type==="text"||t.type==="textButton"?lt(lt(lt({},t),Sw(t.viewStyle)),BJ(t.textStyle)):t.type==="imageButton"||t.type==="image"?lt(lt(lt({},t),Sw(t.viewStyle)),zJ(t.imageStyle)):lt(lt({},t),Sw(t.viewStyle))}},uh=t=>typeof t=="string"?!Number.isNaN(Number(t)):typeof t=="number"&&!Number.isNaN(t),yh=(t,n)=>n[t]===void 0||n[t]===null?{}:uh(n[t])?{[t]:Number(n[t])}:{},tk=(t,n)=>n?{[t]:{left:uh(n.left)?Number(n.left):n.left,right:uh(n.right)?Number(n.right):n.right,top:uh(n.top)?Number(n.top):n.top,bottom:uh(n.bottom)?Number(n.bottom):n.bottom}}:{},nk=(t,n)=>n?{[t]:{type:n.type,value:uh(n.value)?Number(n.value):n.value}}:{},WJ=t=>t?{metaData:{pixelWidth:uh(t.pixelWidth)?Number(t.pixelWidth):t.pixelWidth,pixelHeight:uh(t.pixelHeight)?Number(t.pixelHeight):t.pixelHeight}}:{},KJ=t=>t?{viewStyle:lt(lt(lt(lt(lt({},t),yh("borderWidth",t)),yh("radius",t)),tk("margin",t.margin)),tk("padding",t.padding))}:{},YJ=t=>t?{textStyle:lt(lt(lt({},t),yh("size",t)),yh("weight",t))}:{},QJ=t=>t?{carouselStyle:lt(lt(lt({},t),yh("spacing",t)),yh("maxChildWidth",t))}:{},$J=t=>t?{cascadeStyle:lt(lt({},t),yh("spacing",t))}:{},ny=t=>lt(lt(lt({},nk("width",t.width)),nk("height",t.height)),KJ(t.viewStyle)),XJ=t=>lt(lt(lt({},ny(t)),YJ(t.textStyle)),yh("maxTextLines",t)),ZJ=t=>lt(lt({},ny(t)),WJ(t.metaData)),JJ=t=>pp(lt(lt({},ny(t)),QJ(t.carouselStyle)),{items:t.items.map(n=>pp(lt({},n),{body:pp(lt({},n.body),{items:n.body.items.map(e=>SS.run(e))})}))}),eee=t=>pp(lt(lt({},ny(t)),$J(t.cascadeStyle)),{items:t.items.map(n=>pp(lt({},n),{body:pp(lt({},n.body),{items:n.body.items.map(e=>SS.run(e))})}))}),SS={run(t){return t.type==="text"||t.type==="textButton"?lt(lt({},t),XJ(t)):t.type==="imageButton"||t.type==="image"?lt(lt({},t),ZJ(t)):t.type==="carouselView"?lt(lt({},t),JJ(t)):t.type==="cascadeView"?lt(lt({},t),eee(t)):lt(lt({},t),ny(t))}},tee=()=>{},EP=t=>{var n;let e=t?.defaultMapper||tee,r={defaultMapper:e,mapBoxProps:t?.mapBoxProps||e,mapTextProps:t?.mapTextProps||e,mapImageProps:t?.mapImageProps||e,mapTextButtonProps:t?.mapTextButtonProps||e,mapImageButtonProps:t?.mapImageButtonProps||e,mapCarouselProps:t?.mapCarouselProps||e,mapCascadeProps:t?.mapCascadeProps||e},i=[qJ,SS,...(n=t?.transforms)!=null?n:[]];return{setTransforms(a){i.length=0,i.push(...a)},addTransforms(a){i.push(...a)},parse(a,s){let l=i.reduce((c,d)=>d.run(c),a);switch(l.type){case"box":return{transformed:l,properties:r.mapBoxProps(l,s)};case"text":return{transformed:l,properties:r.mapTextProps(l,s)};case"image":return{transformed:l,properties:r.mapImageProps(l,s)};case"textButton":return{transformed:l,properties:r.mapTextButtonProps(l,s)};case"imageButton":return{transformed:l,properties:r.mapImageButtonProps(l,s)};case"carouselView":return{transformed:l,properties:r.mapCarouselProps(l,s)};case"cascadeView":return{transformed:l,properties:r.mapCascadeProps(l,s)};default:return{transformed:l,properties:void 0}}}}},Hf=({children:t})=>O.createElement(O.Fragment,null,t);function CP(t){var n,e,r,i,a,s,l;return{box:((n=t?.views)==null?void 0:n.box)||Hf,text:((e=t?.views)==null?void 0:e.text)||Hf,image:((r=t?.views)==null?void 0:r.image)||Hf,imageButton:((i=t?.views)==null?void 0:i.imageButton)||Hf,textButton:((a=t?.views)==null?void 0:a.textButton)||Hf,carouselView:((s=t?.views)==null?void 0:s.carouselView)||Hf,cascadeView:((l=t?.views)==null?void 0:l.cascadeView)||Hf}}var wP=k.createContext({sizes:{},updateSize:()=>{}}),nee=({children:t})=>{let[n,e]=k.useState({}),r=k.useCallback(i=>{var a=i,{id:s}=a,l=GJ(a,["id"]);s&&e(c=>pp(lt({},c),{[s]:l}))},[]);return O.createElement(wP.Provider,{value:{sizes:n,updateSize:r}},t)},ree=()=>k.useContext(wP),Gs=(t=>(t.Row="row",t.Column="column",t))(Gs||{}),QE=(t=>(t.Center="center",t.Left="left",t.Right="right",t.Top="top",t.Bottom="bottom",t))(QE||{}),el=(t=>(t[t.FillParent=0]="FillParent",t[t.WrapContent=1]="WrapContent",t))(el||{}),iee=(t=>(t.Normal="normal",t.Bold="bold",t))(iee||{}),q_=(t=>(t.AspectFit="aspectFit",t.AspectFill="aspectFill",t.ScalesToFill="scalesToFill",t))(q_||{}),NP=[1,2],IE=t=>{switch(t){case"right":case"bottom":return"flex-end";case"center":return"center";default:return"flex-start"}},aee=t=>t?NP.includes(Number(t)):!0,see=t=>{let n=new Map,e=function(r){return(n.has(r)||n.set(r,t.call(this,r)))&&n.get(r)};return e.cache=n,e},oee=see(t=>{let n=(e,r)=>{"items"in e&&e?.items!=null&&e.items.forEach((i,a)=>{let s=`${r}-${a}`;i.id=s,n(i,s)})};return t.forEach((e,r)=>{let i=`${r}`;e.id=i,n(e,i)}),t}),ys={rootLayout:"column",view:{size:{width:{type:"flex",value:0},height:{type:"flex",value:1}}},box:{layout:"row",align:{vertical:"top",horizontal:"left"}},textButton:{maxTextLines:1},carousel:{style:{spacing:10,maxChildWidth:240}},cascade:{layout:"column",style:{spacing:10}}},TP=t=>{let n=t.Container||O.Fragment,e=t.UnknownMessage||(()=>null),r=t.parser||EP(),i=t.renderer||CP(),a=({templateItems:s,templateVersion:l,parentLayout:c=ys.box.layout,depth:d=0})=>{if(!aee(l))throw new Error(`Cannot parse template item due to unsupported template version: ${l}, ${NP}`);return O.createElement(O.Fragment,null,s.map((p,g,_)=>{let y=r.parse(p,{parentLayout:c,depth:d,elemIdx:g,siblings:_}),C=y.transformed,w={key:g,siblings:_,parentLayout:c,parsedProperties:y.properties,rawProperties:p};switch(C.type){case"carouselView":{if(!Array.isArray(C.items))throw new Error("Cannot parse template item as Carousel if carousel has no items.");return O.createElement(i.carouselView,lt(lt({},C),w),C.items.map((A,M)=>O.createElement(a,{key:M,templateItems:A.body.items||[],depth:d+1,templateVersion:A.version})))}case"cascadeView":{if(!Array.isArray(C.items))throw new Error("Cannot parse template item as Cascade if cascade has no items.");return O.createElement(i.cascadeView,lt(lt({},C),w),C.items.map((A,M)=>O.createElement(a,{key:M,templateItems:A.body.items||[],depth:d+1,templateVersion:A.version})))}case"box":return O.createElement(i.box,lt(lt({},C),w),O.createElement(a,{templateItems:C.items||[],parentLayout:C.layout,depth:d+1,templateVersion:l}));case"text":return O.createElement(i.text,lt(lt({},C),w));case"image":return O.createElement(i.image,lt(lt({},C),w));case"textButton":return O.createElement(i.textButton,lt(lt({},C),w));case"imageButton":return O.createElement(i.imageButton,lt(lt({},C),w));default:return O.createElement(e,{item:C})}}))};return{MessageTemplate:({templateVersion:s,templateItems:l,parentLayout:c=ys.rootLayout})=>{let d=oee(l);return O.createElement(nee,null,O.createElement(n,{className:"sb-message-template__parent"},O.createElement(a,{isRoot:!0,parentLayout:c,templateItems:d,templateVersion:s})))},MessageTemplateBase:a}},lee=(t=>(t.Web="web",t.Custom="custom",t.UIKit="uikit",t.Internal="internal",t))(lee||{}),uee=Object.defineProperty,cee=Object.defineProperties,dee=Object.getOwnPropertyDescriptors,H1=Object.getOwnPropertySymbols,SP=Object.prototype.hasOwnProperty,AP=Object.prototype.propertyIsEnumerable,rk=(t,n,e)=>n in t?uee(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e,Zr=(t,n)=>{for(var e in n||(n={}))SP.call(n,e)&&rk(t,e,n[e]);if(H1)for(var e of H1(n))AP.call(n,e)&&rk(t,e,n[e]);return t},Np=(t,n)=>cee(t,dee(n)),Tp=(t,n)=>{var e={};for(var r in t)SP.call(t,r)&&n.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&H1)for(var r of H1(t))n.indexOf(r)<0&&AP.call(t,r)&&(e[r]=t[r]);return e};function hee(t){var n;return t.type===c2.Text&&((n=t.width)==null?void 0:n.value)==el.WrapContent}var ik=({size:t,option:n})=>n==="wrap"?t.type==="flex"&&t.value==el.WrapContent:n==="fill"?t.type==="flex"&&t.value==el.FillParent:t.type==="fixed",fee=t=>{var n;return typeof t!="string"?!1:((n=t.split(".").pop())==null?void 0:n.toLowerCase())==="gif"},Ic=(...t)=>t.filter(n=>!!n).join(" "),pee=(t="")=>["http://","https://","ftp://"].some(n=>t.startsWith(n)),ak=(t="")=>pee(t)?t:`https://${t}`;function jf(t){return Zr({display:"flex",overflow:"hidden",boxSizing:"border-box"},t)}function Gf(t,n,e){_ee(t,n,e),gee(t,n)}function mee(t,n,e,r){n&&(t["--border-width"]=`${n}px`,t["--border-color"]=e||"transparent"),r&&(t.borderRadius=r,t["--border-radius"]=`${r}px`)}function gee(t,n){var e,r,i,a,s,l,c,d,p,g,_,y;let{viewStyle:C}=n;t.paddingBlockStart=(e=C?.padding)==null?void 0:e.top,t.paddingBlockEnd=(r=C?.padding)==null?void 0:r.bottom,t.paddingInlineStart=(i=C?.padding)==null?void 0:i.left,t.paddingInlineEnd=(a=C?.padding)==null?void 0:a.right,t.marginBlockStart=(s=C?.margin)==null?void 0:s.top,t.marginBlockEnd=(l=C?.margin)==null?void 0:l.bottom,t.marginInlineStart=(c=C?.margin)==null?void 0:c.left,t.marginInlineEnd=(d=C?.margin)==null?void 0:d.right;let w=((g=(p=C?.margin)==null?void 0:p.left)!=null?g:0)+((y=(_=C?.margin)==null?void 0:_.right)!=null?y:0);w>0&&t.width==="100%"&&(t.width=`calc(100% - ${w}px)`),C!=null&&C.backgroundColor&&(t.backgroundColor=C.backgroundColor),C!=null&&C.backgroundImageUrl&&(t.backgroundImage=`url(${JSON.stringify(C.backgroundImageUrl)})`,t.backgroundSize="100% 100%",t.backgroundPosition="center"),mee(t,C?.borderWidth,C?.borderColor,C?.radius)}function vee(t,n,e){let r={};return t.type==="flex"&&t.value==el.FillParent?(r.width="100%",e===Gs.Row&&(r.flex=1)):t.type==="flex"&&t.value==el.WrapContent?(r.width="fit-content",e===Gs.Row&&(r.flexShrink=0)):t.type==="fixed"&&t.value>=0&&(r.width=t.value,e===Gs.Row&&(r.flexShrink=0)),n.type==="flex"&&n.value==el.FillParent?(r.height="100%",e===Gs.Column&&(r.flex=1)):n.type==="flex"&&n.value==el.WrapContent?(r.height="fit-content",e===Gs.Column&&(r.flexShrink=0)):n.type==="fixed"&&n.value>=0&&(r.height=n.value,e===Gs.Column&&(r.flexShrink=0)),r}function _ee(t,n,e){var r,i;let{width:a,height:s}=ys.view.size,{parentLayout:l}=e,c=vee((r=n.width)!=null?r:a,(i=n.height)!=null?i:s,l);Object.assign(t,c)}function Aw(t,n=ys.box.layout,e=ys.box.align){n===Gs.Row&&(t.flexDirection="row",t.alignItems=IE(e.vertical),t.justifyContent=IE(e.horizontal)),n===Gs.Column&&(t.flexDirection="column",t.alignItems=IE(e.horizontal),t.justifyContent=IE(e.vertical))}function yee(t,n=ys.box.align.horizontal){switch(n){case QE.Left:t.textAlign="start";break;case QE.Right:t.textAlign="end";break;case QE.Center:t.textAlign="center";break;default:t.textAlign="start";break}}function sk(t,n){let{contentMode:e=q_.AspectFit}=n||{};if(e)switch(e){case q_.AspectFill:t.objectFit="cover";break;case q_.AspectFit:t.objectFit="contain";break;case q_.ScalesToFill:t.objectFit="fill";break}}function ok(t,n){var e,r,i,a;let s=n?.metaData;!(s!=null&&s.pixelHeight)||!(s!=null&&s.pixelWidth)||((e=n?.width)==null?void 0:e.type)==="fixed"||((r=n?.height)==null?void 0:r.type)==="fixed"||(t.aspectRatio=`${(i=n?.metaData)==null?void 0:i.pixelWidth} / ${(a=n?.metaData)==null?void 0:a.pixelHeight}`)}function lk(t){return{WebkitLineClamp:t,WebkitBoxOrient:"vertical",display:"-webkit-box",overflow:"hidden",overflowWrap:"anywhere",flex:1}}function uk(t,n,e){let{textStyle:r,width:i}=n,{size:a,color:s,weight:l}=r||{};if(a&&(t.fontSize=a),s&&(t.color=s),l&&(t.fontWeight=l),i?.type==="flex"&&i?.value==el.WrapContent&&(t.width="fit-content",t.maxWidth="100%"),n.type===c2.Text){let{siblings:c,elemIdx:d}=e;c!=null&&c.length>=2&&c.every(hee)&&(t.flexShrink=c.length-1===d?1:0)}}var IP=EP({mapBoxProps(t,n){let e=jf();return Gf(e,t,n),Aw(e,t.layout,t.align),e},mapTextProps(t,n){var e;let r=jf({whiteSpace:"pre-line",wordBreak:"break-word"});return Gf(r,t,n),uk(r,t,n),Aw(r,Gs.Row,t.align),yee(r,(e=t.align)==null?void 0:e.horizontal),r},mapImageProps(t,n){let e=jf();return Gf(e,t,n),sk(e,t.imageStyle),ok(e,t),e},mapTextButtonProps(t,n){let e=jf({whiteSpace:"pre-line",alignItems:"center",justifyContent:"center"});return Gf(e,t,n),uk(e,t,n),e},mapImageButtonProps(t,n){let e=jf();return Gf(e,t,n),sk(e,t.imageStyle),ok(e,t),e},mapCarouselProps(t,n){let e=jf();return Gf(e,t,n),e},mapCascadeProps(t,n){var e,r;let i=jf();return Gf(i,t,n),Aw(i,ys.cascade.layout),i.gap=(r=(e=t.cascadeStyle)==null?void 0:e.spacing)!=null?r:ys.cascade.style.spacing,i}}),bee=24,ck=5;function Eee({spacing:t,childrenLength:n,paddingInlineStart:e,paddingInlineEnd:r}){let i=k.useRef(null),a=k.useRef(Array.from({length:n},()=>O.createRef())),s=k.useRef(!1),l=k.useRef(!1),c=k.useRef(null),d=k.useRef({sx:null,sy:null,offset:0,translateX:0,currentIndex:0,didMove:!1}),[p,g]=k.useState(()=>a.current.map(()=>0)),[_,y]=k.useState(!1),C=_?-1:1,w=k.useMemo(()=>{let F=e;return p.map((ne,J)=>{let re=J>0?t:0,Oe=F-re,Z=Oe-ne;return F=Z,{start:Oe,end:Z}})},[p,t,e]),A=k.useMemo(()=>{let F=p.reduce((J,re)=>J+re,0),ne=t*(n-1);return F+ne},[p,t,n]);k.useLayoutEffect(()=>{if(i.current){let F=getComputedStyle(i.current).direction;y(F==="rtl")}},[]),k.useLayoutEffect(()=>{g(a.current.map(F=>{var ne,J;return(J=(ne=F.current)==null?void 0:ne.clientWidth)!=null?J:0}))},[n]),k.useLayoutEffect(()=>{w.length>0&&(d.current.translateX=w[0].start,L())},[w]);let M=()=>{i.current&&(s.current=!0,i.current.style.cursor="grabbing",i.current.style.transition="none",c.current=requestAnimationFrame(L))},I=()=>{i.current&&(s.current=!1,i.current.style.cursor="grab",i.current.style.transition="transform 0.5s ease",c.current&&(cancelAnimationFrame(c.current),c.current=null))},D=()=>{let{offset:F,currentIndex:ne}=d.current,J=Math.abs(F)>=bee,re=F<0&&ne<n-1,Oe=F>0&&ne>0,Z=ne;J&&re?Z=ne+1:J&&Oe&&(Z=ne-1);function ue(q){var le,pe;let Pe=(pe=(le=i.current)==null?void 0:le.clientWidth)!=null?pe:0,qe=e,$=Math.min(0,Pe-A)-r;return Math.min(qe,Math.max(q,$))}d.current.currentIndex=Z,d.current.translateX=ue(w[Z].start),d.current.offset=0},P=()=>{l.current=!0},H=()=>{l.current=!1},L=()=>{if(i.current){let F=(d.current.translateX+d.current.offset)*C;i.current.style.transform=`translateX(${F}px)`}c.current&&(c.current=requestAnimationFrame(L))},G=()=>{i.current&&(i.current.style.touchAction="pan-x")},Y=()=>{i.current&&(i.current.style.touchAction="pan-y")};return{carouselRef:i,childrenRefs:a,handlers:{onMouseDown:F=>{M(),H(),d.current.sx=F.clientX,d.current.sy=F.clientY,d.current.offset=0,d.current.didMove=!1,c.current=requestAnimationFrame(L)},onMouseMove:F=>{!s.current||d.current.sx===null||(d.current.offset=(F.clientX-d.current.sx)*C,Math.abs(d.current.offset)>ck&&(d.current.didMove=!0))},onMouseUp:F=>{s.current&&(H(),D(),I(),d.current.didMove&&(F.preventDefault(),F.stopPropagation()))},onMouseLeave:F=>{s.current&&(H(),D(),I(),d.current.didMove&&(F.preventDefault(),F.stopPropagation()))},onTouchStart:F=>{H(),I();let ne=F.touches[0];d.current.sx=ne.clientX,d.current.sy=ne.clientY,d.current.offset=0,d.current.didMove=!1,c.current=requestAnimationFrame(L)},onTouchMove:F=>{if(d.current.sx===null||d.current.sy===null||l.current)return;let{clientX:ne,clientY:J}=F.touches[0],{sx:re,sy:Oe}=d.current;if(s.current){d.current.offset=(ne-re)*C,Math.abs(d.current.offset)>ck&&(d.current.didMove=!0);return}Math.abs(J-Oe)>Math.abs(ne-re)?P():(d.current.offset=(ne-re)*C,G(),M())},onTouchEnd:F=>{Y(),H(),D(),I(),d.current.didMove&&(F.preventDefault(),F.stopPropagation())},onClickCapture:F=>{d.current.didMove&&(F.preventDefault(),F.stopPropagation())}}}}var Cee=t=>{var n=t,{children:e,style:r,spacing:i=ys.carousel.style.spacing,maxChildWidth:a=ys.carousel.style.maxChildWidth,inlineStyle:s}=n,l=Tp(n,["children","style","spacing","maxChildWidth","inlineStyle"]);let c=r??{},{paddingInlineStart:d=0,paddingInlineEnd:p=0}=c,g=Tp(c,["paddingInlineStart","paddingInlineEnd"]),{carouselRef:_,childrenRefs:y,handlers:C}=Eee({spacing:i,childrenLength:e.length,paddingInlineStart:Number(d),paddingInlineEnd:Number(p)});return O.createElement("div",Zr(Np(Zr({},C),{ref:_,style:Zr(Np(Zr({},g),{gap:i,width:"100%",overflow:"visible"}),s)}),l),e.map((w,A)=>O.createElement(wee,{ref:y.current[A],key:A,maxChildWidth:a},w)))},wee=O.forwardRef(function({maxChildWidth:t,children:n},e){let r=Nee(n.props,t)?t:"fit-content";return O.createElement("div",{ref:e,style:{maxWidth:r,width:"100%",flexShrink:0,overflow:"hidden",userSelect:"none"}},n)});function Nee(t,n){return!!t.templateItems.find(e=>{var r;let i=(r=e.width)!=null?r:ys.view.size.width,a=i.type==="flex"&&i.value===el.FillParent,s=i.type==="fixed"&&i.value>=n;return a||s})}var Tee=t=>{let{imageSize:n,canvasRef:e,canvasProps:r}=See(t);return O.createElement("canvas",Np(Zr({},r),{ref:e,width:n?.width,height:n?.height,onError:t.onError}))},See=t=>{var n=t,{metaData:e,tintColor:r}=n,i=Tp(n,["metaData","tintColor"]);let a=k.useRef(null),[s,l]=k.useState(),c=k.useMemo(()=>e!=null&&e.pixelHeight&&e!=null&&e.pixelWidth?{width:e.pixelWidth,height:e.pixelHeight}:s,[s,e?.pixelHeight,e?.pixelWidth]);return k.useEffect(()=>{if(c==null&&a.current){a.current.style.width="100%",a.current.style.height="100%";let d=a.current.getBoundingClientRect();l(d)}},[c]),k.useEffect(()=>{if(i.src){let d=new Image,p=()=>{if(a.current&&r&&c){let _=a.current.getContext("2d");if(_){let{width:y,height:C}=c;_.clearRect(0,0,y,C),_.beginPath(),_.globalCompositeOperation="source-over",_.fillStyle="#000",_.drawImage(d,0,0,y,C),_.globalCompositeOperation="source-atop",_.fillStyle=r,_.fillRect(0,0,y,C)}}},g=_=>{var y;(y=i.onError)==null||y.call(i,_)};return d.addEventListener("load",p),d.addEventListener("error",g),d.src=i.src,()=>{d.removeEventListener("load",p),d.removeEventListener("error",g)}}},[i.src,c,r]),{canvasRef:a,canvasProps:i,imageSize:c}},Aee=t=>O.createElement("img",Np(Zr({},t),{onError:t.onError,draggable:!1,referrerPolicy:"no-referrer"})),Iee=t=>O.createElement("div",{style:Np(Zr({},t.style),{backgroundColor:"transparent"})}),dk=t=>{var n=t,{tintColor:e,metaData:r}=n,i=Tp(n,["tintColor","metaData"]);let{hasError:a,onError:s}=Mee(i.src);return i.onError&&console.warn("`onError` is intercepted and not executed in the ReactMessageTemplateImage."),a?O.createElement(Iee,Zr({},i)):e&&!fee(i.src)?O.createElement(Tee,Np(Zr({},i),{onError:s,tintColor:e,metaData:r})):O.createElement(Aee,Np(Zr({},i),{onError:s}))},Mee=t=>{let[n,e]=k.useState(!1);return k.useEffect(()=>e(!1),[t]),{hasError:n,onError:k.useCallback(()=>e(!0),[])}},Oee=O.createContext(null),MP=()=>{let t=O.useContext(Oee);if(!t)throw new Error("useMessageContext must be used within a MessageProvider");return t};function Vf(t){let{highlight:n}=MP();return{className:n!=null&&n.getContainerClassName?n.getContainerClassName(t):void 0,style:n!=null&&n.getContainerInlineStyle?n.getContainerInlineStyle(t):void 0,renderText:n!=null&&n.renderText?n.renderText:e=>e}}function OP(t){let n=k.useRef(t);return k.useEffect(()=>{n.current=t},[t]),k.useCallback((...e)=>n.current(...e),[n])}function kee(t,n){let e=OP(t),r=k.useRef(hk);return k.useCallback(i=>{if(r.current(),r.current=hk,i!=null){let a=t(i);typeof a=="function"&&(r.current=a)}},[e,...n])}function hk(){}function Ree(t){let n=OP(t);return kee(e=>{let r=new ResizeObserver(i=>{i[0]!=null&&n(i[0])});return r.observe(e),()=>{r.unobserve(e)}},[n])}function Dee(){let[t,n]=k.useState(-1),[e,r]=k.useState(-1),[i,a]=k.useState(-1),[s,l]=k.useState(-1),[c,d]=k.useState(-1),[p,g]=k.useState(-1);return{ref:Ree(_=>{let{width:y,height:C}=_.contentRect,w=_.target,{width:A,height:M}=w.getBoundingClientRect();n(A),r(M),a(y),l(C),d(A-y),g(M-C)}),width:t,height:e,contentWidth:i,contentHeight:s,paddingWidth:c,paddingHeight:p}}function ME({width:t=ys.view.size.width,height:n=ys.view.size.height,parentLayout:e=ys.box.layout,option:r}){return e===Gs.Row?ik({size:t,option:r}):ik({size:n,option:r})}function xee(t){let{style:n,props:e}=t,r=Dee(),{ref:i}=r,a=Tp(r,["ref"]),{updateSize:s,sizes:l}=ree(),{id:c,siblings:d,parentLayout:p}=e,{width:g,height:_,paddingWidth:y,paddingHeight:C,contentWidth:w,contentHeight:A}=a;return k.useEffect(()=>{s({id:e.id,width:g,height:_,paddingWidth:y,paddingHeight:C,contentWidth:w,contentHeight:A})},[e.id,g,_,y,C,w,A,s]),{recalculatedStyle:k.useMemo(()=>{let M=(I=0,D)=>{var P,H,L,G;return p===Gs.Row?I+((H=(P=l[D.id])==null?void 0:P.contentWidth)!=null?H:0):I+((G=(L=l[D.id])==null?void 0:L.contentHeight)!=null?G:0)};if(ME({width:e.width,height:e.height,parentLayout:p,option:"fill"})){let I=d.filter(({width:H,height:L})=>!ME({width:H,height:L,parentLayout:p,option:"fill"})).reduce(M,0),D=d.filter(({width:H,height:L})=>ME({width:H,height:L,parentLayout:p,option:"fill"})).length,P=p===Gs.Row?{maxWidth:`calc((100% - ${I}px) / ${D})`}:{maxHeight:`calc((100% - ${I}px) / ${D})`};return Zr(Zr(Zr({},n),P),g==0&&{height:0})}else{let I=d.findIndex(P=>P.id===c),D=d.slice(0,I).filter(({width:P,height:H})=>ME({width:P,height:H,parentLayout:p,option:"wrap"})).reduce(M,0);return Zr(Zr(Zr({},n),g===0&&{height:0}),p===Gs.Row?{maxWidth:`calc(100% - ${D}px)`}:{maxHeight:`calc(100% - ${D}px)`})}},[e.width,e.height,p,l,d,n,g,c]),elemRef:i}}var tg=({children:t,props:n,className:e,style:r,inlineStyle:i})=>{var a;let s=r??{},{paddingBlockStart:l,paddingBlockEnd:c,paddingInlineStart:d,paddingInlineEnd:p}=s,g=Tp(s,["paddingBlockStart","paddingBlockEnd","paddingInlineStart","paddingInlineEnd"]),{recalculatedStyle:_,elemRef:y}=xee({style:g,props:n}),{handleWebAction:C,handleCustomAction:w,handleUIKitAction:A,handleInternalAction:M}=MP(),I=(a=n.viewStyle)!=null&&a.borderWidth?"sb-message-template__border":"",D=n.action?"sb-message-template__action":"",P=re=>{var Oe,Z,ue,q,le,pe,Pe,qe;((Oe=n.action)==null?void 0:Oe.type)==="web"?C?C(re,n.action):(ue=window?.open(ak((Z=n?.action)==null?void 0:Z.data),"_blank","noopener noreferrer"))==null||ue.focus():((q=n.action)==null?void 0:q.type)==="custom"?w?w(re,n.action):(pe=window?.open(ak((le=n?.action)==null?void 0:le.data),"_blank","noopener noreferrer"))==null||pe.focus():((Pe=n.action)==null?void 0:Pe.type)==="uikit"?A?.(re,n.action):((qe=n.action)==null?void 0:qe.type)==="internal"&&M?.(re,n.action)};if(n.type===c2.TextButton)return O.createElement("button",{className:Ic(e,I,D),"data-sb-template-id":n.elementId,style:Zr(Zr({},r),i),onClick:P},t);let H=_,{display:L,flexDirection:G,justifyContent:Y,alignItems:F,objectFit:ne}=H,J=Tp(H,["display","flexDirection","justifyContent","alignItems","objectFit"]);return O.createElement("div",{ref:y,className:Ic(e,I,D),"data-sb-template-id":n.elementId,style:Zr(Zr({},J),i),onClick:P},O.createElement("div",{style:{display:L,flexDirection:G,justifyContent:Y,alignItems:F,objectFit:ne,width:"100%",height:"100%",paddingBlockStart:l,paddingBlockEnd:c,paddingInlineStart:d,paddingInlineEnd:p,gap:r?.gap}},t))},kP=CP({views:{box(t){let n=Vf(t.rawProperties);return O.createElement(tg,{className:Ic("sb-message-template__box",n.className),inlineStyle:n.style,elementId:t.elementId,style:t.parsedProperties,props:t},t.children)},text(t){let n=Vf(t.rawProperties);return O.createElement(tg,{className:Ic("sb-message-template__text",n.className),inlineStyle:n.style,elementId:t.elementId,style:t.parsedProperties,props:t},fk(t,n.renderText))},image(t){var n;let e=Vf(t.rawProperties);return O.createElement(tg,{className:Ic("sb-message-template__image-container",e.className),inlineStyle:e.style,elementId:t.elementId,style:t.parsedProperties,props:t},O.createElement(dk,{className:"sb-message-template__image",alt:"image",src:t.imageUrl,style:{width:"100%",height:"100%",aspectRatio:"inherit",objectFit:"inherit"},tintColor:(n=t.imageStyle)==null?void 0:n.tintColor,metaData:t.metaData}))},textButton(t){let n=Vf(t.rawProperties);return O.createElement(tg,{className:Ic("sb-message-template__text-button",n.className),inlineStyle:n.style,elementId:t.elementId,style:t.parsedProperties,props:t},fk(Zr({maxTextLines:ys.textButton.maxTextLines},t),n.renderText))},imageButton(t){var n;let e=Vf(t.rawProperties);return O.createElement(tg,{className:Ic("sb-message-template__image-container","sb-message-template__image-button",e.className),inlineStyle:e.style,elementId:t.elementId,style:t.parsedProperties,props:t},O.createElement(dk,{className:"sb-message-template__image",alt:"image-button",src:t.imageUrl,style:{width:"100%",height:"100%",aspectRatio:"inherit",objectFit:"inherit"},tintColor:(n=t.imageStyle)==null?void 0:n.tintColor,metaData:t.metaData}))},carouselView(t){var n,e;let r=Vf(t.rawProperties);return O.createElement(Cee,{className:Ic("sb-message-template__carousel",r.className),inlineStyle:r.style,maxChildWidth:(n=t.carouselStyle)==null?void 0:n.maxChildWidth,spacing:(e=t.carouselStyle)==null?void 0:e.spacing,style:t.parsedProperties},t.children)},cascadeView(t){let n=Vf(t.rawProperties);return O.createElement(tg,{className:Ic("sb-message-template__cascade",n.className),inlineStyle:n.style,elementId:t.elementId,style:t.parsedProperties,props:t},t.children)}}});function Pee(t,n){return t.split(`
`).map((e,r)=>O.createElement(O.Fragment,{key:r},n(e),O.createElement("br",null)))}function fk(t,n){let{text:e,maxTextLines:r}=t,i=Uee(t),a=typeof r=="number"&&r>0,s=Pee(e,n);if(a||i){let l=Zr(Zr({},(a||i)&&{maxWidth:"100%"}),i&&{maxHeight:"100%",overflow:"hidden"});return O.createElement("div",{style:l},a?O.createElement("div",{style:lk(r)},s):s)}return a?O.createElement("div",{style:lk(r)},s):s}function Uee(t){var n,e,r,i;let a=(n=t?.height)==null?void 0:n.type,s=(e=t?.width)==null?void 0:e.type,l=a==="fixed"||s==="fixed",c=a==="flex"&&((r=t?.height)==null?void 0:r.value)===el.FillParent||s==="flex"&&((i=t?.width)==null?void 0:i.value)===el.FillParent;return l||c}TP({renderer:kP,parser:IP,Container:({children:t,className:n})=>O.createElement("div",{className:`sb-message-template__parent ${n}`,style:{display:"flex",flexDirection:"column",maxWidth:400,marginBlockEnd:24}},t)});TP({parser:IP,renderer:kP,Container:function(t){var n=t.children,e=t.className;return O.createElement("div",{className:["sb-message-template__parent ".concat(e),"sendbird-message-template__root"].join(" ")},n)}}).MessageTemplate;(function(t){IR(n,t);function n(e){var r=t.call(this,e)||this;return r.state={hasError:!1},r}return n.getDerivedStateFromError=function(){return{hasError:!0}},n.prototype.componentDidCatch=function(e,r){var i;(i=this.props.logger)===null||i===void 0||i.error("Error caught by ErrorBoundary: ",e,r)},n.prototype.render=function(){return this.state.hasError?this.props.fallbackMessage:this.props.children},n})(k.Component);O.forwardRef(function(t,n){var e=t.children,r=t.isSelected,i=t.onClick,a=i===void 0?function(){}:i,s=t.disabled,l=s===void 0?!1:s;return O.createElement("button",{className:["sendbird-iconbutton__feedback",r?"sendbird-iconbutton__feedback__pressed":"",l?"sendbird-iconbutton__feedback__disabled":""].join(" "),ref:n,type:"button",onClick:function(c){a?.(c)},disabled:l},O.createElement("span",{className:["sendbird-iconbutton__feedback__inner",r?"sendbird-iconbutton__feedback__inner__pressed":"",l?"sendbird-iconbutton__feedback__inner__disabled":""].join(" ")},e))});O.forwardRef(function(t,n){var e=t.name,r=t.required,i=t.disabled,a=t.value,s=t.placeHolder,l=t.autoFocus,c=l===void 0?!1:l,d=k.useState(a),p=d[0],g=d[1];return O.createElement("div",{className:"sendbird-input"},O.createElement("input",{className:"sendbird-input__input",ref:n,name:e,required:r,disabled:i,value:p,onChange:function(_){g(_.target.value)},autoFocus:c}),s&&!p&&O.createElement(jt,{className:"sendbird-input__placeholder",type:Ft.BODY_1,color:pt.ONBACKGROUND_3},s))});var pk;(function(t){t.NOT_APPLICABLE="NOT_APPLICABLE",t.NO_FEEDBACK="NO_FEEDBACK",t.SUBMITTED="SUBMITTED"})(pk||(pk={}));function Lee(t){var n=t.member,e=t.isFocused,r=e===void 0?!1:e,i=t.parentScrollRef,a=t.onClick,s=t.onMouseOver,l=t.onMouseMove,c=t.renderUserMentionItem,d=k.useRef(null),p=k.useContext(Zc).stringSet;k.useEffect(function(){r&&i?.current!=null&&d?.current!=null&&(i.current.scrollTop>=d.current.offsetTop||i.current.scrollTop+i.current.clientHeight<=d.current.offsetTop)&&d.current.scrollIntoView({block:"nearest",inline:"nearest"})},[r]);var g=k.useMemo(function(){if(c)return O.createElement("div",{className:"sendbird-mention-suggest-list__user-item",onClick:function(_){return a?.({event:_,member:n,itemRef:d})},onMouseOver:function(_){return s?.({event:_,member:n,itemRef:d})},onMouseMove:function(_){return l?.({event:_,member:n,itemRef:d})},key:n?.userId||Cp(),ref:d},c({user:n}))},[c]);return g||O.createElement("div",{className:Bi("sendbird-mention-suggest-list__user-item",r&&"focused"),onClick:function(_){return a?.({event:_,member:n,itemRef:d})},onMouseOver:function(_){return s?.({event:_,member:n,itemRef:d})},onMouseMove:function(_){return l?.({event:_,member:n,itemRef:d})},key:n?.userId||Cp(),ref:d},O.createElement(zc,{className:"sendbird-mention-suggest-list__user-item__avatar",src:n?.profileUrl,alt:"user-profile",width:"24px",height:"24px"}),O.createElement(jt,{className:"sendbird-mention-suggest-list__user-item__nickname",testID:"sendbird-mention-suggest-list__user-item__nickname",type:Ft.SUBTITLE_2,color:n?.nickname?pt.ONBACKGROUND_1:pt.ONBACKGROUND_3},n?.nickname||p?.MENTION_NAME__NO_NAME),O.createElement(jt,{className:"sendbird-mention-suggest-list__user-item__user-id",testID:"sendbird-mention-suggest-list__user-item__user-id",type:Ft.SUBTITLE_2,color:pt.ONBACKGROUND_2},n?.userId))}function Fee(t,n,e,r){return nl(this,void 0,void 0,function(){return rl(this,function(i){return[2,n.members.sort(function(a,s){var l;return(l=a.nickname)===null||l===void 0?void 0:l.localeCompare(s.nickname)}).filter(function(a){var s;return((s=a.nickname)===null||s===void 0?void 0:s.toLowerCase().startsWith(r.toLowerCase()))&&a.userId!==t&&a.isActive}).slice(0,e)]})})}function Hee(t,n,e,r){return nl(this,void 0,void 0,function(){var i;return rl(this,function(a){return i=n.createMemberListQuery({limit:e+1,nicknameStartsWithFilter:r}),[2,i.next().then(function(s){return s.filter(function(l){return t!==l?.userId}).slice(0,e)})]})})}var jee=300,RP=function(t){var n,e,r,i=t.className,a=t.currentChannel,s=t.targetNickname,l=s===void 0?"":s,c=t.onUserItemClick,d=t.onFocusItemChange,p=t.onFetchUsers,g=t.renderUserMentionItem,_=t.inputEvent,y=t.ableAddMention,C=y===void 0?!0:y,w=t.maxMentionCount,A=w===void 0?RX:w,M=t.maxSuggestionCount,I=M===void 0?DX:M,D=qa().state,P=D.config,H=D.stores,L=P.logger,G=((r=(e=(n=H?.sdkStore)===null||n===void 0?void 0:n.sdk)===null||e===void 0?void 0:e.currentUser)===null||r===void 0?void 0:r.userId)||"",Y=k.useRef(null),F=Wa().stringSet,ne=k.useState(null),J=ne[0],re=ne[1],Oe=k.useState(""),Z=Oe[0],ue=Oe[1],q=k.useState(""),le=q[0],pe=q[1],Pe=k.useState(null),qe=Pe[0],$=Pe[1],fe=k.useState([]),Ie=fe[0],We=fe[1];return k.useEffect(function(){clearTimeout(J??void 0),re(setTimeout(function(){ue(l)},jee))},[l]),k.useEffect(function(){if(_?.key===Kl.Enter&&qe&&Ie.length>0&&c?.(qe),_?.key===Kl.ArrowUp){var Ne=Ie.findIndex(function(He){return He?.userId===qe?.userId});0<Ne&&($(Ie[Ne-1]),d?.(Ie[Ne-1]))}if(_?.key===Kl.ArrowDown){var Ne=Ie.findIndex(function(tt){return tt?.userId===qe?.userId});Ne<Ie.length-1&&($(Ie[Ne+1]),d?.(Ie[Ne+1]))}},[_]),k.useEffect(function(){if(!(le&&Z.indexOf(le)===0&&Ie.length===0)){if(a?.isSuper&&!a?.createMemberListQuery){L.warning("SuggestedMentionList: Creating member list query failed");return}var Ne=a?.isSuper?Hee:Fee;Ne(G,a,I,Z.slice(v0.length)).then(function(He){He.length<1?L.info("SuggestedMentionList: Fetched member list is empty"):(L.info("SuggestedMentionList: Fetching member list succeeded",{memberList:He}),$(He[0])),pe(Z),p?.(He),We(He)}).catch(function(He){He&&L.error("SuggestedMentionList: Fetching member list failed",He)})}},[a?.url,a?.members.map(function(Ne){return Ne.nickname}).join(),a?.members.map(function(Ne){return Ne.isActive}).join(),Z,I,G,Ie.length,le]),!C&&Ie.length===0?null:O.createElement("div",{className:Bi("sendbird-mention-suggest-list",i),"data-testid":"sendbird-mention-suggest-list",key:"sendbird-mention-suggest-list",ref:Y},C&&Ie?.map(function(Ne){return O.createElement(Lee,{key:Ne?.userId||Cp(),member:Ne,isFocused:Ne?.userId===qe?.userId,parentScrollRef:Y,onClick:function(He){var tt=He.member;c?.(tt)},onMouseOver:function(He){var tt=He.member;$(tt)},renderUserMentionItem:g})}),!C&&O.createElement("div",{className:"sendbird-mention-suggest-list__notice-item"},O.createElement(tn,{className:"sendbird-mention-suggest-list__notice-item__icon",type:Gt.INFO,fillColor:Wt.ON_BACKGROUND_2,width:"20px",height:"20px"}),O.createElement(jt,{className:"sendbird-mention-suggest-list__notice-item__text",type:Ft.SUBTITLE_2,color:pt.ONBACKGROUND_2},F.MENTION_COUNT__OVER_LIMIT.replace("%d",String(A)))))};function Gee(t,n){return Bc(n).when(il,function(){var e=n.fileInfoList.length;return"Do you want to delete all ".concat(e," photos?")}).otherwise(function(){return t.MODAL__DELETE_MESSAGE__TITLE})}var Vee=function(t,n,e,r,i,a){return[gk(t,n,r),gk(n,e,r)]},mk=function(t,n){return xg(t.createdAt,n.DATE_FORMAT__MESSAGE_CREATED_AT)},gk=function(t,n,e,r){var i,a;return t&&n&&t.messageType&&t.messageType!=="admin"&&n.messageType&&n?.messageType!=="admin"&&"sender"in t&&"sender"in n&&t.createdAt&&n.createdAt&&t.sender.userId&&n.sender.userId?t?.sendingStatus===n?.sendingStatus&&((i=t?.sender)===null||i===void 0?void 0:i.userId)===((a=n?.sender)===null||a===void 0?void 0:a.userId)&&mk(t,e)===mk(n,e)&&!0:!1},DP=function(t,n,e){t===void 0&&(t=0);var r=10,i=t;if(!(i>r))try{var a=n?.current||document.querySelector(".sendbird-conversation__messages-padding");a&&(a.scrollTop=a.scrollHeight),e?.(!0)}catch{setTimeout(function(){DP(i+1,n,e)},500*i)}},Bee=function(t){var n=t?.myRole;return n==="operator"},zee=function(t){var n=t?.isFrozen;return n&&!Bee(t)},qee=function(t){var n=t?.myMutedState;return n==="muted"},j1=function(t,n,e){return Math.abs(t-n)<=e};k.forwardRef(function(t,n){var e=t.messages,r=t.renderMessage,i=t.scrollPositionRef,a=t.scrollDistanceFromBottomRef,s=t.onLoadPrevious,l=t.onLoadNext,c=t.loadThreshold,d=c===void 0?.05:c,p=t.typingIndicator,g=t.onScrollPosition,_=g===void 0?vi:g,y=t.initDeps,C=O.useRef(!1),w=O.useRef(),A=k.useRef(0);k.useLayoutEffect(function(){n.current&&(n.current.scrollTop=n.current.scrollHeight)},y),k.useLayoutEffect(function(){n.current&&(w.current==="top"&&(n.current.scrollTop=n.current.scrollHeight-i.current),w.current==="bottom"&&(n.current.scrollTop=A.current),w.current=void 0)},[n.current,e.length]);var M=k.useCallback(function(){return nl(void 0,void 0,void 0,function(){var I,D;return rl(this,function(P){switch(P.label){case 0:return n.current?(I=n.current,_(Wee(I)),i.current=I.scrollHeight-I.scrollTop,a.current=i.current-I.clientHeight,A.current=I.scrollTop,C.current?[2]:(D=I.clientHeight*Math.min(Math.max(0,d),1),I.scrollTop<=D?(C.current=!0,w.current="top",[4,s()]):[3,2])):[2];case 1:return P.sent(),C.current=!1,[3,5];case 2:return I.scrollHeight-I.scrollTop-I.clientHeight<=D?(C.current=!0,w.current="bottom",[4,l()]):[3,4];case 3:return P.sent(),C.current=!1,[3,5];case 4:w.current=void 0,P.label=5;case 5:return[2]}})})},[e.length]);return O.createElement("div",{className:"sendbird-conversation__scroll-container"},O.createElement("div",{className:"sendbird-conversation__padding"}),O.createElement("div",{ref:n,className:"sendbird-conversation__messages-padding","data-testid":"sendbird-message-list-container",onScroll:M},e.map(function(I,D){return r({message:I,index:D})}),p))});function Wee(t){return j1(t.scrollTop,0,S1)?"top":j1(t.scrollHeight,t.clientHeight+t.scrollTop,S1)?"bottom":"middle"}var Kee=function(t){return O.createElement(RP,ke({},t))},OE="sendbird-quote_message_input__avatar";function Yee(t){var n,e=t.message;if(!zs(e)&&!il(e)||k1(e))return O.createElement(O.Fragment,null);var r=CJ(e);return r||(Zx(e)||qT(e)?r=bJ(e):il(e)&&vX((n=e.fileInfoList)===null||n===void 0?void 0:n[0])&&(r=e.fileInfoList[0].url)),qT(e)&&r?O.createElement("div",{className:OE},O.createElement("video",{style:{width:"44px",height:"44px"},src:r})):(Q0(e)||il(e))&&r?O.createElement(vo,{className:OE,url:r,alt:_J(e),width:"44px",height:"44px",fixedSize:!0}):gX(e)?O.createElement("div",{className:OE},O.createElement(tn,{type:Gt.FILE_AUDIO,fillColor:Wt.ON_BACKGROUND_2,width:"24px",height:"24px"})):O.createElement("div",{className:OE},O.createElement(tn,{type:Gt.FILE_DOCUMENT,fillColor:Wt.ON_BACKGROUND_2,width:"24px",height:"24px"}))}function Qee(t){var n=t.className,e=t.replyingMessage,r=t.onClose,i=k.useContext(Zc).stringSet,a=e,s=e?.sender,l=(zs(e)||il(e))&&!k1(e);return O.createElement("div",{className:wX(["sendbird-quote_message_input",n??""])},l&&O.createElement(Yee,{message:a}),O.createElement("div",{className:"sendbird-quote_message_input__body",style:{width:"calc(100% - ".concat(l?"164px":"120px",")"),left:l?"92px":"40px"}},O.createElement(jt,{className:"sendbird-quote_message_input__body__sender-name",type:Ft.CAPTION_1,color:pt.ONBACKGROUND_1},"".concat(i.QUOTE_MESSAGE_INPUT__REPLY_TO," ").concat(s&&s.nickname?s.nickname:i.NO_NAME)),O.createElement(jt,{className:"sendbird-quote_message_input__body__message-content",type:Ft.BODY_2,color:pt.ONBACKGROUND_3},Zx(a)&&!T6(a)&&i.QUOTE_MESSAGE_INPUT__FILE_TYPE_IMAGE,qT(a)&&i.QUOTE_MESSAGE_INPUT__FILE_TYPE__VIDEO,T6(a)&&i.QUOTE_MESSAGE_INPUT__FILE_TYPE_GIF,s2(e)&&e.message,EX(e)===th.FILE&&yJ(a),il(e)&&"".concat(a.fileInfoList.length," Photos"),k1(e)&&i.VOICE_MESSAGE)),O.createElement(tn,{className:"sendbird-quote_message_input__close-button",type:Gt.CLOSE,fillColor:Wt.ON_BACKGROUND_2,width:"24px",height:"24px",onClick:function(){return r?.(e)}}))}var Xf={PREPARING:"PREPARING",READY_TO_RECORD:"READY_TO_RECORD",RECORDING:"RECORDING",COMPLETED:"COMPLETED"},$ee=function(t){var n=t.onRecordingStarted,e=n===void 0?vi:n,r=t.onRecordingEnded,i=r===void 0?vi:r,a=qa().state,s=a.config,l=s.voiceRecord,c=l?.maxRecordingTime,d=Yx(),p=d.isRecordable,g=k.useState(null),_=g[0],y=g[1],C=k.useState(Xf.PREPARING),w=C[0],A=C[1];k.useEffect(function(){p&&w===Xf.PREPARING&&A(Xf.READY_TO_RECORD)},[p]);var M=k.useCallback(function(){d?.start({onRecordingStarted:function(){A(Xf.RECORDING),e(),Y()},onRecordingEnded:function(ne){A(Xf.COMPLETED),i(ne),y(ne),F()}})},[e,i]),I=k.useCallback(function(){d?.stop(),F()},[d]),D=k.useCallback(function(){I(),y(null)},[d]),P=k.useState(0),H=P[0],L=P[1],G=k.useRef(null);function Y(){F(),L(0),G.current=setInterval(function(){L(function(ne){var J=ne+100;return J>c&&F(),J})},100)}function F(){G.current&&(clearInterval(G.current),G.current=null)}return k.useEffect(function(){H>c&&I()},[H,c,I]),{start:M,stop:I,cancel:D,recordingStatus:w,recordingTime:H,recordedFile:_,recordingLimit:c}},pi={READY_TO_RECORD:"READY_TO_RECORD",RECORDING:"RECORDING",READY_TO_PLAY:"READY_TO_PLAY",PLAYING:"PLAYING"},Xee=function(t){var n=t.inputState;switch(n){case pi.READY_TO_RECORD:return O.createElement("div",{className:"sendbird-controler-icon record-icon"});case pi.RECORDING:return O.createElement("div",{className:"sendbird-controler-icon stop-icon"});case pi.READY_TO_PLAY:return O.createElement(tn,{className:"sendbird-controler-icon play-icon",width:"20px",height:"20px",type:Gt.PLAY,fillColor:Wt.ON_BACKGROUND_1});case pi.PLAYING:return O.createElement("div",{className:"sendbird-controler-icon pause-icon"},O.createElement("div",{className:"sendbird-controler-icon pause-icon-inner"}),O.createElement("div",{className:"sendbird-controler-icon pause-icon-inner"}));default:return O.createElement(O.Fragment,null)}},Zee=function(t){var n=t.minRecordTime,e=n===void 0?FW:n,r=t.maximumValue,i=t.currentValue,a=i===void 0?0:i,s=t.currentType,l=t.onCancelClick,c=t.onControlClick,d=t.onSubmitClick,p=t.renderCancelButton,g=t.renderControlButton,_=t.renderSubmitButton,y=k.useState(0),C=y[0],w=y[1],A=k.useMemo(function(){return s===pi.READY_TO_RECORD},[s]),M=k.useMemo(function(){return s===pi.RECORDING},[s]),I=k.useMemo(function(){return s===pi.READY_TO_RECORD||s===pi.RECORDING?e>a:!1},[s,e,a]),D=k.useMemo(function(){return s===pi.READY_TO_PLAY||s===pi.PLAYING},[s]),P=Wa().stringSet,H=function(){var Y=Date.now();Y-C>lw&&(l?.(),w(Y))},L=function(){var Y=Date.now();Y-C>lw&&(c?.(s),w(Y))},G=function(){var Y=Date.now();Y-C>lw&&(I||d?.(),w(Y))};return O.createElement("div",{className:"sendbird-voice-message-input"},O.createElement("div",{className:"sendbird-voice-message-input__indicator"},O.createElement("div",{className:"sendbird-voice-message-input__indicator__progress-bar"},O.createElement(PJ,{className:"sendbird-voice-message-input__indicator__progress-bar__bar",disabled:A,maxSize:r,currentSize:a})),M?O.createElement("div",{className:"sendbird-voice-message-input__indicator__on-rec"}):null,O.createElement(LJ,{className:"sendbird-voice-message-input__indicator__playback-time",time:D?r-a:a,labelColor:A?pt.ONBACKGROUND_4:pt.ONCONTENT_1})),O.createElement("div",{className:"sendbird-voice-message-input__controler"},p?.()||O.createElement(TS,{className:"sendbird-voice-message-input__controler__cancel",onClick:H,disableUnderline:!0},O.createElement(jt,{type:Ft.BUTTON_1,color:pt.PRIMARY},P.BUTTON__CANCEL)),g?.(s)||O.createElement("div",{className:"sendbird-voice-message-input__controler__main",onClick:L},O.createElement(Xee,{inputState:s})),_?.()||O.createElement("div",{className:Bi("sendbird-voice-message-input__controler__submit",I&&"voice-message--disabled"),onClick:G},O.createElement(tn,{width:"19px",height:"19px",type:Gt.SEND,fillColor:I?Wt.ON_BACKGROUND_4:Wt.CONTENT}))))},Jee=function(t){var n=t.imageFile,e=t.compressionRate,r=t.resizingWidth,i=t.resizingHeight,a=t.outputFormat,s=document.createElement("img");return new Promise(function(l,c){s.src=URL.createObjectURL(n),s.onerror=c,s.onload=function(){URL.revokeObjectURL(s.src);var d=document.createElement("canvas"),p=s.width,g=s.height,_=!r||r>p?p:r,y=!i||i>g?g:i,C=p/_,w=g/y;C>w?y=g/(r?C:1):w>C&&(_=p/(i?w:1)),d.width=_,d.height=y;var A=d.getContext("2d");if(!A){c(new Error("Failed to get canvas 2d context"));return}A.drawImage(s,0,0,_,y);var M=a==="preserve"?n.type:"image/".concat(a),I=M.split("/").pop(),D=n.name.lastIndexOf("."),P="".concat(D===-1?n.name:n.name.substring(0,D),".").concat(I);A.canvas.toBlob(function(H){if(H){var L=new File([H],P,{type:M});l(L)}else c(new Error("Failed to compress image"))},M,e)}})},xP=function(t){return nl(void 0,[t],void 0,function(n){var e,r,i,a,s,l,c=n.files,d=n.logger,p=n.imageCompression;return rl(this,function(g){switch(g.label){case 0:return e=p.compressionRate,r=p.outputFormat,i=r===void 0?"preserve":r,a=p.resizingWidth?D1(p.resizingWidth):void 0,s=p.resizingHeight?D1(p.resizingHeight):void 0,l={failedIndexes:[],compressedFiles:[]},Array.isArray(c)&&c.length>0?!e||e<0||1<e?(d?.warning("utils - compressImages: The compressionRate is not acceptable.",e),[2,l]):[4,Promise.all(c.map(function(_,y){return nl(void 0,void 0,void 0,function(){var C,w;return rl(this,function(A){switch(A.label){case 0:if(!(_.type==="image/jpg"||_.type==="image/png"||_.type==="image/jpeg"))return d?.warning("utils - compressImages: The fileType is not compressible.",{file:_,index:y}),l.failedIndexes.push(y),l.compressedFiles.push(_),[2];A.label=1;case 1:return A.trys.push([1,3,,4]),[4,Jee({imageFile:_,compressionRate:e,resizingWidth:a,resizingHeight:s,outputFormat:i})];case 2:return C=A.sent(),l.compressedFiles.push(C),[3,4];case 3:return w=A.sent(),l.compressedFiles.push(_),l.failedIndexes.push(y),d?.warning("utils - compressImages: Failed to compress image file",{file:_,err:w}),[3,4];case 4:return[2]}})})}))]:(d?.warning("utils - compressImages: There are no files.",c),[2,l]);case 1:return g.sent(),d?.info("utils - compressImages: Finished compressing images",l),[2,l]}})})},PP=function(t){var n=t.channel,e=t.onCancelClick,r=t.onSubmitClick,i=k.useRef(Cp()).current,a=k.useState(null),s=a[0],l=a[1],c=k.useState(pi.READY_TO_RECORD),d=c[0],p=c[1],g=k.useState(!1),_=g[0],y=g[1],C=k.useState(!1),w=C[0],A=C[1],M=k.useState(!1),I=M[0],D=M[1],P=Wa().stringSet,H=qa().state,L=H.config,G=$ee({onRecordingStarted:function(){p(pi.RECORDING)},onRecordingEnded:function(qe){l(qe)}}),Y=G.start,F=G.stop,ne=G.cancel,J=G.recordingTime,re=G.recordingStatus,Oe=G.recordingLimit,Z=UJ({channelUrl:n?.url,key:i,audioFile:s??void 0}),ue=Z.play,q=Z.pause,le=Z.playbackTime,pe=Z.playingStatus,Pe=Z.stop;return k.useEffect(function(){WT(n)||R1(n)?A(!0):A(!1)},[n?.myRole,n?.isFrozen,n?.myMutedState]),k.useEffect(function(){_&&s&&(r?.(s,J),y(!1),l(null))},[_,s,J]),k.useEffect(function(){s&&(J<L.voiceRecord.minRecordingTime?(p(pi.READY_TO_RECORD),l(null)):pe===zx.PLAYING?p(pi.PLAYING):p(pi.READY_TO_PLAY))},[s,J,pe]),O.createElement("div",{className:"sendbird-voice-message-input-wrapper"},O.createElement(Zee,{currentValue:re===Xf.COMPLETED?le:J,maximumValue:re===Xf.COMPLETED?J:Oe,currentType:d,onCancelClick:function(){e?.(),ne(),Pe()},onSubmitClick:function(){w?(D(!0),p(pi.READY_TO_RECORD)):(F(),q(),y(!0))},onControlClick:function(qe){switch(qe){case pi.READY_TO_RECORD:{Pe(),Y();break}case pi.RECORDING:{J>=L.voiceRecord.minRecordingTime&&!w?F():w?(ne(),D(!0),p(pi.READY_TO_RECORD)):(ne(),p(pi.READY_TO_RECORD));break}case pi.READY_TO_PLAY:{ue();break}case pi.PLAYING:{q();break}}}}),I&&O.createElement(NS,{className:"sendbird-voice-message-input-wrapper-alert",titleText:R1(n)?P.MODAL__VOICE_MESSAGE_INPUT_DISABLED__TITLE_MUTED:P.MODAL__VOICE_MESSAGE_INPUT_DISABLED__TITLE_FROZEN,hideFooter:!0,isCloseOnClickOutside:!0,onClose:function(){D(!1),e?.()}},O.createElement("div",{className:"sendbird-voice-message-input-wrapper-alert__body"},O.createElement(Ng,{className:"sendbird-voice-message-input-wrapper-alert__body__ok-button",type:Vi.PRIMARY,size:_h.BIG,onClick:function(){D(!1),e?.()}},P.BUTTON__OK))))},ete=function(t,n){var e=t.sendFileMessage,r=t.sendMultipleFilesMessage,i=t.quoteMessage,a=n.logger,s=Wa().stringSet,l=qa().state,c=l.config,d=c.imageCompression,p=c?.uikitUploadSizeLimit,g=c?.uikitMultipleFilesMessageLimit,_=Qx().openModal;return k.useCallback(function(y){return nl(void 0,void 0,void 0,function(){var C,w,A,M,I,D;return rl(this,function(P){switch(P.label){case 0:return y.length===0?(a.warning("Channel|useHandleUploadFiles: given file list is empty.",{files:y}),[2]):y.length>g?(a.info("Channel|useHandleUploadFiles: Cannot upload files more than ".concat(g)),_({modalProps:{titleText:s.FILE_UPLOAD_NOTIFICATION__COUNT_LIMIT.replace("%d","".concat(p)),hideFooter:!0},childElement:function(H){var L=H.closeModal;return O.createElement(P0,{type:Vi.PRIMARY,submitText:s.BUTTON__OK,hideCancelButton:!0,onCancel:L,onSubmit:L})}}),[2]):y.some(function(H){return H.size>p})?(a.info("Channel|useHandleUploadFiles: Cannot upload file size exceeding ".concat(p)),C=1024*1024,_({modalProps:{titleText:s.FILE_UPLOAD_NOTIFICATION__SIZE_LIMIT.replace("%d","".concat(Math.floor(p/C))),hideFooter:!0},childElement:function(H){var L=H.closeModal;return O.createElement(P0,{type:Vi.PRIMARY,submitText:s.BUTTON__OK,hideCancelButton:!0,onCancel:L,onSubmit:L})}}),[2]):[4,xP({files:y,imageCompression:d,logger:a})];case 1:return w=P.sent().compressedFiles,A=w,A.length===1?(a.info("Channel|useHandleUploadFiles: sending one file."),M=A[0],[2,e({file:M,parentMessageId:i?.messageId})]):A.length>1?(a.info("Channel|useHandleUploadFiles: sending multiple files."),I=[],D=[],A.forEach(function(H){kp(H.type)?I.push(H):D.push(H)}),[2,D.reduce(function(H,L){return H.then(function(){return e({file:L,parentMessageId:i?.messageId})})},(function(){return I.length===0?Promise.resolve():I.length===1?e({file:I[0]}):r({fileInfoList:I.map(function(H){return{file:H,fileName:H.name,fileSize:H.size,mimeType:H.type}}),parentMessageId:i?.messageId})})())]):[2]}})})},[e,r,i])};O.forwardRef(function(t,n){var e,r=t.currentChannel,i=t.messages,a=t.loading,s=t.quoteMessage,l=t.setQuoteMessage,c=t.messageInputRef,d=t.sendUserMessage,p=t.sendFileMessage,g=t.sendVoiceMessage,_=t.sendMultipleFilesMessage,y=t.renderUserMentionItem,C=t.renderFileUploadIcon,w=t.renderVoiceMessageIcon,A=t.renderSendMessageIcon,M=t.acceptableMimeTypes,I=t.disabled,D=Wa().stringSet,P=Jc().isMobile,H=qa().state,L=H.stores,G=H.config,Y=G.isOnline,F=G.userMention,ne=G.logger,J=G.groupChannel,re=L.sdkStore.sdk,Oe=F.maxMentionCount,Z=F.maxSuggestionCount,ue=r?.isBroadcast,q=r?.myRole==="operator",le=(e=t.isMultipleFilesMessageEnabled)!==null&&e!==void 0?e:G.isMultipleFilesMessageEnabled,pe=J.enableMention,Pe=J.enableVoiceMessage,qe=k.useState(""),$=qe[0],fe=qe[1],Ie=k.useState([]),We=Ie[0],Ne=Ie[1],He=k.useState([]),tt=He[0],At=He[1],bt=k.useState(null),vr=bt[0],wn=bt[1],Rn=k.useState([]),xn=Rn[0],Zt=Rn[1],Pn=k.useState(null),Zn=Pn[0],fn=Pn[1],_r=k.useState(!1),jn=_r[0],Un=_r[1],gt=a||!r||!re||!re.isCacheEnabled&&!Y||WT(r)||R1(r)||I6(r,G.groupChannel.enableSuggestedReplies)||M6(i,G.groupChannel.enableFormTypeMessage)||I,Dn=!gt&&pe&&$.length>0&&!ue,Cr=aP({ref:n||c},{logger:ne}),gn=Cr?.length<Oe;k.useEffect(function(){fe(""),Ne([]),At([]),wn(null),Zt([]),fn(null),Un(!1)},[r?.url]),k.useEffect(function(){Ne(We.filter(function(Lt){var Wn=Lt.userId,cr=tt.indexOf(Wn);return cr<0?!1:(tt.splice(cr,1),!0)}))},[tt]);var rr=ete({sendFileMessage:p,sendMultipleFilesMessage:_,quoteMessage:s??void 0},{logger:ne});return ue&&!q?null:O.createElement("div",{className:jn?"sendbird-message-input-wrapper--voice-message":"sendbird-message-input-wrapper"},Dn&&O.createElement(Kee,{currentChannel:r,targetNickname:$,inputEvent:Zn??void 0,renderUserMentionItem:y,onUserItemClick:function(Lt){Lt&&Ne(et(et([],We,!0),[Lt],!1)),fe(""),wn(Lt),fn(null)},onFocusItemChange:function(){fn(null)},onFetchUsers:function(Lt){Zt(Lt)},ableAddMention:gn,maxMentionCount:Oe,maxSuggestionCount:Z}),s&&O.createElement("div",{className:"sendbird-message-input-wrapper__quote-message-input"},O.createElement(Qee,{replyingMessage:s,onClose:function(){l(null)}})),jn?O.createElement(PP,{channel:r??void 0,onSubmitClick:function(Lt,Wn){g({file:Lt,parentMessageId:s?.messageId},Wn),l(null),Un(!1)},onCancelClick:function(){Un(!1)}}):O.createElement(l2,{className:"sendbird-message-input-wrapper__message-input",channel:r,channelUrl:r?.url,isMobile:P,acceptableMimeTypes:M,mentionSelectedUser:vr,isMentionEnabled:pe,isVoiceMessageEnabled:Pe,isSelectingMultipleFilesEnabled:le,onVoiceMessageIconClick:function(){Un(!0)},setMentionedUsers:Ne,placeholder:s&&D.MESSAGE_INPUT__QUOTE_REPLY__PLACE_HOLDER||WT(r)&&D.MESSAGE_INPUT__PLACE_HOLDER__FROZEN||R1(r)&&(P?D.MESSAGE_INPUT__PLACE_HOLDER__MUTED_SHORT:D.MESSAGE_INPUT__PLACE_HOLDER__MUTED)||I6(r,G.groupChannel.enableSuggestedReplies)&&D.MESSAGE_INPUT__PLACE_HOLDER__SUGGESTED_REPLIES||M6(i,G.groupChannel.enableFormTypeMessage)&&D.MESSAGE_INPUT__PLACE_HOLDER__MESSAGE_FORM||I&&D.MESSAGE_INPUT__PLACE_HOLDER__DISABLED||void 0,ref:n||c,disabled:gt,renderFileUploadIcon:C,renderSendMessageIcon:A,renderVoiceMessageIcon:w,onStartTyping:function(){r?.startTyping()},onSendMessage:function(Lt){var Wn,cr=Lt.message,dn=Lt.mentionTemplate;d({message:cr,mentionedUsers:We,mentionedMessageTemplate:dn,parentMessageId:s?.messageId}),fe(""),Ne([]),l(null),(Wn=r?.endTyping)===null||Wn===void 0||Wn.call(r)},onFileUpload:function(Lt){rr(Lt),l(null)},onUserMentioned:function(Lt){vr?.userId===Lt?.userId&&(wn(null),fe(""))},onMentionStringChange:function(Lt){fe(Lt)},onMentionedUserIdsUpdated:function(Lt){At(Lt)},onKeyDown:function(Lt){return Dn&&xn?.length>0&&(Lt.key===Kl.Enter&&gn||Lt.key===Kl.ArrowUp||Lt.key===Kl.ArrowDown)?(fn(Lt),!0):!1}}))});O.createContext(null);O.createContext(null);function tte(t,n,e){e===void 0&&(e={leading:!0,trailing:!1});var r=k.useRef(null),i=k.useRef(null);return k.useEffect(function(){return function(){r.current&&clearTimeout(r.current)}},[]),_S(function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];if(r.current){i.current=a;return}e.leading?t.apply(void 0,a):i.current=a;var l=function(){e.trailing&&i.current?(t.apply(void 0,i.current),i.current=null,r.current=setTimeout(l,n)):r.current=null};r.current=setTimeout(l,n)})}var vk=function(t){return t==null};function Jd(t,n){if(vk(t)||vk(n))return!1;var e=t.toString(),r=n.toString();return e===r}var d2=function(t){t===void 0&&(t=0);var n=10,e=t;if(!(e>n))try{var r=document.querySelector(".sendbird-thread-ui--scroll");r&&(r.scrollTop=r.scrollHeight)}catch{setTimeout(function(){d2(e+1)},500*e)}},nte=function(t,n){var e=t.currentChannel,r=t.onBeforeSendMultipleFilesMessage,i=t.publishingModules,a=n.logger,s=n.pubSub,l=n.scrollRef,c=k.useCallback(function(d,p){return new Promise(function(g,_){e||(a.warning("Channel: Sending MFm failed, because currentChannel is null.",{currentChannel:e}),_()),d.length<=1&&(a.warning("Channel: Sending MFM failed, because there are no multiple files.",{files:d}),_());var y={fileInfoList:d.map(function(C){return{file:C,fileName:C.name,fileSize:C.size,mimeType:C.type}})};p&&(y.isReplyToChannel=!0,y.parentMessageId=p.messageId),typeof r=="function"&&(y=r(d,p)),a.info("Channel: Start sending MFM",{messageParams:y});try{e?.sendMultipleFilesMessage(y).onFileUploaded(function(C,w,A,M){a.info("Channel: onFileUploaded during sending MFM",{requestId:C,index:w,error:M,uploadableFileInfo:A}),s.publish(To.ON_FILE_INFO_UPLOADED,{response:{channelUrl:e.url,requestId:C,index:w,uploadableFileInfo:A,error:M},publishingModules:i})}).onPending(function(C){a.info("Channel: in progress of sending MFM",{pendingMessage:C,fileInfoList:y.fileInfoList}),s.publish(To.SEND_MESSAGE_START,{message:C,channel:e,publishingModules:i}),setTimeout(function(){l&&UX(i)&&DP(0,l),LX(i)&&d2(0)},yS)}).onFailed(function(C,w){a.error("Channel: Sending MFM failed.",{error:C,failedMessage:w}),s.publish(To.SEND_MESSAGE_FAILED,{channel:e,message:w,publishingModules:i}),_(C)}).onSucceeded(function(C){a.info("Channel: Sending voice message success!",{succeededMessage:C}),s.publish(To.SEND_FILE_MESSAGE,{channel:e,message:C,publishingModules:i}),g(C)})}catch(C){a.error("Channel: Sending MFM failed.",{error:C}),_(C)}})},[e,r,i]);return[c]};CS();O.createContext(null);O.createContext(null);k.createContext(null);k.createContext(void 0);var Iw=function(){},rte={checked:null,defaultChecked:!1,disabled:!1,onChange:Iw,onFocus:Iw,onBlur:Iw};O.createContext(rte);var _k;(function(t){t.SCORE="score",t.TIMESTAMP="ts"})(_k||(_k={}));k.createContext(null);var Zf;(function(t){t.NIL="NIL",t.LOADING="LOADING",t.INVALID="INVALID",t.INITIALIZED="INITIALIZED"})(Zf||(Zf={}));var rh;(function(t){t.NIL="NIL",t.LOADING="LOADING",t.INVALID="INVALID",t.INITIALIZED="INITIALIZED"})(rh||(rh={}));var Rc;(function(t){t.NIL="NIL",t.LOADING="LOADING",t.INVALID="INVALID",t.INITIALIZED="INITIALIZED"})(Rc||(Rc={}));var n3=30,r3=30;function ite(t,n){var e=t.currentChannel,r=n.logger;return k.useCallback(function(i,a,s){var l,c;if(s){(l=e?.deleteReaction)===null||l===void 0||l.call(e,i,a).then(function(d){r.info("Thread | useToggleReactionsCallback: Delete reaction succeeded.",d)}).catch(function(d){r.warning("Thread | useToggleReactionsCallback: Delete reaction failed.",d)});return}(c=e?.addReaction)===null||c===void 0||c.call(e,i,a).then(function(d){r.info("Thread | useToggleReactionsCallback: Add reaction succeeded.",d)}).catch(function(d){r.warning("Thread | useToggleReactionsCallback: Add reaction failed.",d)})},[e])}function ate(t,n){var e=t.isMentionEnabled,r=t.currentChannel,i=t.onBeforeSendUserMessage,a=t.sendMessageStart,s=t.sendMessageFailure,l=n.logger,c=n.pubSub,d=k.useCallback(function(p){var g,_=p.message,y=p.quoteMessage,C=p.mentionTemplate,w=p.mentionedUsers,A=function(){var I={};I.message=_;var D=w?.length||0;return e&&D&&(I.mentionedUsers=w),e&&C&&D&&(I.mentionedMessageTemplate=C),y&&(I.isReplyToChannel=!0,I.parentMessageId=y.messageId),I},M=(g=i?.(_,y))!==null&&g!==void 0?g:A();l.info("Thread | useSendUserMessageCallback: Sending user message start.",M),r?.sendUserMessage&&r?.sendUserMessage(M).onPending(function(I){a(I)}).onFailed(function(I,D){l.info("Thread | useSendUserMessageCallback: Sending user message failed.",{message:D,error:I}),s(D)}).onSucceeded(function(I){l.info("Thread | useSendUserMessageCallback: Sending user message succeeded.",I),c.publish(To.SEND_USER_MESSAGE,{channel:r,message:I,publishingModules:[No.THREAD]})})},[e,r,i,a,s]);return d}function ste(t,n){var e=t.currentChannel,r=t.onBeforeSendFileMessage,i=t.sendMessageStart,a=t.sendMessageFailure,s=n.logger,l=n.pubSub;return k.useCallback(function(c,d){return new Promise(function(p,g){var _,y=function(){var w={};return w.file=c,d&&(w.isReplyToChannel=!0,w.parentMessageId=d.messageId),w},C=(_=r?.(c,d))!==null&&_!==void 0?_:y();s.info("Thread | useSendFileMessageCallback: Sending file message start.",C),e==null?(s.warning("Thread | useSendFileMessageCallback: currentChannel is null. Skipping file message send."),p(null)):e.sendFileMessage(C).onPending(function(w){i(ke(ke({},w),{url:URL.createObjectURL(c),sendingStatus:cn.PENDING,isUserMessage:w.isUserMessage,isFileMessage:w.isFileMessage,isAdminMessage:w.isAdminMessage,isMultipleFilesMessage:w.isMultipleFilesMessage})),setTimeout(function(){return d2()},yS)}).onFailed(function(w,A){A.localUrl=URL.createObjectURL(c),A.file=c,s.info("Thread | useSendFileMessageCallback: Sending file message failed.",{message:A,error:w}),a(A),g(w)}).onSucceeded(function(w){s.info("Thread | useSendFileMessageCallback: Sending file message succeeded.",w),l.publish(To.SEND_FILE_MESSAGE,{channel:e,message:w,publishingModules:[No.THREAD]}),p(w)})})},[e,r,i,a])}var ote=function(t,n){var e=t.currentChannel,r=t.onBeforeSendVoiceMessage,i=t.sendMessageStart,a=t.sendMessageFailure,s=n.logger,l=n.pubSub,c=k.useCallback(function(d,p,g){var _=r&&typeof r=="function"?r(d,g):{file:d,fileName:jW,mimeType:Rx,metaArrays:[new wa({key:GW,value:["".concat(p)]}),new wa({key:VW,value:[BW]})]};g&&(_.isReplyToChannel=!0,_.parentMessageId=g.messageId),s.info("Thread | useSendVoiceMessageCallback:  Start sending voice message",_),e?.sendFileMessage(_).onPending(function(y){i(ke(ke({},y),{url:URL.createObjectURL(d),sendingStatus:cn.PENDING,isUserMessage:y.isUserMessage,isFileMessage:y.isFileMessage,isAdminMessage:y.isAdminMessage,isMultipleFilesMessage:y.isMultipleFilesMessage})),setTimeout(function(){return d2()},yS)}).onFailed(function(y,C){C.localUrl=URL.createObjectURL(d),C.file=d,s.info("Thread | useSendVoiceMessageCallback: Sending voice message failed.",{message:C,error:y}),a(C)}).onSucceeded(function(y){s.info("Thread | useSendVoiceMessageCallback: Sending voice message succeeded.",y),l.publish(To.SEND_FILE_MESSAGE,{channel:e,message:y,publishingModules:[No.THREAD]})})},[e,r,i,a]);return c};function lte(t,n){var e=t.currentChannel,r=t.resendMessageStart,i=t.sendMessageSuccess,a=t.sendMessageFailure,s=n.logger,l=n.pubSub;return k.useCallback(function(c){var d,p,g,_,y;if(!c?.isResendable){s.warning("Thread | useResendMessageCallback: Message is not resendable.",c);return}if(s.info("Thread | useResendMessageCallback: Resending failedMessage start.",c),!((d=c?.isUserMessage)===null||d===void 0)&&d.call(c)||c?.messageType===Hn.USER)try{e?.resendMessage(c).onPending(function(C){s.info("Thread | useResendMessageCallback: Resending user message started.",C),r(C)}).onSucceeded(function(C){s.info("Thread | useResendMessageCallback: Resending user message succeeded.",C),i(C),l.publish(To.SEND_USER_MESSAGE,{channel:e,message:C,publishingModules:[No.THREAD]})}).onFailed(function(C){s.warning("Thread | useResendMessageCallback: Resending user message failed.",C),c.sendingStatus=cn.FAILED,a(c)})}catch(C){s.warning("Thread | useResendMessageCallback: Resending user message failed.",C),c.sendingStatus=cn.FAILED,a(c)}else if(!((p=c?.isFileMessage)===null||p===void 0)&&p.call(c))try{(g=e?.resendMessage)===null||g===void 0||g.call(e,c).onPending(function(C){s.info("Thread | useResendMessageCallback: Resending file message started.",C),r(C)}).onSucceeded(function(C){s.info("Thread | useResendMessageCallback: Resending file message succeeded.",C),i(C),l.publish(To.SEND_FILE_MESSAGE,{channel:e,message:c,publishingModules:[No.THREAD]})}).onFailed(function(C){s.warning("Thread | useResendMessageCallback: Resending file message failed.",C),c.sendingStatus=cn.FAILED,a(c)})}catch(C){s.warning("Thread | useResendMessageCallback: Resending file message failed.",C),c.sendingStatus=cn.FAILED,a(c)}else if(!((_=c?.isMultipleFilesMessage)===null||_===void 0)&&_.call(c))try{(y=e?.resendMessage)===null||y===void 0||y.call(e,c).onPending(function(C){s.info("Thread | useResendMessageCallback: Resending multiple files message started.",C),r(C)}).onFileUploaded(function(C,w,A,M){s.info("Thread | useResendMessageCallback: onFileUploaded during resending multiple files message.",{requestId:C,index:w,error:M,uploadableFileInfo:A}),l.publish(To.ON_FILE_INFO_UPLOADED,{response:{channelUrl:e.url,requestId:C,index:w,uploadableFileInfo:A,error:M},publishingModules:[No.THREAD]})}).onSucceeded(function(C){s.info("Thread | useResendMessageCallback: Resending MFM succeeded.",C),i(C),l.publish(To.SEND_FILE_MESSAGE,{channel:e,message:C,publishingModules:[No.THREAD]})}).onFailed(function(C,w){s.warning("Thread | useResendMessageCallback: Resending MFM failed.",C),a(w)})}catch(C){s.warning("Thread | useResendMessageCallback: Resending MFM failed.",C),a(c)}else s.warning("Thread | useResendMessageCallback: Message is not resendable.",c),c.sendingStatus=cn.FAILED,a(c)},[e,r,i,a])}function ute(t,n){var e=t.currentChannel,r=t.isMentionEnabled,i=t.onMessageUpdated,a=n.logger,s=n.pubSub;return k.useCallback(function(l){var c,d=l.messageId,p=l.message,g=l.mentionedUsers,_=l.mentionTemplate,y=function(){var w={};return w.message=p,r&&g&&g?.length>0&&(w.mentionedUsers=g),r&&_?w.mentionedMessageTemplate=_:w.mentionedMessageTemplate=p,w},C=y();if(a.info("Thread | useUpdateMessageCallback: Message update start.",C),e==null){a.warning("Thread | useUpdateMessageCallback: currentChannel is null.");return}(c=e.updateUserMessage)===null||c===void 0||c.call(e,d,C).then(function(w){a.info("Thread | useUpdateMessageCallback: Message update succeeded.",w),i(e,w),s.publish(To.UPDATE_USER_MESSAGE,{fromSelector:!0,channel:e,message:w,publishingModules:[No.THREAD]})})},[e,r,i])}function cte(t,n){var e=t.currentChannel,r=t.onMessageDeletedByReqId,i=t.onMessageDeleted,a=n.logger;return k.useCallback(function(s){a.info("Thread | useDeleteMessageCallback: Deleting message.",s);var l=s.sendingStatus;return new Promise(function(c,d){var p;a.info("Thread | useDeleteMessageCallback: Deleting message requestState:",l),(l==="failed"||l==="pending")&&(a.info("Thread | useDeleteMessageCallback: Deleted message from local:",s),r(s.reqId),c()),e==null&&(a.info("Thread | useDeleteMessageCallback: No current channel"),c()),a.info("Thread | useDeleteMessageCallback: Deleting message from remote:",l),(p=e.deleteMessage)===null||p===void 0||p.call(e,s).then(function(){a.info("Thread | useDeleteMessageCallback: Deleting message success!",s),i(e,s.messageId),c()}).catch(function(g){a.warning("Thread | useDeleteMessageCallback: Deleting message failed!",g),d(g)})})},[e,r,i])}function Mw(t){return ke({prevResultSize:n3,nextResultSize:r3,includeMetaArray:!0,isInclusive:!0},t)}var dte=function(t){var n=t.isReactionEnabled,e=t.anchorMessage,r=t.parentMessage,i=t.logger,a=t.oldestMessageTimeStamp,s=t.latestMessageTimeStamp,l=t.threadListState,c=t.initializeThreadListStart,d=t.initializeThreadListSuccess,p=t.initializeThreadListFailure,g=t.getPrevMessagesStart,_=t.getPrevMessagesSuccess,y=t.getPrevMessagesFailure,C=t.getNextMessagesStart,w=t.getNextMessagesSuccess,A=t.getNextMessagesFailure,M=qa().state.stores,I=e?.createdAt||0,D=k.useCallback(function(L){return nl(void 0,void 0,void 0,function(){var G,Y,F,ne,J;return rl(this,function(re){switch(re.label){case 0:if(!M.sdkStore.initialized||!r)return[2];c(),re.label=1;case 1:return re.trys.push([1,3,,4]),G=Mw({includeReactions:n}),i.info("Thread | useGetThreadList: Initialize thread list start.",{timestamp:I,params:G}),[4,r.getThreadedMessagesByTimestamp(I,G)];case 2:return Y=re.sent(),F=Y.threadedMessages,ne=Y.parentMessage,i.info("Thread | useGetThreadList: Initialize thread list succeeded.",{staleParentMessage:r,threadedMessages:F}),d(ne,e,F),setTimeout(function(){return L?.(F)}),[3,4];case 3:return J=re.sent(),i.info("Thread | useGetThreadList: Initialize thread list failed.",J),p(),[3,4];case 4:return[2]}})})},[M.sdkStore.initialized,r,e,n,c,d,p]),P=k.useCallback(function(L){return nl(void 0,void 0,void 0,function(){var G,Y,F,ne,J;return rl(this,function(re){switch(re.label){case 0:if(l!==Rc.INITIALIZED||a===0||!r)return[2];g(),re.label=1;case 1:return re.trys.push([1,3,,4]),G=Mw({nextResultSize:0,includeReactions:n}),[4,r.getThreadedMessagesByTimestamp(a,G)];case 2:return Y=re.sent(),F=Y.threadedMessages,ne=Y.parentMessage,i.info("Thread | useGetPrevThreadsCallback: Fetch prev threads succeeded.",{parentMessage:ne,threadedMessages:F}),_(F),setTimeout(function(){return L?.(F)}),[3,4];case 3:return J=re.sent(),i.info("Thread | useGetPrevThreadsCallback: Fetch prev threads failed.",J),y(),[3,4];case 4:return[2]}})})},[l,a,n,r,g,_,y]),H=k.useCallback(function(L){return nl(void 0,void 0,void 0,function(){var G,Y,F,ne,J;return rl(this,function(re){switch(re.label){case 0:if(l!==Rc.INITIALIZED||s===0||!r)return[2];C(),re.label=1;case 1:return re.trys.push([1,3,,4]),G=Mw({prevResultSize:0,includeReactions:n}),[4,r.getThreadedMessagesByTimestamp(s,G)];case 2:return Y=re.sent(),F=Y.threadedMessages,ne=Y.parentMessage,i.info("Thread | useGetNextThreadsCallback: Fetch next threads succeeded.",{parentMessage:ne,threadedMessages:F}),w(F),setTimeout(function(){return L?.(F)}),[3,4];case 3:return J=re.sent(),i.info("Thread | useGetNextThreadsCallback: Fetch next threads failed.",J),A(),[3,4];case 4:return[2]}})})},[l,s,n,r,C,w,A]);return{initializeThreadFetcher:D,fetchPrevThreads:P,fetchNextThreads:H}},G1={exports:{}};G1.exports;(function(t,n){(function(){var e,r="4.17.21",i=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",l="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",d=500,p="__lodash_placeholder__",g=1,_=2,y=4,C=1,w=2,A=1,M=2,I=4,D=8,P=16,H=32,L=64,G=128,Y=256,F=512,ne=30,J="...",re=800,Oe=16,Z=1,ue=2,q=3,le=1/0,pe=9007199254740991,Pe=17976931348623157e292,qe=NaN,$=4294967295,fe=$-1,Ie=$>>>1,We=[["ary",G],["bind",A],["bindKey",M],["curry",D],["curryRight",P],["flip",F],["partial",H],["partialRight",L],["rearg",Y]],Ne="[object Arguments]",He="[object Array]",tt="[object AsyncFunction]",At="[object Boolean]",bt="[object Date]",vr="[object DOMException]",wn="[object Error]",Rn="[object Function]",xn="[object GeneratorFunction]",Zt="[object Map]",Pn="[object Number]",Zn="[object Null]",fn="[object Object]",_r="[object Promise]",jn="[object Proxy]",Un="[object RegExp]",gt="[object Set]",Dn="[object String]",Cr="[object Symbol]",gn="[object Undefined]",rr="[object WeakMap]",Lt="[object WeakSet]",Wn="[object ArrayBuffer]",cr="[object DataView]",dn="[object Float32Array]",ti="[object Float64Array]",_i="[object Int8Array]",Sr="[object Int16Array]",Dr="[object Int32Array]",Kn="[object Uint8Array]",Yn="[object Uint8ClampedArray]",Jt="[object Uint16Array]",Lr="[object Uint32Array]",aa=/\b__p \+= '';/g,Mt=/\b(__p \+=) '' \+/g,Dt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,vt=/&(?:amp|lt|gt|quot|#39);/g,Ze=/[&<>"']/g,Ae=RegExp(vt.source),Et=RegExp(Ze.source),_t=/<%-([\s\S]+?)%>/g,yt=/<%([\s\S]+?)%>/g,Gn=/<%=([\s\S]+?)%>/g,xt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,zi=/^\w*$/,sa=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,yi=/[\\^$.*+?()[\]{}|]/g,qs=RegExp(yi.source),Cs=/^\s+/,qi=/\s/,Wi=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,rt=/\{\n\/\* \[wrapped with (.+)\] \*/,Ct=/,? & /,ct=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ot=/[()=,{}\[\]\/\s]/,ht=/\\(\\)?/g,Vt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Nn=/\w*$/,ni=/^[-+]0x[0-9a-f]+$/i,Fr=/^0b[01]+$/i,Ar=/^\[object .+?Constructor\]$/,ee=/^0o[0-7]+$/i,Xe=/^(?:0|[1-9]\d*)$/,Be=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Pt=/($^)/,hn=/['\n\r\u2028\u2029\\]/g,Kt="\\ud800-\\udfff",ln="\\u0300-\\u036f",Ir="\\ufe20-\\ufe2f",Hr="\\u20d0-\\u20ff",Br=ln+Ir+Hr,Ln="\\u2700-\\u27bf",oa="a-z\\xdf-\\xf6\\xf8-\\xff",Ws="\\xac\\xb1\\xd7\\xf7",Io="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ku="\\u2000-\\u206f",Ks=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",zr="A-Z\\xc0-\\xd6\\xd8-\\xde",la="\\ufe0e\\ufe0f",bi=Ws+Io+Ku+Ks,Zl="[']",Yu="["+Kt+"]",ul="["+bi+"]",Ys="["+Br+"]",Mo="\\d+",Jl="["+Ln+"]",xi="["+oa+"]",ws="[^"+Kt+bi+Mo+Ln+oa+zr+"]",cl="\\ud83c[\\udffb-\\udfff]",Qu="(?:"+Ys+"|"+cl+")",Qs="[^"+Kt+"]",eu="(?:\\ud83c[\\udde6-\\uddff]){2}",dl="[\\ud800-\\udbff][\\udc00-\\udfff]",ua="["+zr+"]",Aa="\\u200d",tu="(?:"+xi+"|"+ws+")",Oo="(?:"+ua+"|"+ws+")",Ns="(?:"+Zl+"(?:d|ll|m|re|s|t|ve))?",ko="(?:"+Zl+"(?:D|LL|M|RE|S|T|VE))?",Ro=Qu+"?",Do="["+la+"]?",ca="(?:"+Aa+"(?:"+[Qs,eu,dl].join("|")+")"+Do+Ro+")*",hl="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",fl="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Pi=Do+Ro+ca,$s="(?:"+[Jl,eu,dl].join("|")+")"+Pi,Ch="(?:"+[Qs+Ys+"?",Ys,eu,dl,Yu].join("|")+")",ed=RegExp(Zl,"g"),wh=RegExp(Ys,"g"),wr=RegExp(cl+"(?="+cl+")|"+Ch+Pi,"g"),Ka=RegExp([ua+"?"+xi+"+"+Ns+"(?="+[ul,ua,"$"].join("|")+")",Oo+"+"+ko+"(?="+[ul,ua+tu,"$"].join("|")+")",ua+"?"+tu+"+"+Ns,ua+"+"+ko,fl,hl,Mo,$s].join("|"),"g"),$u=RegExp("["+Aa+Kt+Br+la+"]"),pl=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ya=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],nu=-1,Vn={};Vn[dn]=Vn[ti]=Vn[_i]=Vn[Sr]=Vn[Dr]=Vn[Kn]=Vn[Yn]=Vn[Jt]=Vn[Lr]=!0,Vn[Ne]=Vn[He]=Vn[Wn]=Vn[At]=Vn[cr]=Vn[bt]=Vn[wn]=Vn[Rn]=Vn[Zt]=Vn[Pn]=Vn[fn]=Vn[Un]=Vn[gt]=Vn[Dn]=Vn[rr]=!1;var Qn={};Qn[Ne]=Qn[He]=Qn[Wn]=Qn[cr]=Qn[At]=Qn[bt]=Qn[dn]=Qn[ti]=Qn[_i]=Qn[Sr]=Qn[Dr]=Qn[Zt]=Qn[Pn]=Qn[fn]=Qn[Un]=Qn[gt]=Qn[Dn]=Qn[Cr]=Qn[Kn]=Qn[Yn]=Qn[Jt]=Qn[Lr]=!0,Qn[wn]=Qn[Rn]=Qn[rr]=!1;var Xu={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},ru={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Nh={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Mi={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},xo=parseFloat,iu=parseInt,ml=typeof kc=="object"&&kc&&kc.Object===Object&&kc,Th=typeof self=="object"&&self&&self.Object===Object&&self,qr=ml||Th||Function("return this")(),gl=n&&!n.nodeType&&n,Ia=gl&&!0&&t&&!t.nodeType&&t,vl=Ia&&Ia.exports===gl,Zu=vl&&ml.process,Ki=(function(){try{var de=Ia&&Ia.require&&Ia.require("util").types;return de||Zu&&Zu.binding&&Zu.binding("util")}catch{}})(),Sh=Ki&&Ki.isArrayBuffer,td=Ki&&Ki.isDate,Ju=Ki&&Ki.isMap,nd=Ki&&Ki.isRegExp,Ah=Ki&&Ki.isSet,pn=Ki&&Ki.isTypedArray;function ot(de,xe,we){switch(we.length){case 0:return de.call(xe);case 1:return de.call(xe,we[0]);case 2:return de.call(xe,we[0],we[1]);case 3:return de.call(xe,we[0],we[1],we[2])}return de.apply(xe,we)}function Ce(de,xe,we,st){for(var Qt=-1,bn=de==null?0:de.length;++Qt<bn;){var xr=de[Qt];xe(st,xr,we(xr),de)}return st}function ce(de,xe){for(var we=-1,st=de==null?0:de.length;++we<st&&xe(de[we],we,de)!==!1;);return de}function ft(de,xe){for(var we=de==null?0:de.length;we--&&xe(de[we],we,de)!==!1;);return de}function at(de,xe){for(var we=-1,st=de==null?0:de.length;++we<st;)if(!xe(de[we],we,de))return!1;return!0}function dt(de,xe){for(var we=-1,st=de==null?0:de.length,Qt=0,bn=[];++we<st;){var xr=de[we];xe(xr,we,de)&&(bn[Qt++]=xr)}return bn}function Jn(de,xe){var we=de==null?0:de.length;return!!we&&rd(de,xe,0)>-1}function mn(de,xe,we){for(var st=-1,Qt=de==null?0:de.length;++st<Qt;)if(we(xe,de[st]))return!0;return!1}function Nr(de,xe){for(var we=-1,st=de==null?0:de.length,Qt=Array(st);++we<st;)Qt[we]=xe(de[we],we,de);return Qt}function au(de,xe){for(var we=-1,st=xe.length,Qt=de.length;++we<st;)de[Qt+we]=xe[we];return de}function Pg(de,xe,we,st){var Qt=-1,bn=de==null?0:de.length;for(st&&bn&&(we=de[++Qt]);++Qt<bn;)we=xe(we,de[Qt],Qt,de);return we}function ay(de,xe,we,st){var Qt=de==null?0:de.length;for(st&&Qt&&(we=de[--Qt]);Qt--;)we=xe(we,de[Qt],Qt,de);return we}function Ug(de,xe){for(var we=-1,st=de==null?0:de.length;++we<st;)if(xe(de[we],we,de))return!0;return!1}var v2=ec("length");function _2(de){return de.split("")}function y2(de){return de.match(ct)||[]}function sy(de,xe,we){var st;return we(de,function(Qt,bn,xr){if(xe(Qt,bn,xr))return st=bn,!1}),st}function Rp(de,xe,we,st){for(var Qt=de.length,bn=we+(st?1:-1);st?bn--:++bn<Qt;)if(xe(de[bn],bn,de))return bn;return-1}function rd(de,xe,we){return xe===xe?w2(de,xe,we):Rp(de,oy,we)}function b2(de,xe,we,st){for(var Qt=we-1,bn=de.length;++Qt<bn;)if(st(de[Qt],xe))return Qt;return-1}function oy(de){return de!==de}function Dp(de,xe){var we=de==null?0:de.length;return we?xp(de,xe)/we:qe}function ec(de){return function(xe){return xe==null?e:xe[de]}}function Lg(de){return function(xe){return de==null?e:de[xe]}}function Fg(de,xe,we,st,Qt){return Qt(de,function(bn,xr,ir){we=st?(st=!1,bn):xe(we,bn,xr,ir)}),we}function ly(de,xe){var we=de.length;for(de.sort(xe);we--;)de[we]=de[we].value;return de}function xp(de,xe){for(var we,st=-1,Qt=de.length;++st<Qt;){var bn=xe(de[st]);bn!==e&&(we=we===e?bn:we+bn)}return we}function Pp(de,xe){for(var we=-1,st=Array(de);++we<de;)st[we]=xe(we);return st}function uy(de,xe){return Nr(xe,function(we){return[we,de[we]]})}function tc(de){return de&&de.slice(0,ad(de)+1).replace(Cs,"")}function Qa(de){return function(xe){return de(xe)}}function Hg(de,xe){return Nr(xe,function(we){return de[we]})}function Ih(de,xe){return de.has(xe)}function jg(de,xe){for(var we=-1,st=de.length;++we<st&&rd(xe,de[we],0)>-1;);return we}function Gg(de,xe){for(var we=de.length;we--&&rd(xe,de[we],0)>-1;);return we}function Mh(de,xe){for(var we=de.length,st=0;we--;)de[we]===xe&&++st;return st}var Oh=Lg(Xu),E2=Lg(ru);function Up(de){return"\\"+Mi[de]}function cy(de,xe){return de==null?e:de[xe]}function nc(de){return $u.test(de)}function Vg(de){return pl.test(de)}function Bg(de){for(var xe,we=[];!(xe=de.next()).done;)we.push(xe.value);return we}function Lp(de){var xe=-1,we=Array(de.size);return de.forEach(function(st,Qt){we[++xe]=[Qt,st]}),we}function zg(de,xe){return function(we){return de(xe(we))}}function _l(de,xe){for(var we=-1,st=de.length,Qt=0,bn=[];++we<st;){var xr=de[we];(xr===xe||xr===p)&&(de[we]=p,bn[Qt++]=we)}return bn}function Fp(de){var xe=-1,we=Array(de.size);return de.forEach(function(st){we[++xe]=st}),we}function C2(de){var xe=-1,we=Array(de.size);return de.forEach(function(st){we[++xe]=[st,st]}),we}function w2(de,xe,we){for(var st=we-1,Qt=de.length;++st<Qt;)if(de[st]===xe)return st;return-1}function N2(de,xe,we){for(var st=we+1;st--;)if(de[st]===xe)return st;return st}function id(de){return nc(de)?hy(de):v2(de)}function jr(de){return nc(de)?fy(de):_2(de)}function ad(de){for(var xe=de.length;xe--&&qi.test(de.charAt(xe)););return xe}var dy=Lg(Nh);function hy(de){for(var xe=wr.lastIndex=0;wr.test(de);)++xe;return xe}function fy(de){return de.match(wr)||[]}function py(de){return de.match(Ka)||[]}var qg=(function de(xe){xe=xe==null?qr:sd.defaults(qr.Object(),xe,sd.pick(qr,Ya));var we=xe.Array,st=xe.Date,Qt=xe.Error,bn=xe.Function,xr=xe.Math,ir=xe.Object,Hp=xe.RegExp,rc=xe.String,$a=xe.TypeError,kh=we.prototype,my=bn.prototype,od=ir.prototype,jp=xe["__core-js_shared__"],Gp=my.toString,er=od.hasOwnProperty,gy=0,Vp=(function(){var f=/[^.]+$/.exec(jp&&jp.keys&&jp.keys.IE_PROTO||"");return f?"Symbol(src)_1."+f:""})(),Ma=od.toString,Bp=Gp.call(ir),Ts=qr._,ld=Hp("^"+Gp.call(er).replace(yi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ud=vl?xe.Buffer:e,Xs=xe.Symbol,ic=xe.Uint8Array,zp=ud?ud.allocUnsafe:e,Po=zg(ir.getPrototypeOf,ir),Wg=ir.create,Rh=od.propertyIsEnumerable,yl=kh.splice,vy=Xs?Xs.isConcatSpreadable:e,Ui=Xs?Xs.iterator:e,bl=Xs?Xs.toStringTag:e,Ss=(function(){try{var f=_u(ir,"defineProperty");return f({},"",{}),f}catch{}})(),_y=xe.clearTimeout!==qr.clearTimeout&&xe.clearTimeout,qp=st&&st.now!==qr.Date.now&&st.now,ac=xe.setTimeout!==qr.setTimeout&&xe.setTimeout,cd=xr.ceil,Dh=xr.floor,xh=ir.getOwnPropertySymbols,yy=ud?ud.isBuffer:e,Xa=xe.isFinite,dd=kh.join,hd=zg(ir.keys,ir),Wr=xr.max,ui=xr.min,As=st.now,Is=xe.parseInt,El=xr.random,Uo=kh.reverse,Ms=_u(xe,"DataView"),Za=_u(xe,"Map"),Wp=_u(xe,"Promise"),su=_u(xe,"Set"),sc=_u(xe,"WeakMap"),fd=_u(ir,"create"),ci=sc&&new sc,tr={},In=$i(Ms),ou=$i(Za),Os=$i(Wp),Kg=$i(su),lu=$i(sc),Ph=Xs?Xs.prototype:e,pd=Ph?Ph.valueOf:e,oc=Ph?Ph.toString:e;function B(f){if(Qr(f)&&!$t(f)&&!(f instanceof rn)){if(f instanceof Oa)return f;if(er.call(f,"__wrapped__"))return wm(f)}return new Oa(f)}var uu=(function(){function f(){}return function(v){if(!Ur(v))return{};if(Wg)return Wg(v);f.prototype=v;var E=new f;return f.prototype=e,E}})();function cu(){}function Oa(f,v){this.__wrapped__=f,this.__actions__=[],this.__chain__=!!v,this.__index__=0,this.__values__=e}B.templateSettings={escape:_t,evaluate:yt,interpolate:Gn,variable:"",imports:{_:B}},B.prototype=cu.prototype,B.prototype.constructor=B,Oa.prototype=uu(cu.prototype),Oa.prototype.constructor=Oa;function rn(f){this.__wrapped__=f,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=$,this.__views__=[]}function Cl(){var f=new rn(this.__wrapped__);return f.__actions__=ha(this.__actions__),f.__dir__=this.__dir__,f.__filtered__=this.__filtered__,f.__iteratees__=ha(this.__iteratees__),f.__takeCount__=this.__takeCount__,f.__views__=ha(this.__views__),f}function du(){if(this.__filtered__){var f=new rn(this);f.__dir__=-1,f.__filtered__=!0}else f=this.clone(),f.__dir__*=-1;return f}function wl(){var f=this.__wrapped__.value(),v=this.__dir__,E=$t(f),R=v<0,j=E?f.length:0,K=D2(0,j,this.__views__),te=K.start,ae=K.end,me=ae-te,Ge=R?ae:te-1,Ve=this.__iteratees__,Ke=Ve.length,nt=0,wt=ui(me,this.__takeCount__);if(!E||!R&&j==me&&wt==me)return lv(f,this.__actions__);var zt=[];e:for(;me--&&nt<wt;){Ge+=v;for(var vn=-1,qt=f[Ge];++vn<Ke;){var Mn=Ve[vn],Fn=Mn.iteratee,co=Mn.type,cs=Fn(qt);if(co==ue)qt=cs;else if(!cs){if(co==Z)continue e;break e}}zt[nt++]=qt}return zt}rn.prototype=uu(cu.prototype),rn.prototype.constructor=rn;function Nl(f){var v=-1,E=f==null?0:f.length;for(this.clear();++v<E;){var R=f[v];this.set(R[0],R[1])}}function Yg(){this.__data__=fd?fd(null):{},this.size=0}function md(f){var v=this.has(f)&&delete this.__data__[f];return this.size-=v?1:0,v}function Kp(f){var v=this.__data__;if(fd){var E=v[f];return E===c?e:E}return er.call(v,f)?v[f]:e}function lc(f){var v=this.__data__;return fd?v[f]!==e:er.call(v,f)}function Li(f,v){var E=this.__data__;return this.size+=this.has(f)?0:1,E[f]=fd&&v===e?c:v,this}Nl.prototype.clear=Yg,Nl.prototype.delete=md,Nl.prototype.get=Kp,Nl.prototype.has=lc,Nl.prototype.set=Li;function ks(f){var v=-1,E=f==null?0:f.length;for(this.clear();++v<E;){var R=f[v];this.set(R[0],R[1])}}function by(){this.__data__=[],this.size=0}function T2(f){var v=this.__data__,E=Lo(v,f);if(E<0)return!1;var R=v.length-1;return E==R?v.pop():yl.call(v,E,1),--this.size,!0}function S2(f){var v=this.__data__,E=Lo(v,f);return E<0?e:v[E][1]}function A2(f){return Lo(this.__data__,f)>-1}function di(f,v){var E=this.__data__,R=Lo(E,f);return R<0?(++this.size,E.push([f,v])):E[R][1]=v,this}ks.prototype.clear=by,ks.prototype.delete=T2,ks.prototype.get=S2,ks.prototype.has=A2,ks.prototype.set=di;function Zs(f){var v=-1,E=f==null?0:f.length;for(this.clear();++v<E;){var R=f[v];this.set(R[0],R[1])}}function Uh(){this.size=0,this.__data__={hash:new Nl,map:new(Za||ks),string:new Nl}}function Lh(f){var v=tf(this,f).delete(f);return this.size-=v?1:0,v}function Qg(f){return tf(this,f).get(f)}function gd(f){return tf(this,f).has(f)}function vd(f,v){var E=tf(this,f),R=E.size;return E.set(f,v),this.size+=E.size==R?0:1,this}Zs.prototype.clear=Uh,Zs.prototype.delete=Lh,Zs.prototype.get=Qg,Zs.prototype.has=gd,Zs.prototype.set=vd;function uc(f){var v=-1,E=f==null?0:f.length;for(this.__data__=new Zs;++v<E;)this.add(f[v])}function Ey(f){return this.__data__.set(f,c),this}function I2(f){return this.__data__.has(f)}uc.prototype.add=uc.prototype.push=Ey,uc.prototype.has=I2;function Rs(f){var v=this.__data__=new ks(f);this.size=v.size}function cc(){this.__data__=new ks,this.size=0}function $g(f){var v=this.__data__,E=v.delete(f);return this.size=v.size,E}function Yp(f){return this.__data__.get(f)}function Cy(f){return this.__data__.has(f)}function _d(f,v){var E=this.__data__;if(E instanceof ks){var R=E.__data__;if(!Za||R.length<i-1)return R.push([f,v]),this.size=++E.size,this;E=this.__data__=new Zs(R)}return E.set(f,v),this.size=E.size,this}Rs.prototype.clear=cc,Rs.prototype.delete=$g,Rs.prototype.get=Yp,Rs.prototype.has=Cy,Rs.prototype.set=_d;function Qp(f,v){var E=$t(f),R=!E&&_c(f),j=!E&&!R&&Tu(f),K=!E&&!R&&!j&&Su(f),te=E||R||j||K,ae=te?Pp(f.length,rc):[],me=ae.length;for(var Ge in f)(v||er.call(f,Ge))&&!(te&&(Ge=="length"||j&&(Ge=="offset"||Ge=="parent")||K&&(Ge=="buffer"||Ge=="byteLength"||Ge=="byteOffset")||so(Ge,me)))&&ae.push(Ge);return ae}function Fh(f){var v=f.length;return v?f[Sd(0,v-1)]:e}function $p(f,v){return cf(ha(f),eo(v,0,f.length))}function wy(f){return cf(ha(f))}function Xp(f,v,E){(E!==e&&!os(f[v],E)||E===e&&!(v in f))&&Ja(f,v,E)}function Js(f,v,E){var R=f[v];(!(er.call(f,v)&&os(R,E))||E===e&&!(v in f))&&Ja(f,v,E)}function Lo(f,v){for(var E=f.length;E--;)if(os(f[E][0],v))return E;return-1}function Ny(f,v,E,R){return Fo(f,function(j,K,te){v(R,j,E(j),te)}),R}function Xg(f,v){return f&&Ps(v,ki(v),f)}function yd(f,v){return f&&Ps(v,ja(v),f)}function Ja(f,v,E){v=="__proto__"&&Ss?Ss(f,v,{configurable:!0,enumerable:!0,value:E,writable:!0}):f[v]=E}function bd(f,v){for(var E=-1,R=v.length,j=we(R),K=f==null;++E<R;)j[E]=K?e:Au(f,v[E]);return j}function eo(f,v,E){return f===f&&(E!==e&&(f=f<=E?f:E),v!==e&&(f=f>=v?f:v)),f}function da(f,v,E,R,j,K){var te,ae=v&g,me=v&_,Ge=v&y;if(E&&(te=j?E(f,R,j,K):E(f)),te!==e)return te;if(!Ur(f))return f;var Ve=$t(f);if(Ve){if(te=Gy(f),!ae)return ha(f,te)}else{var Ke=Hi(f),nt=Ke==Rn||Ke==xn;if(Tu(f))return dv(f,ae);if(Ke==fn||Ke==Ne||nt&&!j){if(te=me||nt?{}:Tv(f),!ae)return me?Uy(f,yd(te,f)):Py(f,Xg(te,f))}else{if(!Qn[Ke])return j?f:{};te=Vy(f,Ke,ae)}}K||(K=new Rs);var wt=K.get(f);if(wt)return wt;K.set(f,te),Sf(f)?f.forEach(function(qt){te.add(da(qt,v,E,qt,f,K))}):Nb(f)&&f.forEach(function(qt,Mn){te.set(Mn,da(qt,v,E,Mn,f,K))});var zt=Ge?me?Nv:mm:me?ja:ki,vn=Ve?e:zt(f);return ce(vn||f,function(qt,Mn){vn&&(Mn=qt,qt=f[Mn]),Js(te,Mn,da(qt,v,E,Mn,f,K))}),te}function Ty(f){var v=ki(f);return function(E){return hu(E,f,v)}}function hu(f,v,E){var R=E.length;if(f==null)return!R;for(f=ir(f);R--;){var j=E[R],K=v[j],te=f[j];if(te===e&&!(j in f)||!K(te))return!1}return!0}function Zg(f,v,E){if(typeof f!="function")throw new $a(s);return uf(function(){f.apply(e,E)},v)}function Ds(f,v,E,R){var j=-1,K=Jn,te=!0,ae=f.length,me=[],Ge=v.length;if(!ae)return me;E&&(v=Nr(v,Qa(E))),R?(K=mn,te=!1):v.length>=i&&(K=Ih,te=!1,v=new uc(v));e:for(;++j<ae;){var Ve=f[j],Ke=E==null?Ve:E(Ve);if(Ve=R||Ve!==0?Ve:0,te&&Ke===Ke){for(var nt=Ge;nt--;)if(v[nt]===Ke)continue e;me.push(Ve)}else K(v,Ke,R)||me.push(Ve)}return me}var Fo=mv(no),Zp=mv(em,!0);function fu(f,v){var E=!0;return Fo(f,function(R,j,K){return E=!!v(R,j,K),E}),E}function to(f,v,E){for(var R=-1,j=f.length;++R<j;){var K=f[R],te=v(K);if(te!=null&&(ae===e?te===te&&!Ha(te):E(te,ae)))var ae=te,me=K}return me}function Hh(f,v,E,R){var j=f.length;for(E=Bt(E),E<0&&(E=-E>j?0:j+E),R=R===e||R>j?j:Bt(R),R<0&&(R+=j),R=E>R?0:c_(R);E<R;)f[E++]=v;return f}function Jp(f,v){var E=[];return Fo(f,function(R,j,K){v(R,j,K)&&E.push(R)}),E}function Ei(f,v,E,R,j){var K=-1,te=f.length;for(E||(E=Av),j||(j=[]);++K<te;){var ae=f[K];v>0&&E(ae)?v>1?Ei(ae,v-1,E,R,j):au(j,ae):R||(j[j.length]=ae)}return j}var dc=gv(),Ed=gv(!0);function no(f,v){return f&&dc(f,v,ki)}function em(f,v){return f&&Ed(f,v,ki)}function Tl(f,v){return dt(v,function(E){return ls(f[E])})}function Ho(f,v){v=rs(v,f);for(var E=0,R=v.length;f!=null&&E<R;)f=f[Da(v[E++])];return E&&E==R?f:e}function Jg(f,v,E){var R=v(f);return $t(f)?R:au(R,E(f))}function Fi(f){return f==null?f===e?gn:Zn:bl&&bl in ir(f)?nf(f):Mv(f)}function jh(f,v){return f>v}function es(f,v){return f!=null&&er.call(f,v)}function ro(f,v){return f!=null&&v in ir(f)}function pu(f,v,E){return f>=ui(v,E)&&f<Wr(v,E)}function Gh(f,v,E){for(var R=E?mn:Jn,j=f[0].length,K=f.length,te=K,ae=we(K),me=1/0,Ge=[];te--;){var Ve=f[te];te&&v&&(Ve=Nr(Ve,Qa(v))),me=ui(Ve.length,me),ae[te]=!E&&(v||j>=120&&Ve.length>=120)?new uc(te&&Ve):e}Ve=f[0];var Ke=-1,nt=ae[0];e:for(;++Ke<j&&Ge.length<me;){var wt=Ve[Ke],zt=v?v(wt):wt;if(wt=E||wt!==0?wt:0,!(nt?Ih(nt,zt):R(Ge,zt,E))){for(te=K;--te;){var vn=ae[te];if(!(vn?Ih(vn,zt):R(f[te],zt,E)))continue e}nt&&nt.push(zt),Ge.push(wt)}}return Ge}function Sy(f,v,E,R){return no(f,function(j,K,te){v(R,E(j),K,te)}),R}function xs(f,v,E){v=rs(v,f),f=of(f,v);var R=f==null?f:f[Da(Or(v))];return R==null?e:ot(R,f,E)}function ka(f){return Qr(f)&&Fi(f)==Ne}function ri(f){return Qr(f)&&Fi(f)==Wn}function tm(f){return Qr(f)&&Fi(f)==bt}function ts(f,v,E,R,j){return f===v?!0:f==null||v==null||!Qr(f)&&!Qr(v)?f!==f&&v!==v:an(f,v,E,R,ts,j)}function an(f,v,E,R,j,K){var te=$t(f),ae=$t(v),me=te?He:Hi(f),Ge=ae?He:Hi(v);me=me==Ne?fn:me,Ge=Ge==Ne?fn:Ge;var Ve=me==fn,Ke=Ge==fn,nt=me==Ge;if(nt&&Tu(f)){if(!Tu(v))return!1;te=!0,Ve=!1}if(nt&&!Ve)return K||(K=new Rs),te||Su(f)?Jh(f,v,E,R,j,K):jy(f,v,me,E,R,j,K);if(!(E&C)){var wt=Ve&&er.call(f,"__wrapped__"),zt=Ke&&er.call(v,"__wrapped__");if(wt||zt){var vn=wt?f.value():f,qt=zt?v.value():v;return K||(K=new Rs),j(vn,qt,E,R,K)}}return nt?(K||(K=new Rs),wv(f,v,E,R,j,K)):!1}function dr(f){return Qr(f)&&Hi(f)==Zt}function Kr(f,v,E,R){var j=E.length,K=j,te=!R;if(f==null)return!K;for(f=ir(f);j--;){var ae=E[j];if(te&&ae[2]?ae[1]!==f[ae[0]]:!(ae[0]in f))return!1}for(;++j<K;){ae=E[j];var me=ae[0],Ge=f[me],Ve=ae[1];if(te&&ae[2]){if(Ge===e&&!(me in f))return!1}else{var Ke=new Rs;if(R)var nt=R(Ge,Ve,me,f,v,Ke);if(!(nt===e?ts(Ve,Ge,C|w,R,Ke):nt))return!1}}return!0}function Vh(f){if(!Ur(f)||By(f))return!1;var v=ls(f)?ld:Ar;return v.test($i(f))}function Cd(f){return Qr(f)&&Fi(f)==Un}function hc(f){return Qr(f)&&Hi(f)==gt}function nm(f){return Qr(f)&&Um(f.length)&&!!Vn[Fi(f)]}function wd(f){return typeof f=="function"?f:f==null?pa:typeof f=="object"?$t(f)?ev(f[0],f[1]):im(f):V(f)}function mu(f){if(!kd(f))return hd(f);var v=[];for(var E in ir(f))er.call(f,E)&&E!="constructor"&&v.push(E);return v}function M2(f){if(!Ur(f))return Al(f);var v=kd(f),E=[];for(var R in f)R=="constructor"&&(v||!er.call(f,R))||E.push(R);return E}function Pr(f,v){return f<v}function rm(f,v){var E=-1,R=Fa(f)?we(f.length):[];return Fo(f,function(j,K,te){R[++E]=v(j,K,te)}),R}function im(f){var v=gm(f);return v.length==1&&v[0][2]?Em(v[0][0],v[0][1]):function(E){return E===f||Kr(E,f,v)}}function ev(f,v){return af(f)&&Go(v)?Em(Da(f),v):function(E){var R=Au(E,f);return R===e&&R===v?h_(E,f):ts(v,R,C|w)}}function Bh(f,v,E,R,j){f!==v&&dc(v,function(K,te){if(j||(j=new Rs),Ur(K))O2(f,v,te,E,Bh,R,j);else{var ae=R?R(yr(f,te),K,te+"",f,v,j):e;ae===e&&(ae=K),Xp(f,te,ae)}},ja)}function O2(f,v,E,R,j,K,te){var ae=yr(f,E),me=yr(v,E),Ge=te.get(me);if(Ge){Xp(f,E,Ge);return}var Ve=K?K(ae,me,E+"",f,v,te):e,Ke=Ve===e;if(Ke){var nt=$t(me),wt=!nt&&Tu(me),zt=!nt&&!wt&&Su(me);Ve=me,nt||wt||zt?$t(ae)?Ve=ae:ai(ae)?Ve=ha(ae):wt?(Ke=!1,Ve=dv(me,!0)):zt?(Ke=!1,Ve=hv(me,!0)):Ve=[]:Nf(me)||_c(me)?(Ve=ae,_c(ae)?Ve=Lm(ae):(!Ur(ae)||ls(ae))&&(Ve=Tv(me))):Ke=!1}Ke&&(te.set(me,Ve),j(Ve,me,R,K,te),te.delete(me)),Xp(f,E,Ve)}function am(f,v){var E=f.length;if(E)return v+=v<0?E:0,so(v,E)?f[v]:e}function sm(f,v,E){v.length?v=Nr(v,function(K){return $t(K)?function(te){return Ho(te,K.length===1?K[0]:K)}:K}):v=[pa];var R=-1;v=Nr(v,Qa(Ut()));var j=rm(f,function(K,te,ae){var me=Nr(v,function(Ge){return Ge(K)});return{criteria:me,index:++R,value:K}});return ly(j,function(K,te){return xy(K,te,E)})}function tv(f,v){return Yi(f,v,function(E,R){return h_(f,R)})}function Yi(f,v,E){for(var R=-1,j=v.length,K={};++R<j;){var te=v[R],ae=Ho(f,te);E(ae,te)&&Ad(K,rs(te,f),ae)}return K}function ii(f){return function(v){return Ho(v,f)}}function Nd(f,v,E,R){var j=R?b2:rd,K=-1,te=v.length,ae=f;for(f===v&&(v=ha(v)),E&&(ae=Nr(f,Qa(E)));++K<te;)for(var me=0,Ge=v[K],Ve=E?E(Ge):Ge;(me=j(ae,Ve,me,R))>-1;)ae!==f&&yl.call(ae,me,1),yl.call(f,me,1);return f}function Td(f,v){for(var E=f?v.length:0,R=E-1;E--;){var j=v[E];if(E==R||j!==K){var K=j;so(j)?yl.call(f,j,1):zh(f,j)}}return f}function Sd(f,v){return f+Dh(El()*(v-f+1))}function nv(f,v,E,R){for(var j=-1,K=Wr(cd((v-f)/(E||1)),0),te=we(K);K--;)te[R?K:++j]=f,f+=E;return te}function io(f,v){var E="";if(!f||v<1||v>pe)return E;do v%2&&(E+=f),v=Dh(v/2),v&&(f+=f);while(v);return E}function sn(f,v){return Cm(Ov(f,v,pa),f+"")}function rv(f){return Fh(qd(f))}function iv(f,v){var E=qd(f);return cf(E,eo(v,0,E.length))}function Ad(f,v,E,R){if(!Ur(f))return f;v=rs(v,f);for(var j=-1,K=v.length,te=K-1,ae=f;ae!=null&&++j<K;){var me=Da(v[j]),Ge=E;if(me==="__proto__"||me==="constructor"||me==="prototype")return f;if(j!=te){var Ve=ae[me];Ge=R?R(Ve,me,ae):e,Ge===e&&(Ge=Ur(Ve)?Ve:so(v[j+1])?[]:{})}Js(ae,me,Ge),ae=ae[me]}return f}var av=ci?function(f,v){return ci.set(f,v),f}:pa,Ay=Ss?function(f,v){return Ss(f,"toString",{configurable:!0,enumerable:!1,value:Kd(v),writable:!0})}:pa;function Iy(f){return cf(qd(f))}function ns(f,v,E){var R=-1,j=f.length;v<0&&(v=-v>j?0:j+v),E=E>j?j:E,E<0&&(E+=j),j=v>E?0:E-v>>>0,v>>>=0;for(var K=we(j);++R<j;)K[R]=f[R+v];return K}function My(f,v){var E;return Fo(f,function(R,j,K){return E=v(R,j,K),!E}),!!E}function Id(f,v,E){var R=0,j=f==null?R:f.length;if(typeof v=="number"&&v===v&&j<=Ie){for(;R<j;){var K=R+j>>>1,te=f[K];te!==null&&!Ha(te)&&(E?te<=v:te<v)?R=K+1:j=K}return j}return om(f,v,pa,E)}function om(f,v,E,R){var j=0,K=f==null?0:f.length;if(K===0)return 0;v=E(v);for(var te=v!==v,ae=v===null,me=Ha(v),Ge=v===e;j<K;){var Ve=Dh((j+K)/2),Ke=E(f[Ve]),nt=Ke!==e,wt=Ke===null,zt=Ke===Ke,vn=Ha(Ke);if(te)var qt=R||zt;else Ge?qt=zt&&(R||nt):ae?qt=zt&&nt&&(R||!wt):me?qt=zt&&nt&&!wt&&(R||!vn):wt||vn?qt=!1:qt=R?Ke<=v:Ke<v;qt?j=Ve+1:K=Ve}return ui(K,fe)}function Oy(f,v){for(var E=-1,R=f.length,j=0,K=[];++E<R;){var te=f[E],ae=v?v(te):te;if(!E||!os(ae,me)){var me=ae;K[j++]=te===0?0:te}}return K}function sv(f){return typeof f=="number"?f:Ha(f)?qe:+f}function Ra(f){if(typeof f=="string")return f;if($t(f))return Nr(f,Ra)+"";if(Ha(f))return oc?oc.call(f):"";var v=f+"";return v=="0"&&1/f==-le?"-0":v}function Sl(f,v,E){var R=-1,j=Jn,K=f.length,te=!0,ae=[],me=ae;if(E)te=!1,j=mn;else if(K>=i){var Ge=v?null:Fy(f);if(Ge)return Fp(Ge);te=!1,j=Ih,me=new uc}else me=v?[]:ae;e:for(;++R<K;){var Ve=f[R],Ke=v?v(Ve):Ve;if(Ve=E||Ve!==0?Ve:0,te&&Ke===Ke){for(var nt=me.length;nt--;)if(me[nt]===Ke)continue e;v&&me.push(Ke),ae.push(Ve)}else j(me,Ke,E)||(me!==ae&&me.push(Ke),ae.push(Ve))}return ae}function zh(f,v){return v=rs(v,f),f=of(f,v),f==null||delete f[Da(Or(v))]}function ov(f,v,E,R){return Ad(f,v,E(Ho(f,v)),R)}function qh(f,v,E,R){for(var j=f.length,K=R?j:-1;(R?K--:++K<j)&&v(f[K],K,f););return E?ns(f,R?0:K,R?K+1:j):ns(f,R?K+1:0,R?j:K)}function lv(f,v){var E=f;return E instanceof rn&&(E=E.value()),Pg(v,function(R,j){return j.func.apply(j.thisArg,au([R],j.args))},E)}function lm(f,v,E){var R=f.length;if(R<2)return R?Sl(f[0]):[];for(var j=-1,K=we(R);++j<R;)for(var te=f[j],ae=-1;++ae<R;)ae!=j&&(K[j]=Ds(K[j]||te,f[ae],v,E));return Sl(Ei(K,1),v,E)}function uv(f,v,E){for(var R=-1,j=f.length,K=v.length,te={};++R<j;){var ae=R<K?v[R]:e;E(te,f[R],ae)}return te}function cv(f){return ai(f)?f:[]}function um(f){return typeof f=="function"?f:pa}function rs(f,v){return $t(f)?f:af(f,v)?[f]:kv(nr(f))}var ky=sn;function ao(f,v,E){var R=f.length;return E=E===e?R:E,!v&&E>=R?f:ns(f,v,E)}var Wh=_y||function(f){return qr.clearTimeout(f)};function dv(f,v){if(v)return f.slice();var E=f.length,R=zp?zp(E):new f.constructor(E);return f.copy(R),R}function Kh(f){var v=new f.constructor(f.byteLength);return new ic(v).set(new ic(f)),v}function k2(f,v){var E=v?Kh(f.buffer):f.buffer;return new f.constructor(E,f.byteOffset,f.byteLength)}function Ry(f){var v=new f.constructor(f.source,Nn.exec(f));return v.lastIndex=f.lastIndex,v}function Dy(f){return pd?ir(pd.call(f)):{}}function hv(f,v){var E=v?Kh(f.buffer):f.buffer;return new f.constructor(E,f.byteOffset,f.length)}function fv(f,v){if(f!==v){var E=f!==e,R=f===null,j=f===f,K=Ha(f),te=v!==e,ae=v===null,me=v===v,Ge=Ha(v);if(!ae&&!Ge&&!K&&f>v||K&&te&&me&&!ae&&!Ge||R&&te&&me||!E&&me||!j)return 1;if(!R&&!K&&!Ge&&f<v||Ge&&E&&j&&!R&&!K||ae&&E&&j||!te&&j||!me)return-1}return 0}function xy(f,v,E){for(var R=-1,j=f.criteria,K=v.criteria,te=j.length,ae=E.length;++R<te;){var me=fv(j[R],K[R]);if(me){if(R>=ae)return me;var Ge=E[R];return me*(Ge=="desc"?-1:1)}}return f.index-v.index}function cm(f,v,E,R){for(var j=-1,K=f.length,te=E.length,ae=-1,me=v.length,Ge=Wr(K-te,0),Ve=we(me+Ge),Ke=!R;++ae<me;)Ve[ae]=v[ae];for(;++j<te;)(Ke||j<K)&&(Ve[E[j]]=f[j]);for(;Ge--;)Ve[ae++]=f[j++];return Ve}function pv(f,v,E,R){for(var j=-1,K=f.length,te=-1,ae=E.length,me=-1,Ge=v.length,Ve=Wr(K-ae,0),Ke=we(Ve+Ge),nt=!R;++j<Ve;)Ke[j]=f[j];for(var wt=j;++me<Ge;)Ke[wt+me]=v[me];for(;++te<ae;)(nt||j<K)&&(Ke[wt+E[te]]=f[j++]);return Ke}function ha(f,v){var E=-1,R=f.length;for(v||(v=we(R));++E<R;)v[E]=f[E];return v}function Ps(f,v,E,R){var j=!E;E||(E={});for(var K=-1,te=v.length;++K<te;){var ae=v[K],me=R?R(E[ae],f[ae],ae,E,f):e;me===e&&(me=f[ae]),j?Ja(E,ae,me):Js(E,ae,me)}return E}function Py(f,v){return Ps(f,vm(f),v)}function Uy(f,v){return Ps(f,rf(f),v)}function dm(f,v){return function(E,R){var j=$t(E)?Ce:Ny,K=v?v():{};return j(E,f,Ut(R,2),K)}}function gu(f){return sn(function(v,E){var R=-1,j=E.length,K=j>1?E[j-1]:e,te=j>2?E[2]:e;for(K=f.length>3&&typeof K=="function"?(j--,K):e,te&&Qi(E[0],E[1],te)&&(K=j<3?e:K,j=1),v=ir(v);++R<j;){var ae=E[R];ae&&f(v,ae,R,K)}return v})}function mv(f,v){return function(E,R){if(E==null)return E;if(!Fa(E))return f(E,R);for(var j=E.length,K=v?j:-1,te=ir(E);(v?K--:++K<j)&&R(te[K],K,te)!==!1;);return E}}function gv(f){return function(v,E,R){for(var j=-1,K=ir(v),te=R(v),ae=te.length;ae--;){var me=te[f?ae:++j];if(E(K[me],me,K)===!1)break}return v}}function vv(f,v,E){var R=v&A,j=Yh(f);function K(){var te=this&&this!==qr&&this instanceof K?j:f;return te.apply(R?E:this,arguments)}return K}function _v(f){return function(v){v=nr(v);var E=nc(v)?jr(v):e,R=E?E[0]:v.charAt(0),j=E?ao(E,1).join(""):v.slice(1);return R[f]()+j}}function fc(f){return function(v){return Pg(Xb(Wd(v).replace(ed,"")),f,"")}}function Yh(f){return function(){var v=arguments;switch(v.length){case 0:return new f;case 1:return new f(v[0]);case 2:return new f(v[0],v[1]);case 3:return new f(v[0],v[1],v[2]);case 4:return new f(v[0],v[1],v[2],v[3]);case 5:return new f(v[0],v[1],v[2],v[3],v[4]);case 6:return new f(v[0],v[1],v[2],v[3],v[4],v[5]);case 7:return new f(v[0],v[1],v[2],v[3],v[4],v[5],v[6])}var E=uu(f.prototype),R=f.apply(E,v);return Ur(R)?R:E}}function R2(f,v,E){var R=Yh(f);function j(){for(var K=arguments.length,te=we(K),ae=K,me=Yr(j);ae--;)te[ae]=arguments[ae];var Ge=K<3&&te[0]!==me&&te[K-1]!==me?[]:_l(te,me);if(K-=Ge.length,K<E)return pm(f,v,Od,j.placeholder,e,te,Ge,e,e,E-K);var Ve=this&&this!==qr&&this instanceof j?R:f;return ot(Ve,this,te)}return j}function yv(f){return function(v,E,R){var j=ir(v);if(!Fa(v)){var K=Ut(E,3);v=ki(v),E=function(ae){return K(j[ae],ae,j)}}var te=f(v,E,R);return te>-1?j[K?v[te]:te]:e}}function Md(f){return jo(function(v){var E=v.length,R=E,j=Oa.prototype.thru;for(f&&v.reverse();R--;){var K=v[R];if(typeof K!="function")throw new $a(s);if(j&&!te&&Gr(K)=="wrapper")var te=new Oa([],!0)}for(R=te?R:E;++R<E;){K=v[R];var ae=Gr(K),me=ae=="wrapper"?ef(K):e;me&&sf(me[0])&&me[1]==(G|D|H|Y)&&!me[4].length&&me[9]==1?te=te[Gr(me[0])].apply(te,me[3]):te=K.length==1&&sf(K)?te[ae]():te.thru(K)}return function(){var Ge=arguments,Ve=Ge[0];if(te&&Ge.length==1&&$t(Ve))return te.plant(Ve).value();for(var Ke=0,nt=E?v[Ke].apply(this,Ge):Ve;++Ke<E;)nt=v[Ke].call(this,nt);return nt}})}function Od(f,v,E,R,j,K,te,ae,me,Ge){var Ve=v&G,Ke=v&A,nt=v&M,wt=v&(D|P),zt=v&F,vn=nt?e:Yh(f);function qt(){for(var Mn=arguments.length,Fn=we(Mn),co=Mn;co--;)Fn[co]=arguments[co];if(wt)var cs=Yr(qt),ho=Mh(Fn,cs);if(R&&(Fn=cm(Fn,R,j,wt)),K&&(Fn=pv(Fn,K,te,wt)),Mn-=ho,wt&&Mn<Ge){var wi=_l(Fn,cs);return pm(f,v,Od,qt.placeholder,E,Fn,wi,ae,me,Ge-Mn)}var Ul=Ke?E:this,bc=nt?Ul[f]:f;return Mn=Fn.length,ae?Fn=lf(Fn,ae):zt&&Mn>1&&Fn.reverse(),Ve&&me<Mn&&(Fn.length=me),this&&this!==qr&&this instanceof qt&&(bc=vn||Yh(bc)),bc.apply(Ul,Fn)}return qt}function Qh(f,v){return function(E,R){return Sy(E,f,v(R),{})}}function $h(f,v){return function(E,R){var j;if(E===e&&R===e)return v;if(E!==e&&(j=E),R!==e){if(j===e)return R;typeof E=="string"||typeof R=="string"?(E=Ra(E),R=Ra(R)):(E=sv(E),R=sv(R)),j=f(E,R)}return j}}function hm(f){return jo(function(v){return v=Nr(v,Qa(Ut())),sn(function(E){var R=this;return f(v,function(j){return ot(j,R,E)})})})}function vu(f,v){v=v===e?" ":Ra(v);var E=v.length;if(E<2)return E?io(v,f):v;var R=io(v,cd(f/id(v)));return nc(v)?ao(jr(R),0,f).join(""):R.slice(0,f)}function Ly(f,v,E,R){var j=v&A,K=Yh(f);function te(){for(var ae=-1,me=arguments.length,Ge=-1,Ve=R.length,Ke=we(Ve+me),nt=this&&this!==qr&&this instanceof te?K:f;++Ge<Ve;)Ke[Ge]=R[Ge];for(;me--;)Ke[Ge++]=arguments[++ae];return ot(nt,j?E:this,Ke)}return te}function fm(f){return function(v,E,R){return R&&typeof R!="number"&&Qi(v,E,R)&&(E=R=e),v=xl(v),E===e?(E=v,v=0):E=xl(E),R=R===e?v<E?1:-1:xl(R),nv(v,E,R,f)}}function Xh(f){return function(v,E){return typeof v=="string"&&typeof E=="string"||(v=us(v),E=us(E)),f(v,E)}}function pm(f,v,E,R,j,K,te,ae,me,Ge){var Ve=v&D,Ke=Ve?te:e,nt=Ve?e:te,wt=Ve?K:e,zt=Ve?e:K;v|=Ve?H:L,v&=~(Ve?L:H),v&I||(v&=-4);var vn=[f,v,j,wt,Ke,zt,nt,ae,me,Ge],qt=E.apply(e,vn);return sf(f)&&qy(qt,vn),qt.placeholder=R,Rd(qt,f,v)}function Zh(f){var v=xr[f];return function(E,R){if(E=us(E),R=R==null?0:ui(Bt(R),292),R&&Xa(E)){var j=(nr(E)+"e").split("e"),K=v(j[0]+"e"+(+j[1]+R));return j=(nr(K)+"e").split("e"),+(j[0]+"e"+(+j[1]-R))}return v(E)}}var Fy=su&&1/Fp(new su([,-0]))[1]==le?function(f){return new su(f)}:h;function bv(f){return function(v){var E=Hi(v);return E==Zt?Lp(v):E==gt?C2(v):uy(v,f(v))}}function fa(f,v,E,R,j,K,te,ae){var me=v&M;if(!me&&typeof f!="function")throw new $a(s);var Ge=R?R.length:0;if(Ge||(v&=-97,R=j=e),te=te===e?te:Wr(Bt(te),0),ae=ae===e?ae:Bt(ae),Ge-=j?j.length:0,v&L){var Ve=R,Ke=j;R=j=e}var nt=me?e:ef(f),wt=[f,v,E,R,j,Ve,Ke,K,te,ae];if(nt&&zy(wt,nt),f=wt[0],v=wt[1],E=wt[2],R=wt[3],j=wt[4],ae=wt[9]=wt[9]===e?me?0:f.length:Wr(wt[9]-Ge,0),!ae&&v&(D|P)&&(v&=-25),!v||v==A)var zt=vv(f,v,E);else v==D||v==P?zt=R2(f,v,ae):(v==H||v==(A|H))&&!j.length?zt=Ly(f,v,E,R):zt=Od.apply(e,wt);var vn=nt?av:qy;return Rd(vn(zt,wt),f,v)}function Ev(f,v,E,R){return f===e||os(f,od[E])&&!er.call(R,E)?v:f}function Cv(f,v,E,R,j,K){return Ur(f)&&Ur(v)&&(K.set(v,f),Bh(f,v,e,Cv,K),K.delete(v)),f}function Hy(f){return Nf(f)?e:f}function Jh(f,v,E,R,j,K){var te=E&C,ae=f.length,me=v.length;if(ae!=me&&!(te&&me>ae))return!1;var Ge=K.get(f),Ve=K.get(v);if(Ge&&Ve)return Ge==v&&Ve==f;var Ke=-1,nt=!0,wt=E&w?new uc:e;for(K.set(f,v),K.set(v,f);++Ke<ae;){var zt=f[Ke],vn=v[Ke];if(R)var qt=te?R(vn,zt,Ke,v,f,K):R(zt,vn,Ke,f,v,K);if(qt!==e){if(qt)continue;nt=!1;break}if(wt){if(!Ug(v,function(Mn,Fn){if(!Ih(wt,Fn)&&(zt===Mn||j(zt,Mn,E,R,K)))return wt.push(Fn)})){nt=!1;break}}else if(!(zt===vn||j(zt,vn,E,R,K))){nt=!1;break}}return K.delete(f),K.delete(v),nt}function jy(f,v,E,R,j,K,te){switch(E){case cr:if(f.byteLength!=v.byteLength||f.byteOffset!=v.byteOffset)return!1;f=f.buffer,v=v.buffer;case Wn:return!(f.byteLength!=v.byteLength||!K(new ic(f),new ic(v)));case At:case bt:case Pn:return os(+f,+v);case wn:return f.name==v.name&&f.message==v.message;case Un:case Dn:return f==v+"";case Zt:var ae=Lp;case gt:var me=R&C;if(ae||(ae=Fp),f.size!=v.size&&!me)return!1;var Ge=te.get(f);if(Ge)return Ge==v;R|=w,te.set(f,v);var Ve=Jh(ae(f),ae(v),R,j,K,te);return te.delete(f),Ve;case Cr:if(pd)return pd.call(f)==pd.call(v)}return!1}function wv(f,v,E,R,j,K){var te=E&C,ae=mm(f),me=ae.length,Ge=mm(v),Ve=Ge.length;if(me!=Ve&&!te)return!1;for(var Ke=me;Ke--;){var nt=ae[Ke];if(!(te?nt in v:er.call(v,nt)))return!1}var wt=K.get(f),zt=K.get(v);if(wt&&zt)return wt==v&&zt==f;var vn=!0;K.set(f,v),K.set(v,f);for(var qt=te;++Ke<me;){nt=ae[Ke];var Mn=f[nt],Fn=v[nt];if(R)var co=te?R(Fn,Mn,nt,v,f,K):R(Mn,Fn,nt,f,v,K);if(!(co===e?Mn===Fn||j(Mn,Fn,E,R,K):co)){vn=!1;break}qt||(qt=nt=="constructor")}if(vn&&!qt){var cs=f.constructor,ho=v.constructor;cs!=ho&&"constructor"in f&&"constructor"in v&&!(typeof cs=="function"&&cs instanceof cs&&typeof ho=="function"&&ho instanceof ho)&&(vn=!1)}return K.delete(f),K.delete(v),vn}function jo(f){return Cm(Ov(f,e,Mr),f+"")}function mm(f){return Jg(f,ki,vm)}function Nv(f){return Jg(f,ja,rf)}var ef=ci?function(f){return ci.get(f)}:h;function Gr(f){for(var v=f.name+"",E=tr[v],R=er.call(tr,v)?E.length:0;R--;){var j=E[R],K=j.func;if(K==null||K==f)return j.name}return v}function Yr(f){var v=er.call(B,"placeholder")?B:f;return v.placeholder}function Ut(){var f=B.iteratee||Rf;return f=f===Rf?wd:f,arguments.length?f(arguments[0],arguments[1]):f}function tf(f,v){var E=f.__data__;return bm(v)?E[typeof v=="string"?"string":"hash"]:E.map}function gm(f){for(var v=ki(f),E=v.length;E--;){var R=v[E],j=f[R];v[E]=[R,j,Go(j)]}return v}function _u(f,v){var E=cy(f,v);return Vh(E)?E:e}function nf(f){var v=er.call(f,bl),E=f[bl];try{f[bl]=e;var R=!0}catch{}var j=Ma.call(f);return R&&(v?f[bl]=E:delete f[bl]),j}var vm=xh?function(f){return f==null?[]:(f=ir(f),dt(xh(f),function(v){return Rh.call(f,v)}))}:je,rf=xh?function(f){for(var v=[];f;)au(v,vm(f)),f=Po(f);return v}:je,Hi=Fi;(Ms&&Hi(new Ms(new ArrayBuffer(1)))!=cr||Za&&Hi(new Za)!=Zt||Wp&&Hi(Wp.resolve())!=_r||su&&Hi(new su)!=gt||sc&&Hi(new sc)!=rr)&&(Hi=function(f){var v=Fi(f),E=v==fn?f.constructor:e,R=E?$i(E):"";if(R)switch(R){case In:return cr;case ou:return Zt;case Os:return _r;case Kg:return gt;case lu:return rr}return v});function D2(f,v,E){for(var R=-1,j=E.length;++R<j;){var K=E[R],te=K.size;switch(K.type){case"drop":f+=te;break;case"dropRight":v-=te;break;case"take":v=ui(v,f+te);break;case"takeRight":f=Wr(f,v-te);break}}return{start:f,end:v}}function _m(f){var v=f.match(rt);return v?v[1].split(Ct):[]}function ym(f,v,E){v=rs(v,f);for(var R=-1,j=v.length,K=!1;++R<j;){var te=Da(v[R]);if(!(K=f!=null&&E(f,te)))break;f=f[te]}return K||++R!=j?K:(j=f==null?0:f.length,!!j&&Um(j)&&so(te,j)&&($t(f)||_c(f)))}function Gy(f){var v=f.length,E=new f.constructor(v);return v&&typeof f[0]=="string"&&er.call(f,"index")&&(E.index=f.index,E.input=f.input),E}function Tv(f){return typeof f.constructor=="function"&&!kd(f)?uu(Po(f)):{}}function Vy(f,v,E){var R=f.constructor;switch(v){case Wn:return Kh(f);case At:case bt:return new R(+f);case cr:return k2(f,E);case dn:case ti:case _i:case Sr:case Dr:case Kn:case Yn:case Jt:case Lr:return hv(f,E);case Zt:return new R;case Pn:case Dn:return new R(f);case Un:return Ry(f);case gt:return new R;case Cr:return Dy(f)}}function Sv(f,v){var E=v.length;if(!E)return f;var R=E-1;return v[R]=(E>1?"& ":"")+v[R],v=v.join(E>2?", ":" "),f.replace(Wi,`{
/* [wrapped with `+v+`] */
`)}function Av(f){return $t(f)||_c(f)||!!(vy&&f&&f[vy])}function so(f,v){var E=typeof f;return v=v??pe,!!v&&(E=="number"||E!="symbol"&&Xe.test(f))&&f>-1&&f%1==0&&f<v}function Qi(f,v,E){if(!Ur(E))return!1;var R=typeof v;return(R=="number"?Fa(E)&&so(v,E.length):R=="string"&&v in E)?os(E[v],f):!1}function af(f,v){if($t(f))return!1;var E=typeof f;return E=="number"||E=="symbol"||E=="boolean"||f==null||Ha(f)?!0:zi.test(f)||!xt.test(f)||v!=null&&f in ir(v)}function bm(f){var v=typeof f;return v=="string"||v=="number"||v=="symbol"||v=="boolean"?f!=="__proto__":f===null}function sf(f){var v=Gr(f),E=B[v];if(typeof E!="function"||!(v in rn.prototype))return!1;if(f===E)return!0;var R=ef(E);return!!R&&f===R[0]}function By(f){return!!Vp&&Vp in f}var Iv=jp?ls:be;function kd(f){var v=f&&f.constructor,E=typeof v=="function"&&v.prototype||od;return f===E}function Go(f){return f===f&&!Ur(f)}function Em(f,v){return function(E){return E==null?!1:E[f]===v&&(v!==e||f in ir(E))}}function x2(f){var v=bf(f,function(R){return E.size===d&&E.clear(),R}),E=v.cache;return v}function zy(f,v){var E=f[1],R=v[1],j=E|R,K=j<(A|M|G),te=R==G&&E==D||R==G&&E==Y&&f[7].length<=v[8]||R==(G|Y)&&v[7].length<=v[8]&&E==D;if(!(K||te))return f;R&A&&(f[2]=v[2],j|=E&A?0:I);var ae=v[3];if(ae){var me=f[3];f[3]=me?cm(me,ae,v[4]):ae,f[4]=me?_l(f[3],p):v[4]}return ae=v[5],ae&&(me=f[5],f[5]=me?pv(me,ae,v[6]):ae,f[6]=me?_l(f[5],p):v[6]),ae=v[7],ae&&(f[7]=ae),R&G&&(f[8]=f[8]==null?v[8]:ui(f[8],v[8])),f[9]==null&&(f[9]=v[9]),f[0]=v[0],f[1]=j,f}function Al(f){var v=[];if(f!=null)for(var E in ir(f))v.push(E);return v}function Mv(f){return Ma.call(f)}function Ov(f,v,E){return v=Wr(v===e?f.length-1:v,0),function(){for(var R=arguments,j=-1,K=Wr(R.length-v,0),te=we(K);++j<K;)te[j]=R[v+j];j=-1;for(var ae=we(v+1);++j<v;)ae[j]=R[j];return ae[v]=E(te),ot(f,this,ae)}}function of(f,v){return v.length<2?f:Ho(f,ns(v,0,-1))}function lf(f,v){for(var E=f.length,R=ui(v.length,E),j=ha(f);R--;){var K=v[R];f[R]=so(K,E)?j[K]:e}return f}function yr(f,v){if(!(v==="constructor"&&typeof f[v]=="function")&&v!="__proto__")return f[v]}var qy=Il(av),uf=ac||function(f,v){return qr.setTimeout(f,v)},Cm=Il(Ay);function Rd(f,v,E){var R=v+"";return Cm(f,Sv(R,Wy(_m(R),E)))}function Il(f){var v=0,E=0;return function(){var R=As(),j=Oe-(R-E);if(E=R,j>0){if(++v>=re)return arguments[0]}else v=0;return f.apply(e,arguments)}}function cf(f,v){var E=-1,R=f.length,j=R-1;for(v=v===e?R:v;++E<v;){var K=Sd(E,j),te=f[K];f[K]=f[E],f[E]=te}return f.length=v,f}var kv=x2(function(f){var v=[];return f.charCodeAt(0)===46&&v.push(""),f.replace(sa,function(E,R,j,K){v.push(j?K.replace(ht,"$1"):R||E)}),v});function Da(f){if(typeof f=="string"||Ha(f))return f;var v=f+"";return v=="0"&&1/f==-le?"-0":v}function $i(f){if(f!=null){try{return Gp.call(f)}catch{}try{return f+""}catch{}}return""}function Wy(f,v){return ce(We,function(E){var R="_."+E[0];v&E[1]&&!Jn(f,R)&&f.push(R)}),f.sort()}function wm(f){if(f instanceof rn)return f.clone();var v=new Oa(f.__wrapped__,f.__chain__);return v.__actions__=ha(f.__actions__),v.__index__=f.__index__,v.__values__=f.__values__,v}function Ky(f,v,E){(E?Qi(f,v,E):v===e)?v=1:v=Wr(Bt(v),0);var R=f==null?0:f.length;if(!R||v<1)return[];for(var j=0,K=0,te=we(cd(R/v));j<R;)te[K++]=ns(f,j,j+=v);return te}function Rv(f){for(var v=-1,E=f==null?0:f.length,R=0,j=[];++v<E;){var K=f[v];K&&(j[R++]=K)}return j}function Dv(){var f=arguments.length;if(!f)return[];for(var v=we(f-1),E=arguments[0],R=f;R--;)v[R-1]=arguments[R];return au($t(E)?ha(E):[E],Ei(v,1))}var Nm=sn(function(f,v){return ai(f)?Ds(f,Ei(v,1,ai,!0)):[]}),Yy=sn(function(f,v){var E=Or(v);return ai(E)&&(E=e),ai(f)?Ds(f,Ei(v,1,ai,!0),Ut(E,2)):[]}),Ml=sn(function(f,v){var E=Or(v);return ai(E)&&(E=e),ai(f)?Ds(f,Ei(v,1,ai,!0),e,E):[]});function hi(f,v,E){var R=f==null?0:f.length;return R?(v=E||v===e?1:Bt(v),ns(f,v<0?0:v,R)):[]}function xv(f,v,E){var R=f==null?0:f.length;return R?(v=E||v===e?1:Bt(v),v=R-v,ns(f,0,v<0?0:v)):[]}function Qy(f,v){return f&&f.length?qh(f,Ut(v,3),!0,!0):[]}function Oi(f,v){return f&&f.length?qh(f,Ut(v,3),!0):[]}function P2(f,v,E,R){var j=f==null?0:f.length;return j?(E&&typeof E!="number"&&Qi(f,v,E)&&(E=0,R=j),Hh(f,v,E,R)):[]}function Pv(f,v,E){var R=f==null?0:f.length;if(!R)return-1;var j=E==null?0:Bt(E);return j<0&&(j=Wr(R+j,0)),Rp(f,Ut(v,3),j)}function Uv(f,v,E){var R=f==null?0:f.length;if(!R)return-1;var j=R-1;return E!==e&&(j=Bt(E),j=E<0?Wr(R+j,0):ui(j,R-1)),Rp(f,Ut(v,3),j,!0)}function Mr(f){var v=f==null?0:f.length;return v?Ei(f,1):[]}function xa(f){var v=f==null?0:f.length;return v?Ei(f,le):[]}function Ol(f,v){var E=f==null?0:f.length;return E?(v=v===e?1:Bt(v),Ei(f,v)):[]}function $y(f){for(var v=-1,E=f==null?0:f.length,R={};++v<E;){var j=f[v];R[j[0]]=j[1]}return R}function Lv(f){return f&&f.length?f[0]:e}function Xy(f,v,E){var R=f==null?0:f.length;if(!R)return-1;var j=E==null?0:Bt(E);return j<0&&(j=Wr(R+j,0)),rd(f,v,j)}function U2(f){var v=f==null?0:f.length;return v?ns(f,0,-1):[]}var Tm=sn(function(f){var v=Nr(f,cv);return v.length&&v[0]===f[0]?Gh(v):[]}),Pa=sn(function(f){var v=Or(f),E=Nr(f,cv);return v===Or(E)?v=e:E.pop(),E.length&&E[0]===f[0]?Gh(E,Ut(v,2)):[]}),oo=sn(function(f){var v=Or(f),E=Nr(f,cv);return v=typeof v=="function"?v:e,v&&E.pop(),E.length&&E[0]===f[0]?Gh(E,e,v):[]});function Zy(f,v){return f==null?"":dd.call(f,v)}function Or(f){var v=f==null?0:f.length;return v?f[v-1]:e}function Jy(f,v,E){var R=f==null?0:f.length;if(!R)return-1;var j=R;return E!==e&&(j=Bt(E),j=j<0?Wr(R+j,0):ui(j,R-1)),v===v?N2(f,v,j):Rp(f,oy,j,!0)}function kl(f,v){return f&&f.length?am(f,Bt(v)):e}var pc=sn(Vo);function Vo(f,v){return f&&f.length&&v&&v.length?Nd(f,v):f}function Fv(f,v,E){return f&&f.length&&v&&v.length?Nd(f,v,Ut(E,2)):f}function Hv(f,v,E){return f&&f.length&&v&&v.length?Nd(f,v,e,E):f}var lo=jo(function(f,v){var E=f==null?0:f.length,R=bd(f,v);return Td(f,Nr(v,function(j){return so(j,E)?+j:j}).sort(fv)),R});function eb(f,v){var E=[];if(!(f&&f.length))return E;var R=-1,j=[],K=f.length;for(v=Ut(v,3);++R<K;){var te=f[R];v(te,R,f)&&(E.push(te),j.push(R))}return Td(f,j),E}function yu(f){return f==null?f:Uo.call(f)}function df(f,v,E){var R=f==null?0:f.length;return R?(E&&typeof E!="number"&&Qi(f,v,E)?(v=0,E=R):(v=v==null?0:Bt(v),E=E===e?R:Bt(E)),ns(f,v,E)):[]}function hf(f,v){return Id(f,v)}function Dd(f,v,E){return om(f,v,Ut(E,2))}function tb(f,v){var E=f==null?0:f.length;if(E){var R=Id(f,v);if(R<E&&os(f[R],v))return R}return-1}function nb(f,v){return Id(f,v,!0)}function ff(f,v,E){return om(f,v,Ut(E,2),!0)}function rb(f,v){var E=f==null?0:f.length;if(E){var R=Id(f,v,!0)-1;if(os(f[R],v))return R}return-1}function Sm(f){return f&&f.length?Oy(f):[]}function ib(f,v){return f&&f.length?Oy(f,Ut(v,2)):[]}function L2(f){var v=f==null?0:f.length;return v?ns(f,1,v):[]}function F2(f,v,E){return f&&f.length?(v=E||v===e?1:Bt(v),ns(f,0,v<0?0:v)):[]}function $n(f,v,E){var R=f==null?0:f.length;return R?(v=E||v===e?1:Bt(v),v=R-v,ns(f,v<0?0:v,R)):[]}function br(f,v){return f&&f.length?qh(f,Ut(v,3),!1,!0):[]}function En(f,v){return f&&f.length?qh(f,Ut(v,3)):[]}var Tn=sn(function(f){return Sl(Ei(f,1,ai,!0))}),ar=sn(function(f){var v=Or(f);return ai(v)&&(v=e),Sl(Ei(f,1,ai,!0),Ut(v,2))}),is=sn(function(f){var v=Or(f);return v=typeof v=="function"?v:e,Sl(Ei(f,1,ai,!0),e,v)});function bu(f){return f&&f.length?Sl(f):[]}function xd(f,v){return f&&f.length?Sl(f,Ut(v,2)):[]}function jv(f,v){return v=typeof v=="function"?v:e,f&&f.length?Sl(f,e,v):[]}function uo(f){if(!(f&&f.length))return[];var v=0;return f=dt(f,function(E){if(ai(E))return v=Wr(E.length,v),!0}),Pp(v,function(E){return Nr(f,ec(E))})}function Vr(f,v){if(!(f&&f.length))return[];var E=uo(f);return v==null?E:Nr(E,function(R){return ot(v,e,R)})}var Eu=sn(function(f,v){return ai(f)?Ds(f,v):[]}),mc=sn(function(f){return lm(dt(f,ai))}),Gv=sn(function(f){var v=Or(f);return ai(v)&&(v=e),lm(dt(f,ai),Ut(v,2))}),as=sn(function(f){var v=Or(f);return v=typeof v=="function"?v:e,lm(dt(f,ai),e,v)}),Pd=sn(uo);function pf(f,v){return uv(f||[],v||[],Js)}function Ua(f,v){return uv(f||[],v||[],Ad)}var Vv=sn(function(f){var v=f.length,E=v>1?f[v-1]:e;return E=typeof E=="function"?(f.pop(),E):e,Vr(f,E)});function mf(f){var v=B(f);return v.__chain__=!0,v}function ab(f,v){return v(f),f}function gc(f,v){return v(f)}var Am=jo(function(f){var v=f.length,E=v?f[0]:0,R=this.__wrapped__,j=function(K){return bd(K,f)};return v>1||this.__actions__.length||!(R instanceof rn)||!so(E)?this.thru(j):(R=R.slice(E,+E+(v?1:0)),R.__actions__.push({func:gc,args:[j],thisArg:e}),new Oa(R,this.__chain__).thru(function(K){return v&&!K.length&&K.push(e),K}))});function Cu(){return mf(this)}function Ci(){return new Oa(this.value(),this.__chain__)}function wu(){this.__values__===e&&(this.__values__=Mb(this.value()));var f=this.__index__>=this.__values__.length,v=f?e:this.__values__[this.__index__++];return{done:f,value:v}}function Ud(){return this}function Rl(f){for(var v,E=this;E instanceof cu;){var R=wm(E);R.__index__=0,R.__values__=e,v?j.__wrapped__=R:v=R;var j=R;E=E.__wrapped__}return j.__wrapped__=f,v}function Bv(){var f=this.__wrapped__;if(f instanceof rn){var v=f;return this.__actions__.length&&(v=new rn(this)),v=v.reverse(),v.__actions__.push({func:gc,args:[yu],thisArg:e}),new Oa(v,this.__chain__)}return this.thru(yu)}function zv(){return lv(this.__wrapped__,this.__actions__)}var sb=dm(function(f,v,E){er.call(f,E)?++f[E]:Ja(f,E,1)});function gf(f,v,E){var R=$t(f)?at:fu;return E&&Qi(f,v,E)&&(v=e),R(f,Ut(v,3))}function qv(f,v){var E=$t(f)?dt:Jp;return E(f,Ut(v,3))}var ss=yv(Pv),ob=yv(Uv);function La(f,v){return Ei(vf(f,v),1)}function lb(f,v){return Ei(vf(f,v),le)}function ub(f,v,E){return E=E===e?1:Bt(E),Ei(vf(f,v),E)}function cb(f,v){var E=$t(f)?ce:Fo;return E(f,Ut(v,3))}function Dl(f,v){var E=$t(f)?ft:Zp;return E(f,Ut(v,3))}var Im=dm(function(f,v,E){er.call(f,E)?f[E].push(v):Ja(f,E,[v])});function Wv(f,v,E,R){f=Fa(f)?f:qd(f),E=E&&!R?Bt(E):0;var j=f.length;return E<0&&(E=Wr(j+E,0)),Af(f)?E<=j&&f.indexOf(v,E)>-1:!!j&&rd(f,v,E)>-1}var Ld=sn(function(f,v,E){var R=-1,j=typeof v=="function",K=Fa(f)?we(f.length):[];return Fo(f,function(te){K[++R]=j?ot(v,te,E):xs(te,v,E)}),K}),db=dm(function(f,v,E){Ja(f,E,v)});function vf(f,v){var E=$t(f)?Nr:rm;return E(f,Ut(v,3))}function hb(f,v,E,R){return f==null?[]:($t(v)||(v=v==null?[]:[v]),E=R?e:E,$t(E)||(E=E==null?[]:[E]),sm(f,v,E))}var fb=dm(function(f,v,E){f[E?0:1].push(v)},function(){return[[],[]]});function Mm(f,v,E){var R=$t(f)?Pg:Fg,j=arguments.length<3;return R(f,Ut(v,4),E,j,Fo)}function Kv(f,v,E){var R=$t(f)?ay:Fg,j=arguments.length<3;return R(f,Ut(v,4),E,j,Zp)}function H2(f,v){var E=$t(f)?dt:Jp;return E(f,Rm(Ut(v,3)))}function j2(f){var v=$t(f)?Fh:rv;return v(f)}function G2(f,v,E){(E?Qi(f,v,E):v===e)?v=1:v=Bt(v);var R=$t(f)?$p:iv;return R(f,v)}function pb(f){var v=$t(f)?wy:Iy;return v(f)}function mb(f){if(f==null)return 0;if(Fa(f))return Af(f)?id(f):f.length;var v=Hi(f);return v==Zt||v==gt?f.size:mu(f).length}function Fd(f,v,E){var R=$t(f)?Ug:My;return E&&Qi(f,v,E)&&(v=e),R(f,Ut(v,3))}var Om=sn(function(f,v){if(f==null)return[];var E=v.length;return E>1&&Qi(f,v[0],v[1])?v=[]:E>2&&Qi(v[0],v[1],v[2])&&(v=[v[0]]),sm(f,Ei(v,1),[])}),_f=qp||function(){return qr.Date.now()};function gb(f,v){if(typeof v!="function")throw new $a(s);return f=Bt(f),function(){if(--f<1)return v.apply(this,arguments)}}function Yv(f,v,E){return v=E?e:v,v=f&&v==null?f.length:v,fa(f,G,e,e,e,e,v)}function Qv(f,v){var E;if(typeof v!="function")throw new $a(s);return f=Bt(f),function(){return--f>0&&(E=v.apply(this,arguments)),f<=1&&(v=e),E}}var km=sn(function(f,v,E){var R=A;if(E.length){var j=_l(E,Yr(km));R|=H}return fa(f,R,v,E,j)}),$v=sn(function(f,v,E){var R=A|M;if(E.length){var j=_l(E,Yr($v));R|=H}return fa(v,R,f,E,j)});function yf(f,v,E){v=E?e:v;var R=fa(f,D,e,e,e,e,e,v);return R.placeholder=yf.placeholder,R}function Xv(f,v,E){v=E?e:v;var R=fa(f,P,e,e,e,e,e,v);return R.placeholder=Xv.placeholder,R}function Zv(f,v,E){var R,j,K,te,ae,me,Ge=0,Ve=!1,Ke=!1,nt=!0;if(typeof f!="function")throw new $a(s);v=us(v)||0,Ur(E)&&(Ve=!!E.leading,Ke="maxWait"in E,K=Ke?Wr(us(E.maxWait)||0,v):K,nt="trailing"in E?!!E.trailing:nt);function wt(wi){var Ul=R,bc=j;return R=j=e,Ge=wi,te=f.apply(bc,Ul),te}function zt(wi){return Ge=wi,ae=uf(Mn,v),Ve?wt(wi):te}function vn(wi){var Ul=wi-me,bc=wi-Ge,kS=v-Ul;return Ke?ui(kS,K-bc):kS}function qt(wi){var Ul=wi-me,bc=wi-Ge;return me===e||Ul>=v||Ul<0||Ke&&bc>=K}function Mn(){var wi=_f();if(qt(wi))return Fn(wi);ae=uf(Mn,vn(wi))}function Fn(wi){return ae=e,nt&&R?wt(wi):(R=j=e,te)}function co(){ae!==e&&Wh(ae),Ge=0,R=me=j=ae=e}function cs(){return ae===e?te:Fn(_f())}function ho(){var wi=_f(),Ul=qt(wi);if(R=arguments,j=this,me=wi,Ul){if(ae===e)return zt(me);if(Ke)return Wh(ae),ae=uf(Mn,v),wt(me)}return ae===e&&(ae=uf(Mn,v)),te}return ho.cancel=co,ho.flush=cs,ho}var sr=sn(function(f,v){return Zg(f,1,v)}),Jv=sn(function(f,v,E){return Zg(f,us(v)||0,E)});function V2(f){return fa(f,F)}function bf(f,v){if(typeof f!="function"||v!=null&&typeof v!="function")throw new $a(s);var E=function(){var R=arguments,j=v?v.apply(this,R):R[0],K=E.cache;if(K.has(j))return K.get(j);var te=f.apply(this,R);return E.cache=K.set(j,te)||K,te};return E.cache=new(bf.Cache||Zs),E}bf.Cache=Zs;function Rm(f){if(typeof f!="function")throw new $a(s);return function(){var v=arguments;switch(v.length){case 0:return!f.call(this);case 1:return!f.call(this,v[0]);case 2:return!f.call(this,v[0],v[1]);case 3:return!f.call(this,v[0],v[1],v[2])}return!f.apply(this,v)}}function B2(f){return Qv(2,f)}var z2=ky(function(f,v){v=v.length==1&&$t(v[0])?Nr(v[0],Qa(Ut())):Nr(Ei(v,1),Qa(Ut()));var E=v.length;return sn(function(R){for(var j=-1,K=ui(R.length,E);++j<K;)R[j]=v[j].call(this,R[j]);return ot(f,this,R)})}),Hd=sn(function(f,v){var E=_l(v,Yr(Hd));return fa(f,H,e,v,E)}),vc=sn(function(f,v){var E=_l(v,Yr(vc));return fa(f,L,e,v,E)}),e_=jo(function(f,v){return fa(f,Y,e,e,e,v)});function Dm(f,v){if(typeof f!="function")throw new $a(s);return v=v===e?v:Bt(v),sn(f,v)}function t_(f,v){if(typeof f!="function")throw new $a(s);return v=v==null?0:Wr(Bt(v),0),sn(function(E){var R=E[v],j=ao(E,0,v);return R&&au(j,R),ot(f,this,j)})}function Nu(f,v,E){var R=!0,j=!0;if(typeof f!="function")throw new $a(s);return Ur(E)&&(R="leading"in E?!!E.leading:R,j="trailing"in E?!!E.trailing:j),Zv(f,v,{leading:R,maxWait:v,trailing:j})}function Bo(f){return Yv(f,1)}function Ef(f,v){return Hd(um(v),f)}function q2(){if(!arguments.length)return[];var f=arguments[0];return $t(f)?f:[f]}function vb(f){return da(f,y)}function _b(f,v){return v=typeof v=="function"?v:e,da(f,y,v)}function yb(f){return da(f,g|y)}function bb(f,v){return v=typeof v=="function"?v:e,da(f,g|y,v)}function W2(f,v){return v==null||hu(f,v,ki(v))}function os(f,v){return f===v||f!==f&&v!==v}var Eb=Xh(jh),Cb=Xh(function(f,v){return f>=v}),_c=ka((function(){return arguments})())?ka:function(f){return Qr(f)&&er.call(f,"callee")&&!Rh.call(f,"callee")},$t=we.isArray,n_=Sh?Qa(Sh):ri;function Fa(f){return f!=null&&Um(f.length)&&!ls(f)}function ai(f){return Qr(f)&&Fa(f)}function Cf(f){return f===!0||f===!1||Qr(f)&&Fi(f)==At}var Tu=yy||be,wb=td?Qa(td):tm;function Cn(f){return Qr(f)&&f.nodeType===1&&!Nf(f)}function r_(f){if(f==null)return!0;if(Fa(f)&&($t(f)||typeof f=="string"||typeof f.splice=="function"||Tu(f)||Su(f)||_c(f)))return!f.length;var v=Hi(f);if(v==Zt||v==gt)return!f.size;if(kd(f))return!mu(f).length;for(var E in f)if(er.call(f,E))return!1;return!0}function xm(f,v){return ts(f,v)}function i_(f,v,E){E=typeof E=="function"?E:e;var R=E?E(f,v):e;return R===e?ts(f,v,e,E):!!R}function Pm(f){if(!Qr(f))return!1;var v=Fi(f);return v==wn||v==vr||typeof f.message=="string"&&typeof f.name=="string"&&!Nf(f)}function a_(f){return typeof f=="number"&&Xa(f)}function ls(f){if(!Ur(f))return!1;var v=Fi(f);return v==Rn||v==xn||v==tt||v==jn}function wf(f){return typeof f=="number"&&f==Bt(f)}function Um(f){return typeof f=="number"&&f>-1&&f%1==0&&f<=pe}function Ur(f){var v=typeof f;return f!=null&&(v=="object"||v=="function")}function Qr(f){return f!=null&&typeof f=="object"}var Nb=Ju?Qa(Ju):dr;function Tb(f,v){return f===v||Kr(f,v,gm(v))}function Sb(f,v,E){return E=typeof E=="function"?E:e,Kr(f,v,gm(v),E)}function hr(f){return o_(f)&&f!=+f}function s_(f){if(Iv(f))throw new Qt(a);return Vh(f)}function ji(f){return f===null}function K2(f){return f==null}function o_(f){return typeof f=="number"||Qr(f)&&Fi(f)==Pn}function Nf(f){if(!Qr(f)||Fi(f)!=fn)return!1;var v=Po(f);if(v===null)return!0;var E=er.call(v,"constructor")&&v.constructor;return typeof E=="function"&&E instanceof E&&Gp.call(E)==Bp}var Tf=nd?Qa(nd):Cd;function l_(f){return wf(f)&&f>=-pe&&f<=pe}var Sf=Ah?Qa(Ah):hc;function Af(f){return typeof f=="string"||!$t(f)&&Qr(f)&&Fi(f)==Dn}function Ha(f){return typeof f=="symbol"||Qr(f)&&Fi(f)==Cr}var Su=pn?Qa(pn):nm;function u_(f){return f===e}function Y2(f){return Qr(f)&&Hi(f)==rr}function Ab(f){return Qr(f)&&Fi(f)==Lt}var Q2=Xh(Pr),Ib=Xh(function(f,v){return f<=v});function Mb(f){if(!f)return[];if(Fa(f))return Af(f)?jr(f):ha(f);if(Ui&&f[Ui])return Bg(f[Ui]());var v=Hi(f),E=v==Zt?Lp:v==gt?Fp:qd;return E(f)}function xl(f){if(!f)return f===0?f:0;if(f=us(f),f===le||f===-le){var v=f<0?-1:1;return v*Pe}return f===f?f:0}function Bt(f){var v=xl(f),E=v%1;return v===v?E?v-E:v:0}function c_(f){return f?eo(Bt(f),0,$):0}function us(f){if(typeof f=="number")return f;if(Ha(f))return qe;if(Ur(f)){var v=typeof f.valueOf=="function"?f.valueOf():f;f=Ur(v)?v+"":v}if(typeof f!="string")return f===0?f:+f;f=tc(f);var E=Fr.test(f);return E||ee.test(f)?iu(f.slice(2),E?2:8):ni.test(f)?qe:+f}function Lm(f){return Ps(f,ja(f))}function $2(f){return f?eo(Bt(f),-pe,pe):f===0?f:0}function nr(f){return f==null?"":Ra(f)}var Ob=gu(function(f,v){if(kd(v)||Fa(v)){Ps(v,ki(v),f);return}for(var E in v)er.call(v,E)&&Js(f,E,v[E])}),Fm=gu(function(f,v){Ps(v,ja(v),f)}),jd=gu(function(f,v,E,R){Ps(v,ja(v),f,R)}),X2=gu(function(f,v,E,R){Ps(v,ki(v),f,R)}),Us=jo(bd);function d_(f,v){var E=uu(f);return v==null?E:Xg(E,v)}var kb=sn(function(f,v){f=ir(f);var E=-1,R=v.length,j=R>2?v[2]:e;for(j&&Qi(v[0],v[1],j)&&(R=1);++E<R;)for(var K=v[E],te=ja(K),ae=-1,me=te.length;++ae<me;){var Ge=te[ae],Ve=f[Ge];(Ve===e||os(Ve,od[Ge])&&!er.call(f,Ge))&&(f[Ge]=K[Ge])}return f}),Rb=sn(function(f){return f.push(e,Cv),ot(Vd,e,f)});function Db(f,v){return sy(f,Ut(v,3),no)}function If(f,v){return sy(f,Ut(v,3),em)}function Ls(f,v){return f==null?f:dc(f,Ut(v,3),ja)}function xb(f,v){return f==null?f:Ed(f,Ut(v,3),ja)}function Hm(f,v){return f&&no(f,Ut(v,3))}function Pl(f,v){return f&&em(f,Ut(v,3))}function Z2(f){return f==null?[]:Tl(f,ki(f))}function J2(f){return f==null?[]:Tl(f,ja(f))}function Au(f,v,E){var R=f==null?e:Ho(f,v);return R===e?E:R}function Pb(f,v){return f!=null&&ym(f,v,es)}function h_(f,v){return f!=null&&ym(f,v,ro)}var eC=Qh(function(f,v,E){v!=null&&typeof v.toString!="function"&&(v=Ma.call(v)),f[v]=E},Kd(pa)),tC=Qh(function(f,v,E){v!=null&&typeof v.toString!="function"&&(v=Ma.call(v)),er.call(f,v)?f[v].push(E):f[v]=[E]},Ut),nC=sn(xs);function ki(f){return Fa(f)?Qp(f):mu(f)}function ja(f){return Fa(f)?Qp(f,!0):M2(f)}function rC(f,v){var E={};return v=Ut(v,3),no(f,function(R,j,K){Ja(E,v(R,j,K),R)}),E}function Ub(f,v){var E={};return v=Ut(v,3),no(f,function(R,j,K){Ja(E,j,v(R,j,K))}),E}var Gd=gu(function(f,v,E){Bh(f,v,E)}),Vd=gu(function(f,v,E,R){Bh(f,v,E,R)}),Lb=jo(function(f,v){var E={};if(f==null)return E;var R=!1;v=Nr(v,function(K){return K=rs(K,f),R||(R=K.length>1),K}),Ps(f,Nv(f),E),R&&(E=da(E,g|_|y,Hy));for(var j=v.length;j--;)zh(E,v[j]);return E});function iC(f,v){return zd(f,Rm(Ut(v)))}var Bd=jo(function(f,v){return f==null?{}:tv(f,v)});function zd(f,v){if(f==null)return{};var E=Nr(Nv(f),function(R){return[R]});return v=Ut(v),Yi(f,E,function(R,j){return v(R,j[0])})}function Fb(f,v,E){v=rs(v,f);var R=-1,j=v.length;for(j||(j=1,f=e);++R<j;){var K=f==null?e:f[Da(v[R])];K===e&&(R=j,K=E),f=ls(K)?K.call(f):K}return f}function jm(f,v,E){return f==null?f:Ad(f,v,E)}function f_(f,v,E,R){return R=typeof R=="function"?R:e,f==null?f:Ad(f,v,E,R)}var Gm=bv(ki),Mf=bv(ja);function Hb(f,v,E){var R=$t(f),j=R||Tu(f)||Su(f);if(v=Ut(v,4),E==null){var K=f&&f.constructor;j?E=R?new K:[]:Ur(f)?E=ls(K)?uu(Po(f)):{}:E={}}return(j?ce:no)(f,function(te,ae,me){return v(E,te,ae,me)}),E}function jb(f,v){return f==null?!0:zh(f,v)}function aC(f,v,E){return f==null?f:ov(f,v,um(E))}function Gb(f,v,E,R){return R=typeof R=="function"?R:e,f==null?f:ov(f,v,um(E),R)}function qd(f){return f==null?[]:Hg(f,ki(f))}function p_(f){return f==null?[]:Hg(f,ja(f))}function sC(f,v,E){return E===e&&(E=v,v=e),E!==e&&(E=us(E),E=E===E?E:0),v!==e&&(v=us(v),v=v===v?v:0),eo(us(f),v,E)}function Vm(f,v,E){return v=xl(v),E===e?(E=v,v=0):E=xl(E),f=us(f),pu(f,v,E)}function Bm(f,v,E){if(E&&typeof E!="boolean"&&Qi(f,v,E)&&(v=E=e),E===e&&(typeof v=="boolean"?(E=v,v=e):typeof f=="boolean"&&(E=f,f=e)),f===e&&v===e?(f=0,v=1):(f=xl(f),v===e?(v=f,f=0):v=xl(v)),f>v){var R=f;f=v,v=R}if(E||f%1||v%1){var j=El();return ui(f+j*(v-f+xo("1e-"+((j+"").length-1))),v)}return Sd(f,v)}var zm=fc(function(f,v,E){return v=v.toLowerCase(),f+(E?Vb(v):v)});function Vb(f){return yc(nr(f).toLowerCase())}function Wd(f){return f=nr(f),f&&f.replace(Be,Oh).replace(wh,"")}function oC(f,v,E){f=nr(f),v=Ra(v);var R=f.length;E=E===e?R:eo(Bt(E),0,R);var j=E;return E-=v.length,E>=0&&f.slice(E,j)==v}function Bb(f){return f=nr(f),f&&Et.test(f)?f.replace(Ze,E2):f}function zb(f){return f=nr(f),f&&qs.test(f)?f.replace(yi,"\\$&"):f}var qb=fc(function(f,v,E){return f+(E?"-":"")+v.toLowerCase()}),Wb=fc(function(f,v,E){return f+(E?" ":"")+v.toLowerCase()}),m_=_v("toLowerCase");function Kb(f,v,E){f=nr(f),v=Bt(v);var R=v?id(f):0;if(!v||R>=v)return f;var j=(v-R)/2;return vu(Dh(j),E)+f+vu(cd(j),E)}function Yb(f,v,E){f=nr(f),v=Bt(v);var R=v?id(f):0;return v&&R<v?f+vu(v-R,E):f}function qm(f,v,E){f=nr(f),v=Bt(v);var R=v?id(f):0;return v&&R<v?vu(v-R,E)+f:f}function lC(f,v,E){return E||v==null?v=0:v&&(v=+v),Is(nr(f).replace(Cs,""),v||0)}function uC(f,v,E){return(E?Qi(f,v,E):v===e)?v=1:v=Bt(v),io(nr(f),v)}function g_(){var f=arguments,v=nr(f[0]);return f.length<3?v:v.replace(f[1],f[2])}var v_=fc(function(f,v,E){return f+(E?"_":"")+v.toLowerCase()});function Wm(f,v,E){return E&&typeof E!="number"&&Qi(f,v,E)&&(v=E=e),E=E===e?$:E>>>0,E?(f=nr(f),f&&(typeof v=="string"||v!=null&&!Tf(v))&&(v=Ra(v),!v&&nc(f))?ao(jr(f),0,E):f.split(v,E)):[]}var __=fc(function(f,v,E){return f+(E?" ":"")+yc(v)});function Qb(f,v,E){return f=nr(f),E=E==null?0:eo(Bt(E),0,f.length),v=Ra(v),f.slice(E,E+v.length)==v}function y_(f,v,E){var R=B.templateSettings;E&&Qi(f,v,E)&&(v=e),f=nr(f),v=jd({},v,R,Ev);var j=jd({},v.imports,R.imports,Ev),K=ki(j),te=Hg(j,K),ae,me,Ge=0,Ve=v.interpolate||Pt,Ke="__p += '",nt=Hp((v.escape||Pt).source+"|"+Ve.source+"|"+(Ve===Gn?Vt:Pt).source+"|"+(v.evaluate||Pt).source+"|$","g"),wt="//# sourceURL="+(er.call(v,"sourceURL")?(v.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++nu+"]")+`
`;f.replace(nt,function(qt,Mn,Fn,co,cs,ho){return Fn||(Fn=co),Ke+=f.slice(Ge,ho).replace(hn,Up),Mn&&(ae=!0,Ke+=`' +
__e(`+Mn+`) +
'`),cs&&(me=!0,Ke+=`';
`+cs+`;
__p += '`),Fn&&(Ke+=`' +
((__t = (`+Fn+`)) == null ? '' : __t) +
'`),Ge=ho+qt.length,qt}),Ke+=`';
`;var zt=er.call(v,"variable")&&v.variable;if(!zt)Ke=`with (obj) {
`+Ke+`
}
`;else if(Ot.test(zt))throw new Qt(l);Ke=(me?Ke.replace(aa,""):Ke).replace(Mt,"$1").replace(Dt,"$1;"),Ke="function("+(zt||"obj")+`) {
`+(zt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ae?", __e = _.escape":"")+(me?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ke+`return __p
}`;var vn=b_(function(){return bn(K,wt+"return "+Ke).apply(e,te)});if(vn.source=Ke,Pm(vn))throw vn;return vn}function Iu(f){return nr(f).toLowerCase()}function Mu(f){return nr(f).toUpperCase()}function Ou(f,v,E){if(f=nr(f),f&&(E||v===e))return tc(f);if(!f||!(v=Ra(v)))return f;var R=jr(f),j=jr(v),K=jg(R,j),te=Gg(R,j)+1;return ao(R,K,te).join("")}function Of(f,v,E){if(f=nr(f),f&&(E||v===e))return f.slice(0,ad(f)+1);if(!f||!(v=Ra(v)))return f;var R=jr(f),j=Gg(R,jr(v))+1;return ao(R,0,j).join("")}function kf(f,v,E){if(f=nr(f),f&&(E||v===e))return f.replace(Cs,"");if(!f||!(v=Ra(v)))return f;var R=jr(f),j=jg(R,jr(v));return ao(R,j).join("")}function ku(f,v){var E=ne,R=J;if(Ur(v)){var j="separator"in v?v.separator:j;E="length"in v?Bt(v.length):E,R="omission"in v?Ra(v.omission):R}f=nr(f);var K=f.length;if(nc(f)){var te=jr(f);K=te.length}if(E>=K)return f;var ae=E-id(R);if(ae<1)return R;var me=te?ao(te,0,ae).join(""):f.slice(0,ae);if(j===e)return me+R;if(te&&(ae+=me.length-ae),Tf(j)){if(f.slice(ae).search(j)){var Ge,Ve=me;for(j.global||(j=Hp(j.source,nr(Nn.exec(j))+"g")),j.lastIndex=0;Ge=j.exec(Ve);)var Ke=Ge.index;me=me.slice(0,Ke===e?ae:Ke)}}else if(f.indexOf(Ra(j),ae)!=ae){var nt=me.lastIndexOf(j);nt>-1&&(me=me.slice(0,nt))}return me+R}function cC(f){return f=nr(f),f&&Ae.test(f)?f.replace(vt,dy):f}var $b=fc(function(f,v,E){return f+(E?" ":"")+v.toUpperCase()}),yc=_v("toUpperCase");function Xb(f,v,E){return f=nr(f),v=E?e:v,v===e?Vg(f)?py(f):y2(f):f.match(v)||[]}var b_=sn(function(f,v){try{return ot(f,e,v)}catch(E){return Pm(E)?E:new Qt(E)}}),Km=jo(function(f,v){return ce(v,function(E){E=Da(E),Ja(f,E,km(f[E],f))}),f});function Zb(f){var v=f==null?0:f.length,E=Ut();return f=v?Nr(f,function(R){if(typeof R[1]!="function")throw new $a(s);return[E(R[0]),R[1]]}):[],sn(function(R){for(var j=-1;++j<v;){var K=f[j];if(ot(K[0],this,R))return ot(K[1],this,R)}})}function dC(f){return Ty(da(f,g))}function Kd(f){return function(){return f}}function Ym(f,v){return f==null||f!==f?v:f}var Jb=Md(),Yd=Md(!0);function pa(f){return f}function Rf(f){return wd(typeof f=="function"?f:da(f,g))}function Qm(f){return im(da(f,g))}function eE(f,v){return ev(f,da(v,g))}var hC=sn(function(f,v){return function(E){return xs(E,f,v)}}),$m=sn(function(f,v){return function(E){return xs(f,E,v)}});function o(f,v,E){var R=ki(v),j=Tl(v,R);E==null&&!(Ur(v)&&(j.length||!R.length))&&(E=v,v=f,f=this,j=Tl(v,ki(v)));var K=!(Ur(E)&&"chain"in E)||!!E.chain,te=ls(f);return ce(j,function(ae){var me=v[ae];f[ae]=me,te&&(f.prototype[ae]=function(){var Ge=this.__chain__;if(K||Ge){var Ve=f(this.__wrapped__),Ke=Ve.__actions__=ha(this.__actions__);return Ke.push({func:me,args:arguments,thisArg:f}),Ve.__chain__=Ge,Ve}return me.apply(f,au([this.value()],arguments))})}),f}function u(){return qr._===this&&(qr._=Ts),this}function h(){}function m(f){return f=Bt(f),sn(function(v){return am(v,f)})}var b=hm(Nr),N=hm(at),x=hm(Ug);function V(f){return af(f)?ec(Da(f)):ii(f)}function ie(f){return function(v){return f==null?e:Ho(f,v)}}var _e=fm(),De=fm(!0);function je(){return[]}function be(){return!1}function Me(){return{}}function ut(){return""}function Ht(){return!0}function fr(f,v){if(f=Bt(f),f<1||f>pe)return[];var E=$,R=ui(f,$);v=Ut(v),f-=$;for(var j=Pp(R,v);++E<f;)v(E);return j}function he(f){return $t(f)?Nr(f,Da):Ha(f)?[f]:ha(kv(nr(f)))}function se(f){var v=++gy;return nr(f)+v}var ve=$h(function(f,v){return f+v},0),Fe=Zh("ceil"),kt=$h(function(f,v){return f/v},1),Bn=Zh("floor");function mt(f){return f&&f.length?to(f,pa,jh):e}function un(f,v){return f&&f.length?to(f,Ut(v,2),jh):e}function Sn(f){return Dp(f,pa)}function zn(f,v){return Dp(f,Ut(v,2))}function Ru(f){return f&&f.length?to(f,pa,Pr):e}function fC(f,v){return f&&f.length?to(f,Ut(v,2),Pr):e}var LP=$h(function(f,v){return f*v},1),FP=Zh("round"),HP=$h(function(f,v){return f-v},0);function jP(f){return f&&f.length?xp(f,pa):0}function GP(f,v){return f&&f.length?xp(f,Ut(v,2)):0}return B.after=gb,B.ary=Yv,B.assign=Ob,B.assignIn=Fm,B.assignInWith=jd,B.assignWith=X2,B.at=Us,B.before=Qv,B.bind=km,B.bindAll=Km,B.bindKey=$v,B.castArray=q2,B.chain=mf,B.chunk=Ky,B.compact=Rv,B.concat=Dv,B.cond=Zb,B.conforms=dC,B.constant=Kd,B.countBy=sb,B.create=d_,B.curry=yf,B.curryRight=Xv,B.debounce=Zv,B.defaults=kb,B.defaultsDeep=Rb,B.defer=sr,B.delay=Jv,B.difference=Nm,B.differenceBy=Yy,B.differenceWith=Ml,B.drop=hi,B.dropRight=xv,B.dropRightWhile=Qy,B.dropWhile=Oi,B.fill=P2,B.filter=qv,B.flatMap=La,B.flatMapDeep=lb,B.flatMapDepth=ub,B.flatten=Mr,B.flattenDeep=xa,B.flattenDepth=Ol,B.flip=V2,B.flow=Jb,B.flowRight=Yd,B.fromPairs=$y,B.functions=Z2,B.functionsIn=J2,B.groupBy=Im,B.initial=U2,B.intersection=Tm,B.intersectionBy=Pa,B.intersectionWith=oo,B.invert=eC,B.invertBy=tC,B.invokeMap=Ld,B.iteratee=Rf,B.keyBy=db,B.keys=ki,B.keysIn=ja,B.map=vf,B.mapKeys=rC,B.mapValues=Ub,B.matches=Qm,B.matchesProperty=eE,B.memoize=bf,B.merge=Gd,B.mergeWith=Vd,B.method=hC,B.methodOf=$m,B.mixin=o,B.negate=Rm,B.nthArg=m,B.omit=Lb,B.omitBy=iC,B.once=B2,B.orderBy=hb,B.over=b,B.overArgs=z2,B.overEvery=N,B.overSome=x,B.partial=Hd,B.partialRight=vc,B.partition=fb,B.pick=Bd,B.pickBy=zd,B.property=V,B.propertyOf=ie,B.pull=pc,B.pullAll=Vo,B.pullAllBy=Fv,B.pullAllWith=Hv,B.pullAt=lo,B.range=_e,B.rangeRight=De,B.rearg=e_,B.reject=H2,B.remove=eb,B.rest=Dm,B.reverse=yu,B.sampleSize=G2,B.set=jm,B.setWith=f_,B.shuffle=pb,B.slice=df,B.sortBy=Om,B.sortedUniq=Sm,B.sortedUniqBy=ib,B.split=Wm,B.spread=t_,B.tail=L2,B.take=F2,B.takeRight=$n,B.takeRightWhile=br,B.takeWhile=En,B.tap=ab,B.throttle=Nu,B.thru=gc,B.toArray=Mb,B.toPairs=Gm,B.toPairsIn=Mf,B.toPath=he,B.toPlainObject=Lm,B.transform=Hb,B.unary=Bo,B.union=Tn,B.unionBy=ar,B.unionWith=is,B.uniq=bu,B.uniqBy=xd,B.uniqWith=jv,B.unset=jb,B.unzip=uo,B.unzipWith=Vr,B.update=aC,B.updateWith=Gb,B.values=qd,B.valuesIn=p_,B.without=Eu,B.words=Xb,B.wrap=Ef,B.xor=mc,B.xorBy=Gv,B.xorWith=as,B.zip=Pd,B.zipObject=pf,B.zipObjectDeep=Ua,B.zipWith=Vv,B.entries=Gm,B.entriesIn=Mf,B.extend=Fm,B.extendWith=jd,o(B,B),B.add=ve,B.attempt=b_,B.camelCase=zm,B.capitalize=Vb,B.ceil=Fe,B.clamp=sC,B.clone=vb,B.cloneDeep=yb,B.cloneDeepWith=bb,B.cloneWith=_b,B.conformsTo=W2,B.deburr=Wd,B.defaultTo=Ym,B.divide=kt,B.endsWith=oC,B.eq=os,B.escape=Bb,B.escapeRegExp=zb,B.every=gf,B.find=ss,B.findIndex=Pv,B.findKey=Db,B.findLast=ob,B.findLastIndex=Uv,B.findLastKey=If,B.floor=Bn,B.forEach=cb,B.forEachRight=Dl,B.forIn=Ls,B.forInRight=xb,B.forOwn=Hm,B.forOwnRight=Pl,B.get=Au,B.gt=Eb,B.gte=Cb,B.has=Pb,B.hasIn=h_,B.head=Lv,B.identity=pa,B.includes=Wv,B.indexOf=Xy,B.inRange=Vm,B.invoke=nC,B.isArguments=_c,B.isArray=$t,B.isArrayBuffer=n_,B.isArrayLike=Fa,B.isArrayLikeObject=ai,B.isBoolean=Cf,B.isBuffer=Tu,B.isDate=wb,B.isElement=Cn,B.isEmpty=r_,B.isEqual=xm,B.isEqualWith=i_,B.isError=Pm,B.isFinite=a_,B.isFunction=ls,B.isInteger=wf,B.isLength=Um,B.isMap=Nb,B.isMatch=Tb,B.isMatchWith=Sb,B.isNaN=hr,B.isNative=s_,B.isNil=K2,B.isNull=ji,B.isNumber=o_,B.isObject=Ur,B.isObjectLike=Qr,B.isPlainObject=Nf,B.isRegExp=Tf,B.isSafeInteger=l_,B.isSet=Sf,B.isString=Af,B.isSymbol=Ha,B.isTypedArray=Su,B.isUndefined=u_,B.isWeakMap=Y2,B.isWeakSet=Ab,B.join=Zy,B.kebabCase=qb,B.last=Or,B.lastIndexOf=Jy,B.lowerCase=Wb,B.lowerFirst=m_,B.lt=Q2,B.lte=Ib,B.max=mt,B.maxBy=un,B.mean=Sn,B.meanBy=zn,B.min=Ru,B.minBy=fC,B.stubArray=je,B.stubFalse=be,B.stubObject=Me,B.stubString=ut,B.stubTrue=Ht,B.multiply=LP,B.nth=kl,B.noConflict=u,B.noop=h,B.now=_f,B.pad=Kb,B.padEnd=Yb,B.padStart=qm,B.parseInt=lC,B.random=Bm,B.reduce=Mm,B.reduceRight=Kv,B.repeat=uC,B.replace=g_,B.result=Fb,B.round=FP,B.runInContext=de,B.sample=j2,B.size=mb,B.snakeCase=v_,B.some=Fd,B.sortedIndex=hf,B.sortedIndexBy=Dd,B.sortedIndexOf=tb,B.sortedLastIndex=nb,B.sortedLastIndexBy=ff,B.sortedLastIndexOf=rb,B.startCase=__,B.startsWith=Qb,B.subtract=HP,B.sum=jP,B.sumBy=GP,B.template=y_,B.times=fr,B.toFinite=xl,B.toInteger=Bt,B.toLength=c_,B.toLower=Iu,B.toNumber=us,B.toSafeInteger=$2,B.toString=nr,B.toUpper=Mu,B.trim=Ou,B.trimEnd=Of,B.trimStart=kf,B.truncate=ku,B.unescape=cC,B.uniqueId=se,B.upperCase=$b,B.upperFirst=yc,B.each=cb,B.eachRight=Dl,B.first=Lv,o(B,(function(){var f={};return no(B,function(v,E){er.call(B.prototype,E)||(f[E]=v)}),f})(),{chain:!1}),B.VERSION=r,ce(["bind","bindKey","curry","curryRight","partial","partialRight"],function(f){B[f].placeholder=B}),ce(["drop","take"],function(f,v){rn.prototype[f]=function(E){E=E===e?1:Wr(Bt(E),0);var R=this.__filtered__&&!v?new rn(this):this.clone();return R.__filtered__?R.__takeCount__=ui(E,R.__takeCount__):R.__views__.push({size:ui(E,$),type:f+(R.__dir__<0?"Right":"")}),R},rn.prototype[f+"Right"]=function(E){return this.reverse()[f](E).reverse()}}),ce(["filter","map","takeWhile"],function(f,v){var E=v+1,R=E==Z||E==q;rn.prototype[f]=function(j){var K=this.clone();return K.__iteratees__.push({iteratee:Ut(j,3),type:E}),K.__filtered__=K.__filtered__||R,K}}),ce(["head","last"],function(f,v){var E="take"+(v?"Right":"");rn.prototype[f]=function(){return this[E](1).value()[0]}}),ce(["initial","tail"],function(f,v){var E="drop"+(v?"":"Right");rn.prototype[f]=function(){return this.__filtered__?new rn(this):this[E](1)}}),rn.prototype.compact=function(){return this.filter(pa)},rn.prototype.find=function(f){return this.filter(f).head()},rn.prototype.findLast=function(f){return this.reverse().find(f)},rn.prototype.invokeMap=sn(function(f,v){return typeof f=="function"?new rn(this):this.map(function(E){return xs(E,f,v)})}),rn.prototype.reject=function(f){return this.filter(Rm(Ut(f)))},rn.prototype.slice=function(f,v){f=Bt(f);var E=this;return E.__filtered__&&(f>0||v<0)?new rn(E):(f<0?E=E.takeRight(-f):f&&(E=E.drop(f)),v!==e&&(v=Bt(v),E=v<0?E.dropRight(-v):E.take(v-f)),E)},rn.prototype.takeRightWhile=function(f){return this.reverse().takeWhile(f).reverse()},rn.prototype.toArray=function(){return this.take($)},no(rn.prototype,function(f,v){var E=/^(?:filter|find|map|reject)|While$/.test(v),R=/^(?:head|last)$/.test(v),j=B[R?"take"+(v=="last"?"Right":""):v],K=R||/^find/.test(v);j&&(B.prototype[v]=function(){var te=this.__wrapped__,ae=R?[1]:arguments,me=te instanceof rn,Ge=ae[0],Ve=me||$t(te),Ke=function(Mn){var Fn=j.apply(B,au([Mn],ae));return R&&nt?Fn[0]:Fn};Ve&&E&&typeof Ge=="function"&&Ge.length!=1&&(me=Ve=!1);var nt=this.__chain__,wt=!!this.__actions__.length,zt=K&&!nt,vn=me&&!wt;if(!K&&Ve){te=vn?te:new rn(this);var qt=f.apply(te,ae);return qt.__actions__.push({func:gc,args:[Ke],thisArg:e}),new Oa(qt,nt)}return zt&&vn?f.apply(this,ae):(qt=this.thru(Ke),zt?R?qt.value()[0]:qt.value():qt)})}),ce(["pop","push","shift","sort","splice","unshift"],function(f){var v=kh[f],E=/^(?:push|sort|unshift)$/.test(f)?"tap":"thru",R=/^(?:pop|shift)$/.test(f);B.prototype[f]=function(){var j=arguments;if(R&&!this.__chain__){var K=this.value();return v.apply($t(K)?K:[],j)}return this[E](function(te){return v.apply($t(te)?te:[],j)})}}),no(rn.prototype,function(f,v){var E=B[v];if(E){var R=E.name+"";er.call(tr,R)||(tr[R]=[]),tr[R].push({name:v,func:E})}}),tr[Od(e,M).name]=[{name:"wrapper",func:e}],rn.prototype.clone=Cl,rn.prototype.reverse=du,rn.prototype.value=wl,B.prototype.at=Am,B.prototype.chain=Cu,B.prototype.commit=Ci,B.prototype.next=wu,B.prototype.plant=Rl,B.prototype.reverse=Bv,B.prototype.toJSON=B.prototype.valueOf=B.prototype.value=zv,B.prototype.first=B.prototype.head,Ui&&(B.prototype[Ui]=Ud),B}),sd=qg();Ia?((Ia.exports=sd)._=sd,gl._=sd):qr._=sd}).call(kc)})(G1,G1.exports);var yk=G1.exports;function hte(t){return"reqId"in t}var UP=function(){var t,n,e=k.useContext(fte);if(!e)throw new Error("useThread must be used within a ThreadProvider");var r=qa().state.config,i=r.logger,a=r.pubSub,s=r.groupChannel.enableMention,l=r.groupChannel.enableReactions,c=Px.useSyncExternalStore(e.subscribe,e.getState),d=c.message,p=c.parentMessage,g=c.currentChannel,_=c.threadListState,y=c.allThreadMessages,C=c.onBeforeSendUserMessage,w=c.onBeforeSendFileMessage,A=c.onBeforeSendVoiceMessage,M=c.onBeforeSendMultipleFilesMessage,I={sendMessageStart:k.useCallback(function(Z){return e.setState(function(ue){return"sendingStatus"in Z&&(Z.sendingStatus=cn.PENDING),ke(ke({},ue),{localThreadMessages:et(et([],ue.localThreadMessages,!0),[Z],!1)})})},[e]),sendMessageSuccess:k.useCallback(function(Z){return e.setState(function(ue){return"sendingStatus"in Z&&(Z.sendingStatus=cn.SUCCEEDED),ke(ke({},ue),{allThreadMessages:et(et([],ue.allThreadMessages.filter(function(q){return!Jd(q?.reqId,Z?.reqId)}),!0),[Z],!1),localThreadMessages:ue.localThreadMessages.filter(function(q){return!Jd(q?.reqId,Z?.reqId)})})})},[e]),sendMessageFailure:k.useCallback(function(Z){return e.setState(function(ue){return"sendingStatus"in Z&&(Z.sendingStatus=cn.FAILED),ke(ke({},ue),{localThreadMessages:ue.localThreadMessages.map(function(q){return Jd(q?.reqId,Z?.reqId)?Z:q})})})},[e]),resendMessageStart:k.useCallback(function(Z){return e.setState(function(ue){return"sendingStatus"in Z&&(Z.sendingStatus=cn.PENDING),ke(ke({},ue),{localThreadMessages:ue.localThreadMessages.map(function(q){return Jd(q?.reqId,Z?.reqId)?Z:q})})})},[e])},D=ite({currentChannel:g},{logger:i}),P={sendMessage:ate({isMentionEnabled:s,currentChannel:g,onBeforeSendUserMessage:C,sendMessageStart:I.sendMessageStart,sendMessageFailure:I.sendMessageFailure},{logger:i,pubSub:a}),sendFileMessage:ste({currentChannel:g,onBeforeSendFileMessage:w,sendMessageStart:I.sendMessageStart,sendMessageFailure:I.sendMessageFailure},{logger:i,pubSub:a}),sendVoiceMessage:ote({currentChannel:g,onBeforeSendVoiceMessage:A,sendMessageStart:I.sendMessageStart,sendMessageFailure:I.sendMessageFailure},{logger:i,pubSub:a}),sendMultipleFilesMessage:nte({currentChannel:g,onBeforeSendMultipleFilesMessage:M,publishingModules:[No.THREAD]},{logger:i,pubSub:a})[0],resendMessage:lte({resendMessageStart:I.resendMessageStart,sendMessageSuccess:I.sendMessageSuccess,sendMessageFailure:I.sendMessageFailure,currentChannel:g},{logger:i,pubSub:a})},H={onMessageUpdated:k.useCallback(function(Z,ue){e.setState(function(q){var le,pe,Pe;return((le=q.currentChannel)===null||le===void 0?void 0:le.url)!==Z?.url?q:ke(ke({},q),{parentMessage:((pe=q.parentMessage)===null||pe===void 0?void 0:pe.messageId)===ue?.messageId?ue:q.parentMessage,allThreadMessages:(Pe=q.allThreadMessages)===null||Pe===void 0?void 0:Pe.map(function(qe){return qe?.messageId===ue?.messageId?ue:qe})})})},[e]),onMessageDeleted:k.useCallback(function(Z,ue){e.setState(function(q){var le,pe,Pe,qe;return((le=q.currentChannel)===null||le===void 0?void 0:le.url)!==Z?.url?q:((pe=q?.parentMessage)===null||pe===void 0?void 0:pe.messageId)===ue?ke(ke({},q),{parentMessage:null,parentMessageState:rh.NIL,allThreadMessages:[]}):ke(ke({},q),{allThreadMessages:(Pe=q.allThreadMessages)===null||Pe===void 0?void 0:Pe.filter(function($){return $?.messageId!==ue}),localThreadMessages:(qe=q.localThreadMessages)===null||qe===void 0?void 0:qe.filter(function($){return $?.messageId!==ue})})})},[e]),onMessageDeletedByReqId:k.useCallback(function(Z){e.setState(function(ue){return ke(ke({},ue),{localThreadMessages:ue.localThreadMessages.filter(function(q){return!Jd(q.reqId,Z)})})})},[e])},L={updateMessage:ute({currentChannel:g,isMentionEnabled:s,onMessageUpdated:H.onMessageUpdated},{logger:i,pubSub:a}),deleteMessage:cte({currentChannel:g,onMessageDeleted:H.onMessageDeleted,onMessageDeletedByReqId:H.onMessageDeletedByReqId},{logger:i})},G={initializeThreadListStart:k.useCallback(function(){return e.setState(function(Z){return ke(ke({},Z),{threadListState:Rc.LOADING,allThreadMessages:[]})})},[e]),initializeThreadListSuccess:k.useCallback(function(Z,ue,q){return e.setState(function(le){var pe=ue?.messageId?ue?.createdAt:Z?.createdAt,Pe=q.findIndex(function(fe){return fe?.createdAt===pe}),qe=Pe>-1?q.slice(0,Pe):q,$=Pe>-1?q.slice(Pe):[];return ke(ke({},le),{threadListState:Rc.INITIALIZED,hasMorePrev:Pe===-1||Pe===n3,hasMoreNext:q.length-Pe===r3,allThreadMessages:et(et([],qe,!0),$,!0)})})},[e]),initializeThreadListFailure:k.useCallback(function(){return e.setState(function(Z){return ke(ke({},Z),{threadListState:Rc.LOADING,allThreadMessages:[]})})},[e]),getPrevMessagesStart:k.useCallback(function(){return e.setState(function(Z){return ke({},Z)})},[e]),getPrevMessagesSuccess:k.useCallback(function(Z){return e.setState(function(ue){return ke(ke({},ue),{hasMorePrev:Z.length===n3,allThreadMessages:et(et([],Z,!0),ue.allThreadMessages,!0)})})},[e]),getPrevMessagesFailure:k.useCallback(function(){return e.setState(function(Z){return ke(ke({},Z),{hasMorePrev:!1})})},[e]),getNextMessagesStart:k.useCallback(function(){return e.setState(function(Z){return ke({},Z)})},[e]),getNextMessagesSuccess:k.useCallback(function(Z){return e.setState(function(ue){return ke(ke({},ue),{hasMoreNext:Z.length===r3,allThreadMessages:et(et([],ue.allThreadMessages,!0),Z,!0)})})},[e]),getNextMessagesFailure:k.useCallback(function(){return e.setState(function(Z){return ke(ke({},Z),{hasMoreNext:!1})})},[e])},Y=dte({parentMessage:p,anchorMessage:d?.messageId!==p?.messageId&&d||void 0,logger:i,isReactionEnabled:l,threadListState:_,oldestMessageTimeStamp:((t=y[0])===null||t===void 0?void 0:t.createdAt)||0,latestMessageTimeStamp:((n=y[y.length-1])===null||n===void 0?void 0:n.createdAt)||0,initializeThreadListStart:G.initializeThreadListStart,initializeThreadListSuccess:G.initializeThreadListSuccess,initializeThreadListFailure:G.initializeThreadListFailure,getPrevMessagesStart:G.getPrevMessagesStart,getPrevMessagesSuccess:G.getPrevMessagesSuccess,getPrevMessagesFailure:G.getPrevMessagesFailure,getNextMessagesStart:G.getNextMessagesStart,getNextMessagesSuccess:G.getNextMessagesSuccess,getNextMessagesFailure:G.getNextMessagesFailure}),F=Y.initializeThreadFetcher,ne=Y.fetchPrevThreads,J=Y.fetchNextThreads,re={setCurrentUserId:k.useCallback(function(Z){return e.setState(function(ue){return ke(ke({},ue),{currentUserId:Z})})},[e]),getChannelStart:k.useCallback(function(){return e.setState(function(Z){return ke(ke({},Z),{channelState:Zf.LOADING,currentChannel:null})})},[e]),getChannelSuccess:k.useCallback(function(Z){return e.setState(function(ue){var q,le;return ke(ke({},ue),{channelState:Zf.INITIALIZED,currentChannel:Z,isMuted:((le=(q=Z?.members)===null||q===void 0?void 0:q.find(function(pe){return pe?.userId===ue.currentUserId}))===null||le===void 0?void 0:le.isMuted)||!1,isChannelFrozen:Z?.isFrozen||!1})})},[e]),getChannelFailure:k.useCallback(function(){return e.setState(function(Z){return ke(ke({},Z),{channelState:Zf.INVALID,currentChannel:null})})},[e]),getParentMessageStart:k.useCallback(function(){return e.setState(function(Z){return ke(ke({},Z),{parentMessageState:rh.LOADING,parentMessage:null})})},[e]),getParentMessageSuccess:k.useCallback(function(Z){return e.setState(function(ue){return ke(ke({},ue),{parentMessageState:rh.INITIALIZED,parentMessage:Z})})},[e]),getParentMessageFailure:k.useCallback(function(){return e.setState(function(Z){return ke(ke({},Z),{parentMessageState:rh.INVALID,parentMessage:null})})},[e]),setEmojiContainer:k.useCallback(function(Z){return e.setState(function(ue){return ke(ke({},ue),{emojiContainer:Z})})},[e]),onMessageReceived:k.useCallback(function(Z,ue){return e.setState(function(q){var le,pe,Pe,qe;if(((le=q.currentChannel)===null||le===void 0?void 0:le.url)!==Z?.url||q.hasMoreNext||((pe=ue?.parentMessage)===null||pe===void 0?void 0:pe.messageId)!==((Pe=q?.parentMessage)===null||Pe===void 0?void 0:Pe.messageId))return q;var $=q.allThreadMessages.findIndex(function(fe){return fe.messageId===ue.messageId})>-1;return ke(ke({},q),{parentMessage:((qe=q.parentMessage)===null||qe===void 0?void 0:qe.messageId)===ue?.messageId?ue:q.parentMessage,allThreadMessages:$?q.allThreadMessages.map(function(fe){return fe.messageId===ue.messageId?ue:fe}):et(et([],q.allThreadMessages.filter(function(fe){return fe?.reqId!==ue?.reqId}),!0),[ue],!1)})})},[e]),onReactionUpdated:k.useCallback(function(Z){return e.setState(function(ue){var q,le=ue.parentMessage;((q=ue.parentMessage)===null||q===void 0?void 0:q.messageId)===Z?.messageId&&(le=yk.cloneDeep(ue.parentMessage),le.applyReactionEvent(Z));var pe=ue.allThreadMessages.map(function(Pe){if(Z?.messageId===Pe?.messageId){var qe=yk.cloneDeep(Pe);return qe.applyReactionEvent(Z),qe}return Pe});return ke(ke({},ue),{parentMessage:le,allThreadMessages:et([],pe,!0)})})},[e]),onUserMuted:k.useCallback(function(Z,ue){return e.setState(function(q){var le;return((le=q.currentChannel)===null||le===void 0?void 0:le.url)!==Z?.url||q.currentUserId!==ue?.userId?q:ke(ke({},q),{isMuted:!0})})},[e]),onUserUnmuted:k.useCallback(function(Z,ue){return e.setState(function(q){var le;return((le=q.currentChannel)===null||le===void 0?void 0:le.url)!==Z?.url||q.currentUserId!==ue?.userId?q:ke(ke({},q),{isMuted:!1})})},[e]),onUserBanned:k.useCallback(function(){return e.setState(function(Z){return ke(ke({},Z),{channelState:Zf.NIL,threadListState:Rc.NIL,parentMessageState:rh.NIL,currentChannel:null,parentMessage:null,allThreadMessages:[],hasMorePrev:!1,hasMoreNext:!1})})},[e]),onUserUnbanned:k.useCallback(function(){return e.setState(function(Z){return ke({},Z)})},[e]),onUserLeft:k.useCallback(function(){return e.setState(function(Z){return ke(ke({},Z),{channelState:Zf.NIL,threadListState:Rc.NIL,parentMessageState:rh.NIL,currentChannel:null,parentMessage:null,allThreadMessages:[],hasMorePrev:!1,hasMoreNext:!1})})},[e]),onChannelFrozen:k.useCallback(function(){return e.setState(function(Z){return ke(ke({},Z),{isChannelFrozen:!0})})},[e]),onChannelUnfrozen:k.useCallback(function(){return e.setState(function(Z){return ke(ke({},Z),{isChannelFrozen:!1})})},[e]),onOperatorUpdated:k.useCallback(function(Z){return e.setState(function(ue){var q;return Z?.url===((q=ue.currentChannel)===null||q===void 0?void 0:q.url)?ke(ke({},ue),{currentChannel:Z}):ue})},[e]),onTypingStatusUpdated:k.useCallback(function(Z,ue){return e.setState(function(q){var le;return Jd(Z.url,(le=q.currentChannel)===null||le===void 0?void 0:le.url)?ke(ke({},q),{typingMembers:ue}):q})},[e]),onFileInfoUpdated:k.useCallback(function(Z){var ue=Z.channelUrl,q=Z.requestId,le=Z.index,pe=Z.uploadableFileInfo,Pe=Z.error;return e.setState(function(qe){var $,fe;if(!Jd(ue,($=qe.currentChannel)===null||$===void 0?void 0:$.url)||Pe)return qe;var Ie=qe.localThreadMessages,We=Ie.find(function(He){return Jd(hte(He)&&He.reqId,q)}),Ne=(fe=We.messageParams)===null||fe===void 0?void 0:fe.fileInfoList;return Array.isArray(Ne)&&(Ne[le]=pe),ke(ke({},qe),{localThreadMessages:Ie})})},[e])},Oe=k.useMemo(function(){return ke(ke(ke(ke(ke(ke(ke(ke({},re),{toggleReaction:D}),I),P),H),L),G),{initializeThreadFetcher:F,fetchPrevThreads:ne,fetchNextThreads:J})},[re,D,I,P,H,L,G,F,ne,J]);return{state:c,actions:Oe}},fte=O.createContext(null),pte=function(t){var n=UP().state.currentChannel;return O.createElement(RP,ke({},t,{currentChannel:n}))},Ow={OPERATOR:"operator"},mte=function(t,n){var e=t.sendFileMessage,r=t.sendMultipleFilesMessage,i=t.quoteMessage,a=n.logger,s=Wa().stringSet,l=qa().state.config,c=l.imageCompression,d=l?.uikitUploadSizeLimit,p=l?.uikitMultipleFilesMessageLimit,g=Qx().openModal,_=k.useCallback(function(y){return nl(void 0,void 0,void 0,function(){var C,w,A,M,I;return rl(this,function(D){switch(D.label){case 0:return!e||!r?(a.warning("Channel|useHandleUploadFiles: required functions are undefined",{sendFileMessage:e,sendMultipleFilesMessage:r}),[2]):y.length===0?(a.warning("Channel|useHandleUploadFiles: given file list is empty.",{files:y}),[2]):y.length>p?(a.info("Channel|useHandleUploadFiles: Cannot upload files more than ".concat(p)),g({modalProps:{titleText:s.FILE_UPLOAD_NOTIFICATION__COUNT_LIMIT.replace("%d","".concat(p)),hideFooter:!0},childElement:function(P){var H=P.closeModal;return O.createElement(P0,{type:Vi.PRIMARY,submitText:s.BUTTON__OK,hideCancelButton:!0,onCancel:H,onSubmit:H})}}),[2]):y.some(function(P){return P.size>d})?(a.info("Channel|useHandleUploadFiles: Cannot upload file size exceeding ".concat(d)),g({modalProps:{titleText:s.FILE_UPLOAD_NOTIFICATION__SIZE_LIMIT.replace("%d","".concat(Math.floor(d/LW))),hideFooter:!0},childElement:function(P){var H=P.closeModal;return O.createElement(P0,{type:Vi.PRIMARY,submitText:s.BUTTON__OK,hideCancelButton:!0,onCancel:H,onSubmit:H})}}),[2]):[4,xP({files:y,imageCompression:c,logger:a})];case 1:if(C=D.sent().compressedFiles,w=C,w.length===1)a.info("Channel|useHandleUploadFiles: sending one file."),A=w[0],e(A,i);else if(w.length>1)return a.info("Channel|useHandleUploadFiles: sending multiple files."),M=[],I=[],w.forEach(function(P){kp(P.type)?M.push(P):I.push(P)}),[2,I.reduce(function(P,H){return P.then(function(){return e(H,i)})},(function(){return M.length===0?Promise.resolve():M.length===1?e(M[0],i):r(M,i)})())];return[2]}})})},[e,r,i]);return _},gte=function(t,n){var e,r=t.className,i=t.renderFileUploadIcon,a=t.renderVoiceMessageIcon,s=t.renderSendMessageIcon,l=t.acceptableMimeTypes,c=qa().state.config,d=Jc().isMobile,p=Wa().stringSet,g=c.isOnline,_=c.userMention,y=c.logger,C=c.groupChannel,w=UP(),A=w.state,M=A.currentChannel,I=A.parentMessage,D=A.isMuted,P=A.isChannelFrozen,H=A.allThreadMessages,L=w.actions,G=L.sendMessage,Y=L.sendFileMessage,F=L.sendVoiceMessage,ne=L.sendMultipleFilesMessage,J=k.useRef(),re=C.enableMention,Oe=C.enableVoiceMessage,Z=(e=w.state.isMultipleFilesMessageEnabled)!==null&&e!==void 0?e:c.isMultipleFilesMessageEnabled,ue=t.disabled||!g||D||M?.myRole!==Ow.OPERATOR&&P||I===null,q=mte({sendFileMessage:Y,sendMultipleFilesMessage:ne,quoteMessage:I},{logger:y}),le=k.useState(""),pe=le[0],Pe=le[1],qe=k.useState([]),$=qe[0],fe=qe[1],Ie=k.useState([]),We=Ie[0],Ne=Ie[1],He=k.useState(null),tt=He[0],At=He[1],bt=k.useState([]),vr=bt[0],wn=bt[1],Rn=k.useState(null),xn=Rn[0],Zt=Rn[1],Pn=k.useState(!1),Zn=Pn[0],fn=Pn[1],_r=g&&re&&pe.length>0&&!zee(M)&&!qee(M)&&!M?.isBroadcast;k.useEffect(function(){fn(!1)},[M?.url]);var jn=aP({ref:n||J},{logger:y}),Un=jn?.length<_?.maxMentionCount;return k.useEffect(function(){fe($.filter(function(gt){var Dn=gt.userId,Cr=We.indexOf(Dn);return Cr<0?!1:(We.splice(Cr,1),!0)}))},[We]),M?.isBroadcast&&M?.myRole!==Ow.OPERATOR?O.createElement(O.Fragment,null):O.createElement("div",{className:Bi(Zn?"sendbird-thread-message-input--voice-message":"sendbird-thread-message-input",r)},_r&&O.createElement(pte,{targetNickname:pe,inputEvent:xn??void 0,onUserItemClick:function(gt){gt&&fe(et(et([],$,!0),[gt],!1)),Pe(""),At(gt),Zt(null)},onFocusItemChange:function(){Zt(null)},onFetchUsers:function(gt){wn(gt)},ableAddMention:Un,maxMentionCount:_?.maxMentionCount,maxSuggestionCount:_?.maxSuggestionCount}),Zn?O.createElement(PP,{channel:M,onSubmitClick:function(gt,Dn){F(gt,Dn,I),fn(!1)},onCancelClick:function(){fn(!1)}}):O.createElement(l2,{className:"sendbird-thread-message-input__message-input",messageFieldId:"sendbird-message-input-text-field--thread",channel:M,channelUrl:M?.url,isMobile:d,disabled:ue,acceptableMimeTypes:l,setMentionedUsers:fe,mentionSelectedUser:tt,isMentionEnabled:re,isVoiceMessageEnabled:Oe,isSelectingMultipleFilesEnabled:Z,onVoiceMessageIconClick:function(){fn(!0)},renderFileUploadIcon:i,renderVoiceMessageIcon:a,renderSendMessageIcon:s,ref:n||J,placeholder:M?.isFrozen&&M?.myRole!==Ow.OPERATOR&&p.MESSAGE_INPUT__PLACE_HOLDER__DISABLED||M?.myMutedState===Qo.MUTED&&p.MESSAGE_INPUT__PLACE_HOLDER__MUTED_SHORT||(H.length>0?p.THREAD__INPUT__REPLY_TO_THREAD:p.THREAD__INPUT__REPLY_IN_THREAD),onStartTyping:function(){var gt;(gt=M?.startTyping)===null||gt===void 0||gt.call(M)},onSendMessage:function(gt){var Dn,Cr=gt.message,gn=gt.mentionTemplate;G({message:Cr,mentionedUsers:$,mentionTemplate:gn,quoteMessage:I}),Pe(""),fe([]),(Dn=M?.endTyping)===null||Dn===void 0||Dn.call(M)},onFileUpload:q,onUserMentioned:function(gt){tt?.userId===gt?.userId&&(At(null),Pe(""))},onMentionStringChange:function(gt){Pe(gt)},onMentionedUserIdsUpdated:function(gt){Ne(gt)},onKeyDown:function(gt){return _r&&vr?.length>0&&(gt.key===Kl.Enter&&Un||gt.key===Kl.ArrowUp||gt.key===Kl.ArrowDown)?(Zt(gt),!0):!1}}))};O.forwardRef(gte);var vte=100;function _te(t,n){return t-n}function yte(t){var n=t.hasMore,e=t.hasNext,r=t.onScroll,i=t.scrollRef,a=t.setShowScrollDownButton,s=_S(function(){var l=i?.current;if(l!=null){var c=l.scrollTop,d=l.scrollHeight,p=l.clientHeight,g=_te(d,c);typeof a=="function"&&a(d>c+p+1),n&&j1(c,0,S1)&&r(function(){var _=l.scrollHeight>d;_&&(l.scrollTop=l.scrollHeight-g)}),e&&j1(p+c,d,S1)&&r(function(){var _=l.scrollHeight>d;_&&(l.scrollTop=c)})}});return tte(s,vte,{trailing:!0})}var bte=O.createContext(null),AS=function(){var t=O.useContext(bte);if(!t)throw new Error("OpenChannelContext not found. Use within the OpenChannel module");return t};O.forwardRef(function(t,n){var e=AS(),r=e.currentOpenChannel,i=e.disabled,a=e.handleSendMessage,s=e.handleFileUpload,l=e.amIMuted,c=r,d=k.useContext(Zc).stringSet,p=t.value;function g(){return l?d.MESSAGE_INPUT__PLACE_HOLDER__MUTED:i?d.MESSAGE_INPUT__PLACE_HOLDER__DISABLED:""}return c?O.createElement("div",{className:"sendbird-openchannel-footer"},O.createElement(l2,{channel:r,ref:n,value:p,disabled:i,isVoiceMessageEnabled:!1,onSendMessage:a,onFileUpload:s,placeholder:g()})):null});var V1=function(t){if(window.clipboardData&&window.clipboardData.setData)return window.clipboardData.setData("Text",t);if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var n=document.createElement("textarea");n.textContent=t,n.style.position="fixed",document.body.appendChild(n),n.select();try{return document.execCommand("copy")}catch{return!1}finally{document.body.removeChild(n)}}return!1},IS={PENDING:"pending",FAILED:"failed",SUCCEEDED:"succeeded"},ry=function(t){return t.sender||t._sender},MS=function(t){return t===IS.SUCCEEDED},h2=function(t){return t===IS.PENDING},iy=function(t){return t===IS.FAILED},OS=function(t,n){return ry(t).userId===n},f2=function(t){var n,e=t.message;return e?.messageType==="user"&&((n=e?.message)===null||n===void 0?void 0:n.length)>0},qc=function(t){var n=t.message,e=t.status,r=t.userId;return OS(n,r)&&iy(e)&&n?.isResendable},p2=function(t){var n,e=t.message,r=t.status,i=t.userId;return OS(e,i)&&MS(r)&&((n=e?.isUserMessage)===null||n===void 0?void 0:n.call(e))},Sp=function(t){var n=t.message,e=t.userId;return OS(n,e)},Ete=function(t){var n,e=t.message,r=t.status;return!!(!((n=e?.isFileMessage)===null||n===void 0)&&n.call(e)&&MS(r))},m2=function(t){var n=t.message,e=t.status,r=t.userId;return n.messageType==="user"?Sp({message:n,userId:r})||p2({message:n,status:e,userId:r})||f2({message:n})||qc({message:n,status:e,userId:r}):Sp({message:n,userId:r})||qc({message:n,status:e,userId:r})},g2=function(t){var n=t.message,e=t.parentRef,r=t.resendMessage,i=t.showEdit,a=t.showRemove,s=t.copyToClipboard,l=t.hideMenu,c=t.isEphemeral,d=c===void 0?!1:c,p=n,g=n?.sendingStatus,_=Wa().stringSet,y=qa().state.config.userId,C=n;return O.createElement(zu,{isOpen:!0,menuItems:function(){return O.createElement(Bu,{className:"sendbird-openchannel__mobile-menu",parentRef:e,parentContainRef:e,closeDropdown:l},f2({message:p})&&O.createElement(Na,{className:"sendbird-openchannel-og-message__top__context-menu__copy",onClick:function(){s?.()},testID:"open_channel_mobile_context_menu_copy"},O.createElement(O.Fragment,null,_.CONTEXT_MENU_DROPDOWN__COPY)),!d&&p2({message:n,userId:y,status:g})&&O.createElement(Na,{className:"sendbird-openchannel-og-message__top__context-menu__edit",onClick:function(){i?.()},testID:"open_channel_mobile_context_menu_edit"},O.createElement(O.Fragment,null,_.CONTEXT_MENU_DROPDOWN__EDIT)),qc({message:n,userId:y,status:g})&&O.createElement(Na,{onClick:function(){r?.()},testID:"open_channel_mobile_context_menu_resend"},O.createElement(O.Fragment,null,_.CONTEXT_MENU_DROPDOWN__RESEND)),!d&&Sp({message:n,userId:y})&&O.createElement(Na,{onClick:function(){a?.()},testID:"open_channel_mobile_context_menu_delete"},O.createElement(O.Fragment,null,_.CONTEXT_MENU_DROPDOWN__DELETE)),Ete({message:n,status:g})&&O.createElement(Na,{onClick:function(){l()},testID:"open_channel_mobile_context_menu_download_file"},O.createElement("a",{className:"sendbird-openchannel__mobile-menu-hyperlink",rel:"noopener noreferrer",href:C?.url,target:"_blank"},_.CONTEXT_MENU_DROPDOWN__SAVE)))}})};function Cte(t){var n=t.className,e=t.message,r=t.isOperator,i=t.isEphemeral,a=i===void 0?!1:i,s=t.userId,l=t.resendMessage,c=t.disabled,d=t.showEdit,p=t.showRemove,g=t.chainTop,_=Wa(),y=_.stringSet,C=_.dateLocale,w=$0(),A=w.disableUserProfile,M=w.renderUserProfile,I=k.useRef(),D=k.useRef(),P=k.useRef(),H=k.useRef(),L=k.useState({}),G=L[0],Y=L[1],F=k.useState(!1),ne=F[0],J=F[1],re=e?.sendingStatus,Oe=h2(re),Z=iy(re),ue=ry(e);k.useEffect(function(){var pe;!((pe=I?.current)===null||pe===void 0)&&pe.clientHeight&&I.current.clientHeight>36?Y({top:"8px "}):Y({top:"2px"})},[window.innerWidth]);var q=J0({onLongPress:function(){J(!0)}}),le=Jc().isMobile;return!e||e.messageType!=="user"?O.createElement(O.Fragment,null):O.createElement(O.Fragment,null,O.createElement("div",{className:et(et([],Array.isArray(n)?n:[n],!0),["sendbird-openchannel-user-message"],!1).join(" "),ref:I},O.createElement("div",{className:"sendbird-openchannel-user-message__left"},!g&&O.createElement(zu,{menuTrigger:function(pe){return O.createElement(zc,{className:"sendbird-openchannel-user-message__left__avatar",src:ue.profileUrl||"",ref:D,width:"28px",height:"28px",onClick:function(){A||pe()}})},menuItems:function(pe){return M?M({user:ue,close:pe,currentUserId:s,avatarRef:D}):O.createElement(Bu,{parentRef:D,parentContainRef:D,closeDropdown:pe,style:{paddingTop:"0px",paddingBottom:"0px"}},O.createElement(ey,{user:ue,onSuccess:pe,disableMessaging:!0}))}})),O.createElement("div",{className:"sendbird-openchannel-user-message__right"},!g&&O.createElement("div",{className:"sendbird-openchannel-user-message__right__top"},O.createElement(jt,{className:"sendbird-openchannel-user-message__right__top__sender-name",type:Ft.CAPTION_2,color:r?pt.SECONDARY_3:pt.ONBACKGROUND_2},ue&&(ue.friendName||ue.nickname||ue.userId)),O.createElement(jt,{className:"sendbird-openchannel-user-message__right__top__sent-at",type:Ft.CAPTION_3,color:pt.ONBACKGROUND_3},e?.createdAt&&xg(e?.createdAt,y.DATE_FORMAT__MESSAGE_CREATED_AT,{locale:C}))),O.createElement("div",ke({},le?ke({},q):{},{className:"sendbird-openchannel-user-message__right__bottom",ref:H}),O.createElement(jt,{className:"sendbird-openchannel-user-message__right__bottom__message",type:Ft.BODY_1,color:pt.ONBACKGROUND_1},e?.message,bX(e)&&O.createElement(jt,{key:Cp(),type:Ft.BODY_1,color:pt.ONBACKGROUND_2,className:"sendbird-openchannel-user-message-word"}," ".concat(y.MESSAGE_EDITED," ")))),(Oe||Z)&&O.createElement("div",{className:"sendbird-openchannel-user-message__right__tail"},Oe&&O.createElement(X0,{width:"16px",height:"16px"},O.createElement(tn,{className:"sendbird-openchannel-user-message__right__tail__pending",type:Gt.SPINNER,fillColor:Wt.PRIMARY,width:"16px",height:"16px"})),Z&&O.createElement(tn,{className:"sendbird-openchannel-user-message__right__tail__failed",type:Gt.ERROR,fillColor:Wt.ERROR,width:"16px",height:"16px"}))),!le&&O.createElement("div",{className:"sendbird-openchannel-user-message__context-menu",ref:P,style:G},O.createElement(zu,{menuTrigger:function(pe){return m2({message:e,userId:s,status:re})&&O.createElement(Fc,{className:"sendbird-openchannel-user-message__context-menu--icon",width:"32px",height:"32px",onClick:function(){pe()}},O.createElement(tn,{type:Gt.MORE,fillColor:Wt.CONTENT_INVERSE,width:"24px",height:"24px"}))},menuItems:function(pe){return O.createElement(Bu,{parentRef:P,parentContainRef:P,closeDropdown:pe,openLeft:!0},f2({message:e})&&O.createElement(Na,{className:"sendbird-openchannel-user-message__context-menu__copy",onClick:function(){V1(e.message),pe()},testID:"open_channel_user_message_menu_copy"},y.CONTEXT_MENU_DROPDOWN__COPY),!a&&p2({message:e,userId:s,status:re})&&O.createElement(Na,{className:"sendbird-openchannel-user-message__context-menu__edit",onClick:function(){c||(d(!0),pe())},testID:"open_channel_user_message_menu_edit"},y.CONTEXT_MENU_DROPDOWN__EDIT),qc({message:e,userId:s,status:re})&&O.createElement(Na,{className:"sendbird-openchannel-user-message__context-menu__resend",onClick:function(){l(e),pe()},testID:"open_channel_user_message_menu_resend"},y.CONTEXT_MENU_DROPDOWN__RESEND),!a&&Sp({message:e,userId:s})&&O.createElement(Na,{className:"sendbird-openchannel-user-message__context-menu__delete",onClick:function(){c||(p(!0),pe())},testID:"open_channel_user_message_menu_delete"},y.CONTEXT_MENU_DROPDOWN__DELETE))}}))),ne&&O.createElement(g2,{message:e,parentRef:H,hideMenu:function(){J(!1)},showRemove:function(){J(!1),p(!0)},showEdit:function(){J(!1),d(!0)},copyToClipboard:function(){J(!1),V1(e?.message)},resendMessage:function(){J(!1),l(e)}}))}function wte(t){var n=t.className,e=t.message;return O.createElement("div",{className:et(et([],Array.isArray(n)?n:[n],!0),["sendbird-openchannel-admin-message"],!1).join(" ")},O.createElement(jt,{className:"sendbird-openchannel-admin-message__text",type:Ft.CAPTION_2,color:pt.ONBACKGROUND_2},e.message||""))}function Nte(t){var n,e,r,i=t.message,a=t.isOperator,s=t.isEphemeral,l=s===void 0?!1:s,c=t.className,d=t.disabled,p=t.showEdit,g=t.showRemove,_=t.resendMessage,y=t.chainTop,C=t.userId,w=i?.sendingStatus,A=(n=i.ogMetaData)!==null&&n!==void 0?n:null,M=A?.defaultImage,I=Wa(),D=I.stringSet,P=I.dateLocale,H=Jc().isMobile,L=$0(),G=L.disableUserProfile,Y=L.renderUserProfile,F=k.useState({}),ne=F[0],J=F[1],re=k.useState(!1),Oe=re[0],Z=re[1],ue=function(){return wS(A?.url)},q=J0({onLongPress:function(){return Z(!0)},onClick:ue},{delay:300}),le=k.useRef(),pe=k.useRef(),Pe=k.useRef(),qe=k.useRef(),$=h2(w),fe=iy(w),Ie=ry(i),We=k.useMemo(function(){return gP({messageText:i.message})},[i?.updatedAt,i?.message]);return k.useEffect(function(){var Ne,He;!((Ne=le?.current)===null||Ne===void 0)&&Ne.clientHeight&&((He=le?.current)===null||He===void 0?void 0:He.clientHeight)>36?J({top:"8px "}):J({top:"2px"})},[window.innerWidth]),!i||i.messageType!=="user"?O.createElement(O.Fragment,null):O.createElement(O.Fragment,null,O.createElement("div",ke({className:et(et([],Array.isArray(c)?c:[c],!0),["sendbird-openchannel-og-message"],!1).join(" "),ref:le},H?ke({},q):{}),O.createElement("div",{className:"sendbird-openchannel-og-message__top"},O.createElement("div",{className:"sendbird-openchannel-og-message__top__left"},!y&&O.createElement(zu,{menuTrigger:function(Ne){return O.createElement(zc,{className:"sendbird-openchannel-og-message__top__left__avatar",src:Ie.profileUrl||"",ref:qe,width:"28px",height:"28px",onClick:function(){G||Ne()}})},menuItems:function(Ne){return Y?Y({user:Ie,close:Ne,currentUserId:C,avatarRef:qe}):O.createElement(Bu,{parentRef:qe,parentContainRef:qe,closeDropdown:Ne,style:{paddingTop:"0px",paddingBottom:"0px"}},O.createElement(ey,{user:Ie,onSuccess:Ne,disableMessaging:!0}))}})),O.createElement("div",{className:"sendbird-openchannel-og-message__top__right"},!y&&O.createElement("div",{className:"sendbird-openchannel-og-message__top__right__title"},O.createElement(jt,{className:"sendbird-openchannel-og-message__top__right__title__sender-name",type:Ft.CAPTION_2,color:a?pt.SECONDARY_3:pt.ONBACKGROUND_2},Ie&&(Ie.friendName||Ie.nickname||Ie.userId)),O.createElement(jt,{className:"sendbird-openchannel-og-message__top__right__title__sent-at",type:Ft.CAPTION_3,color:pt.ONBACKGROUND_3},i?.createdAt&&xg(i?.createdAt,D.DATE_FORMAT__MESSAGE_CREATED_AT,{locale:P}))),O.createElement("div",{className:"sendbird-openchannel-og-message__top__right__description"},O.createElement(jt,{className:"sendbird-openchannel-og-message__top__right__description__message",type:Ft.BODY_1,color:pt.ONBACKGROUND_1},O.createElement(t3,{tokens:We}),((e=i?.updatedAt)!==null&&e!==void 0?e:0)>0&&O.createElement(jt,{key:Cp(),className:"sendbird-openchannel-og-message--word",type:Ft.BODY_1,color:pt.ONBACKGROUND_2},D.MESSAGE_EDITED)))),!H&&O.createElement("div",{className:"sendbird-openchannel-og-message__top__context-menu",ref:pe,style:ne},O.createElement(zu,{menuTrigger:function(Ne){return m2({message:i,userId:C,status:w})&&O.createElement(Fc,{className:"sendbird-openchannel-og-message__top__context-menu--icon",width:"32px",height:"32px",onClick:function(){Ne()}},O.createElement(tn,{type:Gt.MORE,fillColor:Wt.CONTENT_INVERSE,width:"24px",height:"24px"}))},menuItems:function(Ne){return O.createElement(Bu,{parentRef:pe,parentContainRef:pe,closeDropdown:Ne,openLeft:!0},f2({message:i})&&O.createElement(Na,{className:"sendbird-openchannel-og-message__top__context-menu__copy",onClick:function(){V1(i.message),Ne()},testID:"open_channel_og_message_menu_copy"},D.CONTEXT_MENU_DROPDOWN__COPY),!l&&p2({message:i,userId:C,status:w})&&O.createElement(Na,{className:"sendbird-openchannel-og-message__top__context-menu__edit",onClick:function(){d||(p(!0),Ne())},testID:"open_channel_og_message_menu_edit"},D.CONTEXT_MENU_DROPDOWN__EDIT),qc({message:i,userId:C,status:w})&&O.createElement(Na,{className:"sendbird-openchannel-og-message__top__context-menu__resend",onClick:function(){_(i),Ne()},testID:"open_channel_og_message_menu_resend"},D.CONTEXT_MENU_DROPDOWN__RESEND),!l&&Sp({message:i,userId:C})&&O.createElement(Na,{className:"sendbird-openchannel-og-message__top__context-menu__delete",onClick:function(){d||(g(!0),Ne())},testID:"open_channel_og_message_menu_delete"},D.CONTEXT_MENU_DROPDOWN__DELETE))}}))),O.createElement("div",{className:"sendbird-openchannel-og-message__bottom"},O.createElement("div",{className:"sendbird-openchannel-og-message__bottom__og-tag",ref:Pe},A?.url&&O.createElement(jt,{className:"sendbird-openchannel-og-message__bottom__og-tag__url",type:Ft.CAPTION_3,color:pt.ONBACKGROUND_2},A.url),A?.title&&O.createElement(_P,{className:"sendbird-openchannel-og-message__bottom__og-tag__title",src:(r=A.url)!==null&&r!==void 0?r:"",type:Ft.SUBTITLE_2,color:pt.PRIMARY},A.title),A?.description&&O.createElement(jt,{className:"sendbird-openchannel-og-message__bottom__og-tag__description",type:Ft.BODY_2,color:pt.ONBACKGROUND_1},A.description),A?.url&&O.createElement("div",{className:"sendbird-openchannel-og-message__bottom__og-tag__thumbnail",role:"button",onClick:ue,onKeyDown:ue,tabIndex:0},M&&O.createElement(vo,{className:"sendbird-openchannel-og-message__bottom__og-tag__thumbnail__image",url:M.url||"",alt:M.alt||"",width:"334px",height:"189px",defaultComponent:O.createElement("div",{className:"sendbird-openchannel-og-message__bottom__og-tag__thumbnail__image--placeholder"},O.createElement(tn,{type:Gt.THUMBNAIL_NONE,width:"56px",height:"56px"}))}))),($||fe)&&O.createElement("div",{className:"sendbird-openchannel-og-message__top__right__tail"},$&&O.createElement(X0,{width:"16px",height:"16px"},O.createElement(tn,{className:"sendbird-openchannel-og-message__top__right__tail__pending",type:Gt.SPINNER,fillColor:Wt.PRIMARY,width:"16px",height:"16px"})),fe&&O.createElement(tn,{className:"sendbird-openchannel-og-message__top__right__tail__failed",type:Gt.ERROR,fillColor:Wt.ERROR,width:"16px",height:"16px"})))),Oe&&O.createElement(g2,{message:i,parentRef:Pe,hideMenu:function(){Z(!1)},showRemove:function(){Z(!1),g(!0)},showEdit:function(){Z(!1),p(!0)},copyToClipboard:function(){Z(!1),V1(i?.message)},resendMessage:function(){Z(!1),_(i)}}))}var fg={IMAGE:"IMAGE",VIDEO:"VIDEO",UNSUPPORTED:"UNSUPPORTED"},bk={IMAGE:["image/jpeg","image/jpg","image/png","image/gif","image/webp"],VIDEO:["video/mpeg","video/ogg","video/webm","video/mp4"]},Tte=function(t){return bk.IMAGE.indexOf(t)>=0?fg.IMAGE:bk.VIDEO.indexOf(t)>=0?fg.VIDEO:fg.UNSUPPORTED};function Ste(t){var n,e=t.className,r=t.message,i=t.isOperator,a=t.isEphemeral,s=a===void 0?!1:a,l=t.disabled,c=t.userId,d=t.chainTop,p=t.onClick,g=t.showRemove,_=t.resendMessage,y=r.type,C=r.url,w=r.thumbnails,A=r.localUrl,M=r?.sendingStatus,I=w&&w.length>0&&w[0].url||null,D=Wa(),P=D.stringSet,H=D.dateLocale,L=$0(),G=L.disableUserProfile,Y=L.renderUserProfile,F=k.useState(360),ne=F[0],J=F[1],re=k.useState(!1),Oe=re[0],Z=re[1],ue=k.useRef(null),q=k.useRef(null),le=k.useRef(null),pe=k.useRef(null),Pe=J0({onLongPress:function(){Z(!0)},onClick:function(){p(!0)}}),qe=Jc().isMobile,$=k.useMemo(function(){return function(He){return function(tt){var At=tt.style;return O.createElement("div",{style:At},O.createElement(tn,{type:He,fillColor:Wt.ON_BACKGROUND_2,width:"56px",height:"56px"}))}}},[]),fe=MS(M),Ie=h2(M),We=iy(M),Ne=ry(r);return k.useEffect(function(){var He,tt,At=((tt=(He=ue?.current)===null||He===void 0?void 0:He.clientWidth)!==null&&tt!==void 0?tt:0)-80;J(At>360?360:At)},[]),O.createElement(O.Fragment,null,O.createElement("div",{className:et(et([],Array.isArray(e)?e:[e],!0),["sendbird-openchannel-thumbnail-message"],!1).join(" "),ref:ue},O.createElement("div",{className:"sendbird-openchannel-thumbnail-message__left"},!d&&O.createElement(zu,{menuTrigger:function(He){return O.createElement(zc,{className:"sendbird-openchannel-thumbnail-message__left__avatar",src:Ne.profileUrl||"",ref:pe,width:"28px",height:"28px",onClick:function(){G||He()}})},menuItems:function(He){return Y?Y({user:Ne,close:He,currentUserId:c,avatarRef:pe}):O.createElement(Bu,{parentRef:pe,parentContainRef:pe,closeDropdown:He,style:{paddingTop:"0px",paddingBottom:"0px"}},O.createElement(ey,{user:Ne,onSuccess:He,disableMessaging:!0}))}})),O.createElement("div",{className:"sendbird-openchannel-thumbnail-message__right"},!d&&O.createElement("div",{className:"sendbird-openchannel-thumbnail-message__right__title"},O.createElement(jt,{className:"sendbird-openchannel-thumbnail-message__right__title__sender-name",type:Ft.CAPTION_2,color:i?pt.SECONDARY_3:pt.ONBACKGROUND_2},Ne&&(Ne.friendName||Ne.nickname||Ne.userId)),O.createElement(jt,{className:"sendbird-openchannel-thumbnail-message__right__title__sent-at",type:Ft.CAPTION_3,color:pt.ONBACKGROUND_3},r?.createdAt&&xg(r.createdAt,P.DATE_FORMAT__MESSAGE_CREATED_AT,{locale:H}))),O.createElement("div",{className:"sendbird-openchannel-thumbnail-message__right__body",ref:q},O.createElement("div",ke({className:"sendbird-openchannel-thumbnail-message__right__body__wrap",role:"button",onClick:function(){fe&&p(!0)},onKeyDown:function(){fe&&p(!0)},tabIndex:0},qe?ke({},Pe):{}),O.createElement("div",{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__overlay"}),(n={},n[fg.VIDEO]=C||A?O.createElement("div",{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__video"},I?O.createElement(vo,{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__video",url:I,width:ne,height:"270px",alt:"image",placeHolder:$(Gt.PLAY)}):O.createElement("video",{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__video__video"},O.createElement("source",{src:C||A,type:y})),O.createElement(tn,{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__video__icon",type:Gt.PLAY,fillColor:Wt.ON_BACKGROUND_2,width:"56px",height:"56px"})):O.createElement(tn,{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__video--icon",type:Gt.PHOTO,fillColor:Wt.ON_BACKGROUND_2,width:"56px",height:"56px"}),n[fg.IMAGE]=C||A?O.createElement(vo,{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__image",url:I||C||A||"",alt:"image",width:ne,height:"270px",placeHolder:$(Gt.PHOTO)}):O.createElement(tn,{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__image--icon",type:Gt.PHOTO,fillColor:Wt.ON_BACKGROUND_2,width:"56px",height:"56px"}),n[fg.UNSUPPORTED]=O.createElement(tn,{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__unknown",type:Gt.PHOTO,fillColor:Wt.ON_BACKGROUND_2,width:"56px",height:"56px"}),n)[Tte(y)])),(Ie||We)&&O.createElement("div",{className:"sendbird-openchannel-thumbnail-message__right__tail"},Ie&&O.createElement(X0,{width:"16px",height:"16px"},O.createElement(tn,{className:"sendbird-openchannel-thumbnail-message__right__tail__pending",type:Gt.SPINNER,fillColor:Wt.PRIMARY,width:"16px",height:"16px"})),We&&O.createElement(tn,{className:"sendbird-openchannel-thumbnail-message__right__tail__failed",type:Gt.ERROR,fillColor:Wt.ERROR,width:"16px",height:"16px"}))),!qe&&O.createElement("div",{className:"sendbird-openchannel-thumbnail-message__context-menu",ref:le},(qc({message:r,userId:c,status:M})||!s)&&O.createElement(zu,{menuTrigger:function(He){return m2({message:r,userId:c,status:M})&&O.createElement(Fc,{className:"sendbird-openchannel-thumbnail-message__context-menu--icon",width:"32px",height:"32px",onClick:He},O.createElement(tn,{type:Gt.MORE,fillColor:Wt.CONTENT_INVERSE,width:"24px",height:"24px"}))},menuItems:function(He){return O.createElement(Bu,{parentRef:le,parentContainRef:le,closeDropdown:He,openLeft:!0},qc({message:r,userId:c,status:M})&&O.createElement(Na,{onClick:function(){_(r),He()},testID:"open_channel_thumbnail_message_menu_resend"},P.CONTEXT_MENU_DROPDOWN__RESEND),!s&&Sp({message:r,userId:c})&&O.createElement(Na,{onClick:function(){l||(g(!0),He())},testID:"open_channel_thumbnail_message_menu_delete"},P.CONTEXT_MENU_DROPDOWN__DELETE))}}))),Oe&&O.createElement(g2,{message:r,parentRef:q,hideMenu:function(){Z(!1)},showRemove:function(){Z(!1),g(!0)},resendMessage:function(){Z(!1),_(r)}}))}var Ek=function(t){var n=/(\.mp3)$/i,e=/(\.gif)$/i;return n.test(t)?Gt.FILE_AUDIO:e.test(t)?Gt.GIF:Gt.FILE_DOCUMENT},Ate=function(t,n){if(t==null)return"";if(t.length<=n)return t;var e="...",r=e.length,i=n-r,a=Math.ceil(i/2),s=Math.floor(i/2);return t.substr(0,a)+e+t.substr(t.length-s)};function Ite(t){var n=t.className,e=t.message,r=t.isOperator,i=t.isEphemeral,a=i===void 0?!1:i,s=t.userId,l=t.disabled,c=t.chainTop,d=t.showRemove,p=t.resendMessage,g=e?.sendingStatus,_=Wa(),y=_.dateLocale,C=_.stringSet,w=k.useRef(null),A=k.useRef(null),M=k.useRef(null),I=$0(),D=I.disableUserProfile,P=I.renderUserProfile,H=Jc().isMobile,L=function(){return wS(e.url)},G=h2(g),Y=iy(g),F=ry(e),ne=k.useState(!1),J=ne[0],re=ne[1],Oe=J0({onLongPress:function(){H&&re(!0)},onClick:L},{delay:300});return O.createElement(O.Fragment,null,O.createElement("div",{className:et(et([],Array.isArray(n)?n:[n],!0),["sendbird-openchannel-file-message"],!1).join(" "),ref:A},O.createElement("div",{className:"sendbird-openchannel-file-message__left"},!c&&O.createElement(zu,{menuTrigger:function(Z){return O.createElement(zc,{className:"sendbird-openchannel-file-message__left__avatar",src:F.profileUrl||"",ref:M,width:"28px",height:"28px",onClick:function(){D||Z()}})},menuItems:function(Z){return P?P({user:F,close:Z,currentUserId:s,avatarRef:M}):O.createElement(Bu,{parentRef:M,parentContainRef:M,closeDropdown:Z,style:{paddingTop:"0px",paddingBottom:"0px"}},O.createElement(ey,{user:F,onSuccess:Z,disableMessaging:!0}))}})),O.createElement("div",{className:"sendbird-openchannel-file-message__right"},!c&&O.createElement("div",{className:"sendbird-openchannel-file-message__right__title"},O.createElement(jt,{className:"sendbird-openchannel-file-message__right__title__sender-name",type:Ft.CAPTION_2,color:r?pt.SECONDARY_3:pt.ONBACKGROUND_2},F&&(F.friendName||F.nickname||F.userId)),O.createElement(jt,{className:"sendbird-openchannel-file-message__right__title__sent-at",type:Ft.CAPTION_3,color:pt.ONBACKGROUND_3},e?.createdAt&&xg(e.createdAt,C.DATE_FORMAT__MESSAGE_CREATED_AT,{locale:y}))),O.createElement("div",ke({className:"sendbird-openchannel-file-message__right__body"},H?ke({},Oe):{}),Ek(e.url)&&O.createElement(tn,{className:"sendbird-openchannel-file-message__right__body__icon",type:Ek(e.url),fillColor:Wt.PRIMARY,width:"48px",height:"48px"}),O.createElement(TS,{className:"sendbird-openchannel-file-message__right__body__file-name",onClick:L},O.createElement(jt,{className:"sendbird-openchannel-file-message__right__body__file-name__label",type:Ft.BODY_1,color:pt.ONBACKGROUND_1},Ate(e.name||e.url,40)))),(G||Y)&&O.createElement("div",{className:"sendbird-openchannel-file-message__right__tail"},G&&O.createElement(X0,{width:"16px",height:"16px"},O.createElement(tn,{className:"sendbird-openchannel-file-message__right__tail__pending",type:Gt.SPINNER,fillColor:Wt.PRIMARY,width:"16px",height:"16px"})),Y&&O.createElement(tn,{className:"sendbird-openchannel-file-message__right__tail__failed",type:Gt.ERROR,fillColor:Wt.ERROR,width:"16px",height:"16px"}))),!H&&O.createElement("div",{className:"sendbird-openchannel-file-message__context-menu",ref:w},(qc({message:e,userId:s,status:g})||!a)&&O.createElement(zu,{menuTrigger:function(Z){return m2({message:e,userId:s,status:g})&&O.createElement(Fc,{className:"sendbird-openchannel-file-message__context-menu__icon",width:"32px",height:"32px",onClick:Z},O.createElement(tn,{type:Gt.MORE,width:"24px",height:"24px"}))},menuItems:function(Z){return O.createElement(Bu,{parentRef:w,parentContainRef:w,closeDropdown:Z,openLeft:!0},qc({message:e,userId:s,status:g})&&O.createElement(Na,{onClick:function(){l||(p(e),Z())},testID:"open_channel_file_message_context_menu_resend"},C.CONTEXT_MENU_DROPDOWN__RESEND),!a&&Sp({message:e,userId:s})&&O.createElement(Na,{onClick:function(){l||(d(!0),Z())},testID:"open_channel_file_message_context_menu_delete"},C.CONTEXT_MENU_DROPDOWN__DELETE))}}))),J&&O.createElement(g2,{message:e,hideMenu:function(){re(!1)},parentRef:A,showRemove:function(){re(!1),d(!0)}}))}function Mte(t){var n=t.message,e=t.onCloseModal,r=t.onDeleteMessage,i=k.useContext(Zc).stringSet;return O.createElement(NS,{onCancel:e,onSubmit:r,submitText:i.MESSAGE_MENU__DELETE,titleText:Gee(i,n)})}var Yo={ADMIN:"ADMIN",USER:"USER",FILE:"FILE",THUMBNAIL:"THUMBNAIL",OG:"OG",UNKNOWN:"UNKNOWN"},Ck={FAILED:"failed",PENDING:"pending"},Ote=function(t,n){var e,r,i=n?.isOgMessageEnabledInOpenChannel;return!((e=t?.isUserMessage)===null||e===void 0)&&e.call(t)||t?.messageType==="user"?t?.ogMetaData&&i?Yo.OG:Yo.USER:!((r=t?.isAdminMessage)===null||r===void 0)&&r.call(t)?Yo.ADMIN:t?.messageType==="file"?kp(t.type)||a2(t.type)?Yo.THUMBNAIL:Yo.FILE:Yo.UNKNOWN};function kte(t){var n,e,r=t.message,i=t.chainTop,a=t.chainBottom,s=t.hasSeparator,l=t.renderMessage,c=AS(),d=c.currentOpenChannel,p=c.deleteMessage,g=c.updateMessage,_=c.resendMessage,y=Wa(),C=y.dateLocale,w=y.stringSet,A=d?.isFrozen,M=qa().state,I=(e=M?.config)===null||e===void 0?void 0:e.userId,D=M.config.openChannel.enableOgtag,P;r?.messageType!=="admin"&&(P=r?.sender);var H=k.useState(!1),L=H[0],G=H[1],Y=k.useState(!1),F=Y[0],ne=Y[1],J=k.useState(!1),re=J[0],Oe=J[1],Z=k.useRef(null),ue=!1;return P&&r?.messageType!=="admin"&&(ue=I===P.userId||r?.sendingStatus===Ck.PENDING||r?.sendingStatus===Ck.FAILED),l?O.createElement("div",{className:"sendbird-open-channel-msg-hoc sendbird-msg--scroll-ref","data-testid":"sendbird-message-hoc"},l({message:r,chainTop:i,chainBottom:a})):r?.messageType==="user"&&L?O.createElement(l2,{isEdit:!0,channel:d,disabled:A,ref:Z,message:r,onUpdateMessage:function(q){var le=q.messageId,pe=q.message;g(le,pe),G(!1)},onCancelEdit:function(){G(!1)}}):O.createElement("div",{className:"sendbird-open-channel-msg-hoc sendbird-msg--scroll-ref","data-testid":"sendbird-message-hoc"},O.createElement(O.Fragment,null,s&&r?.createdAt&&O.createElement(CZ,null,O.createElement(jt,{type:Ft.CAPTION_2,color:pt.ONBACKGROUND_2},xg(r?.createdAt,w.DATE_FORMAT__MESSAGE_LIST__DATE_SEPARATOR,{locale:C}))),(n={},n[Yo.ADMIN]=(function(){if(r?.messageType==="admin")return O.createElement(wte,{message:r})})(),n[Yo.FILE]=(function(){var q;if(r?.messageType==="file")return O.createElement(Ite,{message:r,isOperator:d?.isOperator((q=r?.sender)===null||q===void 0?void 0:q.userId),isEphemeral:d?.isEphemeral,disabled:A,userId:I,showRemove:ne,resendMessage:_,chainTop:i,chainBottom:a})})(),n[Yo.OG]=(function(){var q;if(r?.messageType==="user"&&D)return O.createElement(Nte,{message:r,isOperator:d?.isOperator((q=r?.sender)===null||q===void 0?void 0:q.userId),isEphemeral:d?.isEphemeral,userId:I,showEdit:G,disabled:A,showRemove:ne,resendMessage:_,chainTop:i,chainBottom:a})})(),n[Yo.THUMBNAIL]=(function(){var q;if(r?.messageType==="file")return O.createElement(Ste,{message:r,isOperator:d?.isOperator((q=r?.sender)===null||q===void 0?void 0:q.userId),isEphemeral:d?.isEphemeral,disabled:A,userId:I,showRemove:ne,resendMessage:_,onClick:Oe,chainTop:i,chainBottom:a})})(),n[Yo.USER]=(function(){var q;if(r?.messageType==="user")return O.createElement(Cte,{message:r,isOperator:d?.isOperator((q=r?.sender)===null||q===void 0?void 0:q.userId),isEphemeral:d?.isEphemeral,userId:I,disabled:A,showEdit:G,showRemove:ne,resendMessage:_,chainTop:i,chainBottom:a})})(),n[Yo.UNKNOWN]=(function(){})(),n)[Ote(r,{isOgMessageEnabledInOpenChannel:D})],F&&O.createElement(Mte,{message:r,onCloseModal:function(){return ne(!1)},onDeleteMessage:function(){r?.messageType!=="admin"&&p(r)}}),re&&r?.messageType==="file"&&O.createElement(DJ,{onClose:function(){return Oe(!1)},message:r,onDelete:function(){return p(r)},isByMe:ue})))}function Rte(t,n){var e=AS(),r=e.isMessageGroupingEnabled,i=r===void 0?!0:r,a=e.allMessages,s=e.hasMore,l=e.onScroll,c=qa().state,d=Wa().stringSet,p=c.config.userId,g=k.useRef(null),_=n||g,y=k.useState(!1),C=y[0],w=y[1],A=function(){_&&"current"in _&&_.current&&(_.current.scrollTo(0,_.current.scrollHeight),w(!1))},M=yte({setShowScrollDownButton:w,hasMore:s,onScroll:l,scrollRef:_}),I=k.useMemo(function(){var D;return a.length>0?a.map(function(P,H){var L,G=a[H-1],Y=a[H-1],F=G&&G.createdAt,ne=P?.createdAt,J=!(F&&uJ(ne,F)),re=i?Vee(G,P,Y,d):[!1,!1],Oe=re[0],Z=re[1],ue=((L=P?.sender)===null||L===void 0?void 0:L.userId)===p,q=P?.messageId||P?.reqId;return O.createElement(gJ,{message:P,isByMe:ue,key:q},O.createElement(kte,{message:P,chainTop:Oe,chainBottom:Z,hasSeparator:J,renderMessage:t?.renderMessage}))}):((D=t?.renderPlaceHolderEmptyList)===null||D===void 0?void 0:D.call(t))||O.createElement(FX,{className:"sendbird-openchannel-conversation-scroll__container__place-holder",type:ma.NO_MESSAGES})},[a]);return O.createElement("div",{className:"sendbird-openchannel-conversation-scroll"},O.createElement("div",{className:"sendbird-openchannel-conversation-scroll__container"},O.createElement("div",{className:"sendbird-openchannel-conversation-scroll__container__padding"}),O.createElement("div",{className:["sendbird-openchannel-conversation-scroll__container__item-container",a.length>0?"":"no-messages"].join(" "),onScroll:M,ref:_},I)),C&&O.createElement("div",{className:"sendbird-openchannel-conversation-scroll__container__scroll-bottom-button",onClick:A,onKeyDown:A,tabIndex:0,role:"button"},O.createElement(tn,{width:"24px",height:"24px",type:Gt.CHEVRON_DOWN,fillColor:Wt.CONTENT})))}O.forwardRef(Rte);O.createContext(null);k.createContext({openedListKeys:[],addOpenedListKey:vi,removeOpenedListKey:vi,clearOpenedListKeys:vi,allowMultipleOpen:!1});var i3;(function(t){t.GROUP="group",t.SUPERGROUP="supergroup",t.BROADCAST="broadcast"})(i3||(i3={}));O.createContext(null);i3.GROUP;var wk;(function(t){t.CHANNEL_LIST="CHANNEL_LIST",t.CHANNEL="CHANNEL",t.CHANNEL_SETTINGS="CHANNEL_SETTINGS",t.MESSAGE_SEARCH="MESSAGE_SEARCH",t.THREAD="THREAD"})(wk||(wk={}));const Dte={botNickname:"Assistant"},xte=({isOpen:t,onClose:n})=>{const[e,r]=k.useState("");k.useEffect(()=>{let a=localStorage.getItem("chatbot_user_id");a||(a=`user_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,localStorage.setItem("chatbot_user_id",a)),r(a)},[]);const i=()=>{const a=`user_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;localStorage.setItem("chatbot_user_id",a),r(a)};return!t||!e?null:oe.jsxs("div",{className:"chatbot-widget",children:[oe.jsxs("div",{className:"chatbot-header",children:[oe.jsxs("div",{className:"chatbot-header-left",children:[oe.jsx("div",{className:"chatbot-avatar",children:""}),oe.jsxs("div",{className:"chatbot-info",children:[oe.jsx("h3",{children:Dte.botNickname}),oe.jsx("span",{className:"chatbot-status",children:" Online"})]})]}),oe.jsxs("div",{className:"chatbot-header-actions",children:[oe.jsx("button",{className:"chatbot-action-btn",onClick:i,title:"Reset Chat",children:oe.jsx(b9,{})}),oe.jsx("button",{className:"chatbot-close-btn",onClick:n,"aria-label":"Close",children:oe.jsx(SR,{})})]})]}),oe.jsx("div",{className:"chatbot-body",children:oe.jsxs("div",{className:"chatbot-setup-message",children:[oe.jsx("div",{className:"setup-icon",children:""}),oe.jsx("h4",{children:"Chatbot Setup Required"}),oe.jsxs("p",{children:["Please configure your keys in ",oe.jsx("code",{children:".env"}),":"]}),oe.jsxs("ol",{children:[oe.jsx("li",{children:oe.jsx("code",{children:"VITE_SENDBIRD_APP_ID"})}),oe.jsx("li",{children:oe.jsx("code",{children:"VITE_UPSTAGE_API_KEY"})}),oe.jsx("li",{children:oe.jsx("code",{children:"VITE_SENDBIRD_BOT_TOKEN"})})]}),oe.jsxs("p",{className:"setup-note",children:["See ",oe.jsx("code",{children:"sendbird_setup_guide.md"})," for details."]})]})})]})},Pte=()=>{const t=Kc();return oe.jsx(TF,{location:t,children:oe.jsx(mR,{path:"/",element:oe.jsx(A9,{})})},t.pathname)};function Ute(){const[t,n]=k.useState(!0),[e,r]=k.useState(!1),i=()=>{r(!e)},a=()=>{n(!1)};return oe.jsx(i9,{children:oe.jsxs(YF,{children:[oe.jsx(N9,{}),oe.jsxs("div",{className:"App",children:[oe.jsx(v4,{mode:"wait",children:t?oe.jsx(w9,{onComplete:a},"intro"):oe.jsxs(cg.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},children:[oe.jsx(a9,{}),oe.jsx("main",{children:oe.jsx(Pte,{})}),oe.jsx(C9,{})]},"main-content")}),!t&&oe.jsxs(oe.Fragment,{children:[oe.jsx(xte,{isOpen:e,onClose:()=>r(!1)}),oe.jsx(I9,{onClick:i,isOpen:e})]})]})]})})}JP.createRoot(document.getElementById("root")).render(oe.jsx(k.StrictMode,{children:oe.jsx(Ute,{})}));const Lte=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));export{Fte as B,HR as H,X as Z,za as a,l1 as c,W as j,zP as q,$3 as t,Se as w,_g as y};
